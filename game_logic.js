const _0x4e50d5=_0x5782;(function(_0x53fc21,_0x2c1aa9){const _0x37829c=_0x5782,_0x30701c=_0x53fc21();while(!![]){try{const _0x33cc9=parseInt(_0x37829c(0x293))/0x1*(parseInt(_0x37829c(0x262))/0x2)+-parseInt(_0x37829c(0x1f4))/0x3+parseInt(_0x37829c(0x21d))/0x4*(-parseInt(_0x37829c(0x2cc))/0x5)+-parseInt(_0x37829c(0x23b))/0x6+-parseInt(_0x37829c(0x30e))/0x7+-parseInt(_0x37829c(0x2c6))/0x8*(parseInt(_0x37829c(0x270))/0x9)+parseInt(_0x37829c(0x1ef))/0xa*(parseInt(_0x37829c(0x2c4))/0xb);if(_0x33cc9===_0x2c1aa9)break;else _0x30701c['push'](_0x30701c['shift']());}catch(_0x4fa95b){_0x30701c['push'](_0x30701c['shift']());}}}(_0x87a5,0xf3277));function generateAttackPathInternal(_0x2c4247){const _0x464843=_0x5782;try{if(!_0x2c4247||!gameCanvas)return[];const _0x35f612=_0x2c4247['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x2c4247['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x41bcb7=_0x2c4247['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0x2c4247[_0x464843(0x2e9)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x27807a=_0x35f612*0.5,_0x19e65b=gameCanvas['width'],_0x3fe922=gameCanvas[_0x464843(0x2d1)];let _0x27c74d=[];const _0x5f331b={'x':_0x2c4247['x'],'y':_0x2c4247['y']},_0x2fe3c2=Math[_0x464843(0x29d)](_0x3fe922*0.06,_0x41bcb7*1.8),_0x56cf22=Math[_0x464843(0x29d)](_0x19e65b*0.04,_0x35f612*1.2),_0x3db1da=_0x2c4247['x']+_0x35f612/0x2<_0x19e65b/0x2?0x1:-0x1,_0x444c4d={'x':_0x5f331b['x']-_0x3db1da*_0x56cf22*0.6,'y':_0x5f331b['y']-_0x2fe3c2};_0x444c4d['x']=Math['max'](_0x27807a,Math[_0x464843(0x29d)](_0x19e65b-_0x27807a-_0x35f612,_0x444c4d['x'])),_0x444c4d['y']=Math[_0x464843(0x209)](_0x27807a,_0x444c4d['y']);const _0x422cc5={'x':_0x5f331b['x']+_0x3db1da*_0x56cf22*0.1,'y':_0x5f331b['y']-_0x2fe3c2*1.4},_0x2ff052={'x':_0x444c4d['x']+_0x3db1da*_0x56cf22*0.3,'y':_0x5f331b['y']-_0x2fe3c2*1.5},_0x42f086={'p0':_0x5f331b,'p1':_0x422cc5,'p2':_0x2ff052,'p3':_0x444c4d};_0x27c74d[_0x464843(0x26e)](_0x42f086);const _0x55225b=_0x444c4d,_0x502148=_0x3fe922*0.45,_0x2602a5=_0x19e65b*0.22,_0x19ae64=_0x3fe922*0.28,_0x8e03a9=0.5,_0x4231b9=0.6,_0x34ec65=_0x3fe922*0.85,_0x2cd58c=Math[_0x464843(0x214)](Math['random']()*0x3);let _0x17de3e=[];if(_0x2cd58c===0x0){const _0x598eec=_0x502148+Math['random']()*_0x3fe922*0.1,_0x247c22=_0x2602a5+Math[_0x464843(0x30c)]()*_0x19e65b*0.08,_0x1117ec=_0x19ae64+Math[_0x464843(0x30c)]()*_0x3fe922*0.08,_0x4731f5=_0x55225b['x']+_0x3db1da*_0x247c22*0.5,_0x4fd06d=Math[_0x464843(0x29d)](_0x34ec65,_0x55225b['y']+_0x598eec),_0x466bd3=_0x4731f5+_0x3db1da*_0x247c22*0.5,_0x4c69ab=Math[_0x464843(0x209)](_0x55225b['y']+0x14,_0x4fd06d-_0x1117ec),_0x1c5ba4=_0x466bd3-_0x3db1da*_0x247c22*0.9,_0x58674b=Math[_0x464843(0x209)](_0x55225b['y']+0x28,_0x4c69ab+_0x1117ec*0.6),_0x33e542=_0x1c5ba4-_0x3db1da*_0x247c22*0.3,_0x33a1e7=_0x3fe922+_0x41bcb7*0x2,_0x1a9f54=Math[_0x464843(0x209)](_0x27807a,Math[_0x464843(0x29d)](_0x19e65b-_0x27807a-_0x35f612,_0x4731f5)),_0x93fcaf=Math['max'](_0x27807a,Math[_0x464843(0x29d)](_0x19e65b-_0x27807a-_0x35f612,_0x466bd3)),_0x421b35=Math[_0x464843(0x209)](_0x27807a,Math[_0x464843(0x29d)](_0x19e65b-_0x27807a-_0x35f612,_0x1c5ba4)),_0x29547f={'x':_0x55225b['x'],'y':_0x55225b['y']+_0x598eec*_0x4231b9*0.5},_0x2b4388={'x':_0x1a9f54-_0x3db1da*_0x247c22*_0x8e03a9,'y':_0x4fd06d},_0x21890b={'x':_0x1a9f54,'y':_0x4fd06d},_0xf78242={'x':_0x1a9f54+_0x3db1da*_0x247c22*_0x8e03a9,'y':_0x4fd06d},_0x218cc7={'x':_0x93fcaf,'y':_0x4c69ab+_0x1117ec*_0x4231b9},_0x12253c={'x':_0x93fcaf,'y':_0x4c69ab},_0x13eff3={'x':_0x93fcaf,'y':_0x4c69ab-_0x1117ec*_0x4231b9*0.5},_0x2d64c5={'x':_0x421b35+_0x3db1da*_0x247c22*_0x8e03a9,'y':_0x58674b},_0x476a52={'x':_0x421b35,'y':_0x58674b},_0xd2a9d0={'x':_0x476a52['x'],'y':_0x476a52['y']+_0x3fe922*0.1},_0x4db4c1={'x':_0x33e542,'y':_0x33a1e7-_0x3fe922*0.2},_0x59dc30={'x':_0x33e542,'y':_0x33a1e7};_0x17de3e=[{'p0':_0x55225b,'p1':_0x29547f,'p2':_0x2b4388,'p3':_0x21890b},{'p0':_0x21890b,'p1':_0xf78242,'p2':_0x218cc7,'p3':_0x12253c},{'p0':_0x12253c,'p1':_0x13eff3,'p2':_0x2d64c5,'p3':_0x476a52},{'p0':_0x476a52,'p1':_0xd2a9d0,'p2':_0x4db4c1,'p3':_0x59dc30}];}else{if(_0x2cd58c===0x1){const _0xdb91e8=_0x502148*0.8+Math['random']()*_0x3fe922*0.1,_0x3ebbc9=_0x2602a5*1.2+Math[_0x464843(0x30c)]()*_0x19e65b*0.1,_0x2eae94=_0x19ae64*0.7+Math['random']()*_0x3fe922*0.1,_0xf6b7e1=_0x55225b['x']+_0x3db1da*_0x3ebbc9*0.4,_0x174028=Math[_0x464843(0x29d)](_0x34ec65-_0x2eae94*0.5,_0x55225b['y']+_0xdb91e8*0.6),_0x39a121=_0xf6b7e1+_0x3db1da*_0x3ebbc9*0.6,_0x59e6ca=Math[_0x464843(0x29d)](_0x34ec65,_0x174028+_0x2eae94),_0x503b79=_0x39a121-_0x3db1da*_0x3ebbc9*0.5,_0xcdcbb1=_0x3fe922+_0x41bcb7*0x2,_0x37b4f5=Math[_0x464843(0x209)](_0x27807a,Math[_0x464843(0x29d)](_0x19e65b-_0x27807a-_0x35f612,_0xf6b7e1)),_0x4dcff1=Math['max'](_0x27807a,Math['min'](_0x19e65b-_0x27807a-_0x35f612,_0x39a121)),_0x495f4c={'x':_0x55225b['x']-_0x3db1da*_0x3ebbc9*0.1,'y':_0x55225b['y']+_0xdb91e8*0.3},_0x46cbfe={'x':_0x37b4f5-_0x3db1da*_0x3ebbc9*_0x8e03a9*0.8,'y':_0x174028+_0x2eae94*_0x4231b9*0.4},_0x3e5779={'x':_0x37b4f5,'y':_0x174028},_0x5782c0={'x':_0x37b4f5+_0x3db1da*_0x3ebbc9*_0x8e03a9*0.8,'y':_0x174028-_0x2eae94*_0x4231b9*0.4},_0x287458={'x':_0x4dcff1+_0x3db1da*_0x3ebbc9*_0x8e03a9*0.6,'y':_0x59e6ca+_0x2eae94*_0x4231b9*0.5},_0xa530c1={'x':_0x4dcff1,'y':_0x59e6ca},_0x4ccc3a={'x':_0x4dcff1-_0x3db1da*_0x3ebbc9*0.2,'y':_0x59e6ca+_0x3fe922*0.1},_0x38ccb6={'x':_0x503b79,'y':_0xcdcbb1-_0x3fe922*0.3},_0x4db1b1={'x':_0x503b79,'y':_0xcdcbb1};_0x17de3e=[{'p0':_0x55225b,'p1':_0x495f4c,'p2':_0x46cbfe,'p3':_0x3e5779},{'p0':_0x3e5779,'p1':_0x5782c0,'p2':_0x287458,'p3':_0xa530c1},{'p0':_0xa530c1,'p1':_0x4ccc3a,'p2':_0x38ccb6,'p3':_0x4db1b1}];}else{const _0x230fa4=_0x502148*0.6+Math[_0x464843(0x30c)]()*_0x3fe922*0.05,_0x4847a8=_0x2602a5*0.7+Math[_0x464843(0x30c)]()*_0x19e65b*0.05,_0x155259=_0x19ae64*0.6+Math['random']()*_0x3fe922*0.05,_0x378ac8=_0x155259*1.5,_0x4b8e29=_0x55225b['x']+_0x3db1da*_0x4847a8*0.5,_0x2a428f=Math['min'](_0x34ec65-_0x378ac8,_0x55225b['y']+_0x230fa4),_0xf48dee=_0x4b8e29+_0x3db1da*_0x4847a8*0.5,_0x2e9cb5=_0x2a428f+_0x155259,_0x5c4806=_0xf48dee-_0x3db1da*_0x4847a8*0.8,_0x1c4f78=Math['min'](_0x34ec65,_0x2e9cb5+_0x378ac8*0.7),_0x29b803=_0x5c4806+_0x3db1da*_0x4847a8*0.4,_0x4d4d3f=_0x1c4f78+_0x155259*0.8,_0x2e4ad3=_0x29b803,_0x452e1e=_0x3fe922+_0x41bcb7*0x2,_0x94e72c=Math['max'](_0x27807a,Math['min'](_0x19e65b-_0x27807a-_0x35f612,_0x4b8e29)),_0x138cda=Math[_0x464843(0x209)](_0x27807a,Math[_0x464843(0x29d)](_0x19e65b-_0x27807a-_0x35f612,_0xf48dee)),_0x1324c7=Math[_0x464843(0x209)](_0x27807a,Math[_0x464843(0x29d)](_0x19e65b-_0x27807a-_0x35f612,_0x5c4806)),_0x245116=Math[_0x464843(0x209)](_0x27807a,Math['min'](_0x19e65b-_0x27807a-_0x35f612,_0x29b803)),_0x5eddfb={'x':_0x55225b['x'],'y':_0x55225b['y']+_0x230fa4*0.5},_0x4a77ba={'x':_0x94e72c-_0x3db1da*_0x4847a8*_0x8e03a9,'y':_0x2a428f+_0x155259*_0x4231b9*0.3},_0x2ec956={'x':_0x94e72c,'y':_0x2a428f},_0x5a5dff={'x':_0x94e72c+_0x3db1da*_0x4847a8*_0x8e03a9,'y':_0x2a428f-_0x155259*_0x4231b9*0.3},_0x5045ee={'x':_0x138cda+_0x3db1da*_0x4847a8*_0x8e03a9,'y':_0x2e9cb5+_0x155259*_0x4231b9*0.5},_0x179482={'x':_0x138cda,'y':_0x2e9cb5},_0x50cf64={'x':_0x138cda-_0x3db1da*_0x4847a8*_0x8e03a9,'y':_0x2e9cb5-_0x155259*_0x4231b9*0.5},_0x194325={'x':_0x1324c7-_0x3db1da*_0x4847a8*_0x8e03a9,'y':_0x1c4f78+_0x155259*_0x4231b9*0.4},_0x17af2f={'x':_0x1324c7,'y':_0x1c4f78},_0x1413f3={'x':_0x1324c7+_0x3db1da*_0x4847a8*_0x8e03a9,'y':_0x1c4f78-_0x155259*_0x4231b9*0.4},_0x57ff5e={'x':_0x245116+_0x3db1da*_0x4847a8*_0x8e03a9,'y':_0x4d4d3f+_0x155259*_0x4231b9*0.6},_0xe047fe={'x':_0x245116,'y':_0x4d4d3f},_0x156e4e={'x':_0x245116-_0x3db1da*_0x4847a8*0.1,'y':_0x4d4d3f+_0x3fe922*0.05},_0x34fa29={'x':_0x2e4ad3,'y':_0x452e1e-_0x3fe922*0.2},_0x4ee7f3={'x':_0x2e4ad3,'y':_0x452e1e};_0x17de3e=[{'p0':_0x55225b,'p1':_0x5eddfb,'p2':_0x4a77ba,'p3':_0x2ec956},{'p0':_0x2ec956,'p1':_0x5a5dff,'p2':_0x5045ee,'p3':_0x179482},{'p0':_0x179482,'p1':_0x50cf64,'p2':_0x194325,'p3':_0x17af2f},{'p0':_0x17af2f,'p1':_0x1413f3,'p2':_0x57ff5e,'p3':_0xe047fe},{'p0':_0xe047fe,'p1':_0x156e4e,'p2':_0x34fa29,'p3':_0x4ee7f3}];}}return _0x27c74d['push'](..._0x17de3e),_0x27c74d;}catch(_0x337a4f){return console[_0x464843(0x2e1)](_0x464843(0x226)+_0x2c4247?.['id']+':',_0x337a4f),[];}}window[_0x4e50d5(0x311)]=generateAttackPathInternal;function resetAllMessagesInternal(){showReadyMessage=![],isShowingIntro=![],showCsHitsMessage=![],showPerfectMessage=![],showCsBonusScoreMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],isShowingCaptureMessage=![],isShowingPlayerGameOverMessage=![],isShowingCoopPlayersReady=![],csHitsMessageStartTime=0x0,perfectMessageStartTime=0x0,csBonusScoreMessageStartTime=0x0,csClearMessageStartTime=0x0,extraLifeMessageStartTime=0x0,readyMessageStartTime=0x0,captureMessageStartTime=0x0,playerGameOverMessageStartTime=0x0,csCompletionDelayStartTime=0x0,introDisplayStartTime=0x0,coopPlayersReadyStartTime=0x0;}window[_0x4e50d5(0x2b8)]=resetAllMessagesInternal;function stopAllGameSoundsInternal(){const _0x33abb4=_0x4e50d5;if(typeof soundPaths===_0x33abb4(0x2aa)&&soundPaths!==null&&typeof stopSound===_0x33abb4(0x203))for(const _0x5729ac in soundPaths){stopSound(_0x5729ac);}isGridSoundPlaying=![];}window['stopAllGameSounds']=stopAllGameSoundsInternal;function resetGameInternal(){const _0x50af42=_0x4e50d5;score=0x0,level=0x1,playerLives=0x3,window['highScoreHolderId']=null;if(isTwoPlayerMode){player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,currentPlayer=0x1,player1CompletedLevel=-0x1,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x50af42(0x2c1)]();else player1LifeThresholdsMet=new Set();if(player2LifeThresholdsMet instanceof Set)player2LifeThresholdsMet[_0x50af42(0x2c1)]();else player2LifeThresholdsMet=new Set();player1IsDualShipActive=![],player2IsDualShipActive=![],isPlayer1ShipCaptured=![],isPlayer2ShipCaptured=![],isPlayer1WaitingForRespawn=![],isPlayer2WaitingForRespawn=![],isPlayer1Invincible=![],isPlayer2Invincible=![],player1RespawnTime=0x0,player2RespawnTime=0x0,player1InvincibilityEndTime=0x0,player2InvincibilityEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![];if(selectedGameMode===_0x50af42(0x320)){playerLives=0x0;if(gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x50af42(0x2d1)]>0x0){const _0x881b24=gameCanvas[_0x50af42(0x2c3)]/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x5acb53=gameCanvas['width']/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x26445e=gameCanvas[_0x50af42(0x2d1)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;ship1={'x':_0x881b24,'y':_0x26445e,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x881b24,'id':'p1'},ship2={'x':_0x5acb53,'y':_0x26445e,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x5acb53,'id':'p2'},(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x50af42(0x2b3))&&(smoothedShip1X=_0x881b24,smoothedShip2X=_0x5acb53,aiShip1TargetEnemy=null,aiShip2TargetEnemy=null,aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0,aiShip1LastShotTime=0x0,aiShip2LastShotTime=0x0,aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);}ship=null;}else{if(!ship&&gameCanvas&&gameCanvas[_0x50af42(0x2c3)]>0x0&&gameCanvas['height']>0x0)ship={'x':Math[_0x50af42(0x237)](gameCanvas[_0x50af42(0x2c3)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x50af42(0x2d1)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x50af42(0x268)},ship['targetX']=ship['x'];else ship&&gameCanvas&&gameCanvas[_0x50af42(0x2c3)]>0x0&&gameCanvas['height']>0x0&&(ship['x']=Math[_0x50af42(0x237)](gameCanvas[_0x50af42(0x2c3)]/0x2-SHIP_WIDTH/0x2),ship[_0x50af42(0x29c)]=ship['x'],ship['y']=gameCanvas[_0x50af42(0x2d1)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}}else{player1Lives=0x3,player1Score=0x0,player1MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x50af42(0x2c1)]();else player1LifeThresholdsMet=new Set();if(!ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x50af42(0x2d1)]>0x0)ship={'x':Math['round'](gameCanvas[_0x50af42(0x2c3)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x50af42(0x2d1)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':'main'},ship['targetX']=ship['x'];else ship&&gameCanvas&&gameCanvas[_0x50af42(0x2c3)]>0x0&&gameCanvas[_0x50af42(0x2d1)]>0x0&&(ship['x']=Math[_0x50af42(0x237)](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),ship['targetX']=ship['x'],ship['y']=gameCanvas[_0x50af42(0x2d1)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isDualShipActive=![];if(!isTwoPlayerMode)player1IsDualShipActive=![];fallingShips=[],visualOffsetX=-0x14,gameOverSequenceStartTime=0x0,isShowingResultsScreen=![],gameStartTime=Date[_0x50af42(0x2e7)](),gameJustStarted=!![],gameJustStartedAndWaveLaunched=![],currentGridOffsetX=0x0,gridMoveDirection=0x1,gridJustCompleted=![],isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,lastGridFireCheckTime=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,scoreEarnedThisCS=0x0,challengingStageEnemiesHit=0x0,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined,aiCanShootTime=0x0,aiLastShotTime=0x0,!(selectedGameMode===_0x50af42(0x320)&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x50af42(0x2b3)))&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0),playerLastShotTime=0x0,player1LastShotTime=0x0,player2LastShotTime=0x0,p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isShowingCoopPlayersReady=![],coopPlayersReadyStartTime=0x0,resetWaveInternal();}window[_0x4e50d5(0x246)]=resetGameInternal;function resetWaveInternal(){const _0x2639d4=_0x4e50d5;isWaveTransitioning=![],readyForNextWave=![],readyForNextWaveReset=![],isEntrancePhaseActive=!![],firstEnemyLanded=![],captureAttemptMadeThisLevel=![],gameJustStartedAndWaveLaunched=![],aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![],enemies=[],bullets=[],enemyBullets=[],explosions=[],floatingScores=[],hitSparks=[];Array[_0x2639d4(0x2c2)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x2639d4(0x20b)](clearTimeout);enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;const _0x40f425=getWaveTypeInternal(level);isChallengingStage=_0x40f425===_0x2639d4(0x318),isFullGridWave=_0x40f425===_0x2639d4(0x32e),challengingStageEnemiesHit=0x0,scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null;(isFullGridWave||isChallengingStage)&&(isEntrancePhaseActive=![]);const _0x5a8589=isShowingDemoText;resetAllMessagesInternal();_0x5a8589&&(isShowingDemoText=!![]);if(selectedGameMode===_0x2639d4(0x320)&&level===0x1)isShowingIntro=![],introStep=0x2;else{if(isTwoPlayerMode&&selectedGameMode===_0x2639d4(0x21c)||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2639d4(0x336)){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(isChallengingStage){introStep=0x3,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(level===0x1&&!isTwoPlayerMode){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{introStep=0x2,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}}}}isShowingIntro&&!(selectedGameMode===_0x2639d4(0x320)&&level===0x1)&&(introDisplayStartTime=Date[_0x2639d4(0x2e7)]());playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],currentWaveDefinition=generateWaveDefinitionInternal(level);if(selectedGameMode===_0x2639d4(0x320)){if(gameCanvas&&gameCanvas[_0x2639d4(0x2c3)]>0x0&&gameCanvas[_0x2639d4(0x2d1)]>0x0){const _0x4c7175=ship1&&player1Lives>0x0,_0x21a9e1=ship2&&player2Lives>0x0,_0x1d100e=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2639d4(0x2b3)){if(_0x4c7175&&_0x21a9e1){const _0x4002cb=gameCanvas[_0x2639d4(0x2c3)]/0x2-gameCanvas[_0x2639d4(0x2c3)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1&&(ship1[_0x2639d4(0x29c)]=_0x4002cb,ship1['x']=_0x4002cb,smoothedShip1X=_0x4002cb,ship1['y']=_0x1d100e);const _0x4103d0=gameCanvas[_0x2639d4(0x2c3)]/0x2+gameCanvas[_0x2639d4(0x2c3)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2[_0x2639d4(0x29c)]=_0x4103d0,ship2['x']=_0x4103d0,smoothedShip2X=_0x4103d0,ship2['y']=_0x1d100e);}else{if(_0x4c7175&&ship1){const _0x32a408=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x531e97=Math[_0x2639d4(0x237)](gameCanvas[_0x2639d4(0x2c3)]/0x2-_0x32a408/0x2);ship1[_0x2639d4(0x29c)]=_0x531e97,ship1['x']=_0x531e97,smoothedShip1X=_0x531e97,ship1['y']=_0x1d100e;}else{if(_0x21a9e1&&ship2){const _0x153771=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x3ea5f2=Math[_0x2639d4(0x237)](gameCanvas[_0x2639d4(0x2c3)]/0x2-_0x153771/0x2);ship2['targetX']=_0x3ea5f2,ship2['x']=_0x3ea5f2,smoothedShip2X=_0x3ea5f2,ship2['y']=_0x1d100e;}}}}else{if(_0x4c7175&&ship1)ship1['y']=_0x1d100e;if(_0x21a9e1&&ship2)ship2['y']=_0x1d100e;}}}else{if(ship&&gameCanvas&&gameCanvas[_0x2639d4(0x2c3)]>0x0&&gameCanvas[_0x2639d4(0x2d1)]>0x0&&(forceCenterShipNextReset||!isManualControl||isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)){let _0x4d9927=ship[_0x2639d4(0x2c3)];if(isDualShipActive)_0x4d9927=DUAL_SHIP_OFFSET_X+SHIP_WIDTH;ship['x']=Math[_0x2639d4(0x237)](gameCanvas[_0x2639d4(0x2c3)]/0x2-_0x4d9927/0x2),ship[_0x2639d4(0x29c)]=ship['x'],ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isPlayerTwoAI&&selectedGameMode===_0x2639d4(0x21c)&&currentPlayer===0x2)smoothedShipX=ship['x'];}else ship&&gameCanvas&&gameCanvas[_0x2639d4(0x2c3)]>0x0&&(ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);}forceCenterShipNextReset=![];if(!isManualControl&&aiNeedsStabilization&&selectedGameMode!==_0x2639d4(0x320)&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x2639d4(0x21c)&&currentPlayer===0x2)){aiStabilizationEndTime=Date[_0x2639d4(0x2e7)]()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}else{if(isPlayerTwoAI&&selectedGameMode===_0x2639d4(0x21c)&&currentPlayer===0x2&&aiNeedsStabilization){aiStabilizationEndTime=Date['now']()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}}}window['resetWave']=resetWaveInternal;function getWaveTypeInternal(_0x4953af){const _0x3bd909=_0x4e50d5,_0x185fcf=(_0x4953af-0x1)%0x4;switch(_0x185fcf){case 0x0:return _0x3bd909(0x32e);case 0x1:return _0x3bd909(0x2a0);case 0x2:return _0x3bd909(0x318);case 0x3:return _0x3bd909(0x2f3);default:return _0x3bd909(0x21e);}}window[_0x4e50d5(0x2f4)]=getWaveTypeInternal;function generateWaveDefinitionInternal(_0x543393){const _0x46286e=_0x4e50d5;let _0x1dfba8=[];currentWavePatternIndex=-0x1;const _0xd9c14d=getWaveTypeInternal(_0x543393);if(typeof waveEntrancePatterns===_0x46286e(0x2c9)||!Array['isArray'](waveEntrancePatterns)||waveEntrancePatterns['length']<0x2)return console[_0x46286e(0x2e1)]('CRITICAL:\x20waveEntrancePatterns\x20not\x20defined\x20or\x20insufficient\x20for\x20wave\x20generation.'),[];if(_0xd9c14d===_0x46286e(0x318))_0x1dfba8=[];else{if(_0xd9c14d==='full_grid'){currentWavePatternIndex=0x0;const _0x447252=waveEntrancePatterns[0x0];if(!_0x447252||_0x447252[_0x46286e(0x208)]===0x0)console['error'](_0x46286e(0x324)),_0x1dfba8=[];else try{_0x1dfba8=JSON[_0x46286e(0x2f2)](JSON['stringify'](_0x447252),(_0x16c634,_0x363d92)=>{const _0x1c9ec3=_0x46286e;return _0x363d92&&typeof _0x363d92===_0x1c9ec3(0x2aa)&&_0x363d92[_0x1c9ec3(0x2e9)]===ENEMY3_TYPE&&typeof _0x363d92[_0x1c9ec3(0x2e8)]===_0x1c9ec3(0x2c9)&&(_0x363d92[_0x1c9ec3(0x2e8)]=![]),_0x363d92;});}catch(_0x274c20){console[_0x46286e(0x2e1)](_0x46286e(0x2a9),_0x274c20),_0x1dfba8=[];}}else{if(_0xd9c14d===_0x46286e(0x2a0)){currentWavePatternIndex=0x0;const _0x3c9bff=waveEntrancePatterns[0x0];if(!_0x3c9bff||_0x3c9bff['length']===0x0)console[_0x46286e(0x2e1)](_0x46286e(0x2bb)),_0x1dfba8=[];else try{_0x1dfba8=JSON[_0x46286e(0x2f2)](JSON[_0x46286e(0x2e3)](_0x3c9bff),(_0x41a92a,_0x232ab9)=>{const _0x212297=_0x46286e;return _0x232ab9&&typeof _0x232ab9===_0x212297(0x2aa)&&_0x232ab9['type']===ENEMY3_TYPE&&typeof _0x232ab9[_0x212297(0x2e8)]===_0x212297(0x2c9)&&(_0x232ab9[_0x212297(0x2e8)]=![]),_0x232ab9;});}catch(_0x35b917){console['error'](_0x46286e(0x2be),_0x35b917),_0x1dfba8=[];}}else{if(_0xd9c14d===_0x46286e(0x2f3)){currentWavePatternIndex=0x1;const _0x5b6020=waveEntrancePatterns[0x1];if(!_0x5b6020||_0x5b6020[_0x46286e(0x208)]===0x0)console['error']('CRITICAL:\x20Entrance\x20flight\x202\x20wave\x20pattern\x20(index\x201)\x20is\x20missing\x20or\x20empty.'),_0x1dfba8=[];else try{_0x1dfba8=JSON[_0x46286e(0x2f2)](JSON[_0x46286e(0x2e3)](_0x5b6020),(_0x2f31e2,_0x1143ca)=>{const _0x45f405=_0x46286e;return _0x1143ca&&typeof _0x1143ca===_0x45f405(0x2aa)&&_0x1143ca[_0x45f405(0x2e9)]===ENEMY3_TYPE&&typeof _0x1143ca['hasCapturedShip']===_0x45f405(0x2c9)&&(_0x1143ca[_0x45f405(0x2e8)]=![]),_0x1143ca;});}catch(_0x5be266){console['error'](_0x46286e(0x31c),_0x5be266),_0x1dfba8=[];}}else console[_0x46286e(0x2b5)]('Unknown\x20wave\x20type\x20for\x20level\x20'+_0x543393+':\x20'+_0xd9c14d),_0x1dfba8=[];}}}if(_0xd9c14d!=='challenging_stage'){if(typeof normalWaveEntrancePaths===_0x46286e(0x2c9)||Object[_0x46286e(0x316)](normalWaveEntrancePaths)[_0x46286e(0x208)]===0x0)return console[_0x46286e(0x2e1)](_0x46286e(0x307)),_0x1dfba8;for(let _0x33279b=_0x1dfba8[_0x46286e(0x208)]-0x1;_0x33279b>=0x0;_0x33279b--){const _0x13c901=_0x1dfba8[_0x33279b];if(!normalWaveEntrancePaths?.[_0x13c901[_0x46286e(0x299)]]){_0x1dfba8['splice'](_0x33279b,0x1);continue;}if(_0x13c901[_0x46286e(0x30d)]&&Array[_0x46286e(0x2c2)](_0x13c901['enemies'])){for(let _0x2c036a=_0x13c901[_0x46286e(0x30d)][_0x46286e(0x208)]-0x1;_0x2c036a>=0x0;_0x2c036a--){const _0xeb7b8c=_0x13c901[_0x46286e(0x30d)][_0x2c036a];(!_0xeb7b8c||!normalWaveEntrancePaths?.[_0xeb7b8c['entrancePathId']])&&_0x13c901[_0x46286e(0x30d)][_0x46286e(0x24f)](_0x2c036a,0x1),_0xeb7b8c&&_0xeb7b8c['type']===ENEMY3_TYPE&&typeof _0xeb7b8c['hasCapturedShip']==='undefined'&&(_0xeb7b8c[_0x46286e(0x2e8)]=![]);}_0x13c901[_0x46286e(0x30d)][_0x46286e(0x208)]===0x0&&_0x1dfba8[_0x46286e(0x24f)](_0x33279b,0x1);}else _0x1dfba8[_0x46286e(0x24f)](_0x33279b,0x1);}}return _0x1dfba8;}window[_0x4e50d5(0x20c)]=generateWaveDefinitionInternal;const createBulletSimple=(_0x3369f0,_0x475d28=null)=>{const _0x23041d=_0x4e50d5;let _0x81ec46=null,_0x4959c8=![];if(isTwoPlayerMode&&selectedGameMode==='coop'){const _0x30d017=ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured,_0x2075cd=ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured;if(_0x30d017&&_0x2075cd)_0x81ec46=Math[_0x23041d(0x30c)]()<0.5?ship1:ship2,_0x4959c8=!![];else{if(_0x30d017)_0x81ec46=ship1,_0x4959c8=!![];else _0x2075cd&&(_0x81ec46=ship2,_0x4959c8=!![]);}}else ship&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn&&(_0x81ec46=ship,_0x4959c8=!![]);if(!_0x3369f0||!isInGameState||!_0x4959c8||!_0x81ec46)return![];const _0x101446=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x3f7fd9=_0x475d28?_0x475d28['x']:_0x3369f0['x']+_0x3369f0['width']/0x2,_0x535414=_0x475d28?_0x475d28['y']:_0x3369f0['y']+_0x3369f0['height']/0x2;let _0x1b40f9=0x0,_0xe703c7=_0x101446;const _0x2e227e=_0x81ec46['x']+_0x81ec46[_0x23041d(0x2c3)]/0x2-_0x3f7fd9,_0x3f3484=_0x81ec46['y']+_0x81ec46[_0x23041d(0x2d1)]/0x2-_0x535414,_0x16ab19=Math[_0x23041d(0x233)](_0x2e227e*_0x2e227e+_0x3f3484*_0x3f3484);if(_0x16ab19>0x0){let _0x1b41e5=0x0;!isChallengingStage&&(_0x1b41e5=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x3659c2=Math[_0x23041d(0x238)](_0x3f3484,_0x2e227e);_0x1b40f9=Math[_0x23041d(0x330)](_0x3659c2)*_0x101446*_0x1b41e5,_0xe703c7=Math[_0x23041d(0x233)](_0x101446**0x2-_0x1b40f9**0x2),_0xe703c7=Math['max'](_0x101446*(0x1-_0x1b41e5)*0.5,_0xe703c7);if(_0x3f3484<0x0&&_0xe703c7>0x0){}if(_0x3f3484<0x0)_0xe703c7=Math['abs'](_0xe703c7);return enemyBullets[_0x23041d(0x26e)]({'x':_0x3f7fd9-ENEMY_BULLET_WIDTH/0x2,'y':_0x535414,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x1b40f9,'vy':_0xe703c7,'type':_0x3369f0[_0x23041d(0x2e9)]}),!![];}return![];};function scheduleSingleEntranceSquadron(_0xad8053,_0x53b6ab,_0x36e12d){const _0x431da1=_0x4e50d5;if(isFullGridWave||isChallengingStage)return console['warn'](_0x431da1(0x2d5)+level+_0x431da1(0x2ee)+isFullGridWave+_0x431da1(0x269)+isChallengingStage+_0x431da1(0x30b)),_0xad8053?.['enemies']?.[_0x431da1(0x208)]>0x0&&(enemiesSpawnedThisWave+=_0xad8053['enemies'][_0x431da1(0x208)],squadronCompletionStatus[_0x53b6ab]&&(squadronCompletionStatus[_0x53b6ab][_0x431da1(0x2b4)]=squadronCompletionStatus[_0x53b6ab][_0x431da1(0x1f9)])),![];const _0x1e5808=normalWaveEntrancePaths,_0x2fbfb3=_0xad8053[_0x431da1(0x299)],_0x32a89b=_0x1e5808[_0x2fbfb3];if(!_0x32a89b||_0x32a89b['length']===0x0)return console['error'](_0x431da1(0x291)+_0x2fbfb3+'\x20for\x20squadron\x20'+_0x53b6ab+_0x431da1(0x2de)),_0xad8053?.[_0x431da1(0x30d)]?.[_0x431da1(0x208)]>0x0&&(enemiesSpawnedThisWave+=_0xad8053[_0x431da1(0x30d)][_0x431da1(0x208)],squadronCompletionStatus[_0x53b6ab]&&(squadronCompletionStatus[_0x53b6ab]['completed']=squadronCompletionStatus[_0x53b6ab][_0x431da1(0x1f9)])),![];const _0x272a40=setTimeout(()=>{const _0x4931b1=_0x431da1,_0x476a44=enemySpawnTimeouts[_0x4931b1(0x224)](_0x272a40);if(_0x476a44>-0x1)enemySpawnTimeouts['splice'](_0x476a44,0x1);let _0x13b660=![];isTwoPlayerMode&&selectedGameMode===_0x4931b1(0x320)?_0x13b660=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x13b660=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x13b660||isFullGridWave){_0xad8053?.[_0x4931b1(0x30d)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0xad8053[_0x4931b1(0x30d)][_0x4931b1(0x208)],squadronCompletionStatus[_0x53b6ab]&&(squadronCompletionStatus[_0x53b6ab]['completed']=squadronCompletionStatus[_0x53b6ab][_0x4931b1(0x1f9)]));return;}try{squadronEntranceFiringStatus[_0x53b6ab]?(squadronEntranceFiringStatus[_0x53b6ab][_0x4931b1(0x24c)]=Date[_0x4931b1(0x2e7)]()+_0x36e12d,squadronEntranceFiringStatus[_0x53b6ab]['hasFired']=![]):(console[_0x4931b1(0x2b5)](_0x4931b1(0x250)+_0x53b6ab+_0x4931b1(0x255)),squadronEntranceFiringStatus[_0x53b6ab]={'hasFired':![],'scheduledStartTime':Date['now']()+_0x36e12d});const _0x2385da=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x130f4d=_0x2385da*0x2,_0x374fa3=0x1;_0xad8053['enemies'][_0x4931b1(0x20b)]((_0x356d89,_0x45db2d)=>{const _0x3ebd9b=_0x4931b1;if(!_0x356d89||!_0x356d89['type']||typeof _0x356d89[_0x3ebd9b(0x266)]===_0x3ebd9b(0x2c9)||typeof _0x356d89[_0x3ebd9b(0x276)]===_0x3ebd9b(0x2c9)||!_0x356d89[_0x3ebd9b(0x2ad)]){console['error'](_0x3ebd9b(0x2d6)+_0x53b6ab+_0x3ebd9b(0x29a)+_0x2fbfb3+_0x3ebd9b(0x248)+_0x45db2d+_0x3ebd9b(0x304)),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x53b6ab]&&squadronCompletionStatus[_0x53b6ab][_0x3ebd9b(0x2b4)]++;return;}const _0x3c69e7=_0x1e5808[_0x356d89[_0x3ebd9b(0x2ad)]];(!_0x3c69e7||_0x3c69e7[_0x3ebd9b(0x208)]===0x0)&&console['warn'](_0x3ebd9b(0x312)+_0x356d89[_0x3ebd9b(0x2ad)]+_0x3ebd9b(0x202)+_0x53b6ab+_0x3ebd9b(0x321)+_0x45db2d+_0x3ebd9b(0x2ed)+_0x2fbfb3+'\x22.');let _0xf0c801=0x0;const _0x4075cc=getWaveType(level),_0x3cc123=_0x4075cc===_0x3ebd9b(0x2f3)&&(_0x53b6ab===0x2||_0x53b6ab===0x3);if(_0x3cc123){const _0x3647df=Math['floor'](_0x45db2d/0x2);_0x45db2d%0x2===0x0?_0xf0c801=_0x3647df*_0x130f4d:_0xf0c801=_0x3647df*_0x130f4d+_0x374fa3;}else _0xf0c801=_0x45db2d*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x255c5=setTimeout(()=>{const _0x2c389f=_0x3ebd9b,_0x14d92b=enemySpawnTimeouts[_0x2c389f(0x224)](_0x255c5);if(_0x14d92b>-0x1)enemySpawnTimeouts[_0x2c389f(0x24f)](_0x14d92b,0x1);let _0x15dcb3=![];isTwoPlayerMode&&selectedGameMode===_0x2c389f(0x320)?_0x15dcb3=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x15dcb3=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x15dcb3||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x53b6ab]&&squadronCompletionStatus[_0x53b6ab]['completed']++;return;}try{let _0x47d031=_0x356d89[_0x2c389f(0x2e9)],_0x47424c=_0x47d031===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x51f596,_0xa05dcb;if(_0x47d031===ENEMY1_TYPE)_0x51f596=ENEMY1_WIDTH,_0xa05dcb=ENEMY1_HEIGHT;else _0x47d031===ENEMY3_TYPE?(_0x51f596=BOSS_WIDTH,_0xa05dcb=BOSS_HEIGHT):(_0x51f596=ENEMY_WIDTH,_0xa05dcb=ENEMY_HEIGHT);let _0x15c978=0x0,_0x1039ab=0x0;if(_0x32a89b&&_0x32a89b[0x0]?.['p0'])_0x15c978=_0x32a89b[0x0]['p0']['x'],_0x1039ab=_0x32a89b[0x0]['p0']['y'];else throw new Error(_0x2c389f(0x290)+_0x2fbfb3);let _0x2eb400,_0x180f90;try{const {x:_0x3d1dff,y:_0x5d7202}=getCurrentGridSlotPosition(_0x356d89[_0x2c389f(0x266)],_0x356d89['gridCol'],_0x51f596);_0x2eb400=_0x3d1dff,_0x180f90=_0x5d7202;}catch(_0x2f6b99){console[_0x2c389f(0x2e1)](_0x2c389f(0x22d)+_0x356d89[_0x2c389f(0x2e9)]+_0x2c389f(0x254)+_0x356d89[_0x2c389f(0x266)]+','+_0x356d89['gridCol']+']',_0x2f6b99),_0x2eb400=gameCanvas?.[_0x2c389f(0x2c3)]/0x2||0xc8,_0x180f90=ENEMY_TOP_MARGIN+_0x356d89[_0x2c389f(0x266)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x59046e=0x0;const _0x1fb3dc=_0x3cc123,_0x22ad10=_0x1fb3dc&&_0x45db2d%0x2!==0x0;_0x22ad10?_0x59046e=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x59046e=-_0x45db2d*PATH_T_OFFSET_PER_ENEMY;const _0x15afa0={'x':_0x15c978,'y':_0x1039ab,'width':_0x51f596,'height':_0xa05dcb,'targetGridX':_0x2eb400,'targetGridY':_0x180f90,'speed':0x0,'state':'following_entrance_path','gridRow':_0x356d89[_0x2c389f(0x266)],'gridCol':_0x356d89[_0x2c389f(0x276)],'type':_0x47d031,'health':_0x47424c,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x2fbfb3,'pathSegmentIndex':0x0,'pathT':_0x59046e,'squadronId':_0x53b6ab,'squadronEnemyIndex':_0x45db2d,'id':'enemy-entr-'+_0x53b6ab+'-'+_0x45db2d+'-'+Date[_0x2c389f(0x2e7)]()+'-'+Math[_0x2c389f(0x30c)]()['toString'](0x24)[_0x2c389f(0x30f)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x47d031===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x47d031===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1,'captureDiveInitiationTime':0x0};enemies[_0x2c389f(0x26e)](_0x15afa0),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x53b6ab]&&squadronCompletionStatus[_0x53b6ab][_0x2c389f(0x2b4)]++;if(_0x45db2d===0x0){let _0x2eef0e=0x5dc;(_0x53b6ab===0x0||_0x53b6ab===0x1)&&(_0x2eef0e=0xfa);const _0xc732d7=_0x15afa0['id'],_0x28b705=setTimeout(()=>{const _0x43d83e=_0x2c389f,_0xf66c2d=enemySpawnTimeouts[_0x43d83e(0x224)](_0x28b705);if(_0xf66c2d>-0x1)enemySpawnTimeouts[_0x43d83e(0x24f)](_0xf66c2d,0x1);let _0x1187d0=![];isTwoPlayerMode&&selectedGameMode===_0x43d83e(0x320)?_0x1187d0=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x1187d0=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x1187d0||isChallengingStage||isWaveTransitioning||isFullGridWave)return;fireFixedEnemyBurst(_0xc732d7,null,0x0,0x3);},_0x2eef0e);enemySpawnTimeouts[_0x2c389f(0x26e)](_0x28b705);}}catch(_0x195004){console[_0x2c389f(0x2e1)](_0x2c389f(0x2a5)+_0x53b6ab+_0x2c389f(0x27c)+_0x45db2d+_0x2c389f(0x2f5)+_0x2fbfb3+'):',_0x195004),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x53b6ab]&&squadronCompletionStatus[_0x53b6ab][_0x2c389f(0x2b4)]++;}},_0xf0c801);enemySpawnTimeouts[_0x3ebd9b(0x26e)](_0x255c5);});}catch(_0x3e9d5c){console['error']('Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20'+_0x53b6ab+_0x4931b1(0x29a)+_0x2fbfb3+'):',_0x3e9d5c),_0xad8053?.[_0x4931b1(0x30d)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0xad8053[_0x4931b1(0x30d)][_0x4931b1(0x208)],squadronCompletionStatus[_0x53b6ab]&&(squadronCompletionStatus[_0x53b6ab][_0x4931b1(0x2b4)]=squadronCompletionStatus[_0x53b6ab][_0x4931b1(0x1f9)]));}},_0x36e12d);return enemySpawnTimeouts[_0x431da1(0x26e)](_0x272a40),!![];};function scheduleEntranceFlightWave(){const _0x2fe1d3=_0x4e50d5;if(isFullGridWave||isChallengingStage||!currentWaveDefinition||currentWaveDefinition['length']===0x0){console['warn'](_0x2fe1d3(0x31d)+level+',\x20isFullGrid:\x20'+isFullGridWave+',\x20isCS:\x20'+isChallengingStage+',\x20def\x20length:\x20'+currentWaveDefinition?.[_0x2fe1d3(0x208)]),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts[_0x2fe1d3(0x20b)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0xb06e15=0x0,_0x3470da=0x0;currentWaveDefinition[_0x2fe1d3(0x20b)]((_0x1e56f8,_0x3f4801)=>{const _0x47bb83=_0x2fe1d3;_0x1e56f8&&_0x1e56f8[_0x47bb83(0x30d)]&&Array[_0x47bb83(0x2c2)](_0x1e56f8[_0x47bb83(0x30d)])&&_0x1e56f8[_0x47bb83(0x30d)][_0x47bb83(0x208)]>0x0?(totalEnemiesScheduledForWave+=_0x1e56f8[_0x47bb83(0x30d)][_0x47bb83(0x208)],squadronCompletionStatus[_0x3f4801]={'completed':0x0,'total':_0x1e56f8[_0x47bb83(0x30d)][_0x47bb83(0x208)],'hasFiredPostLanding':![]},squadronEntranceFiringStatus[_0x3f4801]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x1e56f8,_0x3f4801,_0xb06e15)&&_0x3470da++,_0xb06e15+=NORMAL_WAVE_SQUADRON_INTERVAL):console[_0x47bb83(0x2b5)]('Entrance\x20Wave:\x20Squadron\x20'+_0x3f4801+_0x47bb83(0x2cb));}),_0x3470da===0x0&&totalEnemiesScheduledForWave===0x0?(console['warn'](_0x2fe1d3(0x24b)+level+_0x2fe1d3(0x265)),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![]):isEntrancePhaseActive=!![];}function startChallengingStageSequence(){const _0xd94720=_0x4e50d5;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts[_0xd94720(0x20b)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object[_0xd94720(0x316)](challengingStagePaths)[_0xd94720(0x208)]===0x0&&defineChallengingStagePaths();if(Object[_0xd94720(0x316)](challengingStagePaths)[_0xd94720(0x208)]===0x0){console[_0xd94720(0x2e1)](_0xd94720(0x2b7)),isWaveTransitioning=!![],setTimeout(()=>{const _0x113da9=_0xd94720;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x113da9(0x320)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x113da9(0x203)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x79328d=[_0xd94720(0x1f5),_0xd94720(0x289),'CS_HorizontalFlyByL',_0xd94720(0x2bf)],_0x2856fe=['CS_LoopAttack_TL',_0xd94720(0x263),_0xd94720(0x26c),_0xd94720(0x234)],_0x1ee5e5=[..._0x79328d,..._0x2856fe];for(const _0x1ea5ce of _0x1ee5e5){if(!challengingStagePaths[_0xd94720(0x21f)](_0x1ea5ce)){console[_0xd94720(0x2e1)](_0xd94720(0x260)+_0x1ea5ce+_0xd94720(0x2fc)),isWaveTransitioning=!![],setTimeout(()=>{const _0x13208b=_0xd94720;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x13208b(0x320)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x13208b(0x203)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x3e2a25=[..._0x79328d],_0x416121=[..._0x2856fe][_0xd94720(0x225)](()=>Math[_0xd94720(0x30c)]()-0.5);_0x3e2a25['push'](..._0x416121),currentWaveDefinition=[];for(let _0x459cfa=0x0;_0x459cfa<CHALLENGING_STAGE_SQUADRON_COUNT;_0x459cfa++){const _0x511eca=_0x3e2a25[_0x459cfa],_0xe964ec={'pathId':_0x511eca,'enemies':[]};for(let _0x54675a=0x0;_0x54675a<CHALLENGING_STAGE_SQUADRON_SIZE;_0x54675a++){let _0x4be899=_0x54675a<Math[_0xd94720(0x214)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0xe964ec[_0xd94720(0x30d)][_0xd94720(0x26e)]({'type':_0x4be899,'entrancePathId':_0x511eca});}currentWaveDefinition[_0xd94720(0x26e)](_0xe964ec);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition['length']>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x1c77f5=0x0;const _0x4433b2=-0x1c,_0x288f82=Math[_0xd94720(0x214)](Math['max'](0x0,level-0x3)/0x4)+0x1,_0x12ab96=scaleValue(_0x288f82,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition['forEach']((_0x1d5cfb,_0x3c9916)=>{const _0x4bbf09=_0xd94720;let _0x3d07b5=0x0;if(_0x3c9916<=0x1)_0x3d07b5=0x0;else _0x3c9916<=0x3?_0x3d07b5=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x3d07b5=(_0x3c9916-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0xc34934=_0x12ab96;(_0x3c9916===0x2||_0x3c9916===0x3)&&(_0xc34934*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x17464c=setTimeout(()=>{const _0x3951c7=_0x5782,_0x53949d=enemySpawnTimeouts[_0x3951c7(0x224)](_0x17464c);if(_0x53949d>-0x1)enemySpawnTimeouts['splice'](_0x53949d,0x1);let _0x370177=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x370177=player1Lives>0x0||player2Lives>0x0:_0x370177=playerLives>0x0;if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&_0x370177)try{const _0x3276c2=_0x1d5cfb[_0x3951c7(0x299)],_0x2d6451=challengingStagePaths,_0x508060=_0x2d6451[_0x3276c2];if(!_0x508060||_0x508060[_0x3951c7(0x208)]===0x0){console[_0x3951c7(0x2e1)]('CS:\x20Path\x20'+_0x3276c2+_0x3951c7(0x332)+_0x3c9916+_0x3951c7(0x219)),enemiesSpawnedThisWave+=_0x1d5cfb[_0x3951c7(0x30d)]['length'];return;}let _0x21eeae=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x3c9916>=0x2&&_0x3c9916<=0x3)_0x21eeae=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x3c9916>=0x4&&(_0x21eeae=CS_LOOP_ATTACK_SPAWN_DELAY);_0x1d5cfb[_0x3951c7(0x30d)]['forEach']((_0x1833eb,_0x546655)=>{const _0xa234bc=_0x3951c7;if(!_0x1833eb||!_0x1833eb[_0xa234bc(0x2e9)]){console[_0xa234bc(0x2e1)]('CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20'+_0x3c9916+',\x20index\x20'+_0x546655+_0xa234bc(0x304)),enemiesSpawnedThisWave++;return;}const _0x3b6a38=_0x546655*_0x21eeae,_0x534803=setTimeout(()=>{const _0x2de0e7=_0xa234bc,_0x524beb=enemySpawnTimeouts[_0x2de0e7(0x224)](_0x534803);if(_0x524beb>-0x1)enemySpawnTimeouts['splice'](_0x524beb,0x1);let _0x393779=![];isTwoPlayerMode&&selectedGameMode===_0x2de0e7(0x320)?_0x393779=player1Lives>0x0||player2Lives>0x0:_0x393779=playerLives>0x0;if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||!_0x393779){enemiesSpawnedThisWave++;return;}try{let _0xfa5002=_0x1833eb[_0x2de0e7(0x2e9)],_0x1c8fed=_0xfa5002===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x150a79,_0x10f609;if(_0xfa5002===ENEMY1_TYPE)_0x150a79=ENEMY1_WIDTH,_0x10f609=ENEMY1_HEIGHT;else _0xfa5002===ENEMY3_TYPE?(_0x150a79=BOSS_WIDTH,_0x10f609=BOSS_HEIGHT):(_0x150a79=ENEMY_WIDTH,_0x10f609=ENEMY_HEIGHT);let _0xc0340f=0x0,_0x1c63a5=0x0;if(_0x508060[0x0]?.['p0'])_0xc0340f=_0x508060[0x0]['p0']['x'],_0x1c63a5=_0x508060[0x0]['p0']['y'];else throw new Error('Invalid\x20start\x20segment\x20for\x20path\x20'+_0x3276c2);(_0x3c9916===0x0||_0x3c9916===0x1)&&(_0xc0340f+=_0x4433b2);const _0xdde1f5=-_0x546655*PATH_T_OFFSET_PER_ENEMY,_0x3a3299={'x':_0xc0340f,'y':_0x1c63a5,'width':_0x150a79,'height':_0x10f609,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x2de0e7(0x210),'gridRow':-0x1,'gridCol':-0x1,'type':_0xfa5002,'health':_0x1c8fed,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x3276c2,'pathSegmentIndex':0x0,'pathT':_0xdde1f5,'squadronId':_0x3c9916,'id':_0x2de0e7(0x2d4)+_0x3c9916+'-'+_0x546655+'-'+Date[_0x2de0e7(0x2e7)]()+'-'+Math[_0x2de0e7(0x30c)]()[_0x2de0e7(0x206)](0x24)[_0x2de0e7(0x30f)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x2de0e7(0x21c),'hasCapturedShip':_0xfa5002===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0xfa5002===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0xc34934,'captureDiveInitiationTime':0x0};enemies[_0x2de0e7(0x26e)](_0x3a3299),enemiesSpawnedThisWave++;}catch(_0x104729){console[_0x2de0e7(0x2e1)]('CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20'+_0x3c9916+_0x2de0e7(0x27c)+_0x546655+_0x2de0e7(0x2f5)+_0x3276c2+'):',_0x104729),enemiesSpawnedThisWave++;}},_0x3b6a38);enemySpawnTimeouts[_0xa234bc(0x26e)](_0x534803),_0x1c77f5++;});}catch(_0x3eb0cf){console[_0x3951c7(0x2e1)]('CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20'+_0x3c9916+':',_0x3eb0cf),enemiesSpawnedThisWave+=_0x1d5cfb[_0x3951c7(0x30d)][_0x3951c7(0x208)];}else _0x1d5cfb?.['enemies']?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x1d5cfb[_0x3951c7(0x30d)]['length']);},_0x3d07b5);enemySpawnTimeouts[_0x4bbf09(0x26e)](_0x17464c);});}else console[_0xd94720(0x2b5)](_0xd94720(0x253)),isWaveTransitioning=!![],setTimeout(()=>{const _0x5ec120=_0xd94720;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x5ec120(0x320)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x5ec120(0x203)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x56812f,_0x71e835,_0x326d08){const _0x149b93=_0x4e50d5;let _0x29de1a=![];isTwoPlayerMode&&selectedGameMode===_0x149b93(0x320)?_0x29de1a=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x29de1a=playerLives>0x0&&!isShipCaptured;if(!_0x56812f||isPaused||!isInGameState||!_0x29de1a||isChallengingStage||isWaveTransitioning)return;const _0x1d7bf4=Math[_0x149b93(0x237)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x3e4818=0x0;_0x3e4818<_0x1d7bf4;_0x3e4818++){const _0xa6564d=_0x326d08+_0x3e4818*ENTRANCE_FIRE_BURST_DELAY_MS,_0x4bc499=setTimeout(()=>{const _0x3abd36=_0x149b93;try{const _0x1b1545=enemySpawnTimeouts[_0x3abd36(0x224)](_0x4bc499);_0x1b1545>-0x1&&enemySpawnTimeouts[_0x3abd36(0x24f)](_0x1b1545,0x1);let _0x43f5ae=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x43f5ae=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x43f5ae=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x43f5ae||isChallengingStage||isWaveTransitioning)return;const _0x3bd6f4=enemies['find'](_0x23ae57=>_0x23ae57&&_0x23ae57['id']===_0x56812f);_0x3bd6f4&&_0x3bd6f4['state']===_0x71e835&&(createBulletSimple(_0x3bd6f4)&&(_0x3e4818===0x0&&playSound(_0x3abd36(0x2ca),![],0.4),_0x3bd6f4[_0x3abd36(0x338)]=Date[_0x3abd36(0x2e7)]()));}catch(_0x131af1){console['error'](_0x3abd36(0x26d)+(_0x3e4818+0x1)+'/'+_0x1d7bf4+')\x20for\x20'+_0x56812f+':',_0x131af1);}},_0xa6564d);enemySpawnTimeouts[_0x149b93(0x26e)](_0x4bc499);}}function fireFixedEnemyBurst(_0x4090c1,_0x1b2353,_0x12ee51,_0x565668){const _0x59a27b=_0x4e50d5;let _0x112e4e=![];isTwoPlayerMode&&selectedGameMode===_0x59a27b(0x320)?_0x112e4e=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x112e4e=playerLives>0x0&&!isShipCaptured;if(!_0x4090c1||isPaused||!isInGameState||!_0x112e4e||isChallengingStage||isWaveTransitioning||_0x565668<=0x0)return;for(let _0x4d6fa3=0x0;_0x4d6fa3<_0x565668;_0x4d6fa3++){const _0x148afb=_0x12ee51+_0x4d6fa3*ENTRANCE_FIRE_BURST_DELAY_MS,_0x11d479=setTimeout(()=>{const _0x3def10=_0x59a27b;try{const _0x5ae235=enemySpawnTimeouts[_0x3def10(0x224)](_0x11d479);_0x5ae235>-0x1&&enemySpawnTimeouts['splice'](_0x5ae235,0x1);let _0x4c0071=![];isTwoPlayerMode&&selectedGameMode===_0x3def10(0x320)?_0x4c0071=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x4c0071=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x4c0071||isChallengingStage||isWaveTransitioning)return;const _0x478e29=enemies['find'](_0x30ff2c=>_0x30ff2c&&_0x30ff2c['id']===_0x4090c1);if(_0x478e29)createBulletSimple(_0x478e29)&&(_0x4d6fa3===0x0&&playSound(_0x3def10(0x2ca),![],0.4),_0x478e29['lastFiredTime']=Date[_0x3def10(0x2e7)]());else{}}catch(_0x2577a7){console[_0x3def10(0x2e1)]('Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20'+(_0x4d6fa3+0x1)+'/'+_0x565668+_0x3def10(0x32a)+_0x4090c1+':',_0x2577a7);}},_0x148afb);enemySpawnTimeouts[_0x59a27b(0x26e)](_0x11d479);}}function startFullGridWave(){const _0x4e07ec=_0x4e50d5;if(!currentWaveDefinition||currentWaveDefinition[_0x4e07ec(0x208)]===0x0||!isFullGridWave){console[_0x4e07ec(0x2e1)](_0x4e07ec(0x275)),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound('entranceSound',![],0.4),enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x28d9a4=0x0;currentWaveDefinition[_0x4e07ec(0x20b)]((_0x1cbe48,_0x565e6c)=>{const _0x4923cd=_0x4e07ec;let _0x27c1aa=0x0;_0x1cbe48&&_0x1cbe48['enemies']&&Array[_0x4923cd(0x2c2)](_0x1cbe48[_0x4923cd(0x30d)])?(_0x27c1aa=_0x1cbe48['enemies']['length'],_0x1cbe48[_0x4923cd(0x30d)][_0x4923cd(0x20b)]((_0x5ee253,_0x3e4940)=>{const _0x45a614=_0x4923cd;try{if(!_0x5ee253||!_0x5ee253[_0x45a614(0x2e9)]||typeof _0x5ee253[_0x45a614(0x266)]===_0x45a614(0x2c9)||typeof _0x5ee253[_0x45a614(0x276)]===_0x45a614(0x2c9)){console[_0x45a614(0x2e1)](_0x45a614(0x26b)+_0x565e6c+_0x45a614(0x321)+_0x3e4940+_0x45a614(0x304));return;}let _0x13da5a=_0x5ee253[_0x45a614(0x2e9)],_0x3cfa0e=_0x13da5a===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x1929cb,_0x5816ee;if(_0x13da5a===ENEMY1_TYPE)_0x1929cb=ENEMY1_WIDTH,_0x5816ee=ENEMY1_HEIGHT;else _0x13da5a===ENEMY3_TYPE?(_0x1929cb=BOSS_WIDTH,_0x5816ee=BOSS_HEIGHT):(_0x1929cb=ENEMY_WIDTH,_0x5816ee=ENEMY_HEIGHT);let _0x506fbf,_0x44bd9f;try{const {x:_0x2d20d2,y:_0x1cfd1f}=getCurrentGridSlotPosition(_0x5ee253[_0x45a614(0x266)],_0x5ee253[_0x45a614(0x276)],_0x1929cb);_0x506fbf=_0x2d20d2,_0x44bd9f=_0x1cfd1f;}catch(_0x4ea399){console[_0x45a614(0x2e1)]('Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20'+_0x5ee253[_0x45a614(0x2e9)]+_0x45a614(0x254)+_0x5ee253[_0x45a614(0x266)]+','+_0x5ee253[_0x45a614(0x276)]+']',_0x4ea399),_0x506fbf=gameCanvas?.['width']/0x2||0xc8,_0x44bd9f=ENEMY_TOP_MARGIN+_0x5ee253[_0x45a614(0x266)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x188182={'x':_0x506fbf,'y':_0x44bd9f,'width':_0x1929cb,'height':_0x5816ee,'targetGridX':_0x506fbf,'targetGridY':_0x44bd9f,'speed':0x0,'state':_0x45a614(0x2b1),'gridRow':_0x5ee253[_0x45a614(0x266)],'gridCol':_0x5ee253[_0x45a614(0x276)],'type':_0x13da5a,'health':_0x3cfa0e,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x565e6c,'squadronEnemyIndex':_0x3e4940,'id':_0x45a614(0x279)+_0x565e6c+'-'+_0x3e4940+'-'+Date['now']()+'-'+Math[_0x45a614(0x30c)]()['toString'](0x24)[_0x45a614(0x30f)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x13da5a===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x13da5a===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1,'captureDiveInitiationTime':0x0};enemies[_0x45a614(0x26e)](_0x188182),_0x28d9a4++;}catch(_0x104424){console[_0x45a614(0x2e1)](_0x45a614(0x2ac)+_0x565e6c+',\x20Idx\x20'+_0x3e4940+'):',_0x104424);}})):console['warn']('Full\x20Grid:\x20Squadron\x20'+_0x565e6c+_0x4923cd(0x1f1)),squadronCompletionStatus[_0x565e6c]={'completed':_0x27c1aa,'total':_0x27c1aa};}),totalEnemiesScheduledForWave=_0x28d9a4,enemiesSpawnedThisWave=_0x28d9a4,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound('gridBackgroundSound',!![],0.1)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date[_0x4e07ec(0x2e7)](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date['now'](),firstEnemyLanded=!![];}function renderGame(){const _0x5e5af9=_0x4e50d5;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0x5e5af9(0x240)](0x0,0x0,gameCanvas['width'],gameCanvas[_0x5e5af9(0x2d1)]);const _0x4a8037=Date[_0x5e5af9(0x2e7)]();gameCtx['save']();const _0x2aea9a='20px\x20\x27Press\x20Start\x202P\x27',_0x3a0892=_0x5e5af9(0x1fe),_0x180b66='white';let _0x445567,_0x1400a8,_0x40fd26,_0x30dac7,_0x42e552=![],_0x584d61=![],_0x6be13=![];if(isShowingResultsScreen){}else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage){}else{if(isShowingPlayerGameOverMessage){}else{if(!isInGameState){}else{_0x40fd26=highScore||0x0;if(!isManualControl){}else{if(isTwoPlayerMode&&selectedGameMode==='coop'){_0x445567=player1Score,_0x1400a8=player2Score,_0x40fd26=Math[_0x5e5af9(0x209)](highScore,player1Score,player2Score),_0x30dac7=_0x5e5af9(0x213),_0x42e552=!isShowingIntro&&!isPaused&&player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x584d61=!isShowingIntro&&!isPaused&&player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if(player1Score>=_0x40fd26&&player1Score>0x0)_0x6be13=_0x42e552;if(player2Score>=_0x40fd26&&player2Score>0x0&&player2Score>player1Score)_0x6be13=_0x584d61;}else isTwoPlayerMode&&selectedGameMode===_0x5e5af9(0x21c)?(_0x445567=currentPlayer===0x1?score:player1Score,_0x1400a8=currentPlayer===0x2?score:player2Score,_0x40fd26=Math[_0x5e5af9(0x209)](highScore,player1Score,player2Score,score),_0x30dac7=_0x5e5af9(0x213),_0x42e552=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x584d61=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x6be13=!isPaused&&!isShowingIntro&&score>0x0&&_0x40fd26>0x0&&score>=_0x40fd26):(_0x445567=score,_0x1400a8=0x0,_0x30dac7=_0x5e5af9(0x213));}}}}}let _0x52217=![];if(_0x6be13){}typeof MARGIN_SIDE!==_0x5e5af9(0x2c9)&&typeof MARGIN_TOP!==_0x5e5af9(0x2c9)&&typeof SCORE_OFFSET_Y!=='undefined'&&(drawTopUiElement(_0x30dac7,_0x445567,_0x5e5af9(0x33f),MARGIN_SIDE,_0x42e552),drawTopUiElement(_0x5e5af9(0x2ab),_0x40fd26,_0x5e5af9(0x2da),gameCanvas['width']/0x2,_0x52217),drawTopUiElement(_0x5e5af9(0x2e4),_0x1400a8,'right',gameCanvas['width']-MARGIN_SIDE,_0x584d61));if(typeof shipImage!==_0x5e5af9(0x2c9)&&typeof LIFE_ICON_MARGIN_BOTTOM!==_0x5e5af9(0x2c9)&&typeof LIFE_ICON_SIZE!==_0x5e5af9(0x2c9)&&typeof LIFE_ICON_MARGIN_LEFT!=='undefined'&&typeof LIFE_ICON_SPACING!==_0x5e5af9(0x2c9)){if(shipImage['complete']&&shipImage['naturalHeight']!==0x0){const _0xe18018=gameCanvas[_0x5e5af9(0x2d1)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x41471a=0x0,_0x4c4bb4=0x0;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(player1Lives>0x0)_0x41471a=Math[_0x5e5af9(0x209)](0x0,player1Lives-0x1);if(player2Lives>0x0)_0x4c4bb4=Math[_0x5e5af9(0x209)](0x0,player2Lives-0x1);}else{if(playerLives>0x0)_0x41471a=Math[_0x5e5af9(0x209)](0x0,playerLives-0x1);}const _0x991b07=0x5;for(let _0xe0ffb0=0x0;_0xe0ffb0<Math[_0x5e5af9(0x29d)](_0x41471a,_0x991b07);_0xe0ffb0++){const _0x1fa281=LIFE_ICON_MARGIN_LEFT+_0xe0ffb0*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x5e5af9(0x340)](shipImage,Math[_0x5e5af9(0x237)](_0x1fa281),Math['round'](_0xe18018),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}if(isTwoPlayerMode&&selectedGameMode===_0x5e5af9(0x320)){const _0x3991b2=gameCanvas[_0x5e5af9(0x2c3)]-LIFE_ICON_MARGIN_RIGHT-Math['min'](_0x4c4bb4,_0x991b07)*(LIFE_ICON_SIZE+LIFE_ICON_SPACING)+LIFE_ICON_SPACING;for(let _0x49734f=0x0;_0x49734f<Math['min'](_0x4c4bb4,_0x991b07);_0x49734f++){const _0x48b53a=_0x3991b2+_0x49734f*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx['drawImage'](shipImage,Math[_0x5e5af9(0x237)](_0x48b53a),Math[_0x5e5af9(0x237)](_0xe18018),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}}gameCtx['restore'](),gameCtx[_0x5e5af9(0x329)]();if(isTwoPlayerMode&&selectedGameMode===_0x5e5af9(0x320)){if(ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured){let _0x5abd3e=!![];if(isPlayer1Invincible){const _0x5dff4b=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x4a8037%_0x5dff4b>=INVINCIBILITY_BLINK_ON_MS)_0x5abd3e=![];}if(_0x5abd3e){const _0x59d5c3=ship1['x'],_0x372b68=ship1['y'];typeof shipImage!=='undefined'&&shipImage[_0x5e5af9(0x282)]?(gameCtx[_0x5e5af9(0x340)](shipImage,Math['round'](_0x59d5c3),Math['round'](_0x372b68),ship1['width'],ship1[_0x5e5af9(0x2d1)]),player1IsDualShipActive&&gameCtx[_0x5e5af9(0x340)](shipImage,Math['round'](_0x59d5c3+DUAL_SHIP_OFFSET_X),Math['round'](_0x372b68),ship1['width'],ship1['height'])):(gameCtx[_0x5e5af9(0x295)]='blue',gameCtx[_0x5e5af9(0x236)](Math[_0x5e5af9(0x237)](_0x59d5c3),Math['round'](_0x372b68),ship1[_0x5e5af9(0x2c3)],ship1[_0x5e5af9(0x2d1)]));}}if(ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured){let _0x43da14=!![];if(isPlayer2Invincible){const _0xe29bf2=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x4a8037%_0xe29bf2>=INVINCIBILITY_BLINK_ON_MS)_0x43da14=![];}if(_0x43da14){const _0x4cfefe=ship2['x'],_0x257f97=ship2['y'];typeof shipImage!==_0x5e5af9(0x2c9)&&shipImage[_0x5e5af9(0x282)]?(gameCtx[_0x5e5af9(0x340)](shipImage,Math[_0x5e5af9(0x237)](_0x4cfefe),Math[_0x5e5af9(0x237)](_0x257f97),ship2[_0x5e5af9(0x2c3)],ship2[_0x5e5af9(0x2d1)]),player2IsDualShipActive&&gameCtx['drawImage'](shipImage,Math['round'](_0x4cfefe+DUAL_SHIP_OFFSET_X),Math[_0x5e5af9(0x237)](_0x257f97),ship2[_0x5e5af9(0x2c3)],ship2[_0x5e5af9(0x2d1)])):(gameCtx[_0x5e5af9(0x295)]=_0x5e5af9(0x261),gameCtx[_0x5e5af9(0x236)](Math[_0x5e5af9(0x237)](_0x4cfefe),Math[_0x5e5af9(0x237)](_0x257f97),ship2[_0x5e5af9(0x2c3)],ship2[_0x5e5af9(0x2d1)]));}}}else{if(ship&&!isShowingCaptureMessage){let _0x334b71=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x2666f7=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x4a8037%_0x2666f7>=INVINCIBILITY_BLINK_ON_MS)_0x334b71=![];}if(_0x334b71){let _0x5800c2=ship['x'],_0x23d6b1=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x23d6b1&&(_0x5800c2=Math[_0x5e5af9(0x237)](gameCanvas['width']/0x2-ship[_0x5e5af9(0x2c3)]/0x2));const _0x2a8df4=ship['y'];typeof shipImage!==_0x5e5af9(0x2c9)&&shipImage[_0x5e5af9(0x282)]?(gameCtx['drawImage'](shipImage,Math[_0x5e5af9(0x237)](_0x5800c2),Math[_0x5e5af9(0x237)](_0x2a8df4),ship['width'],ship['height']),isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&gameCtx[_0x5e5af9(0x340)](shipImage,Math[_0x5e5af9(0x237)](_0x5800c2+DUAL_SHIP_OFFSET_X),Math[_0x5e5af9(0x237)](_0x2a8df4),ship['width'],ship[_0x5e5af9(0x2d1)])):(gameCtx[_0x5e5af9(0x295)]=_0x5e5af9(0x1ed),gameCtx[_0x5e5af9(0x236)](Math[_0x5e5af9(0x237)](_0x5800c2),Math['round'](_0x2a8df4),ship[_0x5e5af9(0x2c3)],ship['height']));}}}if(fallingShips[_0x5e5af9(0x208)]>0x0&&typeof shipImage!==_0x5e5af9(0x2c9)&&shipImage[_0x5e5af9(0x282)]){}gameCtx['restore']();if(!isInGameState){if(isShowingScoreScreen){}else{gameCtx[_0x5e5af9(0x329)]();const _0x52d0d2=gameCanvas[_0x5e5af9(0x2c3)],_0x1fa17a=gameCanvas[_0x5e5af9(0x2d1)],_0x53090d=_0x52d0d2/0x2;selectedButtonIndex===-0x1&&(isPlayerSelectMode||isFiringModeSelectMode||isGameModeSelectMode||!isPlayerSelectMode&&!isFiringModeSelectMode&&!isGameModeSelectMode)&&(selectedButtonIndex=0x0);let _0xd3210e=MENU_LOGO_APPROX_HEIGHT,_0x5afd79=_0xd3210e*(logoImage[_0x5e5af9(0x33d)]/logoImage[_0x5e5af9(0x24d)]||0x1);typeof logoImage!==_0x5e5af9(0x2c9)&&logoImage[_0x5e5af9(0x282)]&&logoImage[_0x5e5af9(0x24d)]!==0x0&&(_0xd3210e=logoImage[_0x5e5af9(0x24d)]*LOGO_SCALE_FACTOR,_0x5afd79=logoImage['naturalWidth']*LOGO_SCALE_FACTOR);const _0x4beedc=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x1bfca1=_0xd3210e+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x4beedc;let _0x553c1e=(_0x1fa17a-_0x1bfca1)/0x2-0x46;_0x553c1e+=MENU_GENERAL_Y_OFFSET;const _0x3fd4b8=_0x53090d-_0x5afd79/0x2,_0x16425f=_0x553c1e+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!==_0x5e5af9(0x2c9)&&logoImage[_0x5e5af9(0x282)]&&logoImage[_0x5e5af9(0x24d)]!==0x0?gameCtx[_0x5e5af9(0x340)](logoImage,Math[_0x5e5af9(0x237)](_0x3fd4b8),Math[_0x5e5af9(0x237)](_0x16425f),_0x5afd79,_0xd3210e):drawCanvasText(_0x5e5af9(0x20a),_0x53090d,_0x16425f+_0xd3210e/0x2,_0x5e5af9(0x241),_0x5e5af9(0x20e));if(isGameModeSelectMode)drawCanvasButton(_0x5e5af9(0x247),0x0,selectedButtonIndex===0x0),drawCanvasButton('CO-OP\x20GAME',0x1,selectedButtonIndex===0x1);else{if(isFiringModeSelectMode)drawCanvasButton(_0x5e5af9(0x2dc),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x5e5af9(0x2e6),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0x5e5af9(0x2a3),0x0,selectedButtonIndex===0x0),drawCanvasButton('2\x20PLAYER',0x1,selectedButtonIndex===0x1)):(drawCanvasButton(_0x5e5af9(0x2c7),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x5e5af9(0x32c),0x1,selectedButtonIndex===0x1));}const _0x2061ac=getMenuButtonRect(0x1);let _0x12063a;_0x2061ac?_0x12063a=_0x2061ac['y']+_0x2061ac[_0x5e5af9(0x2d1)]+MENU_BUTTON_SUBTITLE_V_GAP+_0x4beedc/0x2:_0x12063a=_0x553c1e+_0xd3210e+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x4beedc/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x53090d-0x1,Math[_0x5e5af9(0x237)](_0x12063a),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,'center',_0x5e5af9(0x244),!![]),gameCtx[_0x5e5af9(0x220)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx['save']();let _0x402cef=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x402cef&&(bullets[_0x5e5af9(0x20b)](_0x1a79c4=>{}),enemyBullets[_0x5e5af9(0x20b)](_0x102891=>{}));enemies[_0x5e5af9(0x20b)](_0x37d68d=>{});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x289dfc=![];const _0x283d69=gameCanvas[_0x5e5af9(0x2d1)]/0x2;if(isPaused){}else{if(isShowingCaptureMessage){}}gameCtx['restore']();}else{if(isShowingPlayerGameOverMessage){}else{if(gameOverSequenceStartTime>0x0){}}}}}catch(_0x1de455){console['error'](_0x5e5af9(0x2d9),_0x1de455,_0x1de455['stack']);}}function _0x5782(_0x1247bc,_0x3a2c8b){const _0x87a5aa=_0x87a5();return _0x5782=function(_0x57828d,_0x4bbe6e){_0x57828d=_0x57828d-0x1eb;let _0x480753=_0x87a5aa[_0x57828d];return _0x480753;},_0x5782(_0x1247bc,_0x3a2c8b);}function handleEnemyHit(_0x46b6f6,_0x15def7=null){const _0x2c8435=_0x4e50d5;if(!_0x46b6f6)return{'destroyed':![],'pointsAwarded':0x0};const _0x324228=Date[_0x2c8435(0x2e7)]();let _0x4f5df4=0x0,_0x4b7e22=![],_0x57124e=_0x46b6f6[_0x2c8435(0x27f)],_0x5b7792=null,_0x4d0d91=0x1;const _0x3084e1=_0x46b6f6[_0x2c8435(0x2e9)]===ENEMY3_TYPE?BOSS_WIDTH:_0x46b6f6[_0x2c8435(0x2e9)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x57522=_0x46b6f6[_0x2c8435(0x2e9)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x46b6f6[_0x2c8435(0x2e9)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x12a06e=_0x46b6f6[_0x2c8435(0x2e9)]===ENEMY3_TYPE&&_0x46b6f6[_0x2c8435(0x2e8)],_0x9c8fd7=_0x46b6f6[_0x2c8435(0x2e9)]===ENEMY3_TYPE&&_0x46b6f6[_0x2c8435(0x32f)];let _0x4fb447=![],_0xd20feb=null;if(_0x12a06e){if(isTwoPlayerMode&&selectedGameMode===_0x2c8435(0x320)){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x46b6f6['id'])_0x4fb447=!![],_0xd20feb=_0x2c8435(0x217);else isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x46b6f6['id']&&(_0x4fb447=!![],_0xd20feb=_0x2c8435(0x223));}else!isTwoPlayerMode&&isShipCaptured&&capturedBossIdWithMessage===_0x46b6f6['id']&&(_0x4fb447=!![]);}const _0x787f59=_0x46b6f6['x']+_0x3084e1/0x2,_0x2926a8=_0x46b6f6['y']+_0x57522*0.2;createHitSparks(_0x787f59,_0x2926a8),_0x46b6f6[_0x2c8435(0x258)]--;_0x46b6f6[_0x2c8435(0x2e9)]===ENEMY3_TYPE&&(_0x46b6f6['isDamaged']=_0x46b6f6[_0x2c8435(0x258)]<ENEMY3_MAX_HITS);if(_0x46b6f6['health']<=0x0){_0x4b7e22=!![];isChallengingStage&&challengingStageEnemiesHit++;if(_0x12a06e&&_0x9c8fd7){let _0x1b68c1=null;if(_0x4fb447&&_0xd20feb)_0x1b68c1=_0xd20feb;else{let _0x47b830=![];if(isCoopAIDemoActive){if(_0x15def7==='player1'&&player1IsDualShipActive)_0x1b68c1=_0x2c8435(0x223),_0x47b830=!![];else _0x15def7===_0x2c8435(0x223)&&player2IsDualShipActive&&(_0x1b68c1=_0x2c8435(0x217),_0x47b830=!![]);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2c8435(0x2b3)){if(_0x15def7==='ai_p2'&&player2IsDualShipActive)_0x1b68c1=_0x2c8435(0x217),_0x47b830=!![];else _0x15def7===_0x2c8435(0x217)&&player1IsDualShipActive&&(_0x1b68c1=_0x2c8435(0x229),_0x47b830=!![]);}}!_0x47b830&&(_0x1b68c1=_0x15def7);}_0x1b68c1===null&&_0x15def7&&(_0x1b68c1=_0x15def7);if(_0x46b6f6[_0x2c8435(0x32f)]){const _0x26aec3=_0x46b6f6['capturedShipDimensions'][_0x2c8435(0x2c3)],_0x345479=_0x46b6f6[_0x2c8435(0x32f)]['height'],_0x4fb8e4=_0x46b6f6['x']+(_0x3084e1-_0x26aec3)/0x2+CAPTURED_SHIP_OFFSET_X,_0x162b15=_0x46b6f6['y']+CAPTURED_SHIP_OFFSET_Y,_0x7c04d4=fallingShips['some'](_0x3f1b30=>Math['abs'](_0x3f1b30['x']-_0x4fb8e4)<0x1&&Math['abs'](_0x3f1b30['y']-_0x162b15)<0x1);!_0x7c04d4&&fallingShips[_0x2c8435(0x26e)]({'x':_0x4fb8e4,'y':_0x162b15,'width':_0x26aec3,'height':_0x345479,'creationTime':_0x324228,'tintProgress':0x1,'rotation':0x0,'rotationDirection':Math[_0x2c8435(0x30c)]()<0.5?-0x1:0x1,'totalRotation':0x0,'rotationCompleted':![],'targetPlayerId':_0x1b68c1});}else console['error'](_0x2c8435(0x2a2));_0x46b6f6['hasCapturedShip']=![],_0x46b6f6[_0x2c8435(0x32f)]=null;}else _0x12a06e&&!_0x9c8fd7&&(console[_0x2c8435(0x2e1)]('[handleEnemyHit]\x20CRITICAL:\x20Boss\x20'+_0x46b6f6['id']+_0x2c8435(0x2f7)),_0x46b6f6[_0x2c8435(0x2e8)]=![],_0x46b6f6[_0x2c8435(0x32f)]=null);if(isChallengingStage){let _0xc929fc=0x64;const _0x4b1194=csLastHitTime;csLastHitTime=_0x324228,csLastChainHitPosition={'x':_0x46b6f6['x'],'y':_0x46b6f6['y']},csCurrentChainHits>0x0&&_0x324228-_0x4b1194<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0xc929fc*=0x2),_0x4f5df4=_0xc929fc,csCurrentChainScore+=_0x4f5df4,scoreEarnedThisCS+=_0x4f5df4,_0x5b7792='explosionSound',_0x4d0d91=0.4;}else{if(_0x46b6f6[_0x2c8435(0x2bc)]===_0x2c8435(0x2b1))_0x4f5df4=_0x46b6f6[_0x2c8435(0x2e9)]===ENEMY1_TYPE?0x32:_0x46b6f6[_0x2c8435(0x2e9)]===ENEMY2_TYPE?0x50:0x0,_0x46b6f6[_0x2c8435(0x2e9)]===ENEMY3_TYPE&&(_0x4f5df4=0x96),_0x5b7792=_0x2c8435(0x328),_0x4d0d91=0.4;else{_0x4f5df4=_0x46b6f6[_0x2c8435(0x2e9)]===ENEMY1_TYPE?0x64:_0x46b6f6['type']===ENEMY2_TYPE?0xa0:0x0;if(_0x46b6f6[_0x2c8435(0x2e9)]===ENEMY3_TYPE){if(_0x12a06e){const _0x4f674f=[0x3e8,0x5dc,0x7d0,0xbb8];_0x4f5df4=_0x4f674f[Math[_0x2c8435(0x214)](Math[_0x2c8435(0x30c)]()*_0x4f674f[_0x2c8435(0x208)])],_0x5b7792=_0x2c8435(0x201),_0x4d0d91=0.4;}else _0x57124e?(_0x4f5df4=0x190,_0x5b7792=_0x2c8435(0x201),_0x4d0d91=0.4):(_0x4f5df4=0x0,console[_0x2c8435(0x2b5)]('[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20'+_0x4f5df4+_0x2c8435(0x1ff)+(_0x46b6f6[_0x2c8435(0x258)]+0x1)),_0x5b7792=_0x2c8435(0x328),_0x4d0d91=0.4);}else _0x5b7792=_0x2c8435(0x328),_0x4d0d91=0.4;if(_0x4b7e22&&_0x4f5df4>0x0){const _0x35413b=normalWaveLastHitTime;normalWaveLastHitTime=_0x324228,normalWaveLastChainHitPosition={'x':_0x46b6f6['x'],'y':_0x46b6f6['y']};normalWaveLastChainHitPosition&&_0x324228-_0x35413b<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x5d8530=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x2037fa=Math['min'](_0x5d8530[_0x2c8435(0x208)]-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x590a91=_0x5d8530[_0x2037fa];_0x4f5df4+=_0x590a91,normalWaveCurrentChainScore+=_0x590a91;}}}}if(_0x4f5df4>0x0){let _0x596991=null,_0x1078ef=0x0,_0x521e98=_0x15def7,_0x166705=highScore,_0x238c68=highScoreHolderId,_0x175b70=![],_0x301ef3=![];if(isCoopAIDemoActive){if(_0x15def7===_0x2c8435(0x217)){player1Score+=_0x4f5df4,_0x1078ef=player1Score,_0x596991=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x2c8435(0x217),_0x175b70=!![],_0x301ef3=!![];else player1Score===highScore&&highScoreHolderId!==_0x2c8435(0x217)&&highScore>0x0&&(highScoreHolderId=_0x2c8435(0x217),_0x175b70=!![],_0x301ef3=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x15def7===_0x2c8435(0x223)){player2Score+=_0x4f5df4,_0x1078ef=player2Score,_0x596991=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x2c8435(0x223),_0x175b70=!![],_0x301ef3=!![];else player2Score===highScore&&highScoreHolderId!==_0x2c8435(0x223)&&highScore>0x0&&(highScoreHolderId=_0x2c8435(0x223),_0x175b70=!![],_0x301ef3=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x4f5df4,_0x1078ef=player1Score,_0x596991=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId=_0x2c8435(0x217),_0x301ef3=!![]),checkAndAwardExtraLife(0x1);}}else{if(!isManualControl){score+=_0x4f5df4,player1Score=score,_0x1078ef=score,_0x521e98=_0x2c8435(0x217),_0x596991=()=>player1EnemiesHit++;if(score>highScore)highScore=score,highScoreHolderId=_0x2c8435(0x217),_0x175b70=!![],_0x301ef3=!![];else score===highScore&&highScoreHolderId!==_0x2c8435(0x217)&&highScore>0x0&&(highScoreHolderId=_0x2c8435(0x217),_0x175b70=!![],_0x301ef3=!![]);checkAndAwardExtraLife(0x1);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2c8435(0x2b3)){if(_0x15def7===_0x2c8435(0x217)){player1Score+=_0x4f5df4,_0x1078ef=player1Score,_0x596991=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x2c8435(0x217),_0x175b70=!![],_0x301ef3=!![];else player1Score===highScore&&highScoreHolderId!==_0x2c8435(0x217)&&highScore>0x0&&(highScoreHolderId=_0x2c8435(0x217),_0x175b70=!![],_0x301ef3=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x15def7===_0x2c8435(0x229)){player2Score+=_0x4f5df4,_0x1078ef=player2Score,_0x521e98='ai_p2',_0x596991=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x2c8435(0x229),_0x175b70=!![],_0x301ef3=!![];else player2Score===highScore&&highScoreHolderId!==_0x2c8435(0x229)&&highScore>0x0&&(highScoreHolderId=_0x2c8435(0x229),_0x175b70=!![],_0x301ef3=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x4f5df4,_0x1078ef=player1Score,_0x596991=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId=_0x2c8435(0x217),_0x301ef3=!![]),checkAndAwardExtraLife(0x1);}}else{if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x15def7===_0x2c8435(0x217)){player1Score+=_0x4f5df4,_0x1078ef=player1Score,_0x596991=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x2c8435(0x217),_0x175b70=!![],_0x301ef3=!![];else player1Score===highScore&&highScoreHolderId!==_0x2c8435(0x217)&&highScore>0x0&&(highScoreHolderId=_0x2c8435(0x217),_0x175b70=!![],_0x301ef3=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x15def7===_0x2c8435(0x223)){player2Score+=_0x4f5df4,_0x1078ef=player2Score,_0x596991=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId='player2',_0x175b70=!![],_0x301ef3=!![];else player2Score===highScore&&highScoreHolderId!==_0x2c8435(0x223)&&highScore>0x0&&(highScoreHolderId=_0x2c8435(0x223),_0x175b70=!![],_0x301ef3=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x4f5df4,_0x1078ef=player1Score,_0x596991=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId='player1',_0x301ef3=!![]),checkAndAwardExtraLife(0x1);}}else{score+=_0x4f5df4,_0x1078ef=score;currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,_0x521e98=_0x2c8435(0x217),_0x596991=()=>player1EnemiesHit++):(player2Score=score,_0x521e98=isPlayerTwoAI?_0x2c8435(0x229):_0x2c8435(0x223),_0x596991=()=>player2EnemiesHit++);if(score>highScore)highScore=score,highScoreHolderId=_0x521e98,_0x175b70=!![],_0x301ef3=!![];else score===highScore&&highScoreHolderId!==_0x521e98&&highScore>0x0&&(highScoreHolderId=_0x521e98,_0x175b70=!![],_0x301ef3=!![]);checkAndAwardExtraLife(currentPlayer);}}}}if(_0x175b70||_0x301ef3&&_0x166705>0x0&&highScoreHolderId!==_0x238c68){let _0x41ecea=![];if(highScoreHolderId===_0x2c8435(0x217))_0x41ecea=player1TriggeredHighScoreSound;else{if(highScoreHolderId==='player2'||highScoreHolderId===_0x2c8435(0x229))_0x41ecea=player2TriggeredHighScoreSound;}if(!_0x41ecea||highScoreHolderId!==_0x238c68&&_0x166705>0x0){playSound(_0x2c8435(0x27b),![],0.2);if(highScoreHolderId==='player1')player1TriggeredHighScoreSound=!![];else{if(highScoreHolderId===_0x2c8435(0x223)||highScoreHolderId===_0x2c8435(0x229))player2TriggeredHighScoreSound=!![];}}}if(_0x301ef3&&highScoreHolderId!==_0x238c68&&_0x166705>0x0){if(_0x238c68===_0x2c8435(0x217))player1TriggeredHighScoreSound=![];else{if(_0x238c68===_0x2c8435(0x223)||_0x238c68===_0x2c8435(0x229))player2TriggeredHighScoreSound=![];}}_0x596991&&!isChallengingStage&&_0x596991();const _0x106cde=_0x46b6f6['state']===_0x2c8435(0x2b1)||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x2c8435(0x26e)]({'text':_0x4f5df4[_0x2c8435(0x206)](),'x':_0x46b6f6['x']+_0x3084e1/0x2,'y':_0x46b6f6['y'],'color':_0x106cde,'creationTime':_0x324228,'displayStartTime':_0x324228+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x46b6f6['x']+_0x3084e1/0x2,_0x46b6f6['y']+_0x57522/0x2);_0x46b6f6['id']===capturingBossId&&stopSound(_0x2c8435(0x2af));if(_0x46b6f6[_0x2c8435(0x2bc)]===_0x2c8435(0x335)||_0x46b6f6['state']==='following_entrance_path'||_0x46b6f6['state']===_0x2c8435(0x25d)||_0x46b6f6[_0x2c8435(0x2bc)]===_0x2c8435(0x210)||_0x46b6f6[_0x2c8435(0x2bc)]==='returning'||_0x46b6f6[_0x2c8435(0x2bc)]===_0x2c8435(0x2a7)){if(_0x46b6f6[_0x2c8435(0x2e9)]===ENEMY3_TYPE)stopSound('bossGalagaDiveSound');else stopSound(_0x2c8435(0x31a));}}else{_0x4b7e22=![];if(_0x46b6f6['type']===ENEMY3_TYPE)_0x5b7792=_0x2c8435(0x280),_0x4d0d91=0.6,_0x4f5df4=0x0;else{_0x4f5df4=0x0;if(_0x46b6f6[_0x2c8435(0x2e9)]===ENEMY1_TYPE)_0x5b7792='beeHitSound',_0x4d0d91=0.3;else _0x46b6f6[_0x2c8435(0x2e9)]===ENEMY2_TYPE&&(_0x5b7792=_0x2c8435(0x221),_0x4d0d91=0.3);}}return _0x5b7792&&playSound(_0x5b7792,![],_0x4d0d91),{'destroyed':_0x4b7e22,'pointsAwarded':_0x4f5df4};}function createHitSparks(_0x2869cd,_0x18af0f){const _0x5d9459=_0x4e50d5;if(!gameCtx)return;const _0x4aaf27=Date['now']();for(let _0x1c4989=0x0;_0x1c4989<HIT_SPARK_COUNT;_0x1c4989++){const _0x15d221=Math[_0x5d9459(0x30c)]()*Math['PI']*0x2,_0x3d5f4f=HIT_SPARK_SPEED*(0.7+Math[_0x5d9459(0x30c)]()*0.6),_0x401495=HIT_SPARK_LIFETIME*(0.8+Math[_0x5d9459(0x30c)]()*0.4);hitSparks[_0x5d9459(0x26e)]({'x':_0x2869cd,'y':_0x18af0f,'vx':Math[_0x5d9459(0x330)](_0x15d221)*_0x3d5f4f,'vy':Math[_0x5d9459(0x256)](_0x15d221)*_0x3d5f4f,'creationTime':_0x4aaf27,'lifetime':_0x401495,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x1adc33=_0x4e50d5,_0x2d083e=Date[_0x1adc33(0x2e7)]();for(let _0x4a56a9=hitSparks[_0x1adc33(0x208)]-0x1;_0x4a56a9>=0x0;_0x4a56a9--){const _0x53b76f=hitSparks[_0x4a56a9],_0x2eeea5=_0x2d083e-_0x53b76f[_0x1adc33(0x21b)];_0x2eeea5>=_0x53b76f[_0x1adc33(0x2b9)]?hitSparks[_0x1adc33(0x24f)](_0x4a56a9,0x1):(_0x53b76f['vy']+=HIT_SPARK_GRAVITY,_0x53b76f['x']+=_0x53b76f['vx'],_0x53b76f['y']+=_0x53b76f['vy'],_0x53b76f[_0x1adc33(0x27e)]=Math['max'](0x0,0x1-_0x2eeea5*HIT_SPARK_FADE_SPEED));}}function _0x87a5(){const _0x2d4cea=['undefined','enemyShootSound','\x20is\x20empty\x20or\x20invalid.','5TDbtRk','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','dualShipSound','capturedShipX','includes','height','\x20(no\x20attack\x20path):','entranceSound','enemy-cs-','[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','.\x20Switching\x20to\x20moving_to_grid.','resultsMusicSound','Error\x20in\x20renderGame:','center','some','EASY','attackType','\x20invalid!\x20Skipping\x20squadron.','Error\x20getting\x20target\x20grid\x20pos\x20for\x20','shipObj','error','Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20','stringify','2UP','!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!','NORMAL','now','hasCapturedShip','type','targetY','landed','tintProgress','\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22',',\x20isFullGrid:\x20','!\x20Returning.','gameOverSound','Error\x20in\x20findAndDetachEnemy:','parse','entrance_flight_2','getWaveType',',\x20Path\x20','NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20','\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.',')!\x20Returning.','\x20missing\x20SHARED\x20path\x20','isPreparingForImmediateCapture','getBoundingClientRect','\x22\x20not\x20found!\x20Aborting\x20CS.','add','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','canFireThisDive','hasFiredPostLanding','shouldTryShoot','attackPathSegmentIndex','boss_loop_right','.\x20Skipping.','[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','landedTime','CRITICAL:\x20normalWaveEntrancePaths\x20not\x20defined\x20or\x20empty.\x20Cannot\x20assign\x20paths\x20to\x20squadrons.','targetGridY','rotationCompleted','Error\x20updating\x20floating\x20scores:',').\x20Skipping.','random','enemies','142765gpKreT','substring','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','generateAttackPath','Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22','abs','rotationDirection','\x20(state:\x20','keys','buttons','challenging_stage','number','butterflyDiveSound','Error\x20in\x20aiControl:','Error\x20cloning\x20entrance\x20flight\x202\x20wave\x20pattern:','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20or\x20with\x20no\x20definition.\x20Level\x20','Error\x20checking/awarding\x20extra\x20life:','capturedShipLastFiredTime','coop',',\x20index\x20','has','targetEnemyForAI','CRITICAL:\x20Full\x20grid\x20wave\x20pattern\x20(index\x200)\x20is\x20missing\x20or\x20empty.','Invalid\x20next\x20Normal\x20Bezier\x20segment\x20','every','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','explosionSound','save',')\x20for\x20','moving_to_grid','GAME\x20EXIT','\x20(invalid\x20attack\x20segment):','full_grid','capturedShipDimensions','cos','returnLogDone','\x20for\x20squadron\x20','slice','thresholdsMet','attacking','1P_VS_AI_NORMAL','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20','lastFiredTime','\x20attacking,\x20index\x20','captureDiveInitiationTime','find','playerShootSound','naturalWidth','Error\x20getting\x20grid\x20pos\x20for\x20','left','drawImage','Error\x20during\x20post-landing\x20fire\x20for\x20','Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','blue','\x20after\x20missing\x20path','51010WjWEmi','Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:','\x20has\x20invalid\x20enemy\x20data.','attackPathSegments','totalRotation','473547mhkyIo','CS3_DiveLoopL_Sharp','\x20in\x20returning','show_results','velocityX','total','minDistance','returning','\x20after\x20bad\x20next\x20segment','\x20after\x20attack:','red','\x20points.\x20Health\x20was:\x20','attackGroupId','bossHit2Sound','\x22\x20for\x20enemy\x20in\x20squadron\x20','function','Error\x20starting\x20attack\x20for\x20','Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20','toString','capturePrepareTimeout','length','max','LOGO','forEach','generateWaveDefinition',')\x20during\x20shift:','grey','squadronId','following_bezier_path','duration','capturedShipY','1UP','floor','sign','string','player1','\x20at\x20end\x20of\x20normal\x20path\x20','\x20invalid!\x20Skipping.','lostLifeSound','creationTime','normal','3250244EywatV','unknown','hasOwnProperty','restore','butterflyHitSound','filter','player2','indexOf','sort','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20','speed','pathSegmentIndex','ai_p2','captureStartTime','captureAnimationRotation','stack','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','isFromAbove','bossGalagaDiveSound','attackFormationOffsetX','currentScore','attackPathT','sqrt','CS_LoopAttack_BR','predictedCollisions','fillRect','round','atan2','chosenDodgeDir','csClearSound','11125092vCtuHQ','map','Invalid\x20CS\x20Bezier\x20segment\x20','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','Error\x20in\x20triggerImmediateCaptureDive:','clearRect','30px\x20Arial','dir','diveStartTime','middle','\x20(invalid\x20attack\x20index):','resetGame','NORMAL\x20GAME','),\x20index\x20','\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20','originalVy','Entrance\x20Wave:\x20No\x20squadrons\x20or\x20enemies\x20scheduled\x20for\x20level\x20','scheduledStartTime','naturalHeight','\x20for\x20SHARED\x20path\x20','splice','[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20','levelUpSound','NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20','CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.','\x20at\x20[','\x20not\x20found.','sin','isDodging','health','collisions','destroyed','unshift','back','diving_to_capture_position','playerNum','\x20returning\x20without\x20target\x20coords.\x20Recalculating.','CRITICAL:\x20Required\x20CS\x20path\x20\x22','green','2hWxIuB','CS_LoopAttack_TR','getGamepads','.\x20Transitioning.','gridRow','squadronEnemyIndex','main',',\x20isCS:\x20','rapid','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','CS_LoopAttack_BL','Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20','push','pathT','18gBHZts','desiredTargetX','right','Error\x20creating\x20player\x20bullet(s):','single','Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.','gridCol','particles','\x20attacking,\x20invalid\x20segment\x20','enemy-grid-','pressed','hiScoreSound',',\x20Idx\x20','captureMessageStartTime','alpha','isDamaged','bossHit1Sound','size','complete','num','targetGridX','newButtonStates','.\x20Enemy\x20','shoot','rotation','CS3_DiveLoopR_Sharp','velocityY','pathSpeedMultiplier','\x20after\x20bad\x20segment','\x20path\x20index\x20','justReturned','shipCapturedSound','Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20','Entrance\x20Wave:\x20Path\x20','capturing','1558610FiVujX','gridBackgroundSound','fillStyle','dual','startSound','FATAL\x20Error\x20in\x20moveEntities:','pathId','\x20(Path\x20','Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20','targetX','min','\x20off\x20screen:','\x20after\x20bezier\x20error','entrance_flight_1','\x20after\x20invalid\x20path\x20index','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!','1\x20PLAYER','preparing_capture','Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','Enemy\x20','showing_capture_message','playerId','Error\x20cloning\x20full\x20grid\x20wave\x20pattern:','object','HIGH\x20SCORE','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','entrancePathId','following_entrance_path','captureSound','currentLives','in_grid','boss_loop_left','1P_VS_AI_COOP','completed','warn','\x20in\x20moving_to_grid','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','resetAllMessages','lifetime','targetPlayerId','CRITICAL:\x20Entrance\x20flight\x201\x20wave\x20pattern\x20(index\x200)\x20is\x20missing\x20or\x20empty.','state','preparing_attack','Error\x20cloning\x20entrance\x20flight\x201\x20wave\x20pattern:','CS_HorizontalFlyByR','Error\x20handling\x20player\x20input:','clear','isArray','width','5918xAeryX','switch_player','1848008iPxvyt','START\x20GAME','initialCaptureAnimationY'];_0x87a5=function(){return _0x2d4cea;};return _0x87a5();}function moveEntities(){const _0xe06c9f=_0x4e50d5;try{if(isPaused)return;const _0x1e9670=Date[_0xe06c9f(0x2e7)]();}catch(_0x585fa9){console['error']('FATAL\x20Error\x20in\x20moveEntities\x20(Restored\x20Conditions):',_0x585fa9,_0x585fa9[_0xe06c9f(0x22c)]),isGridSoundPlaying=![],stopSound(_0xe06c9f(0x294)),isEntrancePhaseActive=![],stopSound(_0xe06c9f(0x2d3)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0xe06c9f(0x2af)),stopSound('shipCapturedSound'),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState==='function')showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0xe06c9f(0x310));}}function switchPlayerTurn(){const _0x23accd=_0x4e50d5;if(!isTwoPlayerMode||selectedGameMode===_0x23accd(0x320))return![];currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive,player1MaxLevelReached=Math[_0x23accd(0x209)](player1MaxLevelReached,level)):(player2Score=score,player2IsDualShipActive=isDualShipActive,player2MaxLevelReached=Math[_0x23accd(0x209)](player2MaxLevelReached,level));const _0x30e7c7=currentPlayer===0x1?0x2:0x1,_0x42eacd=_0x30e7c7===0x1?player1Lives:player2Lives;if(_0x42eacd<=0x0){const _0x2619b2=currentPlayer===0x1?player1Lives:player2Lives;return _0x2619b2<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x30e7c7,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0x36a907=null,_0x2da188=![]){const _0x3287de=_0x4e50d5,_0x460930=Date['now'](),_0x2dfa99=isTwoPlayerMode&&selectedGameMode===_0x3287de(0x320)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x460930<coopPlayersReadyStartTime+0x1f40;if(_0x2dfa99){if(_0x36a907==='player1'&&!_0x2da188)return![];if(_0x36a907==='ai_p2'&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3287de(0x2b3))return![];}let _0x3d83eb=![],_0x35c3b4=null,_0x2a7958=![],_0x1057ba=0x0,_0x1af950=_0x25ab74=>{},_0x219e6c=_0x3b583b=>{},_0x4be580=![],_0x465cf5=()=>![],_0x37b8b3=_0x56b8e8=>{},_0x4a9d3d=_0x36a907;const _0x2c79be=!isPaused&&isInGameState&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!showReadyMessage&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(_0x36a907==='player1'&&isPlayer1ShowingGameOverMessage||_0x36a907===_0x3287de(0x223)&&isPlayer2ShowingGameOverMessage||_0x36a907===_0x3287de(0x229)&&isPlayer2ShowingGameOverMessage));if(!_0x2c79be)return![];if(_0x4a9d3d){let _0x52a4c4=![];if(_0x4a9d3d==='ai'&&isShipCaptured)_0x52a4c4=!![];else{if(_0x4a9d3d===_0x3287de(0x229)&&isTwoPlayerMode&&selectedGameMode===_0x3287de(0x21c)&&isShipCaptured)_0x52a4c4=!![];else{if(_0x4a9d3d===_0x3287de(0x217)&&isCoopAIDemoActive&&isPlayer1ShipCaptured)_0x52a4c4=!![];else{if(_0x4a9d3d==='player2'&&isCoopAIDemoActive&&isPlayer2ShipCaptured)_0x52a4c4=!![];else{if(_0x4a9d3d===_0x3287de(0x229)&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3287de(0x2b3)&&isPlayer2ShipCaptured)_0x52a4c4=!![];}}}}if(_0x52a4c4)return![];}if(isTwoPlayerMode&&selectedGameMode===_0x3287de(0x320)){if(_0x36a907===_0x3287de(0x217)&&ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1NeedsRespawnAfterCapture)(!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer1ShipCaptured)&&(_0x35c3b4=ship1,_0x2a7958=player1IsDualShipActive,_0x1057ba=player1LastShotTime,_0x1af950=_0x4aeab9=>{player1LastShotTime=_0x4aeab9;},_0x219e6c=_0x3403e7=>{player1ShotsFired+=_0x3403e7;},_0x4be580=selectedFiringMode===_0x3287de(0x274),_0x465cf5=()=>p1JustFiredSingle,_0x37b8b3=_0x39f51c=>{p1JustFiredSingle=_0x39f51c;},_0x3d83eb=!![]);else(_0x36a907===_0x3287de(0x223)||_0x36a907==='ai_p2')&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2NeedsRespawnAfterCapture&&((!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer2ShipCaptured)&&(_0x35c3b4=ship2,_0x2a7958=player2IsDualShipActive,_0x36a907===_0x3287de(0x229)&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?(_0x1057ba=aiShip2LastShotTime,_0x1af950=_0x47de60=>{aiShip2LastShotTime=_0x47de60,player2LastShotTime=_0x47de60;}):(_0x1057ba=player2LastShotTime,_0x1af950=_0x3622de=>{player2LastShotTime=_0x3622de;}),_0x219e6c=_0x42d294=>{player2ShotsFired+=_0x42d294;},isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3287de(0x2b3)?_0x4be580=![]:(_0x4be580=selectedFiringMode===_0x3287de(0x274),_0x465cf5=()=>p2JustFiredSingle,_0x37b8b3=_0xd300d8=>{p2JustFiredSingle=_0xd300d8;}),_0x3d83eb=!![]));}else{if(ship&&playerLives>0x0&&!isShipCaptured){_0x35c3b4=ship,_0x2a7958=isDualShipActive;if(isTwoPlayerMode&&selectedGameMode===_0x3287de(0x21c)){if(currentPlayer===0x1){_0x1057ba=player1LastShotTime,_0x1af950=_0x272f67=>{player1LastShotTime=_0x272f67;},_0x219e6c=_0x58625b=>{player1ShotsFired+=_0x58625b;},_0x4be580=selectedFiringMode===_0x3287de(0x274),_0x465cf5=()=>p1JustFiredSingle,_0x37b8b3=_0x167d24=>{p1JustFiredSingle=_0x167d24;};if(!_0x4a9d3d)_0x4a9d3d='player1';}else{isPlayerTwoAI?(_0x1057ba=aiLastShotTime,_0x1af950=_0x4a98ef=>{aiLastShotTime=_0x4a98ef,player2LastShotTime=_0x4a98ef;}):(_0x1057ba=player2LastShotTime,_0x1af950=_0x2cfa05=>{player2LastShotTime=_0x2cfa05;});_0x219e6c=_0x127613=>{player2ShotsFired+=_0x127613;};if(isPlayerTwoAI){_0x4be580=![];if(!_0x4a9d3d)_0x4a9d3d='ai_p2';}else{_0x4be580=selectedFiringMode===_0x3287de(0x274);connectedGamepadIndexP2===null&&connectedGamepadIndex!==null?(_0x465cf5=()=>p1JustFiredSingle,_0x37b8b3=_0x4e5dd0=>{p1JustFiredSingle=_0x4e5dd0;}):(_0x465cf5=()=>p2JustFiredSingle,_0x37b8b3=_0x47d8ff=>{p2JustFiredSingle=_0x47d8ff;});if(!_0x4a9d3d)_0x4a9d3d=_0x3287de(0x223);}}}else{_0x1057ba=player1LastShotTime,_0x1af950=_0xf7ee96=>{player1LastShotTime=_0xf7ee96;},_0x219e6c=_0x4fbafc=>{player1ShotsFired+=_0x4fbafc;},_0x4be580=selectedFiringMode===_0x3287de(0x274),_0x465cf5=()=>p1JustFiredSingle,_0x37b8b3=_0x240ba6=>{p1JustFiredSingle=_0x240ba6;};if(!_0x4a9d3d)_0x4a9d3d=_0x3287de(0x217);}_0x3d83eb=!![];}}_0x36a907===null&&!isManualControl&&ship&&playerLives>0x0&&!isShipCaptured&&!isShowingCaptureMessage&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x3287de(0x320))&&(_0x35c3b4=ship,_0x2a7958=isDualShipActive,_0x1057ba=aiLastShotTime,_0x1af950=_0x259678=>{aiLastShotTime=_0x259678;},_0x219e6c=_0x21fcef=>{player1ShotsFired+=_0x21fcef;},_0x4be580=![],_0x3d83eb=!![],_0x4a9d3d='ai');if(!_0x3d83eb||!_0x35c3b4)return![];if(_0x4be580){if(_0x2da188){if(_0x460930-_0x1057ba<SHOOT_COOLDOWN)return![];}else{let _0x189d9d=![];if(_0x4a9d3d==='player1'||!isTwoPlayerMode&&_0x4a9d3d===_0x3287de(0x217))_0x189d9d=keyboardP1ShootDown||connectedGamepadIndex!==null&&navigator['getGamepads']()?.[connectedGamepadIndex]?.[_0x3287de(0x317)][PS5_BUTTON_CROSS]?.[_0x3287de(0x27a)];else{if(_0x4a9d3d==='player2'&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)_0x189d9d=keyboardP2ShootDown||connectedGamepadIndexP2!==null&&navigator[_0x3287de(0x264)]()?.[connectedGamepadIndexP2]?.[_0x3287de(0x317)][PS5_BUTTON_CROSS]?.[_0x3287de(0x27a)];else connectedGamepadIndex!==null?_0x189d9d=keyboardP2ShootDown||connectedGamepadIndex!==null&&navigator['getGamepads']()?.[connectedGamepadIndex]?.[_0x3287de(0x317)][PS5_BUTTON_CROSS]?.[_0x3287de(0x27a)]:_0x189d9d=keyboardP2ShootDown;}}if(_0x465cf5()){if(_0x189d9d)return![];else _0x37b8b3(![]);}if(_0x460930-_0x1057ba<SHOOT_COOLDOWN)return![];}}else{if(_0x460930-_0x1057ba<SHOOT_COOLDOWN)return![];}try{const _0x2933b6=_0x35c3b4['y'];let _0x45d63b=0x0;if(_0x2a7958){const _0x4f6653=_0x35c3b4['x']+_0x35c3b4[_0x3287de(0x2c3)]/0x2,_0x307938=_0x35c3b4['x']+DUAL_SHIP_OFFSET_X+_0x35c3b4[_0x3287de(0x2c3)]/0x2,_0x4bc9de=_0x4f6653-PLAYER_BULLET_WIDTH/0x2,_0x17bc66=_0x307938-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x4bc9de,'y':_0x2933b6,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x4a9d3d}),bullets[_0x3287de(0x26e)]({'x':_0x17bc66,'y':_0x2933b6,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x4a9d3d}),_0x45d63b=0x2;}else{const _0xb18f09=_0x35c3b4['x']+_0x35c3b4['width']/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x3287de(0x26e)]({'x':_0xb18f09,'y':_0x2933b6,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x4a9d3d}),_0x45d63b=0x1;}if(_0x4be580&&!_0x2da188)_0x37b8b3(!![]);return playSound(_0x3287de(0x33c),![],0.4),_0x219e6c(_0x45d63b),_0x1af950(_0x460930),!![];}catch(_0x3230e8){return console[_0x3287de(0x2e1)](_0x3287de(0x273),_0x3230e8),![];}}function handlePlayerInput(){const _0x347b0a=_0x4e50d5;try{const _0x49dbfd=Date[_0x347b0a(0x2e7)]();let _0x1b27d4=![],_0x1f58e0=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedGameMode===_0x347b0a(0x21c)&&currentPlayer===0x2&&!isManualControl||!isManualControl&&!isPlayerTwoAI&&!isCoopAIDemoActive){(isCoopAIDemoActive||!isManualControl&&!isPlayerTwoAI&&!isCoopAIDemoActive)&&(leftPressed=![],rightPressed=![]);shootPressed=![],p2ShootPressed=![];return;}let _0x40664e=isPaused||!isManualControl||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isTwoPlayerMode&&selectedGameMode===_0x347b0a(0x320)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage)||isShowingCaptureMessage||showCsBonusScoreMessage||showPerfectMessage||showCsHitsMessage||showCSClearMessage||isCsCompletionDelayActive;const _0x1f1927=isTwoPlayerMode&&selectedGameMode===_0x347b0a(0x320)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x49dbfd<coopPlayersReadyStartTime+0x1f40;let _0x59200b=(_0x1f1927||showReadyMessage)&&isTwoPlayerMode&&selectedGameMode===_0x347b0a(0x320)&&ship1&&player1Lives>0x0;if(_0x40664e&&!_0x59200b){keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],leftPressed=![],rightPressed=![],p2LeftPressed=![],p2RightPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],shootPressed=![],p2ShootPressed=![];return;}let _0x5da58a=0x0;if(isTouchActiveGame&&gameCanvas&&gameCanvas[_0x347b0a(0x2c3)]>0x0){const _0x5b142b=gameCanvas[_0x347b0a(0x2fb)](),_0xc21c7a=gameCanvas['width']/_0x5b142b['width'];_0x5da58a=(touchCurrentX-_0x5b142b['left'])*_0xc21c7a;}let _0x5b5a84=![],_0x3115fc=![],_0x4bec69=![],_0x50949d=![],_0x574981=![],_0x221c3c=![];if(!_0x40664e||_0x59200b){if(connectedGamepadIndex!==null){const _0xa10ddd=navigator['getGamepads']();if(_0xa10ddd?.[connectedGamepadIndex]){const _0x87db62=_0xa10ddd[connectedGamepadIndex],_0x24c544=processSingleController(_0x87db62,previousGameButtonStates);_0x5b5a84=_0x24c544[_0x347b0a(0x33f)],_0x3115fc=_0x24c544[_0x347b0a(0x272)],_0x4bec69=_0x24c544[_0x347b0a(0x287)],previousGameButtonStates=_0x24c544[_0x347b0a(0x285)][_0x347b0a(0x333)]();if(_0x24c544['pause']&&!isShowingCaptureMessage&&!generalMessageBlockingInput){togglePause();return;}if(_0x24c544[_0x347b0a(0x25c)]&&!isShowingCaptureMessage&&!generalMessageBlockingInput){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x347b0a(0x208)]>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates['length']>0x0)previousGameButtonStates=[];}if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x347b0a(0x2b3))){if(isTwoPlayerMode&&connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex){const _0x3c2fbb=navigator[_0x347b0a(0x264)]();if(_0x3c2fbb?.[connectedGamepadIndexP2]){const _0x29a4e3=_0x3c2fbb[connectedGamepadIndexP2],_0x1de5c2=processSingleController(_0x29a4e3,previousGameButtonStatesP2);_0x50949d=_0x1de5c2[_0x347b0a(0x33f)],_0x574981=_0x1de5c2[_0x347b0a(0x272)],_0x221c3c=_0x1de5c2['shoot'],previousGameButtonStatesP2=_0x1de5c2[_0x347b0a(0x285)][_0x347b0a(0x333)]();}else{if(previousGameButtonStatesP2[_0x347b0a(0x208)]>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}}}const _0x5a372c=p1FireInputWasDown;!_0x40664e||_0x59200b?p1FireInputWasDown=keyboardP1ShootDown||_0x4bec69:p1FireInputWasDown=![];let _0x21e582=![];if(!_0x40664e||_0x59200b){if(!(isPlayerTwoAI&&(selectedOnePlayerGameVariant==='1P_VS_AI_COOP'||selectedGameMode===_0x347b0a(0x21c)))){_0x21e582=p2FireInputWasDown;if(isTwoPlayerMode&&selectedGameMode===_0x347b0a(0x21c)&&currentPlayer===0x2&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)p2FireInputWasDown=keyboardP2ShootDown||_0x221c3c;else connectedGamepadIndex!==null?p2FireInputWasDown=keyboardP2ShootDown||_0x4bec69:p2FireInputWasDown=keyboardP2ShootDown;}else isTwoPlayerMode&&selectedGameMode==='coop'&&!isPlayerTwoAI&&(p2FireInputWasDown=keyboardP2ShootDown||_0x221c3c);}else p2FireInputWasDown=![];}else p2FireInputWasDown=![];if(selectedFiringMode==='single'&&!isTouchActiveGame){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x5a372c&&!p1FireInputWasDown)p1JustFiredSingle=![];if(!isPlayerTwoAI&&_0x21e582&&!p2FireInputWasDown)p2JustFiredSingle=![];}else{if(isTwoPlayerMode&&selectedGameMode===_0x347b0a(0x21c)){if(currentPlayer===0x1&&_0x5a372c&&!p1FireInputWasDown)p1JustFiredSingle=![];else{if(currentPlayer===0x2&&!isPlayerTwoAI){let _0x3847d2=_0x21e582,_0x28eb38=p2FireInputWasDown;connectedGamepadIndexP2===null&&connectedGamepadIndex!==null&&(_0x3847d2=_0x5a372c,_0x28eb38=p1FireInputWasDown);if(_0x3847d2&&!_0x28eb38){if(connectedGamepadIndexP2===null&&connectedGamepadIndex!==null)p1JustFiredSingle=![];else p2JustFiredSingle=![];}}}}else{if(_0x5a372c&&!p1FireInputWasDown)p1JustFiredSingle=![];}}}leftPressed=![],rightPressed=![],p2LeftPressed=![],p2RightPressed=![];let _0x7d6984=![];if(!_0x40664e||_0x59200b){if(isTouchActiveGame&&gameCanvas){if(isTwoPlayerMode&&selectedGameMode===_0x347b0a(0x320)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x3437cb=ship1[_0x347b0a(0x2c3)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x2b69b9=_0x5da58a-_0x3437cb/0x2;_0x2b69b9=Math[_0x347b0a(0x209)](0x0,Math['min'](gameCanvas['width']-_0x3437cb,_0x2b69b9)),ship1['x']=_0x2b69b9,ship1[_0x347b0a(0x29c)]=_0x2b69b9,_0x7d6984=!![];}}else{const _0x22d5bc=ship,_0xc1fe2=playerLives,_0x1d0d8c=isShipCaptured,_0x5eaa8a=isDualShipActive,_0x19aa00=!isPlayerTwoAI||isPlayerTwoAI&&selectedGameMode===_0x347b0a(0x21c)&&currentPlayer===0x1;if(_0x22d5bc&&_0xc1fe2>0x0&&!_0x1d0d8c&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&_0x19aa00){const _0xc0b66f=_0x22d5bc[_0x347b0a(0x2c3)]+(_0x5eaa8a?DUAL_SHIP_OFFSET_X:0x0);let _0x95d4b9=_0x5da58a-_0xc0b66f/0x2;_0x95d4b9=Math[_0x347b0a(0x209)](0x0,Math[_0x347b0a(0x29d)](gameCanvas[_0x347b0a(0x2c3)]-_0xc0b66f,_0x95d4b9)),_0x22d5bc['x']=_0x95d4b9,_0x22d5bc[_0x347b0a(0x29c)]=_0x95d4b9,_0x7d6984=!![];}}}if(!_0x7d6984){if(isTwoPlayerMode&&selectedGameMode===_0x347b0a(0x320)){const _0x1693a9=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;_0x1693a9&&(leftPressed=keyboardP1LeftDown||_0x5b5a84,rightPressed=keyboardP1RightDown||_0x3115fc);if(!isPlayerTwoAI){const _0x1fd70f=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;_0x1fd70f&&(p2LeftPressed=keyboardP2LeftDown||_0x50949d,p2RightPressed=keyboardP2RightDown||_0x574981);}}else{const _0x267997=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0x267997){if(currentPlayer===0x1||!isTwoPlayerMode)leftPressed=keyboardP1LeftDown||_0x5b5a84,rightPressed=keyboardP1RightDown||_0x3115fc;else{if(currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0x347b0a(0x21c)){if(connectedGamepadIndexP2!==null)leftPressed=keyboardP2LeftDown||_0x50949d,rightPressed=keyboardP2RightDown||_0x574981;else connectedGamepadIndex!==null?(leftPressed=keyboardP2LeftDown||_0x5b5a84,rightPressed=keyboardP2RightDown||_0x3115fc):(leftPressed=keyboardP2LeftDown,rightPressed=keyboardP2RightDown);}}}}}}if(!_0x40664e){if(isTwoPlayerMode&&selectedGameMode===_0x347b0a(0x320)){const _0x362352=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;if(_0x362352){(isTouchActiveGame&&selectedFiringMode==='rapid'||p1FireInputWasDown)&&(_0x1b27d4=!![]);if(isShowingCaptureMessage&&isPlayer1ShipCaptured)_0x1b27d4=![];}if(!isPlayerTwoAI){const _0x256b73=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;if(_0x256b73){p2FireInputWasDown&&(_0x1f58e0=!![]);if(isShowingCaptureMessage&&isPlayer2ShipCaptured)_0x1f58e0=![];}}}else{const _0x261039=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isShowingIntro;if(_0x261039){let _0x40719d=![];if(currentPlayer===0x1||!isTwoPlayerMode)_0x40719d=p1FireInputWasDown;else currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0x347b0a(0x21c)&&(_0x40719d=p2FireInputWasDown);(isTouchActiveGame&&selectedFiringMode===_0x347b0a(0x26a)||_0x40719d)&&(_0x1b27d4=!![]);(gameJustStarted||isShowingIntro&&level===0x1)&&(!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode===_0x347b0a(0x21c)&&currentPlayer===0x1)&&(!(keyboardP1ShootDown||_0x4bec69)&&!(isTouchActiveGame&&selectedFiringMode===_0x347b0a(0x274))&&(_0x1b27d4=![]));if(isShowingCaptureMessage&&isShipCaptured)_0x1b27d4=![];}}}shootPressed=_0x1b27d4,p2ShootPressed=_0x1f58e0,isManualControl&&(isTwoPlayerMode&&selectedGameMode===_0x347b0a(0x320)?(shootPressed&&firePlayerBullet('player1',isTouchActiveGame&&selectedFiringMode==='single'),!isPlayerTwoAI&&p2ShootPressed&&firePlayerBullet(_0x347b0a(0x223),![])):shootPressed&&(!(isPlayerTwoAI&&selectedGameMode===_0x347b0a(0x21c)&&currentPlayer===0x2)&&firePlayerBullet(currentPlayer===0x1||!isTwoPlayerMode?_0x347b0a(0x217):_0x347b0a(0x223),isTouchActiveGame&&selectedFiringMode===_0x347b0a(0x274))));}catch(_0x3d10fc){console[_0x347b0a(0x2e1)](_0x347b0a(0x2c0),_0x3d10fc),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![];}}let aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;const AI_DODGE_COMMIT_DURATION=0xa0,AI_DODGE_MOVEMENT_SMOOTHING_FACTOR=0.015,AI_NORMAL_MOVEMENT_SMOOTHING_FACTOR=0.04,AI_CAPTURE_DIVE_SHOOT_STOP_DURATION_MS=0xbb8;function aiControl(){const _0x30bdfb=_0x4e50d5;try{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x30bdfb(0x2b3))return;let _0x220033=null,_0x3afecf=null,_0xf21256=![],_0x104850=![],_0x453b76=![],_0x4884ea=0x0,_0x5c97da='ai',_0x330f08=![];if(isPlayerTwoAI&&selectedGameMode===_0x30bdfb(0x21c)&&currentPlayer===0x2){if(!ship||playerLives<=0x0||isShipCaptured||isShowingPlayerGameOverMessage){if(ship)ship['targetX']=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x30bdfb(0x2c3)]/0x2:0x0;return;}_0x220033=ship,_0x3afecf=smoothedShipX,_0xf21256=isDualShipActive,_0x104850=isShipCaptured,_0x453b76=isInvincible,_0x4884ea=playerLives,_0x5c97da=_0x30bdfb(0x229),_0x330f08=!![];}else{if(!isManualControl&&!isPlayerTwoAI){if(playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage){if(ship)ship['targetX']=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x30bdfb(0x2c3)]/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}if(isShipCaptured||isShowingCaptureMessage){if(ship)ship[_0x30bdfb(0x29c)]=ship['x'];if(smoothedShipX!==undefined&&ship)smoothedShipX=ship['x'];aiIsCurrentlyTargetingCaptureBoss=![];return;}_0x220033=ship,_0x3afecf=smoothedShipX,_0xf21256=isDualShipActive,_0x104850=isShipCaptured,_0x453b76=isInvincible,_0x4884ea=playerLives,_0x5c97da='ai';}else{if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}if(_0x3afecf===undefined&&_0x220033){_0x3afecf=_0x220033['x'];if(_0x330f08||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0x3afecf;}else{if(_0x3afecf===undefined&&!_0x220033){_0x3afecf=gameCanvas?gameCanvas[_0x30bdfb(0x2c3)]/0x2:0x0;if(_0x330f08||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0x3afecf;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}const _0x398948=Date[_0x30bdfb(0x2e7)](),_0x499ef6=gameCanvas[_0x30bdfb(0x2c3)],_0x2996b0=gameCanvas[_0x30bdfb(0x2d1)];let _0x4a54d1=_0x220033[_0x30bdfb(0x2c3)];if(_0xf21256)_0x4a54d1=DUAL_SHIP_OFFSET_X+_0x220033[_0x30bdfb(0x2c3)];const _0x2afa4f=_0x220033['x']+_0x4a54d1/0x2,_0x2e976f=_0x220033['y'],_0x41140e=_0x499ef6/0x2,_0x4d19b6=_0x41140e-_0x4a54d1/0x2,_0x3cd5dd=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive||isShowingCaptureMessage||isShowingIntro;let _0xdb8be2=_0x3afecf,_0x19f097=![],_0x25c936=![],_0x918f3e=_0x3afecf,_0x3af941=null,_0xb27537=![];aiIsCurrentlyTargetingCaptureBoss=![];let _0x47f78b=![],_0x858a0d=![];if(aiNeedsStabilization&&!_0x3cd5dd){aiStabilizationEndTime=_0x398948+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],_0x3afecf=_0x220033['x'];if(_0x330f08||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0x3afecf;}_0x398948>aiDodgeCommitEndTime&&(aiPreviousDodgeDirection=0x0);if(isChallengingStage&&_0x220033){_0x25c936=![],_0xb27537=![],aiIsCurrentlyTargetingCaptureBoss=![],_0x47f78b=![],_0x858a0d=![];let _0x3e2db7=null,_0x333838=-Infinity;for(const _0x4559f5 of enemies){if(!_0x4559f5||_0x4559f5['y']<-_0x4559f5['height']||_0x4559f5['y']>_0x2996b0+_0x4559f5['height']||_0x4559f5['x']<-_0x4559f5['width']||_0x4559f5['x']>_0x499ef6+_0x4559f5[_0x30bdfb(0x2c3)])continue;const _0x221e0f=_0x4559f5['x']+_0x4559f5[_0x30bdfb(0x2c3)]/0x2,_0x129783=_0x4559f5['y']+_0x4559f5[_0x30bdfb(0x2d1)]/0x2,_0x1caa9a=Math[_0x30bdfb(0x209)](0x0,(_0x220033['y']-_0x129783)/PLAYER_BULLET_SPEED),_0x342606=_0x221e0f+(_0x4559f5['velocityX']||0x0)*_0x1caa9a;let _0x26b7dd=_0x342606-_0x4a54d1/0x2;_0x26b7dd=Math[_0x30bdfb(0x209)](AI_EDGE_BUFFER,Math[_0x30bdfb(0x29d)](_0x499ef6-_0x4a54d1-AI_EDGE_BUFFER,_0x26b7dd));let _0x385fd7=(_0x2996b0-_0x129783)*0x2;_0x385fd7-=Math['abs'](_0x2afa4f-_0x342606)*0.5,_0x385fd7>_0x333838&&(_0x333838=_0x385fd7,_0x3e2db7=_0x4559f5,_0xdb8be2=_0x26b7dd);}_0x3af941=_0x3e2db7,_0x3af941?_0x19f097=!![]:(_0xdb8be2=_0x4d19b6,_0x19f097=![]),aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;}else{if(!_0x453b76&&!_0x3cd5dd){const _0x41de6b=Math[_0x30bdfb(0x29d)](0x1,level/0xa),_0x2cf98=SHIP_HEIGHT*(8.5+3.5*_0x41de6b),_0x55ff0d=0x1f4+0x12c*_0x41de6b,_0x5d9c9b=0x12c+0x96*_0x41de6b,_0x5e9727=_0x4a54d1*(0.9+0.5*_0x41de6b),_0x14337d=SHIP_HEIGHT*(0.7+0.4*_0x41de6b),_0x6cdfa6=_0x4a54d1*(1.8+0.8*_0x41de6b);let _0xe251d3=[];for(const _0x509701 of enemyBullets){if(_0x509701['y']<_0x220033['y']+_0x2cf98&&_0x509701['y']+_0x509701['height']>_0x220033['y']-SHIP_HEIGHT*0x2){const _0x43c4e6=(_0x220033['y']-_0x509701['y'])/(_0x509701['vy']||0.01),_0x3eb755=Math[_0x30bdfb(0x29d)](_0x55ff0d/16.67,Math[_0x30bdfb(0x209)](0x0,_0x43c4e6/16.67*1.25));let _0x19a05e=_0x509701['x']+_0x509701['vx']*_0x3eb755,_0x2bfb33=_0x509701['y']+_0x509701['vy']*_0x3eb755,_0x49e33a=![],_0x596568=_0x14337d,_0x2bd296=_0x5e9727;const _0x3585c9=Math['sqrt'](_0x509701['vx']*_0x509701['vx']+_0x509701['vy']*_0x509701['vy'])||BASE_ENEMY_BULLET_SPEED;_0x509701['vy']>_0x3585c9*0.35&&Math[_0x30bdfb(0x313)](_0x509701['x']+_0x509701[_0x30bdfb(0x2c3)]/0x2-(_0x220033['x']+_0x4a54d1/0x2))<_0x4a54d1*1.1&&(_0x49e33a=!![],_0x596568=_0x14337d*2.6,_0x2bd296*=1.5),_0xe251d3['push']({'x':_0x19a05e-_0x509701['width']/0x2-_0x2bd296,'y':_0x2bfb33-_0x509701[_0x30bdfb(0x2d1)]/0x2-_0x596568,'width':_0x509701[_0x30bdfb(0x2c3)]+0x2*_0x2bd296,'height':_0x509701['height']+0x2*_0x596568,'isCritical':!![],'isFromAbove':_0x49e33a,'originalVy':_0x509701['vy']});}}for(const _0x183ae8 of enemies){if(_0x183ae8&&(_0x183ae8[_0x30bdfb(0x2bc)]===_0x30bdfb(0x335)||_0x183ae8['state']===_0x30bdfb(0x25d))&&_0x183ae8['y']<_0x220033['y']+_0x2cf98*0.9&&_0x183ae8['y']+_0x183ae8[_0x30bdfb(0x2d1)]>_0x220033['y']-SHIP_HEIGHT*3.5){const _0x4b812f=_0x5d9c9b/16.67;let _0x2bb77a=_0x183ae8['x']+_0x183ae8['velocityX']*_0x4b812f,_0x476a35=_0x183ae8['y']+_0x183ae8['velocityY']*_0x4b812f;_0xe251d3[_0x30bdfb(0x26e)]({'x':_0x2bb77a-_0x5e9727*0.95,'y':_0x476a35-_0x14337d*0.95,'width':_0x183ae8[_0x30bdfb(0x2c3)]+0x2*_0x5e9727*0.95,'height':_0x183ae8[_0x30bdfb(0x2d1)]+0x2*_0x14337d*0.95,'isCritical':!![],'isFromAbove':![],'originalVy':_0x183ae8[_0x30bdfb(0x28a)]});}}_0xe251d3['sort']((_0x16a763,_0x7d364)=>(_0x7d364[_0x30bdfb(0x22e)]?0x1:-0x1)-(_0x16a763[_0x30bdfb(0x22e)]?0x1:-0x1)||(_0x7d364[_0x30bdfb(0x24a)]||0x0)-(_0x16a763['originalVy']||0x0));if(_0xe251d3['length']>0x0){_0x25c936=!![];let _0x3dca11={'x':_0x3afecf,'score':-Infinity,'dir':0x0,'minDistance':Infinity,'collisions':Infinity};const _0x1c7c9d={'x':_0x3afecf,'y':_0x220033['y'],'width':_0x4a54d1,'height':_0x220033[_0x30bdfb(0x2d1)]};let _0x3a78b1=0x0,_0x5dbbda=0x0,_0x15c39f=Infinity;for(const _0x37a643 of _0xe251d3){checkCollision(_0x1c7c9d,_0x37a643)&&(_0x3a78b1++,_0x5dbbda-=level===0x1?0xdac:0xbb8,_0x37a643[_0x30bdfb(0x22e)]&&(_0x5dbbda-=level===0x1?0x3a98:0x32c8));const _0xa2ee12=_0x37a643['x']+_0x37a643[_0x30bdfb(0x2c3)]/0x2,_0xac62fa=_0x1c7c9d['x']+_0x1c7c9d['width']/0x2,_0xf913d2=Math[_0x30bdfb(0x313)](_0xac62fa-_0xa2ee12)-(_0x1c7c9d[_0x30bdfb(0x2c3)]/0x2+_0x37a643['width']/0x2);_0xf913d2<_0x15c39f&&(_0x15c39f=_0xf913d2);}_0x3dca11={'x':_0x3afecf,'score':_0x5dbbda,'dir':0x0,'minDistance':_0x15c39f,'collisions':_0x3a78b1};const _0xb8472c=_0x6cdfa6,_0x2c03c3=0x3;for(let _0x1b0347=0x0;_0x1b0347<_0x2c03c3;_0x1b0347++){for(const _0x9645a1 of[-0x1,0x1]){let _0xae82c2=_0x3afecf+_0x9645a1*_0xb8472c*(_0x1b0347+0x1);_0xae82c2=Math['max'](AI_EDGE_BUFFER*1.2,Math['min'](_0x499ef6-_0x4a54d1-AI_EDGE_BUFFER*1.2,_0xae82c2));const _0x2342ee={'x':_0xae82c2,'y':_0x220033['y'],'width':_0x4a54d1,'height':_0x220033['height']};let _0x306936=0x0,_0x5d66ba=0x0,_0x5a1fd0=Infinity;for(const _0x1ff1e0 of _0xe251d3){checkCollision(_0x2342ee,_0x1ff1e0)&&(_0x306936++,_0x5d66ba-=level===0x1?0xdac:0xbb8,_0x1ff1e0[_0x30bdfb(0x22e)]&&(_0x5d66ba-=level===0x1?0x3a98:0x32c8));const _0x439ffb=_0x1ff1e0['x']+_0x1ff1e0['width']/0x2,_0x17907c=_0x2342ee['x']+_0x2342ee[_0x30bdfb(0x2c3)]/0x2,_0x51cd7e=Math[_0x30bdfb(0x313)](_0x17907c-_0x439ffb)-(_0x2342ee['width']/0x2+_0x1ff1e0['width']/0x2);_0x51cd7e<_0x5a1fd0&&(_0x5a1fd0=_0x51cd7e);}_0x5d66ba-=Math[_0x30bdfb(0x313)](_0xae82c2-_0x4d19b6)*0.05,_0x5d66ba-=_0x1b0347*0x2;_0x306936===0x0&&_0x9645a1===aiPreviousDodgeDirection&&aiPreviousDodgeDirection!==0x0&&(_0x5d66ba+=0x64);if(_0x306936<_0x3dca11[_0x30bdfb(0x259)])_0x3dca11={'x':_0xae82c2,'score':_0x5d66ba,'dir':_0x9645a1,'minDistance':_0x5a1fd0,'collisions':_0x306936};else{if(_0x306936===_0x3dca11[_0x30bdfb(0x259)]){if(_0x5a1fd0>_0x3dca11[_0x30bdfb(0x1fa)])_0x3dca11={'x':_0xae82c2,'score':_0x5d66ba,'dir':_0x9645a1,'minDistance':_0x5a1fd0,'collisions':_0x306936};else _0x5a1fd0===_0x3dca11['minDistance']&&Math[_0x30bdfb(0x313)](_0xae82c2-_0x4d19b6)<Math[_0x30bdfb(0x313)](_0x3dca11['x']-_0x4d19b6)&&(_0x3dca11={'x':_0xae82c2,'score':_0x5d66ba,'dir':_0x9645a1,'minDistance':_0x5a1fd0,'collisions':_0x306936});}}}}_0x918f3e=_0x3dca11['x'],_0xdb8be2=_0x918f3e;if(_0x3dca11['dir']!==0x0&&_0x3dca11[_0x30bdfb(0x259)]===0x0)(aiPreviousDodgeDirection!==_0x3dca11[_0x30bdfb(0x242)]||_0x3dca11['minDistance']<_0x4a54d1*0.5)&&(aiPreviousDodgeDirection=_0x3dca11[_0x30bdfb(0x242)],aiDodgeCommitEndTime=_0x398948+AI_DODGE_COMMIT_DURATION+(level===0x1?0x3c:0x0));else _0x3dca11[_0x30bdfb(0x259)]>0x0?(aiPreviousDodgeDirection=_0x3dca11[_0x30bdfb(0x242)],aiDodgeCommitEndTime=_0x398948+AI_DODGE_COMMIT_DURATION/0x2):(aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0);}else aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;}else aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;}if(_0x25c936&&!isChallengingStage){_0xb27537=![],aiIsCurrentlyTargetingCaptureBoss=![],_0x47f78b=![],_0x858a0d=![],_0x3af941=null;const _0x14955a=_0xdb8be2<AI_EDGE_BUFFER*2.5||_0xdb8be2>_0x499ef6-_0x4a54d1-AI_EDGE_BUFFER*2.5;if(Math[_0x30bdfb(0x313)](_0xdb8be2-_0x3afecf)>_0x4a54d1*0.1&&!_0x14955a){let _0x55a4b9=null,_0x5a2fa2=-Infinity;for(const _0x3082bc of enemies){if(!_0x3082bc)continue;let _0x5182ac=(_0x2996b0-_0x3082bc['y'])*1.5-Math[_0x30bdfb(0x313)](_0x3082bc['x']+_0x3082bc['width']/0x2-_0x2afa4f)*0x2;if(_0x3082bc[_0x30bdfb(0x2bc)]==='attacking'||_0x3082bc[_0x30bdfb(0x2bc)]===_0x30bdfb(0x25d))_0x5182ac+=0x258;if(_0x3082bc[_0x30bdfb(0x2e9)]===ENEMY3_TYPE&&_0x3082bc[_0x30bdfb(0x2e8)])_0x5182ac+=0x4b0;else{if(_0x3082bc[_0x30bdfb(0x2e9)]===ENEMY3_TYPE&&_0x3082bc[_0x30bdfb(0x27f)])_0x5182ac+=0x190;else{if(_0x3082bc['type']===ENEMY3_TYPE)_0x5182ac-=0xc8;}}_0x5182ac>_0x5a2fa2&&(_0x5a2fa2=_0x5182ac,_0x55a4b9=_0x3082bc);}_0x3af941=_0x55a4b9;}_0x19f097=_0x3af941!==null;}else{if(!isChallengingStage){if(fallingShips[_0x30bdfb(0x208)]>0x0&&!_0x104850&&!isWaitingForRespawn&&!_0xf21256){let _0x4eca90=null,_0x50d780=Infinity;for(const _0x485e43 of fallingShips){let _0x3eb7d1=!isManualControl&&!isPlayerTwoAI&&_0x485e43[_0x30bdfb(0x2ba)]===_0x30bdfb(0x217)||_0x330f08&&_0x485e43[_0x30bdfb(0x2ba)]===String(currentPlayer);if(!_0x4eca90&&!_0x3eb7d1&&_0x485e43[_0x30bdfb(0x2ba)]===null)_0x3eb7d1=!![];if(_0x485e43&&!_0x485e43[_0x30bdfb(0x2eb)]&&_0x3eb7d1){const _0x86f763=Math[_0x30bdfb(0x313)](_0x485e43['x']+_0x485e43[_0x30bdfb(0x2c3)]/0x2-_0x2afa4f)+Math[_0x30bdfb(0x313)](_0x485e43['y']-_0x220033['y']);_0x86f763<_0x50d780&&(_0x50d780=_0x86f763,_0x4eca90=_0x485e43);}}_0x4eca90&&(_0x858a0d=!![],_0xdb8be2=_0x4eca90['x']+_0x4eca90['width']/0x2-_0x4a54d1/0x2,_0x19f097=![],_0x3af941=null);}if(!_0x858a0d){const _0x2675be=enemies[_0x30bdfb(0x33b)](_0x33f7a7=>_0x33f7a7['id']===capturingBossId&&_0x33f7a7[_0x30bdfb(0x2e9)]===ENEMY3_TYPE),_0x5817fe=captureBeamActive&&_0x2675be&&_0x2675be[_0x30bdfb(0x2bc)]===_0x30bdfb(0x292)&&!_0x104850;if(_0x5817fe){const _0x2ef2a7=_0x4884ea>0x1&&!_0xf21256;if(_0x2ef2a7){aiIsCurrentlyTargetingCaptureBoss=!![],_0xb27537=!![];const _0xe77596=_0x2675be['x']+_0x2675be[_0x30bdfb(0x2c3)]/0x2;_0xdb8be2=_0xe77596-_0x4a54d1/0x2,_0x19f097=![],_0x3af941=null;}}}if(!_0x858a0d&&!_0xb27537&&!aiIsCurrentlyTargetingCaptureBoss){const _0xffbee6=enemies[_0x30bdfb(0x33b)](_0x35c37c=>_0x35c37c[_0x30bdfb(0x2e9)]===ENEMY3_TYPE&&_0x35c37c[_0x30bdfb(0x2e8)]&&_0x35c37c[_0x30bdfb(0x27d)]>0x0&&_0x398948-_0x35c37c[_0x30bdfb(0x27d)]>0xbb8);if(_0xffbee6)_0x47f78b=!![],_0x3af941=_0xffbee6,_0xdb8be2=_0xffbee6['x']+_0xffbee6['width']/0x2-_0x4a54d1/0x2,_0x19f097=!![];else{_0x3af941=null;let _0x3d1638=-Infinity;for(const _0x2d6144 of enemies){if(!_0x2d6144)continue;let _0x2a7758=0x0;const _0x4c59d7=_0x2d6144['x']+_0x2d6144['width']/0x2,_0x4fc9e0=_0x4c59d7-_0x2afa4f,_0x2df9ca=_0x2e976f-(_0x2d6144['y']+_0x2d6144['height']);if(_0x2df9ca<0x0&&_0x2d6144[_0x30bdfb(0x2bc)]!==_0x30bdfb(0x335)&&_0x2d6144['state']!==_0x30bdfb(0x25d)&&_0x2d6144['state']!==_0x30bdfb(0x210))continue;_0x2a7758=(_0x2996b0-_0x2d6144['y'])*0x2-Math['abs'](_0x4fc9e0)*0x3-_0x2df9ca;if(_0x2d6144[_0x30bdfb(0x2bc)]==='attacking'||_0x2d6144[_0x30bdfb(0x2bc)]===_0x30bdfb(0x25d))_0x2a7758+=0xbb8;if(_0x2d6144[_0x30bdfb(0x2e9)]===ENEMY3_TYPE&&!_0x2d6144['isDamaged']&&!_0x2d6144[_0x30bdfb(0x2e8)])_0x2a7758-=0x5dc;if(_0x2d6144[_0x30bdfb(0x2e9)]===ENEMY3_TYPE&&_0x2d6144[_0x30bdfb(0x27f)]&&!_0x2d6144[_0x30bdfb(0x2e8)])_0x2a7758+=0x3e8;if(_0x2d6144[_0x30bdfb(0x2e9)]===ENEMY3_TYPE&&_0x2d6144['hasCapturedShip'])_0x2a7758+=0x1388;_0x2a7758>_0x3d1638&&(_0x3d1638=_0x2a7758,_0x3af941=_0x2d6144);}if(_0x3af941){const _0x295a5a=_0x3af941['x']+_0x3af941[_0x30bdfb(0x2c3)]/0x2;_0xdb8be2=_0x295a5a-_0x4a54d1/0x2;const _0x1b19d2=1.8;let _0x40c4b0=_0x3af941['state']===_0x30bdfb(0x2b1)||_0x3af941['state']===_0x30bdfb(0x2a4)?_0x4a54d1*(GRID_SHOOT_ALIGNMENT_FACTOR*_0x1b19d2):_0x4a54d1*(FINAL_SHOOT_ALIGNMENT_THRESHOLD*_0x1b19d2);Math[_0x30bdfb(0x313)](_0x2afa4f-_0x295a5a)<_0x40c4b0&&(_0x19f097=!![]);}else _0xdb8be2=_0x4d19b6,_0x19f097=![];}}}}let _0x591d88;isChallengingStage?_0x591d88=CS_SHOOTING_MOVE_FRACTION:_0x591d88=_0x25c936?AI_DODGE_MOVEMENT_SMOOTHING_FACTOR:AI_NORMAL_MOVEMENT_SMOOTHING_FACTOR;if(_0x220033){_0x3afecf+=(_0xdb8be2-_0x3afecf)*_0x591d88,_0x220033[_0x30bdfb(0x29c)]=_0x3afecf;if(_0x330f08||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0x3afecf;}if(_0x19f097&&!isShowingIntro){let _0x579620=!![];if(!isChallengingStage){(_0xb27537||_0x858a0d)&&(_0x579620=![]);if(_0x3af941){if(_0x3af941['type']===ENEMY3_TYPE&&!_0x3af941[_0x30bdfb(0x2e8)]){const _0x3edd59=isEntrancePhaseActive||[_0x30bdfb(0x2b1),_0x30bdfb(0x2a4),'diving_to_capture_position',_0x30bdfb(0x292)][_0x30bdfb(0x2d0)](_0x3af941[_0x30bdfb(0x2bc)]),_0x1702df=_0x3af941['id']===capturingBossId&&aiIsCurrentlyTargetingCaptureBoss;_0x3edd59&&!_0x1702df&&!_0x47f78b&&(_0x579620=![]);}_0x3af941[_0x30bdfb(0x2e9)]===ENEMY3_TYPE&&_0x3af941['captureDiveInitiationTime']&&_0x3af941[_0x30bdfb(0x33a)]>0x0&&_0x398948-_0x3af941[_0x30bdfb(0x33a)]<AI_CAPTURE_DIVE_SHOOT_STOP_DURATION_MS&&(_0x579620=![]);}else _0x579620=![];}if(_0x579620){if(firePlayerBullet(_0x5c97da,![])){}}}}catch(_0xe2cb4b){console['error'](_0x30bdfb(0x31b),_0xe2cb4b,_0xe2cb4b[_0x30bdfb(0x22c)]);if(ship)ship['targetX']=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x30bdfb(0x2c3)]/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];}}let aiCoopP1_PreviousDodgeDirection=0x0,aiCoopP1_DodgeCommitEndTime=0x0,aiCoopP2_PreviousDodgeDirection=0x0,aiCoopP2_DodgeCommitEndTime=0x0;const AI_COOP_DODGE_MOVEMENT_SMOOTHING_FACTOR=0.022;function aiControlCoop(){const _0x29d99f=_0x4e50d5;if(!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x29d99f(0x2b3))||isPaused||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0){if(ship1)ship1['targetX']=ship1['x'];if(ship2)ship2[_0x29d99f(0x29c)]=ship2['x'];return;}const _0x230aab=Date[_0x29d99f(0x2e7)](),_0x4d501e=gameCanvas[_0x29d99f(0x2c3)],_0x25834a=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture,_0x59b741=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture,_0x4cb534=_0xd9bdaa=>{const _0x9f45fb=_0x29d99f,_0x138a0a=_0xd9bdaa==='p1'&&isPlayer1ShowingGameOverMessage||_0xd9bdaa==='p2'&&isPlayer2ShowingGameOverMessage;return _0x138a0a||showReadyMessage||isCsCompletionDelayActive||isShowingIntro&&!(level===0x1&&coopPlayersReadyStartTime>0x0&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x9f45fb(0x2b3)));};if(_0x25834a&&ship1&&isCoopAIDemoActive){if(smoothedShip1X===undefined)smoothedShip1X=ship1['x'];if(_0x230aab>aiCoopP1_DodgeCommitEndTime)aiCoopP1_PreviousDodgeDirection=0x0;const _0x206ea8=_0x4cb534('p1');let _0x531c6c,_0x24b3a8=null;if(isCoopAIDemoActive){if(isPlayer2ShipCaptured&&capturedBossIdWithMessage)_0x24b3a8=capturedBossIdWithMessage;else{if(aiPlayerActivelySeekingCaptureById===_0x29d99f(0x223)||aiPlayerActivelySeekingCaptureById===_0x29d99f(0x229))_0x24b3a8=capturingBossId;}}_0x531c6c=calculateAIDesiredState(ship1,smoothedShip1X,player1IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer1Invincible,isPlayer1ShipCaptured,isPlayer1WaitingForRespawn,_0x230aab,_0x4d501e,_0x206ea8,'p1',_0x24b3a8,aiCoopP1_PreviousDodgeDirection),aiShip1TargetEnemy=_0x531c6c[_0x29d99f(0x323)];let _0x472a76=_0x531c6c[_0x29d99f(0x257)]?AI_COOP_DODGE_MOVEMENT_SMOOTHING_FACTOR:AI_SMOOTHING_FACTOR_MOVE;smoothedShip1X+=(_0x531c6c['desiredTargetX']-smoothedShip1X)*_0x472a76,ship1[_0x29d99f(0x29c)]=smoothedShip1X;if(_0x531c6c['chosenDodgeDir']!==undefined&&_0x531c6c[_0x29d99f(0x235)]===0x0){if(_0x531c6c[_0x29d99f(0x239)]!==0x0&&_0x531c6c[_0x29d99f(0x239)]!==aiCoopP1_PreviousDodgeDirection)aiCoopP1_PreviousDodgeDirection=_0x531c6c[_0x29d99f(0x239)],aiCoopP1_DodgeCommitEndTime=_0x230aab+AI_DODGE_COMMIT_DURATION;else _0x531c6c[_0x29d99f(0x239)]===0x0&&(aiCoopP1_PreviousDodgeDirection=0x0);}else _0x531c6c[_0x29d99f(0x235)]>0x0&&(aiCoopP1_PreviousDodgeDirection=0x0);_0x531c6c[_0x29d99f(0x301)]&&!(isShowingCaptureMessage&&isPlayer1ShipCaptured)&&fireCoopAIBullet(ship1,player1IsDualShipActive,_0x29d99f(0x217));}if(_0x59b741&&ship2&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x29d99f(0x2b3))){if(smoothedShip2X===undefined)smoothedShip2X=ship2['x'];if(_0x230aab>aiCoopP2_DodgeCommitEndTime)aiCoopP2_PreviousDodgeDirection=0x0;const _0x155bd7=_0x4cb534('p2'),_0x13f5de=isCoopAIDemoActive?_0x29d99f(0x223):_0x29d99f(0x229);let _0x4db044,_0x28b4bc=null;if(isCoopAIDemoActive)isPlayer1ShipCaptured&&capturedBossIdWithMessage&&(_0x28b4bc=capturedBossIdWithMessage);else isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&(isPlayer1ShipCaptured&&capturedBossIdWithMessage&&(_0x28b4bc=capturedBossIdWithMessage));_0x4db044=calculateAIDesiredState(ship2,smoothedShip2X,player2IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer2Invincible,isPlayer2ShipCaptured,isPlayer2WaitingForRespawn,_0x230aab,_0x4d501e,_0x155bd7,_0x13f5de,_0x28b4bc,aiCoopP2_PreviousDodgeDirection),aiShip2TargetEnemy=_0x4db044[_0x29d99f(0x323)];let _0x2f9ac6=_0x4db044[_0x29d99f(0x257)]?AI_COOP_DODGE_MOVEMENT_SMOOTHING_FACTOR:AI_SMOOTHING_FACTOR_MOVE;smoothedShip2X+=(_0x4db044[_0x29d99f(0x271)]-smoothedShip2X)*_0x2f9ac6,ship2[_0x29d99f(0x29c)]=smoothedShip2X;if(_0x4db044[_0x29d99f(0x239)]!==undefined&&_0x4db044[_0x29d99f(0x235)]===0x0){if(_0x4db044[_0x29d99f(0x239)]!==0x0&&_0x4db044['chosenDodgeDir']!==aiCoopP2_PreviousDodgeDirection)aiCoopP2_PreviousDodgeDirection=_0x4db044[_0x29d99f(0x239)],aiCoopP2_DodgeCommitEndTime=_0x230aab+AI_DODGE_COMMIT_DURATION;else _0x4db044[_0x29d99f(0x239)]===0x0&&(aiCoopP2_PreviousDodgeDirection=0x0);}else _0x4db044[_0x29d99f(0x235)]>0x0&&(aiCoopP2_PreviousDodgeDirection=0x0);_0x4db044['shouldTryShoot']&&!(isShowingCaptureMessage&&isPlayer2ShipCaptured)&&fireCoopAIBullet(ship2,player2IsDualShipActive,_0x13f5de);}}function fireCoopAIBullet(_0x5e0c76,_0x39131c,_0x1b55c0){if(!_0x5e0c76)return![];return firePlayerBullet(_0x1b55c0,![]);}function calculateAIDesiredState(_0x2bf2ea,_0x1388f1,_0x3c4c16,_0x36a0dd,_0x4e23e4,_0xe8ab62,_0x371e17,_0x532fba,_0x2290dd,_0xd5941e,_0x3254df,_0x4dc3a1,_0x2dbb73,_0x9fb78c=null,_0x5d3ef5=0x0){const _0x14707d=_0x4e50d5;let _0x2cb58c=_0x1388f1,_0x1396e2=![],_0x1ab278=null,_0x4dfb2a=![],_0x4453d3=![],_0x2d215e=![],_0xcffd04=![],_0x35a6ad=![],_0x2f4b10=0x0,_0x4c72b9=0x0;const _0x2a8258=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x14707d(0x2b3),_0x17cef2=gameCanvas[_0x14707d(0x2d1)],_0x1a8be8=_0x2bf2ea[_0x14707d(0x2c3)]+(_0x3c4c16?DUAL_SHIP_OFFSET_X:0x0),_0x157bbb=_0x2bf2ea['x']+_0x1a8be8/0x2,_0x9da1eb=_0x2bf2ea['y'],_0x40d5e5=_0x2dbb73==='p1'?player1Lives:_0x2dbb73==='ai_p2'||_0x2dbb73==='player2'?player2Lives:0x0,_0x1e362a=_0x40d5e5>0x1&&!_0x3c4c16&&!_0x532fba;let _0x1dcb2a=gameCanvas[_0x14707d(0x2c3)]/0x2;const _0xab4e40=isShowingIntro||isShowingCoopPlayersReady,_0x165dbd=_0x2a8258&&_0xab4e40&&!(isChallengingStage&&isEntrancePhaseActive),_0x4657fc=_0x2a8258&&(_0x2dbb73==='p1'&&player1Lives>0x0&&player2Lives<=0x0||(_0x2dbb73===_0x14707d(0x229)||_0x2dbb73===_0x14707d(0x223))&&player2Lives>0x0&&player1Lives<=0x0);if(_0x165dbd&&_0x4657fc)_0x1dcb2a=gameCanvas['width']/0x2;else{if(_0x2dbb73==='p1')_0x1dcb2a=gameCanvas[_0x14707d(0x2c3)]*0.25+Math[_0x14707d(0x256)](_0xd5941e/(AI_WIGGLE_PERIOD*1.1))*(AI_WIGGLE_AMPLITUDE*0.8);else(_0x2dbb73===_0x14707d(0x229)||_0x2dbb73===_0x14707d(0x223))&&(_0x1dcb2a=gameCanvas[_0x14707d(0x2c3)]*0.75+Math[_0x14707d(0x330)](_0xd5941e/(AI_WIGGLE_PERIOD*0.9))*(AI_WIGGLE_AMPLITUDE*0.8));}let _0x43ad53=_0x1dcb2a-_0x1a8be8/0x2;if(_0x4dc3a1||_0x532fba||_0x2290dd||_0x2dbb73==='p1'&&player1NeedsRespawnAfterCapture||(_0x2dbb73===_0x14707d(0x229)||_0x2dbb73===_0x14707d(0x223))&&player2NeedsRespawnAfterCapture)return _0x2cb58c=_0x165dbd&&_0x4657fc?_0x43ad53:_0x2bf2ea['x'],{'desiredTargetX':_0x2cb58c,'shouldTryShoot':![],'targetEnemyForAI':null,'chosenDodgeDir':0x0,'isDodging':![],'predictedCollisions':0x0};const _0x545ac0=_0x36a0dd[_0x14707d(0x33b)](_0x177c33=>_0x177c33['id']===capturingBossId&&_0x177c33[_0x14707d(0x2e9)]===ENEMY3_TYPE);let _0x40d938=_0x1388f1;if(!isChallengingStage&&!_0x371e17){const _0xfa82c1=SHIP_HEIGHT*0x9,_0x39bd1c=0x226,_0x48b0b1=0x15e,_0x295147=_0x1a8be8*0.6,_0x157724=SHIP_HEIGHT*0.4,_0x5b6e4f=_0x1a8be8*0.6,_0x2d9111=SHIP_HEIGHT*0.6;let _0x2f0b11=[];for(const _0x112855 of _0x4e23e4){if(_0x112855['y']<_0x2bf2ea['y']+_0xfa82c1&&_0x112855['y']+_0x112855[_0x14707d(0x2d1)]>_0x2bf2ea['y']-SHIP_HEIGHT*0x3){const _0x39bd34=_0x39bd1c/16.67;let _0xe41cc=_0x112855['x']+_0x112855['vx']*_0x39bd34,_0x2bb36d=_0x112855['y']+_0x112855['vy']*_0x39bd34,_0x583e50=![],_0x8515f9=_0x157724,_0x2712a2=_0x295147;const _0xbf8d33=Math[_0x14707d(0x233)](_0x112855['vx']*_0x112855['vx']+_0x112855['vy']*_0x112855['vy'])||BASE_ENEMY_BULLET_SPEED;_0x112855['vy']>_0xbf8d33*0.6&&Math[_0x14707d(0x313)](_0x112855['x']+_0x112855['width']/0x2-(_0x2bf2ea['x']+_0x1a8be8/0x2))<_0x1a8be8*0.9&&(_0x583e50=!![],_0x8515f9=_0x157724*1.85),_0x2f0b11[_0x14707d(0x26e)]({'x':_0xe41cc-_0x112855[_0x14707d(0x2c3)]/0x2-_0x2712a2,'y':_0x2bb36d-_0x112855['height']/0x2-_0x8515f9,'width':_0x112855['width']+0x2*_0x2712a2,'height':_0x112855['height']+0x2*_0x8515f9,'isCritical':!![],'isFromAbove':_0x583e50});}}for(const _0xf9714b of _0x36a0dd){if(_0xf9714b&&(_0xf9714b[_0x14707d(0x2bc)]===_0x14707d(0x335)||_0xf9714b[_0x14707d(0x2bc)]===_0x14707d(0x25d))&&_0xf9714b['y']<_0x2bf2ea['y']+_0xfa82c1*0.8&&_0xf9714b['y']+_0xf9714b[_0x14707d(0x2d1)]>_0x2bf2ea['y']-SHIP_HEIGHT*3.5){const _0x466926=_0x48b0b1/16.67;let _0x160402=_0xf9714b['x']+_0xf9714b[_0x14707d(0x1f8)]*_0x466926,_0x426705=_0xf9714b['y']+_0xf9714b[_0x14707d(0x28a)]*_0x466926;_0x2f0b11[_0x14707d(0x26e)]({'x':_0x160402-_0x5b6e4f/0x2,'y':_0x426705-_0x2d9111/0x2,'width':_0xf9714b['width']+_0x5b6e4f,'height':_0xf9714b[_0x14707d(0x2d1)]+_0x2d9111,'isCritical':!![],'isFromAbove':![]});}}if(_0x2f0b11[_0x14707d(0x208)]>0x0){_0x4dfb2a=!![];let _0x2f9329=_0x1388f1,_0xfca86e=Infinity,_0x491b90=-0x1;const _0x29d247=[-0x1,0x1];if(_0x5d3ef5!==0x0){_0x29d247[_0x14707d(0x25b)](_0x5d3ef5);const _0x5a1fcf=-_0x5d3ef5;if(!_0x29d247[_0x14707d(0x2d0)](_0x5a1fcf))_0x29d247[_0x14707d(0x26e)](_0x5a1fcf);}const _0x369096=[...new Set(_0x29d247),0x0];for(const _0x3bf26a of _0x369096){const _0x32c996=_0x3bf26a===0x0?0x0:_0x1a8be8*1.8+Math[_0x14707d(0x30c)]()*_0x1a8be8*0.8;let _0x318f12=_0x1388f1+_0x3bf26a*_0x32c996;_0x318f12=Math['max'](AI_EDGE_BUFFER*2.5,Math[_0x14707d(0x29d)](_0x3254df-_0x1a8be8-AI_EDGE_BUFFER*2.5,_0x318f12));const _0xd8141c={'x':_0x318f12,'y':_0x2bf2ea['y'],'width':_0x1a8be8,'height':_0x2bf2ea[_0x14707d(0x2d1)]};let _0x464110=0x0,_0x24777d=Infinity;for(const _0x4e61db of _0x2f0b11){checkCollision(_0xd8141c,_0x4e61db)&&(_0x464110++,_0x4e61db[_0x14707d(0x22e)]&&(_0x464110+=0x5));const _0x470739=_0x4e61db['x']+_0x4e61db[_0x14707d(0x2c3)]/0x2,_0x41f9e8=_0xd8141c['x']+_0xd8141c[_0x14707d(0x2c3)]/0x2,_0x2a8d6a=Math[_0x14707d(0x313)](_0x41f9e8-_0x470739)-(_0xd8141c[_0x14707d(0x2c3)]/0x2+_0x4e61db[_0x14707d(0x2c3)]/0x2);_0x2a8d6a<_0x24777d&&(_0x24777d=_0x2a8d6a);}if(_0x464110<_0xfca86e)_0xfca86e=_0x464110,_0x491b90=_0x24777d,_0x2f9329=_0x318f12,_0x2f4b10=_0x3bf26a;else{if(_0x464110===_0xfca86e){if(_0x24777d>_0x491b90)_0x491b90=_0x24777d,_0x2f9329=_0x318f12,_0x2f4b10=_0x3bf26a;else _0x24777d===_0x491b90&&Math['abs'](_0x318f12-_0x43ad53)<Math[_0x14707d(0x313)](_0x2f9329-_0x43ad53)&&(_0x2f9329=_0x318f12,_0x2f4b10=_0x3bf26a);}}}_0x40d938=_0x2f9329,_0x4c72b9=_0xfca86e;}else _0x5d3ef5!==0x0&&_0xd5941e<(_0x2dbb73==='p1'?aiCoopP1_DodgeCommitEndTime:aiCoopP2_DodgeCommitEndTime)?(_0x4dfb2a=!![],_0x40d938=_0x1388f1+_0x5d3ef5*(_0x1a8be8*0.05),_0x2f4b10=_0x5d3ef5):_0x2f4b10=0x0;}else _0x2f4b10=0x0;if(_0x4dfb2a){_0x2cb58c=Math[_0x14707d(0x209)](AI_EDGE_BUFFER,Math['min'](gameCanvas[_0x14707d(0x2c3)]-_0x1a8be8-AI_EDGE_BUFFER,_0x40d938)),_0x4453d3=![],_0x2d215e=![],_0xcffd04=![],_0x35a6ad=![],_0x1ab278=null;const _0x3c20a7=_0x2cb58c<AI_EDGE_BUFFER*0x2||_0x2cb58c>_0x3254df-_0x1a8be8-AI_EDGE_BUFFER*0x2;if(Math[_0x14707d(0x313)](_0x2cb58c-_0x1388f1)>_0x1a8be8*0.1&&!_0x3c20a7){let _0xe92fd=null,_0x4020dd=-Infinity;for(const _0xed48b8 of _0x36a0dd){if(!_0xed48b8)continue;if(_0x9fb78c&&_0xed48b8['id']===_0x9fb78c)continue;let _0x27ded7=0x0;const _0x3d1e72=_0xed48b8['x']+_0xed48b8[_0x14707d(0x2c3)]/0x2,_0x3beef1=_0x3d1e72-_0x157bbb,_0x1b1554=_0x9da1eb-(_0xed48b8['y']+_0xed48b8[_0x14707d(0x2d1)]);if(_0x1b1554<0x0&&_0xed48b8['state']!==_0x14707d(0x335)&&_0xed48b8[_0x14707d(0x2bc)]!==_0x14707d(0x25d)&&_0xed48b8[_0x14707d(0x2bc)]!=='following_bezier_path')continue;_0x27ded7=(_0x17cef2-_0xed48b8['y'])*1.2-Math['abs'](_0x3beef1)*2.2-_0x1b1554*0.7;if(_0xed48b8[_0x14707d(0x2bc)]===_0x14707d(0x335)||_0xed48b8['state']==='diving_to_capture_position')_0x27ded7+=0x15e;if(_0xed48b8[_0x14707d(0x2e9)]===ENEMY3_TYPE&&_0xed48b8[_0x14707d(0x2e8)])_0x27ded7+=0x2bc;else{if(_0xed48b8['type']===ENEMY3_TYPE&&_0xed48b8['isDamaged'])_0x27ded7+=0x12c;else{if(_0xed48b8[_0x14707d(0x2e9)]===ENEMY3_TYPE)_0x27ded7-=0x96;}}_0x27ded7>_0x4020dd&&(_0x4020dd=_0x27ded7,_0xe92fd=_0xed48b8);}_0x1ab278=_0xe92fd;}_0x1396e2=_0x1ab278!==null;}else{_0x4453d3=![],_0x2d215e=![],_0xcffd04=![],_0x35a6ad=![],_0x1ab278=null;if(!_0x3c4c16){const _0x54dde2=_0xe8ab62[_0x14707d(0x33b)](_0x157e40=>_0x157e40[_0x14707d(0x2ba)]===_0x2dbb73&&!_0x157e40['landed']);_0x54dde2&&(_0x4453d3=!![],_0x2cb58c=_0x54dde2['x']+_0x54dde2[_0x14707d(0x2c3)]/0x2-_0x1a8be8/0x2,_0x1396e2=![]);}if(!_0x4453d3){const _0x4c92cf=captureBeamActive&&_0x545ac0&&_0x545ac0[_0x14707d(0x2bc)]===_0x14707d(0x292)&&!_0x532fba;if(_0x1e362a&&_0x4c92cf){let _0x43876d=![];if(_0x2a8258){if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x14707d(0x2b3)&&_0x2dbb73===_0x14707d(0x229)){_0x43876d=!![];if(aiPlayerActivelySeekingCaptureById===null)aiPlayerActivelySeekingCaptureById=_0x2dbb73;}else{if(isCoopAIDemoActive){if(aiPlayerActivelySeekingCaptureById===null||aiPlayerActivelySeekingCaptureById===_0x2dbb73){if(aiPlayerActivelySeekingCaptureById===null)aiPlayerActivelySeekingCaptureById=_0x2dbb73;_0x43876d=!![];}}}}if(_0x43876d){_0x2d215e=!![];const _0x21a5fe=_0x545ac0['x']+_0x545ac0[_0x14707d(0x2c3)]/0x2;_0x2cb58c=_0x21a5fe-_0x1a8be8/0x2,_0x1396e2=![],_0x1ab278=_0x545ac0;}}aiPlayerActivelySeekingCaptureById===_0x2dbb73&&!_0x2d215e&&(aiPlayerActivelySeekingCaptureById=null);}if(!_0x4453d3&&!_0x2d215e){const _0x46002c=_0x2dbb73==='p1'&&isPlayer2ShipCaptured||(_0x2dbb73===_0x14707d(0x223)||_0x2dbb73==='ai_p2')&&isPlayer1ShipCaptured;if(isCoopAIDemoActive&&_0x46002c&&capturedBossIdWithMessage){let _0x305edd=_0x2dbb73==='p1'?coopPartner2CapturedTime:coopPartner1CapturedTime;if(_0xd5941e-_0x305edd>=COOP_AI_SAVE_PARTNER_DELAY_MS||_0x40d5e5===0x1){const _0x468bc2=_0x36a0dd[_0x14707d(0x33b)](_0x4c108c=>_0x4c108c['id']===capturedBossIdWithMessage&&_0x4c108c[_0x14707d(0x2e9)]===ENEMY3_TYPE&&_0x4c108c[_0x14707d(0x2e8)]);_0x468bc2&&(!_0x9fb78c||_0x468bc2['id']!==_0x9fb78c)&&(_0xcffd04=!![],_0x1ab278=_0x468bc2,_0x2cb58c=_0x468bc2['x']+_0x468bc2[_0x14707d(0x2c3)]/0x2-_0x1a8be8/0x2,_0x1396e2=!![]);}}}if(!_0x4453d3&&!_0x2d215e&&!_0xcffd04){const _0x5ba1c5=_0x36a0dd[_0x14707d(0x33b)](_0x4a1dc4=>_0x4a1dc4[_0x14707d(0x2e9)]===ENEMY3_TYPE&&_0x4a1dc4[_0x14707d(0x2e8)]&&_0x4a1dc4[_0x14707d(0x27d)]>0x0&&_0xd5941e-_0x4a1dc4[_0x14707d(0x27d)]>0xbb8&&(!_0x2a8258||_0x2a8258&&_0x4a1dc4['id']!==capturedBossIdWithMessage)&&(!_0x545ac0||_0x4a1dc4['id']!==_0x545ac0['id'])&&(!_0x9fb78c||_0x4a1dc4['id']!==_0x9fb78c));let _0x39a3fb=![];isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&_0x2dbb73==='ai_p2'&&isPlayer1ShipCaptured&&capturedBossIdWithMessage&&(_0x5ba1c5&&_0x5ba1c5['id']===capturedBossIdWithMessage&&(_0x39a3fb=!![]));if(_0x5ba1c5&&!(isCoopAIDemoActive&&_0x5ba1c5['id']===capturedBossIdWithMessage)&&!(isCoopAIDemoActive&&_0x9fb78c&&_0x5ba1c5['id']===_0x9fb78c)&&!_0x39a3fb)_0x35a6ad=!![],_0x1ab278=_0x5ba1c5,_0x2cb58c=_0x5ba1c5['x']+_0x5ba1c5[_0x14707d(0x2c3)]/0x2-_0x1a8be8/0x2,_0x1396e2=!![];else{let _0x55783c=-Infinity;for(const _0x5fa240 of _0x36a0dd){if(!_0x5fa240)continue;if(_0x9fb78c&&_0x5fa240['id']===_0x9fb78c)continue;if(_0x545ac0&&_0x5fa240['id']===_0x545ac0['id']&&(_0x545ac0[_0x14707d(0x2bc)]===_0x14707d(0x2a4)||_0x545ac0[_0x14707d(0x2bc)]===_0x14707d(0x25d)||_0x545ac0[_0x14707d(0x2bc)]===_0x14707d(0x292)))continue;if(isCoopAIDemoActive&&aiPlayerActivelySeekingCaptureById&&aiPlayerActivelySeekingCaptureById!==_0x2dbb73&&_0x545ac0&&_0x5fa240['id']===_0x545ac0['id'])continue;if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x14707d(0x2b3)&&_0x2dbb73===_0x14707d(0x229)&&isPlayer1ShipCaptured&&capturedBossIdWithMessage&&_0x5fa240['id']===capturedBossIdWithMessage)continue;if(isCoopAIDemoActive&&capturedBossIdWithMessage&&_0x5fa240['id']===capturedBossIdWithMessage)continue;if(isCoopAIDemoActive&&capturingBossId&&_0x5fa240['id']===capturingBossId&&(_0x5fa240['state']===_0x14707d(0x2a4)||_0x5fa240['state']===_0x14707d(0x25d)||_0x5fa240[_0x14707d(0x2bc)]===_0x14707d(0x292)))continue;let _0x32e014=_0x5fa240[_0x14707d(0x2e9)]===ENEMY3_TYPE&&_0x5fa240[_0x14707d(0x2e8)]&&_0x40d5e5<=0x1&&(!_0x2a8258||_0x2a8258&&_0x5fa240['id']!==capturedBossIdWithMessage),_0x1631ca=0x0;const _0x486408=_0x5fa240['x']+_0x5fa240[_0x14707d(0x2c3)]/0x2,_0xa14b91=_0x486408-_0x157bbb,_0x5475c7=_0x9da1eb-(_0x5fa240['y']+_0x5fa240[_0x14707d(0x2d1)]);if(_0x5475c7<0x0&&_0x5fa240['state']!==_0x14707d(0x335)&&_0x5fa240['state']!=='diving_to_capture_position'&&_0x5fa240[_0x14707d(0x2bc)]!==_0x14707d(0x210))continue;let _0x3dded3=0x0;if(_0x2a8258&&!(isCoopAIDemoActive&&aiPlayerActivelySeekingCaptureById&&aiPlayerActivelySeekingCaptureById!==_0x2dbb73)){if(_0x2dbb73==='p1'&&_0x486408<gameCanvas[_0x14707d(0x2c3)]/0x2)_0x3dded3=0x1388;else{if((_0x2dbb73===_0x14707d(0x229)||_0x2dbb73===_0x14707d(0x223))&&_0x486408>=gameCanvas[_0x14707d(0x2c3)]/0x2)_0x3dded3=0x1388;}}_0x1631ca=_0x3dded3+(_0x17cef2-_0x5fa240['y'])*0x2-Math['abs'](_0xa14b91)*0x3-_0x5475c7;if(_0x5fa240['state']===_0x14707d(0x335)||_0x5fa240['state']===_0x14707d(0x25d))_0x1631ca+=0xbb8;if(_0x5fa240[_0x14707d(0x2e9)]===ENEMY3_TYPE&&!_0x5fa240['isDamaged']&&!_0x5fa240['hasCapturedShip'])_0x1631ca-=0x5dc;if(_0x5fa240[_0x14707d(0x2e9)]===ENEMY3_TYPE&&_0x5fa240[_0x14707d(0x27f)]&&!_0x5fa240[_0x14707d(0x2e8)])_0x1631ca+=0x3e8;if(_0x5fa240[_0x14707d(0x2e9)]===ENEMY3_TYPE&&_0x5fa240[_0x14707d(0x2e8)]){if(!_0x32e014)_0x1631ca+=0x1388;else _0x1631ca-=0x2710;}_0x1631ca>_0x55783c&&(_0x55783c=_0x1631ca,_0x1ab278=_0x5fa240);}if(_0x1ab278){_0x2cb58c=_0x1ab278['x']+_0x1ab278[_0x14707d(0x2c3)]/0x2-_0x1a8be8/0x2;const _0x35e199=isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?1.2:0.9;Math[_0x14707d(0x313)](_0x157bbb-(_0x1ab278['x']+_0x1ab278[_0x14707d(0x2c3)]/0x2))<_0x1a8be8*_0x35e199&&(_0x1396e2=!![]);}else _0x2cb58c=_0x43ad53,_0x1396e2=![];}}}if(_0x1396e2){(_0x2d215e||_0x4453d3)&&(_0x1396e2=![]);if(_0x1ab278){if(_0x1ab278['id']===capturingBossId){const _0x5da2c4=_0x1ab278[_0x14707d(0x2bc)]==='preparing_capture'||_0x1ab278[_0x14707d(0x2bc)]==='diving_to_capture_position'||_0x1ab278[_0x14707d(0x2bc)]===_0x14707d(0x292);if(_0x5da2c4)_0x1396e2=![];}if(_0x1ab278[_0x14707d(0x2e9)]===ENEMY3_TYPE&&!_0x1ab278['hasCapturedShip']){const _0x5d3b06=[_0x14707d(0x2b1),_0x14707d(0x2a4),_0x14707d(0x25d),_0x14707d(0x292)][_0x14707d(0x2d0)](_0x1ab278[_0x14707d(0x2bc)])||isEntrancePhaseActive,_0x2ba0d7=_0x545ac0&&_0x1ab278['id']===_0x545ac0['id']&&aiPlayerActivelySeekingCaptureById===_0x2dbb73;_0x5d3b06&&!_0x35a6ad&&!_0xcffd04&&!_0x2ba0d7&&(_0x1396e2=![]);}if(_0x3c4c16&&_0x2a8258&&_0x1ab278[_0x14707d(0x2e9)]===ENEMY3_TYPE&&!_0x1ab278['hasCapturedShip']){const _0xc56293=_0x2dbb73==='p1'?isCoopAIDemoActive?_0x14707d(0x223):_0x14707d(0x229):'p1';let _0x2b9022=![];_0xc56293==='p1'?_0x2b9022=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1IsDualShipActive:_0x2b9022=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2IsDualShipActive;if(_0x2b9022)_0x1396e2=![];}if(_0x1ab278['type']===ENEMY3_TYPE&&_0x1ab278[_0x14707d(0x2e8)]&&_0x40d5e5<=0x1){const _0x52c205=_0x2a8258&&_0x1ab278['id']===capturedBossIdWithMessage&&partnerIsCaptured;if(!_0x52c205&&!_0x35a6ad&&!_0xcffd04)_0x1396e2=![];}isCoopAIDemoActive&&_0x9fb78c&&_0x1ab278['id']===_0x9fb78c&&(_0x1396e2=![]);}else _0x1396e2=![];isCoopAIDemoActive&&aiPlayerActivelySeekingCaptureById&&aiPlayerActivelySeekingCaptureById!==_0x2dbb73&&_0x545ac0&&_0x1ab278&&_0x1ab278['id']===_0x545ac0['id']&&(_0x1396e2=![]);if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x14707d(0x2b3)&&_0x2dbb73===_0x14707d(0x229)){const _0x23718a=isShowingIntro&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0xd5941e<coopPlayersReadyStartTime+0x1f40;(_0x23718a||isShowingIntro)&&(_0x1396e2=![]);const _0x34d728=_0x36a0dd['some'](_0x42a34c=>_0x42a34c[_0x14707d(0x2e9)]===ENEMY3_TYPE&&_0x42a34c[_0x14707d(0x33a)]&&_0x42a34c[_0x14707d(0x33a)]>0x0&&_0xd5941e-_0x42a34c[_0x14707d(0x33a)]<AI_CAPTURE_DIVE_SHOOT_STOP_DURATION_MS);_0x34d728&&(_0x1396e2=![]),isPlayer1ShipCaptured&&capturedBossIdWithMessage&&_0x1ab278&&_0x1ab278['id']===capturedBossIdWithMessage&&(_0x1396e2=![]);}}return _0x2cb58c=Math[_0x14707d(0x209)](AI_EDGE_BUFFER,Math[_0x14707d(0x29d)](gameCanvas[_0x14707d(0x2c3)]-_0x1a8be8-AI_EDGE_BUFFER,_0x2cb58c)),{'desiredTargetX':_0x2cb58c,'shouldTryShoot':_0x1396e2,'targetEnemyForAI':_0x1ab278,'chosenDodgeDir':_0x2f4b10,'isDodging':_0x4dfb2a,'predictedCollisions':_0x4c72b9};}function findAndDetachEnemy(){const _0x20d9c7=_0x4e50d5;try{let _0x13d608=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x13d608=isPlayer1ShipCaptured||isPlayer2ShipCaptured:_0x13d608=isShipCaptured;if(!isFullGridWave&&_0x13d608){const _0x126d9a=enemies[_0x20d9c7(0x33b)](_0x2628d0=>_0x2628d0&&_0x2628d0['type']===ENEMY3_TYPE&&_0x2628d0[_0x20d9c7(0x2e8)]&&_0x2628d0[_0x20d9c7(0x2bc)]==='in_grid');if(_0x126d9a){_0x126d9a['justReturned']=!![],_0x126d9a[_0x20d9c7(0x2dd)]='normal';const _0x2d6072=new Set([_0x126d9a['id']]);return resetJustReturnedFlags(_0x2d6072),[_0x126d9a];}}if(isEntrancePhaseActive)return null;let _0x456971=enemies[_0x20d9c7(0x222)](_0x126e43=>_0x126e43&&_0x126e43[_0x20d9c7(0x2bc)]===_0x20d9c7(0x2b1)&&!_0x126e43[_0x20d9c7(0x28e)]);if(_0x456971[_0x20d9c7(0x208)]===0x0){_0x456971=enemies['filter'](_0x4748b2=>_0x4748b2&&_0x4748b2[_0x20d9c7(0x2bc)]===_0x20d9c7(0x2b1));if(_0x456971[_0x20d9c7(0x208)]===0x0)return null;}if(_0x456971[_0x20d9c7(0x208)]===0x0)return null;_0x456971[_0x20d9c7(0x225)]((_0xb20f63,_0x43dd28)=>(_0x43dd28[_0x20d9c7(0x266)]||0x0)-(_0xb20f63[_0x20d9c7(0x266)]||0x0));const _0x245da0=_0x456971[_0x20d9c7(0x208)]<=0x3;let _0x3ea75b=[];const _0xe7fd66=_0x20d9c7(0x21c);gridJustCompleted&&(gridJustCompleted=![]);let _0x21f573=![];if(level>0x1&&!_0x245da0&&_0x456971[_0x20d9c7(0x208)]>=0x3){const _0x4cba23=_0x456971['filter'](_0x3a98bd=>_0x3a98bd[_0x20d9c7(0x2e9)]===ENEMY3_TYPE&&!_0x3a98bd[_0x20d9c7(0x2e8)]);for(const _0x337520 of _0x4cba23){const _0x346b23=_0x456971[_0x20d9c7(0x33b)](_0x432b4a=>_0x432b4a[_0x20d9c7(0x2e9)]===ENEMY2_TYPE&&_0x432b4a[_0x20d9c7(0x266)]===_0x337520[_0x20d9c7(0x266)]&&_0x432b4a[_0x20d9c7(0x276)]===_0x337520['gridCol']-0x1),_0x7fa7bc=_0x456971[_0x20d9c7(0x33b)](_0x8db1e2=>_0x8db1e2[_0x20d9c7(0x2e9)]===ENEMY2_TYPE&&_0x8db1e2[_0x20d9c7(0x266)]===_0x337520[_0x20d9c7(0x266)]&&_0x8db1e2[_0x20d9c7(0x276)]===_0x337520['gridCol']+0x1);if(_0x346b23&&_0x7fa7bc){_0x3ea75b=[_0x337520,_0x346b23,_0x7fa7bc],_0x21f573=!![];break;}}}if(!_0x21f573&&!_0x245da0){const _0x2a70ee=_0x456971[_0x20d9c7(0x222)](_0x2437ac=>_0x2437ac[_0x20d9c7(0x2e9)]===ENEMY1_TYPE),_0x4c88c7=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x2a70ee[_0x20d9c7(0x208)]>=0x2&&Math[_0x20d9c7(0x30c)]()<_0x4c88c7){const _0x56ade5=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x1cd680=_0x2a70ee[_0x20d9c7(0x208)]>=0x3&&Math[_0x20d9c7(0x30c)]()<_0x56ade5?0x3:0x2;let _0x3633ce=![];_0x2a70ee[_0x20d9c7(0x225)](()=>Math[_0x20d9c7(0x30c)]()-0.5);for(let _0x2de119=0x0;_0x2de119<_0x2a70ee[_0x20d9c7(0x208)];_0x2de119++){const _0x102e36=_0x2a70ee[_0x2de119];let _0x4fa718=[_0x102e36];const _0x3a069a=_0x2a70ee[_0x20d9c7(0x222)](_0x78cea0=>_0x78cea0['id']!==_0x102e36['id']&&_0x78cea0[_0x20d9c7(0x266)]===_0x102e36['gridRow']);_0x3a069a['sort']((_0x30d0b2,_0x163140)=>Math[_0x20d9c7(0x313)](_0x30d0b2['gridCol']-_0x102e36[_0x20d9c7(0x276)])-Math[_0x20d9c7(0x313)](_0x163140['gridCol']-_0x102e36[_0x20d9c7(0x276)]));for(let _0x1b8b48=0x0;_0x1b8b48<_0x3a069a[_0x20d9c7(0x208)]&&_0x4fa718[_0x20d9c7(0x208)]<_0x1cd680;_0x1b8b48++){_0x4fa718['push'](_0x3a069a[_0x1b8b48]);}if(_0x4fa718['length']===_0x1cd680){_0x3ea75b=_0x4fa718,_0x21f573=!![],_0x3633ce=!![];break;}}!_0x3633ce&&_0x2a70ee['length']>=_0x1cd680&&(_0x3ea75b=_0x2a70ee[_0x20d9c7(0x333)](0x0,_0x1cd680),_0x21f573=!![]);}}if(!_0x21f573&&!_0x245da0){const _0x934c1e=_0x456971[_0x20d9c7(0x222)](_0xff1ce4=>_0xff1ce4['type']===ENEMY2_TYPE),_0x263d79=0.2;if(_0x934c1e['length']>=0x2&&Math[_0x20d9c7(0x30c)]()<_0x263d79){const _0x4d8eab=0x2;let _0x373e78=![];_0x934c1e[_0x20d9c7(0x225)](()=>Math[_0x20d9c7(0x30c)]()-0.5);for(let _0x32dbeb=0x0;_0x32dbeb<_0x934c1e[_0x20d9c7(0x208)];_0x32dbeb++){const _0x2f433d=_0x934c1e[_0x32dbeb];let _0x504753=[_0x2f433d];const _0x42d1c6=_0x934c1e[_0x20d9c7(0x222)](_0x4cee9d=>_0x4cee9d['id']!==_0x2f433d['id']&&_0x4cee9d[_0x20d9c7(0x266)]===_0x2f433d[_0x20d9c7(0x266)]);_0x42d1c6[_0x20d9c7(0x225)]((_0x12fc52,_0x460e16)=>Math['abs'](_0x12fc52[_0x20d9c7(0x276)]-_0x2f433d[_0x20d9c7(0x276)])-Math[_0x20d9c7(0x313)](_0x460e16[_0x20d9c7(0x276)]-_0x2f433d['gridCol']));for(let _0x446bce=0x0;_0x446bce<_0x42d1c6[_0x20d9c7(0x208)]&&_0x504753[_0x20d9c7(0x208)]<_0x4d8eab;_0x446bce++){_0x504753['push'](_0x42d1c6[_0x446bce]);}if(_0x504753[_0x20d9c7(0x208)]===_0x4d8eab){_0x3ea75b=_0x504753,_0x21f573=!![],_0x373e78=!![];break;}}!_0x373e78&&_0x934c1e[_0x20d9c7(0x208)]>=_0x4d8eab&&(_0x3ea75b=_0x934c1e[_0x20d9c7(0x333)](0x0,_0x4d8eab),_0x21f573=!![]);}}if(!_0x21f573&&_0x456971[_0x20d9c7(0x208)]>0x0){const _0x358f32=_0x456971[0x0];_0x3ea75b[_0x20d9c7(0x26e)](_0x358f32);if(_0x456971[_0x20d9c7(0x208)]>0x1&&!_0x245da0&&Math[_0x20d9c7(0x30c)]()<0.2){const _0xa69dbe=_0x456971[_0x20d9c7(0x33b)](_0x55ba73=>_0x55ba73['id']!==_0x358f32['id']&&_0x55ba73[_0x20d9c7(0x266)]===_0x358f32[_0x20d9c7(0x266)]&&_0x55ba73[_0x20d9c7(0x276)]===_0x358f32['gridCol']-0x1),_0x3b1cfa=_0x456971[_0x20d9c7(0x33b)](_0x341c41=>_0x341c41['id']!==_0x358f32['id']&&_0x341c41[_0x20d9c7(0x266)]===_0x358f32['gridRow']&&_0x341c41[_0x20d9c7(0x276)]===_0x358f32[_0x20d9c7(0x276)]+0x1),_0x564ff2=_0xa69dbe||_0x3b1cfa;if(_0x564ff2){const _0x354bd7=_0x358f32[_0x20d9c7(0x2e9)]===ENEMY3_TYPE&&_0x564ff2[_0x20d9c7(0x2e9)]===ENEMY3_TYPE;!_0x354bd7&&_0x3ea75b['push'](_0x564ff2);}}_0x21f573=!![];}if(_0x3ea75b[_0x20d9c7(0x208)]>0x0){_0x3ea75b=_0x3ea75b[_0x20d9c7(0x222)](_0x45bcda=>_0x45bcda);if(_0x3ea75b['length']===0x0)return null;_0x3ea75b[_0x20d9c7(0x20b)](_0x26c698=>{const _0x1f083c=_0x20d9c7;_0x26c698&&(_0x26c698[_0x1f083c(0x28e)]=!![],_0x26c698['attackType']=_0xe7fd66);});const _0x2bbef5=new Set(_0x3ea75b[_0x20d9c7(0x23c)](_0x44f0a8=>_0x44f0a8['id']));return resetJustReturnedFlags(_0x2bbef5),_0x3ea75b;}return null;}catch(_0x31b10b){return console[_0x20d9c7(0x2e1)](_0x20d9c7(0x2f1),_0x31b10b),null;}}function triggerImmediateCaptureDive(){const _0xc9a643=_0x4e50d5;try{if(isChallengingStage||captureAttemptMadeThisLevel)return;let _0x42c8b7=[];isTwoPlayerMode&&selectedGameMode==='coop'?(ship1&&player1Lives>0x1&&!player1IsDualShipActive&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!player1NeedsRespawnAfterCapture&&_0x42c8b7['push']({'playerShip':ship1,'playerNum':0x1}),ship2&&player2Lives>0x1&&!player2IsDualShipActive&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!player2NeedsRespawnAfterCapture&&_0x42c8b7[_0xc9a643(0x26e)]({'playerShip':ship2,'playerNum':0x2})):ship&&playerLives>0x1&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0x42c8b7[_0xc9a643(0x26e)]({'playerShip':ship,'playerNum':currentPlayer});if(_0x42c8b7[_0xc9a643(0x208)]===0x0)return;const _0x47a6cb=_0x42c8b7[Math[_0xc9a643(0x214)](Math[_0xc9a643(0x30c)]()*_0x42c8b7['length'])],_0x118676=_0x47a6cb['playerShip'],_0x48aa8c=enemies['filter'](_0x1de60a=>_0x1de60a&&_0x1de60a[_0xc9a643(0x2bc)]==='in_grid'&&_0x1de60a[_0xc9a643(0x2e9)]===ENEMY3_TYPE&&!_0x1de60a[_0xc9a643(0x2e8)]&&!_0x1de60a['isPreparingForImmediateCapture']);if(_0x48aa8c['length']>0x0){const _0x2abd57=_0x48aa8c[Math['floor'](Math[_0xc9a643(0x30c)]()*_0x48aa8c['length'])],_0x224b77=Date[_0xc9a643(0x2e7)]();_0x2abd57['isPreparingForImmediateCapture']=!![],_0x2abd57['justReturned']=!![],_0x2abd57[_0xc9a643(0x33a)]=_0x224b77;const _0x314ac1=new Set([_0x2abd57['id']]);resetJustReturnedFlags(_0x314ac1);const _0x5340cb=_0x118676['x']+_0x118676[_0xc9a643(0x2c3)]/0x2,_0x208084=_0x5340cb<gameCanvas[_0xc9a643(0x2c3)]/0x2?_0xc9a643(0x33f):_0xc9a643(0x272);let _0xfe3f9b,_0x56c3ad;_0x208084==='left'?_0xfe3f9b=gameCanvas[_0xc9a643(0x2c3)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:_0xfe3f9b=gameCanvas[_0xc9a643(0x2c3)]*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH;_0x56c3ad=gameCanvas['height']*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR,_0x2abd57[_0xc9a643(0x2bc)]=_0xc9a643(0x2a4),_0x2abd57[_0xc9a643(0x29c)]=_0xfe3f9b,_0x2abd57['targetY']=_0x56c3ad,_0x2abd57[_0xc9a643(0x243)]=_0x224b77,playSound(_0xc9a643(0x22f),![],0.2);const _0x2c479c=_0x2abd57['id'],_0x533aa6=setTimeout(()=>{const _0x5f59b9=_0xc9a643,_0x1446d4=enemies[_0x5f59b9(0x33b)](_0xa5aab9=>_0xa5aab9?.['id']===_0x2c479c);_0x1446d4&&_0x1446d4[_0x5f59b9(0x2bc)]===_0x5f59b9(0x2a4)&&(_0x1446d4[_0x5f59b9(0x2bc)]=_0x5f59b9(0x25d),captureAttemptMadeThisLevel=!![]);if(_0x1446d4)_0x1446d4['capturePrepareTimeout']=null;const _0xa5bf0a=enemySpawnTimeouts[_0x5f59b9(0x224)](_0x533aa6);if(_0xa5bf0a>-0x1)enemySpawnTimeouts[_0x5f59b9(0x24f)](_0xa5bf0a,0x1);},0x12c);_0x2abd57[_0xc9a643(0x207)]=_0x533aa6,enemySpawnTimeouts[_0xc9a643(0x26e)](_0x533aa6);}}catch(_0x37ac1f){console[_0xc9a643(0x2e1)](_0xc9a643(0x23f),_0x37ac1f);}}function resetJustReturnedFlags(_0x1eeffa){enemies['forEach'](_0x12a7ab=>{const _0x15d03f=_0x5782;let _0x3212ca=![];if(_0x1eeffa instanceof Set)_0x3212ca=_0x1eeffa['has'](_0x12a7ab['id']);else typeof _0x1eeffa===_0x15d03f(0x216)&&(_0x3212ca=_0x12a7ab['id']===_0x1eeffa);_0x12a7ab&&_0x12a7ab[_0x15d03f(0x2bc)]===_0x15d03f(0x2b1)&&_0x12a7ab[_0x15d03f(0x28e)]&&!_0x3212ca&&(_0x12a7ab[_0x15d03f(0x28e)]=![]);});}function updateFloatingScores(){const _0x285f95=_0x4e50d5;if(isPaused)return;try{const _0x87a07f=Date[_0x285f95(0x2e7)]();floatingScores=floatingScores['filter'](_0x537292=>_0x87a07f-_0x537292[_0x285f95(0x21b)]<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x45f786){console['error'](_0x285f95(0x30a),_0x45f786),floatingScores=[];}}function updateExplosions(){const _0x556a74=_0x4e50d5;if(isPaused)return;try{const _0x433bba=Date[_0x556a74(0x2e7)]();for(let _0x2c4d53=explosions['length']-0x1;_0x2c4d53>=0x0;_0x2c4d53--){const _0x296063=explosions[_0x2c4d53],_0x29f36b=_0x433bba-_0x296063[_0x556a74(0x21b)];if(_0x29f36b>_0x296063[_0x556a74(0x211)]){explosions[_0x556a74(0x24f)](_0x2c4d53,0x1);continue;}_0x296063[_0x556a74(0x277)][_0x556a74(0x20b)](_0x33c18e=>{const _0x2fd928=_0x556a74;_0x33c18e['x']+=_0x33c18e['vx'],_0x33c18e['y']+=_0x33c18e['vy'],_0x33c18e[_0x2fd928(0x27e)]=Math[_0x2fd928(0x209)](0x0,0x1-_0x29f36b/_0x296063['duration']*EXPLOSION_FADE_SPEED);});}}catch(_0x3b5621){console['error']('Error\x20updating\x20explosions:',_0x3b5621),explosions=[];}}function moveEntities(_0x33d207=null,_0x50ca1d=null){const _0x53c941=_0x4e50d5;if(isPaused)return;try{const _0x2c05c1=Date[_0x53c941(0x2e7)](),_0x23a1b4=gameCanvas?gameCanvas[_0x53c941(0x2d1)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x519477=0xbb8;if(gameCanvas&&!isTouchActiveGame){if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x53c941(0x320)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x2b5493=ship1[_0x53c941(0x2c3)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(leftPressed)ship1['x']-=ship1[_0x53c941(0x227)];if(rightPressed)ship1['x']+=ship1[_0x53c941(0x227)];ship1['x']=Math['max'](0x0,Math[_0x53c941(0x29d)](gameCanvas[_0x53c941(0x2c3)]-_0x2b5493,ship1['x'])),ship1[_0x53c941(0x29c)]=ship1['x'];}if(!isPlayerTwoAI&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x27a9c0=ship2[_0x53c941(0x2c3)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(p2LeftPressed)ship2['x']-=ship2[_0x53c941(0x227)];if(p2RightPressed)ship2['x']+=ship2[_0x53c941(0x227)];ship2['x']=Math[_0x53c941(0x209)](0x0,Math[_0x53c941(0x29d)](gameCanvas[_0x53c941(0x2c3)]-_0x27a9c0,ship2['x'])),ship2[_0x53c941(0x29c)]=ship2['x'];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1){const _0x2b8b15=ship[_0x53c941(0x2c3)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x548591=![],_0x3810e0=![];if(isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x53c941(0x336)&&currentPlayer===0x1&&isShowingIntro){if(_0x33d207!==null)_0x548591=_0x33d207;if(_0x50ca1d!==null)_0x3810e0=_0x50ca1d;}if(_0x548591||leftPressed)ship['x']-=ship['speed'];if(_0x3810e0||rightPressed)ship['x']+=ship[_0x53c941(0x227)];ship['x']=Math[_0x53c941(0x209)](0x0,Math['min'](gameCanvas[_0x53c941(0x2c3)]-_0x2b8b15,ship['x'])),ship[_0x53c941(0x29c)]=ship['x'];}}}}}if(!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x53c941(0x21c)&&currentPlayer===0x2||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x53c941(0x2b3)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x4e0d6a=ship1[_0x53c941(0x29c)]-ship1['x'];let _0x544cb6=ship1[_0x53c941(0x227)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math['abs'](_0x4e0d6a)>AI_MOVEMENT_DEADZONE)ship1['x']+=Math['sign'](_0x4e0d6a)*Math['min'](Math['abs'](_0x4e0d6a),_0x544cb6);const _0xad0ef0=ship1[_0x53c941(0x2c3)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship1['x']=Math[_0x53c941(0x209)](0x0,Math['min'](gameCanvas[_0x53c941(0x2c3)]-_0xad0ef0,ship1['x']));}if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x5f1c97=ship2['targetX']-ship2['x'];let _0x170d02=ship2[_0x53c941(0x227)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x53c941(0x313)](_0x5f1c97)>AI_MOVEMENT_DEADZONE)ship2['x']+=Math[_0x53c941(0x215)](_0x5f1c97)*Math['min'](Math[_0x53c941(0x313)](_0x5f1c97),_0x170d02);const _0x2c6f41=ship2[_0x53c941(0x2c3)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship2['x']=Math[_0x53c941(0x209)](0x0,Math['min'](gameCanvas['width']-_0x2c6f41,ship2['x']));}}else{if(ship){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){const _0x35aa2c=ship[_0x53c941(0x29c)]-ship['x'];let _0x587b81=ship[_0x53c941(0x227)]*AI_POSITION_MOVE_SPEED_FACTOR;isPlayerTwoAI&&selectedGameMode===_0x53c941(0x21c)&&currentPlayer===0x2&&(_0x587b81=ship[_0x53c941(0x227)]*(AI_POSITION_MOVE_SPEED_FACTOR*1.15));Math[_0x53c941(0x313)](_0x35aa2c)>AI_MOVEMENT_DEADZONE&&(ship['x']+=Math[_0x53c941(0x215)](_0x35aa2c)*Math['min'](Math[_0x53c941(0x313)](_0x35aa2c),_0x587b81));const _0x39f930=ship[_0x53c941(0x2c3)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship['x']=Math[_0x53c941(0x209)](0x0,Math[_0x53c941(0x29d)](gameCanvas[_0x53c941(0x2c3)]-_0x39f930,ship['x']));}}}}if(isTwoPlayerMode&&selectedGameMode===_0x53c941(0x320)){if(isPlayer1WaitingForRespawn&&_0x2c05c1>=player1RespawnTime)isPlayer1WaitingForRespawn=![];if(isPlayer1Invincible&&_0x2c05c1>=player1InvincibilityEndTime)isPlayer1Invincible=![];if(isPlayer2WaitingForRespawn&&_0x2c05c1>=player2RespawnTime)isPlayer2WaitingForRespawn=![];if(isPlayer2Invincible&&_0x2c05c1>=player2InvincibilityEndTime)isPlayer2Invincible=![];}else{if(isWaitingForRespawn&&_0x2c05c1>=respawnTime)isWaitingForRespawn=![];if(isInvincible&&_0x2c05c1>=invincibilityEndTime)isInvincible=![];}for(let _0x398761=bullets['length']-0x1;_0x398761>=0x0;_0x398761--){const _0x2b75d1=bullets[_0x398761];if(!_0x2b75d1){bullets[_0x53c941(0x24f)](_0x398761,0x1);continue;}_0x2b75d1['y']-=_0x2b75d1[_0x53c941(0x227)];if(_0x2b75d1['y']+PLAYER_BULLET_HEIGHT<0x0){bullets['splice'](_0x398761,0x1);continue;}for(let _0x17e3da=enemies[_0x53c941(0x208)]-0x1;_0x17e3da>=0x0;_0x17e3da--){const _0x2e8470=enemies[_0x17e3da];if(!_0x2e8470){enemies['splice'](_0x17e3da,0x1);continue;}const _0x4b0c5c={'x':_0x2e8470['x'],'y':_0x2e8470['y'],'width':_0x2e8470[_0x53c941(0x2e9)]===ENEMY3_TYPE?BOSS_WIDTH:_0x2e8470[_0x53c941(0x2e9)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,'height':_0x2e8470[_0x53c941(0x2e9)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x2e8470[_0x53c941(0x2e9)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT},_0x430be8={'x':_0x2b75d1['x'],'y':_0x2b75d1['y'],'width':_0x2b75d1['width'],'height':_0x2b75d1['height']};if(checkCollision(_0x430be8,_0x4b0c5c)){bullets['splice'](_0x398761,0x1);const _0x18d98f=handleEnemyHit(_0x2e8470,_0x2b75d1[_0x53c941(0x2a8)]);if(_0x18d98f[_0x53c941(0x25a)])enemies[_0x53c941(0x24f)](_0x17e3da,0x1);break;}}}for(let _0x49797c=enemyBullets[_0x53c941(0x208)]-0x1;_0x49797c>=0x0;_0x49797c--){const _0x1a3afe=enemyBullets[_0x49797c];if(!_0x1a3afe){enemyBullets[_0x53c941(0x24f)](_0x49797c,0x1);continue;}_0x1a3afe['x']+=_0x1a3afe['vx'],_0x1a3afe['y']+=_0x1a3afe['vy'],(_0x1a3afe['y']>gameCanvas[_0x53c941(0x2d1)]||_0x1a3afe['y']<-ENEMY_BULLET_HEIGHT||_0x1a3afe['x']<-ENEMY_BULLET_WIDTH||_0x1a3afe['x']>gameCanvas['width'])&&enemyBullets[_0x53c941(0x24f)](_0x49797c,0x1);}const _0x368d9c=gameCanvas?gameCanvas[_0x53c941(0x2d1)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x39e21b=0x2;for(let _0x5af7b4=fallingShips[_0x53c941(0x208)]-0x1;_0x5af7b4>=0x0;_0x5af7b4--){const _0x596509=fallingShips[_0x5af7b4];if(!_0x596509){fallingShips[_0x53c941(0x24f)](_0x5af7b4,0x1);continue;}let _0x17edf4=![];if(!_0x596509[_0x53c941(0x2eb)]){_0x596509['y']+=FALLING_SHIP_SPEED;if(_0x596509['y']>=_0x368d9c){_0x596509['y']=_0x368d9c,_0x596509[_0x53c941(0x2eb)]=!![],_0x596509[_0x53c941(0x306)]=_0x2c05c1;!_0x596509[_0x53c941(0x309)]&&(_0x596509[_0x53c941(0x288)]=0x0,_0x596509[_0x53c941(0x309)]=!![]);let _0x97d8ad=null,_0x2c01e5=()=>{},_0xb0b667=![],_0x3ddec8=![],_0x3c8c01=![],_0xf11b0d=null;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x53c941(0x2b3)){if(_0x596509['targetPlayerId']===_0x53c941(0x217)&&ship1&&player1Lives>0x0)_0x97d8ad=ship1,_0xb0b667=player1IsDualShipActive,_0x2c01e5=()=>{player1IsDualShipActive=!![];},_0x3c8c01=!![],_0xf11b0d=_0x53c941(0x217);else(_0x596509[_0x53c941(0x2ba)]===_0x53c941(0x223)||_0x596509[_0x53c941(0x2ba)]==='ai_p2')&&ship2&&player2Lives>0x0&&(_0x97d8ad=ship2,_0xb0b667=player2IsDualShipActive,_0x2c01e5=()=>{player2IsDualShipActive=!![];},_0x3c8c01=!![],_0xf11b0d=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x53c941(0x2b3)?_0x53c941(0x229):_0x53c941(0x223));}else{if(isTwoPlayerMode&&selectedGameMode===_0x53c941(0x320)){if(_0x596509[_0x53c941(0x2ba)]===_0x53c941(0x217)&&ship1&&player1Lives>0x0)_0x97d8ad=ship1,_0xb0b667=player1IsDualShipActive,_0x3ddec8=isPlayer1ShipCaptured,_0x2c01e5=()=>{player1IsDualShipActive=!![],isPlayer1ShipCaptured=![];},_0x3c8c01=!![],_0xf11b0d=_0x53c941(0x217);else _0x596509[_0x53c941(0x2ba)]===_0x53c941(0x223)&&ship2&&player2Lives>0x0&&(_0x97d8ad=ship2,_0xb0b667=player2IsDualShipActive,_0x3ddec8=isPlayer2ShipCaptured,_0x2c01e5=()=>{player2IsDualShipActive=!![],isPlayer2ShipCaptured=![];},_0x3c8c01=!![],_0xf11b0d=_0x53c941(0x223));}else ship&&playerLives>0x0&&(_0x97d8ad=ship,_0xb0b667=isDualShipActive,_0x3ddec8=isShipCaptured,_0x2c01e5=()=>{isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}isShipCaptured=![];},_0x3c8c01=!![],_0xf11b0d=isTwoPlayerMode&&selectedGameMode==='normal'?String(currentPlayer):_0x53c941(0x217));}if(_0x3c8c01&&!_0xb0b667){_0x2c01e5(),playSound(_0x53c941(0x2ce),![],0.4);if(_0x3ddec8&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x53c941(0x2b3))){if(_0xf11b0d===_0x53c941(0x217)&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x2c05c1+INVINCIBILITY_DURATION_MS;else{if(_0xf11b0d===_0x53c941(0x223)&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x2c05c1+INVINCIBILITY_DURATION_MS;else playerNumForDocking!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0x2c05c1+INVINCIBILITY_DURATION_MS);}}fallingShips[_0x53c941(0x24f)](_0x5af7b4,0x1),_0x17edf4=!![];continue;}else{if(_0x3c8c01&&_0xb0b667){fallingShips[_0x53c941(0x24f)](_0x5af7b4,0x1),_0x17edf4=!![];continue;}else{fallingShips[_0x53c941(0x24f)](_0x5af7b4,0x1),_0x17edf4=!![];continue;}}}}if(_0x17edf4)continue;const _0xfd2531=_0x2c05c1-_0x596509[_0x53c941(0x21b)];if(_0xfd2531<FALLING_SHIP_FADE_DURATION_MS)_0x596509[_0x53c941(0x2ec)]=Math[_0x53c941(0x209)](0x0,0x1-_0xfd2531/FALLING_SHIP_FADE_DURATION_MS);else _0x596509[_0x53c941(0x2ec)]=0x0;if(_0x596509['rotationCompleted'])_0x596509['rotation']=0x0;else{if(!_0x596509[_0x53c941(0x2eb)]&&typeof _0x596509[_0x53c941(0x314)]===_0x53c941(0x319)&&typeof FALLING_SHIP_ROTATION_SPEED===_0x53c941(0x319)&&FALLING_SHIP_ROTATION_SPEED>0x0){const _0x3c99d3=FALLING_SHIP_ROTATION_SPEED*_0x596509[_0x53c941(0x314)];_0x596509['rotation']+=_0x3c99d3,_0x596509[_0x53c941(0x1f3)]+=Math['abs'](_0x3c99d3);if(_0x596509[_0x53c941(0x1f3)]>=_0x39e21b*0x2*Math['PI'])_0x596509[_0x53c941(0x288)]=0x0,_0x596509[_0x53c941(0x309)]=!![];else{if(_0x596509[_0x53c941(0x288)]>Math['PI']*0x2)_0x596509[_0x53c941(0x288)]-=Math['PI']*0x2;if(_0x596509[_0x53c941(0x288)]<0x0)_0x596509[_0x53c941(0x288)]+=Math['PI']*0x2;}}else _0x596509[_0x53c941(0x288)]=_0x596509[_0x53c941(0x288)]||0x0;}if(!_0x596509[_0x53c941(0x2eb)]){let _0x2d4e72=null,_0x549e8a=()=>{},_0x4ce700=0x0,_0x2be458=![],_0x1b5544=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x53c941(0x2b3)){if(_0x596509[_0x53c941(0x2ba)]===_0x53c941(0x217)&&ship1&&player1Lives>0x0)_0x2d4e72=ship1,_0x1b5544=player1IsDualShipActive,_0x549e8a=()=>{if(!_0x1b5544)player1IsDualShipActive=!![];},_0x4ce700=0x1;else(_0x596509['targetPlayerId']===_0x53c941(0x223)||_0x596509['targetPlayerId']===_0x53c941(0x229))&&ship2&&player2Lives>0x0&&(_0x2d4e72=ship2,_0x1b5544=player2IsDualShipActive,_0x549e8a=()=>{if(!_0x1b5544)player2IsDualShipActive=!![];},_0x4ce700=0x2);}else{if(isTwoPlayerMode&&selectedGameMode===_0x53c941(0x320)){if(_0x596509[_0x53c941(0x2ba)]===_0x53c941(0x217)&&ship1&&player1Lives>0x0)_0x2d4e72=ship1,_0x2be458=isPlayer1ShipCaptured,_0x1b5544=player1IsDualShipActive,_0x549e8a=()=>{if(!_0x1b5544)player1IsDualShipActive=!![];isPlayer1ShipCaptured=![];},_0x4ce700=0x1;else _0x596509[_0x53c941(0x2ba)]===_0x53c941(0x223)&&ship2&&player2Lives>0x0&&(_0x2d4e72=ship2,_0x2be458=isPlayer2ShipCaptured,_0x1b5544=player2IsDualShipActive,_0x549e8a=()=>{if(!_0x1b5544)player2IsDualShipActive=!![];isPlayer2ShipCaptured=![];},_0x4ce700=0x2);}else ship&&playerLives>0x0&&(_0x2d4e72=ship,_0x2be458=isShipCaptured,_0x1b5544=isDualShipActive,_0x549e8a=()=>{if(!_0x1b5544){isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}}isShipCaptured=![];},_0x4ce700=isTwoPlayerMode&&selectedGameMode===_0x53c941(0x21c)?currentPlayer:0x1);}if(_0x2d4e72&&!_0x1b5544){const _0x333824={'x':_0x596509['x'],'y':_0x596509['y'],'width':_0x596509[_0x53c941(0x2c3)],'height':_0x596509[_0x53c941(0x2d1)]},_0x1e8742={'x':_0x2d4e72['x'],'y':_0x2d4e72['y'],'width':_0x2d4e72[_0x53c941(0x2c3)],'height':_0x2d4e72['height']};if(checkCollision(_0x333824,_0x1e8742)){_0x549e8a();if(_0x2be458&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')){playSound(_0x53c941(0x2ce),![],0.4);if(_0x4ce700===0x1&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x2c05c1+INVINCIBILITY_DURATION_MS;else{if(_0x4ce700===0x2&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x2c05c1+INVINCIBILITY_DURATION_MS;else _0x4ce700!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0x2c05c1+INVINCIBILITY_DURATION_MS);}}else playSound(_0x53c941(0x2ce),![],0.4);fallingShips[_0x53c941(0x24f)](_0x5af7b4,0x1);continue;}}}if(!_0x596509['landed']&&_0x596509['y']>=gameCanvas['height'])fallingShips[_0x53c941(0x24f)](_0x5af7b4,0x1);}let _0x1bcccb=0x0;const _0x5859b6=enemies[_0x53c941(0x2db)](_0x58c6a8=>_0x58c6a8?.[_0x53c941(0x2bc)]===_0x53c941(0x2b1)),_0x125eb9=!isChallengingStage&&!isWaveTransitioning&&_0x5859b6&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x53c941(0x320)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage));if(_0x125eb9){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound('gridBackgroundSound',!![],0.1));const _0x5a5aef=enemies[_0x53c941(0x222)](_0x3f2c20=>_0x3f2c20?.[_0x53c941(0x2bc)]===_0x53c941(0x2b1));if(_0x5a5aef['length']>0x0){let _0xe12a0a=gameCanvas[_0x53c941(0x2c3)],_0x36628d=0x0;_0x5a5aef['forEach'](_0x732bbb=>{const _0xae1f3b=_0x53c941;_0x732bbb&&(_0xe12a0a=Math['min'](_0xe12a0a,_0x732bbb['x']),_0x36628d=Math[_0xae1f3b(0x209)](_0x36628d,_0x732bbb['x']+_0x732bbb[_0xae1f3b(0x2c3)]));});const _0x3f3b64=gameCanvas['width']*GRID_HORIZONTAL_MARGIN_PERCENT,_0x62e895=gameCanvas[_0x53c941(0x2c3)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x36628d>=_0x62e895)gridMoveDirection=-0x1;else{if(gridMoveDirection===-0x1&&_0xe12a0a<=_0x3f3b64)gridMoveDirection=0x1;}const _0x1fa29d=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x1bcccb=_0x1fa29d*gridMoveDirection,currentGridOffsetX+=_0x1bcccb,enemies[_0x53c941(0x20b)](_0x44ff12=>{const _0x5caf14=_0x53c941;if(_0x44ff12&&(_0x44ff12['state']==='returning'||_0x44ff12['state']===_0x5caf14(0x2b1)||_0x44ff12[_0x5caf14(0x2bc)]===_0x5caf14(0x32b)))try{const _0x188d85=_0x44ff12[_0x5caf14(0x2e9)]===ENEMY3_TYPE?BOSS_WIDTH:_0x44ff12[_0x5caf14(0x2e9)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x172638,y:_0x371c18}=getCurrentGridSlotPosition(_0x44ff12[_0x5caf14(0x266)],_0x44ff12[_0x5caf14(0x276)],_0x188d85);_0x44ff12['targetGridX']=_0x172638,_0x44ff12[_0x5caf14(0x308)]=_0x371c18;}catch(_0x404599){console[_0x5caf14(0x2e1)]('Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20'+_0x44ff12?.['id']+_0x5caf14(0x315)+_0x44ff12?.[_0x5caf14(0x2bc)]+_0x5caf14(0x20d),_0x404599);}});}}else isGridSoundPlaying&&(stopSound(_0x53c941(0x294)),isGridSoundPlaying=![]),_0x1bcccb=0x0;for(let _0x29f42c=enemies[_0x53c941(0x208)]-0x1;_0x29f42c>=0x0;_0x29f42c--){let _0x528dc1=enemies[_0x29f42c];if(!_0x528dc1){enemies[_0x53c941(0x24f)](_0x29f42c,0x1);continue;}const _0xa11fbf=_0x528dc1['id'];if(_0x528dc1[_0x53c941(0x207)]&&_0x528dc1[_0x53c941(0x2bc)]!=='preparing_capture'){clearTimeout(_0x528dc1['capturePrepareTimeout']);const _0x407dea=enemySpawnTimeouts[_0x53c941(0x224)](_0x528dc1['capturePrepareTimeout']);if(_0x407dea>-0x1)enemySpawnTimeouts[_0x53c941(0x24f)](_0x407dea,0x1);_0x528dc1[_0x53c941(0x207)]=null;}const _0x1dad39=_0x528dc1[_0x53c941(0x2e9)]===ENEMY3_TYPE?BOSS_WIDTH:_0x528dc1[_0x53c941(0x2e9)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x475914=_0x528dc1['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0x528dc1[_0x53c941(0x2e9)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x3260ae=_0x528dc1[_0x53c941(0x2bc)];switch(_0x528dc1[_0x53c941(0x2bc)]){case _0x53c941(0x210):{let _0x316c0c=CS_ENTRANCE_PATH_SPEED;const _0x4d59f1=_0x528dc1[_0x53c941(0x28b)]||0x1;_0x316c0c*=_0x4d59f1;if(!isChallengingStage){enemies[_0x53c941(0x24f)](_0x29f42c,0x1),_0x528dc1=null;break;}let _0x65b554=challengingStagePaths,_0x5dee60=_0x65b554[_0x528dc1[_0x53c941(0x2ad)]];if(!_0x5dee60||_0x528dc1[_0x53c941(0x228)]>=_0x5dee60[_0x53c941(0x208)]){enemies[_0x53c941(0x24f)](_0x29f42c,0x1),_0x528dc1=null;break;}const _0x5a65c2=_0x5dee60[_0x528dc1['pathSegmentIndex']];if(!_0x5a65c2||!_0x5a65c2['p0']||!_0x5a65c2['p1']||!_0x5a65c2['p2']||!_0x5a65c2['p3']){console[_0x53c941(0x2e1)](_0x53c941(0x23d)+_0x528dc1[_0x53c941(0x228)]+'\x20for\x20path\x20'+_0x528dc1['entrancePathId']+_0x53c941(0x286)+_0x528dc1['id']),enemies[_0x53c941(0x24f)](_0x29f42c,0x1),_0x528dc1=null;break;}_0x528dc1[_0x53c941(0x26f)]+=_0x316c0c;let _0x278e2c,_0x46adf2,_0x4610c5=_0x528dc1['x'],_0x5d1348=_0x528dc1['y'];if(_0x528dc1[_0x53c941(0x26f)]>=0x1){_0x528dc1[_0x53c941(0x26f)]=0x0,_0x528dc1[_0x53c941(0x228)]++;if(_0x528dc1[_0x53c941(0x228)]>=_0x5dee60['length'])enemies[_0x53c941(0x24f)](_0x29f42c,0x1),_0x528dc1=null;else{const _0x98cf4a=_0x5dee60[_0x528dc1[_0x53c941(0x228)]];_0x98cf4a?.['p0']?(_0x278e2c=_0x98cf4a['p0']['x'],_0x46adf2=_0x98cf4a['p0']['y']):(console[_0x53c941(0x2e1)]('Invalid\x20next\x20CS\x20Bezier\x20segment\x20'+_0x528dc1[_0x53c941(0x228)]+'\x20for\x20path\x20'+_0x528dc1['entrancePathId']+'.\x20Enemy\x20'+_0xa11fbf),enemies[_0x53c941(0x24f)](_0x29f42c,0x1),_0x528dc1=null);}}else try{_0x278e2c=calculateBezierPoint(_0x528dc1['pathT'],_0x5a65c2['p0']['x'],_0x5a65c2['p1']['x'],_0x5a65c2['p2']['x'],_0x5a65c2['p3']['x']),_0x46adf2=calculateBezierPoint(_0x528dc1[_0x53c941(0x26f)],_0x5a65c2['p0']['y'],_0x5a65c2['p1']['y'],_0x5a65c2['p2']['y'],_0x5a65c2['p3']['y']);}catch(_0x157a47){console['error']('Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20'+_0xa11fbf+':',_0x157a47),enemies[_0x53c941(0x24f)](_0x29f42c,0x1),_0x528dc1=null;}_0x528dc1&&(isNaN(_0x278e2c)||isNaN(_0x46adf2)?(console[_0x53c941(0x2e1)](_0x53c941(0x252)+_0xa11fbf+'.\x20Removing.'),enemies[_0x53c941(0x24f)](_0x29f42c,0x1),_0x528dc1=null):(_0x528dc1[_0x53c941(0x1f8)]=_0x278e2c-_0x4610c5,_0x528dc1[_0x53c941(0x28a)]=_0x46adf2-_0x5d1348,_0x528dc1['x']=_0x278e2c,_0x528dc1['y']=_0x46adf2));break;}case _0x53c941(0x2ae):{if(isChallengingStage){enemies['splice'](_0x29f42c,0x1),_0x528dc1=null;break;}let _0x3d36c3=normalWaveEntrancePaths,_0x401e29=_0x3d36c3[_0x528dc1['entrancePathId']],_0x5d14b3;_0x528dc1[_0x53c941(0x2ad)]===_0x53c941(0x2b2)||_0x528dc1[_0x53c941(0x2ad)]===_0x53c941(0x303)?_0x5d14b3=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x5d14b3=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x401e29){console['warn']('Enemy\x20'+_0xa11fbf+_0x53c941(0x2f9)+_0x528dc1[_0x53c941(0x2ad)]+_0x53c941(0x2d7));try{_0x528dc1[_0x53c941(0x284)]=_0x528dc1[_0x53c941(0x284)]??gameCanvas['width']/0x2,_0x528dc1[_0x53c941(0x308)]=_0x528dc1[_0x53c941(0x308)]??ENEMY_TOP_MARGIN;}catch(_0x178a26){console['error'](_0x53c941(0x33e)+_0xa11fbf+_0x53c941(0x1ee),_0x178a26),_0x528dc1[_0x53c941(0x284)]=gameCanvas['width']/0x2,_0x528dc1[_0x53c941(0x308)]=ENEMY_TOP_MARGIN;}_0x528dc1[_0x53c941(0x2bc)]=_0x53c941(0x32b),_0x528dc1[_0x53c941(0x26f)]=0x0,_0x528dc1[_0x53c941(0x228)]=0x0,_0x528dc1[_0x53c941(0x1f8)]=0x0,_0x528dc1['velocityY']=0x0;_0x528dc1[_0x53c941(0x20f)]!==undefined&&squadronCompletionStatus[_0x528dc1[_0x53c941(0x20f)]]&&squadronCompletionStatus[_0x528dc1[_0x53c941(0x20f)]]['completed']++;break;}if(_0x528dc1['pathSegmentIndex']>=_0x401e29[_0x53c941(0x208)]){console[_0x53c941(0x2b5)](_0x53c941(0x2a6)+_0xa11fbf+_0x53c941(0x28d)+_0x528dc1['pathSegmentIndex']+_0x53c941(0x249)+_0x528dc1[_0x53c941(0x2ad)]+_0x53c941(0x2d7));try{_0x528dc1[_0x53c941(0x284)]=_0x528dc1[_0x53c941(0x284)]??gameCanvas['width']/0x2,_0x528dc1['targetGridY']=_0x528dc1[_0x53c941(0x308)]??ENEMY_TOP_MARGIN;}catch(_0x2f374d){console[_0x53c941(0x2e1)](_0x53c941(0x33e)+_0xa11fbf+_0x53c941(0x2a1),_0x2f374d),_0x528dc1['targetGridX']=gameCanvas[_0x53c941(0x2c3)]/0x2,_0x528dc1['targetGridY']=ENEMY_TOP_MARGIN;}_0x528dc1[_0x53c941(0x2bc)]=_0x53c941(0x32b),_0x528dc1[_0x53c941(0x26f)]=0x0,_0x528dc1[_0x53c941(0x228)]=0x0,_0x528dc1[_0x53c941(0x1f8)]=0x0,_0x528dc1[_0x53c941(0x28a)]=0x0;_0x528dc1[_0x53c941(0x20f)]!==undefined&&squadronCompletionStatus[_0x528dc1[_0x53c941(0x20f)]]&&squadronCompletionStatus[_0x528dc1[_0x53c941(0x20f)]][_0x53c941(0x2b4)]++;break;}const _0x3a7142=_0x401e29[_0x528dc1[_0x53c941(0x228)]];if(!_0x3a7142||!_0x3a7142['p0']||!_0x3a7142['p1']||!_0x3a7142['p2']||!_0x3a7142['p3']){console['error']('Invalid\x20Normal\x20Bezier\x20segment\x20'+_0x528dc1[_0x53c941(0x228)]+_0x53c941(0x24e)+_0x528dc1[_0x53c941(0x2ad)]+_0x53c941(0x286)+_0xa11fbf+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x528dc1[_0x53c941(0x284)]=_0x528dc1[_0x53c941(0x284)]??gameCanvas['width']/0x2,_0x528dc1[_0x53c941(0x308)]=_0x528dc1[_0x53c941(0x308)]??ENEMY_TOP_MARGIN+_0x528dc1[_0x53c941(0x266)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x5bc582){console[_0x53c941(0x2e1)](_0x53c941(0x33e)+_0xa11fbf+_0x53c941(0x28c),_0x5bc582),_0x528dc1[_0x53c941(0x284)]=gameCanvas['width']/0x2,_0x528dc1[_0x53c941(0x308)]=ENEMY_TOP_MARGIN;}_0x528dc1[_0x53c941(0x2bc)]=_0x53c941(0x32b),_0x528dc1[_0x53c941(0x26f)]=0x0,_0x528dc1[_0x53c941(0x228)]=0x0,_0x528dc1[_0x53c941(0x1f8)]=0x0,_0x528dc1['velocityY']=0x0;_0x528dc1['squadronId']!==undefined&&squadronCompletionStatus[_0x528dc1['squadronId']]&&squadronCompletionStatus[_0x528dc1[_0x53c941(0x20f)]]['completed']++;break;}_0x528dc1[_0x53c941(0x26f)]+=_0x5d14b3;let _0x24ba2a,_0x44180f,_0x218ab8=_0x528dc1['x'],_0x47d52d=_0x528dc1['y'];if(_0x528dc1[_0x53c941(0x26f)]>=0x1){_0x528dc1[_0x53c941(0x26f)]=0x0,_0x528dc1[_0x53c941(0x228)]++;if(_0x528dc1[_0x53c941(0x228)]>=_0x401e29[_0x53c941(0x208)]){let _0x54f29d,_0x50289b;try{_0x54f29d=calculateBezierPoint(0x1,_0x3a7142['p0']['x'],_0x3a7142['p1']['x'],_0x3a7142['p2']['x'],_0x3a7142['p3']['x']),_0x50289b=calculateBezierPoint(0x1,_0x3a7142['p0']['y'],_0x3a7142['p1']['y'],_0x3a7142['p2']['y'],_0x3a7142['p3']['y']);}catch(_0x5b1edf){console[_0x53c941(0x2e1)]('Error\x20calculating\x20final\x20bezier\x20point\x20for\x20'+_0xa11fbf+_0x53c941(0x218)+_0x528dc1['entrancePathId'],_0x5b1edf),_0x54f29d=_0x3a7142['p3']['x'],_0x50289b=_0x3a7142['p3']['y'];}_0x528dc1['x']=_0x54f29d,_0x528dc1['y']=_0x50289b;try{_0x528dc1[_0x53c941(0x284)]=_0x528dc1[_0x53c941(0x284)]??gameCanvas[_0x53c941(0x2c3)]/0x2,_0x528dc1[_0x53c941(0x308)]=_0x528dc1[_0x53c941(0x308)]??ENEMY_TOP_MARGIN;}catch(_0x515151){console[_0x53c941(0x2e1)](_0x53c941(0x2df)+_0xa11fbf+_0x53c941(0x218)+_0x528dc1[_0x53c941(0x2ad)],_0x515151),_0x528dc1[_0x53c941(0x284)]=_0x528dc1['x'],_0x528dc1[_0x53c941(0x308)]=ENEMY_TOP_MARGIN+_0x528dc1[_0x53c941(0x266)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x352836=_0x528dc1['state'];_0x528dc1[_0x53c941(0x2bc)]=_0x53c941(0x32b),_0x528dc1[_0x53c941(0x1f8)]=0x0,_0x528dc1[_0x53c941(0x28a)]=0x0,_0x528dc1[_0x53c941(0x228)]=0x0;_0x352836===_0x53c941(0x2ae)&&_0x528dc1['squadronId']!==undefined&&squadronCompletionStatus[_0x528dc1[_0x53c941(0x20f)]]&&squadronCompletionStatus[_0x528dc1[_0x53c941(0x20f)]][_0x53c941(0x2b4)]++;break;}else{const _0x225f8a=_0x401e29[_0x528dc1[_0x53c941(0x228)]];if(_0x225f8a?.['p0'])_0x24ba2a=_0x225f8a['p0']['x'],_0x44180f=_0x225f8a['p0']['y'];else{console['error'](_0x53c941(0x325)+_0x528dc1[_0x53c941(0x228)]+_0x53c941(0x24e)+_0x528dc1[_0x53c941(0x2ad)]+_0x53c941(0x286)+_0xa11fbf+_0x53c941(0x2d7));try{_0x528dc1[_0x53c941(0x284)]=_0x528dc1[_0x53c941(0x284)]??gameCanvas[_0x53c941(0x2c3)]/0x2,_0x528dc1[_0x53c941(0x308)]=_0x528dc1[_0x53c941(0x308)]??ENEMY_TOP_MARGIN;}catch(_0x59ca22){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20'+_0xa11fbf+_0x53c941(0x1fc),_0x59ca22),_0x528dc1[_0x53c941(0x284)]=gameCanvas[_0x53c941(0x2c3)]/0x2,_0x528dc1[_0x53c941(0x308)]=ENEMY_TOP_MARGIN;}_0x528dc1['state']=_0x53c941(0x32b),_0x528dc1['pathT']=0x0,_0x528dc1[_0x53c941(0x228)]=0x0,_0x528dc1[_0x53c941(0x1f8)]=0x0,_0x528dc1[_0x53c941(0x28a)]=0x0;_0x528dc1['squadronId']!==undefined&&squadronCompletionStatus[_0x528dc1[_0x53c941(0x20f)]]&&squadronCompletionStatus[_0x528dc1['squadronId']][_0x53c941(0x2b4)]++;break;}}}else try{_0x24ba2a=calculateBezierPoint(_0x528dc1['pathT'],_0x3a7142['p0']['x'],_0x3a7142['p1']['x'],_0x3a7142['p2']['x'],_0x3a7142['p3']['x']),_0x44180f=calculateBezierPoint(_0x528dc1[_0x53c941(0x26f)],_0x3a7142['p0']['y'],_0x3a7142['p1']['y'],_0x3a7142['p2']['y'],_0x3a7142['p3']['y']);}catch(_0x4d58e2){console[_0x53c941(0x2e1)](_0x53c941(0x1eb)+_0xa11fbf+':',_0x4d58e2);try{_0x528dc1[_0x53c941(0x284)]=_0x528dc1[_0x53c941(0x284)]??gameCanvas[_0x53c941(0x2c3)]/0x2,_0x528dc1[_0x53c941(0x308)]=_0x528dc1[_0x53c941(0x308)]??ENEMY_TOP_MARGIN;}catch(_0x1ef3dd){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20'+_0xa11fbf+_0x53c941(0x29f),_0x1ef3dd),_0x528dc1['targetGridX']=gameCanvas[_0x53c941(0x2c3)]/0x2,_0x528dc1[_0x53c941(0x308)]=ENEMY_TOP_MARGIN;}_0x528dc1[_0x53c941(0x2bc)]='moving_to_grid',_0x528dc1[_0x53c941(0x26f)]=0x0,_0x528dc1['pathSegmentIndex']=0x0,_0x528dc1[_0x53c941(0x1f8)]=0x0,_0x528dc1['velocityY']=0x0;_0x528dc1[_0x53c941(0x20f)]!==undefined&&squadronCompletionStatus[_0x528dc1['squadronId']]&&squadronCompletionStatus[_0x528dc1[_0x53c941(0x20f)]][_0x53c941(0x2b4)]++;break;}if(_0x528dc1&&_0x528dc1[_0x53c941(0x2bc)]===_0x53c941(0x2ae)){if(isNaN(_0x24ba2a)||isNaN(_0x44180f)){console[_0x53c941(0x2e1)](_0x53c941(0x2f6)+_0xa11fbf+_0x53c941(0x2d7));try{_0x528dc1[_0x53c941(0x284)]=_0x528dc1[_0x53c941(0x284)]??gameCanvas[_0x53c941(0x2c3)]/0x2,_0x528dc1[_0x53c941(0x308)]=_0x528dc1['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x1f40a6){console['error'](_0x53c941(0x33e)+_0xa11fbf+'\x20after\x20NaN',_0x1f40a6),_0x528dc1['targetGridX']=gameCanvas[_0x53c941(0x2c3)]/0x2,_0x528dc1['targetGridY']=ENEMY_TOP_MARGIN;}_0x528dc1['state']=_0x53c941(0x32b),_0x528dc1['pathT']=0x0,_0x528dc1[_0x53c941(0x228)]=0x0,_0x528dc1[_0x53c941(0x1f8)]=0x0,_0x528dc1['velocityY']=0x0,_0x528dc1['squadronId']!==undefined&&squadronCompletionStatus[_0x528dc1[_0x53c941(0x20f)]]&&squadronCompletionStatus[_0x528dc1['squadronId']][_0x53c941(0x2b4)]++;}else{let _0x29dda2=_0x24ba2a;const _0x4233c1=currentWavePatternIndex===0x1&&(_0x528dc1[_0x53c941(0x20f)]===0x2||_0x528dc1[_0x53c941(0x20f)]===0x3),_0x318a35=typeof _0x528dc1[_0x53c941(0x267)]==='number'&&_0x528dc1['squadronEnemyIndex']%0x2!==0x0;if(_0x4233c1&&_0x318a35){const _0x2615da=_0x1dad39+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x29dda2=_0x24ba2a+_0x2615da;}_0x528dc1[_0x53c941(0x1f8)]=_0x29dda2-_0x218ab8,_0x528dc1['velocityY']=_0x44180f-_0x47d52d,_0x528dc1['x']=_0x29dda2,_0x528dc1['y']=_0x44180f;}}break;}case _0x53c941(0x32b):{if(_0x528dc1[_0x53c941(0x284)]==null||_0x528dc1[_0x53c941(0x308)]==null){console[_0x53c941(0x2b5)](_0x53c941(0x2a6)+_0xa11fbf+'\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.');try{const {x:_0x332890,y:_0x10ff9e}=getCurrentGridSlotPosition(_0x528dc1[_0x53c941(0x266)],_0x528dc1['gridCol'],_0x1dad39);_0x528dc1[_0x53c941(0x284)]=_0x332890,_0x528dc1[_0x53c941(0x308)]=_0x10ff9e;}catch(_0x44bc70){console[_0x53c941(0x2e1)](_0x53c941(0x33e)+_0xa11fbf+_0x53c941(0x2b6),_0x44bc70),_0x528dc1[_0x53c941(0x2bc)]='in_grid',_0x528dc1['x']=gameCanvas[_0x53c941(0x2c3)]/0x2,_0x528dc1['y']=ENEMY_TOP_MARGIN;break;}}const _0x1e40c2=_0x528dc1[_0x53c941(0x284)],_0x288cdd=_0x528dc1['targetGridY'],_0x14ec44=_0x1e40c2-_0x528dc1['x'],_0xcdfa51=_0x288cdd-_0x528dc1['y'],_0x420741=Math[_0x53c941(0x233)](_0x14ec44*_0x14ec44+_0xcdfa51*_0xcdfa51),_0x751772=ENTRANCE_SPEED*1.2,_0x4c6ade=_0x751772*0.5;if(_0x420741>_0x4c6ade)_0x528dc1[_0x53c941(0x1f8)]=_0x14ec44/_0x420741*_0x751772,_0x528dc1[_0x53c941(0x28a)]=_0xcdfa51/_0x420741*_0x751772,_0x528dc1['x']+=_0x528dc1['velocityX'],_0x528dc1['y']+=_0x528dc1[_0x53c941(0x28a)];else{_0x528dc1['x']=_0x1e40c2,_0x528dc1['y']=_0x288cdd,_0x528dc1[_0x53c941(0x1f8)]=0x0,_0x528dc1['velocityY']=0x0;const _0x2e2f41=_0x528dc1[_0x53c941(0x2bc)];_0x528dc1[_0x53c941(0x2bc)]=_0x53c941(0x2b1),_0x528dc1[_0x53c941(0x28e)]=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound('gridBackgroundSound',!![],0.1));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x2c05c1,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date[_0x53c941(0x2e7)](),firstEnemyLanded=!![]);if(_0x2e2f41===_0x53c941(0x32b)&&!isChallengingStage&&!isFullGridWave&&_0x528dc1[_0x53c941(0x20f)]!==undefined){const _0x2137ea=_0x528dc1[_0x53c941(0x20f)],_0x7c87a6=squadronCompletionStatus[_0x2137ea];if(_0x7c87a6&&!_0x7c87a6[_0x53c941(0x300)]){const _0x505870=enemies[_0x53c941(0x326)](_0x2ce4be=>{const _0x16caf1=_0x53c941;if(_0x2ce4be&&_0x2ce4be[_0x16caf1(0x20f)]===_0x2137ea)return _0x2ce4be[_0x16caf1(0x2bc)]===_0x16caf1(0x2b1)||!enemies[_0x16caf1(0x2db)](_0x37c5c1=>_0x37c5c1['id']===_0x2ce4be['id']);return!![];});if(_0x505870){_0x7c87a6['hasFiredPostLanding']=!![];const _0x191469=enemies[_0x53c941(0x222)](_0x31b0c5=>_0x31b0c5&&_0x31b0c5[_0x53c941(0x20f)]===_0x2137ea&&_0x31b0c5[_0x53c941(0x2bc)]===_0x53c941(0x2b1)&&(_0x31b0c5['type']===ENEMY2_TYPE||_0x31b0c5[_0x53c941(0x2e9)]===ENEMY3_TYPE)&&!(_0x31b0c5[_0x53c941(0x2e9)]===ENEMY3_TYPE&&_0x31b0c5[_0x53c941(0x2e8)]));if(_0x191469[_0x53c941(0x208)]>0x0){const _0x7fbca7=_0x191469[Math[_0x53c941(0x214)](Math[_0x53c941(0x30c)]()*_0x191469[_0x53c941(0x208)])],_0x59e268=_0x7fbca7['id'],_0x1fad3f=0xc8+Math[_0x53c941(0x30c)]()*0x190,_0x94b1a0=setTimeout(()=>{const _0x5c5411=_0x53c941;try{const _0x1957d8=enemySpawnTimeouts[_0x5c5411(0x224)](_0x94b1a0);if(_0x1957d8>-0x1)enemySpawnTimeouts[_0x5c5411(0x24f)](_0x1957d8,0x1);if(isPaused||!isInGameState||playerLives<=0x0&&(!isTwoPlayerMode||player1Lives<=0x0&&player2Lives<=0x0)||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x5be9d8=enemies[_0x5c5411(0x33b)](_0x10d32c=>_0x10d32c&&_0x10d32c['id']===_0x59e268);_0x5be9d8&&_0x5be9d8[_0x5c5411(0x2bc)]==='in_grid'&&(createBulletSimple(_0x5be9d8)&&(playSound('enemyShootSound',![],0.4),_0x5be9d8[_0x5c5411(0x338)]=Date[_0x5c5411(0x2e7)]()));}catch(_0x5845a7){console['error'](_0x5c5411(0x341)+_0x59e268+':',_0x5845a7);}},_0x1fad3f);enemySpawnTimeouts[_0x53c941(0x26e)](_0x94b1a0);}}}}}break;}case'in_grid':{try{const _0x140423=_0x528dc1[_0x53c941(0x2e9)]===ENEMY3_TYPE?BOSS_WIDTH:_0x528dc1[_0x53c941(0x2e9)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0xa8049,y:_0x36d534}=getCurrentGridSlotPosition(_0x528dc1[_0x53c941(0x266)],_0x528dc1[_0x53c941(0x276)],_0x140423);typeof _0xa8049===_0x53c941(0x319)&&!isNaN(_0xa8049)&&(_0x528dc1['x']=_0xa8049),typeof _0x36d534===_0x53c941(0x319)&&!isNaN(_0x36d534)&&(_0x528dc1['y']=_0x36d534),_0x528dc1['targetGridX']=_0xa8049,_0x528dc1['targetGridY']=_0x36d534;}catch(_0x2b68aa){console[_0x53c941(0x2e1)]('Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20'+_0x528dc1['id']+':',_0x2b68aa);}_0x528dc1['velocityX']=_0x125eb9?_0x1bcccb:0x0,_0x528dc1['velocityY']=0x0;_0x528dc1[_0x53c941(0x2e9)]===ENEMY3_TYPE&&_0x528dc1[_0x53c941(0x2e8)]&&_0x528dc1['capturedShipDimensions']&&(_0x528dc1[_0x53c941(0x2cf)]=_0x528dc1['x']+CAPTURED_SHIP_OFFSET_X,_0x528dc1[_0x53c941(0x212)]=_0x528dc1['y']+CAPTURED_SHIP_OFFSET_Y);break;}case'preparing_attack':{_0x528dc1[_0x53c941(0x1f8)]=0x0,_0x528dc1['velocityY']=0x0;break;}case'preparing_capture':{_0x528dc1[_0x53c941(0x1f8)]=0x0,_0x528dc1['velocityY']=0x0;isCoopAIDemoActive&&_0x528dc1[_0x53c941(0x2e9)]===ENEMY3_TYPE&&_0x3260ae!=='preparing_capture'&&((!coopAICaptureDiveAnticipationActive||_0x2c05c1>coopAICaptureDiveAnticipationEndTime)&&(coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=_0x2c05c1+_0x519477));break;}case _0x53c941(0x25d):{isCoopAIDemoActive&&_0x528dc1[_0x53c941(0x2e9)]===ENEMY3_TYPE&&_0x3260ae!==_0x53c941(0x25d)&&((!coopAICaptureDiveAnticipationActive||_0x2c05c1>coopAICaptureDiveAnticipationEndTime)&&(coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=_0x2c05c1+_0x519477));let _0x3d7f7b=isTwoPlayerMode&&selectedGameMode===_0x53c941(0x320)?isPlayer1ShipCaptured||isPlayer2ShipCaptured:isShipCaptured;if(_0x3d7f7b){_0x528dc1[_0x53c941(0x2bc)]=_0x53c941(0x1fb);try{const {x:_0x31dcbd,y:_0x4952fd}=getCurrentGridSlotPosition(_0x528dc1['gridRow'],_0x528dc1[_0x53c941(0x276)],_0x1dad39);_0x528dc1[_0x53c941(0x284)]=_0x31dcbd,_0x528dc1['targetGridY']=_0x4952fd;}catch(_0x26f605){console[_0x53c941(0x2e1)](_0x53c941(0x2cd)+_0x528dc1['id']+':',_0x26f605),_0x528dc1[_0x53c941(0x284)]=gameCanvas['width']/0x2,_0x528dc1['targetGridY']=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x191f4e=_0x528dc1['targetX'],_0x1fc2e1=_0x528dc1[_0x53c941(0x2ea)];if(_0x191f4e==null||_0x1fc2e1==null){console[_0x53c941(0x2e1)]('Boss\x20'+_0x528dc1['id']+'\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.'),_0x528dc1['state']='returning';try{const {x:_0x5ecc79,y:_0x40ced7}=getCurrentGridSlotPosition(_0x528dc1[_0x53c941(0x266)],_0x528dc1[_0x53c941(0x276)],_0x1dad39);_0x528dc1[_0x53c941(0x284)]=_0x5ecc79,_0x528dc1[_0x53c941(0x308)]=_0x40ced7;}catch(_0x36db42){console['error'](_0x53c941(0x2cd)+_0x528dc1['id']+':',_0x36db42),_0x528dc1['targetGridX']=gameCanvas['width']/0x2,_0x528dc1[_0x53c941(0x308)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x53bef2=_0x191f4e-_0x528dc1['x'],_0x55750c=_0x1fc2e1-_0x528dc1['y'],_0x4f2464=Math[_0x53c941(0x233)](_0x53bef2*_0x53bef2+_0x55750c*_0x55750c),_0x5c5497=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x1e26d3=_0x5c5497*0.6;_0x4f2464>_0x1e26d3?(_0x528dc1[_0x53c941(0x1f8)]=_0x53bef2/_0x4f2464*_0x5c5497,_0x528dc1[_0x53c941(0x28a)]=_0x55750c/_0x4f2464*_0x5c5497,_0x528dc1['x']+=_0x528dc1[_0x53c941(0x1f8)],_0x528dc1['y']+=_0x528dc1[_0x53c941(0x28a)]):(_0x528dc1['x']=_0x191f4e,_0x528dc1['y']=_0x1fc2e1,_0x528dc1['velocityX']=0x0,_0x528dc1[_0x53c941(0x28a)]=0x0,_0x528dc1[_0x53c941(0x2bc)]='capturing',_0x528dc1[_0x53c941(0x22a)]=_0x2c05c1,capturingBossId=_0x528dc1['id'],captureBeamActive=!![],captureBeamSource={'x':_0x528dc1['x']+_0x1dad39/0x2,'y':_0x528dc1['y']+_0x475914},captureBeamTargetY=_0x528dc1['y'],captureBeamProgress=0x0,playSound('captureSound',![],0.6),_0x528dc1[_0x53c941(0x2fa)]&&(captureAttemptMadeThisLevel=!![],delete _0x528dc1['isPreparingForImmediateCapture']));break;}case'capturing':{_0x528dc1[_0x53c941(0x1f8)]=0x0,_0x528dc1[_0x53c941(0x28a)]=0x0;_0x528dc1['isPreparingForImmediateCapture']&&!captureAttemptMadeThisLevel&&(captureAttemptMadeThisLevel=!![],delete _0x528dc1[_0x53c941(0x2fa)]);let _0x4a617f=![];isTwoPlayerMode&&selectedGameMode===_0x53c941(0x320)?_0x4a617f=isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x528dc1['id']||isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x528dc1['id']:_0x4a617f=isShipCaptured&&capturedBossIdWithMessage===_0x528dc1['id'];if(_0x4a617f){captureBeamActive=![];if(capturingBossId===_0x528dc1['id'])capturingBossId=null;_0x528dc1[_0x53c941(0x2bc)]='returning',stopSound(_0x53c941(0x2af));if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x39a4be=_0x2c05c1-_0x528dc1[_0x53c941(0x22a)],_0x143059=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0xb054ed=CAPTURE_BEAM_DURATION_MS;if(_0x39a4be<_0x143059)captureBeamProgress=_0x39a4be/_0x143059;else{if(_0x39a4be<_0xb054ed-_0x143059)captureBeamProgress=0x1;else{if(_0x39a4be<_0xb054ed)captureBeamProgress=0x1-(_0x39a4be-(_0xb054ed-_0x143059))/_0x143059;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound('captureSound'),_0x528dc1[_0x53c941(0x2bc)]=_0x53c941(0x335),_0x528dc1[_0x53c941(0x1f2)]=generateAttackPathInternal(_0x528dc1),_0x528dc1[_0x53c941(0x302)]=0x0,_0x528dc1[_0x53c941(0x232)]=0x0,_0x528dc1[_0x53c941(0x227)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x528dc1['lastFiredTime']=0x0,_0x528dc1[_0x53c941(0x2ff)]=!![],_0x528dc1[_0x53c941(0x230)]=0x0,_0x528dc1[_0x53c941(0x200)]=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}}}captureBeamProgress=Math['max'](0x0,Math['min'](0x1,captureBeamProgress));if(captureBeamActive&&captureBeamProgress>=0.95){const _0x7357ca=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x3a522e=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x1da456=_0x528dc1['x']+_0x1dad39/0x2,_0x39a19d=_0x528dc1['y']+_0x475914,_0x50bf29=gameCanvas[_0x53c941(0x2d1)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x842202=Math[_0x53c941(0x209)](_0x7357ca,_0x3a522e),_0x32589d=_0x1da456-_0x842202/0x2,_0x5414f7=_0x39a19d,_0x2251e5=_0x50bf29-_0x39a19d;if(_0x2251e5>0x0){const _0x26cc7e={'x':_0x32589d,'y':_0x5414f7,'width':_0x842202,'height':_0x2251e5};let _0x5ebf5d=null,_0x3accb3=0x0;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&checkCollision(ship1,_0x26cc7e))_0x5ebf5d=ship1,_0x3accb3=0x1;else ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&checkCollision(ship2,_0x26cc7e)&&(_0x5ebf5d=ship2,_0x3accb3=0x2);}else ship&&playerLives>0x0&&!isShipCaptured&&checkCollision(ship,_0x26cc7e)&&(_0x5ebf5d=ship,_0x3accb3=currentPlayer);if(_0x5ebf5d){_0x528dc1['capturedShipDimensions']={'width':_0x5ebf5d[_0x53c941(0x2c3)],'height':_0x5ebf5d['height']},_0x528dc1[_0x53c941(0x2e8)]=!![],stopSound('captureSound'),_0x528dc1['state']=_0x53c941(0x2a7),_0x528dc1['targetGridX']=null,_0x528dc1[_0x53c941(0x308)]=null,_0x528dc1[_0x53c941(0x2c8)]=_0x5ebf5d['y'],_0x528dc1[_0x53c941(0x22b)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x2c05c1,capturedBossIdWithMessage=_0x528dc1['id'],playSound('shipCapturedSound',![],0.3),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,handlePlayerShipCollision(_0x3accb3,![],_0x2c05c1,!![]);isCoopAIDemoActive&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![]);break;}}}break;}case _0x53c941(0x2a7):{_0x528dc1[_0x53c941(0x1f8)]=0x0,_0x528dc1[_0x53c941(0x28a)]=0x0;if(_0x528dc1[_0x53c941(0x2e8)]&&_0x528dc1[_0x53c941(0x32f)]&&typeof _0x528dc1[_0x53c941(0x2c8)]==='number'){const _0x52ac78=_0x2c05c1-captureMessageStartTime,_0x57d012=Math[_0x53c941(0x29d)](0x1,_0x52ac78/CAPTURE_MESSAGE_DURATION),_0x3bbc11=_0x528dc1['y']+CAPTURED_SHIP_OFFSET_Y,_0xc64770=_0x528dc1[_0x53c941(0x2c8)];_0x528dc1[_0x53c941(0x212)]=_0xc64770+(_0x3bbc11-_0xc64770)*_0x57d012,_0x528dc1[_0x53c941(0x2cf)]=_0x528dc1['x']+CAPTURED_SHIP_OFFSET_X;}else _0x528dc1['capturedShipX']=_0x528dc1['x']+CAPTURED_SHIP_OFFSET_X,_0x528dc1[_0x53c941(0x212)]=_0x528dc1['y']+CAPTURED_SHIP_OFFSET_Y;break;}case'attacking':{if(isEntrancePhaseActive)break;const _0x8a64a=_0x528dc1[_0x53c941(0x1f2)],_0x1ea0b4=3.8;if(!_0x8a64a||_0x8a64a['length']===0x0){console[_0x53c941(0x2e1)](_0x53c941(0x2a6)+_0xa11fbf+'\x20attacking\x20without\x20path!\x20Returning.'),_0x528dc1[_0x53c941(0x2bc)]=_0x53c941(0x1fb);try{const {x:_0x1dc934,y:_0x93cd5c}=getCurrentGridSlotPosition(_0x528dc1[_0x53c941(0x266)],_0x528dc1[_0x53c941(0x276)],_0x1dad39);_0x528dc1[_0x53c941(0x284)]=_0x1dc934,_0x528dc1[_0x53c941(0x308)]=_0x93cd5c;}catch(_0x57487e){console['error'](_0x53c941(0x23e)+_0xa11fbf+_0x53c941(0x2d2),_0x57487e),_0x528dc1['targetGridX']=gameCanvas['width']/0x2,_0x528dc1[_0x53c941(0x308)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}if(_0x528dc1['attackPathSegmentIndex']>=_0x8a64a[_0x53c941(0x208)]){console[_0x53c941(0x2b5)](_0x53c941(0x2a6)+_0xa11fbf+_0x53c941(0x339)+_0x528dc1[_0x53c941(0x302)]+'\x20out\x20of\x20bounds\x20('+_0x8a64a[_0x53c941(0x208)]+_0x53c941(0x2f8)),_0x528dc1[_0x53c941(0x2bc)]=_0x53c941(0x1fb);try{const {x:_0x1eaa87,y:_0x428b94}=getCurrentGridSlotPosition(_0x528dc1[_0x53c941(0x266)],_0x528dc1[_0x53c941(0x276)],_0x1dad39);_0x528dc1[_0x53c941(0x284)]=_0x1eaa87,_0x528dc1[_0x53c941(0x308)]=_0x428b94;}catch(_0x2c6415){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0xa11fbf+_0x53c941(0x245),_0x2c6415),_0x528dc1[_0x53c941(0x284)]=gameCanvas['width']/0x2,_0x528dc1[_0x53c941(0x308)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x48485b=_0x8a64a[_0x528dc1[_0x53c941(0x302)]];if(!_0x48485b||!_0x48485b['p0']||!_0x48485b['p1']||!_0x48485b['p2']||!_0x48485b['p3']){console[_0x53c941(0x2e1)](_0x53c941(0x2a6)+_0xa11fbf+_0x53c941(0x278)+_0x528dc1[_0x53c941(0x302)]+_0x53c941(0x2ef)),_0x528dc1[_0x53c941(0x2bc)]=_0x53c941(0x1fb);try{const {x:_0x365f5d,y:_0x20057e}=getCurrentGridSlotPosition(_0x528dc1[_0x53c941(0x266)],_0x528dc1[_0x53c941(0x276)],_0x1dad39);_0x528dc1['targetGridX']=_0x365f5d,_0x528dc1[_0x53c941(0x308)]=_0x20057e;}catch(_0x48e6e3){console[_0x53c941(0x2e1)](_0x53c941(0x23e)+_0xa11fbf+_0x53c941(0x32d),_0x48e6e3),_0x528dc1[_0x53c941(0x284)]=gameCanvas[_0x53c941(0x2c3)]/0x2,_0x528dc1[_0x53c941(0x308)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x43785e=_0x528dc1[_0x53c941(0x227)]/0x3e8*_0x1ea0b4;_0x528dc1[_0x53c941(0x232)]+=_0x43785e;let _0x11a538,_0x116331;const _0x3dc753=_0x528dc1['x'],_0x57205e=_0x528dc1['y'];if(_0x528dc1[_0x53c941(0x232)]>=0x1){try{_0x11a538=calculateBezierPoint(0x1,_0x48485b['p0']['x'],_0x48485b['p1']['x'],_0x48485b['p2']['x'],_0x48485b['p3']['x']),_0x116331=calculateBezierPoint(0x1,_0x48485b['p0']['y'],_0x48485b['p1']['y'],_0x48485b['p2']['y'],_0x48485b['p3']['y']);}catch(_0x724cbc){console[_0x53c941(0x2e1)](_0x53c941(0x205)+_0x528dc1['id']+':',_0x724cbc),_0x11a538=_0x528dc1['x'],_0x116331=_0x528dc1['y'],_0x528dc1[_0x53c941(0x2bc)]=_0x53c941(0x1fb);try{const {x:_0x507d73,y:_0xf20aa7}=getCurrentGridSlotPosition(_0x528dc1[_0x53c941(0x266)],_0x528dc1['gridCol'],_0x1dad39);_0x528dc1[_0x53c941(0x284)]=_0x507d73,_0x528dc1[_0x53c941(0x308)]=_0xf20aa7;}catch(_0x1cc674){console[_0x53c941(0x2e1)](_0x53c941(0x327)+_0x528dc1['id']+':',_0x1cc674),_0x528dc1[_0x53c941(0x284)]=gameCanvas[_0x53c941(0x2c3)]/0x2,_0x528dc1[_0x53c941(0x308)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}_0x528dc1['attackPathT']=0x0,_0x528dc1[_0x53c941(0x302)]++;if(_0x528dc1[_0x53c941(0x302)]>=_0x8a64a[_0x53c941(0x208)]){_0x528dc1[_0x53c941(0x2bc)]=_0x53c941(0x1fb),_0x528dc1[_0x53c941(0x338)]=0x0,_0x528dc1[_0x53c941(0x230)]=0x0,_0x528dc1[_0x53c941(0x200)]=null;try{const {x:_0x483130,y:_0x588526}=getCurrentGridSlotPosition(_0x528dc1[_0x53c941(0x266)],_0x528dc1['gridCol'],_0x1dad39);_0x528dc1[_0x53c941(0x284)]=_0x483130,_0x528dc1['targetGridY']=_0x588526;}catch(_0x41cc21){console[_0x53c941(0x2e1)](_0x53c941(0x23e)+_0xa11fbf+_0x53c941(0x1fd),_0x41cc21),_0x528dc1[_0x53c941(0x284)]=gameCanvas[_0x53c941(0x2c3)]/0x2,_0x528dc1[_0x53c941(0x308)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}else{const _0x447b38=_0x8a64a[_0x528dc1[_0x53c941(0x302)]];if(!_0x447b38?.['p0']){console['error'](_0x53c941(0x2a6)+_0xa11fbf+_0x53c941(0x2fe)+_0x528dc1[_0x53c941(0x302)]+_0x53c941(0x2ef)),_0x11a538=_0x528dc1['x'],_0x116331=_0x528dc1['y'],_0x528dc1[_0x53c941(0x2bc)]=_0x53c941(0x1fb);try{const {x:_0x3ec017,y:_0x4b5969}=getCurrentGridSlotPosition(_0x528dc1['gridRow'],_0x528dc1[_0x53c941(0x276)],_0x1dad39);_0x528dc1[_0x53c941(0x284)]=_0x3ec017,_0x528dc1[_0x53c941(0x308)]=_0x4b5969;}catch(_0x3a1e3d){console[_0x53c941(0x2e1)](_0x53c941(0x337)+_0x528dc1['id']+':',_0x3a1e3d),_0x528dc1[_0x53c941(0x284)]=gameCanvas[_0x53c941(0x2c3)]/0x2,_0x528dc1['targetGridY']=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}}}else try{_0x11a538=calculateBezierPoint(_0x528dc1[_0x53c941(0x232)],_0x48485b['p0']['x'],_0x48485b['p1']['x'],_0x48485b['p2']['x'],_0x48485b['p3']['x']),_0x116331=calculateBezierPoint(_0x528dc1[_0x53c941(0x232)],_0x48485b['p0']['y'],_0x48485b['p1']['y'],_0x48485b['p2']['y'],_0x48485b['p3']['y']);}catch(_0x330246){console[_0x53c941(0x2e1)](_0x53c941(0x2e2)+_0x528dc1['id']+':',_0x330246),_0x11a538=_0x528dc1['x'],_0x116331=_0x528dc1['y'],_0x528dc1[_0x53c941(0x2bc)]='returning';try{const {x:_0x2feaec,y:_0x214cce}=getCurrentGridSlotPosition(_0x528dc1[_0x53c941(0x266)],_0x528dc1['gridCol'],_0x1dad39);_0x528dc1[_0x53c941(0x284)]=_0x2feaec,_0x528dc1['targetGridY']=_0x214cce;}catch(_0x4a4d3d){console['error'](_0x53c941(0x29b)+_0x528dc1['id']+':',_0x4a4d3d),_0x528dc1['targetGridX']=gameCanvas['width']/0x2,_0x528dc1[_0x53c941(0x308)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}if(_0x528dc1&&_0x528dc1['state']==='attacking'){const _0x170540=_0x528dc1[_0x53c941(0x230)]||0x0,_0x1febc1=_0x11a538+_0x170540,_0x316e21=_0x116331;_0x528dc1[_0x53c941(0x1f8)]=_0x1febc1-_0x3dc753,_0x528dc1['velocityY']=_0x316e21-_0x57205e,_0x528dc1['x']=_0x1febc1,_0x528dc1['y']=_0x316e21;if(_0x528dc1['y']>gameCanvas['height']+_0x475914*1.5){_0x528dc1[_0x53c941(0x2bc)]=_0x53c941(0x1fb),_0x528dc1[_0x53c941(0x302)]=0x0,_0x528dc1[_0x53c941(0x232)]=0x0,_0x528dc1[_0x53c941(0x338)]=0x0,_0x528dc1['attackFormationOffsetX']=0x0,_0x528dc1[_0x53c941(0x200)]=null,_0x528dc1['y']=-_0x475914*(1.1+Math['random']()*0.4),_0x528dc1['x']=Math[_0x53c941(0x30c)]()*(gameCanvas[_0x53c941(0x2c3)]-_0x1dad39),_0x528dc1[_0x53c941(0x1f8)]=0x0,_0x528dc1[_0x53c941(0x28a)]=0x0;try{const {x:_0x26c6ac,y:_0x43fc1a}=getCurrentGridSlotPosition(_0x528dc1[_0x53c941(0x266)],_0x528dc1[_0x53c941(0x276)],_0x1dad39);_0x528dc1[_0x53c941(0x284)]=_0x26c6ac,_0x528dc1[_0x53c941(0x308)]=_0x43fc1a;}catch(_0x4e8a2e){console[_0x53c941(0x2e1)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0xa11fbf+_0x53c941(0x29e),_0x4e8a2e),_0x528dc1[_0x53c941(0x284)]=gameCanvas[_0x53c941(0x2c3)]/0x2,_0x528dc1[_0x53c941(0x308)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}}break;}case _0x53c941(0x1fb):{if(isEntrancePhaseActive)break;if(_0x528dc1[_0x53c941(0x284)]==null||_0x528dc1['targetGridY']==null){console[_0x53c941(0x2b5)](_0x53c941(0x2a6)+_0xa11fbf+_0x53c941(0x25f));try{const {x:_0x516c4a,y:_0x1cf085}=getCurrentGridSlotPosition(_0x528dc1[_0x53c941(0x266)],_0x528dc1['gridCol'],_0x1dad39);_0x528dc1[_0x53c941(0x284)]=_0x516c4a,_0x528dc1[_0x53c941(0x308)]=_0x1cf085;}catch(_0x34c5be){console[_0x53c941(0x2e1)](_0x53c941(0x33e)+_0xa11fbf+_0x53c941(0x1f6),_0x34c5be),_0x528dc1['state']='in_grid',_0x528dc1['x']=gameCanvas[_0x53c941(0x2c3)]/0x2,_0x528dc1['y']=ENEMY_TOP_MARGIN;break;}}const _0x244839=_0x528dc1[_0x53c941(0x284)],_0x504cd4=_0x528dc1[_0x53c941(0x308)],_0x10b131=_0x244839-_0x528dc1['x'],_0x459bd6=_0x504cd4-_0x528dc1['y'],_0x5a0e32=Math[_0x53c941(0x233)](_0x10b131*_0x10b131+_0x459bd6*_0x459bd6),_0xb51c1d=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x1427a6=BASE_RETURN_SPEED*_0xb51c1d,_0xa5ba9c=_0x1427a6*0.5;if(_0x5a0e32>_0xa5ba9c)_0x528dc1[_0x53c941(0x1f8)]=_0x10b131/_0x5a0e32*_0x1427a6,_0x528dc1['velocityY']=_0x459bd6/_0x5a0e32*_0x1427a6,_0x528dc1['x']+=_0x528dc1['velocityX'],_0x528dc1['y']+=_0x528dc1[_0x53c941(0x28a)];else{_0x528dc1['x']=_0x244839,_0x528dc1['y']=_0x504cd4,_0x528dc1[_0x53c941(0x1f8)]=0x0,_0x528dc1[_0x53c941(0x28a)]=0x0,_0x528dc1[_0x53c941(0x2bc)]='in_grid',_0x528dc1[_0x53c941(0x28e)]=!![],_0x528dc1['attackFormationOffsetX']=0x0,_0x528dc1[_0x53c941(0x200)]=null;_0x528dc1['hasOwnProperty']('returnLogDone')&&delete _0x528dc1[_0x53c941(0x331)];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(_0x53c941(0x294),!![],0.1));if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}break;}}if(_0x528dc1&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x53c941(0x320)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){const _0x542e57=[_0x53c941(0x335),'following_entrance_path',_0x53c941(0x210),'diving_to_capture_position'];if(_0x542e57[_0x53c941(0x2d0)](_0x528dc1['state'])){let _0x51bcd5=[];if(isTwoPlayerMode&&selectedGameMode===_0x53c941(0x320)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x51bcd5['push']({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x51bcd5[_0x53c941(0x26e)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x51bcd5[_0x53c941(0x26e)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(const _0x477418 of _0x51bcd5){const _0x5e964c=_0x477418['shipObj'],_0x46de9f={'x':_0x528dc1['x'],'y':_0x528dc1['y'],'width':_0x1dad39,'height':_0x475914},_0x3bf008={'x':_0x5e964c['x'],'y':_0x5e964c['y'],'width':_0x5e964c[_0x53c941(0x2c3)],'height':_0x5e964c[_0x53c941(0x2d1)]},_0x41482b=_0x477418['dual']?{'x':_0x5e964c['x']+DUAL_SHIP_OFFSET_X,'y':_0x5e964c['y'],'width':_0x5e964c['width'],'height':_0x5e964c[_0x53c941(0x2d1)]}:null;let _0x53fbca=![],_0x5802aa=![];if(checkCollision(_0x46de9f,_0x3bf008))_0x53fbca=!![];else _0x477418[_0x53c941(0x296)]&&_0x41482b&&checkCollision(_0x46de9f,_0x41482b)&&(_0x53fbca=!![],_0x5802aa=!![]);if(_0x53fbca){createExplosion(_0x528dc1['x']+_0x1dad39/0x2,_0x528dc1['y']+_0x475914/0x2),playSound(_0x53c941(0x21a),![],0.6),enemies[_0x53c941(0x24f)](_0x29f42c,0x1),_0x528dc1=null,handlePlayerShipCollision(_0x477418[_0x53c941(0x25e)],_0x5802aa,_0x2c05c1,![]);if(_0x528dc1===null)break;}}}}if(!_0x528dc1)continue;}if(!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){let _0x292a2d=[];if(isTwoPlayerMode&&selectedGameMode===_0x53c941(0x320)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x292a2d['push']({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x292a2d[_0x53c941(0x26e)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x292a2d['push']({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(let _0x1afea3=enemyBullets[_0x53c941(0x208)]-0x1;_0x1afea3>=0x0;_0x1afea3--){const _0x3180e6=enemyBullets[_0x1afea3];if(!_0x3180e6){enemyBullets[_0x53c941(0x24f)](_0x1afea3,0x1);continue;}const _0x26cd16={'x':_0x3180e6['x'],'y':_0x3180e6['y'],'width':_0x3180e6[_0x53c941(0x2c3)],'height':_0x3180e6[_0x53c941(0x2d1)]};let _0x800b73=![];for(const _0x2071fb of _0x292a2d){const _0xb2fe51=_0x2071fb[_0x53c941(0x2e0)],_0x18d0a1={'x':_0xb2fe51['x'],'y':_0xb2fe51['y'],'width':_0xb2fe51[_0x53c941(0x2c3)],'height':_0xb2fe51[_0x53c941(0x2d1)]},_0x4754b8=_0x2071fb[_0x53c941(0x296)]?{'x':_0xb2fe51['x']+DUAL_SHIP_OFFSET_X,'y':_0xb2fe51['y'],'width':_0xb2fe51[_0x53c941(0x2c3)],'height':_0xb2fe51[_0x53c941(0x2d1)]}:null;let _0x42d2eb=![],_0x2e8d6b=![];if(checkCollision(_0x26cd16,_0x18d0a1))_0x42d2eb=!![];else _0x2071fb[_0x53c941(0x296)]&&_0x4754b8&&checkCollision(_0x26cd16,_0x4754b8)&&(_0x42d2eb=!![],_0x2e8d6b=!![]);if(_0x42d2eb){playSound('lostLifeSound',![],0.6),handlePlayerShipCollision(_0x2071fb['playerNum'],_0x2e8d6b,_0x2c05c1,![]),enemyBullets[_0x53c941(0x24f)](_0x1afea3,0x1),_0x800b73=!![];break;}}if(_0x800b73)continue;}}updateHitSparks();}catch(_0xfdc01d){console[_0x53c941(0x2e1)](_0x53c941(0x298),_0xfdc01d,_0xfdc01d[_0x53c941(0x22c)]),isGridSoundPlaying=![],stopSound(_0x53c941(0x294)),isEntrancePhaseActive=![],stopSound(_0x53c941(0x2d3)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x53c941(0x2af)),stopSound(_0x53c941(0x28f)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState==='function')showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert('Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.');}}function handlePlayerShipCollision(_0x43700a,_0x47ead9,_0x3f93d9,_0x48f6cc=![]){const _0x268ba6=_0x4e50d5,_0x11c394=_0x3f93d9,_0x181bb8=gameCanvas?gameCanvas[_0x268ba6(0x2d1)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;let _0x145c43=0x0,_0x3eb09a=null;if(isTwoPlayerMode&&selectedGameMode==='coop'){_0x3eb09a=_0x43700a===0x1?ship1:ship2;if(_0x3eb09a){_0x145c43=_0x3eb09a['x'];if(_0x48f6cc){if(_0x43700a===0x1)player1CaptureRespawnX=_0x3eb09a['x'];else{if(_0x43700a===0x2)player2CaptureRespawnX=_0x3eb09a['x'];}}}else{if(_0x43700a===0x1&&typeof player1CaptureRespawnX===_0x268ba6(0x319)&&player1CaptureRespawnX!==0x0)_0x145c43=player1CaptureRespawnX;else{if(_0x43700a===0x2&&typeof player2CaptureRespawnX===_0x268ba6(0x319)&&player2CaptureRespawnX!==0x0)_0x145c43=player2CaptureRespawnX;else{if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x268ba6(0x2b3))&&gameCanvas)_0x145c43=_0x43700a===0x1?gameCanvas[_0x268ba6(0x2c3)]/0x2-gameCanvas[_0x268ba6(0x2c3)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2:gameCanvas[_0x268ba6(0x2c3)]/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;else gameCanvas?_0x145c43=gameCanvas[_0x268ba6(0x2c3)]/0x2-SHIP_WIDTH/0x2:_0x145c43=0xc8;}}}}else{_0x3eb09a=ship;if(_0x3eb09a)_0x145c43=_0x3eb09a['x'],_0x48f6cc&&(capturedShipRespawnX_NormalMode=ship['x']);else _0x48f6cc&&capturedShipRespawnX_NormalMode!==0x0?_0x145c43=capturedShipRespawnX_NormalMode:_0x145c43=gameCanvas?gameCanvas[_0x268ba6(0x2c3)]/0x2-SHIP_WIDTH/0x2:0xc8;}if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x43700a===0x1){if(_0x48f6cc){isPlayer1ShipCaptured=!![],player1IsDualShipActive=![],player1Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x268ba6(0x2b3))coopPartner1CapturedTime=_0x11c394;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x11c394,playSound(_0x268ba6(0x2f0),![],0.4),ship1=null,player1NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];if(capturedBossIdWithMessage&&enemies[_0x268ba6(0x33b)](_0x8053cc=>_0x8053cc['id']===capturedBossIdWithMessage)){const _0x40a985=enemies[_0x268ba6(0x33b)](_0x20cb45=>_0x20cb45['id']===capturedBossIdWithMessage);_0x40a985&&(_0x40a985['hasCapturedShip']=![],_0x40a985[_0x268ba6(0x32f)]=null);}}else player1NeedsRespawnAfterCapture=!![],ship1=null;}else{if(player1IsDualShipActive&&ship1){player1IsDualShipActive=![];const _0x34aa95=_0x47ead9?ship1['x']+DUAL_SHIP_OFFSET_X+ship1[_0x268ba6(0x2c3)]/0x2:ship1['x']+ship1[_0x268ba6(0x2c3)]/0x2;createExplosion(_0x34aa95,ship1['y']+ship1[_0x268ba6(0x2d1)]/0x2),ship1['x']=_0x145c43,ship1['y']=_0x181bb8,ship1['targetX']=ship1['x'],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x11c394+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x11c394+RESPAWN_DELAY_MS;}else{if(ship1)createExplosion(ship1['x']+ship1[_0x268ba6(0x2c3)]/0x2,ship1['y']+ship1['height']/0x2);player1Lives--;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x11c394,playSound(_0x268ba6(0x2f0),![],0.4),ship1=null;if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}else isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x11c394+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x11c394+RESPAWN_DELAY_MS,ship1?(ship1['x']=_0x145c43,ship1['y']=_0x181bb8,ship1[_0x268ba6(0x29c)]=ship1['x']):ship1={'x':_0x145c43,'y':_0x181bb8,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x145c43,'id':'p1'};}}}else{if(_0x43700a===0x2){if(_0x48f6cc){isPlayer2ShipCaptured=!![],player2IsDualShipActive=![],player2Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x268ba6(0x2b3))coopPartner2CapturedTime=_0x11c394;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x11c394,playSound(_0x268ba6(0x2f0),![],0.4),ship2=null,player2NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x268ba6(0x229))aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];if(capturedBossIdWithMessage&&enemies[_0x268ba6(0x33b)](_0x4f3acb=>_0x4f3acb['id']===capturedBossIdWithMessage)){const _0x2162ee=enemies[_0x268ba6(0x33b)](_0x14c49e=>_0x14c49e['id']===capturedBossIdWithMessage);_0x2162ee&&(_0x2162ee['hasCapturedShip']=![],_0x2162ee[_0x268ba6(0x32f)]=null);}}else player2NeedsRespawnAfterCapture=!![],ship2=null;}else{if(player2IsDualShipActive&&ship2){player2IsDualShipActive=![];const _0x2690ce=_0x47ead9?ship2['x']+DUAL_SHIP_OFFSET_X+ship2[_0x268ba6(0x2c3)]/0x2:ship2['x']+ship2['width']/0x2;createExplosion(_0x2690ce,ship2['y']+ship2[_0x268ba6(0x2d1)]/0x2),ship2['x']=_0x145c43,ship2['y']=_0x181bb8,ship2[_0x268ba6(0x29c)]=ship2['x'],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x11c394+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x11c394+RESPAWN_DELAY_MS;}else{if(ship2)createExplosion(ship2['x']+ship2[_0x268ba6(0x2c3)]/0x2,ship2['y']+ship2[_0x268ba6(0x2d1)]/0x2);player2Lives--;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x11c394,playSound(_0x268ba6(0x2f0),![],0.4),ship2=null;if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x268ba6(0x229))aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}else isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x11c394+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x11c394+RESPAWN_DELAY_MS,ship2?(ship2['x']=_0x145c43,ship2['y']=_0x181bb8,ship2[_0x268ba6(0x29c)]=_0x145c43):ship2={'x':_0x145c43,'y':_0x181bb8,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x145c43,'id':'p2'};}}}}player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isDualShipActive&&!_0x48f6cc&&_0x3eb09a){isDualShipActive=![];if(isTwoPlayerMode&&selectedGameMode===_0x268ba6(0x21c)){if(_0x43700a===0x1)player1IsDualShipActive=![];else{if(_0x43700a===0x2)player2IsDualShipActive=![];}}else{if(!isTwoPlayerMode)player1IsDualShipActive=![];}const _0x12e52e=_0x47ead9?_0x145c43+DUAL_SHIP_OFFSET_X+SHIP_WIDTH/0x2:_0x145c43+SHIP_WIDTH/0x2;createExplosion(_0x12e52e,_0x181bb8+SHIP_HEIGHT/0x2);ship&&(ship['x']=_0x145c43,ship['y']=_0x181bb8,ship[_0x268ba6(0x29c)]=ship['x']);isInvincible=!![],invincibilityEndTime=_0x11c394+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x11c394+RESPAWN_DELAY_MS;if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x268ba6(0x21c)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}else{if(!_0x48f6cc&&_0x3eb09a)createExplosion(_0x145c43+SHIP_WIDTH/0x2,_0x181bb8+SHIP_HEIGHT/0x2);if(_0x48f6cc){isShipCaptured=!![];if(ship)ship=null;}playerLives--;if(playerLives<=0x0){playerLives=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x268ba6(0x21c)){if(_0x43700a===0x1)player1Lives=0x0;else{if(_0x43700a===0x2)player2Lives=0x0;}isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x11c394,playerWhoIsGameOver=_0x43700a,playSound(_0x268ba6(0x2f0),![],0.4);const _0x7615fe=_0x43700a===0x1?0x2:0x1,_0xec9ae=_0x7615fe===0x1?player1Lives:player2Lives;_0xec9ae>0x0?nextActionAfterPlayerGameOver='switch_player':nextActionAfterPlayerGameOver=_0x268ba6(0x1f7);bullets=[],enemyBullets=[],explosions=[];if(!(_0xec9ae>0x0))ship=null;}else player1Lives=0x0,ship=null,playSound(_0x268ba6(0x2f0),![],0.4),triggerFinalGameOverSequence();}else{if(isTwoPlayerMode&&selectedGameMode===_0x268ba6(0x21c)){if(_0x43700a===0x1)player1Lives=playerLives;else player2Lives=playerLives;}if(!_0x48f6cc){isInvincible=!![],invincibilityEndTime=_0x11c394+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x11c394+RESPAWN_DELAY_MS;if(ship&&gameCanvas){ship['x']=_0x145c43,ship['y']=_0x181bb8,ship[_0x268ba6(0x29c)]=ship['x'];if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x268ba6(0x21c)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}}if(_0x48f6cc)isDualShipActive=![];}}}if(!_0x48f6cc)fallingShips=[];}function switchPlayerTurn(){const _0x211004=_0x4e50d5;if(!isTwoPlayerMode||selectedGameMode==='coop')return![];stopSound(_0x211004(0x27b));if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive;if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive;if(player2Score>highScore)highScore=player2Score;}const _0x49d7ff=currentPlayer===0x1?0x2:0x1,_0x2ec90e=_0x49d7ff===0x1?player1Lives:player2Lives;if(_0x2ec90e<=0x0){const _0x3b59c0=currentPlayer===0x1?player1Lives:player2Lives;return _0x3b59c0<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x49d7ff,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x1cad52=_0x4e50d5;try{if(isPaused||!isInGameState||isChallengingStage||isWaveTransitioning)return;let _0x3d0f1d=![];isTwoPlayerMode&&selectedGameMode===_0x1cad52(0x320)?(player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)&&(_0x3d0f1d=!![]):playerLives>0x0&&ship&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(_0x3d0f1d=!![]);if(!_0x3d0f1d)return;if(isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&Date['now']()<coopAICaptureDiveAnticipationEndTime)return;const _0xd54b90=enemies[_0x1cad52(0x222)](_0x31cb19=>_0x31cb19&&_0x31cb19[_0x1cad52(0x2bc)]===_0x1cad52(0x2b1));if(_0xd54b90[_0x1cad52(0x208)]===0x0)return;const _0x1d1bab=Date[_0x1cad52(0x2e7)](),_0x38ce68=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x1d1bab-lastGridFireCheckTime<_0x38ce68)return;lastGridFireCheckTime=_0x1d1bab;const _0x261016=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x427561=Math[_0x1cad52(0x237)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x1e92bf=0x0;_0xd54b90[_0x1cad52(0x225)](()=>Math['random']()-0.5);for(const _0x428076 of _0xd54b90){if(_0x1e92bf>=_0x427561)break;if(_0x428076[_0x1cad52(0x2e9)]===ENEMY2_TYPE||_0x428076[_0x1cad52(0x2e9)]===ENEMY3_TYPE){if(_0x428076[_0x1cad52(0x2e9)]===ENEMY3_TYPE&&_0x428076['hasCapturedShip'])continue;Math[_0x1cad52(0x30c)]()<_0x261016&&(createBulletSimple(_0x428076)&&(playSound(_0x1cad52(0x2ca),![],0.4),_0x428076[_0x1cad52(0x338)]=_0x1d1bab,_0x1e92bf++));}}}catch(_0x1836f8){console[_0x1cad52(0x2e1)]('Error\x20in\x20triggerGridFiring:',_0x1836f8);}}function runSingleGameUpdate(_0x1d1c13){const _0x495c2b=_0x4e50d5;try{const _0x9433fe=Date[_0x495c2b(0x2e7)]();let _0xb2c2d6=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0xb2c2d6=player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture:_0xb2c2d6=playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;let _0x4865b3=![];if(isManualControl&&connectedGamepadIndex!==null){if(isTwoPlayerMode&&selectedGameMode===_0x495c2b(0x320)){if(player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage)_0x4865b3=!![];}else{if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1))_0x4865b3=!![];}}if(_0x4865b3&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x28d5a8=navigator['getGamepads']();if(_0x28d5a8?.[connectedGamepadIndex]){const _0x1f2abe=_0x28d5a8[connectedGamepadIndex],_0x225d73=processSingleController(_0x1f2abe,previousGameButtonStates);previousGameButtonStates=_0x225d73[_0x495c2b(0x285)][_0x495c2b(0x333)]();if(_0x225d73[_0x495c2b(0x25c)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates['length']>0x0)previousGameButtonStates=[];}}else connectedGamepadIndex===null&&previousGameButtonStates['length']>0x0&&(previousGameButtonStates=[]);let _0x444293=![];if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x495c2b(0x320)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage)_0x444293=!![];}else{if(isManualControl&&isTwoPlayerMode&&selectedGameMode==='normal'&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&currentPlayer===0x2)_0x444293=!![];}}if(_0x444293&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x342b11=navigator['getGamepads']();if(_0x342b11?.[connectedGamepadIndexP2]){const _0x5af51c=_0x342b11[connectedGamepadIndexP2],_0xbfd699=processSingleController(_0x5af51c,previousGameButtonStatesP2);previousGameButtonStatesP2=_0xbfd699[_0x495c2b(0x285)][_0x495c2b(0x333)]();if(_0xbfd699['back']){stopGameAndShowMenu();return;}}else{if(previousGameButtonStatesP2[_0x495c2b(0x208)]>0x0)previousGameButtonStatesP2=[];}}else connectedGamepadIndexP2===null&&previousGameButtonStatesP2['length']>0x0&&(previousGameButtonStatesP2=[]);if(isPaused){renderGame();return;}const _0x29c9e3=showCsBonusScoreMessage||showPerfectMessage;if(isCoopAIDemoActive&&_0x29c9e3&&gameCanvas?.[_0x495c2b(0x2c3)]>0x0){const _0x4121a6=ship1&&player1Lives>0x0&&player2Lives<=0x0,_0x2eb9a1=ship2&&player2Lives>0x0&&player1Lives<=0x0;if(_0x4121a6){const _0x502e92=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x53a0c1=Math[_0x495c2b(0x237)](gameCanvas[_0x495c2b(0x2c3)]/0x2-_0x502e92/0x2);ship1['x']=_0x53a0c1,ship1[_0x495c2b(0x29c)]=_0x53a0c1,smoothedShip1X=_0x53a0c1,ship2&&(ship2['targetX']=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x2eb9a1){const _0x44e24f=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x15a147=Math[_0x495c2b(0x237)](gameCanvas['width']/0x2-_0x44e24f/0x2);ship2['x']=_0x15a147,ship2[_0x495c2b(0x29c)]=_0x15a147,smoothedShip2X=_0x15a147,ship1&&(ship1[_0x495c2b(0x29c)]=ship1['x'],smoothedShip1X=ship1['x']);}else{if(ship1&&player1Lives>0x0&&ship2&&player2Lives>0x0){const _0xf60878=gameCanvas[_0x495c2b(0x2c3)]/0x2-gameCanvas[_0x495c2b(0x2c3)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1['x']=_0xf60878,ship1[_0x495c2b(0x29c)]=_0xf60878,smoothedShip1X=_0xf60878;const _0x296fe1=gameCanvas[_0x495c2b(0x2c3)]/0x2+gameCanvas[_0x495c2b(0x2c3)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2['x']=_0x296fe1,ship2[_0x495c2b(0x29c)]=_0x296fe1,smoothedShip2X=_0x296fe1;}}}}else{if(_0x29c9e3&&gameCanvas?.['width']>0x0){if(isTwoPlayerMode&&selectedGameMode===_0x495c2b(0x320)){const _0x29056e=ship1&&player1Lives>0x0,_0x35bece=ship2&&player2Lives>0x0;if(_0x29056e&&_0x35bece){if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3)){const _0x1b9f71=gameCanvas[_0x495c2b(0x2c3)]/0x2-gameCanvas[_0x495c2b(0x2c3)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x1f2255=gameCanvas[_0x495c2b(0x2c3)]/0x2+gameCanvas[_0x495c2b(0x2c3)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['x']=_0x1f2255,ship2[_0x495c2b(0x29c)]=_0x1f2255,smoothedShip2X=_0x1f2255);}}else{if(_0x29056e&&ship1){const _0x1628a9=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x16b4e9=Math[_0x495c2b(0x237)](gameCanvas['width']/0x2-_0x1628a9/0x2);ship1['x']=_0x16b4e9,ship1[_0x495c2b(0x29c)]=_0x16b4e9,ship2&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&(ship2['targetX']=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x35bece&&ship2){const _0x2bcd8a=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x40b495=Math[_0x495c2b(0x237)](gameCanvas[_0x495c2b(0x2c3)]/0x2-_0x2bcd8a/0x2);ship2['x']=_0x40b495,ship2[_0x495c2b(0x29c)]=_0x40b495;if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))smoothedShip2X=_0x40b495;ship1&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3)&&(ship1[_0x495c2b(0x29c)]=ship1['x']);}}}}else{if((!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x495c2b(0x21c)&&currentPlayer===0x2)&&ship){const _0x4ecf4c=isDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH;ship['x']=Math[_0x495c2b(0x237)](gameCanvas[_0x495c2b(0x2c3)]/0x2-_0x4ecf4c/0x2),ship['targetX']=ship['x'];if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)smoothedShipX=ship['x'];else{if(!isManualControl)smoothedShipX=ship['x'];}}}}}let _0xff0703=![];if(selectedGameMode===_0x495c2b(0x320)&&level===0x1&&coopPlayersReadyStartTime>0x0){_0xff0703=!![];if(isShowingCoopPlayersReady){if(_0x9433fe-coopPlayersReadyStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}if(_0x9433fe>=coopPlayersReadyStartTime+0xbb8){isShowingCoopPlayersReady=![],explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3)?(isShowingIntro=!![],introStep=0x2,introDisplayStartTime=_0x9433fe):(isShowingIntro=!![],introStep=0x1,introDisplayStartTime=_0x9433fe);}}else{if(isShowingIntro){if(_0x9433fe-introDisplayStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}let _0x54b282=INTRO_DURATION_PER_STEP;introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))&&(_0x54b282=TWO_PLAYER_STAGE_INTRO_DURATION);if(_0x9433fe>=introDisplayStartTime+_0x54b282){if(introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))){introStep=0x2,introDisplayStartTime=_0x9433fe,explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}else{isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();_0xff0703=![],coopPlayersReadyStartTime=0x0;}}}else _0xff0703=![],coopPlayersReadyStartTime=0x0;}if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))handlePlayerInput();if(typeof moveEntities==='function')moveEntities();renderGame();if(_0xff0703)return;}if(selectedGameMode===_0x495c2b(0x320)&&level===0x1&&!gameJustStartedAndWaveLaunched&&coopPlayersReadyStartTime===0x0&&gameJustStarted){if(isFullGridWave)startFullGridWave();else{if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition['length']>0x0)scheduleEntranceFlightWave();else isWaveTransitioning=!![],readyForNextWaveReset=!![];}}gameJustStartedAndWaveLaunched=!![],gameJustStarted=![];}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode&&selectedGameMode===_0x495c2b(0x21c)){if(_0x9433fe-playerGameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}if(_0x9433fe-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![],explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();const _0x50665f=playerWhoIsGameOver;playerWhoIsGameOver=0x0;if(nextActionAfterPlayerGameOver===_0x495c2b(0x2c5))switchPlayerTurn()?(_0x50665f===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,player1MaxLevelReached=Math['max'](player1MaxLevelReached,level)),resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();else nextActionAfterPlayerGameOver===_0x495c2b(0x1f7)?triggerFinalGameOverSequence():triggerFinalGameOverSequence();renderGame();return;}else{renderGame();return;}}if(isTwoPlayerMode&&selectedGameMode===_0x495c2b(0x320)){let _0x39c7dc=![],_0x2d9ebb=![];if(isPlayer1ShowingGameOverMessage){if(_0x9433fe-player1GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}if(_0x9433fe-player1GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer1ShowingGameOverMessage=![],_0x39c7dc=!![],explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}}if(isPlayer2ShowingGameOverMessage){if(_0x9433fe-player2GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}if(_0x9433fe-player2GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer2ShowingGameOverMessage=![],_0x2d9ebb=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}if(_0x39c7dc||_0x2d9ebb){player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))handlePlayerInput();if(typeof moveEntities==='function')moveEntities();renderGame();if(gameOverSequenceStartTime>0x0||player1Lives>0x0||player2Lives>0x0)return;}else{if(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))handlePlayerInput();if(typeof moveEntities==='function')moveEntities();renderGame();return;}}}if(isShowingCaptureMessage){if(_0x9433fe-captureMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}const _0x2a1432=enemies[_0x495c2b(0x33b)](_0x3fd97f=>_0x3fd97f['id']===capturedBossIdWithMessage);if(_0x2a1432&&_0x2a1432[_0x495c2b(0x2bc)]===_0x495c2b(0x2a7)){const _0x4e67b9=_0x9433fe-captureMessageStartTime,_0x3b882d=Math[_0x495c2b(0x29d)](0x1,_0x4e67b9/CAPTURE_MESSAGE_DURATION);_0x2a1432[_0x495c2b(0x22b)]=_0x3b882d*0x2*(0x2*Math['PI']);}else _0x2a1432&&(_0x2a1432['captureAnimationRotation']=0x0);if(isInGameState&&!isShowingPlayerGameOverMessage&&!isPlayer1ShowingGameOverMessage&&!isPlayer2ShowingGameOverMessage&&gameOverSequenceStartTime===0x0){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))handlePlayerInput();if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))aiControlCoop();else isPlayerTwoAI&&selectedGameMode===_0x495c2b(0x21c)&&currentPlayer===0x2&&aiControl();if(typeof moveEntities===_0x495c2b(0x203))moveEntities();updateExplosions(),updateFloatingScores();}if(_0x9433fe-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();stopSound('shipCapturedSound'),captureBeamActive=![];if(_0x2a1432&&_0x2a1432[_0x495c2b(0x2bc)]===_0x495c2b(0x2a7)){_0x2a1432[_0x495c2b(0x2bc)]=_0x495c2b(0x1fb),_0x2a1432['captureAnimationRotation']=0x0;try{const _0x54385e=_0x2a1432[_0x495c2b(0x2e9)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x2eb7b8,y:_0x5d3bcd}=getCurrentGridSlotPosition(_0x2a1432[_0x495c2b(0x266)],_0x2a1432['gridCol'],_0x54385e);_0x2a1432[_0x495c2b(0x284)]=_0x2eb7b8,_0x2a1432[_0x495c2b(0x308)]=_0x5d3bcd;}catch(_0x43c84c){console[_0x495c2b(0x2e1)](_0x495c2b(0x305)+_0x2a1432['id']+':',_0x43c84c),_0x2a1432[_0x495c2b(0x284)]=gameCanvas[_0x495c2b(0x2c3)]/0x2,_0x2a1432[_0x495c2b(0x308)]=ENEMY_TOP_MARGIN;}}else _0x2a1432&&(_0x2a1432[_0x495c2b(0x22b)]=0x0);capturedBossIdWithMessage=null;const _0x178e89=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(isTwoPlayerMode&&selectedGameMode===_0x495c2b(0x320)){if(player1NeedsRespawnAfterCapture&&player1Lives>0x0){ship1={'x':player1CaptureRespawnX,'y':_0x178e89,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player1CaptureRespawnX,'id':'p1'},isPlayer1ShipCaptured=![],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x9433fe+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=![],player1NeedsRespawnAfterCapture=![],player1CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))smoothedShip1X=ship1['x'];}if(player2NeedsRespawnAfterCapture&&player2Lives>0x0){ship2={'x':player2CaptureRespawnX,'y':_0x178e89,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player2CaptureRespawnX,'id':'p2'},isPlayer2ShipCaptured=![],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x9433fe+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=![],player2NeedsRespawnAfterCapture=![],player2CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))smoothedShip2X=ship2['x'];}if(player1Lives<=0x0&&player2Lives<=0x0){if(gameOverSequenceStartTime===0x0)triggerFinalGameOverSequence();}}else{if(!isManualControl&&!isPlayerTwoAI){if(isShipCaptured&&playerLives>0x0){let _0x4a365a=gameCanvas?gameCanvas[_0x495c2b(0x2c3)]/0x2-SHIP_WIDTH/0x2:0xc8;if(typeof smoothedShipX==='number')_0x4a365a=smoothedShipX;ship={'x':_0x4a365a,'y':_0x178e89,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x4a365a,'id':_0x495c2b(0x268)},isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x9433fe+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=![],aiNeedsStabilization=!![];if(smoothedShipX===undefined&&ship)smoothedShipX=ship['x'];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isManualControl){if(isShipCaptured&&playerLives>0x0){let _0x1d1cc4=capturedShipRespawnX_NormalMode!==0x0?capturedShipRespawnX_NormalMode:gameCanvas?gameCanvas[_0x495c2b(0x2c3)]/0x2-SHIP_WIDTH/0x2:0xc8;ship={'x':_0x1d1cc4,'y':_0x178e89,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x1d1cc4,'id':_0x495c2b(0x268)},isShipCaptured=![],capturedShipRespawnX_NormalMode=0x0,isInvincible=!![],invincibilityEndTime=_0x9433fe+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x9433fe+RESPAWN_DELAY_MS;if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)aiNeedsStabilization=!![];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&((!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode===_0x495c2b(0x21c)&&(currentPlayer===0x1&&player2Lives<=0x0||currentPlayer===0x2&&player1Lives<=0x0))&&triggerFinalGameOverSequence());}}}}renderGame();return;}const _0x1fac3a=!(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage||isShowingPlayerGameOverMessage),_0x125d06=isShowingIntro&&!_0xff0703&&!(selectedGameMode===_0x495c2b(0x320)&&level===0x1);if(!_0xff0703&&gameOverSequenceStartTime===0x0&&_0xb2c2d6&&!isShowingCaptureMessage&&_0x1fac3a){if(isInGameState&&!_0x125d06){if(!(_0x29c9e3&&!isManualControl)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x495c2b(0x21c)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}}isManualControl&&handlePlayerInput();}}isTwoPlayerMode&&selectedGameMode===_0x495c2b(0x320)?(isPlayer1Invincible&&_0x9433fe>=player1InvincibilityEndTime&&(isPlayer1Invincible=![],player1InvincibilityEndTime=0x0),isPlayer2Invincible&&_0x9433fe>=player2InvincibilityEndTime&&(isPlayer2Invincible=![],player2InvincibilityEndTime=0x0)):(isInvincible&&_0x9433fe>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0),isWaitingForRespawn&&_0x9433fe>=respawnTime&&(isWaitingForRespawn=![]));const _0x15eae1=showExtraLifeMessage&&_0x9433fe-extraLifeMessageStartTime<0x64;if(_0x15eae1&&(isWaveTransitioning||isChallengingStage&&enemies[_0x495c2b(0x208)]===0x0)){}if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))&&isChallengingStage&&enemies[_0x495c2b(0x208)]===0x0&&!isCsCompletionDelayActive&&!showCsBonusScoreMessage&&!showPerfectMessage&&gameCanvas&&gameCanvas[_0x495c2b(0x2c3)]>0x0){const _0x3e7515=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage,_0x1b399b=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage;if(_0x3e7515&&!_0x1b399b){const _0x9a1af9=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x45c553=Math[_0x495c2b(0x237)](gameCanvas[_0x495c2b(0x2c3)]/0x2-_0x9a1af9/0x2);ship1['x']=_0x45c553,ship1[_0x495c2b(0x29c)]=_0x45c553,smoothedShip1X=_0x45c553;}else{if(_0x1b399b&&!_0x3e7515){const _0xa38b83=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x39d421=Math['round'](gameCanvas[_0x495c2b(0x2c3)]/0x2-_0xa38b83/0x2);ship2['x']=_0x39d421,ship2['targetX']=_0x39d421,smoothedShip2X=_0x39d421;}}}if(isCsCompletionDelayActive&&_0x1fac3a&&gameOverSequenceStartTime===0x0){if(_0x9433fe-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY+EXPLOSION_DURATION){isCsCompletionDelayActive=![],csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies;csCompletionResultIsPerfect?(playSound('csPerfectSound',![],0.6),showCsHitsMessage=!![],csHitsMessageStartTime=_0x9433fe):(playSound(_0x495c2b(0x23a),![],0.6),showCSClearMessage=!![],csClearMessageStartTime=_0x9433fe);bullets=[],enemyBullets=[],renderGame();return;}else{if(_0x9433fe-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY&&explosions[_0x495c2b(0x208)]>0x0){updateExplosions(),renderGame();return;}else{if(_0x9433fe-csCompletionDelayStartTime<CS_COMPLETION_MESSAGE_DELAY){renderGame();return;}}}}let _0x583e58=![],_0xcf2f25=![];if(_0x1fac3a&&gameOverSequenceStartTime===0x0&&!isShowingCoopPlayersReady&&!_0xff0703){if(showCsHitsMessage){if(_0x9433fe-csHitsMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}if(Date[_0x495c2b(0x2e7)]()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION){showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x9433fe,explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}_0xcf2f25=!![];}else{if(showPerfectMessage){if(_0x9433fe-perfectMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(Date['now']()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION){showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x9433fe,explosions=[];if(typeof updateExplosions==='function')updateExplosions();}_0xcf2f25=!![];}else{if(showCsBonusScoreMessage){if(_0x9433fe-csBonusScoreMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}if(Date[_0x495c2b(0x2e7)]()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION){showCsBonusScoreMessage=![],_0x583e58=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}_0xcf2f25=!![];}else{if(showCSClearMessage){if(_0x9433fe-csClearMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}Date[_0x495c2b(0x2e7)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]);Date[_0x495c2b(0x2e7)]()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]);if(Date[_0x495c2b(0x2e7)]()-csClearMessageStartTime>=CS_CLEAR_DELAY){showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x583e58=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}_0xcf2f25=!![];}else{if(showExtraLifeMessage)Date[_0x495c2b(0x2e7)]()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![]),_0xcf2f25=!![];else{if(showReadyMessage){if(_0x9433fe-readyMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(Date[_0x495c2b(0x2e7)]()-readyMessageStartTime>READY_MESSAGE_DURATION){showReadyMessage=![],_0x583e58=!![],explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}_0xcf2f25=!![];}}}}}}}if(_0xcf2f25&&!_0x583e58&&!isShowingCoopPlayersReady&&!_0xff0703&&!isShowingCaptureMessage&&_0x1fac3a){if(!((_0x29c9e3||showCsHitsMessage||showCSClearMessage)&&isManualControl)&&!showExtraLifeMessage){renderGame();return;}}if(_0x125d06&&_0x1fac3a&&gameOverSequenceStartTime===0x0){let _0x22559f=![];const _0x8dbf66=_0x9433fe-introDisplayStartTime;let _0x34d805=INTRO_DURATION_PER_STEP;const _0x14b01c=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x336),_0x361f06=isTwoPlayerMode&&selectedGameMode==='normal'&&!isPlayerTwoAI;(_0x361f06||_0x14b01c)&&(_0x34d805=TWO_PLAYER_STAGE_INTRO_DURATION);if(introStep===0x1){if(_0x8dbf66<0x64){explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}let _0x3d89f9=null,_0xd55cab=0x1;if(!playerIntroSoundPlayed){const _0x599382=_0x14b01c||_0x361f06,_0x383893=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3)&&level>0x1;if(_0x599382){if(currentPlayer===0x1&&level===0x1&&!initialGameStartSoundPlayedThisSession)_0x3d89f9=_0x495c2b(0x297),_0xd55cab=0.4;else(currentPlayer===0x2||level>0x1)&&(_0x3d89f9=_0x495c2b(0x251),_0xd55cab=0.2);}else{if(_0x383893)_0x3d89f9=_0x495c2b(0x251),_0xd55cab=0.2;else{if(!isTwoPlayerMode){if(level===0x1&&!initialGameStartSoundPlayedThisSession)_0x3d89f9=_0x495c2b(0x297),_0xd55cab=0.4;else level>0x1&&(_0x3d89f9=_0x495c2b(0x251),_0xd55cab=0.2);}}}}_0x3d89f9&&(playSound(_0x3d89f9,![],_0xd55cab),playerIntroSoundPlayed=!![],_0x3d89f9===_0x495c2b(0x297)&&(initialGameStartSoundPlayedThisSession=!![]));if(_0x8dbf66>=_0x34d805){if(isChallengingStage)introStep=0x3;else introStep=0x2;introDisplayStartTime=_0x9433fe,explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}}else{if(introStep===0x2){if(_0x8dbf66<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(!stageIntroSoundPlayed){if(playLevelUpAfterCSBonus&&(isTwoPlayerMode&&selectedGameMode===_0x495c2b(0x320)))playSound(_0x495c2b(0x251),![],0.2),playLevelUpAfterCSBonus=![],stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x495c2b(0x320)&&!isPlayerTwoAI&&!isCoopAIDemoActive&&level===0x1)playSound(_0x495c2b(0x251),![],0.2),stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode==='coop'&&!isPlayerTwoAI&&!isCoopAIDemoActive&&level>0x1)playSound(_0x495c2b(0x251),![],0.2),stageIntroSoundPlayed=!![];else{if(selectedGameMode===_0x495c2b(0x320)){if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))&&level>0x1)playSound('levelUpSound',![],0.2),stageIntroSoundPlayed=!![];else(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))&&level===0x1&&(stageIntroSoundPlayed=!![]);}else{if(!isTwoPlayerMode&&level>0x1)playSound(_0x495c2b(0x251),![],0.2),stageIntroSoundPlayed=!![];else{if(level>0x1&&!playerIntroSoundPlayed&&!(isPlayerTwoAI&&selectedGameMode===_0x495c2b(0x21c))&&!initialGameStartSoundPlayedThisSession)playSound(_0x495c2b(0x251),![],0.2),stageIntroSoundPlayed=!![];else level===0x1&&!isManualControl&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x495c2b(0x320))&&!initialGameStartSoundPlayedThisSession&&(playSound(_0x495c2b(0x297),![],0.4),initialGameStartSoundPlayedThisSession=!![],stageIntroSoundPlayed=!![]);}}}}}}if(_0x8dbf66>=_0x34d805){_0x22559f=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}else{if(introStep===0x3){if(_0x8dbf66<0x64){explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}!csIntroSoundPlayed&&(playSound(_0x495c2b(0x2d3),![],0.4),csIntroSoundPlayed=!![],stageIntroSoundPlayed=!![]);if(_0x8dbf66>=_0x34d805){_0x22559f=!![],explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}}}}if(isInGameState&&_0x1fac3a&&gameOverSequenceStartTime===0x0&&gameCanvas){let _0x561162=null,_0x3d1a2c=null;const _0xdaa169=isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x336)&&currentPlayer===0x1&&isShowingIntro;if(_0xdaa169){let _0xf4f59c=![],_0x278777=![];const _0xbb39d9=navigator[_0x495c2b(0x264)]();if(connectedGamepadIndex!==null&&_0xbb39d9?.[connectedGamepadIndex]){const _0x5b172c=_0xbb39d9[connectedGamepadIndex],_0x3e09ae=processSingleController(_0x5b172c,previousGameButtonStates);_0xf4f59c=_0x3e09ae[_0x495c2b(0x33f)],_0x278777=_0x3e09ae[_0x495c2b(0x272)];}_0x561162=keyboardP1LeftDown||_0xf4f59c,_0x3d1a2c=keyboardP1RightDown||_0x278777;}if(_0x14b01c&&currentPlayer===0x2)aiControl();else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))aiControlCoop();else!isManualControl&&!isPlayerTwoAI&&aiControl();}typeof moveEntities==='function'&&moveEntities(_0x561162,_0x3d1a2c),updateExplosions(),updateFloatingScores();}if(_0x22559f){isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![];isManualControl&&(isShowingDemoText=![]);if(!isChallengingStage)isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3)?(aiShip1CanShootTime=Date[_0x495c2b(0x2e7)]()+0x3e8,aiShip2CanShootTime=Date[_0x495c2b(0x2e7)]()+0x4b0):aiCanShootTime=Date['now']()+(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x336)?0x3e8:0x3e8);else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0;else aiCanShootTime=0x0;}const _0x167c7f=level===0x1&&selectedGameMode!==_0x495c2b(0x320),_0x493c59=level===0x1&&selectedGameMode===_0x495c2b(0x320),_0xa91a0f=_0x167c7f&&!gameJustStartedAndWaveLaunched||level>0x1||isChallengingStage||_0x493c59&&!gameJustStartedAndWaveLaunched;if(_0xa91a0f){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x495c2b(0x208)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0x495c2b(0x2d3),![],0.4);}else isEntrancePhaseActive=![],stopSound('entranceSound'),isWaveTransitioning=!![],readyForNextWaveReset=!![],bullets=[],enemyBullets=[],explosions=[],setTimeout(()=>{const _0x334bd0=_0x495c2b,_0x37765d=isTwoPlayerMode&&selectedGameMode===_0x334bd0(0x320)?player1Lives>0x0||player2Lives>0x0:playerLives>0x0;if((isInGameState||!isInGameState&&_0x37765d)&&typeof resetWaveInternal===_0x334bd0(0x203)){if(_0x37765d)resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![];else triggerFinalGameOverSequence();}},0x64);}if(_0x167c7f||level>0x1||isChallengingStage||_0x493c59)gameJustStartedAndWaveLaunched=!![];}}isManualControl&&_0x125d06&&_0x1fac3a&&gameOverSequenceStartTime===0x0&&handlePlayerInput();renderGame();return;}const _0x306023=!_0xff0703&&!_0x125d06&&!_0x583e58&&!isShowingCaptureMessage;if(gameJustStarted&&_0x306023){if(!gameJustStartedAndWaveLaunched){const _0x39dfe4=selectedGameMode===_0x495c2b(0x320)&&level===0x1&&coopPlayersReadyStartTime!==0x0;if(!_0x39dfe4){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition['length']>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound('entranceSound',![],0.4);}else isWaveTransitioning=!![],readyForNextWaveReset=!![];}gameJustStartedAndWaveLaunched=!![];}}gameJustStarted=![];}if(_0x306023&&isInGameState&&_0x1fac3a&&gameOverSequenceStartTime===0x0){if(!_0x29c9e3||_0x29c9e3&&isManualControl){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x495c2b(0x21c)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}isManualControl&&handlePlayerInput();if(typeof moveEntities===_0x495c2b(0x203))moveEntities();updateExplosions(),updateFloatingScores();}else _0x29c9e3&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&(updateExplosions(),updateFloatingScores());}if(_0x306023&&_0x1fac3a&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&_0xb2c2d6){const _0x3312c8=enemies[_0x495c2b(0x2db)](_0x25c7ed=>_0x25c7ed?.[_0x495c2b(0x2bc)]==='in_grid');if(_0x3312c8&&isGridBreathingActive){const _0x39c055=_0x9433fe-gridBreathStartTime,_0x1db4e9=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x4a051a=_0x39c055%_0x1db4e9;currentGridBreathFactor=(Math[_0x495c2b(0x256)](_0x4a051a/_0x1db4e9*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x3312c8&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x3312c8&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x9433fe,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x2777b4=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x535d55=enemies['some'](_0x35685a=>_0x35685a?.[_0x495c2b(0x2bc)]==='following_entrance_path'||_0x35685a?.[_0x495c2b(0x2bc)]===_0x495c2b(0x32b)||_0x35685a?.[_0x495c2b(0x2bc)]===_0x495c2b(0x210));if(totalEnemiesScheduledForWave>0x0&&_0x2777b4&&!_0x535d55){const _0x100579=isEntrancePhaseActive;isEntrancePhaseActive=![];if(_0x100579){stopSound(_0x495c2b(0x2d3)),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![];if(!isChallengingStage&&!isFullGridWave){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=Date[_0x495c2b(0x2e7)]()+COOP_AI_CAPTURE_DIVE_ANTICIPATION_DURATION_MS,typeof triggerImmediateCaptureDive===_0x495c2b(0x203)&&triggerImmediateCaptureDive();else typeof triggerImmediateCaptureDive===_0x495c2b(0x203)&&triggerImmediateCaptureDive();}}}}if(!isChallengingStage&&!_0x125d06&&!isPaused&&!isWaveTransitioning)triggerGridFiring();if(!isWaveTransitioning&&_0xb2c2d6&&!_0x125d06&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x3997a0=enemies[_0x495c2b(0x208)]===0x0,_0x3505f5=fallingShips['length']===0x0,_0x244377=![];if(isChallengingStage){if(_0x3997a0&&!isEntrancePhaseActive)_0x244377=!![];}else{if(_0x3997a0&&!isEntrancePhaseActive&&_0x3505f5)_0x244377=!![];}if(_0x244377){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&gameCanvas&&gameCanvas[_0x495c2b(0x2c3)]>0x0){const _0x5afb48=player1Lives,_0x15b283=player2Lives,_0x29f179=gameCanvas[_0x495c2b(0x2d1)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(_0x5afb48>0x0&&_0x15b283<=0x0&&ship1){const _0x5d148c=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x564c6e=Math[_0x495c2b(0x237)](gameCanvas[_0x495c2b(0x2c3)]/0x2-_0x5d148c/0x2);ship1['x']=_0x564c6e,ship1[_0x495c2b(0x29c)]=_0x564c6e,smoothedShip1X=_0x564c6e,ship1['y']=_0x29f179;}else{if(_0x15b283>0x0&&_0x5afb48<=0x0&&ship2){const _0x164780=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x247245=Math[_0x495c2b(0x237)](gameCanvas[_0x495c2b(0x2c3)]/0x2-_0x164780/0x2);ship2['x']=_0x247245,ship2[_0x495c2b(0x29c)]=_0x247245,smoothedShip2X=_0x247245,ship2['y']=_0x29f179;}}}isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(_0x495c2b(0x294)),isGridSoundPlaying=![]);!isChallengingStage&&(bullets=[],enemyBullets=[]);floatingScores=[],enemySpawnTimeouts[_0x495c2b(0x20b)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;let _0x2de0e1;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,setTimeout(()=>{const _0x54e196=_0x495c2b;if(isWaveTransitioning){explosions=[];if(typeof updateExplosions===_0x54e196(0x203))updateExplosions();isCsCompletionDelayActive=!![],csCompletionDelayStartTime=Date[_0x54e196(0x2e7)]();}},EXPLOSION_DURATION);if(csCompletionResultIsPerfect){let _0x5448f7=0x2710;if(isTwoPlayerMode&&selectedGameMode===_0x495c2b(0x320)){if(player1Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x495c2b(0x2b3))&&ship1){player1Score+=_0x5448f7;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x495c2b(0x217),!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2));else player1Score===highScore&&highScoreHolderId!==_0x495c2b(0x217)&&highScore>0x0&&(highScoreHolderId=_0x495c2b(0x217),!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2)));}if(player2Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&ship2){player2Score+=_0x5448f7;const _0x30dff2=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?isCoopAIDemoActive?_0x495c2b(0x223):_0x495c2b(0x229):_0x495c2b(0x223);if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x30dff2,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x495c2b(0x27b),![],0.2));else player2Score===highScore&&highScoreHolderId!==_0x30dff2&&highScore>0x0&&(highScoreHolderId=_0x30dff2,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2)));}checkAndAwardExtraLife(null);}else{score+=_0x5448f7;if(!isTwoPlayerMode)player1Score=score;else{if(isTwoPlayerMode&&selectedGameMode===_0x495c2b(0x21c)){if(currentPlayer===0x1)player1Score=score;else player2Score=score;}}let _0xba3088=!isTwoPlayerMode?'player1':currentPlayer===0x1?'player1':isPlayerTwoAI?_0x495c2b(0x229):_0x495c2b(0x223),_0x5996b6=!isTwoPlayerMode?player1TriggeredHighScoreSound:currentPlayer===0x1?player1TriggeredHighScoreSound:player2TriggeredHighScoreSound,_0x46721f=!isTwoPlayerMode?()=>player1TriggeredHighScoreSound=!![]:currentPlayer===0x1?()=>player1TriggeredHighScoreSound=!![]:()=>player2TriggeredHighScoreSound=!![];if(score>highScore)highScore=score,highScoreHolderId=_0xba3088,!_0x5996b6&&(_0x46721f(),playSound(_0x495c2b(0x27b),![],0.2));else score===highScore&&highScoreHolderId!==_0xba3088&&highScore>0x0&&(highScoreHolderId=_0xba3088,!_0x5996b6&&(_0x46721f(),playSound(_0x495c2b(0x27b),![],0.2)));checkAndAwardExtraLife(currentPlayer);}_0x2de0e1=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else isTwoPlayerMode&&selectedGameMode===_0x495c2b(0x320)?checkAndAwardExtraLife(null):checkAndAwardExtraLife(currentPlayer),_0x2de0e1=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x2de0e1+=0x64;}else playSound('waveUpSound',![],0.8),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,_0x2de0e1=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x48f9f5=_0x495c2b;let _0x11341f=![],_0x1c975f=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x48f9f5(0x21c)){_0x1c975f=currentPlayer;_0x1c975f===0x1?player1MaxLevelReached=Math[_0x48f9f5(0x209)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x48f9f5(0x209)](player2MaxLevelReached,level);const _0xf17f39=switchPlayerTurn();if(_0xf17f39){if(_0x1c975f===0x2&&currentPlayer===0x1&&player1CompletedLevel===level)_0x11341f=!![],player1CompletedLevel=-0x1;else _0x1c975f===0x1?(player1CompletedLevel=level,_0x11341f=![]):_0x11341f=![];}else _0x11341f=!![],player1CompletedLevel=-0x1;}else{_0x11341f=!![];if(!isTwoPlayerMode)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);else{if(isTwoPlayerMode&&selectedGameMode===_0x48f9f5(0x320)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x48f9f5(0x209)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x48f9f5(0x209)](player2MaxLevelReached,level);}}}if(_0x11341f){level++;if(isTwoPlayerMode&&selectedGameMode===_0x48f9f5(0x320)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x48f9f5(0x209)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x48f9f5(0x209)](player2MaxLevelReached,level);}else{if(isTwoPlayerMode&&selectedGameMode===_0x48f9f5(0x21c)){if(currentPlayer===0x1&&player1Lives>0x0)player1MaxLevelReached=Math[_0x48f9f5(0x209)](player1MaxLevelReached,level);else{if(currentPlayer===0x2&&player2Lives>0x0)player2MaxLevelReached=Math[_0x48f9f5(0x209)](player2MaxLevelReached,level);}}else{if(playerLives>0x0)player1MaxLevelReached=Math[_0x48f9f5(0x209)](player1MaxLevelReached,level);}}}let _0xc4b16a=![];if(isTwoPlayerMode&&selectedGameMode===_0x48f9f5(0x320))_0xc4b16a=player1Lives>0x0||player2Lives>0x0;else{if(isTwoPlayerMode&&selectedGameMode===_0x48f9f5(0x21c))_0xc4b16a=(currentPlayer===0x1?player1Lives:player2Lives)>0x0;else _0xc4b16a=playerLives>0x0;}_0xc4b16a?(resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();},_0x2de0e1),renderGame();return;}if(!isChallengingStage){if(enemies[_0x495c2b(0x208)]>0x0){let _0x5743fb=null;const _0x50f07d=enemies[_0x495c2b(0x222)](_0x3238dd=>_0x3238dd?.[_0x495c2b(0x2bc)]===_0x495c2b(0x2b1)),_0x4e84bb=_0x50f07d[_0x495c2b(0x208)]<=0x3,_0x550f44=Math[_0x495c2b(0x209)](0x1,Math[_0x495c2b(0x29d)](level,LEVEL_CAP_FOR_SCALING)),_0xeabc64=0x1068,_0x282180=0x320,_0x2ac269=(_0x550f44-0x1)*((_0xeabc64-_0x282180)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x5c3684=Math[_0x495c2b(0x209)](_0x282180,_0xeabc64-_0x2ac269),_0x5063f0=Math[_0x495c2b(0x237)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x2b04f=enemies[_0x495c2b(0x222)](_0x464047=>_0x464047?.['state']==='attacking'||_0x464047?.['state']===_0x495c2b(0x2bd))[_0x495c2b(0x208)];if(_0x4e84bb||_0x9433fe-lastEnemyDetachTime>_0x5c3684&&_0x50f07d[_0x495c2b(0x208)]>0x0&&_0x2b04f<_0x5063f0){_0x5743fb=findAndDetachEnemy();if(_0x5743fb&&_0x5743fb[_0x495c2b(0x208)]>0x0){const _0x109c09=_0x5743fb[_0x495c2b(0x23c)](_0x33a7dd=>enemies['find'](_0x433edd=>_0x433edd?.['id']===_0x33a7dd['id']))[_0x495c2b(0x222)](_0x124adb=>_0x124adb&&_0x124adb[_0x495c2b(0x2bc)]===_0x495c2b(0x2b1));if(_0x109c09[_0x495c2b(0x208)]>0x0){const _0x25cef6=_0x109c09[0x0],_0x1d9513=_0x25cef6[_0x495c2b(0x2dd)];if(!_0x4e84bb)lastEnemyDetachTime=_0x9433fe;if(_0x1d9513===_0x495c2b(0x21c)){const _0x538f8b=generateAttackPathInternal(_0x25cef6);if(_0x538f8b&&_0x538f8b[_0x495c2b(0x208)]>0x0){if(_0x109c09[_0x495c2b(0x208)]===0x3&&_0x25cef6[_0x495c2b(0x2e9)]===ENEMY3_TYPE&&level!==0x1)playSound('tripleAttackSound',![],0.3);let _0x371e5a=[..._0x109c09];const _0x2d78d5=_0x371e5a[_0x495c2b(0x208)];if(_0x2d78d5>0x1){let _0x4ac209=null,_0x30cb89=[];_0x371e5a[_0x495c2b(0x20b)](_0x1682ee=>{const _0x44beb9=_0x495c2b;if(_0x1682ee[_0x44beb9(0x2e9)]===ENEMY3_TYPE)_0x4ac209=_0x1682ee;else _0x30cb89['push'](_0x1682ee);});if(_0x4ac209&&level!==0x1&&_0x2d78d5===0x3&&_0x30cb89[_0x495c2b(0x208)]===0x2)_0x371e5a=[_0x30cb89[0x0],_0x4ac209,_0x30cb89[0x1]];else _0x371e5a['sort']((_0x2b192c,_0x247f83)=>(_0x2b192c?.[_0x495c2b(0x276)]??0x0)-(_0x247f83?.[_0x495c2b(0x276)]??0x0));const _0x2e694f=0x5;let _0x34f109=0x0;_0x371e5a=_0x371e5a[_0x495c2b(0x222)](_0x281eed=>_0x281eed&&typeof _0x281eed['width']===_0x495c2b(0x319));const _0x3a2d78=_0x371e5a[_0x495c2b(0x208)];for(let _0x4b6652=0x0;_0x4b6652<_0x3a2d78;_0x4b6652++){_0x34f109+=_0x371e5a[_0x4b6652]['width'];if(_0x4b6652<_0x3a2d78-0x1)_0x34f109+=_0x2e694f;}const _0x109b79=-_0x34f109/0x2;let _0x937c2f=_0x109b79;for(let _0x1ee978=0x0;_0x1ee978<_0x3a2d78;_0x1ee978++){const _0x34627c=_0x371e5a[_0x1ee978];_0x34627c[_0x495c2b(0x230)]=_0x937c2f+_0x34627c['width']/0x2,_0x937c2f+=_0x34627c[_0x495c2b(0x2c3)]+_0x2e694f;}}else _0x371e5a[_0x495c2b(0x20b)](_0xe3fdb9=>_0xe3fdb9[_0x495c2b(0x230)]=0x0);const _0x11fd3b='attack-'+_0x25cef6['id']+'-'+_0x9433fe;_0x371e5a[_0x495c2b(0x20b)](_0xf562c9=>{const _0x599bec=_0x495c2b;if(_0xf562c9)_0xf562c9[_0x599bec(0x200)]=_0x11fd3b;});let _0x4f2d22=![],_0x565796=GROUP_FIRE_BURST_DELAY;if(_0x25cef6[_0x495c2b(0x2e9)]===ENEMY2_TYPE||_0x25cef6[_0x495c2b(0x2e9)]===ENEMY3_TYPE){_0x4f2d22=!![];if(_0x25cef6['type']===ENEMY2_TYPE&&_0x2d78d5===0x1)_0x565796=SOLO_BUTTERFLY_FIRE_DELAY;}else{if(_0x25cef6['type']===ENEMY1_TYPE)_0x4f2d22=!![];}if(_0x4e84bb&&level>0x1)_0x4f2d22=![];_0x4f2d22&&_0x371e5a[_0x495c2b(0x20b)](_0x91315=>{const _0x3c8097=_0x495c2b,_0x224ff6=_0x91315&&!(_0x91315[_0x3c8097(0x2e9)]===ENEMY3_TYPE&&_0x91315[_0x3c8097(0x2e8)]);if(_0x224ff6)fireEnemyBurst(_0x91315['id'],_0x3c8097(0x335),_0x565796);}),_0x371e5a[_0x495c2b(0x20b)]((_0x42707e,_0x3d735a)=>{const _0x51d977=_0x495c2b;_0x42707e&&_0x42707e[_0x51d977(0x2bc)]===_0x51d977(0x2b1)&&(_0x42707e[_0x51d977(0x2bc)]=_0x51d977(0x2bd),_0x42707e['justReturned']=![],_0x42707e['velocityX']=0x0,_0x42707e[_0x51d977(0x28a)]=0x0,_0x42707e['canFireThisDive']=![],setTimeout(()=>{const _0x3568ff=_0x51d977;if(isPaused)return;const _0x1f4318=enemies['find'](_0x4afc19=>_0x4afc19?.['id']===_0x42707e['id']);if(_0x1f4318&&_0x1f4318[_0x3568ff(0x2bc)]===_0x3568ff(0x2bd))try{const _0x4a1d8f=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x3f2dd1=0x1;if(_0x1f4318[_0x3568ff(0x2e9)]===ENEMY1_TYPE)_0x3f2dd1=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x1f4318[_0x3568ff(0x2e9)]===ENEMY2_TYPE)_0x3f2dd1=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x1f4318['type']===ENEMY3_TYPE)_0x3f2dd1=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x42707e['type']===ENEMY3_TYPE)playSound('bossGalagaDiveSound',![],0.2);else playSound(_0x3568ff(0x31a),![],0.2);_0x1f4318[_0x3568ff(0x2bc)]=_0x3568ff(0x335),_0x1f4318['attackPathSegments']=_0x538f8b,_0x1f4318[_0x3568ff(0x302)]=0x0,_0x1f4318[_0x3568ff(0x232)]=0x0,_0x1f4318[_0x3568ff(0x227)]=_0x4a1d8f*_0x3f2dd1,_0x1f4318[_0x3568ff(0x338)]=0x0,_0x1f4318[_0x3568ff(0x2ff)]=!![];}catch(_0x4c8606){console[_0x3568ff(0x2e1)](_0x3568ff(0x204)+_0x42707e['id']+':',_0x4c8606);}},_0x3d735a*GROUP_DETACH_DELAY_MS));});}else _0x5743fb['forEach'](_0x53cd2e=>{const _0x44fb7f=_0x495c2b;if(_0x53cd2e)_0x53cd2e[_0x44fb7f(0x28e)]=![];});}}}}}}enemies[_0x495c2b(0x20b)](_0x4d8807=>{const _0x1beb28=_0x495c2b;if(_0x4d8807&&_0x4d8807['type']===ENEMY3_TYPE&&_0x4d8807['hasCapturedShip']&&_0x4d8807[_0x1beb28(0x2bc)]===_0x1beb28(0x335)&&_0x4d8807[_0x1beb28(0x32f)]&&typeof _0x4d8807[_0x1beb28(0x31f)]===_0x1beb28(0x319)){if(_0x9433fe-_0x4d8807[_0x1beb28(0x31f)]>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x1671f1=_0x4d8807['x']+_0x4d8807[_0x1beb28(0x2c3)]/0x2,_0x4c8d6b=_0x4d8807['y']+_0x4d8807[_0x1beb28(0x2d1)]+_0x4d8807[_0x1beb28(0x32f)]['height']*0.5,_0x5a1002={'x':_0x1671f1,'y':_0x4c8d6b};createBulletSimple(_0x4d8807,_0x5a1002)&&(_0x4d8807[_0x1beb28(0x31f)]=_0x9433fe,playSound(_0x1beb28(0x33c),![],0.4));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x12b279=_0x9433fe-gameOverSequenceStartTime,_0x1fb46c=_0x12b279>=GAME_OVER_DURATION;if(_0x1fb46c&&!isShowingResultsScreen){isShowingResultsScreen=!![],stopSound(_0x495c2b(0x2f0)),playSound(_0x495c2b(0x2d8),!![],0.2),explosions=[];if(typeof updateExplosions===_0x495c2b(0x203))updateExplosions();}}}!_0xff0703&&renderGame();}catch(_0x3ddeda){console['error'](_0x495c2b(0x2e5),_0x3ddeda,_0x3ddeda[_0x495c2b(0x22c)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0x495c2b(0x1ec)),stopAllGameSoundsInternal(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState===_0x495c2b(0x203)&&showMenuState();}catch(_0x3d3238){console[_0x495c2b(0x2e1)](_0x495c2b(0x1f0),_0x3d3238);}}}function checkAndAwardExtraLife(_0x38af6c=null){const _0x5a2261=_0x4e50d5;try{const _0x7c7958=[];if(_0x38af6c===0x1){const _0x42ec32=isTwoPlayerMode&&selectedGameMode===_0x5a2261(0x320)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x5a2261(0x21c)&&currentPlayer===0x1?playerLives:player1Lives,_0x5456ad=isTwoPlayerMode&&selectedGameMode===_0x5a2261(0x320)?player1Score:isTwoPlayerMode&&selectedGameMode===_0x5a2261(0x21c)&&currentPlayer===0x1?score:player1Score;_0x7c7958[_0x5a2261(0x26e)]({'num':0x1,'currentLives':_0x42ec32,'currentScore':_0x5456ad,'thresholdsMet':player1LifeThresholdsMet});}else{if(_0x38af6c===0x2&&isTwoPlayerMode){const _0x33031e=selectedGameMode==='coop'?player2Lives:selectedGameMode==='normal'&&currentPlayer===0x2?playerLives:player2Lives,_0x1f18d7=selectedGameMode===_0x5a2261(0x320)?player2Score:selectedGameMode==='normal'&&currentPlayer===0x2?score:player2Score;_0x7c7958[_0x5a2261(0x26e)]({'num':0x2,'currentLives':_0x33031e,'currentScore':_0x1f18d7,'thresholdsMet':player2LifeThresholdsMet});}else{if(isTwoPlayerMode&&selectedGameMode===_0x5a2261(0x320)&&_0x38af6c===null)_0x7c7958[_0x5a2261(0x26e)]({'num':0x1,'currentLives':player1Lives,'currentScore':player1Score,'thresholdsMet':player1LifeThresholdsMet}),_0x7c7958[_0x5a2261(0x26e)]({'num':0x2,'currentLives':player2Lives,'currentScore':player2Score,'thresholdsMet':player2LifeThresholdsMet});else{if(!isTwoPlayerMode&&(_0x38af6c===null||_0x38af6c===0x1))_0x7c7958['push']({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet});else isTwoPlayerMode&&selectedGameMode===_0x5a2261(0x21c)&&_0x38af6c===currentPlayer&&(currentPlayer===0x1?_0x7c7958['push']({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet}):_0x7c7958[_0x5a2261(0x26e)]({'num':0x2,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player2LifeThresholdsMet}));}}}_0x7c7958[_0x5a2261(0x20b)](_0x35ba59=>{const _0x36e08c=_0x5a2261;let _0x2cd25f=![];while(!![]){let _0x33446a=![],_0x1e140d=-0x1;const _0x1eb568=_0x35ba59[_0x36e08c(0x334)][_0x36e08c(0x281)];if(_0x1eb568===0x0)_0x1e140d=EXTRA_LIFE_THRESHOLD_1;else{if(_0x1eb568===0x1&&!_0x35ba59[_0x36e08c(0x334)][_0x36e08c(0x322)](EXTRA_LIFE_THRESHOLD_2))_0x1e140d=EXTRA_LIFE_THRESHOLD_2;else{if(_0x1eb568>=0x1&&_0x35ba59[_0x36e08c(0x334)][_0x36e08c(0x322)](EXTRA_LIFE_THRESHOLD_1)&&_0x35ba59['thresholdsMet'][_0x36e08c(0x322)](EXTRA_LIFE_THRESHOLD_2)){let _0x10861c=0x0;_0x35ba59['thresholdsMet'][_0x36e08c(0x20b)](_0x4829b9=>{_0x4829b9>=EXTRA_LIFE_THRESHOLD_2&&(_0x4829b9-EXTRA_LIFE_THRESHOLD_2)%RECURRING_EXTRA_LIFE_INTERVAL===0x0&&_0x10861c++;}),_0x1e140d=EXTRA_LIFE_THRESHOLD_2+_0x10861c*RECURRING_EXTRA_LIFE_INTERVAL;}else{if(_0x1eb568===0x1&&_0x35ba59['thresholdsMet']['has'](EXTRA_LIFE_THRESHOLD_1)&&!_0x35ba59[_0x36e08c(0x334)][_0x36e08c(0x322)](EXTRA_LIFE_THRESHOLD_2))_0x1e140d=EXTRA_LIFE_THRESHOLD_2;else _0x1eb568===0x1&&_0x35ba59[_0x36e08c(0x334)][_0x36e08c(0x322)](EXTRA_LIFE_THRESHOLD_2)&&!_0x35ba59[_0x36e08c(0x334)][_0x36e08c(0x322)](EXTRA_LIFE_THRESHOLD_1)&&(_0x1e140d=EXTRA_LIFE_THRESHOLD_1);}}}if(_0x1e140d!==-0x1&&_0x35ba59[_0x36e08c(0x231)]>=_0x1e140d&&!_0x35ba59[_0x36e08c(0x334)]['has'](_0x1e140d)){if(_0x35ba59['num']===0x1){if(isTwoPlayerMode&&selectedGameMode==='coop')player1Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x36e08c(0x21c)&&currentPlayer===0x1)playerLives++;else{if(!isTwoPlayerMode)playerLives++;}}player1Lives=isTwoPlayerMode&&selectedGameMode===_0x36e08c(0x320)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x36e08c(0x21c)&&currentPlayer===0x1?playerLives:player1Lives,_0x35ba59[_0x36e08c(0x2b0)]=player1Lives;}else{if(_0x35ba59[_0x36e08c(0x283)]===0x2){if(isTwoPlayerMode&&selectedGameMode===_0x36e08c(0x320))player2Lives++;else{if(isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x2)playerLives++;}player2Lives=isTwoPlayerMode&&selectedGameMode===_0x36e08c(0x320)?player2Lives:isTwoPlayerMode&&selectedGameMode===_0x36e08c(0x21c)&&currentPlayer===0x2?playerLives:player2Lives,_0x35ba59[_0x36e08c(0x2b0)]=player2Lives;}}_0x35ba59['thresholdsMet'][_0x36e08c(0x2fd)](_0x1e140d),_0x2cd25f=!![],_0x33446a=!![];}if(!_0x33446a)break;}_0x2cd25f&&!showExtraLifeMessage&&!showCsBonusScoreMessage&&!showPerfectMessage&&!showCsHitsMessage&&!showCSClearMessage&&!showReadyMessage&&setTimeout(()=>{const _0x17e56d=_0x36e08c;if(isInGameState){explosions=[];if(typeof updateExplosions==='function')updateExplosions();showExtraLifeMessage=!![],extraLifeMessageStartTime=Date[_0x17e56d(0x2e7)](),playSound('extraLifeSound',![],0.5);}},EXPLOSION_DURATION);});}catch(_0x4ba66c){console[_0x5a2261(0x2e1)](_0x5a2261(0x31e),_0x4ba66c);}}