const _0x3bd23c=_0x5521;(function(_0xc69ef9,_0x3d2361){const _0x161d0f=_0x5521,_0x9b1b1=_0xc69ef9();while(!![]){try{const _0xa1d02c=-parseInt(_0x161d0f(0x1f2))/0x1*(-parseInt(_0x161d0f(0xf0))/0x2)+-parseInt(_0x161d0f(0x21a))/0x3+parseInt(_0x161d0f(0x21d))/0x4+-parseInt(_0x161d0f(0x21c))/0x5+parseInt(_0x161d0f(0x1ca))/0x6*(parseInt(_0x161d0f(0x13b))/0x7)+parseInt(_0x161d0f(0x176))/0x8+parseInt(_0x161d0f(0x196))/0x9*(parseInt(_0x161d0f(0x1a4))/0xa);if(_0xa1d02c===_0x3d2361)break;else _0x9b1b1['push'](_0x9b1b1['shift']());}catch(_0x12dc66){_0x9b1b1['push'](_0x9b1b1['shift']());}}}(_0x1e35,0xd209e));function generateAttackPathInternal(_0x2f7320){const _0x142597=_0x5521;try{if(!_0x2f7320||!gameCanvas)return[];const _0x3e55f0=_0x2f7320[_0x142597(0x131)]===ENEMY3_TYPE?BOSS_WIDTH:_0x2f7320[_0x142597(0x131)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x3acb7a=_0x2f7320[_0x142597(0x131)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x2f7320[_0x142597(0x131)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x3dbe48=_0x3e55f0*0.5,_0x3a2c5c=gameCanvas[_0x142597(0x117)],_0xa64c17=gameCanvas[_0x142597(0x1d4)];let _0x531bf8=[];const _0x2dc93e={'x':_0x2f7320['x'],'y':_0x2f7320['y']},_0x1c7aa5=Math[_0x142597(0x129)](_0xa64c17*0.06,_0x3acb7a*1.8),_0x188105=Math[_0x142597(0x129)](_0x3a2c5c*0.04,_0x3e55f0*1.2),_0x618ca3=_0x2f7320['x']+_0x3e55f0/0x2<_0x3a2c5c/0x2?0x1:-0x1,_0x5163fa={'x':_0x2dc93e['x']-_0x618ca3*_0x188105*0.6,'y':_0x2dc93e['y']-_0x1c7aa5};_0x5163fa['x']=Math['max'](_0x3dbe48,Math[_0x142597(0x129)](_0x3a2c5c-_0x3dbe48-_0x3e55f0,_0x5163fa['x'])),_0x5163fa['y']=Math[_0x142597(0x193)](_0x3dbe48,_0x5163fa['y']);const _0x5b92e8={'x':_0x2dc93e['x']+_0x618ca3*_0x188105*0.1,'y':_0x2dc93e['y']-_0x1c7aa5*1.4},_0x279b38={'x':_0x5163fa['x']+_0x618ca3*_0x188105*0.3,'y':_0x2dc93e['y']-_0x1c7aa5*1.5},_0x12f7d2={'p0':_0x2dc93e,'p1':_0x5b92e8,'p2':_0x279b38,'p3':_0x5163fa};_0x531bf8['push'](_0x12f7d2);const _0x4567be=_0x5163fa,_0x3913b6=_0xa64c17*0.45,_0x3958a6=_0x3a2c5c*0.22,_0x2a518f=_0xa64c17*0.28,_0x356f09=0.5,_0x176db7=0.6,_0x2abd02=_0xa64c17*0.85,_0x2a66ed=Math[_0x142597(0x15b)](Math['random']()*0x3);let _0x4b8c6f=[];if(_0x2a66ed===0x0){const _0x52eb79=_0x3913b6+Math['random']()*_0xa64c17*0.1,_0x3647a3=_0x3958a6+Math['random']()*_0x3a2c5c*0.08,_0x541b76=_0x2a518f+Math[_0x142597(0x1a8)]()*_0xa64c17*0.08,_0x40dafa=_0x4567be['x']+_0x618ca3*_0x3647a3*0.5,_0x312a17=Math[_0x142597(0x129)](_0x2abd02,_0x4567be['y']+_0x52eb79),_0x5b7e65=_0x40dafa+_0x618ca3*_0x3647a3*0.5,_0x15b20b=Math[_0x142597(0x193)](_0x4567be['y']+0x14,_0x312a17-_0x541b76),_0x20e5f3=_0x5b7e65-_0x618ca3*_0x3647a3*0.9,_0x327d99=Math['max'](_0x4567be['y']+0x28,_0x15b20b+_0x541b76*0.6),_0x2df656=_0x20e5f3-_0x618ca3*_0x3647a3*0.3,_0x23bec0=_0xa64c17+_0x3acb7a*0x2,_0x56b2e3=Math[_0x142597(0x193)](_0x3dbe48,Math[_0x142597(0x129)](_0x3a2c5c-_0x3dbe48-_0x3e55f0,_0x40dafa)),_0x28beec=Math[_0x142597(0x193)](_0x3dbe48,Math[_0x142597(0x129)](_0x3a2c5c-_0x3dbe48-_0x3e55f0,_0x5b7e65)),_0x29e39c=Math['max'](_0x3dbe48,Math[_0x142597(0x129)](_0x3a2c5c-_0x3dbe48-_0x3e55f0,_0x20e5f3)),_0x4b5bba={'x':_0x4567be['x'],'y':_0x4567be['y']+_0x52eb79*_0x176db7*0.5},_0x367743={'x':_0x56b2e3-_0x618ca3*_0x3647a3*_0x356f09,'y':_0x312a17},_0x3bd43c={'x':_0x56b2e3,'y':_0x312a17},_0x6d66b9={'x':_0x56b2e3+_0x618ca3*_0x3647a3*_0x356f09,'y':_0x312a17},_0x11e7ea={'x':_0x28beec,'y':_0x15b20b+_0x541b76*_0x176db7},_0x28695d={'x':_0x28beec,'y':_0x15b20b},_0x1acc47={'x':_0x28beec,'y':_0x15b20b-_0x541b76*_0x176db7*0.5},_0xfdc99={'x':_0x29e39c+_0x618ca3*_0x3647a3*_0x356f09,'y':_0x327d99},_0x5b6f34={'x':_0x29e39c,'y':_0x327d99},_0x5e5aa4={'x':_0x5b6f34['x'],'y':_0x5b6f34['y']+_0xa64c17*0.1},_0x148f0f={'x':_0x2df656,'y':_0x23bec0-_0xa64c17*0.2},_0x32354f={'x':_0x2df656,'y':_0x23bec0};_0x4b8c6f=[{'p0':_0x4567be,'p1':_0x4b5bba,'p2':_0x367743,'p3':_0x3bd43c},{'p0':_0x3bd43c,'p1':_0x6d66b9,'p2':_0x11e7ea,'p3':_0x28695d},{'p0':_0x28695d,'p1':_0x1acc47,'p2':_0xfdc99,'p3':_0x5b6f34},{'p0':_0x5b6f34,'p1':_0x5e5aa4,'p2':_0x148f0f,'p3':_0x32354f}];}else{if(_0x2a66ed===0x1){const _0x193eba=_0x3913b6*0.8+Math['random']()*_0xa64c17*0.1,_0x11ff34=_0x3958a6*1.2+Math['random']()*_0x3a2c5c*0.1,_0xfd2577=_0x2a518f*0.7+Math[_0x142597(0x1a8)]()*_0xa64c17*0.1,_0x407abf=_0x4567be['x']+_0x618ca3*_0x11ff34*0.4,_0x15d815=Math['min'](_0x2abd02-_0xfd2577*0.5,_0x4567be['y']+_0x193eba*0.6),_0x4b362f=_0x407abf+_0x618ca3*_0x11ff34*0.6,_0x2071f5=Math['min'](_0x2abd02,_0x15d815+_0xfd2577),_0x3b08bc=_0x4b362f-_0x618ca3*_0x11ff34*0.5,_0x27ad0f=_0xa64c17+_0x3acb7a*0x2,_0x2c4eda=Math[_0x142597(0x193)](_0x3dbe48,Math['min'](_0x3a2c5c-_0x3dbe48-_0x3e55f0,_0x407abf)),_0x1b268b=Math['max'](_0x3dbe48,Math['min'](_0x3a2c5c-_0x3dbe48-_0x3e55f0,_0x4b362f)),_0x260f6a={'x':_0x4567be['x']-_0x618ca3*_0x11ff34*0.1,'y':_0x4567be['y']+_0x193eba*0.3},_0x3bfb4c={'x':_0x2c4eda-_0x618ca3*_0x11ff34*_0x356f09*0.8,'y':_0x15d815+_0xfd2577*_0x176db7*0.4},_0x3d2695={'x':_0x2c4eda,'y':_0x15d815},_0x5e359f={'x':_0x2c4eda+_0x618ca3*_0x11ff34*_0x356f09*0.8,'y':_0x15d815-_0xfd2577*_0x176db7*0.4},_0x17bf54={'x':_0x1b268b+_0x618ca3*_0x11ff34*_0x356f09*0.6,'y':_0x2071f5+_0xfd2577*_0x176db7*0.5},_0x120187={'x':_0x1b268b,'y':_0x2071f5},_0x318021={'x':_0x1b268b-_0x618ca3*_0x11ff34*0.2,'y':_0x2071f5+_0xa64c17*0.1},_0x10e1dc={'x':_0x3b08bc,'y':_0x27ad0f-_0xa64c17*0.3},_0x506e29={'x':_0x3b08bc,'y':_0x27ad0f};_0x4b8c6f=[{'p0':_0x4567be,'p1':_0x260f6a,'p2':_0x3bfb4c,'p3':_0x3d2695},{'p0':_0x3d2695,'p1':_0x5e359f,'p2':_0x17bf54,'p3':_0x120187},{'p0':_0x120187,'p1':_0x318021,'p2':_0x10e1dc,'p3':_0x506e29}];}else{const _0x1755d8=_0x3913b6*0.6+Math[_0x142597(0x1a8)]()*_0xa64c17*0.05,_0x1597fe=_0x3958a6*0.7+Math['random']()*_0x3a2c5c*0.05,_0x542db7=_0x2a518f*0.6+Math['random']()*_0xa64c17*0.05,_0x31fa77=_0x542db7*1.5,_0x38c4e9=_0x4567be['x']+_0x618ca3*_0x1597fe*0.5,_0x3f30b9=Math[_0x142597(0x129)](_0x2abd02-_0x31fa77,_0x4567be['y']+_0x1755d8),_0x5673ae=_0x38c4e9+_0x618ca3*_0x1597fe*0.5,_0x4f17f7=_0x3f30b9+_0x542db7,_0x596217=_0x5673ae-_0x618ca3*_0x1597fe*0.8,_0x523dba=Math[_0x142597(0x129)](_0x2abd02,_0x4f17f7+_0x31fa77*0.7),_0x4bcf3c=_0x596217+_0x618ca3*_0x1597fe*0.4,_0x56467f=_0x523dba+_0x542db7*0.8,_0x223b12=_0x4bcf3c,_0x193386=_0xa64c17+_0x3acb7a*0x2,_0x4d8ee2=Math[_0x142597(0x193)](_0x3dbe48,Math['min'](_0x3a2c5c-_0x3dbe48-_0x3e55f0,_0x38c4e9)),_0x266842=Math['max'](_0x3dbe48,Math[_0x142597(0x129)](_0x3a2c5c-_0x3dbe48-_0x3e55f0,_0x5673ae)),_0x164fab=Math[_0x142597(0x193)](_0x3dbe48,Math[_0x142597(0x129)](_0x3a2c5c-_0x3dbe48-_0x3e55f0,_0x596217)),_0x231946=Math[_0x142597(0x193)](_0x3dbe48,Math[_0x142597(0x129)](_0x3a2c5c-_0x3dbe48-_0x3e55f0,_0x4bcf3c)),_0x39e89b={'x':_0x4567be['x'],'y':_0x4567be['y']+_0x1755d8*0.5},_0x398abb={'x':_0x4d8ee2-_0x618ca3*_0x1597fe*_0x356f09,'y':_0x3f30b9+_0x542db7*_0x176db7*0.3},_0x32135c={'x':_0x4d8ee2,'y':_0x3f30b9},_0x445866={'x':_0x4d8ee2+_0x618ca3*_0x1597fe*_0x356f09,'y':_0x3f30b9-_0x542db7*_0x176db7*0.3},_0x20d508={'x':_0x266842+_0x618ca3*_0x1597fe*_0x356f09,'y':_0x4f17f7+_0x542db7*_0x176db7*0.5},_0x52d4af={'x':_0x266842,'y':_0x4f17f7},_0x88f4df={'x':_0x266842-_0x618ca3*_0x1597fe*_0x356f09,'y':_0x4f17f7-_0x542db7*_0x176db7*0.5},_0x5de3b1={'x':_0x164fab-_0x618ca3*_0x1597fe*_0x356f09,'y':_0x523dba+_0x542db7*_0x176db7*0.4},_0x26f83a={'x':_0x164fab,'y':_0x523dba},_0x4964fc={'x':_0x164fab+_0x618ca3*_0x1597fe*_0x356f09,'y':_0x523dba-_0x542db7*_0x176db7*0.4},_0x5a8a83={'x':_0x231946+_0x618ca3*_0x1597fe*_0x356f09,'y':_0x56467f+_0x542db7*_0x176db7*0.6},_0x21e047={'x':_0x231946,'y':_0x56467f},_0xd9a7ba={'x':_0x231946-_0x618ca3*_0x1597fe*0.1,'y':_0x56467f+_0xa64c17*0.05},_0x3fc5f9={'x':_0x223b12,'y':_0x193386-_0xa64c17*0.2},_0x113abf={'x':_0x223b12,'y':_0x193386};_0x4b8c6f=[{'p0':_0x4567be,'p1':_0x39e89b,'p2':_0x398abb,'p3':_0x32135c},{'p0':_0x32135c,'p1':_0x445866,'p2':_0x20d508,'p3':_0x52d4af},{'p0':_0x52d4af,'p1':_0x88f4df,'p2':_0x5de3b1,'p3':_0x26f83a},{'p0':_0x26f83a,'p1':_0x4964fc,'p2':_0x5a8a83,'p3':_0x21e047},{'p0':_0x21e047,'p1':_0xd9a7ba,'p2':_0x3fc5f9,'p3':_0x113abf}];}}return _0x531bf8[_0x142597(0x160)](..._0x4b8c6f),_0x531bf8;}catch(_0x3e9758){return console['error'](_0x142597(0x14a)+_0x2f7320?.['id']+':',_0x3e9758),[];}}window[_0x3bd23c(0x1d9)]=generateAttackPathInternal;function resetAllMessagesInternal(){showReadyMessage=![],isShowingIntro=![],showCsHitsMessage=![],showPerfectMessage=![],showCsBonusScoreMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],isShowingCaptureMessage=![],isShowingPlayerGameOverMessage=![],isShowingCoopPlayersReady=![],csHitsMessageStartTime=0x0,perfectMessageStartTime=0x0,csBonusScoreMessageStartTime=0x0,csClearMessageStartTime=0x0,extraLifeMessageStartTime=0x0,readyMessageStartTime=0x0,captureMessageStartTime=0x0,playerGameOverMessageStartTime=0x0,csCompletionDelayStartTime=0x0,introDisplayStartTime=0x0,coopPlayersReadyStartTime=0x0;}window[_0x3bd23c(0x1d0)]=resetAllMessagesInternal;function _0x5521(_0x19318e,_0x3ee3e5){const _0x1e35bb=_0x1e35();return _0x5521=function(_0x552196,_0x1717bc){_0x552196=_0x552196-0xee;let _0x160a32=_0x1e35bb[_0x552196];return _0x160a32;},_0x5521(_0x19318e,_0x3ee3e5);}function stopAllGameSoundsInternal(){const _0xffd0dd=_0x3bd23c;if(typeof soundPaths===_0xffd0dd(0x198)&&soundPaths!==null&&typeof stopSound===_0xffd0dd(0x123))for(const _0x16f214 in soundPaths){stopSound(_0x16f214);}isGridSoundPlaying=![];}window[_0x3bd23c(0x11c)]=stopAllGameSoundsInternal;function resetGameInternal(){const _0xece9a6=_0x3bd23c;score=0x0,level=0x1,playerLives=0x3,window[_0xece9a6(0x1b1)]=null;if(isTwoPlayerMode){player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,currentPlayer=0x1,player1CompletedLevel=-0x1,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0xece9a6(0x1f9)]();else player1LifeThresholdsMet=new Set();if(player2LifeThresholdsMet instanceof Set)player2LifeThresholdsMet[_0xece9a6(0x1f9)]();else player2LifeThresholdsMet=new Set();player1IsDualShipActive=![],player2IsDualShipActive=![],isPlayer1ShipCaptured=![],isPlayer2ShipCaptured=![],isPlayer1WaitingForRespawn=![],isPlayer2WaitingForRespawn=![],isPlayer1Invincible=![],isPlayer2Invincible=![],player1RespawnTime=0x0,player2RespawnTime=0x0,player1InvincibilityEndTime=0x0,player2InvincibilityEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![];if(selectedGameMode===_0xece9a6(0x20a)){playerLives=0x0;if(gameCanvas&&gameCanvas[_0xece9a6(0x117)]>0x0&&gameCanvas[_0xece9a6(0x1d4)]>0x0){const _0x4d3519=gameCanvas[_0xece9a6(0x117)]/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x1e95d0=gameCanvas[_0xece9a6(0x117)]/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x4f0a96=gameCanvas[_0xece9a6(0x1d4)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;ship1={'x':_0x4d3519,'y':_0x4f0a96,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x4d3519,'id':'p1'},ship2={'x':_0x1e95d0,'y':_0x4f0a96,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x1e95d0,'id':'p2'},(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&(smoothedShip1X=_0x4d3519,smoothedShip2X=_0x1e95d0,aiShip1TargetEnemy=null,aiShip2TargetEnemy=null,aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0,aiShip1LastShotTime=0x0,aiShip2LastShotTime=0x0,aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);}ship=null;}else{if(!ship&&gameCanvas&&gameCanvas[_0xece9a6(0x117)]>0x0&&gameCanvas['height']>0x0)ship={'x':Math[_0xece9a6(0x166)](gameCanvas[_0xece9a6(0x117)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':'main'},ship[_0xece9a6(0x200)]=ship['x'];else ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas['height']>0x0&&(ship['x']=Math[_0xece9a6(0x166)](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),ship[_0xece9a6(0x200)]=ship['x'],ship['y']=gameCanvas[_0xece9a6(0x1d4)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}}else{player1Lives=0x3,player1Score=0x0,player1MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0xece9a6(0x1f9)]();else player1LifeThresholdsMet=new Set();if(!ship&&gameCanvas&&gameCanvas[_0xece9a6(0x117)]>0x0&&gameCanvas[_0xece9a6(0x1d4)]>0x0)ship={'x':Math[_0xece9a6(0x166)](gameCanvas[_0xece9a6(0x117)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0xece9a6(0x1d4)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0xece9a6(0x110)},ship['targetX']=ship['x'];else ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas['height']>0x0&&(ship['x']=Math['round'](gameCanvas[_0xece9a6(0x117)]/0x2-SHIP_WIDTH/0x2),ship[_0xece9a6(0x200)]=ship['x'],ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isDualShipActive=![];if(!isTwoPlayerMode)player1IsDualShipActive=![];fallingShips=[],visualOffsetX=-0x14,gameOverSequenceStartTime=0x0,isShowingResultsScreen=![],gameStartTime=Date[_0xece9a6(0x1b5)](),gameJustStarted=!![],gameJustStartedAndWaveLaunched=![],currentGridOffsetX=0x0,gridMoveDirection=0x1,gridJustCompleted=![],isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,lastGridFireCheckTime=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,scoreEarnedThisCS=0x0,challengingStageEnemiesHit=0x0,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined,aiCanShootTime=0x0,aiLastShotTime=0x0,!(selectedGameMode==='coop'&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xece9a6(0x220)))&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0),playerLastShotTime=0x0,player1LastShotTime=0x0,player2LastShotTime=0x0,p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isShowingCoopPlayersReady=![],coopPlayersReadyStartTime=0x0,resetWaveInternal();}window[_0x3bd23c(0x218)]=resetGameInternal;function resetWaveInternal(){const _0x42ef94=_0x3bd23c;isWaveTransitioning=![],readyForNextWave=![],readyForNextWaveReset=![],isEntrancePhaseActive=!![],firstEnemyLanded=![],captureAttemptMadeThisLevel=![],gameJustStartedAndWaveLaunched=![],aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![],enemies=[],bullets=[],enemyBullets=[],explosions=[],floatingScores=[],hitSparks=[];Array[_0x42ef94(0x1dc)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x42ef94(0x1ab)](clearTimeout);enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;const _0x573080=getWaveTypeInternal(level);isChallengingStage=_0x573080===_0x42ef94(0x1e3),isFullGridWave=_0x573080===_0x42ef94(0x17f),challengingStageEnemiesHit=0x0,scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null;(isFullGridWave||isChallengingStage)&&(isEntrancePhaseActive=![]);const _0x423b4d=isShowingDemoText;resetAllMessagesInternal();_0x423b4d&&(isShowingDemoText=!![]);if(selectedGameMode==='coop'&&level===0x1)isShowingIntro=![],introStep=0x2;else{if(isTwoPlayerMode&&selectedGameMode===_0x42ef94(0x1d5)||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL'){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(isChallengingStage){introStep=0x3,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(level===0x1&&!isTwoPlayerMode){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{introStep=0x2,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}}}}isShowingIntro&&!(selectedGameMode===_0x42ef94(0x20a)&&level===0x1)&&(introDisplayStartTime=Date[_0x42ef94(0x1b5)]());playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],currentWaveDefinition=generateWaveDefinitionInternal(level);if(selectedGameMode===_0x42ef94(0x20a)){if(gameCanvas&&gameCanvas['width']>0x0&&gameCanvas['height']>0x0){const _0x3f9154=ship1&&player1Lives>0x0,_0x5e8a54=ship2&&player2Lives>0x0,_0x3e1605=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x3f9154&&_0x5e8a54){const _0x34ad7c=gameCanvas[_0x42ef94(0x117)]/0x2-gameCanvas[_0x42ef94(0x117)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1&&(ship1['targetX']=_0x34ad7c,ship1['x']=_0x34ad7c,smoothedShip1X=_0x34ad7c,ship1['y']=_0x3e1605);const _0x26ddeb=gameCanvas['width']/0x2+gameCanvas[_0x42ef94(0x117)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2[_0x42ef94(0x200)]=_0x26ddeb,ship2['x']=_0x26ddeb,smoothedShip2X=_0x26ddeb,ship2['y']=_0x3e1605);}else{if(_0x3f9154&&ship1){const _0x3fdb37=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x9d6fe=Math[_0x42ef94(0x166)](gameCanvas['width']/0x2-_0x3fdb37/0x2);ship1[_0x42ef94(0x200)]=_0x9d6fe,ship1['x']=_0x9d6fe,smoothedShip1X=_0x9d6fe,ship1['y']=_0x3e1605;}else{if(_0x5e8a54&&ship2){const _0x33bc56=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0xe5299e=Math[_0x42ef94(0x166)](gameCanvas[_0x42ef94(0x117)]/0x2-_0x33bc56/0x2);ship2[_0x42ef94(0x200)]=_0xe5299e,ship2['x']=_0xe5299e,smoothedShip2X=_0xe5299e,ship2['y']=_0x3e1605;}}}}else{if(_0x3f9154&&ship1)ship1['y']=_0x3e1605;if(_0x5e8a54&&ship2)ship2['y']=_0x3e1605;}}}else{if(ship&&gameCanvas&&gameCanvas[_0x42ef94(0x117)]>0x0&&gameCanvas[_0x42ef94(0x1d4)]>0x0&&(forceCenterShipNextReset||!isManualControl||isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)){let _0x93138a=ship[_0x42ef94(0x117)];if(isDualShipActive)_0x93138a=DUAL_SHIP_OFFSET_X+SHIP_WIDTH;ship['x']=Math[_0x42ef94(0x166)](gameCanvas[_0x42ef94(0x117)]/0x2-_0x93138a/0x2),ship[_0x42ef94(0x200)]=ship['x'],ship['y']=gameCanvas[_0x42ef94(0x1d4)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isPlayerTwoAI&&selectedGameMode===_0x42ef94(0x1d5)&&currentPlayer===0x2)smoothedShipX=ship['x'];}else ship&&gameCanvas&&gameCanvas[_0x42ef94(0x117)]>0x0&&(ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);}forceCenterShipNextReset=![];if(!isManualControl&&aiNeedsStabilization&&selectedGameMode!==_0x42ef94(0x20a)&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x42ef94(0x1d5)&&currentPlayer===0x2)){aiStabilizationEndTime=Date[_0x42ef94(0x1b5)]()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}else{if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2&&aiNeedsStabilization){aiStabilizationEndTime=Date[_0x42ef94(0x1b5)]()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}}}window[_0x3bd23c(0x207)]=resetWaveInternal;function getWaveTypeInternal(_0xaa211b){const _0x470f84=_0x3bd23c,_0x32018c=(_0xaa211b-0x1)%0x4;switch(_0x32018c){case 0x0:return _0x470f84(0x17f);case 0x1:return _0x470f84(0x1bb);case 0x2:return _0x470f84(0x1e3);case 0x3:return _0x470f84(0x106);default:return _0x470f84(0x104);}}window[_0x3bd23c(0x1c8)]=getWaveTypeInternal;function generateWaveDefinitionInternal(_0x3251d9){const _0x3066cb=_0x3bd23c;let _0x9e47ad=[];currentWavePatternIndex=-0x1;const _0x73eac0=getWaveTypeInternal(_0x3251d9);if(typeof waveEntrancePatterns===_0x3066cb(0x18f)||!Array[_0x3066cb(0x1dc)](waveEntrancePatterns)||waveEntrancePatterns[_0x3066cb(0x111)]<0x2)return console['error'](_0x3066cb(0x13c)),[];if(_0x73eac0===_0x3066cb(0x1e3))_0x9e47ad=[];else{if(_0x73eac0===_0x3066cb(0x17f)){currentWavePatternIndex=0x0;const _0x19ba87=waveEntrancePatterns[0x0];if(!_0x19ba87||_0x19ba87['length']===0x0)console[_0x3066cb(0x1a0)](_0x3066cb(0x15c)),_0x9e47ad=[];else try{_0x9e47ad=JSON[_0x3066cb(0x13a)](JSON['stringify'](_0x19ba87),(_0xd26cb4,_0xc44404)=>{const _0x4cde23=_0x3066cb;return _0xc44404&&typeof _0xc44404===_0x4cde23(0x198)&&_0xc44404[_0x4cde23(0x131)]===ENEMY3_TYPE&&typeof _0xc44404[_0x4cde23(0x139)]===_0x4cde23(0x18f)&&(_0xc44404[_0x4cde23(0x139)]=![]),_0xc44404;});}catch(_0xc72bf9){console[_0x3066cb(0x1a0)](_0x3066cb(0x14b),_0xc72bf9),_0x9e47ad=[];}}else{if(_0x73eac0===_0x3066cb(0x1bb)){currentWavePatternIndex=0x0;const _0xd47e5b=waveEntrancePatterns[0x0];if(!_0xd47e5b||_0xd47e5b[_0x3066cb(0x111)]===0x0)console[_0x3066cb(0x1a0)](_0x3066cb(0x184)),_0x9e47ad=[];else try{_0x9e47ad=JSON['parse'](JSON[_0x3066cb(0x1af)](_0xd47e5b),(_0x3e9452,_0x5e57f7)=>{const _0x21cfdd=_0x3066cb;return _0x5e57f7&&typeof _0x5e57f7==='object'&&_0x5e57f7[_0x21cfdd(0x131)]===ENEMY3_TYPE&&typeof _0x5e57f7[_0x21cfdd(0x139)]===_0x21cfdd(0x18f)&&(_0x5e57f7[_0x21cfdd(0x139)]=![]),_0x5e57f7;});}catch(_0x2955fa){console[_0x3066cb(0x1a0)](_0x3066cb(0xfc),_0x2955fa),_0x9e47ad=[];}}else{if(_0x73eac0===_0x3066cb(0x106)){currentWavePatternIndex=0x1;const _0x5b450d=waveEntrancePatterns[0x1];if(!_0x5b450d||_0x5b450d['length']===0x0)console[_0x3066cb(0x1a0)](_0x3066cb(0x144)),_0x9e47ad=[];else try{_0x9e47ad=JSON[_0x3066cb(0x13a)](JSON['stringify'](_0x5b450d),(_0x93521f,_0x373a13)=>{const _0x5e1843=_0x3066cb;return _0x373a13&&typeof _0x373a13===_0x5e1843(0x198)&&_0x373a13[_0x5e1843(0x131)]===ENEMY3_TYPE&&typeof _0x373a13[_0x5e1843(0x139)]===_0x5e1843(0x18f)&&(_0x373a13['hasCapturedShip']=![]),_0x373a13;});}catch(_0x327ea0){console['error'](_0x3066cb(0x204),_0x327ea0),_0x9e47ad=[];}}else console[_0x3066cb(0x143)](_0x3066cb(0x213)+_0x3251d9+':\x20'+_0x73eac0),_0x9e47ad=[];}}}if(_0x73eac0!==_0x3066cb(0x1e3)){if(typeof normalWaveEntrancePaths===_0x3066cb(0x18f)||Object[_0x3066cb(0x1fb)](normalWaveEntrancePaths)['length']===0x0)return console[_0x3066cb(0x1a0)](_0x3066cb(0x156)),_0x9e47ad;for(let _0x583a79=_0x9e47ad[_0x3066cb(0x111)]-0x1;_0x583a79>=0x0;_0x583a79--){const _0x30231e=_0x9e47ad[_0x583a79];if(!normalWaveEntrancePaths?.[_0x30231e[_0x3066cb(0x188)]]){_0x9e47ad['splice'](_0x583a79,0x1);continue;}if(_0x30231e[_0x3066cb(0x181)]&&Array['isArray'](_0x30231e[_0x3066cb(0x181)])){for(let _0x3a27c6=_0x30231e[_0x3066cb(0x181)][_0x3066cb(0x111)]-0x1;_0x3a27c6>=0x0;_0x3a27c6--){const _0x30e4c3=_0x30231e[_0x3066cb(0x181)][_0x3a27c6];(!_0x30e4c3||!normalWaveEntrancePaths?.[_0x30e4c3[_0x3066cb(0x1e9)]])&&_0x30231e[_0x3066cb(0x181)][_0x3066cb(0x212)](_0x3a27c6,0x1),_0x30e4c3&&_0x30e4c3['type']===ENEMY3_TYPE&&typeof _0x30e4c3['hasCapturedShip']===_0x3066cb(0x18f)&&(_0x30e4c3['hasCapturedShip']=![]);}_0x30231e[_0x3066cb(0x181)][_0x3066cb(0x111)]===0x0&&_0x9e47ad['splice'](_0x583a79,0x1);}else _0x9e47ad[_0x3066cb(0x212)](_0x583a79,0x1);}}return _0x9e47ad;}window[_0x3bd23c(0x1e6)]=generateWaveDefinitionInternal;const createBulletSimple=(_0x26d1a6,_0x51964a=null)=>{const _0x52db41=_0x3bd23c;let _0x33feab=null,_0x50c30c=![];if(isTwoPlayerMode&&selectedGameMode===_0x52db41(0x20a)){const _0x1ead42=ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured,_0x455ab2=ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured;if(_0x1ead42&&_0x455ab2)_0x33feab=Math[_0x52db41(0x1a8)]()<0.5?ship1:ship2,_0x50c30c=!![];else{if(_0x1ead42)_0x33feab=ship1,_0x50c30c=!![];else _0x455ab2&&(_0x33feab=ship2,_0x50c30c=!![]);}}else ship&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn&&(_0x33feab=ship,_0x50c30c=!![]);if(!_0x26d1a6||!isInGameState||!_0x50c30c||!_0x33feab)return![];const _0xb08f67=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x5aeee4=_0x51964a?_0x51964a['x']:_0x26d1a6['x']+_0x26d1a6[_0x52db41(0x117)]/0x2,_0x283723=_0x51964a?_0x51964a['y']:_0x26d1a6['y']+_0x26d1a6[_0x52db41(0x1d4)]/0x2;let _0x424c5b=0x0,_0x53f4e8=_0xb08f67;const _0x560abd=_0x33feab['x']+_0x33feab[_0x52db41(0x117)]/0x2-_0x5aeee4,_0x849249=_0x33feab['y']+_0x33feab[_0x52db41(0x1d4)]/0x2-_0x283723,_0x200d9c=Math[_0x52db41(0x1a6)](_0x560abd*_0x560abd+_0x849249*_0x849249);if(_0x200d9c>0x0){let _0x4cc3dc=0x0;!isChallengingStage&&(_0x4cc3dc=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x5d71a5=Math['atan2'](_0x849249,_0x560abd);_0x424c5b=Math[_0x52db41(0x20f)](_0x5d71a5)*_0xb08f67*_0x4cc3dc,_0x53f4e8=Math['sqrt'](_0xb08f67**0x2-_0x424c5b**0x2),_0x53f4e8=Math['max'](_0xb08f67*(0x1-_0x4cc3dc)*0.5,_0x53f4e8);if(_0x849249<0x0&&_0x53f4e8>0x0){}if(_0x849249<0x0)_0x53f4e8=Math[_0x52db41(0xf4)](_0x53f4e8);return enemyBullets[_0x52db41(0x160)]({'x':_0x5aeee4-ENEMY_BULLET_WIDTH/0x2,'y':_0x283723,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x424c5b,'vy':_0x53f4e8,'type':_0x26d1a6[_0x52db41(0x131)]}),!![];}return![];};function scheduleSingleEntranceSquadron(_0x2bed80,_0x4a2803,_0x27d0fd){const _0x4c6d8e=_0x3bd23c;if(isFullGridWave||isChallengingStage)return console[_0x4c6d8e(0x143)](_0x4c6d8e(0x22e)+level+_0x4c6d8e(0x1b9)+isFullGridWave+_0x4c6d8e(0x21f)+isChallengingStage+_0x4c6d8e(0x16a)),_0x2bed80?.['enemies']?.[_0x4c6d8e(0x111)]>0x0&&(enemiesSpawnedThisWave+=_0x2bed80[_0x4c6d8e(0x181)][_0x4c6d8e(0x111)],squadronCompletionStatus[_0x4a2803]&&(squadronCompletionStatus[_0x4a2803][_0x4c6d8e(0x231)]=squadronCompletionStatus[_0x4a2803]['total'])),![];const _0x35806b=normalWaveEntrancePaths,_0x1b4a09=_0x2bed80[_0x4c6d8e(0x188)],_0x44a2a2=_0x35806b[_0x1b4a09];if(!_0x44a2a2||_0x44a2a2[_0x4c6d8e(0x111)]===0x0)return console['error'](_0x4c6d8e(0x1ec)+_0x1b4a09+_0x4c6d8e(0x227)+_0x4a2803+_0x4c6d8e(0x222)),_0x2bed80?.[_0x4c6d8e(0x181)]?.[_0x4c6d8e(0x111)]>0x0&&(enemiesSpawnedThisWave+=_0x2bed80[_0x4c6d8e(0x181)][_0x4c6d8e(0x111)],squadronCompletionStatus[_0x4a2803]&&(squadronCompletionStatus[_0x4a2803]['completed']=squadronCompletionStatus[_0x4a2803][_0x4c6d8e(0x102)])),![];const _0x5d64e3=setTimeout(()=>{const _0x48a287=_0x4c6d8e,_0x14fcce=enemySpawnTimeouts[_0x48a287(0x233)](_0x5d64e3);if(_0x14fcce>-0x1)enemySpawnTimeouts[_0x48a287(0x212)](_0x14fcce,0x1);let _0x3c520e=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x3c520e=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x3c520e=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x3c520e||isFullGridWave){_0x2bed80?.[_0x48a287(0x181)]?.[_0x48a287(0x111)]>0x0&&(enemiesSpawnedThisWave+=_0x2bed80[_0x48a287(0x181)]['length'],squadronCompletionStatus[_0x4a2803]&&(squadronCompletionStatus[_0x4a2803][_0x48a287(0x231)]=squadronCompletionStatus[_0x4a2803][_0x48a287(0x102)]));return;}try{squadronEntranceFiringStatus[_0x4a2803]?(squadronEntranceFiringStatus[_0x4a2803][_0x48a287(0x1ce)]=Date[_0x48a287(0x1b5)]()+_0x27d0fd,squadronEntranceFiringStatus[_0x4a2803][_0x48a287(0xf3)]=![]):(console[_0x48a287(0x143)](_0x48a287(0x1d2)+_0x4a2803+_0x48a287(0x167)),squadronEntranceFiringStatus[_0x4a2803]={'hasFired':![],'scheduledStartTime':Date[_0x48a287(0x1b5)]()+_0x27d0fd});const _0x51b007=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0xc396b5=_0x51b007*0x2,_0x4f1717=0x1;_0x2bed80[_0x48a287(0x181)][_0x48a287(0x1ab)]((_0x2ec0ec,_0x479a9d)=>{const _0x3e350a=_0x48a287;if(!_0x2ec0ec||!_0x2ec0ec['type']||typeof _0x2ec0ec[_0x3e350a(0xf5)]===_0x3e350a(0x18f)||typeof _0x2ec0ec[_0x3e350a(0x11b)]===_0x3e350a(0x18f)||!_0x2ec0ec[_0x3e350a(0x1e9)]){console['error'](_0x3e350a(0x195)+_0x4a2803+_0x3e350a(0x10b)+_0x1b4a09+_0x3e350a(0x1fd)+_0x479a9d+_0x3e350a(0xf9)),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x4a2803]&&squadronCompletionStatus[_0x4a2803]['completed']++;return;}const _0x4995c3=_0x35806b[_0x2ec0ec[_0x3e350a(0x1e9)]];(!_0x4995c3||_0x4995c3['length']===0x0)&&console['warn']('Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22'+_0x2ec0ec[_0x3e350a(0x1e9)]+_0x3e350a(0x239)+_0x4a2803+_0x3e350a(0x12c)+_0x479a9d+_0x3e350a(0x1bd)+_0x1b4a09+'\x22.');let _0xa8001=0x0;const _0x1b1412=getWaveType(level),_0x507e57=_0x1b1412===_0x3e350a(0x106)&&(_0x4a2803===0x2||_0x4a2803===0x3);if(_0x507e57){const _0x2238ee=Math['floor'](_0x479a9d/0x2);_0x479a9d%0x2===0x0?_0xa8001=_0x2238ee*_0xc396b5:_0xa8001=_0x2238ee*_0xc396b5+_0x4f1717;}else _0xa8001=_0x479a9d*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x1c5a2c=setTimeout(()=>{const _0x212f9d=_0x3e350a,_0x5c1147=enemySpawnTimeouts[_0x212f9d(0x233)](_0x1c5a2c);if(_0x5c1147>-0x1)enemySpawnTimeouts[_0x212f9d(0x212)](_0x5c1147,0x1);let _0x1d706e=![];isTwoPlayerMode&&selectedGameMode===_0x212f9d(0x20a)?_0x1d706e=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x1d706e=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x1d706e||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x4a2803]&&squadronCompletionStatus[_0x4a2803][_0x212f9d(0x231)]++;return;}try{let _0x37704d=_0x2ec0ec[_0x212f9d(0x131)],_0x3709e6=_0x37704d===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x57204a,_0x265ea3;if(_0x37704d===ENEMY1_TYPE)_0x57204a=ENEMY1_WIDTH,_0x265ea3=ENEMY1_HEIGHT;else _0x37704d===ENEMY3_TYPE?(_0x57204a=BOSS_WIDTH,_0x265ea3=BOSS_HEIGHT):(_0x57204a=ENEMY_WIDTH,_0x265ea3=ENEMY_HEIGHT);let _0x57cb1b=0x0,_0x45e41d=0x0;if(_0x44a2a2&&_0x44a2a2[0x0]?.['p0'])_0x57cb1b=_0x44a2a2[0x0]['p0']['x'],_0x45e41d=_0x44a2a2[0x0]['p0']['y'];else throw new Error(_0x212f9d(0x22b)+_0x1b4a09);let _0x242bb0,_0x419b01;try{const {x:_0xcf1b63,y:_0x145fed}=getCurrentGridSlotPosition(_0x2ec0ec[_0x212f9d(0xf5)],_0x2ec0ec['gridCol'],_0x57204a);_0x242bb0=_0xcf1b63,_0x419b01=_0x145fed;}catch(_0x14e2c7){console['error'](_0x212f9d(0x174)+_0x2ec0ec[_0x212f9d(0x131)]+_0x212f9d(0x115)+_0x2ec0ec[_0x212f9d(0xf5)]+','+_0x2ec0ec['gridCol']+']',_0x14e2c7),_0x242bb0=gameCanvas?.[_0x212f9d(0x117)]/0x2||0xc8,_0x419b01=ENEMY_TOP_MARGIN+_0x2ec0ec['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x3b02be=0x0;const _0x549ad5=_0x507e57,_0x2853ee=_0x549ad5&&_0x479a9d%0x2!==0x0;_0x2853ee?_0x3b02be=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x3b02be=-_0x479a9d*PATH_T_OFFSET_PER_ENEMY;const _0x54d21b={'x':_0x57cb1b,'y':_0x45e41d,'width':_0x57204a,'height':_0x265ea3,'targetGridX':_0x242bb0,'targetGridY':_0x419b01,'speed':0x0,'state':_0x212f9d(0x177),'gridRow':_0x2ec0ec[_0x212f9d(0xf5)],'gridCol':_0x2ec0ec['gridCol'],'type':_0x37704d,'health':_0x3709e6,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x1b4a09,'pathSegmentIndex':0x0,'pathT':_0x3b02be,'squadronId':_0x4a2803,'squadronEnemyIndex':_0x479a9d,'id':_0x212f9d(0x136)+_0x4a2803+'-'+_0x479a9d+'-'+Date[_0x212f9d(0x1b5)]()+'-'+Math['random']()[_0x212f9d(0x19f)](0x24)[_0x212f9d(0x217)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x212f9d(0x1d5),'hasCapturedShip':_0x37704d===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x37704d===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x212f9d(0x160)](_0x54d21b),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x4a2803]&&squadronCompletionStatus[_0x4a2803][_0x212f9d(0x231)]++;if(_0x479a9d===0x0){let _0x4e28ab=0x5dc;(_0x4a2803===0x0||_0x4a2803===0x1)&&(_0x4e28ab=0xfa);const _0x5bc829=_0x54d21b['id'],_0x5c7529=setTimeout(()=>{const _0x51a7ee=_0x212f9d,_0xa769bd=enemySpawnTimeouts['indexOf'](_0x5c7529);if(_0xa769bd>-0x1)enemySpawnTimeouts[_0x51a7ee(0x212)](_0xa769bd,0x1);let _0x21be69=![];isTwoPlayerMode&&selectedGameMode===_0x51a7ee(0x20a)?_0x21be69=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x21be69=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x21be69||isChallengingStage||isWaveTransitioning||isFullGridWave)return;fireFixedEnemyBurst(_0x5bc829,null,0x0,0x3);},_0x4e28ab);enemySpawnTimeouts[_0x212f9d(0x160)](_0x5c7529);}}catch(_0x5d038d){console[_0x212f9d(0x1a0)]('Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20'+_0x4a2803+_0x212f9d(0x134)+_0x479a9d+_0x212f9d(0x124)+_0x1b4a09+'):',_0x5d038d),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x4a2803]&&squadronCompletionStatus[_0x4a2803][_0x212f9d(0x231)]++;}},_0xa8001);enemySpawnTimeouts[_0x3e350a(0x160)](_0x1c5a2c);});}catch(_0x3dde7a){console[_0x48a287(0x1a0)]('Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20'+_0x4a2803+_0x48a287(0x10b)+_0x1b4a09+'):',_0x3dde7a),_0x2bed80?.[_0x48a287(0x181)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x2bed80[_0x48a287(0x181)]['length'],squadronCompletionStatus[_0x4a2803]&&(squadronCompletionStatus[_0x4a2803][_0x48a287(0x231)]=squadronCompletionStatus[_0x4a2803]['total']));}},_0x27d0fd);return enemySpawnTimeouts[_0x4c6d8e(0x160)](_0x5d64e3),!![];};function scheduleEntranceFlightWave(){const _0x3f150=_0x3bd23c;if(isFullGridWave||isChallengingStage||!currentWaveDefinition||currentWaveDefinition['length']===0x0){console['warn'](_0x3f150(0x147)+level+_0x3f150(0x1b9)+isFullGridWave+',\x20isCS:\x20'+isChallengingStage+_0x3f150(0x1d3)+currentWaveDefinition?.[_0x3f150(0x111)]),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x55feaa=0x0,_0x1a7859=0x0;currentWaveDefinition[_0x3f150(0x1ab)]((_0x244df4,_0x6347a9)=>{const _0x58de90=_0x3f150;_0x244df4&&_0x244df4[_0x58de90(0x181)]&&Array[_0x58de90(0x1dc)](_0x244df4['enemies'])&&_0x244df4['enemies']['length']>0x0?(totalEnemiesScheduledForWave+=_0x244df4[_0x58de90(0x181)][_0x58de90(0x111)],squadronCompletionStatus[_0x6347a9]={'completed':0x0,'total':_0x244df4[_0x58de90(0x181)][_0x58de90(0x111)],'hasFiredPostLanding':![]},squadronEntranceFiringStatus[_0x6347a9]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x244df4,_0x6347a9,_0x55feaa)&&_0x1a7859++,_0x55feaa+=NORMAL_WAVE_SQUADRON_INTERVAL):console[_0x58de90(0x143)]('Entrance\x20Wave:\x20Squadron\x20'+_0x6347a9+'\x20is\x20empty\x20or\x20invalid.');}),_0x1a7859===0x0&&totalEnemiesScheduledForWave===0x0?(console[_0x3f150(0x143)](_0x3f150(0x23a)+level+_0x3f150(0x1ef)),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![]):isEntrancePhaseActive=!![];}function startChallengingStageSequence(){const _0x1f9cb2=_0x3bd23c;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts[_0x1f9cb2(0x1ab)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object[_0x1f9cb2(0x1fb)](challengingStagePaths)[_0x1f9cb2(0x111)]===0x0&&defineChallengingStagePaths();if(Object['keys'](challengingStagePaths)[_0x1f9cb2(0x111)]===0x0){console[_0x1f9cb2(0x1a0)]('CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!'),isWaveTransitioning=!![],setTimeout(()=>{const _0x516fb3=_0x1f9cb2;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x516fb3(0x20a)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x516fb3(0x123)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x83a765=[_0x1f9cb2(0x1e2),_0x1f9cb2(0x15e),_0x1f9cb2(0x230),_0x1f9cb2(0x103)],_0x4d721a=[_0x1f9cb2(0x1f4),_0x1f9cb2(0x152),_0x1f9cb2(0x13e),_0x1f9cb2(0x20c)],_0x1e7fe0=[..._0x83a765,..._0x4d721a];for(const _0x126f0 of _0x1e7fe0){if(!challengingStagePaths['hasOwnProperty'](_0x126f0)){console[_0x1f9cb2(0x1a0)](_0x1f9cb2(0x1b4)+_0x126f0+_0x1f9cb2(0x150)),isWaveTransitioning=!![],setTimeout(()=>{const _0x2c462d=_0x1f9cb2;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode==='coop'&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x2c462d(0x123)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0xfd7472=[..._0x83a765],_0x4309a2=[..._0x4d721a][_0x1f9cb2(0x1b3)](()=>Math[_0x1f9cb2(0x1a8)]()-0.5);_0xfd7472[_0x1f9cb2(0x160)](..._0x4309a2),currentWaveDefinition=[];for(let _0xb2681e=0x0;_0xb2681e<CHALLENGING_STAGE_SQUADRON_COUNT;_0xb2681e++){const _0x118e46=_0xfd7472[_0xb2681e],_0x1ed391={'pathId':_0x118e46,'enemies':[]};for(let _0x5cc8c3=0x0;_0x5cc8c3<CHALLENGING_STAGE_SQUADRON_SIZE;_0x5cc8c3++){let _0x502d13=_0x5cc8c3<Math[_0x1f9cb2(0x15b)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x1ed391[_0x1f9cb2(0x181)]['push']({'type':_0x502d13,'entrancePathId':_0x118e46});}currentWaveDefinition[_0x1f9cb2(0x160)](_0x1ed391);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0x1f9cb2(0x111)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x3ab86a=0x0;const _0x8ffbeb=-0x1c,_0x369555=Math[_0x1f9cb2(0x15b)](Math[_0x1f9cb2(0x193)](0x0,level-0x3)/0x4)+0x1,_0x485abf=scaleValue(_0x369555,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition['forEach']((_0x4d7a6d,_0x46c09d)=>{let _0x2eb0a6=0x0;if(_0x46c09d<=0x1)_0x2eb0a6=0x0;else _0x46c09d<=0x3?_0x2eb0a6=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x2eb0a6=(_0x46c09d-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x434e22=_0x485abf;(_0x46c09d===0x2||_0x46c09d===0x3)&&(_0x434e22*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0xb3c517=setTimeout(()=>{const _0x5f0088=_0x5521,_0xd1d918=enemySpawnTimeouts['indexOf'](_0xb3c517);if(_0xd1d918>-0x1)enemySpawnTimeouts['splice'](_0xd1d918,0x1);let _0x3d753b=![];isTwoPlayerMode&&selectedGameMode===_0x5f0088(0x20a)?_0x3d753b=player1Lives>0x0||player2Lives>0x0:_0x3d753b=playerLives>0x0;if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&_0x3d753b)try{const _0x99d248=_0x4d7a6d[_0x5f0088(0x188)],_0x5212bc=challengingStagePaths,_0x1048f0=_0x5212bc[_0x99d248];if(!_0x1048f0||_0x1048f0[_0x5f0088(0x111)]===0x0){console[_0x5f0088(0x1a0)](_0x5f0088(0x15a)+_0x99d248+_0x5f0088(0x227)+_0x46c09d+_0x5f0088(0x1db)),enemiesSpawnedThisWave+=_0x4d7a6d[_0x5f0088(0x181)][_0x5f0088(0x111)];return;}let _0x35a6d1=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x46c09d>=0x2&&_0x46c09d<=0x3)_0x35a6d1=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x46c09d>=0x4&&(_0x35a6d1=CS_LOOP_ATTACK_SPAWN_DELAY);_0x4d7a6d[_0x5f0088(0x181)][_0x5f0088(0x1ab)]((_0x34c930,_0x4ab645)=>{const _0x5d60b8=_0x5f0088;if(!_0x34c930||!_0x34c930[_0x5d60b8(0x131)]){console[_0x5d60b8(0x1a0)](_0x5d60b8(0x1fc)+_0x46c09d+_0x5d60b8(0x12c)+_0x4ab645+_0x5d60b8(0xf9)),enemiesSpawnedThisWave++;return;}const _0x22ed95=_0x4ab645*_0x35a6d1,_0x307b5c=setTimeout(()=>{const _0x17aedf=_0x5d60b8,_0x396df3=enemySpawnTimeouts[_0x17aedf(0x233)](_0x307b5c);if(_0x396df3>-0x1)enemySpawnTimeouts[_0x17aedf(0x212)](_0x396df3,0x1);let _0x3aa3d6=![];isTwoPlayerMode&&selectedGameMode===_0x17aedf(0x20a)?_0x3aa3d6=player1Lives>0x0||player2Lives>0x0:_0x3aa3d6=playerLives>0x0;if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||!_0x3aa3d6){enemiesSpawnedThisWave++;return;}try{let _0x4a61c6=_0x34c930[_0x17aedf(0x131)],_0x20026e=_0x4a61c6===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x2fdade,_0x1367c5;if(_0x4a61c6===ENEMY1_TYPE)_0x2fdade=ENEMY1_WIDTH,_0x1367c5=ENEMY1_HEIGHT;else _0x4a61c6===ENEMY3_TYPE?(_0x2fdade=BOSS_WIDTH,_0x1367c5=BOSS_HEIGHT):(_0x2fdade=ENEMY_WIDTH,_0x1367c5=ENEMY_HEIGHT);let _0x39b90a=0x0,_0x3837fd=0x0;if(_0x1048f0[0x0]?.['p0'])_0x39b90a=_0x1048f0[0x0]['p0']['x'],_0x3837fd=_0x1048f0[0x0]['p0']['y'];else throw new Error(_0x17aedf(0x1b8)+_0x99d248);(_0x46c09d===0x0||_0x46c09d===0x1)&&(_0x39b90a+=_0x8ffbeb);const _0x3519c7=-_0x4ab645*PATH_T_OFFSET_PER_ENEMY,_0x361c50={'x':_0x39b90a,'y':_0x3837fd,'width':_0x2fdade,'height':_0x1367c5,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x17aedf(0x16b),'gridRow':-0x1,'gridCol':-0x1,'type':_0x4a61c6,'health':_0x20026e,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x99d248,'pathSegmentIndex':0x0,'pathT':_0x3519c7,'squadronId':_0x46c09d,'id':_0x17aedf(0x1ad)+_0x46c09d+'-'+_0x4ab645+'-'+Date[_0x17aedf(0x1b5)]()+'-'+Math[_0x17aedf(0x1a8)]()[_0x17aedf(0x19f)](0x24)[_0x17aedf(0x217)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x17aedf(0x1d5),'hasCapturedShip':_0x4a61c6===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x4a61c6===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x434e22};enemies[_0x17aedf(0x160)](_0x361c50),enemiesSpawnedThisWave++;}catch(_0x3820c1){console[_0x17aedf(0x1a0)](_0x17aedf(0x17c)+_0x46c09d+_0x17aedf(0x134)+_0x4ab645+_0x17aedf(0x124)+_0x99d248+'):',_0x3820c1),enemiesSpawnedThisWave++;}},_0x22ed95);enemySpawnTimeouts[_0x5d60b8(0x160)](_0x307b5c),_0x3ab86a++;});}catch(_0x4fe218){console[_0x5f0088(0x1a0)](_0x5f0088(0x180)+_0x46c09d+':',_0x4fe218),enemiesSpawnedThisWave+=_0x4d7a6d[_0x5f0088(0x181)][_0x5f0088(0x111)];}else _0x4d7a6d?.['enemies']?.[_0x5f0088(0x111)]>0x0&&(enemiesSpawnedThisWave+=_0x4d7a6d['enemies'][_0x5f0088(0x111)]);},_0x2eb0a6);enemySpawnTimeouts['push'](_0xb3c517);});}else console[_0x1f9cb2(0x143)](_0x1f9cb2(0x1d8)),isWaveTransitioning=!![],setTimeout(()=>{const _0x4da02d=_0x1f9cb2;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x4da02d(0x20a)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave==='function'&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x509f6d,_0x3a43b2,_0x475f41){const _0x956c5f=_0x3bd23c;let _0x45b3f1=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x45b3f1=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x45b3f1=playerLives>0x0&&!isShipCaptured;if(!_0x509f6d||isPaused||!isInGameState||!_0x45b3f1||isChallengingStage||isWaveTransitioning)return;const _0xa79b2b=Math[_0x956c5f(0x166)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x3f71f1=0x0;_0x3f71f1<_0xa79b2b;_0x3f71f1++){const _0x4f5858=_0x475f41+_0x3f71f1*ENTRANCE_FIRE_BURST_DELAY_MS,_0x143ec0=setTimeout(()=>{const _0x2c3fa3=_0x956c5f;try{const _0x212383=enemySpawnTimeouts[_0x2c3fa3(0x233)](_0x143ec0);_0x212383>-0x1&&enemySpawnTimeouts[_0x2c3fa3(0x212)](_0x212383,0x1);let _0x56c2aa=![];isTwoPlayerMode&&selectedGameMode===_0x2c3fa3(0x20a)?_0x56c2aa=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x56c2aa=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x56c2aa||isChallengingStage||isWaveTransitioning)return;const _0x41a5a1=enemies['find'](_0x565582=>_0x565582&&_0x565582['id']===_0x509f6d);_0x41a5a1&&_0x41a5a1[_0x2c3fa3(0x1f5)]===_0x3a43b2&&(createBulletSimple(_0x41a5a1)&&(_0x3f71f1===0x0&&playSound('enemyShootSound',![],0.4),_0x41a5a1[_0x2c3fa3(0x1ed)]=Date[_0x2c3fa3(0x1b5)]()));}catch(_0x5daa00){console[_0x2c3fa3(0x1a0)](_0x2c3fa3(0x211)+(_0x3f71f1+0x1)+'/'+_0xa79b2b+')\x20for\x20'+_0x509f6d+':',_0x5daa00);}},_0x4f5858);enemySpawnTimeouts[_0x956c5f(0x160)](_0x143ec0);}}function fireFixedEnemyBurst(_0x47fa9d,_0x1f7fdf,_0xf1127,_0xeb5a4){const _0x37b791=_0x3bd23c;let _0x91f879=![];isTwoPlayerMode&&selectedGameMode===_0x37b791(0x20a)?_0x91f879=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x91f879=playerLives>0x0&&!isShipCaptured;if(!_0x47fa9d||isPaused||!isInGameState||!_0x91f879||isChallengingStage||isWaveTransitioning||_0xeb5a4<=0x0)return;for(let _0x364a7c=0x0;_0x364a7c<_0xeb5a4;_0x364a7c++){const _0x4aa951=_0xf1127+_0x364a7c*ENTRANCE_FIRE_BURST_DELAY_MS,_0x2ec204=setTimeout(()=>{const _0x1a132c=_0x37b791;try{const _0xd802b1=enemySpawnTimeouts[_0x1a132c(0x233)](_0x2ec204);_0xd802b1>-0x1&&enemySpawnTimeouts[_0x1a132c(0x212)](_0xd802b1,0x1);let _0x3785c5=![];isTwoPlayerMode&&selectedGameMode===_0x1a132c(0x20a)?_0x3785c5=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x3785c5=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x3785c5||isChallengingStage||isWaveTransitioning)return;const _0x151e55=enemies[_0x1a132c(0x1df)](_0x4ba033=>_0x4ba033&&_0x4ba033['id']===_0x47fa9d);if(_0x151e55)createBulletSimple(_0x151e55)&&(_0x364a7c===0x0&&playSound(_0x1a132c(0x151),![],0.4),_0x151e55['lastFiredTime']=Date['now']());else{}}catch(_0x3d0438){console[_0x1a132c(0x1a0)](_0x1a132c(0x20b)+(_0x364a7c+0x1)+'/'+_0xeb5a4+_0x1a132c(0x178)+_0x47fa9d+':',_0x3d0438);}},_0x4aa951);enemySpawnTimeouts[_0x37b791(0x160)](_0x2ec204);}}function startFullGridWave(){const _0x56c26b=_0x3bd23c;if(!currentWaveDefinition||currentWaveDefinition[_0x56c26b(0x111)]===0x0||!isFullGridWave){console[_0x56c26b(0x1a0)](_0x56c26b(0x1eb)),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(_0x56c26b(0x163),![],0.4),enemySpawnTimeouts[_0x56c26b(0x1ab)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x195331=0x0;currentWaveDefinition['forEach']((_0xc76090,_0x519653)=>{const _0x3f8dca=_0x56c26b;let _0x43592d=0x0;_0xc76090&&_0xc76090['enemies']&&Array[_0x3f8dca(0x1dc)](_0xc76090[_0x3f8dca(0x181)])?(_0x43592d=_0xc76090['enemies'][_0x3f8dca(0x111)],_0xc76090[_0x3f8dca(0x181)]['forEach']((_0x30e3e2,_0x596891)=>{const _0x1d5013=_0x3f8dca;try{if(!_0x30e3e2||!_0x30e3e2[_0x1d5013(0x131)]||typeof _0x30e3e2[_0x1d5013(0xf5)]===_0x1d5013(0x18f)||typeof _0x30e3e2[_0x1d5013(0x11b)]===_0x1d5013(0x18f)){console[_0x1d5013(0x1a0)](_0x1d5013(0x1c7)+_0x519653+_0x1d5013(0x12c)+_0x596891+_0x1d5013(0xf9));return;}let _0x2f50f7=_0x30e3e2[_0x1d5013(0x131)],_0xd36ed2=_0x2f50f7===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x4dd452,_0x32187c;if(_0x2f50f7===ENEMY1_TYPE)_0x4dd452=ENEMY1_WIDTH,_0x32187c=ENEMY1_HEIGHT;else _0x2f50f7===ENEMY3_TYPE?(_0x4dd452=BOSS_WIDTH,_0x32187c=BOSS_HEIGHT):(_0x4dd452=ENEMY_WIDTH,_0x32187c=ENEMY_HEIGHT);let _0x377137,_0x134938;try{const {x:_0x3d0345,y:_0x544766}=getCurrentGridSlotPosition(_0x30e3e2[_0x1d5013(0xf5)],_0x30e3e2[_0x1d5013(0x11b)],_0x4dd452);_0x377137=_0x3d0345,_0x134938=_0x544766;}catch(_0x311beb){console[_0x1d5013(0x1a0)]('Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20'+_0x30e3e2[_0x1d5013(0x131)]+_0x1d5013(0x115)+_0x30e3e2[_0x1d5013(0xf5)]+','+_0x30e3e2[_0x1d5013(0x11b)]+']',_0x311beb),_0x377137=gameCanvas?.[_0x1d5013(0x117)]/0x2||0xc8,_0x134938=ENEMY_TOP_MARGIN+_0x30e3e2[_0x1d5013(0xf5)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x884d3f={'x':_0x377137,'y':_0x134938,'width':_0x4dd452,'height':_0x32187c,'targetGridX':_0x377137,'targetGridY':_0x134938,'speed':0x0,'state':'in_grid','gridRow':_0x30e3e2[_0x1d5013(0xf5)],'gridCol':_0x30e3e2['gridCol'],'type':_0x2f50f7,'health':_0xd36ed2,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x519653,'squadronEnemyIndex':_0x596891,'id':_0x1d5013(0x1a1)+_0x519653+'-'+_0x596891+'-'+Date[_0x1d5013(0x1b5)]()+'-'+Math[_0x1d5013(0x1a8)]()[_0x1d5013(0x19f)](0x24)[_0x1d5013(0x217)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x2f50f7===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x2f50f7===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies['push'](_0x884d3f),_0x195331++;}catch(_0x1fcb1f){console[_0x1d5013(0x1a0)](_0x1d5013(0x157)+_0x519653+_0x1d5013(0x134)+_0x596891+'):',_0x1fcb1f);}})):console['warn'](_0x3f8dca(0x1ee)+_0x519653+_0x3f8dca(0x17d)),squadronCompletionStatus[_0x519653]={'completed':_0x43592d,'total':_0x43592d};}),totalEnemiesScheduledForWave=_0x195331,enemiesSpawnedThisWave=_0x195331,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0x56c26b(0x223),!![],0.1)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date[_0x56c26b(0x1b5)](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date[_0x56c26b(0x1b5)](),firstEnemyLanded=!![];}function renderGame(){const _0x55731=_0x3bd23c;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx['clearRect'](0x0,0x0,gameCanvas[_0x55731(0x117)],gameCanvas[_0x55731(0x1d4)]);const _0x646ba9=Date['now']();gameCtx['save']();const _0x3bc207=_0x55731(0x1e5),_0x2eb810='red',_0xe12db6=_0x55731(0xfe);let _0x156fa5,_0x347686,_0xbf027b,_0x25b535,_0x483bb0=![],_0xcc54c4=![],_0x506dba=![];if(isShowingResultsScreen){}else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage){}else{if(isShowingPlayerGameOverMessage){}else{if(!isInGameState){}else{_0xbf027b=highScore||0x0;if(!isManualControl){}else{if(isTwoPlayerMode&&selectedGameMode===_0x55731(0x20a)){_0x156fa5=player1Score,_0x347686=player2Score,_0xbf027b=Math[_0x55731(0x193)](highScore,player1Score,player2Score),_0x25b535='1UP',_0x483bb0=!isShowingIntro&&!isPaused&&player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0xcc54c4=!isShowingIntro&&!isPaused&&player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if(player1Score>=_0xbf027b&&player1Score>0x0)_0x506dba=_0x483bb0;if(player2Score>=_0xbf027b&&player2Score>0x0&&player2Score>player1Score)_0x506dba=_0xcc54c4;}else isTwoPlayerMode&&selectedGameMode===_0x55731(0x1d5)?(_0x156fa5=currentPlayer===0x1?score:player1Score,_0x347686=currentPlayer===0x2?score:player2Score,_0xbf027b=Math[_0x55731(0x193)](highScore,player1Score,player2Score,score),_0x25b535=_0x55731(0x191),_0x483bb0=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0xcc54c4=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x506dba=!isPaused&&!isShowingIntro&&score>0x0&&_0xbf027b>0x0&&score>=_0xbf027b):(_0x156fa5=score,_0x347686=0x0,_0x25b535='1UP');}}}}}let _0x1ead57=![];if(_0x506dba){}typeof MARGIN_SIDE!==_0x55731(0x18f)&&typeof MARGIN_TOP!==_0x55731(0x18f)&&typeof SCORE_OFFSET_Y!=='undefined'&&(drawTopUiElement(_0x25b535,_0x156fa5,'left',MARGIN_SIDE,_0x483bb0),drawTopUiElement('HIGH\x20SCORE',_0xbf027b,_0x55731(0x11f),gameCanvas['width']/0x2,_0x1ead57),drawTopUiElement('2UP',_0x347686,_0x55731(0x172),gameCanvas[_0x55731(0x117)]-MARGIN_SIDE,_0xcc54c4));if(typeof shipImage!==_0x55731(0x18f)&&typeof LIFE_ICON_MARGIN_BOTTOM!==_0x55731(0x18f)&&typeof LIFE_ICON_SIZE!==_0x55731(0x18f)&&typeof LIFE_ICON_MARGIN_LEFT!=='undefined'&&typeof LIFE_ICON_SPACING!==_0x55731(0x18f)){if(shipImage[_0x55731(0x1cf)]&&shipImage[_0x55731(0x140)]!==0x0){const _0x232e2e=gameCanvas[_0x55731(0x1d4)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x2df42b=0x0,_0x39d961=0x0;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(player1Lives>0x0)_0x2df42b=Math[_0x55731(0x193)](0x0,player1Lives-0x1);if(player2Lives>0x0)_0x39d961=Math[_0x55731(0x193)](0x0,player2Lives-0x1);}else{if(playerLives>0x0)_0x2df42b=Math[_0x55731(0x193)](0x0,playerLives-0x1);}const _0x187693=0x5;for(let _0x26601a=0x0;_0x26601a<Math[_0x55731(0x129)](_0x2df42b,_0x187693);_0x26601a++){const _0x596a98=LIFE_ICON_MARGIN_LEFT+_0x26601a*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x55731(0x17b)](shipImage,Math[_0x55731(0x166)](_0x596a98),Math[_0x55731(0x166)](_0x232e2e),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}if(isTwoPlayerMode&&selectedGameMode===_0x55731(0x20a)){const _0x3970b6=gameCanvas['width']-LIFE_ICON_MARGIN_RIGHT-Math[_0x55731(0x129)](_0x39d961,_0x187693)*(LIFE_ICON_SIZE+LIFE_ICON_SPACING)+LIFE_ICON_SPACING;for(let _0x27a33f=0x0;_0x27a33f<Math['min'](_0x39d961,_0x187693);_0x27a33f++){const _0x480991=_0x3970b6+_0x27a33f*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x55731(0x17b)](shipImage,Math['round'](_0x480991),Math[_0x55731(0x166)](_0x232e2e),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}}gameCtx[_0x55731(0x17a)](),gameCtx['save']();if(isTwoPlayerMode&&selectedGameMode===_0x55731(0x20a)){if(ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured){let _0x36a615=!![];if(isPlayer1Invincible){const _0x56af6c=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x646ba9%_0x56af6c>=INVINCIBILITY_BLINK_ON_MS)_0x36a615=![];}if(_0x36a615){const _0x33fbbe=ship1['x'],_0xdec472=ship1['y'];typeof shipImage!=='undefined'&&shipImage['complete']?(gameCtx[_0x55731(0x17b)](shipImage,Math[_0x55731(0x166)](_0x33fbbe),Math['round'](_0xdec472),ship1[_0x55731(0x117)],ship1['height']),player1IsDualShipActive&&gameCtx[_0x55731(0x17b)](shipImage,Math['round'](_0x33fbbe+DUAL_SHIP_OFFSET_X),Math[_0x55731(0x166)](_0xdec472),ship1[_0x55731(0x117)],ship1[_0x55731(0x1d4)])):(gameCtx[_0x55731(0x194)]=_0x55731(0x1ea),gameCtx['fillRect'](Math[_0x55731(0x166)](_0x33fbbe),Math['round'](_0xdec472),ship1[_0x55731(0x117)],ship1[_0x55731(0x1d4)]));}}if(ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured){let _0x3bcbb2=!![];if(isPlayer2Invincible){const _0x5ba8d8=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x646ba9%_0x5ba8d8>=INVINCIBILITY_BLINK_ON_MS)_0x3bcbb2=![];}if(_0x3bcbb2){const _0x542491=ship2['x'],_0x215afc=ship2['y'];typeof shipImage!==_0x55731(0x18f)&&shipImage[_0x55731(0x1cf)]?(gameCtx[_0x55731(0x17b)](shipImage,Math['round'](_0x542491),Math['round'](_0x215afc),ship2['width'],ship2[_0x55731(0x1d4)]),player2IsDualShipActive&&gameCtx['drawImage'](shipImage,Math[_0x55731(0x166)](_0x542491+DUAL_SHIP_OFFSET_X),Math[_0x55731(0x166)](_0x215afc),ship2['width'],ship2[_0x55731(0x1d4)])):(gameCtx[_0x55731(0x194)]=_0x55731(0xef),gameCtx[_0x55731(0x19e)](Math[_0x55731(0x166)](_0x542491),Math[_0x55731(0x166)](_0x215afc),ship2[_0x55731(0x117)],ship2[_0x55731(0x1d4)]));}}}else{if(ship&&!isShowingCaptureMessage){let _0x453d56=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x264380=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x646ba9%_0x264380>=INVINCIBILITY_BLINK_ON_MS)_0x453d56=![];}if(_0x453d56){let _0x429bc2=ship['x'],_0x32dc61=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x32dc61&&(_0x429bc2=Math[_0x55731(0x166)](gameCanvas[_0x55731(0x117)]/0x2-ship[_0x55731(0x117)]/0x2));const _0x50dc66=ship['y'];typeof shipImage!==_0x55731(0x18f)&&shipImage[_0x55731(0x1cf)]?(gameCtx[_0x55731(0x17b)](shipImage,Math[_0x55731(0x166)](_0x429bc2),Math[_0x55731(0x166)](_0x50dc66),ship[_0x55731(0x117)],ship[_0x55731(0x1d4)]),isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&gameCtx[_0x55731(0x17b)](shipImage,Math[_0x55731(0x166)](_0x429bc2+DUAL_SHIP_OFFSET_X),Math[_0x55731(0x166)](_0x50dc66),ship[_0x55731(0x117)],ship['height'])):(gameCtx['fillStyle']=_0x55731(0x1ea),gameCtx[_0x55731(0x19e)](Math[_0x55731(0x166)](_0x429bc2),Math['round'](_0x50dc66),ship[_0x55731(0x117)],ship[_0x55731(0x1d4)]));}}}if(fallingShips[_0x55731(0x111)]>0x0&&typeof shipImage!==_0x55731(0x18f)&&shipImage['complete']){}gameCtx[_0x55731(0x17a)]();if(!isInGameState){if(isShowingScoreScreen){}else{gameCtx[_0x55731(0x21b)]();const _0x1443cb=gameCanvas['width'],_0x5cb2d6=gameCanvas[_0x55731(0x1d4)],_0x593327=_0x1443cb/0x2;selectedButtonIndex===-0x1&&(isPlayerSelectMode||isFiringModeSelectMode||isGameModeSelectMode||!isPlayerSelectMode&&!isFiringModeSelectMode&&!isGameModeSelectMode)&&(selectedButtonIndex=0x0);let _0x2a81c3=MENU_LOGO_APPROX_HEIGHT,_0x3c0b08=_0x2a81c3*(logoImage[_0x55731(0x16c)]/logoImage[_0x55731(0x140)]||0x1);typeof logoImage!==_0x55731(0x18f)&&logoImage[_0x55731(0x1cf)]&&logoImage[_0x55731(0x140)]!==0x0&&(_0x2a81c3=logoImage['naturalHeight']*LOGO_SCALE_FACTOR,_0x3c0b08=logoImage[_0x55731(0x16c)]*LOGO_SCALE_FACTOR);const _0x3ed452=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x1774c9=_0x2a81c3+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x3ed452;let _0x4c8afe=(_0x5cb2d6-_0x1774c9)/0x2-0x46;_0x4c8afe+=MENU_GENERAL_Y_OFFSET;const _0x1a9e31=_0x593327-_0x3c0b08/0x2,_0x54b6af=_0x4c8afe+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!=='undefined'&&logoImage['complete']&&logoImage['naturalHeight']!==0x0?gameCtx['drawImage'](logoImage,Math[_0x55731(0x166)](_0x1a9e31),Math[_0x55731(0x166)](_0x54b6af),_0x3c0b08,_0x2a81c3):drawCanvasText(_0x55731(0x173),_0x593327,_0x54b6af+_0x2a81c3/0x2,_0x55731(0x1c2),'grey');if(isGameModeSelectMode)drawCanvasButton(_0x55731(0x1cb),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x55731(0xfd),0x1,selectedButtonIndex===0x1);else{if(isFiringModeSelectMode)drawCanvasButton('EASY',0x0,selectedButtonIndex===0x0),drawCanvasButton('NORMAL',0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0x55731(0x1c0),0x0,selectedButtonIndex===0x0),drawCanvasButton('2\x20PLAYER',0x1,selectedButtonIndex===0x1)):(drawCanvasButton(_0x55731(0x240),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x55731(0x186),0x1,selectedButtonIndex===0x1));}const _0x4a4b5b=getMenuButtonRect(0x1);let _0x21a46c;_0x4a4b5b?_0x21a46c=_0x4a4b5b['y']+_0x4a4b5b[_0x55731(0x1d4)]+MENU_BUTTON_SUBTITLE_V_GAP+_0x3ed452/0x2:_0x21a46c=_0x4c8afe+_0x2a81c3+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x3ed452/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x593327-0x1,Math['round'](_0x21a46c),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,'center',_0x55731(0x237),!![]),gameCtx[_0x55731(0x17a)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0x55731(0x21b)]();let _0x2c264e=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x2c264e&&(bullets[_0x55731(0x1ab)](_0x6e1225=>{}),enemyBullets[_0x55731(0x1ab)](_0x2c6f50=>{}));enemies[_0x55731(0x1ab)](_0x468598=>{});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x422403=![];const _0x3a1edb=gameCanvas[_0x55731(0x1d4)]/0x2;if(isPaused){}else{if(isShowingCaptureMessage){}}gameCtx[_0x55731(0x17a)]();}else{if(isShowingPlayerGameOverMessage){}else{if(gameOverSequenceStartTime>0x0){}}}}}catch(_0xc86add){console[_0x55731(0x1a0)](_0x55731(0x138),_0xc86add,_0xc86add[_0x55731(0x19a)]);}}function handleEnemyHit(_0x25b1f7,_0x4a4d99=null){const _0x33cf02=_0x3bd23c;if(!_0x25b1f7)return{'destroyed':![],'pointsAwarded':0x0};const _0x2895f1=Date['now']();let _0x44bdfd=0x0,_0x4b6615=![],_0x32672c=_0x25b1f7['isDamaged'],_0x1d040f=null,_0x7d462a=0x1;const _0x355864=_0x25b1f7[_0x33cf02(0x131)]===ENEMY3_TYPE?BOSS_WIDTH:_0x25b1f7[_0x33cf02(0x131)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x284dd7=_0x25b1f7[_0x33cf02(0x131)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x25b1f7[_0x33cf02(0x131)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x12082a=_0x25b1f7[_0x33cf02(0x131)]===ENEMY3_TYPE&&_0x25b1f7[_0x33cf02(0x139)],_0x167fcd=_0x25b1f7[_0x33cf02(0x131)]===ENEMY3_TYPE&&_0x25b1f7[_0x33cf02(0x130)];let _0x729baa=![],_0x383736=null;if(_0x12082a){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x25b1f7['id'])_0x729baa=!![],_0x383736=_0x33cf02(0x18d);else isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x25b1f7['id']&&(_0x729baa=!![],_0x383736=_0x33cf02(0x23c));}else!isTwoPlayerMode&&isShipCaptured&&capturedBossIdWithMessage===_0x25b1f7['id']&&(_0x729baa=!![]);}const _0x4ae870=_0x25b1f7['x']+_0x355864/0x2,_0x52cc40=_0x25b1f7['y']+_0x284dd7*0.2;createHitSparks(_0x4ae870,_0x52cc40),_0x25b1f7[_0x33cf02(0x23e)]--;_0x25b1f7[_0x33cf02(0x131)]===ENEMY3_TYPE&&(_0x25b1f7[_0x33cf02(0x13d)]=_0x25b1f7['health']<ENEMY3_MAX_HITS);if(_0x25b1f7[_0x33cf02(0x23e)]<=0x0){_0x4b6615=!![];isChallengingStage&&challengingStageEnemiesHit++;if(_0x12082a&&_0x167fcd){let _0x383b98=null;if(_0x729baa&&_0x383736)_0x383b98=_0x383736;else{let _0x35ef8c=![];if(isCoopAIDemoActive){if(_0x4a4d99==='player1'&&player1IsDualShipActive)_0x383b98=_0x33cf02(0x23c),_0x35ef8c=!![];else _0x4a4d99==='player2'&&player2IsDualShipActive&&(_0x383b98=_0x33cf02(0x18d),_0x35ef8c=!![]);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x33cf02(0x220)){if(_0x4a4d99===_0x33cf02(0x101)&&player2IsDualShipActive)_0x383b98=_0x33cf02(0x18d),_0x35ef8c=!![];else _0x4a4d99===_0x33cf02(0x18d)&&player1IsDualShipActive&&(_0x383b98=_0x33cf02(0x101),_0x35ef8c=!![]);}}!_0x35ef8c&&(_0x383b98=_0x4a4d99);}_0x383b98===null&&_0x4a4d99&&(_0x383b98=_0x4a4d99);if(_0x25b1f7[_0x33cf02(0x130)]){const _0x42fb63=_0x25b1f7[_0x33cf02(0x130)][_0x33cf02(0x117)],_0x24d4b5=_0x25b1f7[_0x33cf02(0x130)][_0x33cf02(0x1d4)],_0x4d94d0=_0x25b1f7['x']+(_0x355864-_0x42fb63)/0x2+CAPTURED_SHIP_OFFSET_X,_0x497904=_0x25b1f7['y']+CAPTURED_SHIP_OFFSET_Y,_0x558c2b=fallingShips[_0x33cf02(0x158)](_0x32a67c=>Math[_0x33cf02(0xf4)](_0x32a67c['x']-_0x4d94d0)<0x1&&Math['abs'](_0x32a67c['y']-_0x497904)<0x1);!_0x558c2b&&fallingShips[_0x33cf02(0x160)]({'x':_0x4d94d0,'y':_0x497904,'width':_0x42fb63,'height':_0x24d4b5,'creationTime':_0x2895f1,'tintProgress':0x1,'rotation':0x0,'rotationDirection':Math[_0x33cf02(0x1a8)]()<0.5?-0x1:0x1,'totalRotation':0x0,'rotationCompleted':![],'targetPlayerId':_0x383b98});}else console['error'](_0x33cf02(0xff));_0x25b1f7['hasCapturedShip']=![],_0x25b1f7['capturedShipDimensions']=null;}else _0x12082a&&!_0x167fcd&&(console['error'](_0x33cf02(0x135)+_0x25b1f7['id']+_0x33cf02(0x145)),_0x25b1f7[_0x33cf02(0x139)]=![],_0x25b1f7[_0x33cf02(0x130)]=null);if(isChallengingStage){let _0x5d20c6=0x64;const _0x31c3aa=csLastHitTime;csLastHitTime=_0x2895f1,csLastChainHitPosition={'x':_0x25b1f7['x'],'y':_0x25b1f7['y']},csCurrentChainHits>0x0&&_0x2895f1-_0x31c3aa<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x5d20c6*=0x2),_0x44bdfd=_0x5d20c6,csCurrentChainScore+=_0x44bdfd,scoreEarnedThisCS+=_0x44bdfd,_0x1d040f='explosionSound',_0x7d462a=0.4;}else{if(_0x25b1f7[_0x33cf02(0x1f5)]===_0x33cf02(0x1fe))_0x44bdfd=_0x25b1f7[_0x33cf02(0x131)]===ENEMY1_TYPE?0x32:_0x25b1f7[_0x33cf02(0x131)]===ENEMY2_TYPE?0x50:0x0,_0x25b1f7[_0x33cf02(0x131)]===ENEMY3_TYPE&&(_0x44bdfd=0x96),_0x1d040f=_0x33cf02(0x159),_0x7d462a=0.4;else{_0x44bdfd=_0x25b1f7[_0x33cf02(0x131)]===ENEMY1_TYPE?0x64:_0x25b1f7['type']===ENEMY2_TYPE?0xa0:0x0;if(_0x25b1f7[_0x33cf02(0x131)]===ENEMY3_TYPE){if(_0x12082a){const _0x321370=[0x3e8,0x5dc,0x7d0,0xbb8];_0x44bdfd=_0x321370[Math[_0x33cf02(0x15b)](Math[_0x33cf02(0x1a8)]()*_0x321370[_0x33cf02(0x111)])],_0x1d040f=_0x33cf02(0x125),_0x7d462a=0.4;}else _0x32672c?(_0x44bdfd=0x190,_0x1d040f=_0x33cf02(0x125),_0x7d462a=0.4):(_0x44bdfd=0x0,console['warn'](_0x33cf02(0x16f)+_0x44bdfd+_0x33cf02(0x10a)+(_0x25b1f7[_0x33cf02(0x23e)]+0x1)),_0x1d040f=_0x33cf02(0x159),_0x7d462a=0.4);}else _0x1d040f=_0x33cf02(0x159),_0x7d462a=0.4;if(_0x4b6615&&_0x44bdfd>0x0){const _0x124b3d=normalWaveLastHitTime;normalWaveLastHitTime=_0x2895f1,normalWaveLastChainHitPosition={'x':_0x25b1f7['x'],'y':_0x25b1f7['y']};normalWaveLastChainHitPosition&&_0x2895f1-_0x124b3d<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x417e4d=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x58b28a=Math['min'](_0x417e4d[_0x33cf02(0x111)]-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x17a31c=_0x417e4d[_0x58b28a];_0x44bdfd+=_0x17a31c,normalWaveCurrentChainScore+=_0x17a31c;}}}}if(_0x44bdfd>0x0){let _0x4e4f2c=null,_0xa798b8=0x0,_0x333fbb=_0x4a4d99,_0x529bd2=highScore,_0x28d411=highScoreHolderId,_0x513b5e=![],_0x13e8f6=![];if(isCoopAIDemoActive){if(_0x4a4d99==='player1'){player1Score+=_0x44bdfd,_0xa798b8=player1Score,_0x4e4f2c=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x33cf02(0x18d),_0x513b5e=!![],_0x13e8f6=!![];else player1Score===highScore&&highScoreHolderId!==_0x33cf02(0x18d)&&highScore>0x0&&(highScoreHolderId=_0x33cf02(0x18d),_0x513b5e=!![],_0x13e8f6=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x4a4d99==='player2'){player2Score+=_0x44bdfd,_0xa798b8=player2Score,_0x4e4f2c=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x33cf02(0x23c),_0x513b5e=!![],_0x13e8f6=!![];else player2Score===highScore&&highScoreHolderId!=='player2'&&highScore>0x0&&(highScoreHolderId='player2',_0x513b5e=!![],_0x13e8f6=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x44bdfd,_0xa798b8=player1Score,_0x4e4f2c=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId=_0x33cf02(0x18d),_0x13e8f6=!![]),checkAndAwardExtraLife(0x1);}}else{if(!isManualControl){score+=_0x44bdfd,player1Score=score,_0xa798b8=score,_0x333fbb=_0x33cf02(0x18d),_0x4e4f2c=()=>player1EnemiesHit++;if(score>highScore)highScore=score,highScoreHolderId='player1',_0x513b5e=!![],_0x13e8f6=!![];else score===highScore&&highScoreHolderId!==_0x33cf02(0x18d)&&highScore>0x0&&(highScoreHolderId=_0x33cf02(0x18d),_0x513b5e=!![],_0x13e8f6=!![]);checkAndAwardExtraLife(0x1);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x33cf02(0x220)){if(_0x4a4d99===_0x33cf02(0x18d)){player1Score+=_0x44bdfd,_0xa798b8=player1Score,_0x4e4f2c=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId='player1',_0x513b5e=!![],_0x13e8f6=!![];else player1Score===highScore&&highScoreHolderId!==_0x33cf02(0x18d)&&highScore>0x0&&(highScoreHolderId=_0x33cf02(0x18d),_0x513b5e=!![],_0x13e8f6=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x4a4d99===_0x33cf02(0x101)){player2Score+=_0x44bdfd,_0xa798b8=player2Score,_0x333fbb=_0x33cf02(0x101),_0x4e4f2c=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x33cf02(0x101),_0x513b5e=!![],_0x13e8f6=!![];else player2Score===highScore&&highScoreHolderId!=='ai_p2'&&highScore>0x0&&(highScoreHolderId=_0x33cf02(0x101),_0x513b5e=!![],_0x13e8f6=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x44bdfd,_0xa798b8=player1Score,_0x4e4f2c=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId='player1',_0x13e8f6=!![]),checkAndAwardExtraLife(0x1);}}else{if(isTwoPlayerMode&&selectedGameMode===_0x33cf02(0x20a)){if(_0x4a4d99===_0x33cf02(0x18d)){player1Score+=_0x44bdfd,_0xa798b8=player1Score,_0x4e4f2c=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x33cf02(0x18d),_0x513b5e=!![],_0x13e8f6=!![];else player1Score===highScore&&highScoreHolderId!==_0x33cf02(0x18d)&&highScore>0x0&&(highScoreHolderId=_0x33cf02(0x18d),_0x513b5e=!![],_0x13e8f6=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x4a4d99===_0x33cf02(0x23c)){player2Score+=_0x44bdfd,_0xa798b8=player2Score,_0x4e4f2c=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x33cf02(0x23c),_0x513b5e=!![],_0x13e8f6=!![];else player2Score===highScore&&highScoreHolderId!=='player2'&&highScore>0x0&&(highScoreHolderId=_0x33cf02(0x23c),_0x513b5e=!![],_0x13e8f6=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x44bdfd,_0xa798b8=player1Score,_0x4e4f2c=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId=_0x33cf02(0x18d),_0x13e8f6=!![]),checkAndAwardExtraLife(0x1);}}else{score+=_0x44bdfd,_0xa798b8=score;currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,_0x333fbb=_0x33cf02(0x18d),_0x4e4f2c=()=>player1EnemiesHit++):(player2Score=score,_0x333fbb=isPlayerTwoAI?_0x33cf02(0x101):'player2',_0x4e4f2c=()=>player2EnemiesHit++);if(score>highScore)highScore=score,highScoreHolderId=_0x333fbb,_0x513b5e=!![],_0x13e8f6=!![];else score===highScore&&highScoreHolderId!==_0x333fbb&&highScore>0x0&&(highScoreHolderId=_0x333fbb,_0x513b5e=!![],_0x13e8f6=!![]);checkAndAwardExtraLife(currentPlayer);}}}}if(_0x513b5e||_0x13e8f6&&_0x529bd2>0x0&&highScoreHolderId!==_0x28d411){let _0x4f4eb4=![];if(highScoreHolderId===_0x33cf02(0x18d))_0x4f4eb4=player1TriggeredHighScoreSound;else{if(highScoreHolderId==='player2'||highScoreHolderId==='ai_p2')_0x4f4eb4=player2TriggeredHighScoreSound;}if(!_0x4f4eb4||highScoreHolderId!==_0x28d411&&_0x529bd2>0x0){playSound(_0x33cf02(0x1bf),![],0.2);if(highScoreHolderId===_0x33cf02(0x18d))player1TriggeredHighScoreSound=!![];else{if(highScoreHolderId===_0x33cf02(0x23c)||highScoreHolderId===_0x33cf02(0x101))player2TriggeredHighScoreSound=!![];}}}if(_0x13e8f6&&highScoreHolderId!==_0x28d411&&_0x529bd2>0x0){if(_0x28d411===_0x33cf02(0x18d))player1TriggeredHighScoreSound=![];else{if(_0x28d411===_0x33cf02(0x23c)||_0x28d411===_0x33cf02(0x101))player2TriggeredHighScoreSound=![];}}_0x4e4f2c&&!isChallengingStage&&_0x4e4f2c();const _0x544454=_0x25b1f7['state']==='in_grid'||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x33cf02(0x160)]({'text':_0x44bdfd[_0x33cf02(0x19f)](),'x':_0x25b1f7['x']+_0x355864/0x2,'y':_0x25b1f7['y'],'color':_0x544454,'creationTime':_0x2895f1,'displayStartTime':_0x2895f1+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x25b1f7['x']+_0x355864/0x2,_0x25b1f7['y']+_0x284dd7/0x2);_0x25b1f7['id']===capturingBossId&&stopSound('captureSound');if(_0x25b1f7[_0x33cf02(0x1f5)]===_0x33cf02(0x219)||_0x25b1f7['state']==='following_entrance_path'||_0x25b1f7[_0x33cf02(0x1f5)]===_0x33cf02(0xf1)||_0x25b1f7[_0x33cf02(0x1f5)]===_0x33cf02(0x16b)||_0x25b1f7['state']==='returning'||_0x25b1f7[_0x33cf02(0x1f5)]===_0x33cf02(0x206)){if(_0x25b1f7['type']===ENEMY3_TYPE)stopSound(_0x33cf02(0x21e));else stopSound(_0x33cf02(0x18e));}}else{_0x4b6615=![];if(_0x25b1f7[_0x33cf02(0x131)]===ENEMY3_TYPE)_0x1d040f='bossHit1Sound',_0x7d462a=0.6,_0x44bdfd=0x0;else{_0x44bdfd=0x0;if(_0x25b1f7[_0x33cf02(0x131)]===ENEMY1_TYPE)_0x1d040f=_0x33cf02(0x210),_0x7d462a=0.3;else _0x25b1f7[_0x33cf02(0x131)]===ENEMY2_TYPE&&(_0x1d040f=_0x33cf02(0x1e1),_0x7d462a=0.3);}}return _0x1d040f&&playSound(_0x1d040f,![],_0x7d462a),{'destroyed':_0x4b6615,'pointsAwarded':_0x44bdfd};}function createHitSparks(_0x3b6a00,_0x5b5a73){const _0x3b831d=_0x3bd23c;if(!gameCtx)return;const _0x5c7271=Date[_0x3b831d(0x1b5)]();for(let _0x1e84c1=0x0;_0x1e84c1<HIT_SPARK_COUNT;_0x1e84c1++){const _0x8af5e4=Math[_0x3b831d(0x1a8)]()*Math['PI']*0x2,_0x1a7470=HIT_SPARK_SPEED*(0.7+Math[_0x3b831d(0x1a8)]()*0.6),_0x490ec2=HIT_SPARK_LIFETIME*(0.8+Math[_0x3b831d(0x1a8)]()*0.4);hitSparks[_0x3b831d(0x160)]({'x':_0x3b6a00,'y':_0x5b5a73,'vx':Math['cos'](_0x8af5e4)*_0x1a7470,'vy':Math[_0x3b831d(0x14d)](_0x8af5e4)*_0x1a7470,'creationTime':_0x5c7271,'lifetime':_0x490ec2,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x1c4efd=_0x3bd23c,_0x19fc5e=Date[_0x1c4efd(0x1b5)]();for(let _0x597b8d=hitSparks[_0x1c4efd(0x111)]-0x1;_0x597b8d>=0x0;_0x597b8d--){const _0x2a4b32=hitSparks[_0x597b8d],_0x3d7413=_0x19fc5e-_0x2a4b32['creationTime'];_0x3d7413>=_0x2a4b32[_0x1c4efd(0x1d1)]?hitSparks[_0x1c4efd(0x212)](_0x597b8d,0x1):(_0x2a4b32['vy']+=HIT_SPARK_GRAVITY,_0x2a4b32['x']+=_0x2a4b32['vx'],_0x2a4b32['y']+=_0x2a4b32['vy'],_0x2a4b32[_0x1c4efd(0x216)]=Math[_0x1c4efd(0x193)](0x0,0x1-_0x3d7413*HIT_SPARK_FADE_SPEED));}}function moveEntities(){const _0x1bff33=_0x3bd23c;try{if(isPaused)return;const _0x21a3fa=Date[_0x1bff33(0x1b5)]();}catch(_0x3f91d5){console[_0x1bff33(0x1a0)](_0x1bff33(0x20d),_0x3f91d5,_0x3f91d5[_0x1bff33(0x19a)]),isGridSoundPlaying=![],stopSound(_0x1bff33(0x223)),isEntrancePhaseActive=![],stopSound(_0x1bff33(0x163)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound('captureSound'),stopSound(_0x1bff33(0x175)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState==='function')showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x1bff33(0x1f6));}}function switchPlayerTurn(){const _0xfc23f6=_0x3bd23c;if(!isTwoPlayerMode||selectedGameMode==='coop')return![];currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive,player1MaxLevelReached=Math[_0xfc23f6(0x193)](player1MaxLevelReached,level)):(player2Score=score,player2IsDualShipActive=isDualShipActive,player2MaxLevelReached=Math[_0xfc23f6(0x193)](player2MaxLevelReached,level));const _0x27aa08=currentPlayer===0x1?0x2:0x1,_0x2d15ac=_0x27aa08===0x1?player1Lives:player2Lives;if(_0x2d15ac<=0x0){const _0x14ca3b=currentPlayer===0x1?player1Lives:player2Lives;return _0x14ca3b<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x27aa08,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0x55148d=null,_0x4fb0cf=![]){const _0x27d020=_0x3bd23c,_0x4b0214=Date[_0x27d020(0x1b5)](),_0x3d7ada=isTwoPlayerMode&&selectedGameMode===_0x27d020(0x20a)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x4b0214<coopPlayersReadyStartTime+0x1f40;if(_0x3d7ada)return![];let _0x1ddb8e=![],_0xbd54c=null,_0x143c8c=![],_0x55a5b7=0x0,_0x4f4174=_0xb46e5b=>{},_0x2193fe=_0x2cd6ea=>{},_0xbd2f0=![],_0x14fbab=()=>![],_0x3b6254=_0x2c1012=>{},_0x29b870=_0x55148d;const _0x1cadd6=!isPaused&&isInGameState&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!showReadyMessage&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x27d020(0x20a)&&(_0x55148d==='player1'&&isPlayer1ShowingGameOverMessage||_0x55148d===_0x27d020(0x23c)&&isPlayer2ShowingGameOverMessage));if(!_0x1cadd6)return![];if(_0x29b870){let _0x3a9fec=![];if(_0x29b870==='ai'&&isShipCaptured)_0x3a9fec=!![];else{if(_0x29b870==='ai_p2'&&isTwoPlayerMode&&selectedGameMode===_0x27d020(0x1d5)&&isShipCaptured)_0x3a9fec=!![];else{if(_0x29b870===_0x27d020(0x18d)&&isCoopAIDemoActive&&isPlayer1ShipCaptured)_0x3a9fec=!![];else{if(_0x29b870===_0x27d020(0x23c)&&isCoopAIDemoActive&&isPlayer2ShipCaptured)_0x3a9fec=!![];else{if(_0x29b870===_0x27d020(0x101)&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x27d020(0x220)&&isPlayer2ShipCaptured)_0x3a9fec=!![];}}}}if(_0x3a9fec)return![];}if(isTwoPlayerMode&&selectedGameMode===_0x27d020(0x20a)){if(_0x55148d===_0x27d020(0x18d)&&ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1NeedsRespawnAfterCapture)(!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer1ShipCaptured)&&(_0xbd54c=ship1,_0x143c8c=player1IsDualShipActive,_0x55a5b7=player1LastShotTime,_0x4f4174=_0x3e2987=>{player1LastShotTime=_0x3e2987;},_0x2193fe=_0x500816=>{player1ShotsFired+=_0x500816;},_0xbd2f0=selectedFiringMode===_0x27d020(0x192),_0x14fbab=()=>p1JustFiredSingle,_0x3b6254=_0x4152c9=>{p1JustFiredSingle=_0x4152c9;},_0x1ddb8e=!![]);else _0x55148d==='player2'&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2NeedsRespawnAfterCapture&&((!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer2ShipCaptured)&&(_0xbd54c=ship2,_0x143c8c=player2IsDualShipActive,_0x55a5b7=player2LastShotTime,_0x4f4174=_0x456eb1=>{player2LastShotTime=_0x456eb1;},_0x2193fe=_0x3b68d3=>{player2ShotsFired+=_0x3b68d3;},isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x27d020(0x220)?_0xbd2f0=![]:(_0xbd2f0=selectedFiringMode===_0x27d020(0x192),_0x14fbab=()=>p2JustFiredSingle,_0x3b6254=_0x23451d=>{p2JustFiredSingle=_0x23451d;}),_0x1ddb8e=!![]));}else{if(ship&&playerLives>0x0&&!isShipCaptured){_0xbd54c=ship,_0x143c8c=isDualShipActive;if(isTwoPlayerMode&&selectedGameMode===_0x27d020(0x1d5)){if(currentPlayer===0x1){_0x55a5b7=player1LastShotTime,_0x4f4174=_0x14c16b=>{player1LastShotTime=_0x14c16b;},_0x2193fe=_0x4297d2=>{player1ShotsFired+=_0x4297d2;},_0xbd2f0=selectedFiringMode===_0x27d020(0x192),_0x14fbab=()=>p1JustFiredSingle,_0x3b6254=_0x534d68=>{p1JustFiredSingle=_0x534d68;};if(!_0x29b870)_0x29b870='player1';}else{_0x55a5b7=player2LastShotTime,_0x4f4174=_0x17be78=>{player2LastShotTime=_0x17be78;},_0x2193fe=_0x25bfaf=>{player2ShotsFired+=_0x25bfaf;};if(isPlayerTwoAI){_0xbd2f0=![];if(!_0x29b870)_0x29b870='ai_p2';}else{_0xbd2f0=selectedFiringMode==='single';connectedGamepadIndexP2===null&&connectedGamepadIndex!==null?(_0x14fbab=()=>p1JustFiredSingle,_0x3b6254=_0x3add68=>{p1JustFiredSingle=_0x3add68;}):(_0x14fbab=()=>p2JustFiredSingle,_0x3b6254=_0x5b7854=>{p2JustFiredSingle=_0x5b7854;});if(!_0x29b870)_0x29b870='player2';}}}else{_0x55a5b7=player1LastShotTime,_0x4f4174=_0x327248=>{player1LastShotTime=_0x327248;},_0x2193fe=_0x2ac8f0=>{player1ShotsFired+=_0x2ac8f0;},_0xbd2f0=selectedFiringMode===_0x27d020(0x192),_0x14fbab=()=>p1JustFiredSingle,_0x3b6254=_0x564668=>{p1JustFiredSingle=_0x564668;};if(!_0x29b870)_0x29b870=_0x27d020(0x18d);}_0x1ddb8e=!![];}}_0x55148d===null&&!isManualControl&&!isCoopAIDemoActive&&ship&&playerLives>0x0&&!isShipCaptured&&!isShowingCaptureMessage&&(_0xbd54c=ship,_0x143c8c=isDualShipActive,_0x55a5b7=aiLastShotTime,_0x4f4174=_0xb20d43=>{aiLastShotTime=_0xb20d43;},_0x2193fe=_0x2855a8=>{player1ShotsFired+=_0x2855a8;},_0xbd2f0=![],_0x1ddb8e=!![],_0x29b870='ai');if(!_0x1ddb8e||!_0xbd54c)return![];if(_0xbd2f0){if(_0x4fb0cf){if(_0x4b0214-_0x55a5b7<SHOOT_COOLDOWN)return![];}else{let _0xc409f3=![];if(_0x29b870==='player1'||!isTwoPlayerMode&&_0x29b870===_0x27d020(0x18d))_0xc409f3=keyboardP1ShootDown||connectedGamepadIndex!==null&&navigator['getGamepads']()?.[connectedGamepadIndex]?.[_0x27d020(0x201)][PS5_BUTTON_CROSS]?.['pressed'];else{if(_0x29b870===_0x27d020(0x23c)&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)_0xc409f3=keyboardP2ShootDown||connectedGamepadIndexP2!==null&&navigator[_0x27d020(0x197)]()?.[connectedGamepadIndexP2]?.[_0x27d020(0x201)][PS5_BUTTON_CROSS]?.[_0x27d020(0x241)];else connectedGamepadIndex!==null?_0xc409f3=keyboardP2ShootDown||connectedGamepadIndex!==null&&navigator[_0x27d020(0x197)]()?.[connectedGamepadIndex]?.[_0x27d020(0x201)][PS5_BUTTON_CROSS]?.[_0x27d020(0x241)]:_0xc409f3=keyboardP2ShootDown;}}if(_0x14fbab()){if(_0xc409f3)return![];else _0x3b6254(![]);}if(_0x4b0214-_0x55a5b7<SHOOT_COOLDOWN)return![];}}else{if(_0x4b0214-_0x55a5b7<SHOOT_COOLDOWN)return![];}try{const _0x55b1b5=_0xbd54c['y'];let _0x541acb=0x0;if(_0x143c8c){const _0x480d11=_0xbd54c['x']+_0xbd54c['width']/0x2,_0xf7269b=_0xbd54c['x']+DUAL_SHIP_OFFSET_X+_0xbd54c[_0x27d020(0x117)]/0x2,_0x781a79=_0x480d11-PLAYER_BULLET_WIDTH/0x2,_0x52af6e=_0xf7269b-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x781a79,'y':_0x55b1b5,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x29b870}),bullets[_0x27d020(0x160)]({'x':_0x52af6e,'y':_0x55b1b5,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x29b870}),_0x541acb=0x2;}else{const _0xe18cd4=_0xbd54c['x']+_0xbd54c['width']/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x27d020(0x160)]({'x':_0xe18cd4,'y':_0x55b1b5,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x29b870}),_0x541acb=0x1;}if(_0xbd2f0&&!_0x4fb0cf)_0x3b6254(!![]);return playSound(_0x27d020(0x14e),![],0.4),_0x2193fe(_0x541acb),_0x4f4174(_0x4b0214),!![];}catch(_0x22a885){return console['error'](_0x27d020(0x1f1),_0x22a885),![];}}function handlePlayerInput(){const _0x3edf2e=_0x3bd23c;try{const _0x153456=Date[_0x3edf2e(0x1b5)](),_0x15f53f=isTwoPlayerMode&&selectedGameMode==='coop'&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x153456<coopPlayersReadyStartTime+0x1f40;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedGameMode===_0x3edf2e(0x1d5)&&currentPlayer===0x2&&!isManualControl){isCoopAIDemoActive&&(leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![]);return;}let _0x1f3d11=isPaused||!isManualControl||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isTwoPlayerMode&&selectedGameMode===_0x3edf2e(0x20a)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage);if(_0x1f3d11){keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![];return;}let _0x496b03=0x0;if(isTouchActiveGame&&gameCanvas&&gameCanvas[_0x3edf2e(0x117)]>0x0){const _0x1ca904=gameCanvas[_0x3edf2e(0x18c)](),_0x2f0042=gameCanvas[_0x3edf2e(0x117)]/_0x1ca904['width'];_0x496b03=(touchCurrentX-_0x1ca904[_0x3edf2e(0x100)])*_0x2f0042;}let _0x257382=![],_0x2e82a3=![],_0x53042c=![],_0x53ad72=![],_0x5a8252=![],_0x21f928=![];if(connectedGamepadIndex!==null){const _0x849946=navigator[_0x3edf2e(0x197)]();if(_0x849946?.[connectedGamepadIndex]){const _0x144853=_0x849946[connectedGamepadIndex],_0x14bb8f=processSingleController(_0x144853,previousGameButtonStates);_0x257382=_0x14bb8f[_0x3edf2e(0x100)],_0x2e82a3=_0x14bb8f['right'],_0x53042c=_0x14bb8f[_0x3edf2e(0x1d7)],previousGameButtonStates=_0x14bb8f[_0x3edf2e(0x148)][_0x3edf2e(0xfb)]();if(_0x14bb8f['pause']&&!isShowingCaptureMessage){togglePause();return;}if(_0x14bb8f[_0x3edf2e(0x120)]&&!isShowingCaptureMessage){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x3edf2e(0x111)]>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates[_0x3edf2e(0x111)]>0x0)previousGameButtonStates=[];}if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3edf2e(0x220))){if(isTwoPlayerMode&&connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex){const _0x6d3323=navigator[_0x3edf2e(0x197)]();if(_0x6d3323?.[connectedGamepadIndexP2]){const _0xa97f9f=_0x6d3323[connectedGamepadIndexP2],_0x243e3a=processSingleController(_0xa97f9f,previousGameButtonStatesP2);_0x53ad72=_0x243e3a[_0x3edf2e(0x100)],_0x5a8252=_0x243e3a[_0x3edf2e(0x172)],_0x21f928=_0x243e3a[_0x3edf2e(0x1d7)],previousGameButtonStatesP2=_0x243e3a[_0x3edf2e(0x148)][_0x3edf2e(0xfb)]();}else{if(previousGameButtonStatesP2[_0x3edf2e(0x111)]>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2[_0x3edf2e(0x111)]>0x0)previousGameButtonStatesP2=[];}}const _0x52fa3b=p1FireInputWasDown;p1FireInputWasDown=keyboardP1ShootDown||_0x53042c;let _0x36fa47=![];if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3edf2e(0x220))){_0x36fa47=p2FireInputWasDown;if(isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x2&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)p2FireInputWasDown=keyboardP2ShootDown||_0x21f928;else connectedGamepadIndex!==null?p2FireInputWasDown=keyboardP2ShootDown||_0x53042c:p2FireInputWasDown=keyboardP2ShootDown;}else p2FireInputWasDown=keyboardP2ShootDown||_0x21f928;}else p2FireInputWasDown=![];if(selectedFiringMode===_0x3edf2e(0x192)){if(isTwoPlayerMode&&selectedGameMode===_0x3edf2e(0x20a)){if(!isTouchActiveGame){if(_0x52fa3b&&!p1FireInputWasDown)p1JustFiredSingle=![];if(!isPlayerTwoAI&&_0x36fa47&&!p2FireInputWasDown)p2JustFiredSingle=![];}}else{if(isTwoPlayerMode&&selectedGameMode===_0x3edf2e(0x1d5)){if(!isTouchActiveGame){if(currentPlayer===0x1&&_0x52fa3b&&!p1FireInputWasDown)p1JustFiredSingle=![];else{if(currentPlayer===0x2&&!isPlayerTwoAI){let _0x52d3eb=connectedGamepadIndexP2===null&&connectedGamepadIndex!==null,_0x4f3075=connectedGamepadIndexP2===null&&connectedGamepadIndex!==null;_0x52d3eb&&_0x4f3075?_0x52fa3b&&!p1FireInputWasDown&&(p1JustFiredSingle=![]):_0x36fa47&&!p2FireInputWasDown&&(p2JustFiredSingle=![]);}}}}else{if(!isTouchActiveGame){if(_0x52fa3b&&!p1FireInputWasDown)p1JustFiredSingle=![];}}}}leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![];let _0x2d5e30=![];if(isTouchActiveGame&&gameCanvas){if(isTwoPlayerMode&&selectedGameMode===_0x3edf2e(0x20a)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x53bd35=ship1[_0x3edf2e(0x117)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x4be63c=_0x496b03-_0x53bd35/0x2;_0x4be63c=Math['max'](0x0,Math['min'](gameCanvas[_0x3edf2e(0x117)]-_0x53bd35,_0x4be63c)),ship1['x']=_0x4be63c,ship1[_0x3edf2e(0x200)]=_0x4be63c,_0x2d5e30=!![];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1)){const _0x24cb13=ship[_0x3edf2e(0x117)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x3f7f88=_0x496b03-_0x24cb13/0x2;_0x3f7f88=Math[_0x3edf2e(0x193)](0x0,Math[_0x3edf2e(0x129)](gameCanvas['width']-_0x24cb13,_0x3f7f88)),ship['x']=_0x3f7f88,ship[_0x3edf2e(0x200)]=_0x3f7f88,_0x2d5e30=!![];}}}if(isTwoPlayerMode&&selectedGameMode===_0x3edf2e(0x20a)){if(!_0x2d5e30){const _0x3e3a25=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;_0x3e3a25&&(leftPressed=keyboardP1LeftDown||_0x257382,rightPressed=keyboardP1RightDown||_0x2e82a3);}if(!isPlayerTwoAI){const _0x249c02=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;_0x249c02&&(p2LeftPressed=keyboardP2LeftDown||_0x53ad72,p2RightPressed=keyboardP2RightDown||_0x5a8252);}}else{if(!_0x2d5e30){const _0xc9c144=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0xc9c144){if(currentPlayer===0x1||!isTwoPlayerMode)leftPressed=keyboardP1LeftDown||_0x257382,rightPressed=keyboardP1RightDown||_0x2e82a3;else{if(currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode==='normal'){if(connectedGamepadIndexP2!==null)leftPressed=keyboardP2LeftDown||_0x53ad72,rightPressed=keyboardP2RightDown||_0x5a8252;else connectedGamepadIndex!==null?(leftPressed=keyboardP2LeftDown||_0x257382,rightPressed=keyboardP2RightDown||_0x2e82a3):(leftPressed=keyboardP2LeftDown,rightPressed=keyboardP2RightDown);}}}}}if(isTwoPlayerMode&&selectedGameMode==='coop'){const _0x9c6207=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture&&!_0x15f53f;if(_0x9c6207){let _0x5f4d9b=![];if(isTouchActiveGame&&selectedFiringMode==='rapid'){if(selectedOnePlayerGameVariant==='1P_VS_AI_COOP')_0x5f4d9b=!![];else!isPlayerTwoAI&&(_0x5f4d9b=!![]);}shootPressed=_0x5f4d9b||p1FireInputWasDown;if(isShowingCaptureMessage&&isPlayer1ShipCaptured)shootPressed=![];}if(!isPlayerTwoAI){const _0x40be94=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture&&!_0x15f53f;if(_0x40be94){p2ShootPressed=isTouchActiveGame&&selectedFiringMode===_0x3edf2e(0x170)&&_0x496b03>gameCanvas['width']/0x2||p2FireInputWasDown;if(isShowingCaptureMessage&&isPlayer2ShipCaptured)p2ShootPressed=![];}}}else{const _0x4aab36=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!_0x15f53f;if(_0x4aab36){let _0x25ae74=![];if(currentPlayer===0x1||!isTwoPlayerMode)_0x25ae74=p1FireInputWasDown;else currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0x3edf2e(0x1d5)&&(_0x25ae74=p2FireInputWasDown);shootPressed=isTouchActiveGame&&selectedFiringMode===_0x3edf2e(0x170)||_0x25ae74;if(isShowingCaptureMessage&&isShipCaptured)shootPressed=![];}}if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x3edf2e(0x20a))shootPressed&&firePlayerBullet('player1',![]),!isPlayerTwoAI&&p2ShootPressed&&firePlayerBullet(_0x3edf2e(0x23c),![]);else{if(shootPressed){if(isPlayerTwoAI&&selectedGameMode===_0x3edf2e(0x1d5)&&currentPlayer===0x2){}else firePlayerBullet(currentPlayer===0x1||!isTwoPlayerMode?_0x3edf2e(0x18d):_0x3edf2e(0x23c),![]);}}}}catch(_0x5adcbd){console[_0x3edf2e(0x1a0)]('Error\x20handling\x20player\x20input:',_0x5adcbd),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![];}}let aiIsCurrentlyTargetingCaptureBoss=![];function aiControl(){const _0x41a1a9=_0x3bd23c;try{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x41a1a9(0x220))return;let _0x3f52ae=null,_0x4fba26=null,_0x5ea8dc=![],_0x44bdb6=![],_0x4cd281=![],_0x4d581a=0x0,_0x3c732e='ai',_0x5c746a=![],_0x3a869c=![];if(isPlayerTwoAI&&selectedGameMode===_0x41a1a9(0x1d5)&&currentPlayer===0x2){if(!ship||playerLives<=0x0||isShipCaptured||isShowingPlayerGameOverMessage){if(ship)ship[_0x41a1a9(0x200)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas['width']/0x2:0x0;return;}_0x3f52ae=ship,_0x4fba26=smoothedShipX,_0x5ea8dc=isDualShipActive,_0x44bdb6=isShipCaptured,_0x4cd281=isInvincible,_0x4d581a=playerLives,_0x3c732e=_0x41a1a9(0x101),_0x5c746a=!![],_0x3a869c=playerLives>0x1&&!_0x5ea8dc&&!isShipCaptured;}else{if(!isManualControl&&!isPlayerTwoAI){if(playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage){if(ship)ship[_0x41a1a9(0x200)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas['width']/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}if(isShipCaptured||isShowingCaptureMessage){if(ship)ship[_0x41a1a9(0x200)]=ship['x'];else{if(_0x3f52ae)_0x3f52ae[_0x41a1a9(0x200)]=_0x3f52ae['x'];}if(smoothedShipX!==undefined&&ship)smoothedShipX=ship['x'];else{if(smoothedShipX!==undefined&&_0x3f52ae)smoothedShipX=_0x3f52ae['x'];}aiIsCurrentlyTargetingCaptureBoss=![];return;}_0x3f52ae=ship,_0x4fba26=smoothedShipX,_0x5ea8dc=isDualShipActive,_0x44bdb6=isShipCaptured,_0x4cd281=isInvincible,_0x4d581a=playerLives,_0x3a869c=playerLives>0x1&&!_0x5ea8dc&&!isShipCaptured;}else{if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}if(_0x4fba26===undefined&&_0x3f52ae)_0x4fba26=_0x3f52ae['x'],(_0x5c746a||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x4fba26);else{if(_0x4fba26===undefined&&!_0x3f52ae){_0x4fba26=gameCanvas?gameCanvas[_0x41a1a9(0x117)]/0x2:0x0;(_0x5c746a||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x4fba26);if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}const _0x559b80=Date['now'](),_0x49e122=gameCanvas[_0x41a1a9(0x117)],_0x10d40b=gameCanvas[_0x41a1a9(0x1d4)];let _0x501e78=_0x3f52ae[_0x41a1a9(0x117)];_0x5ea8dc&&(_0x501e78=DUAL_SHIP_OFFSET_X+_0x3f52ae['width']);const _0x136b06=_0x3f52ae['x']+_0x501e78/0x2,_0xeff47c=_0x3f52ae['y'],_0xe02950=_0x49e122/0x2,_0x4cadb5=_0xe02950-_0x501e78/0x2,_0x4b07a7=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive||isShowingCaptureMessage||isShowingIntro;let _0x50e3b9=_0x4fba26,_0x7576d3=![],_0x1ac1d3=![],_0x49d8e6=_0x4fba26,_0x42623e=null,_0x2e5cd9=![],_0x2ac997=![],_0x2eaf34=![];aiNeedsStabilization&&!_0x4b07a7&&(aiStabilizationEndTime=_0x559b80+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],_0x4fba26=_0x3f52ae['x'],(_0x5c746a||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x4fba26));const _0x4e88a6=enemies['find'](_0x1079f2=>_0x1079f2['id']===capturingBossId&&_0x1079f2[_0x41a1a9(0x131)]===ENEMY3_TYPE);if(_0x3a869c&&captureBeamActive&&_0x4e88a6&&_0x4e88a6['state']===_0x41a1a9(0x238)&&!_0x44bdb6&&!isWaitingForRespawn){if(!isManualControl&&!isPlayerTwoAI)aiIsCurrentlyTargetingCaptureBoss=!![];else _0x5c746a&&(_0x2eaf34=!![],aiIsCurrentlyTargetingCaptureBoss=!![]);if(aiIsCurrentlyTargetingCaptureBoss){_0x7576d3=![],_0x42623e=null;const _0x51c89b=_0x4e88a6['x']+_0x4e88a6[_0x41a1a9(0x117)]/0x2;_0x559b80-(_0x4e88a6[_0x41a1a9(0x18b)]||0x0)>=AI_CAPTURE_BEAM_APPROACH_DELAY_MS?(_0x50e3b9=_0x51c89b-_0x501e78/0x2,_0x2e5cd9=!![]):(_0x50e3b9=_0x4cadb5,_0x2e5cd9=![]);}}else aiIsCurrentlyTargetingCaptureBoss&&(!captureBeamActive||!_0x4e88a6||_0x4e88a6[_0x41a1a9(0x1f5)]!=='capturing'||!_0x3a869c)&&(aiIsCurrentlyTargetingCaptureBoss=![],_0x2eaf34=![]);if(!_0x2e5cd9&&!aiIsCurrentlyTargetingCaptureBoss&&!_0x4b07a7){const _0x4b89e9=enemies['find'](_0x5f288f=>_0x5f288f[_0x41a1a9(0x131)]===ENEMY3_TYPE&&_0x5f288f[_0x41a1a9(0x139)]&&_0x5f288f[_0x41a1a9(0x105)]>0x0&&_0x559b80-_0x5f288f[_0x41a1a9(0x105)]>0xbb8);if(_0x4b89e9){_0x2ac997=!![],_0x42623e=_0x4b89e9,_0x50e3b9=_0x4b89e9['x']+_0x4b89e9['width']/0x2-_0x501e78/0x2,_0x7576d3=!![],_0x1ac1d3=![];if(!isChallengingStage&&!_0x4cd281){const _0x4e81af=_0x3f52ae[_0x41a1a9(0x1d4)]*0.5,_0x431361=_0x501e78*0.3,_0xd41c2f={'x':_0x3f52ae['x']-_0x431361,'y':_0x3f52ae['y']-_0x4e81af,'width':_0x501e78+_0x431361*0x2,'height':_0x4e81af+_0x3f52ae['height']};for(const _0x251ab2 of enemyBullets){if(_0x251ab2&&checkCollision(_0xd41c2f,{'x':_0x251ab2['x'],'y':_0x251ab2['y'],'width':_0x251ab2[_0x41a1a9(0x117)],'height':_0x251ab2[_0x41a1a9(0x1d4)]})){_0x1ac1d3=!![],_0x7576d3=![],_0x2ac997=![],_0x42623e=null;const _0x1091e3=_0x136b06<_0x251ab2['x']+_0x251ab2[_0x41a1a9(0x117)]/0x2?-0x1:0x1;_0x49d8e6=_0x4fba26+_0x1091e3*_0x501e78*1.5,_0x50e3b9=Math[_0x41a1a9(0x193)](AI_ANTI_CORNER_BUFFER,Math[_0x41a1a9(0x129)](_0x49e122-_0x501e78-AI_ANTI_CORNER_BUFFER,_0x49d8e6));break;}}}}}if(_0x559b80<aiStabilizationEndTime&&!_0x4b07a7&&!aiIsCurrentlyTargetingCaptureBoss&&!_0x2ac997)_0x50e3b9=_0x4cadb5;else{if(!_0x4b07a7&&!aiIsCurrentlyTargetingCaptureBoss&&!_0x2ac997){_0x1ac1d3=![],_0x49d8e6=_0x4fba26;if(!isChallengingStage&&!_0x4cd281){let _0x5a6da5=[];const _0x9c8879=isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_LOOKAHEAD*1.1:FINAL_DODGE_LOOKAHEAD*1.2,_0xa95d61=isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_BUFFER*1.1:FINAL_DODGE_BUFFER_BASE*1.2,_0x35cffb=_0x5ea8dc?_0x9c8879*1.25:_0x9c8879,_0x3f4ebd=_0x5ea8dc?_0xa95d61*1.35:_0xa95d61,_0x2d4a79={'x':_0x3f52ae['x']-_0x3f4ebd,'y':_0x3f52ae['y']-_0x35cffb,'width':_0x501e78+_0x3f4ebd*0x2,'height':_0x35cffb+_0x3f52ae['height']};for(const _0x3a2a87 of enemyBullets){if(_0x3a2a87&&_0x3a2a87['y']+_0x3a2a87[_0x41a1a9(0x1d4)]>_0x3f52ae['y']-_0x3f52ae[_0x41a1a9(0x1d4)]*0x2&&_0x3a2a87['y']<_0x10d40b){const _0x106d57={'x':_0x3a2a87['x'],'y':_0x3a2a87['y'],'width':_0x3a2a87['width'],'height':_0x3a2a87[_0x41a1a9(0x1d4)]};checkCollision(_0x2d4a79,_0x106d57)&&_0x5a6da5[_0x41a1a9(0x160)](_0x3a2a87);}}if(_0x5a6da5['length']>0x0){_0x1ac1d3=!![];let _0x10959f=_0x4fba26,_0x5a1aa2=-Infinity;for(let _0x4675ae=-0x1;_0x4675ae<=0x1;_0x4675ae+=0x2){const _0x399c12=_0x501e78*(_0x5ea8dc?2.6:0x2)+Math['random']()*(_0x501e78*0.5)+(_0x5a6da5['length']>0x1?_0x501e78*0.5:0x0);let _0x1ecd1e=_0x4fba26+_0x4675ae*_0x399c12;_0x1ecd1e=Math[_0x41a1a9(0x193)](AI_ANTI_CORNER_BUFFER,Math['min'](_0x49e122-_0x501e78-AI_ANTI_CORNER_BUFFER,_0x1ecd1e));let _0x4115f5=0x0;const _0x104f5e={'x':_0x1ecd1e-_0x3f4ebd/0x2,'y':_0x3f52ae['y']-_0x35cffb,'width':_0x501e78+_0x3f4ebd,'height':_0x35cffb+_0x3f52ae['height']};for(const _0x4d2366 of _0x5a6da5){checkCollision(_0x104f5e,{'x':_0x4d2366['x'],'y':_0x4d2366['y'],'width':_0x4d2366['width'],'height':_0x4d2366[_0x41a1a9(0x1d4)]})&&_0x4115f5++;}let _0x539698=-_0x4115f5;if(Math[_0x41a1a9(0xf4)](_0x1ecd1e-_0x4fba26)<_0x501e78*0.5)_0x539698-=0xa;_0x539698>_0x5a1aa2&&(_0x5a1aa2=_0x539698,_0x10959f=_0x1ecd1e);}_0x49d8e6=_0x10959f;}if(!_0x1ac1d3){const _0x46bb0e=AI_COLLISION_LOOKAHEAD*(_0x5ea8dc?1.85:1.5),_0x5b33f0=FINAL_DODGE_BUFFER_BASE*(_0x5ea8dc?1.85:1.5);for(const _0x147a63 of enemies){if(_0x147a63&&(_0x147a63[_0x41a1a9(0x1f5)]===_0x41a1a9(0x219)||_0x147a63[_0x41a1a9(0x1f5)]===_0x41a1a9(0xf1)||_0x147a63[_0x41a1a9(0x1f5)]===_0x41a1a9(0x177)||_0x147a63[_0x41a1a9(0x1f5)]===_0x41a1a9(0x16b))&&_0x147a63['y']+_0x147a63[_0x41a1a9(0x1d4)]>_0x3f52ae['y']-_0x46bb0e/0x2&&_0x147a63['y']<_0x3f52ae['y']+_0x3f52ae[_0x41a1a9(0x1d4)]){const _0x36b63e={'x':_0x3f52ae['x']-_0x5b33f0,'y':_0x3f52ae['y']-_0x46bb0e,'width':_0x501e78+_0x5b33f0*0x2,'height':_0x46bb0e+_0x3f52ae['height']},_0x3fa3f1={'x':_0x147a63['x'],'y':_0x147a63['y'],'width':_0x147a63['width'],'height':_0x147a63[_0x41a1a9(0x1d4)]};if(checkCollision(_0x36b63e,_0x3fa3f1)){_0x1ac1d3=!![];const _0x2a04c1=_0x147a63['x']+_0x147a63[_0x41a1a9(0x117)]/0x2,_0x36b465=_0x136b06<_0x2a04c1?-0x1:0x1,_0xee537e=_0x501e78*(_0x5ea8dc?2.9:2.2)+Math[_0x41a1a9(0x1a8)]()*(_0x501e78*0.6);_0x49d8e6=_0x4fba26+_0x36b465*_0xee537e;break;}}}}}if(_0x1ac1d3)_0x50e3b9=Math[_0x41a1a9(0x193)](AI_ANTI_CORNER_BUFFER,Math[_0x41a1a9(0x129)](_0x49e122-_0x501e78-AI_ANTI_CORNER_BUFFER,_0x49d8e6)),_0x42623e=null,_0x7576d3=![];else{if(fallingShips[_0x41a1a9(0x111)]>0x0&&!_0x44bdb6&&!isWaitingForRespawn&&!_0x5ea8dc){let _0x12f9d4=null,_0x12a8f9=Infinity;for(const _0x1bac88 of fallingShips){let _0xffca35=![];if(!isManualControl&&!isPlayerTwoAI||isPlayerTwoAI&&selectedGameMode===_0x41a1a9(0x1d5)&&currentPlayer===0x2){if(_0x5c746a&&_0x1bac88[_0x41a1a9(0x12b)]==='player1')_0xffca35=!![];else!isManualControl&&!isPlayerTwoAI&&_0x1bac88['targetPlayerId']==='player1'&&(_0xffca35=!![]);if(!_0x12f9d4&&!_0xffca35)_0xffca35=!![];}if(_0x1bac88&&!_0x1bac88[_0x41a1a9(0x1c9)]&&_0xffca35){const _0x38a7a8=Math[_0x41a1a9(0xf4)](_0x1bac88['x']+_0x1bac88[_0x41a1a9(0x117)]/0x2-_0x136b06)+Math[_0x41a1a9(0xf4)](_0x1bac88['y']-_0x3f52ae['y']);_0x38a7a8<_0x12a8f9&&(_0x12a8f9=_0x38a7a8,_0x12f9d4=_0x1bac88);}}_0x12f9d4&&(_0x50e3b9=_0x12f9d4['x']+_0x12f9d4[_0x41a1a9(0x117)]/0x2-_0x501e78/0x2,_0x7576d3=![],_0x42623e=null);}else{if(!_0x2e5cd9){_0x42623e=null;let _0x4e36af=-Infinity;for(const _0x57ab37 of enemies){if(!_0x57ab37)continue;let _0x4b9635=![];aiIsCurrentlyTargetingCaptureBoss&&_0x57ab37['id']===capturingBossId&&(_0x4b9635=!![]);let _0xf60f33=0x0;const _0x30935f=_0x57ab37['x']+_0x57ab37[_0x41a1a9(0x117)]/0x2,_0x71f664=_0x30935f-_0x136b06,_0x616305=_0xeff47c-(_0x57ab37['y']+_0x57ab37[_0x41a1a9(0x1d4)]);if(_0x616305<0x0&&_0x57ab37['state']!=='attacking'&&_0x57ab37[_0x41a1a9(0x1f5)]!=='diving_to_capture_position'&&_0x57ab37[_0x41a1a9(0x1f5)]!==_0x41a1a9(0x16b))continue;_0xf60f33=(_0x10d40b-_0x57ab37['y'])*0x2-Math[_0x41a1a9(0xf4)](_0x71f664)*0x3-_0x616305;if(_0x57ab37[_0x41a1a9(0x1f5)]===_0x41a1a9(0x219)||_0x57ab37['state']==='diving_to_capture_position')_0xf60f33+=0xbb8;if(_0x57ab37[_0x41a1a9(0x131)]===ENEMY3_TYPE&&!_0x57ab37[_0x41a1a9(0x13d)])_0xf60f33+=0x7d0;if(_0x57ab37[_0x41a1a9(0x131)]===ENEMY3_TYPE&&_0x57ab37[_0x41a1a9(0x13d)])_0xf60f33+=0xfa0;if(_0x57ab37[_0x41a1a9(0x131)]===ENEMY3_TYPE&&_0x57ab37['hasCapturedShip'])_0xf60f33+=0x1388;_0xf60f33>_0x4e36af&&(_0x4e36af=_0xf60f33,_0x42623e=_0x57ab37);}if(_0x42623e){const _0x20d5ee=_0x42623e['x']+_0x42623e[_0x41a1a9(0x117)]/0x2;_0x50e3b9=_0x20d5ee-_0x501e78/0x2;const _0x54e487=1.8;let _0x4231e7;if(isChallengingStage)_0x4231e7=_0x501e78*2.5;else _0x42623e['state']===_0x41a1a9(0x1fe)||_0x42623e['state']===_0x41a1a9(0x114)?_0x4231e7=_0x501e78*(GRID_SHOOT_ALIGNMENT_FACTOR*_0x54e487):_0x4231e7=_0x501e78*(FINAL_SHOOT_ALIGNMENT_THRESHOLD*_0x54e487);const _0x186404=Math[_0x41a1a9(0xf4)](_0x136b06-_0x20d5ee);let _0x367649=![];if(aiIsCurrentlyTargetingCaptureBoss&&_0x42623e['id']===capturingBossId)_0x367649=!![];else _0x3a869c&&_0x42623e['type']===ENEMY3_TYPE&&!_0x42623e[_0x41a1a9(0x139)]&&!captureAttemptMadeThisLevel&&!isFullGridWave&&(_0x42623e['state']===_0x41a1a9(0x1fe)||_0x42623e['state']==='preparing_capture'||_0x42623e[_0x41a1a9(0x1f5)]===_0x41a1a9(0xf1)||_0x42623e[_0x41a1a9(0x1f5)]===_0x41a1a9(0x238)&&_0x42623e['id']===capturingBossId)&&(_0x367649=!![]);_0x186404<_0x4231e7&&!_0x367649&&(_0x7576d3=!![]);}else _0x50e3b9=_0x4cadb5,_0x7576d3=![];}}}}else{if(aiIsCurrentlyTargetingCaptureBoss&&_0x4b07a7)_0x7576d3=![],_0x42623e=null;else _0x2ac997&&_0x4b07a7&&(_0x7576d3=![]);}}if(_0x3f52ae){_0x4fba26+=(_0x50e3b9-_0x4fba26)*AI_SMOOTHING_FACTOR_MOVE,_0x3f52ae[_0x41a1a9(0x200)]=_0x4fba26;if(_0x5c746a)smoothedShipX=_0x4fba26;else!isManualControl&&!isPlayerTwoAI&&(smoothedShipX=_0x4fba26);}aiIsCurrentlyTargetingCaptureBoss&&(_0x7576d3=![]);if(_0x7576d3&&!_0x1ac1d3&&!_0x2e5cd9&&!_0x4b07a7){let _0x11943c=![];_0x5c746a?_0x11943c=!![]:_0x559b80>=aiCanShootTime&&(_0x11943c=!![]),_0x11943c&&!isShowingIntro&&(firePlayerBullet(_0x3c732e,![])&&(!_0x5c746a&&(aiCanShootTime=_0x559b80+SHOOT_COOLDOWN)));}}catch(_0xed4f11){console[_0x41a1a9(0x1a0)](_0x41a1a9(0x1c5),_0xed4f11,_0xed4f11[_0x41a1a9(0x19a)]);ship&&(ship['targetX']=ship['x']);aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x41a1a9(0x117)]/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];}}function aiControlCoop(){const _0x4a8e5a=_0x3bd23c;if(!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')||isPaused||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0){if(ship1)ship1[_0x4a8e5a(0x200)]=ship1['x'];if(ship2)ship2['targetX']=ship2['x'];return;}const _0x378c79=Date[_0x4a8e5a(0x1b5)](),_0x5b2322=gameCanvas['width'],_0x51e324=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4a8e5a(0x220),_0x2ab633=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture,_0x5abc33=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture,_0x1f7813=_0x4bd6fc=>{const _0x229ebb=_0x4bd6fc==='p1'&&isPlayer1ShowingGameOverMessage||_0x4bd6fc==='p2'&&isPlayer2ShowingGameOverMessage;return _0x229ebb||showReadyMessage||isCsCompletionDelayActive||isShowingIntro&&!(level===0x1&&coopPlayersReadyStartTime>0x0&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'));};let _0x4564b8=!![],_0x46adda=!![];if(coopAICaptureDiveAnticipationActive&&_0x378c79<coopAICaptureDiveAnticipationEndTime){if(!_0x51e324)_0x4564b8=![];_0x46adda=![];}else coopAICaptureDiveAnticipationActive&&(coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);if(_0x2ab633&&ship1&&!_0x51e324){if(smoothedShip1X===undefined)smoothedShip1X=ship1['x'];const _0xd3bb2b=_0x1f7813('p1');let {desiredTargetX:_0x20d266,shouldTryShoot:_0x3e91ea,targetEnemyForAI:_0x692314,isLastLifePartnerSave:_0x59d412,isThreeSecondRuleTarget:_0xf7220d}=calculateAIDesiredState(ship1,smoothedShip1X,player1IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer1Invincible,isPlayer1ShipCaptured,isPlayer1WaitingForRespawn,_0x378c79,_0x5b2322,_0xd3bb2b,'p1');aiShip1TargetEnemy=_0x692314,smoothedShip1X+=(_0x20d266-smoothedShip1X)*AI_SMOOTHING_FACTOR_MOVE,ship1[_0x4a8e5a(0x200)]=smoothedShip1X;let _0x1ed29e=_0x3e91ea&&!(isShowingCaptureMessage&&isPlayer1ShipCaptured);!_0x59d412&&!_0xf7220d&&(_0x1ed29e=_0x1ed29e&&_0x4564b8),_0x1ed29e&&(_0x378c79>=aiShip1CanShootTime&&(fireCoopAIBullet(ship1,player1IsDualShipActive,_0x4a8e5a(0x18d)),aiShip1CanShootTime=_0x378c79+SHOOT_COOLDOWN));}if(_0x5abc33&&ship2){if(smoothedShip2X===undefined)smoothedShip2X=ship2['x'];const _0x54db74=_0x1f7813('p2');let {desiredTargetX:_0x8b00e7,shouldTryShoot:_0x7ba82c,targetEnemyForAI:_0x3131a3,isLastLifePartnerSave:_0x6ea270,isThreeSecondRuleTarget:_0x4c6768}=calculateAIDesiredState(ship2,smoothedShip2X,player2IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer2Invincible,isPlayer2ShipCaptured,isPlayer2WaitingForRespawn,_0x378c79,_0x5b2322,_0x54db74,_0x4a8e5a(0x101));aiShip2TargetEnemy=_0x3131a3,smoothedShip2X+=(_0x8b00e7-smoothedShip2X)*AI_SMOOTHING_FACTOR_MOVE,ship2[_0x4a8e5a(0x200)]=smoothedShip2X;let _0x1f94cc=_0x7ba82c&&!(isShowingCaptureMessage&&isPlayer2ShipCaptured);!_0x6ea270&&!_0x4c6768&&(_0x1f94cc=_0x1f94cc&&_0x46adda),_0x1f94cc&&(_0x378c79>=aiShip2CanShootTime&&(fireCoopAIBullet(ship2,player2IsDualShipActive,isCoopAIDemoActive?'player2':_0x4a8e5a(0x101)),aiShip2CanShootTime=_0x378c79+SHOOT_COOLDOWN));}}function fireCoopAIBullet(_0x14e86c,_0x3e4e94,_0x21c6e1){const _0x43c684=_0x3bd23c;if(!_0x14e86c)return![];const _0x2c46c4=Date[_0x43c684(0x1b5)]();let _0x23cc16=![];if(_0x21c6e1==='player1'&&isPlayer1ShowingGameOverMessage)_0x23cc16=!![];if((_0x21c6e1==='player2'||_0x21c6e1===_0x43c684(0x101))&&isPlayer2ShowingGameOverMessage)_0x23cc16=!![];let _0x14289c=isPaused||!isInGameState||gameOverSequenceStartTime>0x0||_0x23cc16;if(_0x14289c)return![];if(_0x21c6e1===_0x43c684(0x18d)&&isPlayer1ShipCaptured)return![];if((_0x21c6e1===_0x43c684(0x23c)||_0x21c6e1===_0x43c684(0x101))&&isPlayer2ShipCaptured)return![];try{const _0x15fb34=_0x14e86c['y'];let _0x48167d=0x0;const _0x46cc70=_0x21c6e1;if(_0x3e4e94){const _0x41b208=_0x14e86c['x']+_0x14e86c[_0x43c684(0x117)]/0x2,_0x1e6d5b=_0x14e86c['x']+DUAL_SHIP_OFFSET_X+_0x14e86c['width']/0x2,_0x1a6ef0=_0x41b208-PLAYER_BULLET_WIDTH/0x2,_0x1b57b0=_0x1e6d5b-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x1a6ef0,'y':_0x15fb34,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x46cc70}),bullets[_0x43c684(0x160)]({'x':_0x1b57b0,'y':_0x15fb34,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x46cc70}),_0x48167d=0x2;}else{const _0x475bf1=_0x14e86c['x']+_0x14e86c['width']/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x43c684(0x160)]({'x':_0x475bf1,'y':_0x15fb34,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x46cc70}),_0x48167d=0x1;}playSound('playerShootSound',![],0.4);if(_0x21c6e1===_0x43c684(0x18d))player1ShotsFired+=_0x48167d,player1LastShotTime=_0x2c46c4,aiShip1LastShotTime=_0x2c46c4;else(_0x21c6e1==='player2'||_0x21c6e1===_0x43c684(0x101))&&(player2ShotsFired+=_0x48167d,player2LastShotTime=_0x2c46c4,aiShip2LastShotTime=_0x2c46c4);return!![];}catch(_0x2b36bf){return console[_0x43c684(0x1a0)](_0x43c684(0x1a9)+_0x21c6e1+':',_0x2b36bf),![];}}function calculateAIDesiredState(_0x567a0e,_0x2fc416,_0x406ceb,_0x1abe6c,_0x192524,_0x19ecdd,_0x3563ba,_0x403b08,_0xb89d3d,_0x5ddef2,_0x411dfb,_0x42554d,_0x89dae4){const _0x311355=_0x3bd23c;let _0x2aa9d1=_0x2fc416,_0x57e720=![],_0x3dc488=null,_0x514f53=![],_0x26bc6e=![],_0x1ee4d2=![],_0x1cfdeb=![],_0x42edaf=![],_0x4d7b51=![];const _0x5c455a=gameCanvas[_0x311355(0x1d4)],_0x47c7ba=_0x567a0e['width']+(_0x406ceb?DUAL_SHIP_OFFSET_X:0x0),_0x40e158=_0x567a0e['x']+_0x47c7ba/0x2,_0x26536a=_0x567a0e['y'],_0x4de0ac=_0x89dae4==='p1'?player1Lives:_0x89dae4===_0x311355(0x101)||_0x89dae4==='p2'?player2Lives:0x0,_0x12f4d4=_0x4de0ac>0x1&&!_0x406ceb&&!_0x403b08;let _0x2d3ea4=_0x411dfb/0x2;const _0x380021=isShowingIntro||isShowingCoopPlayersReady,_0x433d63=isCoopAIDemoActive&&_0x380021&&!(isChallengingStage&&isEntrancePhaseActive),_0x5cbd00=isCoopAIDemoActive&&(_0x89dae4==='p1'&&player1Lives>0x0&&player2Lives<=0x0||(_0x89dae4===_0x311355(0x101)||_0x89dae4==='p2')&&player2Lives>0x0&&player1Lives<=0x0);if(_0x433d63&&_0x5cbd00)_0x2d3ea4=_0x411dfb/0x2;else{if(_0x89dae4==='p1')_0x2d3ea4=_0x411dfb*0.25+Math[_0x311355(0x14d)](_0x5ddef2/(AI_WIGGLE_PERIOD*1.1))*(AI_WIGGLE_AMPLITUDE*0.8);else(_0x89dae4===_0x311355(0x101)||_0x89dae4==='p2')&&(_0x2d3ea4=_0x411dfb*0.75+Math['cos'](_0x5ddef2/(AI_WIGGLE_PERIOD*0.9))*(AI_WIGGLE_AMPLITUDE*0.8));}let _0x1f43e6=_0x2d3ea4-_0x47c7ba/0x2;if(_0x42554d||_0x403b08||_0xb89d3d||_0x89dae4==='p1'&&player1NeedsRespawnAfterCapture||(_0x89dae4===_0x311355(0x101)||_0x89dae4==='p2')&&player2NeedsRespawnAfterCapture)return _0x433d63&&_0x5cbd00?_0x2aa9d1=_0x1f43e6:_0x2aa9d1=_0x1f43e6,(_0x403b08||_0xb89d3d||_0x89dae4==='p1'&&player1NeedsRespawnAfterCapture||(_0x89dae4===_0x311355(0x101)||_0x89dae4==='p2')&&player2NeedsRespawnAfterCapture)&&(_0x2aa9d1=_0x567a0e['x']),{'desiredTargetX':_0x2aa9d1,'shouldTryShoot':![],'targetEnemyForAI':null,'isLastLifePartnerSave':_0x42edaf,'isThreeSecondRuleTarget':_0x4d7b51};const _0x2cc76e=_0x89dae4==='p1'?_0x311355(0x101):'p1',_0x30ecce=_0x2cc76e==='p1'&&isPlayer1ShipCaptured||_0x2cc76e===_0x311355(0x101)&&isPlayer2ShipCaptured,_0x76d215=_0x2cc76e==='p1'&&isPlayer1ShowingGameOverMessage||_0x2cc76e===_0x311355(0x101)&&isPlayer2ShowingGameOverMessage;let _0x2f1ec8=null,_0x5a086b=!![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x311355(0x220)){if(_0x30ecce&&!_0x76d215&&capturedBossIdWithMessage){const _0x26ac28=_0x2cc76e==='p1'?coopPartner1CapturedTime:coopPartner2CapturedTime;_0x26ac28>0x0&&_0x5ddef2-_0x26ac28<COOP_AI_SAVE_PARTNER_DELAY_MS&&(_0x5a086b=![]),_0x2f1ec8=_0x1abe6c[_0x311355(0x1df)](_0x26e0f2=>_0x26e0f2['id']===capturedBossIdWithMessage&&_0x26e0f2[_0x311355(0x131)]===ENEMY3_TYPE&&_0x26e0f2[_0x311355(0x139)]);}}_0x42edaf=_0x4de0ac===0x1&&_0x2f1ec8;if(_0x42edaf&&!_0x1cfdeb){_0x3dc488=_0x2f1ec8;const _0x3f251d=_0x2f1ec8['x']+_0x2f1ec8['width']/0x2;return _0x2aa9d1=_0x3f251d-_0x47c7ba/0x2,_0x57e720=!![],_0x514f53=![],_0x26bc6e=![],_0x1ee4d2=!![],_0x2aa9d1=Math[_0x311355(0x193)](AI_EDGE_BUFFER,Math[_0x311355(0x129)](_0x411dfb-_0x47c7ba-AI_EDGE_BUFFER,_0x2aa9d1)),{'desiredTargetX':_0x2aa9d1,'shouldTryShoot':_0x57e720,'targetEnemyForAI':_0x3dc488,'isLastLifePartnerSave':_0x42edaf,'isThreeSecondRuleTarget':_0x4d7b51};}if(!_0x42edaf&&!_0x1cfdeb&&!_0x2f1ec8){const _0xfda2d8=_0x1abe6c[_0x311355(0x1df)](_0x4fdad4=>_0x4fdad4[_0x311355(0x131)]===ENEMY3_TYPE&&_0x4fdad4[_0x311355(0x139)]&&_0x4fdad4['captureMessageStartTime']>0x0&&_0x5ddef2-_0x4fdad4[_0x311355(0x105)]>0xbb8);if(_0xfda2d8){_0x4d7b51=!![],_0x3dc488=_0xfda2d8,_0x2aa9d1=_0xfda2d8['x']+_0xfda2d8[_0x311355(0x117)]/0x2-_0x47c7ba/0x2,_0x57e720=!![],_0x514f53=![],_0x26bc6e=![],_0x1ee4d2=![];if(!isChallengingStage&&!_0x3563ba){const _0x24adb1=_0x567a0e[_0x311355(0x1d4)]*0.5,_0x8c2d4e=_0x47c7ba*0.3,_0x4880dd={'x':_0x567a0e['x']-_0x8c2d4e,'y':_0x567a0e['y']-_0x24adb1,'width':_0x47c7ba+_0x8c2d4e*0x2,'height':_0x24adb1+_0x567a0e[_0x311355(0x1d4)]};for(const _0x3cce82 of _0x192524){if(_0x3cce82&&checkCollision(_0x4880dd,{'x':_0x3cce82['x'],'y':_0x3cce82['y'],'width':_0x3cce82[_0x311355(0x117)],'height':_0x3cce82[_0x311355(0x1d4)]})){_0x514f53=!![],_0x57e720=![],_0x4d7b51=![],_0x3dc488=null;const _0x41e2e9=_0x40e158<_0x3cce82['x']+_0x3cce82['width']/0x2?-0x1:0x1;_0x2aa9d1=_0x2fc416+_0x41e2e9*_0x47c7ba*1.5;break;}}}if(!_0x514f53)return _0x2aa9d1=Math[_0x311355(0x193)](AI_EDGE_BUFFER,Math[_0x311355(0x129)](_0x411dfb-_0x47c7ba-AI_EDGE_BUFFER,_0x2aa9d1)),{'desiredTargetX':_0x2aa9d1,'shouldTryShoot':_0x57e720,'targetEnemyForAI':_0x3dc488,'isLastLifePartnerSave':_0x42edaf,'isThreeSecondRuleTarget':_0x4d7b51};}}if(_0x2f1ec8&&!_0x406ceb&&_0x5a086b){_0x1ee4d2=!![],_0x3dc488=_0x2f1ec8;const _0x4c535b=_0x2f1ec8['x']+_0x2f1ec8['width']/0x2;_0x2aa9d1=_0x4c535b-_0x47c7ba/0x2,_0x57e720=!![],_0x514f53=![];if(!_0x3563ba){let _0x3b927e=[];const _0x2ec71e=FINAL_DODGE_LOOKAHEAD*0.4,_0x1f628c=FINAL_DODGE_BUFFER_BASE*0.3,_0x52b793={'x':Math[_0x311355(0x129)](_0x40e158,_0x4c535b)-_0x1f628c,'y':_0x567a0e['y']-_0x2ec71e,'width':Math['abs'](_0x40e158-_0x4c535b)+_0x47c7ba+_0x1f628c*0x2,'height':_0x2ec71e+_0x567a0e['height']};for(const _0x48fe5a of _0x192524){if(_0x48fe5a&&_0x48fe5a['y']+_0x48fe5a[_0x311355(0x1d4)]>_0x567a0e['y']-_0x567a0e['height']&&_0x48fe5a['y']<_0x5c455a){const _0x111b08={'x':_0x48fe5a['x'],'y':_0x48fe5a['y'],'width':_0x48fe5a[_0x311355(0x117)],'height':_0x48fe5a['height']};checkCollision(_0x52b793,_0x111b08)&&_0x3b927e['push'](_0x48fe5a);}}if(_0x3b927e[_0x311355(0x111)]>0x0){_0x514f53=!![];const _0x7df031=_0x2fc416<_0x411dfb/0x2?-0x1:0x1;_0x2aa9d1=_0x2fc416+_0x7df031*(_0x47c7ba*0.6),_0x57e720=![];}}return _0x2aa9d1=Math[_0x311355(0x193)](AI_EDGE_BUFFER,Math[_0x311355(0x129)](_0x411dfb-_0x47c7ba-AI_EDGE_BUFFER,_0x2aa9d1)),{'desiredTargetX':_0x2aa9d1,'shouldTryShoot':_0x57e720,'targetEnemyForAI':_0x3dc488,'isLastLifePartnerSave':_0x42edaf,'isThreeSecondRuleTarget':_0x4d7b51};}if(!isChallengingStage&&!_0x3563ba){let _0x49df45=[];const _0x1bb3cb=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x311355(0x220)?1.6:0.8,_0x4053d1=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?1.7:0.8,_0x89973d=FINAL_DODGE_LOOKAHEAD*_0x1bb3cb*(_0x406ceb?1.25:0x1),_0x5236a2=FINAL_DODGE_BUFFER_BASE*_0x4053d1*(_0x406ceb?1.35:0x1),_0x3339ab={'x':_0x567a0e['x']-_0x5236a2,'y':_0x567a0e['y']-_0x89973d,'width':_0x47c7ba+_0x5236a2*0x2,'height':_0x89973d+_0x567a0e[_0x311355(0x1d4)]};for(const _0x1696a0 of _0x192524){if(_0x1696a0&&_0x1696a0['y']+_0x1696a0['height']>_0x567a0e['y']-_0x567a0e[_0x311355(0x1d4)]*1.5&&_0x1696a0['y']<_0x5c455a){const _0x48bb16={'x':_0x1696a0['x'],'y':_0x1696a0['y'],'width':_0x1696a0[_0x311355(0x117)],'height':_0x1696a0[_0x311355(0x1d4)]};checkCollision(_0x3339ab,_0x48bb16)&&_0x49df45[_0x311355(0x160)](_0x1696a0);}}if(_0x49df45[_0x311355(0x111)]>0x0){_0x514f53=!![];let _0x38f4c7=_0x2fc416;const _0x2831d9=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x311355(0x220)?0x3:0x2,_0x116f12=_0x47c7ba*_0x2831d9*(_0x406ceb?1.3:0x1);let _0x5c3237=0x0,_0x11fc84=0x0,_0x530efe=0x0;const _0x235db9=_0x567a0e['x']+_0x47c7ba/0x2;for(const _0x93b518 of _0x49df45){if(_0x93b518['x']<_0x235db9-_0x47c7ba*0.5)_0x11fc84++;else{if(_0x93b518['x']>_0x235db9+_0x47c7ba*0.5)_0x530efe++;else _0x5c3237++;}}if(_0x11fc84<=_0x530efe&&_0x11fc84<=_0x5c3237)_0x38f4c7=_0x2fc416-_0x116f12-Math['random']()*_0x47c7ba*0.4;else{if(_0x530efe<=_0x11fc84&&_0x530efe<=_0x5c3237)_0x38f4c7=_0x2fc416+_0x116f12+Math[_0x311355(0x1a8)]()*_0x47c7ba*0.4;else{if(_0x2fc416<_0x2d3ea4)_0x38f4c7=_0x2d3ea4+_0x116f12+Math[_0x311355(0x1a8)]()*_0x47c7ba*0.7;else _0x38f4c7=_0x2d3ea4-_0x116f12-Math[_0x311355(0x1a8)]()*_0x47c7ba*0.7;}}_0x2aa9d1=_0x38f4c7;}if(!_0x514f53){const _0x3a5a45=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x311355(0x220)?0x1:0.75,_0x5f0b5b=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?0x1:0.8,_0x4499a4=AI_COLLISION_LOOKAHEAD*_0x3a5a45*(_0x406ceb?1.3:0x1),_0xf6450b=AI_COLLISION_BUFFER*_0x5f0b5b*(_0x406ceb?1.4:0x1);for(const _0x703539 of _0x1abe6c){if(!_0x703539)continue;if(!_0x5a086b&&_0x2f1ec8&&_0x703539['id']===_0x2f1ec8['id'])continue;if((_0x703539[_0x311355(0x1f5)]===_0x311355(0x219)||_0x703539[_0x311355(0x1f5)]===_0x311355(0xf1))&&_0x703539['y']+_0x703539['height']>_0x26536a-_0x4499a4&&_0x703539['y']<_0x26536a+_0x567a0e[_0x311355(0x1d4)]*1.5){const _0xbd69ed={'x':_0x567a0e['x']-_0xf6450b,'y':_0x567a0e['y']-_0x4499a4,'width':_0x47c7ba+_0xf6450b*0x2,'height':_0x4499a4+_0x567a0e[_0x311355(0x1d4)]},_0x2a70db={'x':_0x703539['x'],'y':_0x703539['y'],'width':_0x703539[_0x311355(0x117)],'height':_0x703539['height']};if(checkCollision(_0xbd69ed,_0x2a70db)){_0x514f53=!![],_0x3dc488=null,_0x57e720=![];const _0x4d45a6=_0x703539['x']+_0x703539[_0x311355(0x117)]/0x2,_0x38c6a6=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x311355(0x220)?2.2:1.9;_0x2aa9d1=_0x2fc416+(_0x40e158<_0x4d45a6?-0x1:0x1)*(_0x47c7ba*_0x38c6a6*(_0x406ceb?1.35:0x1));break;}}}}}if(!_0x514f53&&_0x12f4d4&&captureBeamActive&&capturingBossId&&!_0x403b08){if(aiPlayerActivelySeekingCaptureById===null||aiPlayerActivelySeekingCaptureById===_0x89dae4){const _0x426178=_0x1abe6c['find'](_0x42f50a=>_0x42f50a['id']===capturingBossId);if(_0x426178&&_0x426178[_0x311355(0x1f5)]===_0x311355(0x238)){aiPlayerActivelySeekingCaptureById===null&&(aiPlayerActivelySeekingCaptureById=_0x89dae4);if(aiPlayerActivelySeekingCaptureById===_0x89dae4){if(_0x5ddef2-(_0x426178[_0x311355(0x18b)]||0x0)>=AI_CAPTURE_BEAM_APPROACH_DELAY_MS){_0x1cfdeb=!![];const _0x5b7ca5=_0x426178['x']+(_0x426178[_0x311355(0x131)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH)/0x2;_0x2aa9d1=_0x5b7ca5-_0x47c7ba/0x2,_0x57e720=![],_0x3dc488=null;}else _0x2aa9d1=_0x1f43e6,_0x57e720=![],_0x3dc488=null;}}else aiPlayerActivelySeekingCaptureById===_0x89dae4&&(aiPlayerActivelySeekingCaptureById=null);}}else aiPlayerActivelySeekingCaptureById===_0x89dae4&&!(_0x12f4d4&&captureBeamActive&&capturingBossId&&!_0x403b08)&&(aiPlayerActivelySeekingCaptureById=null);if(!_0x514f53&&!_0x1cfdeb&&!_0x406ceb){const _0x180376=_0x19ecdd[_0x311355(0x1df)](_0x4b1b48=>_0x4b1b48[_0x311355(0x12b)]===_0x89dae4&&!_0x4b1b48[_0x311355(0x1c9)]);_0x180376&&(_0x26bc6e=!![],_0x2aa9d1=_0x180376['x']+_0x180376[_0x311355(0x117)]/0x2-_0x47c7ba/0x2,_0x57e720=![],_0x3dc488=null);}if(!_0x514f53&&!_0x1cfdeb&&!_0x26bc6e&&!_0x1ee4d2&&!_0x4d7b51){let _0x1624ae=-Infinity,_0x1b5e8b=![],_0xf71bfa=null;for(const _0x23661a of _0x1abe6c){if(!_0x23661a)continue;if(!_0x5a086b&&_0x2f1ec8&&_0x23661a['id']===_0x2f1ec8['id'])continue;if(_0x1cfdeb&&_0x23661a['id']===capturingBossId&&aiPlayerActivelySeekingCaptureById===_0x89dae4)continue;let _0x324fb8=![];if(_0x23661a['type']===ENEMY3_TYPE&&_0x23661a[_0x311355(0x139)]&&_0x4de0ac<=0x1){const _0x354bc7=(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x311355(0x220))&&_0x23661a['id']===capturedBossIdWithMessage&&_0x30ecce;!_0x354bc7&&(_0x324fb8=!![]);}let _0x275ff2=0x0;const _0x589caa=_0x23661a['x']+_0x23661a[_0x311355(0x117)]/0x2,_0x317ce8=_0x589caa-_0x40e158,_0x57b16e=_0x26536a-(_0x23661a['y']+_0x23661a[_0x311355(0x1d4)]);if(_0x57b16e<0x0&&_0x23661a[_0x311355(0x1f5)]!==_0x311355(0x219)&&_0x23661a[_0x311355(0x1f5)]!=='diving_to_capture_position'&&_0x23661a[_0x311355(0x1f5)]!=='following_bezier_path')continue;let _0x5efe5d=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x311355(0x220)){if(_0x89dae4==='p1'&&_0x589caa<_0x411dfb/0x2)_0x5efe5d=0x1388;else{if((_0x89dae4==='ai_p2'||_0x89dae4==='p2')&&_0x589caa>=_0x411dfb/0x2)_0x5efe5d=0x1388;}}_0x275ff2=_0x5efe5d+(_0x5c455a-_0x23661a['y'])*0x2-Math[_0x311355(0xf4)](_0x317ce8)*0x3-_0x57b16e;if(_0x23661a[_0x311355(0x1f5)]==='attacking'||_0x23661a['state']==='diving_to_capture_position')_0x275ff2+=0xbb8;if(_0x23661a[_0x311355(0x131)]===ENEMY3_TYPE&&!_0x23661a['isDamaged'])_0x275ff2+=0x7d0;if(_0x23661a[_0x311355(0x131)]===ENEMY3_TYPE&&_0x23661a[_0x311355(0x13d)])_0x275ff2+=0xfa0;_0x23661a['type']===ENEMY3_TYPE&&_0x23661a[_0x311355(0x139)]&&(!_0x324fb8?_0x275ff2+=0x1388:_0x275ff2-=0x2710);if(_0x275ff2>_0x1624ae){_0x1624ae=_0x275ff2,_0xf71bfa=_0x23661a;let _0x14fedd=![];if(_0xf71bfa['type']===ENEMY3_TYPE&&!_0xf71bfa[_0x311355(0x139)]&&!isFullGridWave){if(_0x12f4d4&&!captureAttemptMadeThisLevel&&(_0xf71bfa[_0x311355(0x1f5)]===_0x311355(0x1fe)||_0xf71bfa['state']===_0x311355(0x114)||_0xf71bfa['state']===_0x311355(0xf1)||_0xf71bfa[_0x311355(0x1f5)]===_0x311355(0x238))){if(_0x1cfdeb&&_0xf71bfa['id']===capturingBossId&&aiPlayerActivelySeekingCaptureById===_0x89dae4)_0x14fedd=!![];else!_0x1cfdeb&&aiPlayerActivelySeekingCaptureById!==_0x89dae4&&(_0x14fedd=!![]);}if(_0x406ceb){const _0x29d6da=_0x89dae4==='p1'?_0x311355(0x101):'p1';let _0x91c38e=![];_0x29d6da==='p1'?ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture&&!player1IsDualShipActive&&(_0x91c38e=!![]):ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture&&!player2IsDualShipActive&&(_0x91c38e=!![]),_0x91c38e&&(_0x14fedd=!![]);}}if(_0x324fb8&&_0xf71bfa===_0x23661a)Math[_0x311355(0xf4)](_0x40e158-(_0xf71bfa['x']+_0xf71bfa[_0x311355(0x117)]/0x2))<_0x47c7ba*1.1?_0x1b5e8b=!![]:_0x1b5e8b=![];else{if(_0x14fedd)_0x1b5e8b=![];else Math[_0x311355(0xf4)](_0x40e158-(_0xf71bfa['x']+_0xf71bfa[_0x311355(0x117)]/0x2))<_0x47c7ba*0.9?_0x1b5e8b=!![]:_0x1b5e8b=![];}}}_0x3dc488=_0xf71bfa,_0x57e720=_0x1b5e8b;if(_0x3dc488){let _0x23c5e5=![];if(_0x3dc488[_0x311355(0x131)]===ENEMY3_TYPE&&_0x3dc488[_0x311355(0x139)]&&_0x4de0ac<=0x1){const _0x400fba=(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&_0x3dc488['id']===capturedBossIdWithMessage&&_0x30ecce;!_0x400fba&&(_0x23c5e5=!![]);}if(_0x23c5e5)_0x2aa9d1=_0x1f43e6;else{const _0x51a0b7=_0x3dc488['x']+_0x3dc488[_0x311355(0x117)]/0x2;_0x2aa9d1=_0x51a0b7-_0x47c7ba/0x2;}}else _0x2aa9d1=_0x1f43e6,_0x57e720=![];}return _0x1cfdeb&&aiPlayerActivelySeekingCaptureById===_0x89dae4&&(_0x57e720=![],_0x3dc488=null),_0x2aa9d1=Math[_0x311355(0x193)](AI_EDGE_BUFFER,Math['min'](_0x411dfb-_0x47c7ba-AI_EDGE_BUFFER,_0x2aa9d1)),{'desiredTargetX':_0x2aa9d1,'shouldTryShoot':_0x57e720,'targetEnemyForAI':_0x3dc488,'isLastLifePartnerSave':_0x42edaf,'isThreeSecondRuleTarget':_0x4d7b51};}function findAndDetachEnemy(){const _0x55b403=_0x3bd23c;try{let _0x114a43=![];isTwoPlayerMode&&selectedGameMode===_0x55b403(0x20a)?_0x114a43=isPlayer1ShipCaptured||isPlayer2ShipCaptured:_0x114a43=isShipCaptured;if(!isFullGridWave&&_0x114a43){const _0x5bec8d=enemies[_0x55b403(0x1df)](_0x22c17d=>_0x22c17d&&_0x22c17d[_0x55b403(0x131)]===ENEMY3_TYPE&&_0x22c17d['hasCapturedShip']&&_0x22c17d[_0x55b403(0x1f5)]===_0x55b403(0x1fe));if(_0x5bec8d){_0x5bec8d[_0x55b403(0x10d)]=!![],_0x5bec8d[_0x55b403(0x161)]=_0x55b403(0x1d5);const _0x48fc0b=new Set([_0x5bec8d['id']]);return resetJustReturnedFlags(_0x48fc0b),[_0x5bec8d];}}if(isEntrancePhaseActive)return null;let _0x4cf683=enemies[_0x55b403(0x234)](_0x3b671e=>_0x3b671e&&_0x3b671e['state']==='in_grid'&&!_0x3b671e[_0x55b403(0x10d)]);if(_0x4cf683['length']===0x0){_0x4cf683=enemies['filter'](_0x4f2ac7=>_0x4f2ac7&&_0x4f2ac7[_0x55b403(0x1f5)]===_0x55b403(0x1fe));if(_0x4cf683['length']===0x0)return null;}if(_0x4cf683[_0x55b403(0x111)]===0x0)return null;_0x4cf683[_0x55b403(0x1b3)]((_0xebaa27,_0x5c71f9)=>(_0x5c71f9[_0x55b403(0xf5)]||0x0)-(_0xebaa27[_0x55b403(0xf5)]||0x0));const _0x3025d5=_0x4cf683[_0x55b403(0x111)]<=0x3;let _0x4f5422=[];const _0x2b43f5=_0x55b403(0x1d5);gridJustCompleted&&(gridJustCompleted=![]);let _0x33f265=![];if(level>0x1&&!_0x3025d5&&_0x4cf683['length']>=0x3){const _0x1c21c3=_0x4cf683[_0x55b403(0x234)](_0x23182a=>_0x23182a[_0x55b403(0x131)]===ENEMY3_TYPE&&!_0x23182a[_0x55b403(0x139)]);for(const _0x48f8a2 of _0x1c21c3){const _0x32d7a2=_0x4cf683['find'](_0x13bdff=>_0x13bdff[_0x55b403(0x131)]===ENEMY2_TYPE&&_0x13bdff[_0x55b403(0xf5)]===_0x48f8a2[_0x55b403(0xf5)]&&_0x13bdff['gridCol']===_0x48f8a2[_0x55b403(0x11b)]-0x1),_0x130d4d=_0x4cf683['find'](_0x3b0261=>_0x3b0261[_0x55b403(0x131)]===ENEMY2_TYPE&&_0x3b0261[_0x55b403(0xf5)]===_0x48f8a2['gridRow']&&_0x3b0261['gridCol']===_0x48f8a2[_0x55b403(0x11b)]+0x1);if(_0x32d7a2&&_0x130d4d){_0x4f5422=[_0x48f8a2,_0x32d7a2,_0x130d4d],_0x33f265=!![];break;}}}if(!_0x33f265&&!_0x3025d5){const _0x14ac01=_0x4cf683['filter'](_0xadfe89=>_0xadfe89[_0x55b403(0x131)]===ENEMY1_TYPE),_0x7371bf=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x14ac01[_0x55b403(0x111)]>=0x2&&Math[_0x55b403(0x1a8)]()<_0x7371bf){const _0x1cd23f=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x1cd1c0=_0x14ac01[_0x55b403(0x111)]>=0x3&&Math[_0x55b403(0x1a8)]()<_0x1cd23f?0x3:0x2;let _0x16aa91=![];_0x14ac01[_0x55b403(0x1b3)](()=>Math['random']()-0.5);for(let _0x3e8c07=0x0;_0x3e8c07<_0x14ac01['length'];_0x3e8c07++){const _0x43fda5=_0x14ac01[_0x3e8c07];let _0x1aa84d=[_0x43fda5];const _0x326693=_0x14ac01[_0x55b403(0x234)](_0x5602e3=>_0x5602e3['id']!==_0x43fda5['id']&&_0x5602e3[_0x55b403(0xf5)]===_0x43fda5[_0x55b403(0xf5)]);_0x326693[_0x55b403(0x1b3)]((_0x5b3106,_0x56924b)=>Math['abs'](_0x5b3106['gridCol']-_0x43fda5['gridCol'])-Math[_0x55b403(0xf4)](_0x56924b[_0x55b403(0x11b)]-_0x43fda5[_0x55b403(0x11b)]));for(let _0x1dd5d5=0x0;_0x1dd5d5<_0x326693[_0x55b403(0x111)]&&_0x1aa84d[_0x55b403(0x111)]<_0x1cd1c0;_0x1dd5d5++){_0x1aa84d[_0x55b403(0x160)](_0x326693[_0x1dd5d5]);}if(_0x1aa84d[_0x55b403(0x111)]===_0x1cd1c0){_0x4f5422=_0x1aa84d,_0x33f265=!![],_0x16aa91=!![];break;}}!_0x16aa91&&_0x14ac01[_0x55b403(0x111)]>=_0x1cd1c0&&(_0x4f5422=_0x14ac01[_0x55b403(0xfb)](0x0,_0x1cd1c0),_0x33f265=!![]);}}if(!_0x33f265&&!_0x3025d5){const _0x4fd74c=_0x4cf683[_0x55b403(0x234)](_0x44db97=>_0x44db97[_0x55b403(0x131)]===ENEMY2_TYPE),_0x195fa2=0.2;if(_0x4fd74c[_0x55b403(0x111)]>=0x2&&Math[_0x55b403(0x1a8)]()<_0x195fa2){const _0x16e914=0x2;let _0x39eb2c=![];_0x4fd74c[_0x55b403(0x1b3)](()=>Math[_0x55b403(0x1a8)]()-0.5);for(let _0x104bbf=0x0;_0x104bbf<_0x4fd74c[_0x55b403(0x111)];_0x104bbf++){const _0xff1b38=_0x4fd74c[_0x104bbf];let _0x13d2e1=[_0xff1b38];const _0x1a92db=_0x4fd74c['filter'](_0x37cd32=>_0x37cd32['id']!==_0xff1b38['id']&&_0x37cd32[_0x55b403(0xf5)]===_0xff1b38['gridRow']);_0x1a92db[_0x55b403(0x1b3)]((_0x54f565,_0x15e317)=>Math[_0x55b403(0xf4)](_0x54f565[_0x55b403(0x11b)]-_0xff1b38['gridCol'])-Math['abs'](_0x15e317[_0x55b403(0x11b)]-_0xff1b38[_0x55b403(0x11b)]));for(let _0x2f7fe9=0x0;_0x2f7fe9<_0x1a92db[_0x55b403(0x111)]&&_0x13d2e1['length']<_0x16e914;_0x2f7fe9++){_0x13d2e1[_0x55b403(0x160)](_0x1a92db[_0x2f7fe9]);}if(_0x13d2e1['length']===_0x16e914){_0x4f5422=_0x13d2e1,_0x33f265=!![],_0x39eb2c=!![];break;}}!_0x39eb2c&&_0x4fd74c[_0x55b403(0x111)]>=_0x16e914&&(_0x4f5422=_0x4fd74c[_0x55b403(0xfb)](0x0,_0x16e914),_0x33f265=!![]);}}if(!_0x33f265&&_0x4cf683['length']>0x0){const _0x5a38e7=_0x4cf683[0x0];_0x4f5422[_0x55b403(0x160)](_0x5a38e7);if(_0x4cf683[_0x55b403(0x111)]>0x1&&!_0x3025d5&&Math[_0x55b403(0x1a8)]()<0.2){const _0x36a948=_0x4cf683[_0x55b403(0x1df)](_0x21a701=>_0x21a701['id']!==_0x5a38e7['id']&&_0x21a701[_0x55b403(0xf5)]===_0x5a38e7[_0x55b403(0xf5)]&&_0x21a701['gridCol']===_0x5a38e7[_0x55b403(0x11b)]-0x1),_0x29220d=_0x4cf683[_0x55b403(0x1df)](_0x20689d=>_0x20689d['id']!==_0x5a38e7['id']&&_0x20689d[_0x55b403(0xf5)]===_0x5a38e7[_0x55b403(0xf5)]&&_0x20689d['gridCol']===_0x5a38e7['gridCol']+0x1),_0x1ab0b4=_0x36a948||_0x29220d;if(_0x1ab0b4){const _0xaf234c=_0x5a38e7['type']===ENEMY3_TYPE&&_0x1ab0b4['type']===ENEMY3_TYPE;!_0xaf234c&&_0x4f5422[_0x55b403(0x160)](_0x1ab0b4);}}_0x33f265=!![];}if(_0x4f5422[_0x55b403(0x111)]>0x0){_0x4f5422=_0x4f5422['filter'](_0x32fb07=>_0x32fb07);if(_0x4f5422[_0x55b403(0x111)]===0x0)return null;_0x4f5422[_0x55b403(0x1ab)](_0x37e7c5=>{const _0x3bb0ed=_0x55b403;_0x37e7c5&&(_0x37e7c5[_0x3bb0ed(0x10d)]=!![],_0x37e7c5[_0x3bb0ed(0x161)]=_0x2b43f5);});const _0x3661df=new Set(_0x4f5422[_0x55b403(0x185)](_0x1e2104=>_0x1e2104['id']));return resetJustReturnedFlags(_0x3661df),_0x4f5422;}return null;}catch(_0x1c93e7){return console[_0x55b403(0x1a0)](_0x55b403(0x190),_0x1c93e7),null;}}function triggerImmediateCaptureDive(){const _0x331a63=_0x3bd23c;try{let _0x2130af=![],_0x3f5d98=null;if(isTwoPlayerMode&&selectedGameMode==='coop'){const _0x2d40f2=ship1&&player1Lives>0x1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!player1NeedsRespawnAfterCapture,_0xad5903=ship2&&player2Lives>0x1&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!player2NeedsRespawnAfterCapture;if((_0x2d40f2||_0xad5903)&&!captureAttemptMadeThisLevel){_0x2130af=!![];if(_0x2d40f2&&_0xad5903)_0x3f5d98=Math[_0x331a63(0x1a8)]()<0.5?ship1:ship2;else{if(_0x2d40f2)_0x3f5d98=ship1;else _0xad5903&&(_0x3f5d98=ship2);}}}else playerLives>0x1&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!captureAttemptMadeThisLevel&&(_0x2130af=!![],_0x3f5d98=ship);if(isChallengingStage||!_0x2130af||!_0x3f5d98)return;const _0x3dfa47=enemies[_0x331a63(0x234)](_0x1ba91c=>_0x1ba91c&&_0x1ba91c[_0x331a63(0x1f5)]==='in_grid'&&_0x1ba91c[_0x331a63(0x131)]===ENEMY3_TYPE&&!_0x1ba91c[_0x331a63(0x139)]&&!_0x1ba91c[_0x331a63(0x1f3)]);if(_0x3dfa47[_0x331a63(0x111)]>0x0){const _0x2662d8=_0x3dfa47[Math[_0x331a63(0x15b)](Math['random']()*_0x3dfa47[_0x331a63(0x111)])],_0x4f77f5=Date[_0x331a63(0x1b5)]();_0x2662d8[_0x331a63(0x1f3)]=!![],_0x2662d8[_0x331a63(0x10d)]=!![];const _0x5cd3dd=new Set([_0x2662d8['id']]);resetJustReturnedFlags(_0x5cd3dd);const _0x46ed2a=_0x3f5d98['x']+_0x3f5d98[_0x331a63(0x117)]/0x2,_0x240572=_0x46ed2a<gameCanvas[_0x331a63(0x117)]/0x2?_0x331a63(0x172):_0x331a63(0x100),_0x196d77=_0x240572===_0x331a63(0x100)?gameCanvas[_0x331a63(0x117)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:gameCanvas[_0x331a63(0x117)]*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH,_0x19f3d2=gameCanvas[_0x331a63(0x1d4)]*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR;_0x2662d8[_0x331a63(0x1f5)]=_0x331a63(0x114),_0x2662d8[_0x331a63(0x200)]=_0x196d77,_0x2662d8[_0x331a63(0x154)]=_0x19f3d2,_0x2662d8[_0x331a63(0x12e)]=_0x4f77f5,playSound(_0x331a63(0x21e),![],0.2);const _0x3692c8=_0x2662d8['id'],_0x14a14d=setTimeout(()=>{const _0x14b4c9=_0x331a63,_0x5f36c7=enemies[_0x14b4c9(0x1df)](_0x563ec2=>_0x563ec2?.['id']===_0x3692c8);_0x5f36c7&&_0x5f36c7[_0x14b4c9(0x1f5)]==='preparing_capture'&&(_0x5f36c7['state']=_0x14b4c9(0xf1),captureAttemptMadeThisLevel=!![]);if(_0x5f36c7)_0x5f36c7[_0x14b4c9(0x1d6)]=null;const _0x2a1638=enemySpawnTimeouts['indexOf'](_0x14a14d);if(_0x2a1638>-0x1)enemySpawnTimeouts['splice'](_0x2a1638,0x1);},0x12c);_0x2662d8['capturePrepareTimeout']=_0x14a14d,enemySpawnTimeouts[_0x331a63(0x160)](_0x14a14d);}}catch(_0x3ad9a0){console[_0x331a63(0x1a0)]('Error\x20in\x20triggerImmediateCaptureDive:',_0x3ad9a0);}}function resetJustReturnedFlags(_0x33910a){enemies['forEach'](_0x5ca9d8=>{const _0xb95aa3=_0x5521;let _0x545d98=![];if(_0x33910a instanceof Set)_0x545d98=_0x33910a[_0xb95aa3(0x137)](_0x5ca9d8['id']);else typeof _0x33910a==='string'&&(_0x545d98=_0x5ca9d8['id']===_0x33910a);_0x5ca9d8&&_0x5ca9d8[_0xb95aa3(0x1f5)]===_0xb95aa3(0x1fe)&&_0x5ca9d8[_0xb95aa3(0x10d)]&&!_0x545d98&&(_0x5ca9d8[_0xb95aa3(0x10d)]=![]);});}function _0x1e35(){const _0x410903=['\x20(invalid\x20attack\x20index):','function',',\x20Path\x20','bossHit2Sound','targetGridX','Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20','tintProgress','min','capturedShipX','targetPlayerId',',\x20index\x20','\x20out\x20of\x20bounds\x20(','diveStartTime','shipObj','capturedShipDimensions','type','waveUpSound','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20',',\x20Idx\x20','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20','enemy-entr-','has','Error\x20in\x20renderGame:','hasCapturedShip','parse','259wGMVuJ','CRITICAL:\x20waveEntrancePatterns\x20not\x20defined\x20or\x20insufficient\x20for\x20wave\x20generation.','isDamaged','CS_LoopAttack_BL','Error\x20during\x20post-landing\x20fire\x20for\x20','naturalHeight','rotation','landedTime','warn','CRITICAL:\x20Entrance\x20flight\x202\x20wave\x20pattern\x20(index\x201)\x20is\x20missing\x20or\x20empty.','\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.','Error\x20updating\x20floating\x20scores:','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20or\x20with\x20no\x20definition.\x20Level\x20','newButtonStates','\x20in\x20returning','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20','Error\x20cloning\x20full\x20grid\x20wave\x20pattern:','[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','sin','playerShootSound','velocityX','\x22\x20not\x20found!\x20Aborting\x20CS.','enemyShootSound','CS_LoopAttack_TR','Error\x20getting\x20target\x20grid\x20pos\x20for\x20','targetY','initialCaptureAnimationY','CRITICAL:\x20normalWaveEntrancePaths\x20not\x20defined\x20or\x20empty.\x20Cannot\x20assign\x20paths\x20to\x20squadrons.','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','some','explosionSound','CS:\x20Path\x20','floor','CRITICAL:\x20Full\x20grid\x20wave\x20pattern\x20(index\x200)\x20is\x20missing\x20or\x20empty.','squadronId','CS3_DiveLoopR_Sharp','\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20','push','attackType','csClearSound','entranceSound','resultsMusicSound','\x20after\x20invalid\x20path\x20index','round','\x20not\x20found.','.\x20Enemy\x20','Invalid\x20CS\x20Bezier\x20segment\x20',').\x20Skipping.','following_bezier_path','naturalWidth','squadronEnemyIndex','\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.','[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20','rapid','startSound','right','LOGO','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','shipCapturedSound','3594984QRCege','following_entrance_path',')\x20for\x20','captureAnimationRotation','restore','drawImage','CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','\x20has\x20invalid\x20enemy\x20data.','returnLogDone','full_grid','CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20','enemies','\x20returning\x20without\x20target\x20coords.\x20Recalculating.','\x20attacking\x20without\x20path!\x20Returning.','CRITICAL:\x20Entrance\x20flight\x201\x20wave\x20pattern\x20(index\x200)\x20is\x20missing\x20or\x20empty.','map','GAME\x20EXIT','attackPathSegmentIndex','pathId','capturedShipLastFiredTime','captureSound','captureStartTime','getBoundingClientRect','player1','butterflyDiveSound','undefined','Error\x20in\x20findAndDetachEnemy:','1UP','single','max','fillStyle','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','10377pefrdz','getGamepads','object','gameOverSound','stack','pathT','attack-','\x20(state:\x20','fillRect','toString','error','enemy-grid-','lostLifeSound','1P_VS_AI_NORMAL','6790QwjhKN','\x20after\x20NaN','sqrt','speed','random','Error\x20creating\x20CO-OP\x20AI\x20bullet\x20for\x20','Error\x20getting\x20grid\x20pos\x20for\x20','forEach','Invalid\x20Normal\x20Bezier\x20segment\x20','enemy-cs-','num','stringify','\x20after\x20bad\x20next\x20segment','highScoreHolderId','\x20attacking,\x20index\x20','sort','CRITICAL:\x20Required\x20CS\x20path\x20\x22','now','velocityY','hasFiredPostLanding','Invalid\x20start\x20segment\x20for\x20path\x20',',\x20isFullGrid:\x20','\x20at\x20end\x20of\x20normal\x20path\x20','entrance_flight_1','Error\x20updating\x20explosions:','\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22','extraLifeSound','hiScoreSound','1\x20PLAYER','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20','30px\x20Arial','hasOwnProperty','csPerfectSound','Error\x20in\x20aiControl:','FATAL\x20Error\x20in\x20moveEntities:','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','getWaveType','landed','11910neppTa','NORMAL\x20GAME','!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!','dual','scheduledStartTime','complete','resetAllMessages','lifetime','[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20',',\x20def\x20length:\x20','height','normal','capturePrepareTimeout','shoot','CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.','generateAttackPath','\x20for\x20SHARED\x20path\x20','\x20invalid!\x20Skipping.','isArray','returning','\x20path\x20index\x20','find','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','butterflyHitSound','CS3_DiveLoopL_Sharp','challenging_stage','\x20(invalid\x20attack\x20segment):','20px\x20\x27Press\x20Start\x202P\x27','generateWaveDefinition','capturedShipY','includes','entrancePathId','blue','Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.','Entrance\x20Wave:\x20Path\x20','lastFiredTime','Full\x20Grid:\x20Squadron\x20','.\x20Transitioning.','\x20after\x20attack:','Error\x20creating\x20player\x20bullet(s):','629180VydNfL','isPreparingForImmediateCapture','CS_LoopAttack_TL','state','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','playerNum','switch_player','clear','\x20after\x20missing\x20path','keys','CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','),\x20index\x20','in_grid','dualShipSound','targetX','buttons','Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20','creationTime','Error\x20cloning\x20entrance\x20flight\x202\x20wave\x20pattern:','canFireThisDive','showing_capture_message','resetWave','Error\x20calculating\x20final\x20bezier\x20point\x20for\x20','\x20in\x20moving_to_grid','coop','Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20','CS_LoopAttack_BR','FATAL\x20Error\x20in\x20moveEntities\x20(Restored\x20Conditions):','Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20','cos','beeHitSound','Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20','splice','Unknown\x20wave\x20type\x20for\x20level\x20','attackPathT','\x20for\x20path\x20','alpha','substring','resetGame','attacking','5014569ZZVpfK','save','3011970POGTfP','2280680HDfXDd','bossGalagaDiveSound',',\x20isCS:\x20','1P_VS_AI_COOP','totalRotation','\x20invalid!\x20Skipping\x20squadron.','gridBackgroundSound','Error\x20starting\x20attack\x20for\x20','Invalid\x20next\x20Normal\x20Bezier\x20segment\x20','Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:','\x20for\x20squadron\x20','boss_loop_right','tripleAttackSound','Invalid\x20next\x20CS\x20Bezier\x20segment\x20','Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20','attackFormationOffsetX','Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20','[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','rotationCompleted','CS_HorizontalFlyByL','completed','number','indexOf','filter','show_results','moving_to_grid','middle','capturing','\x22\x20for\x20enemy\x20in\x20squadron\x20','Entrance\x20Wave:\x20No\x20squadrons\x20or\x20enemies\x20scheduled\x20for\x20level\x20','currentLives','player2','!\x20Returning.','health','pathSegmentIndex','START\x20GAME','pressed','\x20off\x20screen:','green','4Hqwbxk','diving_to_capture_position','Enemy\x20','hasFired','abs','gridRow','.\x20Removing.','playerId','pathSpeedMultiplier','.\x20Skipping.','.\x20Switching\x20to\x20moving_to_grid.','slice','Error\x20cloning\x20entrance\x20flight\x201\x20wave\x20pattern:','CO-OP\x20GAME','white','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!','left','ai_p2','total','CS_HorizontalFlyByR','unknown','captureMessageStartTime','entrance_flight_2','currentScore','\x20after\x20bezier\x20error','attackGroupId','\x20points.\x20Health\x20was:\x20','\x20(Path\x20','targetGridY','justReturned','thresholdsMet','sign','main','length','Boss\x20','size','preparing_capture','\x20at\x20[',')!\x20Returning.','width','levelUpSound','NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20','particles','gridCol','stopAllGameSounds','every','attackPathSegments','center','back','preparing_attack'];_0x1e35=function(){return _0x410903;};return _0x1e35();}function updateFloatingScores(){const _0xf1f43a=_0x3bd23c;if(isPaused)return;try{const _0x37507a=Date[_0xf1f43a(0x1b5)]();floatingScores=floatingScores['filter'](_0x17af85=>_0x37507a-_0x17af85[_0xf1f43a(0x203)]<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x2c95d9){console[_0xf1f43a(0x1a0)](_0xf1f43a(0x146),_0x2c95d9),floatingScores=[];}}function updateExplosions(){const _0x5a6656=_0x3bd23c;if(isPaused)return;try{const _0x240d89=Date[_0x5a6656(0x1b5)]();for(let _0x86c7c8=explosions[_0x5a6656(0x111)]-0x1;_0x86c7c8>=0x0;_0x86c7c8--){const _0x16ad15=explosions[_0x86c7c8],_0x46936b=_0x240d89-_0x16ad15[_0x5a6656(0x203)];if(_0x46936b>_0x16ad15['duration']){explosions[_0x5a6656(0x212)](_0x86c7c8,0x1);continue;}_0x16ad15[_0x5a6656(0x11a)][_0x5a6656(0x1ab)](_0x4afc0f=>{const _0x228626=_0x5a6656;_0x4afc0f['x']+=_0x4afc0f['vx'],_0x4afc0f['y']+=_0x4afc0f['vy'],_0x4afc0f[_0x228626(0x216)]=Math[_0x228626(0x193)](0x0,0x1-_0x46936b/_0x16ad15['duration']*EXPLOSION_FADE_SPEED);});}}catch(_0x1cc932){console[_0x5a6656(0x1a0)](_0x5a6656(0x1bc),_0x1cc932),explosions=[];}}function moveEntities(_0x1eb38c=null,_0x29ac35=null){const _0x128889=_0x3bd23c;if(isPaused)return;try{const _0x2d34f9=Date[_0x128889(0x1b5)](),_0x5dc4d2=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(gameCanvas&&!isTouchActiveGame){if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x128889(0x20a)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x47f264=ship1[_0x128889(0x117)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(leftPressed)ship1['x']-=ship1[_0x128889(0x1a7)];if(rightPressed)ship1['x']+=ship1[_0x128889(0x1a7)];ship1['x']=Math[_0x128889(0x193)](0x0,Math[_0x128889(0x129)](gameCanvas[_0x128889(0x117)]-_0x47f264,ship1['x'])),ship1[_0x128889(0x200)]=ship1['x'];}if(!isPlayerTwoAI&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0xd653d2=ship2[_0x128889(0x117)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(p2LeftPressed)ship2['x']-=ship2[_0x128889(0x1a7)];if(p2RightPressed)ship2['x']+=ship2['speed'];ship2['x']=Math[_0x128889(0x193)](0x0,Math[_0x128889(0x129)](gameCanvas[_0x128889(0x117)]-_0xd653d2,ship2['x'])),ship2[_0x128889(0x200)]=ship2['x'];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1){const _0x4c06fc=ship[_0x128889(0x117)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x5a9d96=![],_0x1616bd=![];if(isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x128889(0x1a3)&&currentPlayer===0x1&&isShowingIntro){if(_0x1eb38c!==null)_0x5a9d96=_0x1eb38c;if(_0x29ac35!==null)_0x1616bd=_0x29ac35;}if(_0x5a9d96||leftPressed)ship['x']-=ship['speed'];if(_0x1616bd||rightPressed)ship['x']+=ship[_0x128889(0x1a7)];ship['x']=Math[_0x128889(0x193)](0x0,Math[_0x128889(0x129)](gameCanvas['width']-_0x4c06fc,ship['x'])),ship[_0x128889(0x200)]=ship['x'];}}}}}if(!isManualControl||isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x128889(0x220)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x128889(0x220)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0xf3ec2e=ship1[_0x128889(0x200)]-ship1['x'];let _0x410e85=ship1['speed']*AI_POSITION_MOVE_SPEED_FACTOR;if(Math['abs'](_0xf3ec2e)>AI_MOVEMENT_DEADZONE)ship1['x']+=Math[_0x128889(0x10f)](_0xf3ec2e)*Math['min'](Math[_0x128889(0xf4)](_0xf3ec2e),_0x410e85);const _0x52c90e=ship1[_0x128889(0x117)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship1['x']=Math[_0x128889(0x193)](0x0,Math[_0x128889(0x129)](gameCanvas[_0x128889(0x117)]-_0x52c90e,ship1['x']));}if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x524e94=ship2['targetX']-ship2['x'];let _0x518e56=ship2[_0x128889(0x1a7)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x128889(0xf4)](_0x524e94)>AI_MOVEMENT_DEADZONE)ship2['x']+=Math[_0x128889(0x10f)](_0x524e94)*Math['min'](Math[_0x128889(0xf4)](_0x524e94),_0x518e56);const _0x44a561=ship2['width']+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship2['x']=Math['max'](0x0,Math[_0x128889(0x129)](gameCanvas[_0x128889(0x117)]-_0x44a561,ship2['x']));}}else{if(ship){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){const _0x56a3c1=ship['targetX']-ship['x'];let _0x45a382=ship[_0x128889(0x1a7)]*AI_POSITION_MOVE_SPEED_FACTOR;isPlayerTwoAI&&selectedGameMode===_0x128889(0x1d5)&&currentPlayer===0x2&&(_0x45a382=ship[_0x128889(0x1a7)]*(AI_POSITION_MOVE_SPEED_FACTOR*1.15));Math[_0x128889(0xf4)](_0x56a3c1)>AI_MOVEMENT_DEADZONE&&(ship['x']+=Math[_0x128889(0x10f)](_0x56a3c1)*Math[_0x128889(0x129)](Math[_0x128889(0xf4)](_0x56a3c1),_0x45a382));const _0x517410=ship['width']+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship['x']=Math[_0x128889(0x193)](0x0,Math['min'](gameCanvas[_0x128889(0x117)]-_0x517410,ship['x']));}}}}if(isTwoPlayerMode&&selectedGameMode===_0x128889(0x20a)){if(isPlayer1WaitingForRespawn&&_0x2d34f9>=player1RespawnTime)isPlayer1WaitingForRespawn=![];if(isPlayer1Invincible&&_0x2d34f9>=player1InvincibilityEndTime)isPlayer1Invincible=![];if(isPlayer2WaitingForRespawn&&_0x2d34f9>=player2RespawnTime)isPlayer2WaitingForRespawn=![];if(isPlayer2Invincible&&_0x2d34f9>=player2InvincibilityEndTime)isPlayer2Invincible=![];}else{if(isWaitingForRespawn&&_0x2d34f9>=respawnTime)isWaitingForRespawn=![];if(isInvincible&&_0x2d34f9>=invincibilityEndTime)isInvincible=![];}for(let _0x58264e=bullets[_0x128889(0x111)]-0x1;_0x58264e>=0x0;_0x58264e--){const _0x211894=bullets[_0x58264e];if(!_0x211894){bullets[_0x128889(0x212)](_0x58264e,0x1);continue;}_0x211894['y']-=_0x211894['speed'];if(_0x211894['y']+PLAYER_BULLET_HEIGHT<0x0){bullets['splice'](_0x58264e,0x1);continue;}for(let _0x58e39a=enemies['length']-0x1;_0x58e39a>=0x0;_0x58e39a--){const _0x414ebb=enemies[_0x58e39a];if(!_0x414ebb){enemies[_0x128889(0x212)](_0x58e39a,0x1);continue;}const _0xf86d9d={'x':_0x414ebb['x'],'y':_0x414ebb['y'],'width':_0x414ebb[_0x128889(0x131)]===ENEMY3_TYPE?BOSS_WIDTH:_0x414ebb['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,'height':_0x414ebb[_0x128889(0x131)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x414ebb['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT},_0x572067={'x':_0x211894['x'],'y':_0x211894['y'],'width':_0x211894[_0x128889(0x117)],'height':_0x211894[_0x128889(0x1d4)]};if(checkCollision(_0x572067,_0xf86d9d)){bullets['splice'](_0x58264e,0x1);const _0x94be2c=handleEnemyHit(_0x414ebb,_0x211894[_0x128889(0xf7)]);if(_0x94be2c['destroyed'])enemies['splice'](_0x58e39a,0x1);break;}}}for(let _0x11e93b=enemyBullets[_0x128889(0x111)]-0x1;_0x11e93b>=0x0;_0x11e93b--){const _0x312ef9=enemyBullets[_0x11e93b];if(!_0x312ef9){enemyBullets[_0x128889(0x212)](_0x11e93b,0x1);continue;}_0x312ef9['x']+=_0x312ef9['vx'],_0x312ef9['y']+=_0x312ef9['vy'],(_0x312ef9['y']>gameCanvas[_0x128889(0x1d4)]||_0x312ef9['y']<-ENEMY_BULLET_HEIGHT||_0x312ef9['x']<-ENEMY_BULLET_WIDTH||_0x312ef9['x']>gameCanvas['width'])&&enemyBullets[_0x128889(0x212)](_0x11e93b,0x1);}const _0xa98ef0=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x566ab7=0x2;for(let _0x562d0f=fallingShips[_0x128889(0x111)]-0x1;_0x562d0f>=0x0;_0x562d0f--){const _0x5d9e97=fallingShips[_0x562d0f];if(!_0x5d9e97){fallingShips[_0x128889(0x212)](_0x562d0f,0x1);continue;}let _0x343fbe=![];if(!_0x5d9e97[_0x128889(0x1c9)]){_0x5d9e97['y']+=FALLING_SHIP_SPEED;if(_0x5d9e97['y']>=_0xa98ef0){_0x5d9e97['y']=_0xa98ef0,_0x5d9e97[_0x128889(0x1c9)]=!![],_0x5d9e97[_0x128889(0x142)]=_0x2d34f9;!_0x5d9e97[_0x128889(0x22f)]&&(_0x5d9e97[_0x128889(0x141)]=0x0,_0x5d9e97[_0x128889(0x22f)]=!![]);let _0x51063b=null,_0x11a647=()=>{},_0x309c3d=![],_0x3b23fc=![],_0x12fe5a=![],_0x4ab911=null;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x5d9e97['targetPlayerId']==='player1'&&ship1&&player1Lives>0x0)_0x51063b=ship1,_0x309c3d=player1IsDualShipActive,_0x11a647=()=>{player1IsDualShipActive=!![];},_0x12fe5a=!![],_0x4ab911=_0x128889(0x18d);else(_0x5d9e97['targetPlayerId']===_0x128889(0x23c)||_0x5d9e97[_0x128889(0x12b)]==='ai_p2')&&ship2&&player2Lives>0x0&&(_0x51063b=ship2,_0x309c3d=player2IsDualShipActive,_0x11a647=()=>{player2IsDualShipActive=!![];},_0x12fe5a=!![],_0x4ab911=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x128889(0x220)?_0x128889(0x101):_0x128889(0x23c));}else{if(isTwoPlayerMode&&selectedGameMode===_0x128889(0x20a)){if(_0x5d9e97[_0x128889(0x12b)]===_0x128889(0x18d)&&ship1&&player1Lives>0x0)_0x51063b=ship1,_0x309c3d=player1IsDualShipActive,_0x3b23fc=isPlayer1ShipCaptured,_0x11a647=()=>{player1IsDualShipActive=!![],isPlayer1ShipCaptured=![];},_0x12fe5a=!![],_0x4ab911='player1';else _0x5d9e97['targetPlayerId']==='player2'&&ship2&&player2Lives>0x0&&(_0x51063b=ship2,_0x309c3d=player2IsDualShipActive,_0x3b23fc=isPlayer2ShipCaptured,_0x11a647=()=>{player2IsDualShipActive=!![],isPlayer2ShipCaptured=![];},_0x12fe5a=!![],_0x4ab911=_0x128889(0x23c));}else ship&&playerLives>0x0&&(_0x51063b=ship,_0x309c3d=isDualShipActive,_0x3b23fc=isShipCaptured,_0x11a647=()=>{const _0xb246d9=_0x128889;isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0xb246d9(0x1d5)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}isShipCaptured=![];},_0x12fe5a=!![],_0x4ab911=isTwoPlayerMode&&selectedGameMode===_0x128889(0x1d5)?String(currentPlayer):_0x128889(0x18d));}if(_0x12fe5a&&!_0x309c3d){_0x11a647(),playSound(_0x128889(0x1ff),![],0.4);if(_0x3b23fc&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x128889(0x220))){if(_0x4ab911===_0x128889(0x18d)&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x2d34f9+INVINCIBILITY_DURATION_MS;else{if(_0x4ab911===_0x128889(0x23c)&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x2d34f9+INVINCIBILITY_DURATION_MS;else ship&&(isInvincible=!![],invincibilityEndTime=_0x2d34f9+INVINCIBILITY_DURATION_MS);}}fallingShips['splice'](_0x562d0f,0x1),_0x343fbe=!![];continue;}else{if(_0x12fe5a&&_0x309c3d){fallingShips[_0x128889(0x212)](_0x562d0f,0x1),_0x343fbe=!![];continue;}else{fallingShips[_0x128889(0x212)](_0x562d0f,0x1),_0x343fbe=!![];continue;}}}}if(_0x343fbe)continue;const _0x4faa03=_0x2d34f9-_0x5d9e97[_0x128889(0x203)];if(_0x4faa03<FALLING_SHIP_FADE_DURATION_MS)_0x5d9e97[_0x128889(0x128)]=Math[_0x128889(0x193)](0x0,0x1-_0x4faa03/FALLING_SHIP_FADE_DURATION_MS);else _0x5d9e97[_0x128889(0x128)]=0x0;if(_0x5d9e97[_0x128889(0x22f)])_0x5d9e97[_0x128889(0x141)]=0x0;else{if(!_0x5d9e97[_0x128889(0x1c9)]&&typeof _0x5d9e97['rotationDirection']==='number'&&typeof FALLING_SHIP_ROTATION_SPEED===_0x128889(0x232)&&FALLING_SHIP_ROTATION_SPEED>0x0){const _0x47405d=FALLING_SHIP_ROTATION_SPEED*_0x5d9e97['rotationDirection'];_0x5d9e97[_0x128889(0x141)]+=_0x47405d,_0x5d9e97[_0x128889(0x221)]+=Math['abs'](_0x47405d);if(_0x5d9e97['totalRotation']>=_0x566ab7*0x2*Math['PI'])_0x5d9e97['rotation']=0x0,_0x5d9e97['rotationCompleted']=!![];else{if(_0x5d9e97[_0x128889(0x141)]>Math['PI']*0x2)_0x5d9e97['rotation']-=Math['PI']*0x2;if(_0x5d9e97['rotation']<0x0)_0x5d9e97[_0x128889(0x141)]+=Math['PI']*0x2;}}else _0x5d9e97['rotation']=_0x5d9e97[_0x128889(0x141)]||0x0;}if(!_0x5d9e97['landed']){let _0x2ffde2=null,_0x254f50=()=>{},_0x33045a=0x0,_0xd71358=![],_0x1225d6=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x128889(0x220)){if(_0x5d9e97[_0x128889(0x12b)]===_0x128889(0x18d)&&ship1&&player1Lives>0x0)_0x2ffde2=ship1,_0x1225d6=player1IsDualShipActive,_0x254f50=()=>{if(!_0x1225d6)player1IsDualShipActive=!![];},_0x33045a=0x1;else(_0x5d9e97[_0x128889(0x12b)]==='player2'||_0x5d9e97[_0x128889(0x12b)]===_0x128889(0x101))&&ship2&&player2Lives>0x0&&(_0x2ffde2=ship2,_0x1225d6=player2IsDualShipActive,_0x254f50=()=>{if(!_0x1225d6)player2IsDualShipActive=!![];},_0x33045a=0x2);}else{if(isTwoPlayerMode&&selectedGameMode===_0x128889(0x20a)){if(_0x5d9e97[_0x128889(0x12b)]==='player1'&&ship1&&player1Lives>0x0)_0x2ffde2=ship1,_0xd71358=isPlayer1ShipCaptured,_0x1225d6=player1IsDualShipActive,_0x254f50=()=>{if(!_0x1225d6)player1IsDualShipActive=!![];isPlayer1ShipCaptured=![];},_0x33045a=0x1;else _0x5d9e97[_0x128889(0x12b)]===_0x128889(0x23c)&&ship2&&player2Lives>0x0&&(_0x2ffde2=ship2,_0xd71358=isPlayer2ShipCaptured,_0x1225d6=player2IsDualShipActive,_0x254f50=()=>{if(!_0x1225d6)player2IsDualShipActive=!![];isPlayer2ShipCaptured=![];},_0x33045a=0x2);}else ship&&playerLives>0x0&&(_0x2ffde2=ship,_0xd71358=isShipCaptured,_0x1225d6=isDualShipActive,_0x254f50=()=>{const _0x58c78e=_0x128889;if(!_0x1225d6){isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x58c78e(0x1d5)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}}isShipCaptured=![];},_0x33045a=isTwoPlayerMode&&selectedGameMode===_0x128889(0x1d5)?currentPlayer:0x1);}if(_0x2ffde2&&!_0x1225d6){const _0x20bac8={'x':_0x5d9e97['x'],'y':_0x5d9e97['y'],'width':_0x5d9e97[_0x128889(0x117)],'height':_0x5d9e97['height']},_0x5de5ce={'x':_0x2ffde2['x'],'y':_0x2ffde2['y'],'width':_0x2ffde2[_0x128889(0x117)],'height':_0x2ffde2['height']};if(checkCollision(_0x20bac8,_0x5de5ce)){_0x254f50();if(_0xd71358&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x128889(0x220))){playSound('dualShipSound',![],0.4);if(_0x33045a===0x1&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x2d34f9+INVINCIBILITY_DURATION_MS;else{if(_0x33045a===0x2&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x2d34f9+INVINCIBILITY_DURATION_MS;else _0x33045a!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0x2d34f9+INVINCIBILITY_DURATION_MS);}}else playSound(_0x128889(0x1ff),![],0.4);fallingShips[_0x128889(0x212)](_0x562d0f,0x1);continue;}}}if(!_0x5d9e97[_0x128889(0x1c9)]&&_0x5d9e97['y']>=gameCanvas[_0x128889(0x1d4)])fallingShips[_0x128889(0x212)](_0x562d0f,0x1);}let _0x528bc5=0x0;const _0x23e3a1=enemies['some'](_0x92258e=>_0x92258e?.[_0x128889(0x1f5)]===_0x128889(0x1fe)),_0x1aec08=!isChallengingStage&&!isWaveTransitioning&&_0x23e3a1&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x128889(0x20a)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage));if(_0x1aec08){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0x128889(0x223),!![],0.1));const _0x2c7177=enemies['filter'](_0x4e7cac=>_0x4e7cac?.['state']===_0x128889(0x1fe));if(_0x2c7177[_0x128889(0x111)]>0x0){let _0x3502cb=gameCanvas[_0x128889(0x117)],_0x141427=0x0;_0x2c7177[_0x128889(0x1ab)](_0x460218=>{const _0x34519f=_0x128889;_0x460218&&(_0x3502cb=Math[_0x34519f(0x129)](_0x3502cb,_0x460218['x']),_0x141427=Math[_0x34519f(0x193)](_0x141427,_0x460218['x']+_0x460218[_0x34519f(0x117)]));});const _0x9e72ed=gameCanvas[_0x128889(0x117)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x5955fe=gameCanvas[_0x128889(0x117)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x141427>=_0x5955fe)gridMoveDirection=-0x1;else{if(gridMoveDirection===-0x1&&_0x3502cb<=_0x9e72ed)gridMoveDirection=0x1;}const _0x3ef728=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x528bc5=_0x3ef728*gridMoveDirection,currentGridOffsetX+=_0x528bc5,enemies[_0x128889(0x1ab)](_0x13b3ec=>{const _0xbd3a52=_0x128889;if(_0x13b3ec&&(_0x13b3ec['state']===_0xbd3a52(0x1dd)||_0x13b3ec[_0xbd3a52(0x1f5)]==='in_grid'||_0x13b3ec[_0xbd3a52(0x1f5)]===_0xbd3a52(0x236)))try{const _0x3e8a1b=_0x13b3ec[_0xbd3a52(0x131)]===ENEMY3_TYPE?BOSS_WIDTH:_0x13b3ec[_0xbd3a52(0x131)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0xd35df4,y:_0x3503df}=getCurrentGridSlotPosition(_0x13b3ec[_0xbd3a52(0xf5)],_0x13b3ec[_0xbd3a52(0x11b)],_0x3e8a1b);_0x13b3ec[_0xbd3a52(0x126)]=_0xd35df4,_0x13b3ec[_0xbd3a52(0x10c)]=_0x3503df;}catch(_0x3ac86d){console['error']('Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20'+_0x13b3ec?.['id']+_0xbd3a52(0x19d)+_0x13b3ec?.['state']+')\x20during\x20shift:',_0x3ac86d);}});}}else isGridSoundPlaying&&(stopSound(_0x128889(0x223)),isGridSoundPlaying=![]),_0x528bc5=0x0;for(let _0x4880fc=enemies[_0x128889(0x111)]-0x1;_0x4880fc>=0x0;_0x4880fc--){let _0x17e794=enemies[_0x4880fc];if(!_0x17e794){enemies[_0x128889(0x212)](_0x4880fc,0x1);continue;}const _0xa84f63=_0x17e794['id'];if(_0x17e794[_0x128889(0x1d6)]&&_0x17e794['state']!==_0x128889(0x114)){clearTimeout(_0x17e794[_0x128889(0x1d6)]);const _0x1bdc9a=enemySpawnTimeouts['indexOf'](_0x17e794[_0x128889(0x1d6)]);if(_0x1bdc9a>-0x1)enemySpawnTimeouts[_0x128889(0x212)](_0x1bdc9a,0x1);_0x17e794['capturePrepareTimeout']=null;}const _0x1a77f1=_0x17e794[_0x128889(0x131)]===ENEMY3_TYPE?BOSS_WIDTH:_0x17e794[_0x128889(0x131)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x5a70c1=_0x17e794[_0x128889(0x131)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x17e794[_0x128889(0x131)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x17e794['state']){case'following_bezier_path':{let _0x38cbf0=CS_ENTRANCE_PATH_SPEED;const _0x57c711=_0x17e794[_0x128889(0xf8)]||0x1;_0x38cbf0*=_0x57c711;if(!isChallengingStage){enemies[_0x128889(0x212)](_0x4880fc,0x1),_0x17e794=null;break;}let _0x570234=challengingStagePaths,_0x46f854=_0x570234[_0x17e794['entrancePathId']];if(!_0x46f854||_0x17e794[_0x128889(0x23f)]>=_0x46f854[_0x128889(0x111)]){enemies[_0x128889(0x212)](_0x4880fc,0x1),_0x17e794=null;break;}const _0x96cb61=_0x46f854[_0x17e794[_0x128889(0x23f)]];if(!_0x96cb61||!_0x96cb61['p0']||!_0x96cb61['p1']||!_0x96cb61['p2']||!_0x96cb61['p3']){console['error'](_0x128889(0x169)+_0x17e794['pathSegmentIndex']+_0x128889(0x215)+_0x17e794[_0x128889(0x1e9)]+_0x128889(0x168)+_0x17e794['id']),enemies[_0x128889(0x212)](_0x4880fc,0x1),_0x17e794=null;break;}_0x17e794[_0x128889(0x19b)]+=_0x38cbf0;let _0x32fa3e,_0x2739ea,_0x3d0bd7=_0x17e794['x'],_0x247698=_0x17e794['y'];if(_0x17e794[_0x128889(0x19b)]>=0x1){_0x17e794[_0x128889(0x19b)]=0x0,_0x17e794[_0x128889(0x23f)]++;if(_0x17e794[_0x128889(0x23f)]>=_0x46f854[_0x128889(0x111)])enemies[_0x128889(0x212)](_0x4880fc,0x1),_0x17e794=null;else{const _0x448831=_0x46f854[_0x17e794[_0x128889(0x23f)]];_0x448831?.['p0']?(_0x32fa3e=_0x448831['p0']['x'],_0x2739ea=_0x448831['p0']['y']):(console['error'](_0x128889(0x22a)+_0x17e794[_0x128889(0x23f)]+_0x128889(0x215)+_0x17e794[_0x128889(0x1e9)]+_0x128889(0x168)+_0xa84f63),enemies[_0x128889(0x212)](_0x4880fc,0x1),_0x17e794=null);}}else try{_0x32fa3e=calculateBezierPoint(_0x17e794[_0x128889(0x19b)],_0x96cb61['p0']['x'],_0x96cb61['p1']['x'],_0x96cb61['p2']['x'],_0x96cb61['p3']['x']),_0x2739ea=calculateBezierPoint(_0x17e794[_0x128889(0x19b)],_0x96cb61['p0']['y'],_0x96cb61['p1']['y'],_0x96cb61['p2']['y'],_0x96cb61['p3']['y']);}catch(_0x30ea26){console[_0x128889(0x1a0)]('Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20'+_0xa84f63+':',_0x30ea26),enemies[_0x128889(0x212)](_0x4880fc,0x1),_0x17e794=null;}_0x17e794&&(isNaN(_0x32fa3e)||isNaN(_0x2739ea)?(console[_0x128889(0x1a0)]('NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20'+_0xa84f63+_0x128889(0xf6)),enemies[_0x128889(0x212)](_0x4880fc,0x1),_0x17e794=null):(_0x17e794[_0x128889(0x14f)]=_0x32fa3e-_0x3d0bd7,_0x17e794[_0x128889(0x1b6)]=_0x2739ea-_0x247698,_0x17e794['x']=_0x32fa3e,_0x17e794['y']=_0x2739ea));break;}case _0x128889(0x177):{if(isChallengingStage){enemies['splice'](_0x4880fc,0x1),_0x17e794=null;break;}let _0x22d5b6=normalWaveEntrancePaths,_0x41ce41=_0x22d5b6[_0x17e794['entrancePathId']],_0x144ae7;_0x17e794[_0x128889(0x1e9)]==='boss_loop_left'||_0x17e794['entrancePathId']===_0x128889(0x228)?_0x144ae7=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x144ae7=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x41ce41){console[_0x128889(0x143)](_0x128889(0xf2)+_0xa84f63+'\x20missing\x20SHARED\x20path\x20'+_0x17e794['entrancePathId']+_0x128889(0xfa));try{_0x17e794[_0x128889(0x126)]=_0x17e794['targetGridX']??gameCanvas[_0x128889(0x117)]/0x2,_0x17e794[_0x128889(0x10c)]=_0x17e794[_0x128889(0x10c)]??ENEMY_TOP_MARGIN;}catch(_0x543c11){console[_0x128889(0x1a0)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0xa84f63+_0x128889(0x1fa),_0x543c11),_0x17e794[_0x128889(0x126)]=gameCanvas[_0x128889(0x117)]/0x2,_0x17e794['targetGridY']=ENEMY_TOP_MARGIN;}_0x17e794[_0x128889(0x1f5)]=_0x128889(0x236),_0x17e794[_0x128889(0x19b)]=0x0,_0x17e794[_0x128889(0x23f)]=0x0,_0x17e794[_0x128889(0x14f)]=0x0,_0x17e794[_0x128889(0x1b6)]=0x0;_0x17e794['squadronId']!==undefined&&squadronCompletionStatus[_0x17e794['squadronId']]&&squadronCompletionStatus[_0x17e794[_0x128889(0x15d)]]['completed']++;break;}if(_0x17e794[_0x128889(0x23f)]>=_0x41ce41[_0x128889(0x111)]){console[_0x128889(0x143)]('Enemy\x20'+_0xa84f63+_0x128889(0x1de)+_0x17e794[_0x128889(0x23f)]+_0x128889(0x15f)+_0x17e794[_0x128889(0x1e9)]+_0x128889(0xfa));try{_0x17e794[_0x128889(0x126)]=_0x17e794[_0x128889(0x126)]??gameCanvas[_0x128889(0x117)]/0x2,_0x17e794[_0x128889(0x10c)]=_0x17e794['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x585b80){console[_0x128889(0x1a0)](_0x128889(0x1aa)+_0xa84f63+_0x128889(0x165),_0x585b80),_0x17e794[_0x128889(0x126)]=gameCanvas['width']/0x2,_0x17e794[_0x128889(0x10c)]=ENEMY_TOP_MARGIN;}_0x17e794[_0x128889(0x1f5)]=_0x128889(0x236),_0x17e794[_0x128889(0x19b)]=0x0,_0x17e794[_0x128889(0x23f)]=0x0,_0x17e794[_0x128889(0x14f)]=0x0,_0x17e794[_0x128889(0x1b6)]=0x0;_0x17e794[_0x128889(0x15d)]!==undefined&&squadronCompletionStatus[_0x17e794['squadronId']]&&squadronCompletionStatus[_0x17e794['squadronId']][_0x128889(0x231)]++;break;}const _0x5cc4f4=_0x41ce41[_0x17e794[_0x128889(0x23f)]];if(!_0x5cc4f4||!_0x5cc4f4['p0']||!_0x5cc4f4['p1']||!_0x5cc4f4['p2']||!_0x5cc4f4['p3']){console[_0x128889(0x1a0)](_0x128889(0x1ac)+_0x17e794['pathSegmentIndex']+_0x128889(0x1da)+_0x17e794[_0x128889(0x1e9)]+_0x128889(0x168)+_0xa84f63+_0x128889(0xfa));try{_0x17e794['targetGridX']=_0x17e794['targetGridX']??gameCanvas[_0x128889(0x117)]/0x2,_0x17e794[_0x128889(0x10c)]=_0x17e794[_0x128889(0x10c)]??ENEMY_TOP_MARGIN+_0x17e794[_0x128889(0xf5)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x48a5dc){console[_0x128889(0x1a0)](_0x128889(0x1aa)+_0xa84f63+'\x20after\x20bad\x20segment',_0x48a5dc),_0x17e794[_0x128889(0x126)]=gameCanvas['width']/0x2,_0x17e794[_0x128889(0x10c)]=ENEMY_TOP_MARGIN;}_0x17e794[_0x128889(0x1f5)]=_0x128889(0x236),_0x17e794['pathT']=0x0,_0x17e794[_0x128889(0x23f)]=0x0,_0x17e794[_0x128889(0x14f)]=0x0,_0x17e794['velocityY']=0x0;_0x17e794[_0x128889(0x15d)]!==undefined&&squadronCompletionStatus[_0x17e794['squadronId']]&&squadronCompletionStatus[_0x17e794[_0x128889(0x15d)]][_0x128889(0x231)]++;break;}_0x17e794['pathT']+=_0x144ae7;let _0x441073,_0x39c836,_0x5d5b84=_0x17e794['x'],_0x199930=_0x17e794['y'];if(_0x17e794['pathT']>=0x1){_0x17e794[_0x128889(0x19b)]=0x0,_0x17e794['pathSegmentIndex']++;if(_0x17e794[_0x128889(0x23f)]>=_0x41ce41[_0x128889(0x111)]){let _0x2b8c96,_0x3f1621;try{_0x2b8c96=calculateBezierPoint(0x1,_0x5cc4f4['p0']['x'],_0x5cc4f4['p1']['x'],_0x5cc4f4['p2']['x'],_0x5cc4f4['p3']['x']),_0x3f1621=calculateBezierPoint(0x1,_0x5cc4f4['p0']['y'],_0x5cc4f4['p1']['y'],_0x5cc4f4['p2']['y'],_0x5cc4f4['p3']['y']);}catch(_0x2b059){console['error'](_0x128889(0x208)+_0xa84f63+_0x128889(0x1ba)+_0x17e794[_0x128889(0x1e9)],_0x2b059),_0x2b8c96=_0x5cc4f4['p3']['x'],_0x3f1621=_0x5cc4f4['p3']['y'];}_0x17e794['x']=_0x2b8c96,_0x17e794['y']=_0x3f1621;try{_0x17e794[_0x128889(0x126)]=_0x17e794['targetGridX']??gameCanvas['width']/0x2,_0x17e794[_0x128889(0x10c)]=_0x17e794[_0x128889(0x10c)]??ENEMY_TOP_MARGIN;}catch(_0x3b3afd){console[_0x128889(0x1a0)](_0x128889(0x153)+_0xa84f63+'\x20at\x20end\x20of\x20normal\x20path\x20'+_0x17e794[_0x128889(0x1e9)],_0x3b3afd),_0x17e794['targetGridX']=_0x17e794['x'],_0x17e794[_0x128889(0x10c)]=ENEMY_TOP_MARGIN+_0x17e794[_0x128889(0xf5)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x41219d=_0x17e794[_0x128889(0x1f5)];_0x17e794[_0x128889(0x1f5)]=_0x128889(0x236),_0x17e794[_0x128889(0x14f)]=0x0,_0x17e794[_0x128889(0x1b6)]=0x0,_0x17e794[_0x128889(0x23f)]=0x0;_0x41219d===_0x128889(0x177)&&_0x17e794['squadronId']!==undefined&&squadronCompletionStatus[_0x17e794['squadronId']]&&squadronCompletionStatus[_0x17e794['squadronId']]['completed']++;break;}else{const _0x52883c=_0x41ce41[_0x17e794['pathSegmentIndex']];if(_0x52883c?.['p0'])_0x441073=_0x52883c['p0']['x'],_0x39c836=_0x52883c['p0']['y'];else{console['error'](_0x128889(0x225)+_0x17e794['pathSegmentIndex']+_0x128889(0x1da)+_0x17e794[_0x128889(0x1e9)]+_0x128889(0x168)+_0xa84f63+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x17e794['targetGridX']=_0x17e794['targetGridX']??gameCanvas[_0x128889(0x117)]/0x2,_0x17e794[_0x128889(0x10c)]=_0x17e794[_0x128889(0x10c)]??ENEMY_TOP_MARGIN;}catch(_0x1a671a){console[_0x128889(0x1a0)](_0x128889(0x1aa)+_0xa84f63+_0x128889(0x1b0),_0x1a671a),_0x17e794['targetGridX']=gameCanvas[_0x128889(0x117)]/0x2,_0x17e794[_0x128889(0x10c)]=ENEMY_TOP_MARGIN;}_0x17e794['state']=_0x128889(0x236),_0x17e794['pathT']=0x0,_0x17e794[_0x128889(0x23f)]=0x0,_0x17e794['velocityX']=0x0,_0x17e794[_0x128889(0x1b6)]=0x0;_0x17e794['squadronId']!==undefined&&squadronCompletionStatus[_0x17e794['squadronId']]&&squadronCompletionStatus[_0x17e794['squadronId']]['completed']++;break;}}}else try{_0x441073=calculateBezierPoint(_0x17e794[_0x128889(0x19b)],_0x5cc4f4['p0']['x'],_0x5cc4f4['p1']['x'],_0x5cc4f4['p2']['x'],_0x5cc4f4['p3']['x']),_0x39c836=calculateBezierPoint(_0x17e794[_0x128889(0x19b)],_0x5cc4f4['p0']['y'],_0x5cc4f4['p1']['y'],_0x5cc4f4['p2']['y'],_0x5cc4f4['p3']['y']);}catch(_0x513185){console[_0x128889(0x1a0)]('Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20'+_0xa84f63+':',_0x513185);try{_0x17e794[_0x128889(0x126)]=_0x17e794[_0x128889(0x126)]??gameCanvas[_0x128889(0x117)]/0x2,_0x17e794[_0x128889(0x10c)]=_0x17e794['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x486c29){console[_0x128889(0x1a0)](_0x128889(0x1aa)+_0xa84f63+_0x128889(0x108),_0x486c29),_0x17e794[_0x128889(0x126)]=gameCanvas[_0x128889(0x117)]/0x2,_0x17e794['targetGridY']=ENEMY_TOP_MARGIN;}_0x17e794[_0x128889(0x1f5)]='moving_to_grid',_0x17e794['pathT']=0x0,_0x17e794[_0x128889(0x23f)]=0x0,_0x17e794[_0x128889(0x14f)]=0x0,_0x17e794[_0x128889(0x1b6)]=0x0;_0x17e794['squadronId']!==undefined&&squadronCompletionStatus[_0x17e794['squadronId']]&&squadronCompletionStatus[_0x17e794['squadronId']][_0x128889(0x231)]++;break;}if(_0x17e794&&_0x17e794['state']==='following_entrance_path'){if(isNaN(_0x441073)||isNaN(_0x39c836)){console[_0x128889(0x1a0)](_0x128889(0x119)+_0xa84f63+_0x128889(0xfa));try{_0x17e794[_0x128889(0x126)]=_0x17e794[_0x128889(0x126)]??gameCanvas[_0x128889(0x117)]/0x2,_0x17e794[_0x128889(0x10c)]=_0x17e794['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x54f804){console[_0x128889(0x1a0)](_0x128889(0x1aa)+_0xa84f63+_0x128889(0x1a5),_0x54f804),_0x17e794[_0x128889(0x126)]=gameCanvas[_0x128889(0x117)]/0x2,_0x17e794[_0x128889(0x10c)]=ENEMY_TOP_MARGIN;}_0x17e794[_0x128889(0x1f5)]=_0x128889(0x236),_0x17e794[_0x128889(0x19b)]=0x0,_0x17e794[_0x128889(0x23f)]=0x0,_0x17e794[_0x128889(0x14f)]=0x0,_0x17e794['velocityY']=0x0,_0x17e794[_0x128889(0x15d)]!==undefined&&squadronCompletionStatus[_0x17e794[_0x128889(0x15d)]]&&squadronCompletionStatus[_0x17e794[_0x128889(0x15d)]][_0x128889(0x231)]++;}else{let _0x289664=_0x441073;const _0xb20ef5=currentWavePatternIndex===0x1&&(_0x17e794[_0x128889(0x15d)]===0x2||_0x17e794[_0x128889(0x15d)]===0x3),_0x201ee4=typeof _0x17e794[_0x128889(0x16d)]===_0x128889(0x232)&&_0x17e794['squadronEnemyIndex']%0x2!==0x0;if(_0xb20ef5&&_0x201ee4){const _0x3629d3=_0x1a77f1+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x289664=_0x441073+_0x3629d3;}_0x17e794[_0x128889(0x14f)]=_0x289664-_0x5d5b84,_0x17e794[_0x128889(0x1b6)]=_0x39c836-_0x199930,_0x17e794['x']=_0x289664,_0x17e794['y']=_0x39c836;}}break;}case _0x128889(0x236):{if(_0x17e794['targetGridX']==null||_0x17e794[_0x128889(0x10c)]==null){console[_0x128889(0x143)]('Enemy\x20'+_0xa84f63+'\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.');try{const {x:_0x3fc191,y:_0x30d020}=getCurrentGridSlotPosition(_0x17e794['gridRow'],_0x17e794[_0x128889(0x11b)],_0x1a77f1);_0x17e794[_0x128889(0x126)]=_0x3fc191,_0x17e794['targetGridY']=_0x30d020;}catch(_0x2442e7){console[_0x128889(0x1a0)](_0x128889(0x1aa)+_0xa84f63+_0x128889(0x209),_0x2442e7),_0x17e794[_0x128889(0x1f5)]='in_grid',_0x17e794['x']=gameCanvas[_0x128889(0x117)]/0x2,_0x17e794['y']=ENEMY_TOP_MARGIN;break;}}const _0xffd868=_0x17e794[_0x128889(0x126)],_0x16c342=_0x17e794[_0x128889(0x10c)],_0x4e2433=_0xffd868-_0x17e794['x'],_0x37ad42=_0x16c342-_0x17e794['y'],_0x3e8d9b=Math[_0x128889(0x1a6)](_0x4e2433*_0x4e2433+_0x37ad42*_0x37ad42),_0x330787=ENTRANCE_SPEED*1.2,_0x44c951=_0x330787*0.5;if(_0x3e8d9b>_0x44c951)_0x17e794[_0x128889(0x14f)]=_0x4e2433/_0x3e8d9b*_0x330787,_0x17e794[_0x128889(0x1b6)]=_0x37ad42/_0x3e8d9b*_0x330787,_0x17e794['x']+=_0x17e794[_0x128889(0x14f)],_0x17e794['y']+=_0x17e794[_0x128889(0x1b6)];else{_0x17e794['x']=_0xffd868,_0x17e794['y']=_0x16c342,_0x17e794[_0x128889(0x14f)]=0x0,_0x17e794[_0x128889(0x1b6)]=0x0;const _0x30b310=_0x17e794[_0x128889(0x1f5)];_0x17e794[_0x128889(0x1f5)]=_0x128889(0x1fe),_0x17e794[_0x128889(0x10d)]=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound('gridBackgroundSound',!![],0.1));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x2d34f9,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date['now'](),firstEnemyLanded=!![]);if(_0x30b310==='moving_to_grid'&&!isChallengingStage&&!isFullGridWave&&_0x17e794[_0x128889(0x15d)]!==undefined){const _0x31b1c7=_0x17e794[_0x128889(0x15d)],_0x18268a=squadronCompletionStatus[_0x31b1c7];if(_0x18268a&&!_0x18268a[_0x128889(0x1b7)]){const _0x5dbd14=enemies[_0x128889(0x11d)](_0x47b37d=>{const _0x176695=_0x128889;if(_0x47b37d&&_0x47b37d[_0x176695(0x15d)]===_0x31b1c7)return _0x47b37d['state']==='in_grid'||!enemies[_0x176695(0x158)](_0x37c6a1=>_0x37c6a1['id']===_0x47b37d['id']);return!![];});if(_0x5dbd14){_0x18268a['hasFiredPostLanding']=!![];const _0x74d003=enemies[_0x128889(0x234)](_0xad9585=>_0xad9585&&_0xad9585[_0x128889(0x15d)]===_0x31b1c7&&_0xad9585['state']===_0x128889(0x1fe)&&(_0xad9585[_0x128889(0x131)]===ENEMY2_TYPE||_0xad9585[_0x128889(0x131)]===ENEMY3_TYPE)&&!(_0xad9585[_0x128889(0x131)]===ENEMY3_TYPE&&_0xad9585[_0x128889(0x139)]));if(_0x74d003[_0x128889(0x111)]>0x0){const _0x5acbb6=_0x74d003[Math[_0x128889(0x15b)](Math[_0x128889(0x1a8)]()*_0x74d003['length'])],_0x257cb1=_0x5acbb6['id'],_0x2db0a9=0xc8+Math['random']()*0x190,_0x414b04=setTimeout(()=>{const _0x10d63c=_0x128889;try{const _0x26b0f8=enemySpawnTimeouts[_0x10d63c(0x233)](_0x414b04);if(_0x26b0f8>-0x1)enemySpawnTimeouts[_0x10d63c(0x212)](_0x26b0f8,0x1);if(isPaused||!isInGameState||playerLives<=0x0&&(!isTwoPlayerMode||player1Lives<=0x0&&player2Lives<=0x0)||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x54cd9a=enemies[_0x10d63c(0x1df)](_0x1f9118=>_0x1f9118&&_0x1f9118['id']===_0x257cb1);_0x54cd9a&&_0x54cd9a[_0x10d63c(0x1f5)]===_0x10d63c(0x1fe)&&(createBulletSimple(_0x54cd9a)&&(playSound(_0x10d63c(0x151),![],0.4),_0x54cd9a[_0x10d63c(0x1ed)]=Date[_0x10d63c(0x1b5)]()));}catch(_0x5aaefe){console[_0x10d63c(0x1a0)](_0x10d63c(0x13f)+_0x257cb1+':',_0x5aaefe);}},_0x2db0a9);enemySpawnTimeouts[_0x128889(0x160)](_0x414b04);}}}}}break;}case _0x128889(0x1fe):{try{const _0x3cec9f=_0x17e794[_0x128889(0x131)]===ENEMY3_TYPE?BOSS_WIDTH:_0x17e794[_0x128889(0x131)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x286fbe,y:_0x5a94aa}=getCurrentGridSlotPosition(_0x17e794[_0x128889(0xf5)],_0x17e794[_0x128889(0x11b)],_0x3cec9f);typeof _0x286fbe===_0x128889(0x232)&&!isNaN(_0x286fbe)&&(_0x17e794['x']=_0x286fbe),typeof _0x5a94aa===_0x128889(0x232)&&!isNaN(_0x5a94aa)&&(_0x17e794['y']=_0x5a94aa),_0x17e794[_0x128889(0x126)]=_0x286fbe,_0x17e794['targetGridY']=_0x5a94aa;}catch(_0x4afc0c){console[_0x128889(0x1a0)](_0x128889(0x127)+_0x17e794['id']+':',_0x4afc0c);}_0x17e794[_0x128889(0x14f)]=_0x1aec08?_0x528bc5:0x0,_0x17e794['velocityY']=0x0;_0x17e794[_0x128889(0x131)]===ENEMY3_TYPE&&_0x17e794[_0x128889(0x139)]&&_0x17e794[_0x128889(0x130)]&&(_0x17e794[_0x128889(0x12a)]=_0x17e794['x']+CAPTURED_SHIP_OFFSET_X,_0x17e794[_0x128889(0x1e7)]=_0x17e794['y']+CAPTURED_SHIP_OFFSET_Y);break;}case _0x128889(0x121):{_0x17e794[_0x128889(0x14f)]=0x0,_0x17e794[_0x128889(0x1b6)]=0x0;break;}case _0x128889(0x114):{_0x17e794[_0x128889(0x14f)]=0x0,_0x17e794[_0x128889(0x1b6)]=0x0;break;}case _0x128889(0xf1):{let _0x59bada=isTwoPlayerMode&&selectedGameMode===_0x128889(0x20a)?isPlayer1ShipCaptured||isPlayer2ShipCaptured:isShipCaptured;if(_0x59bada){_0x17e794[_0x128889(0x1f5)]='returning';try{const {x:_0x5ce694,y:_0x2767b5}=getCurrentGridSlotPosition(_0x17e794[_0x128889(0xf5)],_0x17e794[_0x128889(0x11b)],_0x1a77f1);_0x17e794[_0x128889(0x126)]=_0x5ce694,_0x17e794['targetGridY']=_0x2767b5;}catch(_0x1e2598){console[_0x128889(0x1a0)](_0x128889(0x133)+_0x17e794['id']+':',_0x1e2598),_0x17e794['targetGridX']=gameCanvas[_0x128889(0x117)]/0x2,_0x17e794['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0x2bf2a6=_0x17e794[_0x128889(0x200)],_0x5bc098=_0x17e794[_0x128889(0x154)];if(_0x2bf2a6==null||_0x5bc098==null){console[_0x128889(0x1a0)](_0x128889(0x112)+_0x17e794['id']+_0x128889(0x16e)),_0x17e794[_0x128889(0x1f5)]='returning';try{const {x:_0xf22498,y:_0x3e82bb}=getCurrentGridSlotPosition(_0x17e794[_0x128889(0xf5)],_0x17e794[_0x128889(0x11b)],_0x1a77f1);_0x17e794['targetGridX']=_0xf22498,_0x17e794['targetGridY']=_0x3e82bb;}catch(_0x408dde){console[_0x128889(0x1a0)](_0x128889(0x133)+_0x17e794['id']+':',_0x408dde),_0x17e794[_0x128889(0x126)]=gameCanvas[_0x128889(0x117)]/0x2,_0x17e794['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0x78ef9c=_0x2bf2a6-_0x17e794['x'],_0x180425=_0x5bc098-_0x17e794['y'],_0xe2c727=Math[_0x128889(0x1a6)](_0x78ef9c*_0x78ef9c+_0x180425*_0x180425),_0x1cb7d4=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x2d13e0=_0x1cb7d4*0.6;_0xe2c727>_0x2d13e0?(_0x17e794[_0x128889(0x14f)]=_0x78ef9c/_0xe2c727*_0x1cb7d4,_0x17e794[_0x128889(0x1b6)]=_0x180425/_0xe2c727*_0x1cb7d4,_0x17e794['x']+=_0x17e794[_0x128889(0x14f)],_0x17e794['y']+=_0x17e794[_0x128889(0x1b6)]):(_0x17e794['x']=_0x2bf2a6,_0x17e794['y']=_0x5bc098,_0x17e794[_0x128889(0x14f)]=0x0,_0x17e794[_0x128889(0x1b6)]=0x0,_0x17e794[_0x128889(0x1f5)]=_0x128889(0x238),_0x17e794['captureStartTime']=_0x2d34f9,capturingBossId=_0x17e794['id'],captureBeamActive=!![],captureBeamSource={'x':_0x17e794['x']+_0x1a77f1/0x2,'y':_0x17e794['y']+_0x5a70c1},captureBeamTargetY=_0x17e794['y'],captureBeamProgress=0x0,playSound('captureSound',![],0.6),_0x17e794[_0x128889(0x1f3)]&&(captureAttemptMadeThisLevel=!![],delete _0x17e794[_0x128889(0x1f3)]));break;}case _0x128889(0x238):{_0x17e794[_0x128889(0x14f)]=0x0,_0x17e794[_0x128889(0x1b6)]=0x0;_0x17e794[_0x128889(0x1f3)]&&!captureAttemptMadeThisLevel&&(captureAttemptMadeThisLevel=!![],delete _0x17e794['isPreparingForImmediateCapture']);let _0x168338=![];isTwoPlayerMode&&selectedGameMode===_0x128889(0x20a)?_0x168338=isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x17e794['id']||isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x17e794['id']:_0x168338=isShipCaptured&&capturedBossIdWithMessage===_0x17e794['id'];if(_0x168338){captureBeamActive=![];if(capturingBossId===_0x17e794['id'])capturingBossId=null;_0x17e794[_0x128889(0x1f5)]=_0x128889(0x1dd),stopSound(_0x128889(0x18a));break;}const _0x24a4d6=_0x2d34f9-_0x17e794[_0x128889(0x18b)],_0xe0b04b=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x4ef2fe=CAPTURE_BEAM_DURATION_MS;if(_0x24a4d6<_0xe0b04b)captureBeamProgress=_0x24a4d6/_0xe0b04b;else{if(_0x24a4d6<_0x4ef2fe-_0xe0b04b)captureBeamProgress=0x1;else{if(_0x24a4d6<_0x4ef2fe)captureBeamProgress=0x1-(_0x24a4d6-(_0x4ef2fe-_0xe0b04b))/_0xe0b04b;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(_0x128889(0x18a)),_0x17e794[_0x128889(0x1f5)]=_0x128889(0x219),_0x17e794[_0x128889(0x11e)]=generateAttackPathInternal(_0x17e794),_0x17e794[_0x128889(0x187)]=0x0,_0x17e794[_0x128889(0x214)]=0x0,_0x17e794[_0x128889(0x1a7)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x17e794['lastFiredTime']=0x0,_0x17e794[_0x128889(0x205)]=!![],_0x17e794[_0x128889(0x22c)]=0x0,_0x17e794[_0x128889(0x109)]=null;break;}}}captureBeamProgress=Math[_0x128889(0x193)](0x0,Math[_0x128889(0x129)](0x1,captureBeamProgress));if(captureBeamActive&&captureBeamProgress>=0.95){const _0x225178=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x1c0127=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x447999=_0x17e794['x']+_0x1a77f1/0x2,_0x3eb756=_0x17e794['y']+_0x5a70c1,_0x4d1552=gameCanvas['height']-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x16f812=Math[_0x128889(0x193)](_0x225178,_0x1c0127),_0x5e2e23=_0x447999-_0x16f812/0x2,_0x5f047b=_0x3eb756,_0x58a47c=_0x4d1552-_0x3eb756;if(_0x58a47c>0x0){const _0x2dde11={'x':_0x5e2e23,'y':_0x5f047b,'width':_0x16f812,'height':_0x58a47c};let _0x4cdfe4=null,_0x151b83=0x0;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&checkCollision(ship1,_0x2dde11))_0x4cdfe4=ship1,_0x151b83=0x1;else ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&checkCollision(ship2,_0x2dde11)&&(_0x4cdfe4=ship2,_0x151b83=0x2);}else ship&&playerLives>0x0&&!isShipCaptured&&checkCollision(ship,_0x2dde11)&&(_0x4cdfe4=ship,_0x151b83=currentPlayer);if(_0x4cdfe4){_0x17e794[_0x128889(0x130)]={'width':_0x4cdfe4[_0x128889(0x117)],'height':_0x4cdfe4['height']},_0x17e794[_0x128889(0x139)]=!![],stopSound('captureSound'),_0x17e794['state']=_0x128889(0x206),_0x17e794['targetGridX']=null,_0x17e794[_0x128889(0x10c)]=null,_0x17e794[_0x128889(0x155)]=_0x4cdfe4['y'],_0x17e794[_0x128889(0x179)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x2d34f9,capturedBossIdWithMessage=_0x17e794['id'],playSound(_0x128889(0x175),![],0.3),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,handlePlayerShipCollision(_0x151b83,![],_0x2d34f9,!![]);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x128889(0x220))&&aiPlayerActivelySeekingCaptureById)aiPlayerActivelySeekingCaptureById=null;break;}}}break;}case _0x128889(0x206):{_0x17e794[_0x128889(0x14f)]=0x0,_0x17e794[_0x128889(0x1b6)]=0x0;if(_0x17e794[_0x128889(0x139)]&&_0x17e794[_0x128889(0x130)]&&typeof _0x17e794['initialCaptureAnimationY']===_0x128889(0x232)){const _0x1047bc=_0x2d34f9-captureMessageStartTime,_0x136847=Math[_0x128889(0x129)](0x1,_0x1047bc/CAPTURE_MESSAGE_DURATION),_0x4c4bef=_0x17e794['y']+CAPTURED_SHIP_OFFSET_Y,_0x57cd07=_0x17e794[_0x128889(0x155)];_0x17e794[_0x128889(0x1e7)]=_0x57cd07+(_0x4c4bef-_0x57cd07)*_0x136847,_0x17e794[_0x128889(0x12a)]=_0x17e794['x']+CAPTURED_SHIP_OFFSET_X;}else _0x17e794['capturedShipX']=_0x17e794['x']+CAPTURED_SHIP_OFFSET_X,_0x17e794[_0x128889(0x1e7)]=_0x17e794['y']+CAPTURED_SHIP_OFFSET_Y;break;}case _0x128889(0x219):{if(isEntrancePhaseActive)break;const _0x451c91=_0x17e794['attackPathSegments'],_0x5dca0f=3.8;if(!_0x451c91||_0x451c91[_0x128889(0x111)]===0x0){console[_0x128889(0x1a0)](_0x128889(0xf2)+_0xa84f63+_0x128889(0x183)),_0x17e794[_0x128889(0x1f5)]='returning';try{const {x:_0xfeb60c,y:_0x4c0127}=getCurrentGridSlotPosition(_0x17e794[_0x128889(0xf5)],_0x17e794[_0x128889(0x11b)],_0x1a77f1);_0x17e794['targetGridX']=_0xfeb60c,_0x17e794[_0x128889(0x10c)]=_0x4c0127;}catch(_0x588d01){console[_0x128889(0x1a0)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0xa84f63+'\x20(no\x20attack\x20path):',_0x588d01),_0x17e794[_0x128889(0x126)]=gameCanvas[_0x128889(0x117)]/0x2,_0x17e794[_0x128889(0x10c)]=ENEMY_TOP_MARGIN;}break;}if(_0x17e794['attackPathSegmentIndex']>=_0x451c91[_0x128889(0x111)]){console[_0x128889(0x143)](_0x128889(0xf2)+_0xa84f63+_0x128889(0x1b2)+_0x17e794['attackPathSegmentIndex']+_0x128889(0x12d)+_0x451c91[_0x128889(0x111)]+_0x128889(0x116)),_0x17e794[_0x128889(0x1f5)]=_0x128889(0x1dd);try{const {x:_0x3c6f8d,y:_0x24f8a2}=getCurrentGridSlotPosition(_0x17e794['gridRow'],_0x17e794[_0x128889(0x11b)],_0x1a77f1);_0x17e794[_0x128889(0x126)]=_0x3c6f8d,_0x17e794[_0x128889(0x10c)]=_0x24f8a2;}catch(_0x3fbe29){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0xa84f63+_0x128889(0x122),_0x3fbe29),_0x17e794[_0x128889(0x126)]=gameCanvas['width']/0x2,_0x17e794[_0x128889(0x10c)]=ENEMY_TOP_MARGIN;}break;}const _0x3c6ecb=_0x451c91[_0x17e794['attackPathSegmentIndex']];if(!_0x3c6ecb||!_0x3c6ecb['p0']||!_0x3c6ecb['p1']||!_0x3c6ecb['p2']||!_0x3c6ecb['p3']){console['error'](_0x128889(0xf2)+_0xa84f63+'\x20attacking,\x20invalid\x20segment\x20'+_0x17e794[_0x128889(0x187)]+_0x128889(0x23d)),_0x17e794[_0x128889(0x1f5)]=_0x128889(0x1dd);try{const {x:_0x532a9a,y:_0x143edc}=getCurrentGridSlotPosition(_0x17e794[_0x128889(0xf5)],_0x17e794['gridCol'],_0x1a77f1);_0x17e794['targetGridX']=_0x532a9a,_0x17e794[_0x128889(0x10c)]=_0x143edc;}catch(_0x104754){console[_0x128889(0x1a0)](_0x128889(0x1e0)+_0xa84f63+_0x128889(0x1e4),_0x104754),_0x17e794[_0x128889(0x126)]=gameCanvas['width']/0x2,_0x17e794['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0x1d3b68=_0x17e794[_0x128889(0x1a7)]/0x3e8*_0x5dca0f;_0x17e794[_0x128889(0x214)]+=_0x1d3b68;let _0x2cce05,_0x513253;const _0x369a3e=_0x17e794['x'],_0x590675=_0x17e794['y'];if(_0x17e794[_0x128889(0x214)]>=0x1){try{_0x2cce05=calculateBezierPoint(0x1,_0x3c6ecb['p0']['x'],_0x3c6ecb['p1']['x'],_0x3c6ecb['p2']['x'],_0x3c6ecb['p3']['x']),_0x513253=calculateBezierPoint(0x1,_0x3c6ecb['p0']['y'],_0x3c6ecb['p1']['y'],_0x3c6ecb['p2']['y'],_0x3c6ecb['p3']['y']);}catch(_0x9e971c){console['error'](_0x128889(0x202)+_0x17e794['id']+':',_0x9e971c),_0x2cce05=_0x17e794['x'],_0x513253=_0x17e794['y'],_0x17e794[_0x128889(0x1f5)]=_0x128889(0x1dd);try{const {x:_0x10cdbd,y:_0x2593b8}=getCurrentGridSlotPosition(_0x17e794['gridRow'],_0x17e794['gridCol'],_0x1a77f1);_0x17e794['targetGridX']=_0x10cdbd,_0x17e794['targetGridY']=_0x2593b8;}catch(_0x1c921d){console[_0x128889(0x1a0)]('Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20'+_0x17e794['id']+':',_0x1c921d),_0x17e794[_0x128889(0x126)]=gameCanvas[_0x128889(0x117)]/0x2,_0x17e794['targetGridY']=ENEMY_TOP_MARGIN;}break;}_0x17e794[_0x128889(0x214)]=0x0,_0x17e794[_0x128889(0x187)]++;if(_0x17e794[_0x128889(0x187)]>=_0x451c91['length']){_0x17e794[_0x128889(0x1f5)]=_0x128889(0x1dd),_0x17e794[_0x128889(0x1ed)]=0x0,_0x17e794['attackFormationOffsetX']=0x0,_0x17e794[_0x128889(0x109)]=null;try{const {x:_0x4f96f5,y:_0x329172}=getCurrentGridSlotPosition(_0x17e794['gridRow'],_0x17e794[_0x128889(0x11b)],_0x1a77f1);_0x17e794[_0x128889(0x126)]=_0x4f96f5,_0x17e794['targetGridY']=_0x329172;}catch(_0x15fe0e){console[_0x128889(0x1a0)](_0x128889(0x1e0)+_0xa84f63+_0x128889(0x1f0),_0x15fe0e),_0x17e794[_0x128889(0x126)]=gameCanvas[_0x128889(0x117)]/0x2,_0x17e794[_0x128889(0x10c)]=ENEMY_TOP_MARGIN;}}else{const _0x7e3d55=_0x451c91[_0x17e794['attackPathSegmentIndex']];if(!_0x7e3d55?.['p0']){console[_0x128889(0x1a0)](_0x128889(0xf2)+_0xa84f63+'\x20attacking,\x20invalid\x20NEXT\x20segment\x20'+_0x17e794[_0x128889(0x187)]+_0x128889(0x23d)),_0x2cce05=_0x17e794['x'],_0x513253=_0x17e794['y'],_0x17e794['state']='returning';try{const {x:_0x585fc8,y:_0x4cc9bd}=getCurrentGridSlotPosition(_0x17e794[_0x128889(0xf5)],_0x17e794[_0x128889(0x11b)],_0x1a77f1);_0x17e794[_0x128889(0x126)]=_0x585fc8,_0x17e794[_0x128889(0x10c)]=_0x4cc9bd;}catch(_0x574aaf){console[_0x128889(0x1a0)](_0x128889(0x1c1)+_0x17e794['id']+':',_0x574aaf),_0x17e794[_0x128889(0x126)]=gameCanvas['width']/0x2,_0x17e794[_0x128889(0x10c)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0x2cce05=calculateBezierPoint(_0x17e794[_0x128889(0x214)],_0x3c6ecb['p0']['x'],_0x3c6ecb['p1']['x'],_0x3c6ecb['p2']['x'],_0x3c6ecb['p3']['x']),_0x513253=calculateBezierPoint(_0x17e794[_0x128889(0x214)],_0x3c6ecb['p0']['y'],_0x3c6ecb['p1']['y'],_0x3c6ecb['p2']['y'],_0x3c6ecb['p3']['y']);}catch(_0x40c229){console[_0x128889(0x1a0)](_0x128889(0x22d)+_0x17e794['id']+':',_0x40c229),_0x2cce05=_0x17e794['x'],_0x513253=_0x17e794['y'],_0x17e794['state']=_0x128889(0x1dd);try{const {x:_0x1a11db,y:_0x326530}=getCurrentGridSlotPosition(_0x17e794[_0x128889(0xf5)],_0x17e794['gridCol'],_0x1a77f1);_0x17e794[_0x128889(0x126)]=_0x1a11db,_0x17e794[_0x128889(0x10c)]=_0x326530;}catch(_0x55b7bd){console[_0x128889(0x1a0)](_0x128889(0x20e)+_0x17e794['id']+':',_0x55b7bd),_0x17e794['targetGridX']=gameCanvas[_0x128889(0x117)]/0x2,_0x17e794[_0x128889(0x10c)]=ENEMY_TOP_MARGIN;}break;}if(_0x17e794&&_0x17e794['state']===_0x128889(0x219)){const _0x58fdf1=_0x17e794[_0x128889(0x22c)]||0x0,_0x2e3aa4=_0x2cce05+_0x58fdf1,_0x57bee8=_0x513253;_0x17e794[_0x128889(0x14f)]=_0x2e3aa4-_0x369a3e,_0x17e794['velocityY']=_0x57bee8-_0x590675,_0x17e794['x']=_0x2e3aa4,_0x17e794['y']=_0x57bee8;if(_0x17e794['y']>gameCanvas['height']+_0x5a70c1*1.5){_0x17e794[_0x128889(0x1f5)]=_0x128889(0x1dd),_0x17e794[_0x128889(0x187)]=0x0,_0x17e794[_0x128889(0x214)]=0x0,_0x17e794['lastFiredTime']=0x0,_0x17e794[_0x128889(0x22c)]=0x0,_0x17e794['attackGroupId']=null,_0x17e794['y']=-_0x5a70c1*(1.1+Math[_0x128889(0x1a8)]()*0.4),_0x17e794['x']=Math['random']()*(gameCanvas[_0x128889(0x117)]-_0x1a77f1),_0x17e794[_0x128889(0x14f)]=0x0,_0x17e794[_0x128889(0x1b6)]=0x0;try{const {x:_0x4c73ab,y:_0x21e689}=getCurrentGridSlotPosition(_0x17e794['gridRow'],_0x17e794[_0x128889(0x11b)],_0x1a77f1);_0x17e794[_0x128889(0x126)]=_0x4c73ab,_0x17e794[_0x128889(0x10c)]=_0x21e689;}catch(_0x4b3eea){console[_0x128889(0x1a0)](_0x128889(0x1e0)+_0xa84f63+_0x128889(0xee),_0x4b3eea),_0x17e794['targetGridX']=gameCanvas[_0x128889(0x117)]/0x2,_0x17e794[_0x128889(0x10c)]=ENEMY_TOP_MARGIN;}}}break;}case _0x128889(0x1dd):{if(isEntrancePhaseActive)break;if(_0x17e794[_0x128889(0x126)]==null||_0x17e794['targetGridY']==null){console[_0x128889(0x143)](_0x128889(0xf2)+_0xa84f63+_0x128889(0x182));try{const {x:_0x4269b0,y:_0x110269}=getCurrentGridSlotPosition(_0x17e794['gridRow'],_0x17e794[_0x128889(0x11b)],_0x1a77f1);_0x17e794[_0x128889(0x126)]=_0x4269b0,_0x17e794['targetGridY']=_0x110269;}catch(_0x190853){console[_0x128889(0x1a0)](_0x128889(0x1aa)+_0xa84f63+_0x128889(0x149),_0x190853),_0x17e794['state']='in_grid',_0x17e794['x']=gameCanvas['width']/0x2,_0x17e794['y']=ENEMY_TOP_MARGIN;break;}}const _0x333163=_0x17e794[_0x128889(0x126)],_0x2e593d=_0x17e794['targetGridY'],_0x2ed2d8=_0x333163-_0x17e794['x'],_0xd0775a=_0x2e593d-_0x17e794['y'],_0x48ee3d=Math[_0x128889(0x1a6)](_0x2ed2d8*_0x2ed2d8+_0xd0775a*_0xd0775a),_0x1fdcd9=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x1f66f5=BASE_RETURN_SPEED*_0x1fdcd9,_0x1ccc4d=_0x1f66f5*0.5;_0x48ee3d>_0x1ccc4d?(_0x17e794[_0x128889(0x14f)]=_0x2ed2d8/_0x48ee3d*_0x1f66f5,_0x17e794[_0x128889(0x1b6)]=_0xd0775a/_0x48ee3d*_0x1f66f5,_0x17e794['x']+=_0x17e794[_0x128889(0x14f)],_0x17e794['y']+=_0x17e794[_0x128889(0x1b6)]):(_0x17e794['x']=_0x333163,_0x17e794['y']=_0x2e593d,_0x17e794['velocityX']=0x0,_0x17e794['velocityY']=0x0,_0x17e794[_0x128889(0x1f5)]=_0x128889(0x1fe),_0x17e794['justReturned']=!![],_0x17e794[_0x128889(0x22c)]=0x0,_0x17e794['attackGroupId']=null,_0x17e794[_0x128889(0x1c3)]('returnLogDone')&&delete _0x17e794[_0x128889(0x17e)],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound('gridBackgroundSound',!![],0.1)));break;}}if(_0x17e794&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){const _0x2cddc3=[_0x128889(0x219),_0x128889(0x177),_0x128889(0x16b),'diving_to_capture_position'];if(_0x2cddc3[_0x128889(0x1e8)](_0x17e794[_0x128889(0x1f5)])){let _0x40a3c2=[];if(isTwoPlayerMode&&selectedGameMode===_0x128889(0x20a)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x40a3c2['push']({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x40a3c2['push']({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x40a3c2[_0x128889(0x160)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(const _0x51226a of _0x40a3c2){const _0x52735b=_0x51226a[_0x128889(0x12f)],_0x10508d={'x':_0x17e794['x'],'y':_0x17e794['y'],'width':_0x1a77f1,'height':_0x5a70c1},_0x4a33d2={'x':_0x52735b['x'],'y':_0x52735b['y'],'width':_0x52735b[_0x128889(0x117)],'height':_0x52735b[_0x128889(0x1d4)]},_0x2133de=_0x51226a[_0x128889(0x1cd)]?{'x':_0x52735b['x']+DUAL_SHIP_OFFSET_X,'y':_0x52735b['y'],'width':_0x52735b[_0x128889(0x117)],'height':_0x52735b['height']}:null;let _0x3180a6=![],_0x595a85=![];if(checkCollision(_0x10508d,_0x4a33d2))_0x3180a6=!![];else _0x51226a['dual']&&_0x2133de&&checkCollision(_0x10508d,_0x2133de)&&(_0x3180a6=!![],_0x595a85=!![]);if(_0x3180a6){createExplosion(_0x17e794['x']+_0x1a77f1/0x2,_0x17e794['y']+_0x5a70c1/0x2),playSound(_0x128889(0x1a2),![],0.6),enemies[_0x128889(0x212)](_0x4880fc,0x1),_0x17e794=null,handlePlayerShipCollision(_0x51226a[_0x128889(0x1f7)],_0x595a85,_0x2d34f9,![]);if(_0x17e794===null)break;}}}}if(!_0x17e794)continue;}if(!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x128889(0x20a)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){let _0x224632=[];if(isTwoPlayerMode&&selectedGameMode===_0x128889(0x20a)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x224632['push']({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x224632[_0x128889(0x160)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x224632['push']({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(let _0x1ec53c=enemyBullets[_0x128889(0x111)]-0x1;_0x1ec53c>=0x0;_0x1ec53c--){const _0x3d8a2f=enemyBullets[_0x1ec53c];if(!_0x3d8a2f){enemyBullets[_0x128889(0x212)](_0x1ec53c,0x1);continue;}const _0xcac3b8={'x':_0x3d8a2f['x'],'y':_0x3d8a2f['y'],'width':_0x3d8a2f[_0x128889(0x117)],'height':_0x3d8a2f[_0x128889(0x1d4)]};let _0x5c7a21=![];for(const _0x15d969 of _0x224632){const _0xd64a6f=_0x15d969[_0x128889(0x12f)],_0x5ea320={'x':_0xd64a6f['x'],'y':_0xd64a6f['y'],'width':_0xd64a6f[_0x128889(0x117)],'height':_0xd64a6f[_0x128889(0x1d4)]},_0x56d4ad=_0x15d969[_0x128889(0x1cd)]?{'x':_0xd64a6f['x']+DUAL_SHIP_OFFSET_X,'y':_0xd64a6f['y'],'width':_0xd64a6f[_0x128889(0x117)],'height':_0xd64a6f[_0x128889(0x1d4)]}:null;let _0x3e2a15=![],_0x38c96f=![];if(checkCollision(_0xcac3b8,_0x5ea320))_0x3e2a15=!![];else _0x15d969['dual']&&_0x56d4ad&&checkCollision(_0xcac3b8,_0x56d4ad)&&(_0x3e2a15=!![],_0x38c96f=!![]);if(_0x3e2a15){playSound(_0x128889(0x1a2),![],0.6),handlePlayerShipCollision(_0x15d969['playerNum'],_0x38c96f,_0x2d34f9,![]),enemyBullets[_0x128889(0x212)](_0x1ec53c,0x1),_0x5c7a21=!![];break;}}if(_0x5c7a21)continue;}}updateHitSparks();}catch(_0x3d3516){console['error'](_0x128889(0x1c6),_0x3d3516,_0x3d3516[_0x128889(0x19a)]),isGridSoundPlaying=![],stopSound(_0x128889(0x223)),isEntrancePhaseActive=![],stopSound(_0x128889(0x163)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound('captureSound'),stopSound(_0x128889(0x175)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x128889(0x123))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x128889(0x1f6));}}function handlePlayerShipCollision(_0x4bf19f,_0x3ae8fd,_0x2b6404,_0x410dd1=![]){const _0x1ee2b9=_0x3bd23c,_0x448bf4=_0x2b6404,_0x2eb1fc=gameCanvas?gameCanvas[_0x1ee2b9(0x1d4)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;let _0x3be2b3=0x0,_0x27001e=null;if(isTwoPlayerMode&&selectedGameMode===_0x1ee2b9(0x20a)){_0x27001e=_0x4bf19f===0x1?ship1:ship2;if(_0x27001e){_0x3be2b3=_0x27001e['x'];if(_0x410dd1){if(_0x4bf19f===0x1)player1CaptureRespawnX=_0x27001e['x'];else{if(_0x4bf19f===0x2)player2CaptureRespawnX=_0x27001e['x'];}}}else{if(_0x4bf19f===0x1&&typeof player1CaptureRespawnX===_0x1ee2b9(0x232)&&player1CaptureRespawnX!==0x0)_0x3be2b3=player1CaptureRespawnX;else{if(_0x4bf19f===0x2&&typeof player2CaptureRespawnX===_0x1ee2b9(0x232)&&player2CaptureRespawnX!==0x0)_0x3be2b3=player2CaptureRespawnX;else{if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1ee2b9(0x220))&&gameCanvas)_0x3be2b3=_0x4bf19f===0x1?gameCanvas[_0x1ee2b9(0x117)]/0x2-gameCanvas[_0x1ee2b9(0x117)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2:gameCanvas['width']/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;else gameCanvas?_0x3be2b3=gameCanvas['width']/0x2-SHIP_WIDTH/0x2:_0x3be2b3=0xc8;}}}}else{_0x27001e=ship;if(_0x27001e)_0x3be2b3=_0x27001e['x'],_0x410dd1&&(capturedShipRespawnX_NormalMode=ship['x']);else _0x410dd1&&capturedShipRespawnX_NormalMode!==0x0?_0x3be2b3=capturedShipRespawnX_NormalMode:_0x3be2b3=gameCanvas?gameCanvas['width']/0x2-SHIP_WIDTH/0x2:0xc8;}if(isTwoPlayerMode&&selectedGameMode===_0x1ee2b9(0x20a)){if(_0x4bf19f===0x1){if(_0x410dd1){isPlayer1ShipCaptured=!![],player1IsDualShipActive=![],player1Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')coopPartner1CapturedTime=_0x448bf4;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x448bf4,playSound(_0x1ee2b9(0x199),![],0.4),ship1=null,player1NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies[_0x1ee2b9(0x1df)](_0x407273=>_0x407273['id']===capturedBossIdWithMessage)){const _0x8af7e9=enemies[_0x1ee2b9(0x1df)](_0x41207b=>_0x41207b['id']===capturedBossIdWithMessage);_0x8af7e9&&(_0x8af7e9[_0x1ee2b9(0x139)]=![],_0x8af7e9[_0x1ee2b9(0x130)]=null);}}else player1NeedsRespawnAfterCapture=!![],ship1=null;}else{if(player1IsDualShipActive&&ship1){player1IsDualShipActive=![];const _0x4f0cdb=_0x3ae8fd?ship1['x']+DUAL_SHIP_OFFSET_X+ship1['width']/0x2:ship1['x']+ship1[_0x1ee2b9(0x117)]/0x2;createExplosion(_0x4f0cdb,ship1['y']+ship1['height']/0x2),ship1['x']=_0x3be2b3,ship1['y']=_0x2eb1fc,ship1[_0x1ee2b9(0x200)]=ship1['x'],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x448bf4+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x448bf4+RESPAWN_DELAY_MS;}else{if(ship1)createExplosion(ship1['x']+ship1[_0x1ee2b9(0x117)]/0x2,ship1['y']+ship1[_0x1ee2b9(0x1d4)]/0x2);player1Lives--;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x448bf4,playSound(_0x1ee2b9(0x199),![],0.4),ship1=null;if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;}else isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x448bf4+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x448bf4+RESPAWN_DELAY_MS,ship1?(ship1['x']=_0x3be2b3,ship1['y']=_0x2eb1fc,ship1['targetX']=ship1['x']):ship1={'x':_0x3be2b3,'y':_0x2eb1fc,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x3be2b3,'id':'p1'};}}}else{if(_0x4bf19f===0x2){if(_0x410dd1){isPlayer2ShipCaptured=!![],player2IsDualShipActive=![],player2Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1ee2b9(0x220))coopPartner2CapturedTime=_0x448bf4;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x448bf4,playSound('gameOverSound',![],0.4),ship2=null,player2NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x1ee2b9(0x101))aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies['find'](_0x3ddff1=>_0x3ddff1['id']===capturedBossIdWithMessage)){const _0x482983=enemies[_0x1ee2b9(0x1df)](_0x407878=>_0x407878['id']===capturedBossIdWithMessage);_0x482983&&(_0x482983[_0x1ee2b9(0x139)]=![],_0x482983['capturedShipDimensions']=null);}}else player2NeedsRespawnAfterCapture=!![],ship2=null;}else{if(player2IsDualShipActive&&ship2){player2IsDualShipActive=![];const _0x115621=_0x3ae8fd?ship2['x']+DUAL_SHIP_OFFSET_X+ship2[_0x1ee2b9(0x117)]/0x2:ship2['x']+ship2[_0x1ee2b9(0x117)]/0x2;createExplosion(_0x115621,ship2['y']+ship2[_0x1ee2b9(0x1d4)]/0x2),ship2['x']=_0x3be2b3,ship2['y']=_0x2eb1fc,ship2[_0x1ee2b9(0x200)]=ship2['x'],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x448bf4+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x448bf4+RESPAWN_DELAY_MS;}else{if(ship2)createExplosion(ship2['x']+ship2[_0x1ee2b9(0x117)]/0x2,ship2['y']+ship2[_0x1ee2b9(0x1d4)]/0x2);player2Lives--;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x448bf4,playSound('gameOverSound',![],0.4),ship2=null;if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x1ee2b9(0x101))aiPlayerActivelySeekingCaptureById=null;}else isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x448bf4+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x448bf4+RESPAWN_DELAY_MS,ship2?(ship2['x']=_0x3be2b3,ship2['y']=_0x2eb1fc,ship2['targetX']=_0x3be2b3):ship2={'x':_0x3be2b3,'y':_0x2eb1fc,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x3be2b3,'id':'p2'};}}}}player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isDualShipActive&&!_0x410dd1&&_0x27001e){isDualShipActive=![];if(isTwoPlayerMode&&selectedGameMode===_0x1ee2b9(0x1d5)){if(_0x4bf19f===0x1)player1IsDualShipActive=![];else{if(_0x4bf19f===0x2)player2IsDualShipActive=![];}}else{if(!isTwoPlayerMode)player1IsDualShipActive=![];}const _0x5a1356=_0x3ae8fd?_0x3be2b3+DUAL_SHIP_OFFSET_X+SHIP_WIDTH/0x2:_0x3be2b3+SHIP_WIDTH/0x2;createExplosion(_0x5a1356,_0x2eb1fc+SHIP_HEIGHT/0x2);ship&&(ship['x']=_0x3be2b3,ship['y']=_0x2eb1fc,ship[_0x1ee2b9(0x200)]=ship['x']);isInvincible=!![],invincibilityEndTime=_0x448bf4+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x448bf4+RESPAWN_DELAY_MS;if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)aiNeedsStabilization=!![];}}else{if(!_0x410dd1&&_0x27001e)createExplosion(_0x3be2b3+SHIP_WIDTH/0x2,_0x2eb1fc+SHIP_HEIGHT/0x2);if(_0x410dd1){isShipCaptured=!![];if(ship)ship=null;}playerLives--;if(playerLives<=0x0){playerLives=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x1ee2b9(0x1d5)){if(_0x4bf19f===0x1)player1Lives=0x0;else{if(_0x4bf19f===0x2)player2Lives=0x0;}isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x448bf4,playerWhoIsGameOver=_0x4bf19f,playSound('gameOverSound',![],0.4);const _0x1f81c9=_0x4bf19f===0x1?0x2:0x1,_0x44c141=_0x1f81c9===0x1?player1Lives:player2Lives;_0x44c141>0x0?nextActionAfterPlayerGameOver=_0x1ee2b9(0x1f8):nextActionAfterPlayerGameOver=_0x1ee2b9(0x235);bullets=[],enemyBullets=[],explosions=[];if(!(_0x44c141>0x0))ship=null;}else player1Lives=0x0,ship=null,playSound(_0x1ee2b9(0x199),![],0.4),triggerFinalGameOverSequence();}else{if(isTwoPlayerMode&&selectedGameMode==='normal'){if(_0x4bf19f===0x1)player1Lives=playerLives;else player2Lives=playerLives;}if(!_0x410dd1){isInvincible=!![],invincibilityEndTime=_0x448bf4+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x448bf4+RESPAWN_DELAY_MS;if(ship&&gameCanvas){ship['x']=_0x3be2b3,ship['y']=_0x2eb1fc,ship['targetX']=ship['x'];if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x1ee2b9(0x1d5)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}}if(_0x410dd1)isDualShipActive=![];}}}if(!_0x410dd1)fallingShips=[];}function switchPlayerTurn(){const _0x28b7ae=_0x3bd23c;if(!isTwoPlayerMode||selectedGameMode==='coop')return![];stopSound(_0x28b7ae(0x1bf));if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive;if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive;if(player2Score>highScore)highScore=player2Score;}const _0x58a41b=currentPlayer===0x1?0x2:0x1,_0x59d629=_0x58a41b===0x1?player1Lives:player2Lives;if(_0x59d629<=0x0){const _0x43233d=currentPlayer===0x1?player1Lives:player2Lives;return _0x43233d<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x58a41b,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x4121fc=_0x3bd23c;if(isPaused||!isInGameState||isChallengingStage||isWaveTransitioning)return;let _0x151b61=![];isTwoPlayerMode&&selectedGameMode===_0x4121fc(0x20a)?(player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)&&(_0x151b61=!![]):playerLives>0x0&&ship&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(_0x151b61=!![]);if(!_0x151b61)return;const _0x59c0d4=enemies[_0x4121fc(0x234)](_0x3f76c2=>_0x3f76c2&&_0x3f76c2[_0x4121fc(0x1f5)]===_0x4121fc(0x1fe));if(_0x59c0d4[_0x4121fc(0x111)]===0x0)return;const _0x5f0f8d=Date['now'](),_0x314b28=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x5f0f8d-lastGridFireCheckTime<_0x314b28)return;lastGridFireCheckTime=_0x5f0f8d;const _0xeb8ab3=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x379cc0=Math[_0x4121fc(0x166)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x5012ec=0x0;_0x59c0d4[_0x4121fc(0x1b3)](()=>Math[_0x4121fc(0x1a8)]()-0.5);for(const _0x5bd35a of _0x59c0d4){if(_0x5012ec>=_0x379cc0)break;if(_0x5bd35a['type']===ENEMY2_TYPE||_0x5bd35a[_0x4121fc(0x131)]===ENEMY3_TYPE){if(_0x5bd35a[_0x4121fc(0x131)]===ENEMY3_TYPE&&_0x5bd35a[_0x4121fc(0x139)])continue;Math[_0x4121fc(0x1a8)]()<_0xeb8ab3&&(createBulletSimple(_0x5bd35a)&&(playSound(_0x4121fc(0x151),![],0.4),_0x5bd35a[_0x4121fc(0x1ed)]=_0x5f0f8d,_0x5012ec++));}}}function runSingleGameUpdate(_0x5e0ed4){const _0x25099e=_0x3bd23c;try{const _0x59cb4b=Date[_0x25099e(0x1b5)]();let _0x17b71e=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x17b71e=player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture:_0x17b71e=playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;let _0x45d282=![];if(isManualControl&&connectedGamepadIndex!==null){if(isTwoPlayerMode&&selectedGameMode===_0x25099e(0x20a)){if(player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage)_0x45d282=!![];}else{if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1))_0x45d282=!![];}}if(_0x45d282&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x121508=navigator[_0x25099e(0x197)]();if(_0x121508?.[connectedGamepadIndex]){const _0x3a1f27=_0x121508[connectedGamepadIndex],_0x490d77=processSingleController(_0x3a1f27,previousGameButtonStates);previousGameButtonStates=_0x490d77[_0x25099e(0x148)]['slice']();if(_0x490d77[_0x25099e(0x120)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates['length']>0x0)previousGameButtonStates=[];}}else connectedGamepadIndex===null&&previousGameButtonStates['length']>0x0&&(previousGameButtonStates=[]);let _0x2b82ae=![];if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x25099e(0x20a)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage)_0x2b82ae=!![];}else{if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x25099e(0x1d5)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&currentPlayer===0x2)_0x2b82ae=!![];}}if(_0x2b82ae&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x3b544e=navigator[_0x25099e(0x197)]();if(_0x3b544e?.[connectedGamepadIndexP2]){const _0x32e2ae=_0x3b544e[connectedGamepadIndexP2],_0x42b251=processSingleController(_0x32e2ae,previousGameButtonStatesP2);previousGameButtonStatesP2=_0x42b251['newButtonStates'][_0x25099e(0xfb)]();if(_0x42b251['back']){stopGameAndShowMenu();return;}}else{if(previousGameButtonStatesP2[_0x25099e(0x111)]>0x0)previousGameButtonStatesP2=[];}}else connectedGamepadIndexP2===null&&previousGameButtonStatesP2['length']>0x0&&(previousGameButtonStatesP2=[]);if(isPaused){renderGame();return;}const _0x4531c6=showCsBonusScoreMessage||showPerfectMessage;if(isCoopAIDemoActive&&_0x4531c6&&gameCanvas?.[_0x25099e(0x117)]>0x0){const _0x48566d=ship1&&player1Lives>0x0&&player2Lives<=0x0,_0x508e43=ship2&&player2Lives>0x0&&player1Lives<=0x0;if(_0x48566d){const _0x3f394e=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0xe6a066=Math[_0x25099e(0x166)](gameCanvas['width']/0x2-_0x3f394e/0x2);ship1['x']=_0xe6a066,ship1[_0x25099e(0x200)]=_0xe6a066,smoothedShip1X=_0xe6a066,ship2&&(ship2[_0x25099e(0x200)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x508e43){const _0x360845=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x568927=Math[_0x25099e(0x166)](gameCanvas[_0x25099e(0x117)]/0x2-_0x360845/0x2);ship2['x']=_0x568927,ship2[_0x25099e(0x200)]=_0x568927,smoothedShip2X=_0x568927,ship1&&(ship1[_0x25099e(0x200)]=ship1['x'],smoothedShip1X=ship1['x']);}else{if(ship1&&player1Lives>0x0&&ship2&&player2Lives>0x0){const _0x5c5ebf=gameCanvas['width']/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1['x']=_0x5c5ebf,ship1[_0x25099e(0x200)]=_0x5c5ebf,smoothedShip1X=_0x5c5ebf;const _0x4dfbac=gameCanvas['width']/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2['x']=_0x4dfbac,ship2[_0x25099e(0x200)]=_0x4dfbac,smoothedShip2X=_0x4dfbac;}}}}else{if(_0x4531c6&&gameCanvas?.[_0x25099e(0x117)]>0x0){if(isTwoPlayerMode&&selectedGameMode===_0x25099e(0x20a)){const _0xd33e13=ship1&&player1Lives>0x0,_0x4dc228=ship2&&player2Lives>0x0;if(_0xd33e13&&_0x4dc228){if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220)){const _0x1721dd=gameCanvas[_0x25099e(0x117)]/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x107dce=gameCanvas[_0x25099e(0x117)]/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['x']=_0x107dce,ship2[_0x25099e(0x200)]=_0x107dce,smoothedShip2X=_0x107dce);}}else{if(_0xd33e13&&ship1){const _0x26dfe0=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x277c02=Math[_0x25099e(0x166)](gameCanvas[_0x25099e(0x117)]/0x2-_0x26dfe0/0x2);ship1['x']=_0x277c02,ship1[_0x25099e(0x200)]=_0x277c02,ship2&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220)&&(ship2[_0x25099e(0x200)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x4dc228&&ship2){const _0x357a04=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x213bdd=Math[_0x25099e(0x166)](gameCanvas['width']/0x2-_0x357a04/0x2);ship2['x']=_0x213bdd,ship2[_0x25099e(0x200)]=_0x213bdd;if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))smoothedShip2X=_0x213bdd;ship1&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&(ship1[_0x25099e(0x200)]=ship1['x']);}}}}else{if((!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x25099e(0x1d5)&&currentPlayer===0x2)&&ship){const _0x4a012e=isDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH;ship['x']=Math[_0x25099e(0x166)](gameCanvas[_0x25099e(0x117)]/0x2-_0x4a012e/0x2),ship['targetX']=ship['x'];if(isPlayerTwoAI&&selectedGameMode===_0x25099e(0x1d5)&&currentPlayer===0x2)smoothedShipX=ship['x'];else{if(!isManualControl)smoothedShipX=ship['x'];}}}}}let _0x142b09=![];if(selectedGameMode===_0x25099e(0x20a)&&level===0x1&&coopPlayersReadyStartTime>0x0){_0x142b09=!![];if(isShowingCoopPlayersReady){if(_0x59cb4b-coopPlayersReadyStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}if(_0x59cb4b>=coopPlayersReadyStartTime+0xbb8){isShowingCoopPlayersReady=![],explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220)?(isShowingIntro=!![],introStep=0x2,introDisplayStartTime=_0x59cb4b):(isShowingIntro=!![],introStep=0x1,introDisplayStartTime=_0x59cb4b);}}else{if(isShowingIntro){if(_0x59cb4b-introDisplayStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}let _0x344a65=INTRO_DURATION_PER_STEP;introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))&&(_0x344a65=TWO_PLAYER_STAGE_INTRO_DURATION);if(_0x59cb4b>=introDisplayStartTime+_0x344a65){if(introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')){introStep=0x2,introDisplayStartTime=_0x59cb4b,explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}else{isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();_0x142b09=![],coopPlayersReadyStartTime=0x0;}}}else _0x142b09=![],coopPlayersReadyStartTime=0x0;}if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')handlePlayerInput();if(typeof moveEntities===_0x25099e(0x123))moveEntities();renderGame();if(_0x142b09)return;}if(selectedGameMode==='coop'&&level===0x1&&!gameJustStartedAndWaveLaunched&&coopPlayersReadyStartTime===0x0&&gameJustStarted){if(isFullGridWave)startFullGridWave();else{if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x25099e(0x111)]>0x0)scheduleEntranceFlightWave();else isWaveTransitioning=!![],readyForNextWaveReset=!![];}}gameJustStartedAndWaveLaunched=!![],gameJustStarted=![];}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode&&selectedGameMode===_0x25099e(0x1d5)){if(_0x59cb4b-playerGameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(_0x59cb4b-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();const _0x4be1b4=playerWhoIsGameOver;playerWhoIsGameOver=0x0;if(nextActionAfterPlayerGameOver==='switch_player')switchPlayerTurn()?(_0x4be1b4===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,player1MaxLevelReached=Math[_0x25099e(0x193)](player1MaxLevelReached,level)),resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();else nextActionAfterPlayerGameOver===_0x25099e(0x235)?triggerFinalGameOverSequence():triggerFinalGameOverSequence();renderGame();return;}else{renderGame();return;}}if(isTwoPlayerMode&&selectedGameMode==='coop'){let _0x19215a=![],_0x94e7cd=![];if(isPlayer1ShowingGameOverMessage){if(_0x59cb4b-player1GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}if(_0x59cb4b-player1GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer1ShowingGameOverMessage=![],_0x19215a=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}if(isPlayer2ShowingGameOverMessage){if(_0x59cb4b-player2GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(_0x59cb4b-player2GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer2ShowingGameOverMessage=![],_0x94e7cd=!![],explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}}if(_0x19215a||_0x94e7cd){player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')handlePlayerInput();if(typeof moveEntities===_0x25099e(0x123))moveEntities();renderGame();if(gameOverSequenceStartTime>0x0||player1Lives>0x0||player2Lives>0x0)return;}else{if(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))handlePlayerInput();if(typeof moveEntities===_0x25099e(0x123))moveEntities();renderGame();return;}}}if(isShowingCaptureMessage){if(_0x59cb4b-captureMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}const _0x6d57aa=enemies[_0x25099e(0x1df)](_0x3e3fe9=>_0x3e3fe9['id']===capturedBossIdWithMessage);if(_0x6d57aa&&_0x6d57aa[_0x25099e(0x1f5)]===_0x25099e(0x206)){const _0x416905=_0x59cb4b-captureMessageStartTime,_0x30534d=Math[_0x25099e(0x129)](0x1,_0x416905/CAPTURE_MESSAGE_DURATION);_0x6d57aa[_0x25099e(0x179)]=_0x30534d*0x2*(0x2*Math['PI']);}else _0x6d57aa&&(_0x6d57aa[_0x25099e(0x179)]=0x0);if(isInGameState&&!isShowingPlayerGameOverMessage&&!isPlayer1ShowingGameOverMessage&&!isPlayer2ShowingGameOverMessage&&gameOverSequenceStartTime===0x0){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))handlePlayerInput();if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))aiControlCoop();else isPlayerTwoAI&&selectedGameMode===_0x25099e(0x1d5)&&currentPlayer===0x2&&aiControl();if(typeof moveEntities===_0x25099e(0x123))moveEntities();updateExplosions(),updateFloatingScores();}if(_0x59cb4b-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();stopSound('shipCapturedSound'),captureBeamActive=![];if(_0x6d57aa&&_0x6d57aa[_0x25099e(0x1f5)]===_0x25099e(0x206)){_0x6d57aa[_0x25099e(0x1f5)]='returning',_0x6d57aa[_0x25099e(0x179)]=0x0;try{const _0x56e83a=_0x6d57aa[_0x25099e(0x131)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x42bc23,y:_0x133ba7}=getCurrentGridSlotPosition(_0x6d57aa[_0x25099e(0xf5)],_0x6d57aa[_0x25099e(0x11b)],_0x56e83a);_0x6d57aa['targetGridX']=_0x42bc23,_0x6d57aa['targetGridY']=_0x133ba7;}catch(_0x4cc44e){console['error'](_0x25099e(0x14c)+_0x6d57aa['id']+':',_0x4cc44e),_0x6d57aa[_0x25099e(0x126)]=gameCanvas['width']/0x2,_0x6d57aa[_0x25099e(0x10c)]=ENEMY_TOP_MARGIN;}}else _0x6d57aa&&(_0x6d57aa[_0x25099e(0x179)]=0x0);capturedBossIdWithMessage=null;const _0x233294=gameCanvas?gameCanvas[_0x25099e(0x1d4)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(isTwoPlayerMode&&selectedGameMode===_0x25099e(0x20a)){if(player1NeedsRespawnAfterCapture&&player1Lives>0x0){ship1={'x':player1CaptureRespawnX,'y':_0x233294,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player1CaptureRespawnX,'id':'p1'},isPlayer1ShipCaptured=![],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x59cb4b+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=![],player1NeedsRespawnAfterCapture=![],player1CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))smoothedShip1X=ship1['x'];}if(player2NeedsRespawnAfterCapture&&player2Lives>0x0){ship2={'x':player2CaptureRespawnX,'y':_0x233294,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player2CaptureRespawnX,'id':'p2'},isPlayer2ShipCaptured=![],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x59cb4b+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=![],player2NeedsRespawnAfterCapture=![],player2CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))smoothedShip2X=ship2['x'];}if(player1Lives<=0x0&&player2Lives<=0x0){if(gameOverSequenceStartTime===0x0)triggerFinalGameOverSequence();}}else{if(!isManualControl&&!isPlayerTwoAI){if(isShipCaptured&&playerLives>0x0){let _0x208c74=gameCanvas?gameCanvas[_0x25099e(0x117)]/0x2-SHIP_WIDTH/0x2:0xc8;if(typeof smoothedShipX===_0x25099e(0x232))_0x208c74=smoothedShipX;ship={'x':_0x208c74,'y':_0x233294,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x208c74,'id':'main'},isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x59cb4b+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=![],aiNeedsStabilization=!![];if(smoothedShipX===undefined&&ship)smoothedShipX=ship['x'];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isManualControl){if(isShipCaptured&&playerLives>0x0){let _0x200fdd=capturedShipRespawnX_NormalMode!==0x0?capturedShipRespawnX_NormalMode:gameCanvas?gameCanvas['width']/0x2-SHIP_WIDTH/0x2:0xc8;ship={'x':_0x200fdd,'y':_0x233294,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x200fdd,'id':_0x25099e(0x110)},isShipCaptured=![],capturedShipRespawnX_NormalMode=0x0,isInvincible=!![],invincibilityEndTime=_0x59cb4b+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x59cb4b+RESPAWN_DELAY_MS;if(isPlayerTwoAI&&selectedGameMode===_0x25099e(0x1d5)&&currentPlayer===0x2)aiNeedsStabilization=!![];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&((!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode==='normal'&&(currentPlayer===0x1&&player2Lives<=0x0||currentPlayer===0x2&&player1Lives<=0x0))&&triggerFinalGameOverSequence());}}}}renderGame();return;}const _0x2fa4bd=!(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage||isShowingPlayerGameOverMessage),_0x286a8a=isShowingIntro&&!_0x142b09&&!(selectedGameMode===_0x25099e(0x20a)&&level===0x1);if(!_0x142b09&&gameOverSequenceStartTime===0x0&&_0x17b71e&&!isShowingCaptureMessage&&_0x2fa4bd){if(isInGameState&&!_0x286a8a){if(!(_0x4531c6&&!isManualControl)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x25099e(0x1d5)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}}isManualControl&&handlePlayerInput();}}isTwoPlayerMode&&selectedGameMode===_0x25099e(0x20a)?(isPlayer1Invincible&&_0x59cb4b>=player1InvincibilityEndTime&&(isPlayer1Invincible=![],player1InvincibilityEndTime=0x0),isPlayer2Invincible&&_0x59cb4b>=player2InvincibilityEndTime&&(isPlayer2Invincible=![],player2InvincibilityEndTime=0x0)):(isInvincible&&_0x59cb4b>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0),isWaitingForRespawn&&_0x59cb4b>=respawnTime&&(isWaitingForRespawn=![]));const _0x119532=showExtraLifeMessage&&_0x59cb4b-extraLifeMessageStartTime<0x64;if(_0x119532&&(isWaveTransitioning||isChallengingStage&&enemies[_0x25099e(0x111)]===0x0)){}if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))&&isChallengingStage&&enemies[_0x25099e(0x111)]===0x0&&!isCsCompletionDelayActive&&!showCsBonusScoreMessage&&!showPerfectMessage&&gameCanvas&&gameCanvas['width']>0x0){const _0x24270c=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage,_0x248fe7=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage;if(_0x24270c&&!_0x248fe7){const _0x1025e6=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x50f3fb=Math[_0x25099e(0x166)](gameCanvas[_0x25099e(0x117)]/0x2-_0x1025e6/0x2);ship1['x']=_0x50f3fb,ship1[_0x25099e(0x200)]=_0x50f3fb,smoothedShip1X=_0x50f3fb;}else{if(_0x248fe7&&!_0x24270c){const _0x3fcf0d=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x2a32e6=Math[_0x25099e(0x166)](gameCanvas[_0x25099e(0x117)]/0x2-_0x3fcf0d/0x2);ship2['x']=_0x2a32e6,ship2[_0x25099e(0x200)]=_0x2a32e6,smoothedShip2X=_0x2a32e6;}}}if(isCsCompletionDelayActive&&_0x2fa4bd&&gameOverSequenceStartTime===0x0){if(_0x59cb4b-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY+EXPLOSION_DURATION){isCsCompletionDelayActive=![],csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies;csCompletionResultIsPerfect?(playSound(_0x25099e(0x1c4),![],0.6),showCsHitsMessage=!![],csHitsMessageStartTime=_0x59cb4b):(playSound(_0x25099e(0x162),![],0.6),showCSClearMessage=!![],csClearMessageStartTime=_0x59cb4b);bullets=[],enemyBullets=[],renderGame();return;}else{if(_0x59cb4b-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY&&explosions[_0x25099e(0x111)]>0x0){updateExplosions(),renderGame();return;}else{if(_0x59cb4b-csCompletionDelayStartTime<CS_COMPLETION_MESSAGE_DELAY){renderGame();return;}}}}let _0x491a39=![],_0x5f1819=![];if(_0x2fa4bd&&gameOverSequenceStartTime===0x0&&!isShowingCoopPlayersReady&&!_0x142b09){if(showCsHitsMessage){if(_0x59cb4b-csHitsMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(Date[_0x25099e(0x1b5)]()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION){showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x59cb4b,explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}_0x5f1819=!![];}else{if(showPerfectMessage){if(_0x59cb4b-perfectMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(Date['now']()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION){showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x59cb4b,explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}_0x5f1819=!![];}else{if(showCsBonusScoreMessage){if(_0x59cb4b-csBonusScoreMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(Date['now']()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION){showCsBonusScoreMessage=![],_0x491a39=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}_0x5f1819=!![];}else{if(showCSClearMessage){if(_0x59cb4b-csClearMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}Date[_0x25099e(0x1b5)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]);Date[_0x25099e(0x1b5)]()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]);if(Date['now']()-csClearMessageStartTime>=CS_CLEAR_DELAY){showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x491a39=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}_0x5f1819=!![];}else{if(showExtraLifeMessage)Date[_0x25099e(0x1b5)]()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![]),_0x5f1819=!![];else{if(showReadyMessage){if(_0x59cb4b-readyMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(Date[_0x25099e(0x1b5)]()-readyMessageStartTime>READY_MESSAGE_DURATION){showReadyMessage=![],_0x491a39=!![],explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}_0x5f1819=!![];}}}}}}}if(_0x5f1819&&!_0x491a39&&!isShowingCoopPlayersReady&&!_0x142b09&&!isShowingCaptureMessage&&_0x2fa4bd){if(!((_0x4531c6||showCsHitsMessage||showCSClearMessage)&&isManualControl)&&!showExtraLifeMessage){renderGame();return;}}if(_0x286a8a&&_0x2fa4bd&&gameOverSequenceStartTime===0x0){let _0x73f41b=![];const _0x44e4cc=_0x59cb4b-introDisplayStartTime;let _0x2fb2df=INTRO_DURATION_PER_STEP;const _0x41f219=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x1a3),_0x2e3357=isTwoPlayerMode&&selectedGameMode==='normal'&&!isPlayerTwoAI;(_0x2e3357||_0x41f219)&&(_0x2fb2df=TWO_PLAYER_STAGE_INTRO_DURATION);if(introStep===0x1){if(_0x44e4cc<0x64){explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}let _0x29014e=null,_0x3ffb03=0x1;if(!playerIntroSoundPlayed){const _0x356aa4=_0x41f219||_0x2e3357,_0x576e0c=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220)&&level>0x1;if(_0x356aa4){if(currentPlayer===0x1&&level===0x1&&!initialGameStartSoundPlayedThisSession)_0x29014e='startSound',_0x3ffb03=0.4;else(currentPlayer===0x2||level>0x1)&&(_0x29014e=_0x25099e(0x118),_0x3ffb03=0.2);}else{if(_0x576e0c)_0x29014e=_0x25099e(0x118),_0x3ffb03=0.2;else{if(!isTwoPlayerMode){if(level===0x1&&!initialGameStartSoundPlayedThisSession)_0x29014e=_0x25099e(0x171),_0x3ffb03=0.4;else level>0x1&&(_0x29014e=_0x25099e(0x118),_0x3ffb03=0.2);}}}}_0x29014e&&(playSound(_0x29014e,![],_0x3ffb03),playerIntroSoundPlayed=!![],_0x29014e===_0x25099e(0x171)&&(initialGameStartSoundPlayedThisSession=!![]));if(_0x44e4cc>=_0x2fb2df){if(isChallengingStage)introStep=0x3;else introStep=0x2;introDisplayStartTime=_0x59cb4b,explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}}else{if(introStep===0x2){if(_0x44e4cc<0x64){explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}if(!stageIntroSoundPlayed){if(playLevelUpAfterCSBonus&&(isTwoPlayerMode&&selectedGameMode===_0x25099e(0x20a)))playSound(_0x25099e(0x118),![],0.2),playLevelUpAfterCSBonus=![],stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x25099e(0x20a)&&!isPlayerTwoAI&&!isCoopAIDemoActive&&level===0x1)playSound(_0x25099e(0x118),![],0.2),stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x25099e(0x20a)&&!isPlayerTwoAI&&!isCoopAIDemoActive&&level>0x1)playSound('levelUpSound',![],0.2),stageIntroSoundPlayed=!![];else{if(selectedGameMode===_0x25099e(0x20a)){if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))&&level>0x1)playSound(_0x25099e(0x118),![],0.2),stageIntroSoundPlayed=!![];else(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))&&level===0x1&&(stageIntroSoundPlayed=!![]);}else{if(!isTwoPlayerMode&&level>0x1)playSound(_0x25099e(0x118),![],0.2),stageIntroSoundPlayed=!![];else{if(level>0x1&&!playerIntroSoundPlayed&&!(isPlayerTwoAI&&selectedGameMode===_0x25099e(0x1d5))&&!initialGameStartSoundPlayedThisSession)playSound(_0x25099e(0x118),![],0.2),stageIntroSoundPlayed=!![];else level===0x1&&!isManualControl&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode==='coop')&&!initialGameStartSoundPlayedThisSession&&(playSound('startSound',![],0.4),initialGameStartSoundPlayedThisSession=!![],stageIntroSoundPlayed=!![]);}}}}}}if(_0x44e4cc>=_0x2fb2df){_0x73f41b=!![],explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}}else{if(introStep===0x3){if(_0x44e4cc<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}!csIntroSoundPlayed&&(playSound(_0x25099e(0x163),![],0.4),csIntroSoundPlayed=!![],stageIntroSoundPlayed=!![]);if(_0x44e4cc>=_0x2fb2df){_0x73f41b=!![],explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}}}}if(isInGameState&&_0x2fa4bd&&gameOverSequenceStartTime===0x0&&gameCanvas){let _0x2613f1=null,_0x1aaa62=null;const _0x279315=isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL'&&currentPlayer===0x1&&isShowingIntro;if(_0x279315){let _0x5c834=![],_0x4e9715=![];const _0x59ddf9=navigator['getGamepads']();if(connectedGamepadIndex!==null&&_0x59ddf9?.[connectedGamepadIndex]){const _0x4d0a26=_0x59ddf9[connectedGamepadIndex],_0xbde743=processSingleController(_0x4d0a26,previousGameButtonStates);_0x5c834=_0xbde743[_0x25099e(0x100)],_0x4e9715=_0xbde743[_0x25099e(0x172)];}_0x2613f1=keyboardP1LeftDown||_0x5c834,_0x1aaa62=keyboardP1RightDown||_0x4e9715;}if(_0x41f219&&currentPlayer===0x2)aiControl();else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))aiControlCoop();else!isManualControl&&!isPlayerTwoAI&&aiControl();}typeof moveEntities===_0x25099e(0x123)&&moveEntities(_0x2613f1,_0x1aaa62),updateExplosions(),updateFloatingScores();}if(_0x73f41b){isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![];isManualControl&&(isShowingDemoText=![]);if(!isChallengingStage)isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220)?(aiShip1CanShootTime=Date['now']()+0x3e8,aiShip2CanShootTime=Date['now']()+0x4b0):aiCanShootTime=Date['now']()+(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x1a3)?0x3e8:0xbb8);else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0;else aiCanShootTime=0x0;}const _0x384aab=level===0x1&&selectedGameMode!==_0x25099e(0x20a),_0x3d9eac=level===0x1&&selectedGameMode===_0x25099e(0x20a),_0x3339ac=_0x384aab&&!gameJustStartedAndWaveLaunched||level>0x1||isChallengingStage||_0x3d9eac&&!gameJustStartedAndWaveLaunched;if(_0x3339ac){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition['length']>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0x25099e(0x163),![],0.4);}else isEntrancePhaseActive=![],stopSound('entranceSound'),isWaveTransitioning=!![],readyForNextWaveReset=!![],bullets=[],enemyBullets=[],explosions=[],setTimeout(()=>{const _0x250d46=_0x25099e,_0x454911=isTwoPlayerMode&&selectedGameMode===_0x250d46(0x20a)?player1Lives>0x0||player2Lives>0x0:playerLives>0x0;if((isInGameState||!isInGameState&&_0x454911)&&typeof resetWaveInternal===_0x250d46(0x123)){if(_0x454911)resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![];else triggerFinalGameOverSequence();}},0x64);}if(_0x384aab||level>0x1||isChallengingStage||_0x3d9eac)gameJustStartedAndWaveLaunched=!![];}}isManualControl&&_0x286a8a&&_0x2fa4bd&&gameOverSequenceStartTime===0x0&&handlePlayerInput();renderGame();return;}const _0x40f599=!_0x142b09&&!_0x286a8a&&!_0x491a39&&!isShowingCaptureMessage;if(gameJustStarted&&_0x40f599){if(!gameJustStartedAndWaveLaunched){const _0x5aa3c3=selectedGameMode===_0x25099e(0x20a)&&level===0x1&&coopPlayersReadyStartTime!==0x0;if(!_0x5aa3c3){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x25099e(0x111)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0x25099e(0x163),![],0.4);}else isWaveTransitioning=!![],readyForNextWaveReset=!![];}gameJustStartedAndWaveLaunched=!![];}}gameJustStarted=![];}if(_0x40f599&&isInGameState&&_0x2fa4bd&&gameOverSequenceStartTime===0x0){if(!_0x4531c6||_0x4531c6&&isManualControl){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x25099e(0x1d5)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}isManualControl&&handlePlayerInput();if(typeof moveEntities===_0x25099e(0x123))moveEntities();updateExplosions(),updateFloatingScores();}else _0x4531c6&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&(updateExplosions(),updateFloatingScores());}if(_0x40f599&&_0x2fa4bd&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&_0x17b71e){const _0x274776=enemies[_0x25099e(0x158)](_0x51b0a2=>_0x51b0a2?.[_0x25099e(0x1f5)]==='in_grid');if(_0x274776&&isGridBreathingActive){const _0x3f8c18=_0x59cb4b-gridBreathStartTime,_0x316322=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x5009e5=_0x3f8c18%_0x316322;currentGridBreathFactor=(Math[_0x25099e(0x14d)](_0x5009e5/_0x316322*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x274776&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x274776&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x59cb4b,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x5cedcc=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x306ad2=enemies[_0x25099e(0x158)](_0x137bc0=>_0x137bc0?.['state']===_0x25099e(0x177)||_0x137bc0?.['state']==='moving_to_grid'||_0x137bc0?.[_0x25099e(0x1f5)]==='following_bezier_path');if(totalEnemiesScheduledForWave>0x0&&_0x5cedcc&&!_0x306ad2){const _0x293ac2=isEntrancePhaseActive;isEntrancePhaseActive=![];if(_0x293ac2){stopSound(_0x25099e(0x163)),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts[_0x25099e(0x1ab)](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![];if(!isChallengingStage&&!isFullGridWave){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=Date[_0x25099e(0x1b5)]()+COOP_AI_CAPTURE_DIVE_ANTICIPATION_DURATION_MS,typeof triggerImmediateCaptureDive==='function'&&triggerImmediateCaptureDive();else typeof triggerImmediateCaptureDive===_0x25099e(0x123)&&triggerImmediateCaptureDive();}}}}if(!isChallengingStage&&!_0x286a8a&&!isPaused&&!isWaveTransitioning)triggerGridFiring();if(!isWaveTransitioning&&_0x17b71e&&!_0x286a8a&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x172437=enemies[_0x25099e(0x111)]===0x0,_0xc961bf=fallingShips['length']===0x0,_0x4e5bd0=![];if(isChallengingStage){if(_0x172437&&!isEntrancePhaseActive)_0x4e5bd0=!![];}else{if(_0x172437&&!isEntrancePhaseActive&&_0xc961bf)_0x4e5bd0=!![];}if(_0x4e5bd0){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))&&gameCanvas&&gameCanvas[_0x25099e(0x117)]>0x0){const _0x13f25c=player1Lives,_0xce4b39=player2Lives,_0xb53e02=gameCanvas[_0x25099e(0x1d4)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(_0x13f25c>0x0&&_0xce4b39<=0x0&&ship1){const _0xe0f969=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x45975e=Math[_0x25099e(0x166)](gameCanvas[_0x25099e(0x117)]/0x2-_0xe0f969/0x2);ship1['x']=_0x45975e,ship1['targetX']=_0x45975e,smoothedShip1X=_0x45975e,ship1['y']=_0xb53e02;}else{if(_0xce4b39>0x0&&_0x13f25c<=0x0&&ship2){const _0x3472e7=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x14e018=Math['round'](gameCanvas[_0x25099e(0x117)]/0x2-_0x3472e7/0x2);ship2['x']=_0x14e018,ship2[_0x25099e(0x200)]=_0x14e018,smoothedShip2X=_0x14e018,ship2['y']=_0xb53e02;}}}isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(_0x25099e(0x223)),isGridSoundPlaying=![]);!isChallengingStage&&(bullets=[],enemyBullets=[]);floatingScores=[],enemySpawnTimeouts[_0x25099e(0x1ab)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;let _0x1ed5bd;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,setTimeout(()=>{const _0x41a48b=_0x25099e;if(isWaveTransitioning){explosions=[];if(typeof updateExplosions===_0x41a48b(0x123))updateExplosions();isCsCompletionDelayActive=!![],csCompletionDelayStartTime=Date[_0x41a48b(0x1b5)]();}},EXPLOSION_DURATION);if(csCompletionResultIsPerfect){let _0xeb4ebc=0x2710;if(isTwoPlayerMode&&selectedGameMode===_0x25099e(0x20a)){if(player1Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))&&ship1){player1Score+=_0xeb4ebc;if(player1Score>highScore)highScore=player1Score,highScoreHolderId='player1',!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x25099e(0x1bf),![],0.2));else player1Score===highScore&&highScoreHolderId!==_0x25099e(0x18d)&&highScore>0x0&&(highScoreHolderId='player1',!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x25099e(0x1bf),![],0.2)));}if(player2Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220))&&ship2){player2Score+=_0xeb4ebc;const _0x5242c8=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x25099e(0x220)?isCoopAIDemoActive?_0x25099e(0x23c):_0x25099e(0x101):'player2';if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x5242c8,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x25099e(0x1bf),![],0.2));else player2Score===highScore&&highScoreHolderId!==_0x5242c8&&highScore>0x0&&(highScoreHolderId=_0x5242c8,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x25099e(0x1bf),![],0.2)));}checkAndAwardExtraLife(null);}else{score+=_0xeb4ebc;if(!isTwoPlayerMode)player1Score=score;else{if(isTwoPlayerMode&&selectedGameMode===_0x25099e(0x1d5)){if(currentPlayer===0x1)player1Score=score;else player2Score=score;}}let _0x324703=!isTwoPlayerMode?_0x25099e(0x18d):currentPlayer===0x1?_0x25099e(0x18d):isPlayerTwoAI?_0x25099e(0x101):_0x25099e(0x23c),_0x3762d0=!isTwoPlayerMode?player1TriggeredHighScoreSound:currentPlayer===0x1?player1TriggeredHighScoreSound:player2TriggeredHighScoreSound,_0x14a924=!isTwoPlayerMode?()=>player1TriggeredHighScoreSound=!![]:currentPlayer===0x1?()=>player1TriggeredHighScoreSound=!![]:()=>player2TriggeredHighScoreSound=!![];if(score>highScore)highScore=score,highScoreHolderId=_0x324703,!_0x3762d0&&(_0x14a924(),playSound(_0x25099e(0x1bf),![],0.2));else score===highScore&&highScoreHolderId!==_0x324703&&highScore>0x0&&(highScoreHolderId=_0x324703,!_0x3762d0&&(_0x14a924(),playSound('hiScoreSound',![],0.2)));checkAndAwardExtraLife(currentPlayer);}_0x1ed5bd=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else isTwoPlayerMode&&selectedGameMode==='coop'?checkAndAwardExtraLife(null):checkAndAwardExtraLife(currentPlayer),_0x1ed5bd=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x1ed5bd+=0x64;}else playSound(_0x25099e(0x132),![],0.8),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,_0x1ed5bd=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x451909=_0x25099e;let _0x4d4266=![],_0x4f227e=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x451909(0x1d5)){_0x4f227e=currentPlayer;_0x4f227e===0x1?player1MaxLevelReached=Math[_0x451909(0x193)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x451909(0x193)](player2MaxLevelReached,level);const _0x57e8f9=switchPlayerTurn();if(_0x57e8f9){if(_0x4f227e===0x2&&currentPlayer===0x1&&player1CompletedLevel===level)_0x4d4266=!![],player1CompletedLevel=-0x1;else _0x4f227e===0x1?(player1CompletedLevel=level,_0x4d4266=![]):_0x4d4266=![];}else _0x4d4266=!![],player1CompletedLevel=-0x1;}else{_0x4d4266=!![];if(!isTwoPlayerMode)player1MaxLevelReached=Math[_0x451909(0x193)](player1MaxLevelReached,level);else{if(isTwoPlayerMode&&selectedGameMode===_0x451909(0x20a)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x451909(0x193)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x451909(0x193)](player2MaxLevelReached,level);}}}if(_0x4d4266){level++;if(isTwoPlayerMode&&selectedGameMode===_0x451909(0x20a)){if(player1Lives>0x0)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x451909(0x193)](player2MaxLevelReached,level);}else{if(isTwoPlayerMode&&selectedGameMode===_0x451909(0x1d5)){if(currentPlayer===0x1&&player1Lives>0x0)player1MaxLevelReached=Math[_0x451909(0x193)](player1MaxLevelReached,level);else{if(currentPlayer===0x2&&player2Lives>0x0)player2MaxLevelReached=Math[_0x451909(0x193)](player2MaxLevelReached,level);}}else{if(playerLives>0x0)player1MaxLevelReached=Math[_0x451909(0x193)](player1MaxLevelReached,level);}}}let _0x5687bf=![];if(isTwoPlayerMode&&selectedGameMode===_0x451909(0x20a))_0x5687bf=player1Lives>0x0||player2Lives>0x0;else{if(isTwoPlayerMode&&selectedGameMode===_0x451909(0x1d5))_0x5687bf=(currentPlayer===0x1?player1Lives:player2Lives)>0x0;else _0x5687bf=playerLives>0x0;}_0x5687bf?(resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();},_0x1ed5bd),renderGame();return;}if(!isChallengingStage){if(enemies['length']>0x0){let _0x5dc592=null;const _0x29269d=enemies[_0x25099e(0x234)](_0x3b30da=>_0x3b30da?.[_0x25099e(0x1f5)]===_0x25099e(0x1fe)),_0x20efdd=_0x29269d[_0x25099e(0x111)]<=0x3,_0xacfd52=Math[_0x25099e(0x193)](0x1,Math[_0x25099e(0x129)](level,LEVEL_CAP_FOR_SCALING)),_0xba85fb=0x1068,_0x469aa4=0x320,_0x6c63e6=(_0xacfd52-0x1)*((_0xba85fb-_0x469aa4)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x47c2ce=Math[_0x25099e(0x193)](_0x469aa4,_0xba85fb-_0x6c63e6),_0x207822=Math[_0x25099e(0x166)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x19b0f8=enemies[_0x25099e(0x234)](_0xa64193=>_0xa64193?.[_0x25099e(0x1f5)]===_0x25099e(0x219)||_0xa64193?.[_0x25099e(0x1f5)]==='preparing_attack')[_0x25099e(0x111)];if(_0x20efdd||_0x59cb4b-lastEnemyDetachTime>_0x47c2ce&&_0x29269d['length']>0x0&&_0x19b0f8<_0x207822){_0x5dc592=findAndDetachEnemy();if(_0x5dc592&&_0x5dc592[_0x25099e(0x111)]>0x0){const _0x3349ce=_0x5dc592[_0x25099e(0x185)](_0x5a2f5a=>enemies['find'](_0x216e82=>_0x216e82?.['id']===_0x5a2f5a['id']))[_0x25099e(0x234)](_0x3a6c5e=>_0x3a6c5e&&_0x3a6c5e['state']===_0x25099e(0x1fe));if(_0x3349ce[_0x25099e(0x111)]>0x0){const _0x45d6ef=_0x3349ce[0x0],_0x13fe89=_0x45d6ef[_0x25099e(0x161)];if(!_0x20efdd)lastEnemyDetachTime=_0x59cb4b;if(_0x13fe89==='normal'){const _0x4f7193=generateAttackPathInternal(_0x45d6ef);if(_0x4f7193&&_0x4f7193[_0x25099e(0x111)]>0x0){if(_0x3349ce[_0x25099e(0x111)]===0x3&&_0x45d6ef[_0x25099e(0x131)]===ENEMY3_TYPE&&level!==0x1)playSound(_0x25099e(0x229),![],0.3);let _0x3343c4=[..._0x3349ce];const _0x2be939=_0x3343c4[_0x25099e(0x111)];if(_0x2be939>0x1){let _0x239ffd=null,_0x2ee075=[];_0x3343c4['forEach'](_0x429d25=>{const _0x32731e=_0x25099e;if(_0x429d25[_0x32731e(0x131)]===ENEMY3_TYPE)_0x239ffd=_0x429d25;else _0x2ee075[_0x32731e(0x160)](_0x429d25);});if(_0x239ffd&&level!==0x1&&_0x2be939===0x3&&_0x2ee075[_0x25099e(0x111)]===0x2)_0x3343c4=[_0x2ee075[0x0],_0x239ffd,_0x2ee075[0x1]];else _0x3343c4[_0x25099e(0x1b3)]((_0x36b157,_0x133933)=>(_0x36b157?.[_0x25099e(0x11b)]??0x0)-(_0x133933?.[_0x25099e(0x11b)]??0x0));const _0x4619a5=0x5;let _0x40f44e=0x0;_0x3343c4=_0x3343c4[_0x25099e(0x234)](_0x34061a=>_0x34061a&&typeof _0x34061a[_0x25099e(0x117)]===_0x25099e(0x232));const _0x5d74a6=_0x3343c4[_0x25099e(0x111)];for(let _0x40e1d8=0x0;_0x40e1d8<_0x5d74a6;_0x40e1d8++){_0x40f44e+=_0x3343c4[_0x40e1d8][_0x25099e(0x117)];if(_0x40e1d8<_0x5d74a6-0x1)_0x40f44e+=_0x4619a5;}const _0x5d8e64=-_0x40f44e/0x2;let _0x11639c=_0x5d8e64;for(let _0x275424=0x0;_0x275424<_0x5d74a6;_0x275424++){const _0x14e3bf=_0x3343c4[_0x275424];_0x14e3bf[_0x25099e(0x22c)]=_0x11639c+_0x14e3bf['width']/0x2,_0x11639c+=_0x14e3bf[_0x25099e(0x117)]+_0x4619a5;}}else _0x3343c4[_0x25099e(0x1ab)](_0x3b9111=>_0x3b9111[_0x25099e(0x22c)]=0x0);const _0x12eb7c=_0x25099e(0x19c)+_0x45d6ef['id']+'-'+_0x59cb4b;_0x3343c4[_0x25099e(0x1ab)](_0xcd4e83=>{if(_0xcd4e83)_0xcd4e83['attackGroupId']=_0x12eb7c;});let _0x40402e=![],_0x4431fd=GROUP_FIRE_BURST_DELAY;if(_0x45d6ef[_0x25099e(0x131)]===ENEMY2_TYPE||_0x45d6ef['type']===ENEMY3_TYPE){_0x40402e=!![];if(_0x45d6ef['type']===ENEMY2_TYPE&&_0x2be939===0x1)_0x4431fd=SOLO_BUTTERFLY_FIRE_DELAY;}else{if(_0x45d6ef[_0x25099e(0x131)]===ENEMY1_TYPE)_0x40402e=!![];}if(_0x20efdd&&level>0x1)_0x40402e=![];_0x40402e&&_0x3343c4[_0x25099e(0x1ab)](_0x579b2d=>{const _0x7a42d7=_0x25099e,_0x243f87=_0x579b2d&&!(_0x579b2d[_0x7a42d7(0x131)]===ENEMY3_TYPE&&_0x579b2d[_0x7a42d7(0x139)]);if(_0x243f87)fireEnemyBurst(_0x579b2d['id'],'attacking',_0x4431fd);}),_0x3343c4['forEach']((_0x3af285,_0x4fab7a)=>{const _0xa0e473=_0x25099e;_0x3af285&&_0x3af285[_0xa0e473(0x1f5)]==='in_grid'&&(_0x3af285[_0xa0e473(0x1f5)]=_0xa0e473(0x121),_0x3af285['justReturned']=![],_0x3af285[_0xa0e473(0x14f)]=0x0,_0x3af285[_0xa0e473(0x1b6)]=0x0,_0x3af285['canFireThisDive']=![],setTimeout(()=>{const _0x29db66=_0xa0e473;if(isPaused)return;const _0x5036ea=enemies[_0x29db66(0x1df)](_0xd59819=>_0xd59819?.['id']===_0x3af285['id']);if(_0x5036ea&&_0x5036ea[_0x29db66(0x1f5)]==='preparing_attack')try{const _0x29a02b=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x5ab97b=0x1;if(_0x5036ea[_0x29db66(0x131)]===ENEMY1_TYPE)_0x5ab97b=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x5036ea[_0x29db66(0x131)]===ENEMY2_TYPE)_0x5ab97b=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x5036ea[_0x29db66(0x131)]===ENEMY3_TYPE)_0x5ab97b=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x3af285[_0x29db66(0x131)]===ENEMY3_TYPE)playSound(_0x29db66(0x21e),![],0.2);else playSound(_0x29db66(0x18e),![],0.2);_0x5036ea[_0x29db66(0x1f5)]=_0x29db66(0x219),_0x5036ea[_0x29db66(0x11e)]=_0x4f7193,_0x5036ea['attackPathSegmentIndex']=0x0,_0x5036ea[_0x29db66(0x214)]=0x0,_0x5036ea[_0x29db66(0x1a7)]=_0x29a02b*_0x5ab97b,_0x5036ea[_0x29db66(0x1ed)]=0x0,_0x5036ea[_0x29db66(0x205)]=!![];}catch(_0xda097c){console[_0x29db66(0x1a0)](_0x29db66(0x224)+_0x3af285['id']+':',_0xda097c);}},_0x4fab7a*GROUP_DETACH_DELAY_MS));});}else _0x5dc592['forEach'](_0x3de41f=>{if(_0x3de41f)_0x3de41f['justReturned']=![];});}}}}}}enemies[_0x25099e(0x1ab)](_0x42bf45=>{const _0x1cc3c1=_0x25099e;if(_0x42bf45&&_0x42bf45[_0x1cc3c1(0x131)]===ENEMY3_TYPE&&_0x42bf45[_0x1cc3c1(0x139)]&&_0x42bf45[_0x1cc3c1(0x1f5)]===_0x1cc3c1(0x219)&&_0x42bf45[_0x1cc3c1(0x130)]&&typeof _0x42bf45['capturedShipLastFiredTime']===_0x1cc3c1(0x232)){if(_0x59cb4b-_0x42bf45['capturedShipLastFiredTime']>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x58c451=_0x42bf45['x']+_0x42bf45[_0x1cc3c1(0x117)]/0x2,_0x20918b=_0x42bf45['y']+_0x42bf45[_0x1cc3c1(0x1d4)]+_0x42bf45[_0x1cc3c1(0x130)]['height']*0.5,_0x2b855b={'x':_0x58c451,'y':_0x20918b};createBulletSimple(_0x42bf45,_0x2b855b)&&(_0x42bf45[_0x1cc3c1(0x189)]=_0x59cb4b,playSound(_0x1cc3c1(0x14e),![],0.4));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x422037=_0x59cb4b-gameOverSequenceStartTime,_0x47b0bd=_0x422037>=GAME_OVER_DURATION;if(_0x47b0bd&&!isShowingResultsScreen){isShowingResultsScreen=!![],stopSound(_0x25099e(0x199)),playSound(_0x25099e(0x164),!![],0.2),explosions=[];if(typeof updateExplosions===_0x25099e(0x123))updateExplosions();}}}!_0x142b09&&renderGame();}catch(_0x64beff){console[_0x25099e(0x1a0)](_0x25099e(0x1cc),_0x64beff,_0x64beff[_0x25099e(0x19a)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert('A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.'),stopAllGameSoundsInternal(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState==='function'&&showMenuState();}catch(_0x1449c4){console['error'](_0x25099e(0x226),_0x1449c4);}}}function checkAndAwardExtraLife(_0x2333fc=null){const _0x2d5941=_0x3bd23c;try{const _0xa038fa=[];if(_0x2333fc===0x1){const _0x5b0738=isTwoPlayerMode&&selectedGameMode===_0x2d5941(0x20a)?player1Lives:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x1?playerLives:player1Lives,_0x128dfb=isTwoPlayerMode&&selectedGameMode===_0x2d5941(0x20a)?player1Score:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x1?score:player1Score;_0xa038fa[_0x2d5941(0x160)]({'num':0x1,'currentLives':_0x5b0738,'currentScore':_0x128dfb,'thresholdsMet':player1LifeThresholdsMet});}else{if(_0x2333fc===0x2&&isTwoPlayerMode){const _0x66e937=selectedGameMode===_0x2d5941(0x20a)?player2Lives:selectedGameMode===_0x2d5941(0x1d5)&&currentPlayer===0x2?playerLives:player2Lives,_0x1f11aa=selectedGameMode===_0x2d5941(0x20a)?player2Score:selectedGameMode===_0x2d5941(0x1d5)&&currentPlayer===0x2?score:player2Score;_0xa038fa[_0x2d5941(0x160)]({'num':0x2,'currentLives':_0x66e937,'currentScore':_0x1f11aa,'thresholdsMet':player2LifeThresholdsMet});}else{if(isTwoPlayerMode&&selectedGameMode===_0x2d5941(0x20a)&&_0x2333fc===null)_0xa038fa['push']({'num':0x1,'currentLives':player1Lives,'currentScore':player1Score,'thresholdsMet':player1LifeThresholdsMet}),_0xa038fa[_0x2d5941(0x160)]({'num':0x2,'currentLives':player2Lives,'currentScore':player2Score,'thresholdsMet':player2LifeThresholdsMet});else{if(!isTwoPlayerMode&&(_0x2333fc===null||_0x2333fc===0x1))_0xa038fa[_0x2d5941(0x160)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet});else isTwoPlayerMode&&selectedGameMode===_0x2d5941(0x1d5)&&_0x2333fc===currentPlayer&&(currentPlayer===0x1?_0xa038fa['push']({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet}):_0xa038fa[_0x2d5941(0x160)]({'num':0x2,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player2LifeThresholdsMet}));}}}_0xa038fa[_0x2d5941(0x1ab)](_0x929456=>{const _0x1e7a3b=_0x2d5941;let _0x5c9cba=![];while(!![]){let _0x4c323f=![],_0x18f124=-0x1;const _0x413f00=_0x929456[_0x1e7a3b(0x10e)][_0x1e7a3b(0x113)];if(_0x413f00===0x0)_0x18f124=EXTRA_LIFE_THRESHOLD_1;else{if(_0x413f00===0x1&&!_0x929456[_0x1e7a3b(0x10e)][_0x1e7a3b(0x137)](EXTRA_LIFE_THRESHOLD_2))_0x18f124=EXTRA_LIFE_THRESHOLD_2;else{if(_0x413f00>=0x1&&_0x929456[_0x1e7a3b(0x10e)][_0x1e7a3b(0x137)](EXTRA_LIFE_THRESHOLD_1)&&_0x929456[_0x1e7a3b(0x10e)]['has'](EXTRA_LIFE_THRESHOLD_2)){let _0x52321d=0x0;_0x929456[_0x1e7a3b(0x10e)]['forEach'](_0x275eda=>{_0x275eda>=EXTRA_LIFE_THRESHOLD_2&&(_0x275eda-EXTRA_LIFE_THRESHOLD_2)%RECURRING_EXTRA_LIFE_INTERVAL===0x0&&_0x52321d++;}),_0x18f124=EXTRA_LIFE_THRESHOLD_2+_0x52321d*RECURRING_EXTRA_LIFE_INTERVAL;}else{if(_0x413f00===0x1&&_0x929456[_0x1e7a3b(0x10e)][_0x1e7a3b(0x137)](EXTRA_LIFE_THRESHOLD_1)&&!_0x929456[_0x1e7a3b(0x10e)]['has'](EXTRA_LIFE_THRESHOLD_2))_0x18f124=EXTRA_LIFE_THRESHOLD_2;else _0x413f00===0x1&&_0x929456[_0x1e7a3b(0x10e)][_0x1e7a3b(0x137)](EXTRA_LIFE_THRESHOLD_2)&&!_0x929456[_0x1e7a3b(0x10e)][_0x1e7a3b(0x137)](EXTRA_LIFE_THRESHOLD_1)&&(_0x18f124=EXTRA_LIFE_THRESHOLD_1);}}}if(_0x18f124!==-0x1&&_0x929456[_0x1e7a3b(0x107)]>=_0x18f124&&!_0x929456['thresholdsMet']['has'](_0x18f124)){if(_0x929456[_0x1e7a3b(0x1ae)]===0x1){if(isTwoPlayerMode&&selectedGameMode===_0x1e7a3b(0x20a))player1Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x1e7a3b(0x1d5)&&currentPlayer===0x1)playerLives++;else{if(!isTwoPlayerMode)playerLives++;}}player1Lives=isTwoPlayerMode&&selectedGameMode===_0x1e7a3b(0x20a)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x1e7a3b(0x1d5)&&currentPlayer===0x1?playerLives:player1Lives,_0x929456[_0x1e7a3b(0x23b)]=player1Lives;}else{if(_0x929456['num']===0x2){if(isTwoPlayerMode&&selectedGameMode==='coop')player2Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x1e7a3b(0x1d5)&&currentPlayer===0x2)playerLives++;}player2Lives=isTwoPlayerMode&&selectedGameMode===_0x1e7a3b(0x20a)?player2Lives:isTwoPlayerMode&&selectedGameMode===_0x1e7a3b(0x1d5)&&currentPlayer===0x2?playerLives:player2Lives,_0x929456['currentLives']=player2Lives;}}_0x929456[_0x1e7a3b(0x10e)]['add'](_0x18f124),_0x5c9cba=!![],_0x4c323f=!![];}if(!_0x4c323f)break;}_0x5c9cba&&!showExtraLifeMessage&&!showCsBonusScoreMessage&&!showPerfectMessage&&!showCsHitsMessage&&!showCSClearMessage&&!showReadyMessage&&setTimeout(()=>{const _0x276ad5=_0x1e7a3b;if(isInGameState){explosions=[];if(typeof updateExplosions===_0x276ad5(0x123))updateExplosions();showExtraLifeMessage=!![],extraLifeMessageStartTime=Date[_0x276ad5(0x1b5)](),playSound(_0x276ad5(0x1be),![],0.5);}},EXPLOSION_DURATION);});}catch(_0x475d57){console[_0x2d5941(0x1a0)]('Error\x20checking/awarding\x20extra\x20life:',_0x475d57);}}