const _0x49ddb3=_0x3195;(function(_0x155246,_0x3d863d){const _0x101014=_0x3195,_0x1bf238=_0x155246();while(!![]){try{const _0x123db6=parseInt(_0x101014(0x203))/0x1+parseInt(_0x101014(0x1fe))/0x2+parseInt(_0x101014(0x2ae))/0x3*(-parseInt(_0x101014(0x1fd))/0x4)+parseInt(_0x101014(0x28f))/0x5+-parseInt(_0x101014(0x2e0))/0x6*(-parseInt(_0x101014(0x1d4))/0x7)+parseInt(_0x101014(0x27b))/0x8*(parseInt(_0x101014(0x299))/0x9)+-parseInt(_0x101014(0x246))/0xa;if(_0x123db6===_0x3d863d)break;else _0x1bf238['push'](_0x1bf238['shift']());}catch(_0x19a076){_0x1bf238['push'](_0x1bf238['shift']());}}}(_0x2e84,0x99671));function generateAttackPathInternal(_0x5cd185){const _0x2a1833=_0x3195;try{if(!_0x5cd185||!gameCanvas)return[];const _0x6be422=_0x5cd185['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x5cd185['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x3f0ea8=_0x5cd185['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0x5cd185[_0x2a1833(0x22c)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x246fa2=_0x6be422*0.5,_0x3f6599=gameCanvas[_0x2a1833(0x268)],_0x2d6677=gameCanvas[_0x2a1833(0x1ff)];let _0x2b1b66=[];const _0x33f79a={'x':_0x5cd185['x'],'y':_0x5cd185['y']},_0x4cbbfa=Math[_0x2a1833(0x20a)](_0x2d6677*0.06,_0x3f0ea8*1.8),_0x341b9d=Math[_0x2a1833(0x20a)](_0x3f6599*0.04,_0x6be422*1.2),_0x51951c=_0x5cd185['x']+_0x6be422/0x2<_0x3f6599/0x2?0x1:-0x1,_0x522f36={'x':_0x33f79a['x']-_0x51951c*_0x341b9d*0.6,'y':_0x33f79a['y']-_0x4cbbfa};_0x522f36['x']=Math[_0x2a1833(0x221)](_0x246fa2,Math[_0x2a1833(0x20a)](_0x3f6599-_0x246fa2-_0x6be422,_0x522f36['x'])),_0x522f36['y']=Math[_0x2a1833(0x221)](_0x246fa2,_0x522f36['y']);const _0x1e6505={'x':_0x33f79a['x']+_0x51951c*_0x341b9d*0.1,'y':_0x33f79a['y']-_0x4cbbfa*1.4},_0x238f14={'x':_0x522f36['x']+_0x51951c*_0x341b9d*0.3,'y':_0x33f79a['y']-_0x4cbbfa*1.5},_0x3ae193={'p0':_0x33f79a,'p1':_0x1e6505,'p2':_0x238f14,'p3':_0x522f36};_0x2b1b66[_0x2a1833(0x283)](_0x3ae193);const _0xc17b3a=_0x522f36,_0x2c1a4c=_0x2d6677*0.45,_0x5ceb49=_0x3f6599*0.22,_0x3e89b2=_0x2d6677*0.28,_0x2e691d=0.5,_0x4565bd=0.6,_0x63366c=_0x2d6677*0.85,_0x272791=Math[_0x2a1833(0x2d7)](Math[_0x2a1833(0x24c)]()*0x3);let _0x369889=[];if(_0x272791===0x0){const _0x307217=_0x2c1a4c+Math[_0x2a1833(0x24c)]()*_0x2d6677*0.1,_0x2511f3=_0x5ceb49+Math[_0x2a1833(0x24c)]()*_0x3f6599*0.08,_0x4f4221=_0x3e89b2+Math[_0x2a1833(0x24c)]()*_0x2d6677*0.08,_0x23d5ee=_0xc17b3a['x']+_0x51951c*_0x2511f3*0.5,_0x41fc11=Math[_0x2a1833(0x20a)](_0x63366c,_0xc17b3a['y']+_0x307217),_0x5badb2=_0x23d5ee+_0x51951c*_0x2511f3*0.5,_0x5b384e=Math[_0x2a1833(0x221)](_0xc17b3a['y']+0x14,_0x41fc11-_0x4f4221),_0x39acee=_0x5badb2-_0x51951c*_0x2511f3*0.9,_0x39fa5a=Math[_0x2a1833(0x221)](_0xc17b3a['y']+0x28,_0x5b384e+_0x4f4221*0.6),_0x478a9a=_0x39acee-_0x51951c*_0x2511f3*0.3,_0x1a9c38=_0x2d6677+_0x3f0ea8*0x2,_0x4d8e06=Math[_0x2a1833(0x221)](_0x246fa2,Math[_0x2a1833(0x20a)](_0x3f6599-_0x246fa2-_0x6be422,_0x23d5ee)),_0x51f444=Math[_0x2a1833(0x221)](_0x246fa2,Math['min'](_0x3f6599-_0x246fa2-_0x6be422,_0x5badb2)),_0x400719=Math[_0x2a1833(0x221)](_0x246fa2,Math[_0x2a1833(0x20a)](_0x3f6599-_0x246fa2-_0x6be422,_0x39acee)),_0x15e161={'x':_0xc17b3a['x'],'y':_0xc17b3a['y']+_0x307217*_0x4565bd*0.5},_0x22a189={'x':_0x4d8e06-_0x51951c*_0x2511f3*_0x2e691d,'y':_0x41fc11},_0x1331ad={'x':_0x4d8e06,'y':_0x41fc11},_0x152819={'x':_0x4d8e06+_0x51951c*_0x2511f3*_0x2e691d,'y':_0x41fc11},_0xee23c3={'x':_0x51f444,'y':_0x5b384e+_0x4f4221*_0x4565bd},_0x26edec={'x':_0x51f444,'y':_0x5b384e},_0x30e64c={'x':_0x51f444,'y':_0x5b384e-_0x4f4221*_0x4565bd*0.5},_0x24d0fd={'x':_0x400719+_0x51951c*_0x2511f3*_0x2e691d,'y':_0x39fa5a},_0x540b62={'x':_0x400719,'y':_0x39fa5a},_0x4d2979={'x':_0x540b62['x'],'y':_0x540b62['y']+_0x2d6677*0.1},_0x10a485={'x':_0x478a9a,'y':_0x1a9c38-_0x2d6677*0.2},_0x14208f={'x':_0x478a9a,'y':_0x1a9c38};_0x369889=[{'p0':_0xc17b3a,'p1':_0x15e161,'p2':_0x22a189,'p3':_0x1331ad},{'p0':_0x1331ad,'p1':_0x152819,'p2':_0xee23c3,'p3':_0x26edec},{'p0':_0x26edec,'p1':_0x30e64c,'p2':_0x24d0fd,'p3':_0x540b62},{'p0':_0x540b62,'p1':_0x4d2979,'p2':_0x10a485,'p3':_0x14208f}];}else{if(_0x272791===0x1){const _0xc2c5fa=_0x2c1a4c*0.8+Math[_0x2a1833(0x24c)]()*_0x2d6677*0.1,_0x3b02a4=_0x5ceb49*1.2+Math[_0x2a1833(0x24c)]()*_0x3f6599*0.1,_0x27009b=_0x3e89b2*0.7+Math[_0x2a1833(0x24c)]()*_0x2d6677*0.1,_0x30680c=_0xc17b3a['x']+_0x51951c*_0x3b02a4*0.4,_0x2c06e7=Math['min'](_0x63366c-_0x27009b*0.5,_0xc17b3a['y']+_0xc2c5fa*0.6),_0x1b083a=_0x30680c+_0x51951c*_0x3b02a4*0.6,_0x45d857=Math[_0x2a1833(0x20a)](_0x63366c,_0x2c06e7+_0x27009b),_0x372b78=_0x1b083a-_0x51951c*_0x3b02a4*0.5,_0x516a84=_0x2d6677+_0x3f0ea8*0x2,_0x2ee2ae=Math[_0x2a1833(0x221)](_0x246fa2,Math['min'](_0x3f6599-_0x246fa2-_0x6be422,_0x30680c)),_0x38b4a8=Math['max'](_0x246fa2,Math['min'](_0x3f6599-_0x246fa2-_0x6be422,_0x1b083a)),_0x61f6c0={'x':_0xc17b3a['x']-_0x51951c*_0x3b02a4*0.1,'y':_0xc17b3a['y']+_0xc2c5fa*0.3},_0x192076={'x':_0x2ee2ae-_0x51951c*_0x3b02a4*_0x2e691d*0.8,'y':_0x2c06e7+_0x27009b*_0x4565bd*0.4},_0x192726={'x':_0x2ee2ae,'y':_0x2c06e7},_0x1fce45={'x':_0x2ee2ae+_0x51951c*_0x3b02a4*_0x2e691d*0.8,'y':_0x2c06e7-_0x27009b*_0x4565bd*0.4},_0x131e48={'x':_0x38b4a8+_0x51951c*_0x3b02a4*_0x2e691d*0.6,'y':_0x45d857+_0x27009b*_0x4565bd*0.5},_0x35b022={'x':_0x38b4a8,'y':_0x45d857},_0x432625={'x':_0x38b4a8-_0x51951c*_0x3b02a4*0.2,'y':_0x45d857+_0x2d6677*0.1},_0x1c4de1={'x':_0x372b78,'y':_0x516a84-_0x2d6677*0.3},_0x5134f4={'x':_0x372b78,'y':_0x516a84};_0x369889=[{'p0':_0xc17b3a,'p1':_0x61f6c0,'p2':_0x192076,'p3':_0x192726},{'p0':_0x192726,'p1':_0x1fce45,'p2':_0x131e48,'p3':_0x35b022},{'p0':_0x35b022,'p1':_0x432625,'p2':_0x1c4de1,'p3':_0x5134f4}];}else{const _0x2cda69=_0x2c1a4c*0.6+Math[_0x2a1833(0x24c)]()*_0x2d6677*0.05,_0x25d87c=_0x5ceb49*0.7+Math[_0x2a1833(0x24c)]()*_0x3f6599*0.05,_0x75f9cb=_0x3e89b2*0.6+Math[_0x2a1833(0x24c)]()*_0x2d6677*0.05,_0x4043ab=_0x75f9cb*1.5,_0x774880=_0xc17b3a['x']+_0x51951c*_0x25d87c*0.5,_0x59bedd=Math[_0x2a1833(0x20a)](_0x63366c-_0x4043ab,_0xc17b3a['y']+_0x2cda69),_0x58db2b=_0x774880+_0x51951c*_0x25d87c*0.5,_0x138f76=_0x59bedd+_0x75f9cb,_0x169ef4=_0x58db2b-_0x51951c*_0x25d87c*0.8,_0x3436f3=Math[_0x2a1833(0x20a)](_0x63366c,_0x138f76+_0x4043ab*0.7),_0x2cd002=_0x169ef4+_0x51951c*_0x25d87c*0.4,_0x586eda=_0x3436f3+_0x75f9cb*0.8,_0x49e65d=_0x2cd002,_0x3ab733=_0x2d6677+_0x3f0ea8*0x2,_0x367705=Math[_0x2a1833(0x221)](_0x246fa2,Math['min'](_0x3f6599-_0x246fa2-_0x6be422,_0x774880)),_0x3a5354=Math[_0x2a1833(0x221)](_0x246fa2,Math['min'](_0x3f6599-_0x246fa2-_0x6be422,_0x58db2b)),_0x5a6ff6=Math[_0x2a1833(0x221)](_0x246fa2,Math[_0x2a1833(0x20a)](_0x3f6599-_0x246fa2-_0x6be422,_0x169ef4)),_0x1e7f13=Math[_0x2a1833(0x221)](_0x246fa2,Math[_0x2a1833(0x20a)](_0x3f6599-_0x246fa2-_0x6be422,_0x2cd002)),_0x12fdea={'x':_0xc17b3a['x'],'y':_0xc17b3a['y']+_0x2cda69*0.5},_0x35a7ec={'x':_0x367705-_0x51951c*_0x25d87c*_0x2e691d,'y':_0x59bedd+_0x75f9cb*_0x4565bd*0.3},_0x170a57={'x':_0x367705,'y':_0x59bedd},_0x4208c0={'x':_0x367705+_0x51951c*_0x25d87c*_0x2e691d,'y':_0x59bedd-_0x75f9cb*_0x4565bd*0.3},_0xa1cc44={'x':_0x3a5354+_0x51951c*_0x25d87c*_0x2e691d,'y':_0x138f76+_0x75f9cb*_0x4565bd*0.5},_0x5a780e={'x':_0x3a5354,'y':_0x138f76},_0x2842c5={'x':_0x3a5354-_0x51951c*_0x25d87c*_0x2e691d,'y':_0x138f76-_0x75f9cb*_0x4565bd*0.5},_0xf12720={'x':_0x5a6ff6-_0x51951c*_0x25d87c*_0x2e691d,'y':_0x3436f3+_0x75f9cb*_0x4565bd*0.4},_0x4b5afd={'x':_0x5a6ff6,'y':_0x3436f3},_0x2678ab={'x':_0x5a6ff6+_0x51951c*_0x25d87c*_0x2e691d,'y':_0x3436f3-_0x75f9cb*_0x4565bd*0.4},_0x5a44fe={'x':_0x1e7f13+_0x51951c*_0x25d87c*_0x2e691d,'y':_0x586eda+_0x75f9cb*_0x4565bd*0.6},_0x3c7a11={'x':_0x1e7f13,'y':_0x586eda},_0x32af40={'x':_0x1e7f13-_0x51951c*_0x25d87c*0.1,'y':_0x586eda+_0x2d6677*0.05},_0x147114={'x':_0x49e65d,'y':_0x3ab733-_0x2d6677*0.2},_0x1a3e29={'x':_0x49e65d,'y':_0x3ab733};_0x369889=[{'p0':_0xc17b3a,'p1':_0x12fdea,'p2':_0x35a7ec,'p3':_0x170a57},{'p0':_0x170a57,'p1':_0x4208c0,'p2':_0xa1cc44,'p3':_0x5a780e},{'p0':_0x5a780e,'p1':_0x2842c5,'p2':_0xf12720,'p3':_0x4b5afd},{'p0':_0x4b5afd,'p1':_0x2678ab,'p2':_0x5a44fe,'p3':_0x3c7a11},{'p0':_0x3c7a11,'p1':_0x32af40,'p2':_0x147114,'p3':_0x1a3e29}];}}return _0x2b1b66[_0x2a1833(0x283)](..._0x369889),_0x2b1b66;}catch(_0x2ad005){return console[_0x2a1833(0x2e2)](_0x2a1833(0x1be)+_0x5cd185?.['id']+':',_0x2ad005),[];}}window['generateAttackPath']=generateAttackPathInternal;function resetAllMessagesInternal(){showReadyMessage=![],isShowingIntro=![],showCsHitsMessage=![],showPerfectMessage=![],showCsBonusScoreMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],isShowingCaptureMessage=![],isShowingPlayerGameOverMessage=![],isShowingCoopPlayersReady=![],csHitsMessageStartTime=0x0,perfectMessageStartTime=0x0,csBonusScoreMessageStartTime=0x0,csClearMessageStartTime=0x0,extraLifeMessageStartTime=0x0,readyMessageStartTime=0x0,captureMessageStartTime=0x0,playerGameOverMessageStartTime=0x0,csCompletionDelayStartTime=0x0,introDisplayStartTime=0x0,coopPlayersReadyStartTime=0x0;}window[_0x49ddb3(0x1d7)]=resetAllMessagesInternal;function stopAllGameSoundsInternal(){const _0x51fb77=_0x49ddb3;if(typeof soundPaths===_0x51fb77(0x288)&&soundPaths!==null&&typeof stopSound===_0x51fb77(0x217))for(const _0x2af9c5 in soundPaths){stopSound(_0x2af9c5);}isGridSoundPlaying=![];}window['stopAllGameSounds']=stopAllGameSoundsInternal;function resetGameInternal(){const _0x2cb12d=_0x49ddb3;score=0x0,level=0x1,playerLives=0x3,window[_0x2cb12d(0x1f2)]=null;if(isTwoPlayerMode){player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,currentPlayer=0x1,player1CompletedLevel=-0x1,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x2cb12d(0x231)]();else player1LifeThresholdsMet=new Set();if(player2LifeThresholdsMet instanceof Set)player2LifeThresholdsMet[_0x2cb12d(0x231)]();else player2LifeThresholdsMet=new Set();player1IsDualShipActive=![],player2IsDualShipActive=![],isPlayer1ShipCaptured=![],isPlayer2ShipCaptured=![],isPlayer1WaitingForRespawn=![],isPlayer2WaitingForRespawn=![],isPlayer1Invincible=![],isPlayer2Invincible=![],player1RespawnTime=0x0,player2RespawnTime=0x0,player1InvincibilityEndTime=0x0,player2InvincibilityEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![];if(selectedGameMode==='coop'){playerLives=0x0;if(gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x2cb12d(0x1ff)]>0x0){const _0x26885a=gameCanvas['width']/0x2-gameCanvas[_0x2cb12d(0x268)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x575eb0=gameCanvas['width']/0x2+gameCanvas[_0x2cb12d(0x268)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x25f3e8=gameCanvas[_0x2cb12d(0x1ff)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;ship1={'x':_0x26885a,'y':_0x25f3e8,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x26885a,'id':'p1'},ship2={'x':_0x575eb0,'y':_0x25f3e8,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x575eb0,'id':'p2'},(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2cb12d(0x232))&&(smoothedShip1X=_0x26885a,smoothedShip2X=_0x575eb0,aiShip1TargetEnemy=null,aiShip2TargetEnemy=null,aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0,aiShip1LastShotTime=0x0,aiShip2LastShotTime=0x0,aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);}ship=null;}else{if(!ship&&gameCanvas&&gameCanvas[_0x2cb12d(0x268)]>0x0&&gameCanvas[_0x2cb12d(0x1ff)]>0x0)ship={'x':Math[_0x2cb12d(0x249)](gameCanvas[_0x2cb12d(0x268)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x2cb12d(0x1ff)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x2cb12d(0x289)},ship['targetX']=ship['x'];else ship&&gameCanvas&&gameCanvas[_0x2cb12d(0x268)]>0x0&&gameCanvas[_0x2cb12d(0x1ff)]>0x0&&(ship['x']=Math['round'](gameCanvas[_0x2cb12d(0x268)]/0x2-SHIP_WIDTH/0x2),ship[_0x2cb12d(0x1b5)]=ship['x'],ship['y']=gameCanvas[_0x2cb12d(0x1ff)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}}else{player1Lives=0x3,player1Score=0x0,player1MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x2cb12d(0x231)]();else player1LifeThresholdsMet=new Set();if(!ship&&gameCanvas&&gameCanvas[_0x2cb12d(0x268)]>0x0&&gameCanvas['height']>0x0)ship={'x':Math['round'](gameCanvas[_0x2cb12d(0x268)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x2cb12d(0x1ff)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x2cb12d(0x289)},ship[_0x2cb12d(0x1b5)]=ship['x'];else ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x2cb12d(0x1ff)]>0x0&&(ship['x']=Math['round'](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),ship['targetX']=ship['x'],ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isDualShipActive=![];if(!isTwoPlayerMode)player1IsDualShipActive=![];fallingShips=[],visualOffsetX=-0x14,gameOverSequenceStartTime=0x0,isShowingResultsScreen=![],gameStartTime=Date['now'](),gameJustStarted=!![],gameJustStartedAndWaveLaunched=![],currentGridOffsetX=0x0,gridMoveDirection=0x1,gridJustCompleted=![],isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,lastGridFireCheckTime=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,scoreEarnedThisCS=0x0,challengingStageEnemiesHit=0x0,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined,aiCanShootTime=0x0,aiLastShotTime=0x0,!(selectedGameMode===_0x2cb12d(0x233)&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2cb12d(0x232)))&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0),playerLastShotTime=0x0,player1LastShotTime=0x0,player2LastShotTime=0x0,p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isShowingCoopPlayersReady=![],coopPlayersReadyStartTime=0x0,resetWaveInternal();}window[_0x49ddb3(0x1e2)]=resetGameInternal;function resetWaveInternal(){const _0x14913d=_0x49ddb3;isWaveTransitioning=![],readyForNextWave=![],readyForNextWaveReset=![],isEntrancePhaseActive=!![],firstEnemyLanded=![],captureAttemptMadeThisLevel=![],gameJustStartedAndWaveLaunched=![],aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![],enemies=[],bullets=[],enemyBullets=[],explosions=[],floatingScores=[],hitSparks=[];Array[_0x14913d(0x2e6)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x14913d(0x201)](clearTimeout);enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;const _0x91546f=getWaveTypeInternal(level);isChallengingStage=_0x91546f===_0x14913d(0x1c0),isFullGridWave=_0x91546f==='full_grid',challengingStageEnemiesHit=0x0,scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null;(isFullGridWave||isChallengingStage)&&(isEntrancePhaseActive=![]);const _0x2d6525=isShowingDemoText;resetAllMessagesInternal();_0x2d6525&&(isShowingDemoText=!![]);if(selectedGameMode===_0x14913d(0x233)&&level===0x1)isShowingIntro=![],introStep=0x2;else{if(isTwoPlayerMode&&selectedGameMode===_0x14913d(0x1ea)||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x14913d(0x24b)){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(isChallengingStage){introStep=0x3,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(level===0x1&&!isTwoPlayerMode){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{introStep=0x2,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}}}}isShowingIntro&&!(selectedGameMode==='coop'&&level===0x1)&&(introDisplayStartTime=Date[_0x14913d(0x28d)]());playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],currentWaveDefinition=generateWaveDefinitionInternal(level);if(selectedGameMode==='coop'){if(gameCanvas&&gameCanvas[_0x14913d(0x268)]>0x0&&gameCanvas[_0x14913d(0x1ff)]>0x0){const _0x351815=ship1&&player1Lives>0x0,_0x51105f=ship2&&player2Lives>0x0,_0x4f66c9=gameCanvas[_0x14913d(0x1ff)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x14913d(0x232)){if(_0x351815&&_0x51105f){const _0x1086ba=gameCanvas[_0x14913d(0x268)]/0x2-gameCanvas[_0x14913d(0x268)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1&&(ship1[_0x14913d(0x1b5)]=_0x1086ba,ship1['x']=_0x1086ba,smoothedShip1X=_0x1086ba,ship1['y']=_0x4f66c9);const _0x37e442=gameCanvas[_0x14913d(0x268)]/0x2+gameCanvas[_0x14913d(0x268)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2[_0x14913d(0x1b5)]=_0x37e442,ship2['x']=_0x37e442,smoothedShip2X=_0x37e442,ship2['y']=_0x4f66c9);}else{if(_0x351815&&ship1){const _0x3e9cc7=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x4f2164=Math[_0x14913d(0x249)](gameCanvas[_0x14913d(0x268)]/0x2-_0x3e9cc7/0x2);ship1[_0x14913d(0x1b5)]=_0x4f2164,ship1['x']=_0x4f2164,smoothedShip1X=_0x4f2164,ship1['y']=_0x4f66c9;}else{if(_0x51105f&&ship2){const _0x1e97d1=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x2d9a20=Math[_0x14913d(0x249)](gameCanvas[_0x14913d(0x268)]/0x2-_0x1e97d1/0x2);ship2[_0x14913d(0x1b5)]=_0x2d9a20,ship2['x']=_0x2d9a20,smoothedShip2X=_0x2d9a20,ship2['y']=_0x4f66c9;}}}}else{if(_0x351815&&ship1)ship1['y']=_0x4f66c9;if(_0x51105f&&ship2)ship2['y']=_0x4f66c9;}}}else{if(ship&&gameCanvas&&gameCanvas[_0x14913d(0x268)]>0x0&&gameCanvas[_0x14913d(0x1ff)]>0x0&&(forceCenterShipNextReset||!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x14913d(0x1ea)&&currentPlayer===0x2)){let _0x38d923=ship[_0x14913d(0x268)];if(isDualShipActive)_0x38d923=DUAL_SHIP_OFFSET_X+SHIP_WIDTH;ship['x']=Math[_0x14913d(0x249)](gameCanvas['width']/0x2-_0x38d923/0x2),ship['targetX']=ship['x'],ship['y']=gameCanvas[_0x14913d(0x1ff)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)smoothedShipX=ship['x'];}else ship&&gameCanvas&&gameCanvas[_0x14913d(0x268)]>0x0&&(ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);}forceCenterShipNextReset=![];if(!isManualControl&&aiNeedsStabilization&&selectedGameMode!=='coop'&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x14913d(0x1ea)&&currentPlayer===0x2)){aiStabilizationEndTime=Date[_0x14913d(0x28d)]()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}else{if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2&&aiNeedsStabilization){aiStabilizationEndTime=Date[_0x14913d(0x28d)]()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}}}window['resetWave']=resetWaveInternal;function getWaveTypeInternal(_0x248cfe){const _0x1a959c=_0x49ddb3,_0x50abb8=(_0x248cfe-0x1)%0x4;switch(_0x50abb8){case 0x0:return _0x1a959c(0x237);case 0x1:return _0x1a959c(0x1bd);case 0x2:return _0x1a959c(0x1c0);case 0x3:return _0x1a959c(0x2a0);default:return _0x1a959c(0x2b2);}}window[_0x49ddb3(0x25b)]=getWaveTypeInternal;function generateWaveDefinitionInternal(_0x5aa1db){const _0x236d85=_0x49ddb3;let _0x3f48b3=[];currentWavePatternIndex=-0x1;const _0x119a1a=getWaveTypeInternal(_0x5aa1db);if(typeof waveEntrancePatterns===_0x236d85(0x1ee)||!Array['isArray'](waveEntrancePatterns)||waveEntrancePatterns[_0x236d85(0x2a3)]<0x2)return console[_0x236d85(0x2e2)]('CRITICAL:\x20waveEntrancePatterns\x20not\x20defined\x20or\x20insufficient\x20for\x20wave\x20generation.'),[];if(_0x119a1a===_0x236d85(0x1c0))_0x3f48b3=[];else{if(_0x119a1a===_0x236d85(0x237)){currentWavePatternIndex=0x0;const _0x40920e=waveEntrancePatterns[0x0];if(!_0x40920e||_0x40920e[_0x236d85(0x2a3)]===0x0)console['error'](_0x236d85(0x227)),_0x3f48b3=[];else try{_0x3f48b3=JSON[_0x236d85(0x1b2)](JSON[_0x236d85(0x2c1)](_0x40920e),(_0x433e43,_0x358748)=>{const _0x10ee1a=_0x236d85;return _0x358748&&typeof _0x358748===_0x10ee1a(0x288)&&_0x358748[_0x10ee1a(0x22c)]===ENEMY3_TYPE&&typeof _0x358748[_0x10ee1a(0x20c)]==='undefined'&&(_0x358748[_0x10ee1a(0x20c)]=![]),_0x358748;});}catch(_0x1b25a6){console[_0x236d85(0x2e2)]('Error\x20cloning\x20full\x20grid\x20wave\x20pattern:',_0x1b25a6),_0x3f48b3=[];}}else{if(_0x119a1a===_0x236d85(0x1bd)){currentWavePatternIndex=0x0;const _0x47cae3=waveEntrancePatterns[0x0];if(!_0x47cae3||_0x47cae3['length']===0x0)console[_0x236d85(0x2e2)]('CRITICAL:\x20Entrance\x20flight\x201\x20wave\x20pattern\x20(index\x200)\x20is\x20missing\x20or\x20empty.'),_0x3f48b3=[];else try{_0x3f48b3=JSON[_0x236d85(0x1b2)](JSON['stringify'](_0x47cae3),(_0x3aaccb,_0x3b5341)=>{const _0x6253bc=_0x236d85;return _0x3b5341&&typeof _0x3b5341===_0x6253bc(0x288)&&_0x3b5341[_0x6253bc(0x22c)]===ENEMY3_TYPE&&typeof _0x3b5341['hasCapturedShip']===_0x6253bc(0x1ee)&&(_0x3b5341[_0x6253bc(0x20c)]=![]),_0x3b5341;});}catch(_0x3aa92b){console['error']('Error\x20cloning\x20entrance\x20flight\x201\x20wave\x20pattern:',_0x3aa92b),_0x3f48b3=[];}}else{if(_0x119a1a===_0x236d85(0x2a0)){currentWavePatternIndex=0x1;const _0x3c1194=waveEntrancePatterns[0x1];if(!_0x3c1194||_0x3c1194[_0x236d85(0x2a3)]===0x0)console[_0x236d85(0x2e2)](_0x236d85(0x1b8)),_0x3f48b3=[];else try{_0x3f48b3=JSON[_0x236d85(0x1b2)](JSON[_0x236d85(0x2c1)](_0x3c1194),(_0x474b6c,_0x5b2087)=>{const _0xcd4fce=_0x236d85;return _0x5b2087&&typeof _0x5b2087===_0xcd4fce(0x288)&&_0x5b2087['type']===ENEMY3_TYPE&&typeof _0x5b2087[_0xcd4fce(0x20c)]===_0xcd4fce(0x1ee)&&(_0x5b2087['hasCapturedShip']=![]),_0x5b2087;});}catch(_0x36a272){console[_0x236d85(0x2e2)]('Error\x20cloning\x20entrance\x20flight\x202\x20wave\x20pattern:',_0x36a272),_0x3f48b3=[];}}else console['warn'](_0x236d85(0x1d0)+_0x5aa1db+':\x20'+_0x119a1a),_0x3f48b3=[];}}}if(_0x119a1a!==_0x236d85(0x1c0)){if(typeof normalWaveEntrancePaths===_0x236d85(0x1ee)||Object[_0x236d85(0x1ba)](normalWaveEntrancePaths)[_0x236d85(0x2a3)]===0x0)return console[_0x236d85(0x2e2)](_0x236d85(0x228)),_0x3f48b3;for(let _0x224c02=_0x3f48b3[_0x236d85(0x2a3)]-0x1;_0x224c02>=0x0;_0x224c02--){const _0x39d676=_0x3f48b3[_0x224c02];if(!normalWaveEntrancePaths?.[_0x39d676[_0x236d85(0x20b)]]){_0x3f48b3['splice'](_0x224c02,0x1);continue;}if(_0x39d676[_0x236d85(0x271)]&&Array[_0x236d85(0x2e6)](_0x39d676[_0x236d85(0x271)])){for(let _0x518b2c=_0x39d676[_0x236d85(0x271)]['length']-0x1;_0x518b2c>=0x0;_0x518b2c--){const _0x2519a3=_0x39d676[_0x236d85(0x271)][_0x518b2c];(!_0x2519a3||!normalWaveEntrancePaths?.[_0x2519a3[_0x236d85(0x2a8)]])&&_0x39d676[_0x236d85(0x271)][_0x236d85(0x1bc)](_0x518b2c,0x1),_0x2519a3&&_0x2519a3['type']===ENEMY3_TYPE&&typeof _0x2519a3['hasCapturedShip']===_0x236d85(0x1ee)&&(_0x2519a3[_0x236d85(0x20c)]=![]);}_0x39d676[_0x236d85(0x271)][_0x236d85(0x2a3)]===0x0&&_0x3f48b3[_0x236d85(0x1bc)](_0x224c02,0x1);}else _0x3f48b3[_0x236d85(0x1bc)](_0x224c02,0x1);}}return _0x3f48b3;}function _0x2e84(){const _0x59fdc2=['1P_VS_AI_COOP','coop','\x20after\x20invalid\x20path\x20index','naturalHeight','some','full_grid','following_entrance_path','\x20missing\x20SHARED\x20path\x20','rotationDirection','entranceSound','Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:','!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!','capturePrepareTimeout','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20or\x20with\x20no\x20definition.\x20Level\x20','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','\x20at\x20end\x20of\x20normal\x20path\x20','Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20','dualShipSound','single',',\x20def\x20length:\x20','10642860PBVQpM','lostLifeSound','warn','round','velocityY','1P_VS_AI_NORMAL','random','indexOf','cos','butterflyDiveSound','GAME\x20EXIT','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','\x22\x20not\x20found!\x20Aborting\x20CS.','shoot','),\x20index\x20','Error\x20in\x20aiControl:','\x20invalid!\x20Skipping.','Error\x20in\x20findAndDetachEnemy:','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','isDamaged','capturedShipDimensions','getWaveType',')\x20during\x20shift:','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20','diveStartTime','gridBackgroundSound','Invalid\x20next\x20Normal\x20Bezier\x20segment\x20','returning','speed','CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20',')!\x20Returning.','pathSpeedMultiplier','green','enemy-cs-','width','squadronId','number','sin','Entrance\x20Wave:\x20Path\x20','moving_to_grid','Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20','CS3_DiveLoopL_Sharp','atan2','enemies','captureSound','\x20off\x20screen:','NORMAL','targetPlayerId','sqrt','targetGridX','\x20(Path\x20','Error\x20creating\x20player\x20bullet(s):','back','16jrjrRt','fillStyle','particles','sign','enemy-grid-','Error\x20in\x20triggerImmediateCaptureDive:','scheduledStartTime','pressed','push','csClearSound','\x20(state:\x20','switch_player','\x20attacking,\x20invalid\x20segment\x20','object','main','every','ai_p2','duration','now','dual','4317375pfTIpd','\x20after\x20bad\x20next\x20segment','total','landed','middle','Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20','findIndex','2\x20PLAYER','20px\x20\x27Press\x20Start\x202P\x27','shipObj','2883969fjycii','\x20at\x20[','center','HIGH\x20SCORE','\x20attacking\x20without\x20path!\x20Returning.','grey','naturalWidth','entrance_flight_2','totalRotation','Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20','length','attackGroupId','sort','slice','thresholdsMet','entrancePathId','toString','explosionSound','pathSegmentIndex','clearRect','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','33saLlAw','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','!\x20Returning.','has','unknown','abs','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','gridCol','Invalid\x20start\x20segment\x20for\x20path\x20','Error\x20updating\x20floating\x20scores:','rotation','isPreparingForImmediateCapture','Error\x20creating\x20CO-OP\x20AI\x20bullet\x20for\x20','CS_HorizontalFlyByL','playerNum','returnLogDone','right','butterflyHitSound','\x20for\x20path\x20','stringify','preparing_attack','CO-OP\x20GAME','squadronEnemyIndex','Error\x20during\x20post-landing\x20fire\x20for\x20','\x20in\x20moving_to_grid','captureStartTime','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','attackPathSegmentIndex','save','diving_to_capture_position','Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','num','NORMAL\x20GAME','complete','CS_HorizontalFlyByR','beeHitSound','showing_capture_message','state','Error\x20handling\x20player\x20input:','lastFiredTime','floor','attack-','\x20after\x20bad\x20segment',',\x20Idx\x20','\x20after\x20attack:','Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20',',\x20isCS:\x20','1UP','newButtonStates','409716FcJuXl',').\x20Skipping.','error','creationTime','initialCaptureAnimationY','.\x20Skipping.','isArray','\x20after\x20NaN','blue','capturedShipX','csPerfectSound','Error\x20getting\x20target\x20grid\x20pos\x20for\x20','CS_LoopAttack_TL','hiScoreSound','map','attacking','Error\x20in\x20renderGame:','Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20','targetGridY','following_bezier_path','Error\x20getting\x20grid\x20pos\x20for\x20','\x20not\x20found.','[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20','completed','attackPathT','hasOwnProperty','player1',',\x20index\x20','parse',',\x20isFullGrid:\x20','gameOverSound','targetX','CS_LoopAttack_BL','velocityX','CRITICAL:\x20Entrance\x20flight\x202\x20wave\x20pattern\x20(index\x201)\x20is\x20missing\x20or\x20empty.','alpha','keys','fillRect','splice','entrance_flight_1','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20','Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20','challenging_stage','.\x20Switching\x20to\x20moving_to_grid.','waveUpSound','bossHit1Sound','levelUpSound','health','captureAnimationRotation','includes','[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','preparing_capture','[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','add','stack','Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20','justReturned','show_results','Unknown\x20wave\x20type\x20for\x20level\x20','buttons','shipCapturedSound','\x20invalid!\x20Skipping\x20squadron.','7laqXFX','filter','attackPathSegments','resetAllMessages','\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.','hasFiredPostLanding',',\x20Path\x20','1\x20PLAYER','\x20for\x20SHARED\x20path\x20','Entrance\x20Wave:\x20No\x20squadrons\x20or\x20enemies\x20scheduled\x20for\x20level\x20','\x20(no\x20attack\x20path):','generateWaveDefinition','enemyShootSound','gridRow','resetGame','startSound','Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20','playerShootSound','targetY','resultsMusicSound','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','rotationCompleted','normal','CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','2UP','FATAL\x20Error\x20in\x20moveEntities:','undefined','START\x20GAME','Enemy\x20','.\x20Transitioning.','highScoreHolderId','red','canFireThisDive','getBoundingClientRect','\x20for\x20squadron\x20','bossGalagaDiveSound','in_grid','capturedShipLastFiredTime','\x20has\x20invalid\x20enemy\x20data.','Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','drawImage','218020TVMkur','665668taXBgI','height','getGamepads','forEach','white','386701zUaUbh','restore','\x20(invalid\x20attack\x20segment):','Invalid\x20CS\x20Bezier\x20segment\x20','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20','NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20','CS3_DiveLoopR_Sharp','min','pathId','hasCapturedShip','CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','find','EASY','\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.','substring',')\x20for\x20','NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20','enemy-entr-','Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20','function','CS_LoopAttack_TR','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','.\x20Enemy\x20','bossHit2Sound','attackFormationOffsetX','\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.','capturing','pathT','Invalid\x20next\x20CS\x20Bezier\x20segment\x20','max','Error\x20calculating\x20final\x20bezier\x20point\x20for\x20','attackType','\x20points.\x20Health\x20was:\x20','rapid','left','CRITICAL:\x20Full\x20grid\x20wave\x20pattern\x20(index\x200)\x20is\x20missing\x20or\x20empty.','CRITICAL:\x20normalWaveEntrancePaths\x20not\x20defined\x20or\x20empty.\x20Cannot\x20assign\x20paths\x20to\x20squadrons.','Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20','capturedShipY','player2','type','\x20attacking,\x20index\x20','\x20path\x20index\x20','\x20returning\x20without\x20target\x20coords.\x20Recalculating.','Error\x20updating\x20explosions:','clear'];_0x2e84=function(){return _0x59fdc2;};return _0x2e84();}window[_0x49ddb3(0x1df)]=generateWaveDefinitionInternal;const createBulletSimple=(_0xa4ed8d,_0x1478a3=null)=>{const _0x1820fc=_0x49ddb3;let _0x4a372b=null,_0x58783c=![];if(isTwoPlayerMode&&selectedGameMode==='coop'){const _0x3fccfd=ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured,_0x2eafc4=ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured;if(_0x3fccfd&&_0x2eafc4)_0x4a372b=Math[_0x1820fc(0x24c)]()<0.5?ship1:ship2,_0x58783c=!![];else{if(_0x3fccfd)_0x4a372b=ship1,_0x58783c=!![];else _0x2eafc4&&(_0x4a372b=ship2,_0x58783c=!![]);}}else ship&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn&&(_0x4a372b=ship,_0x58783c=!![]);if(!_0xa4ed8d||!isInGameState||!_0x58783c||!_0x4a372b)return![];const _0x571921=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x1d1739=_0x1478a3?_0x1478a3['x']:_0xa4ed8d['x']+_0xa4ed8d[_0x1820fc(0x268)]/0x2,_0x40c215=_0x1478a3?_0x1478a3['y']:_0xa4ed8d['y']+_0xa4ed8d[_0x1820fc(0x1ff)]/0x2;let _0x14273c=0x0,_0x1953df=_0x571921;const _0x4e22d0=_0x4a372b['x']+_0x4a372b[_0x1820fc(0x268)]/0x2-_0x1d1739,_0x258370=_0x4a372b['y']+_0x4a372b[_0x1820fc(0x1ff)]/0x2-_0x40c215,_0x34a426=Math[_0x1820fc(0x276)](_0x4e22d0*_0x4e22d0+_0x258370*_0x258370);if(_0x34a426>0x0){let _0x4bfd27=0x0;!isChallengingStage&&(_0x4bfd27=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x176d7e=Math[_0x1820fc(0x270)](_0x258370,_0x4e22d0);_0x14273c=Math[_0x1820fc(0x24e)](_0x176d7e)*_0x571921*_0x4bfd27,_0x1953df=Math[_0x1820fc(0x276)](_0x571921**0x2-_0x14273c**0x2),_0x1953df=Math[_0x1820fc(0x221)](_0x571921*(0x1-_0x4bfd27)*0.5,_0x1953df);if(_0x258370<0x0&&_0x1953df>0x0){}if(_0x258370<0x0)_0x1953df=Math[_0x1820fc(0x2b3)](_0x1953df);return enemyBullets[_0x1820fc(0x283)]({'x':_0x1d1739-ENEMY_BULLET_WIDTH/0x2,'y':_0x40c215,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x14273c,'vy':_0x1953df,'type':_0xa4ed8d[_0x1820fc(0x22c)]}),!![];}return![];};function scheduleSingleEntranceSquadron(_0xe56bd0,_0x5b8996,_0x325aba){const _0x15b047=_0x49ddb3;if(isFullGridWave||isChallengingStage)return console[_0x15b047(0x248)](_0x15b047(0x1c8)+level+_0x15b047(0x1b3)+isFullGridWave+_0x15b047(0x2dd)+isChallengingStage+_0x15b047(0x2e1)),_0xe56bd0?.[_0x15b047(0x271)]?.[_0x15b047(0x2a3)]>0x0&&(enemiesSpawnedThisWave+=_0xe56bd0[_0x15b047(0x271)]['length'],squadronCompletionStatus[_0x5b8996]&&(squadronCompletionStatus[_0x5b8996]['completed']=squadronCompletionStatus[_0x5b8996][_0x15b047(0x291)])),![];const _0x22a648=normalWaveEntrancePaths,_0x4d9149=_0xe56bd0['pathId'],_0x3593bc=_0x22a648[_0x4d9149];if(!_0x3593bc||_0x3593bc['length']===0x0)return console[_0x15b047(0x2e2)](_0x15b047(0x26c)+_0x4d9149+_0x15b047(0x1f6)+_0x5b8996+_0x15b047(0x1d3)),_0xe56bd0?.[_0x15b047(0x271)]?.[_0x15b047(0x2a3)]>0x0&&(enemiesSpawnedThisWave+=_0xe56bd0[_0x15b047(0x271)][_0x15b047(0x2a3)],squadronCompletionStatus[_0x5b8996]&&(squadronCompletionStatus[_0x5b8996][_0x15b047(0x1ad)]=squadronCompletionStatus[_0x5b8996][_0x15b047(0x291)])),![];const _0x24d0bc=setTimeout(()=>{const _0x414a27=_0x15b047,_0xf4e110=enemySpawnTimeouts[_0x414a27(0x24d)](_0x24d0bc);if(_0xf4e110>-0x1)enemySpawnTimeouts[_0x414a27(0x1bc)](_0xf4e110,0x1);let _0x4923fd=![];isTwoPlayerMode&&selectedGameMode===_0x414a27(0x233)?_0x4923fd=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x4923fd=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x4923fd||isFullGridWave){_0xe56bd0?.['enemies']?.['length']>0x0&&(enemiesSpawnedThisWave+=_0xe56bd0[_0x414a27(0x271)][_0x414a27(0x2a3)],squadronCompletionStatus[_0x5b8996]&&(squadronCompletionStatus[_0x5b8996][_0x414a27(0x1ad)]=squadronCompletionStatus[_0x5b8996][_0x414a27(0x291)]));return;}try{squadronEntranceFiringStatus[_0x5b8996]?(squadronEntranceFiringStatus[_0x5b8996][_0x414a27(0x281)]=Date['now']()+_0x325aba,squadronEntranceFiringStatus[_0x5b8996]['hasFired']=![]):(console[_0x414a27(0x248)](_0x414a27(0x1ac)+_0x5b8996+_0x414a27(0x1ab)),squadronEntranceFiringStatus[_0x5b8996]={'hasFired':![],'scheduledStartTime':Date['now']()+_0x325aba});const _0x38bd98=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x36c193=_0x38bd98*0x2,_0x266d42=0x1;_0xe56bd0['enemies'][_0x414a27(0x201)]((_0x287675,_0xf19f18)=>{const _0x45343d=_0x414a27;if(!_0x287675||!_0x287675['type']||typeof _0x287675[_0x45343d(0x1e1)]===_0x45343d(0x1ee)||typeof _0x287675[_0x45343d(0x2b5)]===_0x45343d(0x1ee)||!_0x287675[_0x45343d(0x2a8)]){console['error'](_0x45343d(0x219)+_0x5b8996+_0x45343d(0x278)+_0x4d9149+_0x45343d(0x254)+_0xf19f18+_0x45343d(0x2e5)),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x5b8996]&&squadronCompletionStatus[_0x5b8996][_0x45343d(0x1ad)]++;return;}const _0x43a331=_0x22a648[_0x287675['entrancePathId']];(!_0x43a331||_0x43a331['length']===0x0)&&console[_0x45343d(0x248)]('Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22'+_0x287675[_0x45343d(0x2a8)]+'\x22\x20for\x20enemy\x20in\x20squadron\x20'+_0x5b8996+_0x45343d(0x1b1)+_0xf19f18+'\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22'+_0x4d9149+'\x22.');let _0x4f14ae=0x0;const _0x2aa0f1=getWaveType(level),_0x2b33e1=_0x2aa0f1===_0x45343d(0x2a0)&&(_0x5b8996===0x2||_0x5b8996===0x3);if(_0x2b33e1){const _0x575cfb=Math[_0x45343d(0x2d7)](_0xf19f18/0x2);_0xf19f18%0x2===0x0?_0x4f14ae=_0x575cfb*_0x36c193:_0x4f14ae=_0x575cfb*_0x36c193+_0x266d42;}else _0x4f14ae=_0xf19f18*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x489953=setTimeout(()=>{const _0x589d4b=_0x45343d,_0x2c7f39=enemySpawnTimeouts[_0x589d4b(0x24d)](_0x489953);if(_0x2c7f39>-0x1)enemySpawnTimeouts[_0x589d4b(0x1bc)](_0x2c7f39,0x1);let _0x4557ee=![];isTwoPlayerMode&&selectedGameMode===_0x589d4b(0x233)?_0x4557ee=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x4557ee=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x4557ee||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x5b8996]&&squadronCompletionStatus[_0x5b8996]['completed']++;return;}try{let _0x3ca9ab=_0x287675[_0x589d4b(0x22c)],_0x324695=_0x3ca9ab===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x562d15,_0x9513bd;if(_0x3ca9ab===ENEMY1_TYPE)_0x562d15=ENEMY1_WIDTH,_0x9513bd=ENEMY1_HEIGHT;else _0x3ca9ab===ENEMY3_TYPE?(_0x562d15=BOSS_WIDTH,_0x9513bd=BOSS_HEIGHT):(_0x562d15=ENEMY_WIDTH,_0x9513bd=ENEMY_HEIGHT);let _0x2dbabe=0x0,_0x44e1b6=0x0;if(_0x3593bc&&_0x3593bc[0x0]?.['p0'])_0x2dbabe=_0x3593bc[0x0]['p0']['x'],_0x44e1b6=_0x3593bc[0x0]['p0']['y'];else throw new Error(_0x589d4b(0x26e)+_0x4d9149);let _0x22f5a2,_0x98613f;try{const {x:_0x2f2273,y:_0x1ac92e}=getCurrentGridSlotPosition(_0x287675[_0x589d4b(0x1e1)],_0x287675[_0x589d4b(0x2b5)],_0x562d15);_0x22f5a2=_0x2f2273,_0x98613f=_0x1ac92e;}catch(_0x59362d){console[_0x589d4b(0x2e2)](_0x589d4b(0x251)+_0x287675['type']+'\x20at\x20['+_0x287675['gridRow']+','+_0x287675[_0x589d4b(0x2b5)]+']',_0x59362d),_0x22f5a2=gameCanvas?.['width']/0x2||0xc8,_0x98613f=ENEMY_TOP_MARGIN+_0x287675[_0x589d4b(0x1e1)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x4dc621=0x0;const _0x311116=_0x2b33e1,_0x387d34=_0x311116&&_0xf19f18%0x2!==0x0;_0x387d34?_0x4dc621=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x4dc621=-_0xf19f18*PATH_T_OFFSET_PER_ENEMY;const _0x1b02f3={'x':_0x2dbabe,'y':_0x44e1b6,'width':_0x562d15,'height':_0x9513bd,'targetGridX':_0x22f5a2,'targetGridY':_0x98613f,'speed':0x0,'state':_0x589d4b(0x238),'gridRow':_0x287675[_0x589d4b(0x1e1)],'gridCol':_0x287675[_0x589d4b(0x2b5)],'type':_0x3ca9ab,'health':_0x324695,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x4d9149,'pathSegmentIndex':0x0,'pathT':_0x4dc621,'squadronId':_0x5b8996,'squadronEnemyIndex':_0xf19f18,'id':_0x589d4b(0x215)+_0x5b8996+'-'+_0xf19f18+'-'+Date[_0x589d4b(0x28d)]()+'-'+Math[_0x589d4b(0x24c)]()[_0x589d4b(0x2a9)](0x24)[_0x589d4b(0x212)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x589d4b(0x1ea),'hasCapturedShip':_0x3ca9ab===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x3ca9ab===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies['push'](_0x1b02f3),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x5b8996]&&squadronCompletionStatus[_0x5b8996][_0x589d4b(0x1ad)]++;if(_0xf19f18===0x0){let _0x58134c=0x5dc;(_0x5b8996===0x0||_0x5b8996===0x1)&&(_0x58134c=0xfa);const _0x3c6611=_0x1b02f3['id'],_0xd4271b=setTimeout(()=>{const _0x39273b=_0x589d4b,_0x3a44b2=enemySpawnTimeouts['indexOf'](_0xd4271b);if(_0x3a44b2>-0x1)enemySpawnTimeouts['splice'](_0x3a44b2,0x1);let _0x59562e=![];isTwoPlayerMode&&selectedGameMode===_0x39273b(0x233)?_0x59562e=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x59562e=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x59562e||isChallengingStage||isWaveTransitioning||isFullGridWave)return;fireFixedEnemyBurst(_0x3c6611,null,0x0,0x3);},_0x58134c);enemySpawnTimeouts[_0x589d4b(0x283)](_0xd4271b);}}catch(_0x23eb19){console[_0x589d4b(0x2e2)](_0x589d4b(0x1fb)+_0x5b8996+_0x589d4b(0x2da)+_0xf19f18+_0x589d4b(0x1da)+_0x4d9149+'):',_0x23eb19),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x5b8996]&&squadronCompletionStatus[_0x5b8996][_0x589d4b(0x1ad)]++;}},_0x4f14ae);enemySpawnTimeouts[_0x45343d(0x283)](_0x489953);});}catch(_0x54a53b){console[_0x414a27(0x2e2)](_0x414a27(0x229)+_0x5b8996+_0x414a27(0x278)+_0x4d9149+'):',_0x54a53b),_0xe56bd0?.[_0x414a27(0x271)]?.[_0x414a27(0x2a3)]>0x0&&(enemiesSpawnedThisWave+=_0xe56bd0[_0x414a27(0x271)]['length'],squadronCompletionStatus[_0x5b8996]&&(squadronCompletionStatus[_0x5b8996][_0x414a27(0x1ad)]=squadronCompletionStatus[_0x5b8996][_0x414a27(0x291)]));}},_0x325aba);return enemySpawnTimeouts['push'](_0x24d0bc),!![];}function _0x3195(_0x2dc92f,_0x208535){const _0x2e84b2=_0x2e84();return _0x3195=function(_0x31951f,_0x299db9){_0x31951f=_0x31951f-0x1a1;let _0x4f1250=_0x2e84b2[_0x31951f];return _0x4f1250;},_0x3195(_0x2dc92f,_0x208535);};function scheduleEntranceFlightWave(){const _0x14c88b=_0x49ddb3;if(isFullGridWave||isChallengingStage||!currentWaveDefinition||currentWaveDefinition[_0x14c88b(0x2a3)]===0x0){console[_0x14c88b(0x248)](_0x14c88b(0x23f)+level+_0x14c88b(0x1b3)+isFullGridWave+',\x20isCS:\x20'+isChallengingStage+_0x14c88b(0x245)+currentWaveDefinition?.['length']),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts[_0x14c88b(0x201)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x53eef2=0x0,_0xe54935=0x0;currentWaveDefinition[_0x14c88b(0x201)]((_0x764764,_0x4ac50b)=>{const _0x4c5eef=_0x14c88b;_0x764764&&_0x764764[_0x4c5eef(0x271)]&&Array['isArray'](_0x764764[_0x4c5eef(0x271)])&&_0x764764[_0x4c5eef(0x271)]['length']>0x0?(totalEnemiesScheduledForWave+=_0x764764[_0x4c5eef(0x271)][_0x4c5eef(0x2a3)],squadronCompletionStatus[_0x4ac50b]={'completed':0x0,'total':_0x764764['enemies'][_0x4c5eef(0x2a3)],'hasFiredPostLanding':![]},squadronEntranceFiringStatus[_0x4ac50b]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x764764,_0x4ac50b,_0x53eef2)&&_0xe54935++,_0x53eef2+=NORMAL_WAVE_SQUADRON_INTERVAL):console['warn']('Entrance\x20Wave:\x20Squadron\x20'+_0x4ac50b+'\x20is\x20empty\x20or\x20invalid.');}),_0xe54935===0x0&&totalEnemiesScheduledForWave===0x0?(console['warn'](_0x14c88b(0x1dd)+level+_0x14c88b(0x1f1)),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![]):isEntrancePhaseActive=!![];}function startChallengingStageSequence(){const _0x4b45a5=_0x49ddb3;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts[_0x4b45a5(0x201)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object[_0x4b45a5(0x1ba)](challengingStagePaths)['length']===0x0&&defineChallengingStagePaths();if(Object[_0x4b45a5(0x1ba)](challengingStagePaths)[_0x4b45a5(0x2a3)]===0x0){console[_0x4b45a5(0x2e2)](_0x4b45a5(0x2cd)),isWaveTransitioning=!![],setTimeout(()=>{const _0x248ebf=_0x4b45a5;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x248ebf(0x233)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave==='function'&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x1887aa=[_0x4b45a5(0x26f),_0x4b45a5(0x209),_0x4b45a5(0x2bb),_0x4b45a5(0x2d1)],_0x5587ab=[_0x4b45a5(0x1a2),_0x4b45a5(0x218),_0x4b45a5(0x1b6),'CS_LoopAttack_BR'],_0x87edc=[..._0x1887aa,..._0x5587ab];for(const _0x2250e0 of _0x87edc){if(!challengingStagePaths[_0x4b45a5(0x1af)](_0x2250e0)){console[_0x4b45a5(0x2e2)]('CRITICAL:\x20Required\x20CS\x20path\x20\x22'+_0x2250e0+_0x4b45a5(0x252)),isWaveTransitioning=!![],setTimeout(()=>{const _0x5a229f=_0x4b45a5;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x5a229f(0x233)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x5a229f(0x217)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x187120=[..._0x1887aa],_0x1ba237=[..._0x5587ab]['sort'](()=>Math[_0x4b45a5(0x24c)]()-0.5);_0x187120[_0x4b45a5(0x283)](..._0x1ba237),currentWaveDefinition=[];for(let _0x3ec8d9=0x0;_0x3ec8d9<CHALLENGING_STAGE_SQUADRON_COUNT;_0x3ec8d9++){const _0x1d64da=_0x187120[_0x3ec8d9],_0x2485f3={'pathId':_0x1d64da,'enemies':[]};for(let _0x42bcd2=0x0;_0x42bcd2<CHALLENGING_STAGE_SQUADRON_SIZE;_0x42bcd2++){let _0x1f3264=_0x42bcd2<Math[_0x4b45a5(0x2d7)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x2485f3['enemies'][_0x4b45a5(0x283)]({'type':_0x1f3264,'entrancePathId':_0x1d64da});}currentWaveDefinition[_0x4b45a5(0x283)](_0x2485f3);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0x4b45a5(0x2a3)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x303b6d=0x0;const _0x4b3cbc=-0x1c,_0x2e0783=Math['floor'](Math[_0x4b45a5(0x221)](0x0,level-0x3)/0x4)+0x1,_0xf2da6=scaleValue(_0x2e0783,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition[_0x4b45a5(0x201)]((_0x85d434,_0x3c05a5)=>{const _0x52e929=_0x4b45a5;let _0x46194f=0x0;if(_0x3c05a5<=0x1)_0x46194f=0x0;else _0x3c05a5<=0x3?_0x46194f=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x46194f=(_0x3c05a5-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x2c9015=_0xf2da6;(_0x3c05a5===0x2||_0x3c05a5===0x3)&&(_0x2c9015*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x220734=setTimeout(()=>{const _0x2a15a2=_0x3195,_0x3df0f8=enemySpawnTimeouts[_0x2a15a2(0x24d)](_0x220734);if(_0x3df0f8>-0x1)enemySpawnTimeouts[_0x2a15a2(0x1bc)](_0x3df0f8,0x1);let _0x3f413a=![];isTwoPlayerMode&&selectedGameMode===_0x2a15a2(0x233)?_0x3f413a=player1Lives>0x0||player2Lives>0x0:_0x3f413a=playerLives>0x0;if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&_0x3f413a)try{const _0x4b1c6b=_0x85d434[_0x2a15a2(0x20b)],_0x9c971b=challengingStagePaths,_0x5e39a1=_0x9c971b[_0x4b1c6b];if(!_0x5e39a1||_0x5e39a1[_0x2a15a2(0x2a3)]===0x0){console[_0x2a15a2(0x2e2)]('CS:\x20Path\x20'+_0x4b1c6b+_0x2a15a2(0x1f6)+_0x3c05a5+_0x2a15a2(0x256)),enemiesSpawnedThisWave+=_0x85d434['enemies'][_0x2a15a2(0x2a3)];return;}let _0x53c889=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x3c05a5>=0x2&&_0x3c05a5<=0x3)_0x53c889=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x3c05a5>=0x4&&(_0x53c889=CS_LOOP_ATTACK_SPAWN_DELAY);_0x85d434[_0x2a15a2(0x271)][_0x2a15a2(0x201)]((_0x1e453c,_0x2366f8)=>{const _0x1ade57=_0x2a15a2;if(!_0x1e453c||!_0x1e453c[_0x1ade57(0x22c)]){console[_0x1ade57(0x2e2)](_0x1ade57(0x263)+_0x3c05a5+_0x1ade57(0x1b1)+_0x2366f8+_0x1ade57(0x2e5)),enemiesSpawnedThisWave++;return;}const _0x2065eb=_0x2366f8*_0x53c889,_0x387c83=setTimeout(()=>{const _0x35b3d4=_0x1ade57,_0x5389c7=enemySpawnTimeouts['indexOf'](_0x387c83);if(_0x5389c7>-0x1)enemySpawnTimeouts[_0x35b3d4(0x1bc)](_0x5389c7,0x1);let _0x29acf3=![];isTwoPlayerMode&&selectedGameMode===_0x35b3d4(0x233)?_0x29acf3=player1Lives>0x0||player2Lives>0x0:_0x29acf3=playerLives>0x0;if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||!_0x29acf3){enemiesSpawnedThisWave++;return;}try{let _0x1e4243=_0x1e453c['type'],_0x3dcde5=_0x1e4243===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x16c957,_0x25cb62;if(_0x1e4243===ENEMY1_TYPE)_0x16c957=ENEMY1_WIDTH,_0x25cb62=ENEMY1_HEIGHT;else _0x1e4243===ENEMY3_TYPE?(_0x16c957=BOSS_WIDTH,_0x25cb62=BOSS_HEIGHT):(_0x16c957=ENEMY_WIDTH,_0x25cb62=ENEMY_HEIGHT);let _0x369439=0x0,_0x404fc8=0x0;if(_0x5e39a1[0x0]?.['p0'])_0x369439=_0x5e39a1[0x0]['p0']['x'],_0x404fc8=_0x5e39a1[0x0]['p0']['y'];else throw new Error(_0x35b3d4(0x2b6)+_0x4b1c6b);(_0x3c05a5===0x0||_0x3c05a5===0x1)&&(_0x369439+=_0x4b3cbc);const _0xc6d482=-_0x2366f8*PATH_T_OFFSET_PER_ENEMY,_0x5764e3={'x':_0x369439,'y':_0x404fc8,'width':_0x16c957,'height':_0x25cb62,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x35b3d4(0x1a9),'gridRow':-0x1,'gridCol':-0x1,'type':_0x1e4243,'health':_0x3dcde5,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x4b1c6b,'pathSegmentIndex':0x0,'pathT':_0xc6d482,'squadronId':_0x3c05a5,'id':_0x35b3d4(0x267)+_0x3c05a5+'-'+_0x2366f8+'-'+Date[_0x35b3d4(0x28d)]()+'-'+Math[_0x35b3d4(0x24c)]()[_0x35b3d4(0x2a9)](0x24)[_0x35b3d4(0x212)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x35b3d4(0x1ea),'hasCapturedShip':_0x1e4243===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x1e4243===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x2c9015};enemies[_0x35b3d4(0x283)](_0x5764e3),enemiesSpawnedThisWave++;}catch(_0x4bd850){console[_0x35b3d4(0x2e2)](_0x35b3d4(0x1eb)+_0x3c05a5+_0x35b3d4(0x2da)+_0x2366f8+_0x35b3d4(0x1da)+_0x4b1c6b+'):',_0x4bd850),enemiesSpawnedThisWave++;}},_0x2065eb);enemySpawnTimeouts[_0x1ade57(0x283)](_0x387c83),_0x303b6d++;});}catch(_0x1e525b){console['error']('CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20'+_0x3c05a5+':',_0x1e525b),enemiesSpawnedThisWave+=_0x85d434[_0x2a15a2(0x271)][_0x2a15a2(0x2a3)];}else _0x85d434?.[_0x2a15a2(0x271)]?.[_0x2a15a2(0x2a3)]>0x0&&(enemiesSpawnedThisWave+=_0x85d434[_0x2a15a2(0x271)][_0x2a15a2(0x2a3)]);},_0x46194f);enemySpawnTimeouts[_0x52e929(0x283)](_0x220734);});}else console[_0x4b45a5(0x248)](_0x4b45a5(0x20d)),isWaveTransitioning=!![],setTimeout(()=>{const _0x178509=_0x4b45a5;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x178509(0x233)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x178509(0x217)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x25e475,_0x1361a1,_0x2dd970){const _0x2e320c=_0x49ddb3;let _0x384a16=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x384a16=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x384a16=playerLives>0x0&&!isShipCaptured;if(!_0x25e475||isPaused||!isInGameState||!_0x384a16||isChallengingStage||isWaveTransitioning)return;const _0x1a1757=Math[_0x2e320c(0x249)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x3fbf44=0x0;_0x3fbf44<_0x1a1757;_0x3fbf44++){const _0x422dad=_0x2dd970+_0x3fbf44*ENTRANCE_FIRE_BURST_DELAY_MS,_0xb53fd6=setTimeout(()=>{const _0x12818d=_0x2e320c;try{const _0x1d7832=enemySpawnTimeouts[_0x12818d(0x24d)](_0xb53fd6);_0x1d7832>-0x1&&enemySpawnTimeouts[_0x12818d(0x1bc)](_0x1d7832,0x1);let _0x5a90a1=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x5a90a1=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x5a90a1=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x5a90a1||isChallengingStage||isWaveTransitioning)return;const _0x240999=enemies['find'](_0x1f1239=>_0x1f1239&&_0x1f1239['id']===_0x25e475);_0x240999&&_0x240999['state']===_0x1361a1&&(createBulletSimple(_0x240999)&&(_0x3fbf44===0x0&&playSound(_0x12818d(0x1e0),![],0.4),_0x240999[_0x12818d(0x2d6)]=Date[_0x12818d(0x28d)]()));}catch(_0x35736b){console[_0x12818d(0x2e2)](_0x12818d(0x1cd)+(_0x3fbf44+0x1)+'/'+_0x1a1757+_0x12818d(0x213)+_0x25e475+':',_0x35736b);}},_0x422dad);enemySpawnTimeouts[_0x2e320c(0x283)](_0xb53fd6);}}function fireFixedEnemyBurst(_0xb733a2,_0x12d418,_0x59054f,_0x1143ee){const _0x184ca2=_0x49ddb3;let _0x5a410b=![];isTwoPlayerMode&&selectedGameMode===_0x184ca2(0x233)?_0x5a410b=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x5a410b=playerLives>0x0&&!isShipCaptured;if(!_0xb733a2||isPaused||!isInGameState||!_0x5a410b||isChallengingStage||isWaveTransitioning||_0x1143ee<=0x0)return;for(let _0x14e8a4=0x0;_0x14e8a4<_0x1143ee;_0x14e8a4++){const _0x59ef0a=_0x59054f+_0x14e8a4*ENTRANCE_FIRE_BURST_DELAY_MS,_0x57ae56=setTimeout(()=>{const _0x1b88d3=_0x184ca2;try{const _0x5bab95=enemySpawnTimeouts['indexOf'](_0x57ae56);_0x5bab95>-0x1&&enemySpawnTimeouts[_0x1b88d3(0x1bc)](_0x5bab95,0x1);let _0x3afd26=![];isTwoPlayerMode&&selectedGameMode===_0x1b88d3(0x233)?_0x3afd26=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x3afd26=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x3afd26||isChallengingStage||isWaveTransitioning)return;const _0x159dac=enemies[_0x1b88d3(0x20f)](_0x2b1791=>_0x2b1791&&_0x2b1791['id']===_0xb733a2);if(_0x159dac)createBulletSimple(_0x159dac)&&(_0x14e8a4===0x0&&playSound(_0x1b88d3(0x1e0),![],0.4),_0x159dac[_0x1b88d3(0x2d6)]=Date['now']());else{}}catch(_0x5cdf89){console[_0x1b88d3(0x2e2)](_0x1b88d3(0x294)+(_0x14e8a4+0x1)+'/'+_0x1143ee+_0x1b88d3(0x213)+_0xb733a2+':',_0x5cdf89);}},_0x59ef0a);enemySpawnTimeouts[_0x184ca2(0x283)](_0x57ae56);}}function startFullGridWave(){const _0x143b01=_0x49ddb3;if(!currentWaveDefinition||currentWaveDefinition[_0x143b01(0x2a3)]===0x0||!isFullGridWave){console['error']('Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.'),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(_0x143b01(0x23b),![],0.4),enemySpawnTimeouts[_0x143b01(0x201)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x31d3c2=0x0;currentWaveDefinition[_0x143b01(0x201)]((_0x50137d,_0x5172a9)=>{const _0x3b7731=_0x143b01;let _0x37bdee=0x0;_0x50137d&&_0x50137d[_0x3b7731(0x271)]&&Array[_0x3b7731(0x2e6)](_0x50137d[_0x3b7731(0x271)])?(_0x37bdee=_0x50137d['enemies'][_0x3b7731(0x2a3)],_0x50137d['enemies'][_0x3b7731(0x201)]((_0x41c7be,_0x1b6552)=>{const _0x36db09=_0x3b7731;try{if(!_0x41c7be||!_0x41c7be[_0x36db09(0x22c)]||typeof _0x41c7be[_0x36db09(0x1e1)]===_0x36db09(0x1ee)||typeof _0x41c7be[_0x36db09(0x2b5)]===_0x36db09(0x1ee)){console[_0x36db09(0x2e2)](_0x36db09(0x2b4)+_0x5172a9+_0x36db09(0x1b1)+_0x1b6552+_0x36db09(0x2e5));return;}let _0x46d688=_0x41c7be[_0x36db09(0x22c)],_0x233ffc=_0x46d688===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x591693,_0x298f46;if(_0x46d688===ENEMY1_TYPE)_0x591693=ENEMY1_WIDTH,_0x298f46=ENEMY1_HEIGHT;else _0x46d688===ENEMY3_TYPE?(_0x591693=BOSS_WIDTH,_0x298f46=BOSS_HEIGHT):(_0x591693=ENEMY_WIDTH,_0x298f46=ENEMY_HEIGHT);let _0x1d0ffe,_0x3e638d;try{const {x:_0x297c87,y:_0x15d4f2}=getCurrentGridSlotPosition(_0x41c7be['gridRow'],_0x41c7be['gridCol'],_0x591693);_0x1d0ffe=_0x297c87,_0x3e638d=_0x15d4f2;}catch(_0x275f08){console[_0x36db09(0x2e2)](_0x36db09(0x216)+_0x41c7be['type']+_0x36db09(0x29a)+_0x41c7be['gridRow']+','+_0x41c7be['gridCol']+']',_0x275f08),_0x1d0ffe=gameCanvas?.[_0x36db09(0x268)]/0x2||0xc8,_0x3e638d=ENEMY_TOP_MARGIN+_0x41c7be['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x76a14b={'x':_0x1d0ffe,'y':_0x3e638d,'width':_0x591693,'height':_0x298f46,'targetGridX':_0x1d0ffe,'targetGridY':_0x3e638d,'speed':0x0,'state':_0x36db09(0x1f8),'gridRow':_0x41c7be[_0x36db09(0x1e1)],'gridCol':_0x41c7be[_0x36db09(0x2b5)],'type':_0x46d688,'health':_0x233ffc,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x5172a9,'squadronEnemyIndex':_0x1b6552,'id':_0x36db09(0x27f)+_0x5172a9+'-'+_0x1b6552+'-'+Date['now']()+'-'+Math[_0x36db09(0x24c)]()[_0x36db09(0x2a9)](0x24)[_0x36db09(0x212)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x46d688===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x46d688===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x36db09(0x283)](_0x76a14b),_0x31d3c2++;}catch(_0x5e0116){console['error'](_0x36db09(0x1e8)+_0x5172a9+',\x20Idx\x20'+_0x1b6552+'):',_0x5e0116);}})):console[_0x3b7731(0x248)]('Full\x20Grid:\x20Squadron\x20'+_0x5172a9+_0x3b7731(0x1fa)),squadronCompletionStatus[_0x5172a9]={'completed':_0x37bdee,'total':_0x37bdee};}),totalEnemiesScheduledForWave=_0x31d3c2,enemiesSpawnedThisWave=_0x31d3c2,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0x143b01(0x25f),!![],0.1)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date[_0x143b01(0x28d)](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date[_0x143b01(0x28d)](),firstEnemyLanded=!![];}function renderGame(){const _0xc13680=_0x49ddb3;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0xc13680(0x2ac)](0x0,0x0,gameCanvas[_0xc13680(0x268)],gameCanvas[_0xc13680(0x1ff)]);const _0x559acb=Date[_0xc13680(0x28d)]();gameCtx['save']();const _0x2812b7=_0xc13680(0x297),_0x3ec902=_0xc13680(0x1f3),_0x50932e=_0xc13680(0x202);let _0x3b01a0,_0xbd9ef0,_0x2ea7fc,_0x127971,_0x3c0e60=![],_0x9c892d=![],_0x55ed76=![];if(isShowingResultsScreen){}else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage){}else{if(isShowingPlayerGameOverMessage){}else{if(!isInGameState){}else{_0x2ea7fc=highScore||0x0;if(!isManualControl){}else{if(isTwoPlayerMode&&selectedGameMode===_0xc13680(0x233)){_0x3b01a0=player1Score,_0xbd9ef0=player2Score,_0x2ea7fc=Math[_0xc13680(0x221)](highScore,player1Score,player2Score),_0x127971=_0xc13680(0x2de),_0x3c0e60=!isShowingIntro&&!isPaused&&player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x9c892d=!isShowingIntro&&!isPaused&&player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if(player1Score>=_0x2ea7fc&&player1Score>0x0)_0x55ed76=_0x3c0e60;if(player2Score>=_0x2ea7fc&&player2Score>0x0&&player2Score>player1Score)_0x55ed76=_0x9c892d;}else isTwoPlayerMode&&selectedGameMode===_0xc13680(0x1ea)?(_0x3b01a0=currentPlayer===0x1?score:player1Score,_0xbd9ef0=currentPlayer===0x2?score:player2Score,_0x2ea7fc=Math[_0xc13680(0x221)](highScore,player1Score,player2Score,score),_0x127971=_0xc13680(0x2de),_0x3c0e60=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x9c892d=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x55ed76=!isPaused&&!isShowingIntro&&score>0x0&&_0x2ea7fc>0x0&&score>=_0x2ea7fc):(_0x3b01a0=score,_0xbd9ef0=0x0,_0x127971=_0xc13680(0x2de));}}}}}let _0x375093=![];if(_0x55ed76){}typeof MARGIN_SIDE!==_0xc13680(0x1ee)&&typeof MARGIN_TOP!==_0xc13680(0x1ee)&&typeof SCORE_OFFSET_Y!==_0xc13680(0x1ee)&&(drawTopUiElement(_0x127971,_0x3b01a0,_0xc13680(0x226),MARGIN_SIDE,_0x3c0e60),drawTopUiElement(_0xc13680(0x29c),_0x2ea7fc,'center',gameCanvas[_0xc13680(0x268)]/0x2,_0x375093),drawTopUiElement(_0xc13680(0x1ec),_0xbd9ef0,_0xc13680(0x2be),gameCanvas[_0xc13680(0x268)]-MARGIN_SIDE,_0x9c892d));if(typeof shipImage!==_0xc13680(0x1ee)&&typeof LIFE_ICON_MARGIN_BOTTOM!=='undefined'&&typeof LIFE_ICON_SIZE!==_0xc13680(0x1ee)&&typeof LIFE_ICON_MARGIN_LEFT!==_0xc13680(0x1ee)&&typeof LIFE_ICON_SPACING!==_0xc13680(0x1ee)){if(shipImage[_0xc13680(0x2d0)]&&shipImage['naturalHeight']!==0x0){const _0x549f51=gameCanvas[_0xc13680(0x1ff)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x45576f=0x0,_0x5c1472=0x0;if(isTwoPlayerMode&&selectedGameMode===_0xc13680(0x233)){if(player1Lives>0x0)_0x45576f=Math['max'](0x0,player1Lives-0x1);if(player2Lives>0x0)_0x5c1472=Math[_0xc13680(0x221)](0x0,player2Lives-0x1);}else{if(playerLives>0x0)_0x45576f=Math[_0xc13680(0x221)](0x0,playerLives-0x1);}const _0x109bff=0x5;for(let _0x4f677c=0x0;_0x4f677c<Math['min'](_0x45576f,_0x109bff);_0x4f677c++){const _0x7a75fc=LIFE_ICON_MARGIN_LEFT+_0x4f677c*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0xc13680(0x1fc)](shipImage,Math['round'](_0x7a75fc),Math[_0xc13680(0x249)](_0x549f51),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}if(isTwoPlayerMode&&selectedGameMode==='coop'){const _0x35941d=gameCanvas[_0xc13680(0x268)]-LIFE_ICON_MARGIN_RIGHT-Math[_0xc13680(0x20a)](_0x5c1472,_0x109bff)*(LIFE_ICON_SIZE+LIFE_ICON_SPACING)+LIFE_ICON_SPACING;for(let _0x231352=0x0;_0x231352<Math['min'](_0x5c1472,_0x109bff);_0x231352++){const _0x149ab5=_0x35941d+_0x231352*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0xc13680(0x1fc)](shipImage,Math[_0xc13680(0x249)](_0x149ab5),Math[_0xc13680(0x249)](_0x549f51),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}}gameCtx['restore'](),gameCtx[_0xc13680(0x2ca)]();if(isTwoPlayerMode&&selectedGameMode===_0xc13680(0x233)){if(ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured){let _0x18ea5e=!![];if(isPlayer1Invincible){const _0x1f50b2=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x559acb%_0x1f50b2>=INVINCIBILITY_BLINK_ON_MS)_0x18ea5e=![];}if(_0x18ea5e){const _0x10451c=ship1['x'],_0x140be2=ship1['y'];typeof shipImage!==_0xc13680(0x1ee)&&shipImage['complete']?(gameCtx[_0xc13680(0x1fc)](shipImage,Math[_0xc13680(0x249)](_0x10451c),Math['round'](_0x140be2),ship1[_0xc13680(0x268)],ship1['height']),player1IsDualShipActive&&gameCtx[_0xc13680(0x1fc)](shipImage,Math[_0xc13680(0x249)](_0x10451c+DUAL_SHIP_OFFSET_X),Math[_0xc13680(0x249)](_0x140be2),ship1[_0xc13680(0x268)],ship1[_0xc13680(0x1ff)])):(gameCtx[_0xc13680(0x27c)]=_0xc13680(0x2e8),gameCtx[_0xc13680(0x1bb)](Math[_0xc13680(0x249)](_0x10451c),Math[_0xc13680(0x249)](_0x140be2),ship1['width'],ship1[_0xc13680(0x1ff)]));}}if(ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured){let _0x1c6fed=!![];if(isPlayer2Invincible){const _0x176b20=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x559acb%_0x176b20>=INVINCIBILITY_BLINK_ON_MS)_0x1c6fed=![];}if(_0x1c6fed){const _0x241749=ship2['x'],_0x37424c=ship2['y'];typeof shipImage!==_0xc13680(0x1ee)&&shipImage['complete']?(gameCtx['drawImage'](shipImage,Math[_0xc13680(0x249)](_0x241749),Math[_0xc13680(0x249)](_0x37424c),ship2[_0xc13680(0x268)],ship2[_0xc13680(0x1ff)]),player2IsDualShipActive&&gameCtx['drawImage'](shipImage,Math[_0xc13680(0x249)](_0x241749+DUAL_SHIP_OFFSET_X),Math[_0xc13680(0x249)](_0x37424c),ship2[_0xc13680(0x268)],ship2[_0xc13680(0x1ff)])):(gameCtx[_0xc13680(0x27c)]=_0xc13680(0x266),gameCtx['fillRect'](Math[_0xc13680(0x249)](_0x241749),Math[_0xc13680(0x249)](_0x37424c),ship2[_0xc13680(0x268)],ship2[_0xc13680(0x1ff)]));}}}else{if(ship&&!isShowingCaptureMessage){let _0x1a20fb=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x449332=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x559acb%_0x449332>=INVINCIBILITY_BLINK_ON_MS)_0x1a20fb=![];}if(_0x1a20fb){let _0x457457=ship['x'],_0x220d6c=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x220d6c&&(_0x457457=Math['round'](gameCanvas[_0xc13680(0x268)]/0x2-ship[_0xc13680(0x268)]/0x2));const _0x15d6da=ship['y'];typeof shipImage!==_0xc13680(0x1ee)&&shipImage[_0xc13680(0x2d0)]?(gameCtx[_0xc13680(0x1fc)](shipImage,Math[_0xc13680(0x249)](_0x457457),Math['round'](_0x15d6da),ship[_0xc13680(0x268)],ship[_0xc13680(0x1ff)]),isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&gameCtx[_0xc13680(0x1fc)](shipImage,Math[_0xc13680(0x249)](_0x457457+DUAL_SHIP_OFFSET_X),Math[_0xc13680(0x249)](_0x15d6da),ship['width'],ship[_0xc13680(0x1ff)])):(gameCtx[_0xc13680(0x27c)]=_0xc13680(0x2e8),gameCtx[_0xc13680(0x1bb)](Math[_0xc13680(0x249)](_0x457457),Math['round'](_0x15d6da),ship[_0xc13680(0x268)],ship[_0xc13680(0x1ff)]));}}}if(fallingShips[_0xc13680(0x2a3)]>0x0&&typeof shipImage!==_0xc13680(0x1ee)&&shipImage[_0xc13680(0x2d0)]){}gameCtx[_0xc13680(0x204)]();if(!isInGameState){if(isShowingScoreScreen){}else{gameCtx['save']();const _0x2606c4=gameCanvas[_0xc13680(0x268)],_0x16b41e=gameCanvas[_0xc13680(0x1ff)],_0x402a1f=_0x2606c4/0x2;selectedButtonIndex===-0x1&&(isPlayerSelectMode||isFiringModeSelectMode||isGameModeSelectMode||!isPlayerSelectMode&&!isFiringModeSelectMode&&!isGameModeSelectMode)&&(selectedButtonIndex=0x0);let _0xbed2f3=MENU_LOGO_APPROX_HEIGHT,_0x2fcba4=_0xbed2f3*(logoImage[_0xc13680(0x29f)]/logoImage[_0xc13680(0x235)]||0x1);typeof logoImage!=='undefined'&&logoImage[_0xc13680(0x2d0)]&&logoImage[_0xc13680(0x235)]!==0x0&&(_0xbed2f3=logoImage['naturalHeight']*LOGO_SCALE_FACTOR,_0x2fcba4=logoImage[_0xc13680(0x29f)]*LOGO_SCALE_FACTOR);const _0x563d4a=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x321bd2=_0xbed2f3+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x563d4a;let _0x1b198a=(_0x16b41e-_0x321bd2)/0x2-0x46;_0x1b198a+=MENU_GENERAL_Y_OFFSET;const _0x1406b6=_0x402a1f-_0x2fcba4/0x2,_0x368d68=_0x1b198a+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!=='undefined'&&logoImage[_0xc13680(0x2d0)]&&logoImage[_0xc13680(0x235)]!==0x0?gameCtx[_0xc13680(0x1fc)](logoImage,Math[_0xc13680(0x249)](_0x1406b6),Math[_0xc13680(0x249)](_0x368d68),_0x2fcba4,_0xbed2f3):drawCanvasText('LOGO',_0x402a1f,_0x368d68+_0xbed2f3/0x2,'30px\x20Arial',_0xc13680(0x29e));if(isGameModeSelectMode)drawCanvasButton(_0xc13680(0x2cf),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0xc13680(0x2c3),0x1,selectedButtonIndex===0x1);else{if(isFiringModeSelectMode)drawCanvasButton(_0xc13680(0x210),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0xc13680(0x274),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0xc13680(0x1db),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0xc13680(0x296),0x1,selectedButtonIndex===0x1)):(drawCanvasButton(_0xc13680(0x1ef),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0xc13680(0x250),0x1,selectedButtonIndex===0x1));}const _0x3b2570=getMenuButtonRect(0x1);let _0x1f348a;_0x3b2570?_0x1f348a=_0x3b2570['y']+_0x3b2570[_0xc13680(0x1ff)]+MENU_BUTTON_SUBTITLE_V_GAP+_0x563d4a/0x2:_0x1f348a=_0x1b198a+_0xbed2f3+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x563d4a/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x402a1f-0x1,Math[_0xc13680(0x249)](_0x1f348a),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0xc13680(0x29b),_0xc13680(0x293),!![]),gameCtx['restore']();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0xc13680(0x2ca)]();let _0x388c2a=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x388c2a&&(bullets['forEach'](_0x5b8eb9=>{}),enemyBullets[_0xc13680(0x201)](_0x11261f=>{}));enemies[_0xc13680(0x201)](_0x13eb5b=>{});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x1ce7f0=![];const _0x51eb5b=gameCanvas[_0xc13680(0x1ff)]/0x2;if(isPaused){}else{if(isShowingCaptureMessage){}}gameCtx[_0xc13680(0x204)]();}else{if(isShowingPlayerGameOverMessage){}else{if(gameOverSequenceStartTime>0x0){}}}}}catch(_0x3f60d3){console[_0xc13680(0x2e2)](_0xc13680(0x1a6),_0x3f60d3,_0x3f60d3['stack']);}}function handleEnemyHit(_0x30a8c0,_0x46209f=null){const _0x35e044=_0x49ddb3;if(!_0x30a8c0)return{'destroyed':![],'pointsAwarded':0x0};const _0x3e26df=Date['now']();let _0xcdba6f=0x0,_0xbe1654=![],_0x273cdc=_0x30a8c0[_0x35e044(0x259)],_0x58d04e=null,_0x5b7cab=0x1;const _0x456ea5=_0x30a8c0[_0x35e044(0x22c)]===ENEMY3_TYPE?BOSS_WIDTH:_0x30a8c0[_0x35e044(0x22c)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x259f47=_0x30a8c0[_0x35e044(0x22c)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x30a8c0['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x218da2=_0x30a8c0[_0x35e044(0x22c)]===ENEMY3_TYPE&&_0x30a8c0[_0x35e044(0x20c)],_0x220b07=_0x30a8c0[_0x35e044(0x22c)]===ENEMY3_TYPE&&_0x30a8c0['capturedShipDimensions'];let _0x35f0b6=![],_0x5156f9=null;if(_0x218da2){if(isTwoPlayerMode&&selectedGameMode===_0x35e044(0x233)){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x30a8c0['id'])_0x35f0b6=!![],_0x5156f9='player1';else isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x30a8c0['id']&&(_0x35f0b6=!![],_0x5156f9='player2');}else!isTwoPlayerMode&&isShipCaptured&&capturedBossIdWithMessage===_0x30a8c0['id']&&(_0x35f0b6=!![]);}const _0x4ff681=_0x30a8c0['x']+_0x456ea5/0x2,_0x13f382=_0x30a8c0['y']+_0x259f47*0.2;createHitSparks(_0x4ff681,_0x13f382),_0x30a8c0['health']--;_0x30a8c0[_0x35e044(0x22c)]===ENEMY3_TYPE&&(_0x30a8c0[_0x35e044(0x259)]=_0x30a8c0[_0x35e044(0x1c5)]<ENEMY3_MAX_HITS);if(_0x30a8c0[_0x35e044(0x1c5)]<=0x0){_0xbe1654=!![];isChallengingStage&&challengingStageEnemiesHit++;if(_0x218da2&&_0x220b07){let _0x3a60a9=null;if(_0x35f0b6&&_0x5156f9)_0x3a60a9=_0x5156f9;else{let _0x5ec954=![];if(isCoopAIDemoActive){if(_0x46209f===_0x35e044(0x1b0)&&player1IsDualShipActive)_0x3a60a9=_0x35e044(0x22b),_0x5ec954=!![];else _0x46209f===_0x35e044(0x22b)&&player2IsDualShipActive&&(_0x3a60a9=_0x35e044(0x1b0),_0x5ec954=!![]);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x35e044(0x232)){if(_0x46209f===_0x35e044(0x28b)&&player2IsDualShipActive)_0x3a60a9=_0x35e044(0x1b0),_0x5ec954=!![];else _0x46209f==='player1'&&player1IsDualShipActive&&(_0x3a60a9='ai_p2',_0x5ec954=!![]);}}!_0x5ec954&&(_0x3a60a9=_0x46209f);}_0x3a60a9===null&&_0x46209f&&(_0x3a60a9=_0x46209f);if(_0x30a8c0['capturedShipDimensions']){const _0x4bb241=_0x30a8c0[_0x35e044(0x25a)][_0x35e044(0x268)],_0x317721=_0x30a8c0[_0x35e044(0x25a)]['height'],_0x282b36=_0x30a8c0['x']+(_0x456ea5-_0x4bb241)/0x2+CAPTURED_SHIP_OFFSET_X,_0x1d5be3=_0x30a8c0['y']+CAPTURED_SHIP_OFFSET_Y,_0x258459=fallingShips[_0x35e044(0x236)](_0x292eca=>Math[_0x35e044(0x2b3)](_0x292eca['x']-_0x282b36)<0x1&&Math[_0x35e044(0x2b3)](_0x292eca['y']-_0x1d5be3)<0x1);!_0x258459&&fallingShips[_0x35e044(0x283)]({'x':_0x282b36,'y':_0x1d5be3,'width':_0x4bb241,'height':_0x317721,'creationTime':_0x3e26df,'tintProgress':0x1,'rotation':0x0,'rotationDirection':Math[_0x35e044(0x24c)]()<0.5?-0x1:0x1,'totalRotation':0x0,'rotationCompleted':![],'targetPlayerId':_0x3a60a9});}else console[_0x35e044(0x2e2)]('[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!');_0x30a8c0[_0x35e044(0x20c)]=![],_0x30a8c0['capturedShipDimensions']=null;}else _0x218da2&&!_0x220b07&&(console['error'](_0x35e044(0x207)+_0x30a8c0['id']+_0x35e044(0x21d)),_0x30a8c0['hasCapturedShip']=![],_0x30a8c0[_0x35e044(0x25a)]=null);if(isChallengingStage){let _0x548c00=0x64;const _0x107eff=csLastHitTime;csLastHitTime=_0x3e26df,csLastChainHitPosition={'x':_0x30a8c0['x'],'y':_0x30a8c0['y']},csCurrentChainHits>0x0&&_0x3e26df-_0x107eff<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x548c00*=0x2),_0xcdba6f=_0x548c00,csCurrentChainScore+=_0xcdba6f,scoreEarnedThisCS+=_0xcdba6f,_0x58d04e=_0x35e044(0x2aa),_0x5b7cab=0.4;}else{if(_0x30a8c0[_0x35e044(0x2d4)]===_0x35e044(0x1f8))_0xcdba6f=_0x30a8c0[_0x35e044(0x22c)]===ENEMY1_TYPE?0x32:_0x30a8c0['type']===ENEMY2_TYPE?0x50:0x0,_0x30a8c0[_0x35e044(0x22c)]===ENEMY3_TYPE&&(_0xcdba6f=0x96),_0x58d04e=_0x35e044(0x2aa),_0x5b7cab=0.4;else{_0xcdba6f=_0x30a8c0[_0x35e044(0x22c)]===ENEMY1_TYPE?0x64:_0x30a8c0[_0x35e044(0x22c)]===ENEMY2_TYPE?0xa0:0x0;if(_0x30a8c0[_0x35e044(0x22c)]===ENEMY3_TYPE){if(_0x218da2){const _0x1f0257=[0x3e8,0x5dc,0x7d0,0xbb8];_0xcdba6f=_0x1f0257[Math['floor'](Math[_0x35e044(0x24c)]()*_0x1f0257[_0x35e044(0x2a3)])],_0x58d04e=_0x35e044(0x21b),_0x5b7cab=0.4;}else _0x273cdc?(_0xcdba6f=0x190,_0x58d04e='bossHit2Sound',_0x5b7cab=0.4):(_0xcdba6f=0x0,console[_0x35e044(0x248)]('[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20'+_0xcdba6f+_0x35e044(0x224)+(_0x30a8c0['health']+0x1)),_0x58d04e='explosionSound',_0x5b7cab=0.4);}else _0x58d04e=_0x35e044(0x2aa),_0x5b7cab=0.4;if(_0xbe1654&&_0xcdba6f>0x0){const _0x550b6e=normalWaveLastHitTime;normalWaveLastHitTime=_0x3e26df,normalWaveLastChainHitPosition={'x':_0x30a8c0['x'],'y':_0x30a8c0['y']};normalWaveLastChainHitPosition&&_0x3e26df-_0x550b6e<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x576426=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x3057dc=Math[_0x35e044(0x20a)](_0x576426[_0x35e044(0x2a3)]-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x380ba5=_0x576426[_0x3057dc];_0xcdba6f+=_0x380ba5,normalWaveCurrentChainScore+=_0x380ba5;}}}}if(_0xcdba6f>0x0){let _0x1eedf0=null,_0x2529ab=0x0,_0xb97182=_0x46209f,_0x240c77=highScore,_0x4da556=highScoreHolderId,_0x49e228=![],_0x98552d=![];if(isCoopAIDemoActive){if(_0x46209f===_0x35e044(0x1b0)){player1Score+=_0xcdba6f,_0x2529ab=player1Score,_0x1eedf0=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId='player1',_0x49e228=!![],_0x98552d=!![];else player1Score===highScore&&highScoreHolderId!==_0x35e044(0x1b0)&&highScore>0x0&&(highScoreHolderId=_0x35e044(0x1b0),_0x49e228=!![],_0x98552d=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x46209f===_0x35e044(0x22b)){player2Score+=_0xcdba6f,_0x2529ab=player2Score,_0x1eedf0=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x35e044(0x22b),_0x49e228=!![],_0x98552d=!![];else player2Score===highScore&&highScoreHolderId!==_0x35e044(0x22b)&&highScore>0x0&&(highScoreHolderId=_0x35e044(0x22b),_0x49e228=!![],_0x98552d=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0xcdba6f,_0x2529ab=player1Score,_0x1eedf0=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId=_0x35e044(0x1b0),_0x98552d=!![]),checkAndAwardExtraLife(0x1);}}else{if(!isManualControl){score+=_0xcdba6f,player1Score=score,_0x2529ab=score,_0xb97182=_0x35e044(0x1b0),_0x1eedf0=()=>player1EnemiesHit++;if(score>highScore)highScore=score,highScoreHolderId=_0x35e044(0x1b0),_0x49e228=!![],_0x98552d=!![];else score===highScore&&highScoreHolderId!==_0x35e044(0x1b0)&&highScore>0x0&&(highScoreHolderId=_0x35e044(0x1b0),_0x49e228=!![],_0x98552d=!![]);checkAndAwardExtraLife(0x1);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x35e044(0x232)){if(_0x46209f==='player1'){player1Score+=_0xcdba6f,_0x2529ab=player1Score,_0x1eedf0=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x35e044(0x1b0),_0x49e228=!![],_0x98552d=!![];else player1Score===highScore&&highScoreHolderId!==_0x35e044(0x1b0)&&highScore>0x0&&(highScoreHolderId=_0x35e044(0x1b0),_0x49e228=!![],_0x98552d=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x46209f===_0x35e044(0x28b)){player2Score+=_0xcdba6f,_0x2529ab=player2Score,_0xb97182=_0x35e044(0x28b),_0x1eedf0=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x35e044(0x28b),_0x49e228=!![],_0x98552d=!![];else player2Score===highScore&&highScoreHolderId!=='ai_p2'&&highScore>0x0&&(highScoreHolderId='ai_p2',_0x49e228=!![],_0x98552d=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0xcdba6f,_0x2529ab=player1Score,_0x1eedf0=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId=_0x35e044(0x1b0),_0x98552d=!![]),checkAndAwardExtraLife(0x1);}}else{if(isTwoPlayerMode&&selectedGameMode===_0x35e044(0x233)){if(_0x46209f===_0x35e044(0x1b0)){player1Score+=_0xcdba6f,_0x2529ab=player1Score,_0x1eedf0=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x35e044(0x1b0),_0x49e228=!![],_0x98552d=!![];else player1Score===highScore&&highScoreHolderId!==_0x35e044(0x1b0)&&highScore>0x0&&(highScoreHolderId=_0x35e044(0x1b0),_0x49e228=!![],_0x98552d=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x46209f===_0x35e044(0x22b)){player2Score+=_0xcdba6f,_0x2529ab=player2Score,_0x1eedf0=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x35e044(0x22b),_0x49e228=!![],_0x98552d=!![];else player2Score===highScore&&highScoreHolderId!==_0x35e044(0x22b)&&highScore>0x0&&(highScoreHolderId=_0x35e044(0x22b),_0x49e228=!![],_0x98552d=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0xcdba6f,_0x2529ab=player1Score,_0x1eedf0=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId='player1',_0x98552d=!![]),checkAndAwardExtraLife(0x1);}}else{score+=_0xcdba6f,_0x2529ab=score;currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,_0xb97182=_0x35e044(0x1b0),_0x1eedf0=()=>player1EnemiesHit++):(player2Score=score,_0xb97182=isPlayerTwoAI?'ai_p2':_0x35e044(0x22b),_0x1eedf0=()=>player2EnemiesHit++);if(score>highScore)highScore=score,highScoreHolderId=_0xb97182,_0x49e228=!![],_0x98552d=!![];else score===highScore&&highScoreHolderId!==_0xb97182&&highScore>0x0&&(highScoreHolderId=_0xb97182,_0x49e228=!![],_0x98552d=!![]);checkAndAwardExtraLife(currentPlayer);}}}}if(_0x49e228||_0x98552d&&_0x240c77>0x0&&highScoreHolderId!==_0x4da556){let _0x4372b9=![];if(highScoreHolderId==='player1')_0x4372b9=player1TriggeredHighScoreSound;else{if(highScoreHolderId==='player2'||highScoreHolderId==='ai_p2')_0x4372b9=player2TriggeredHighScoreSound;}if(!_0x4372b9||highScoreHolderId!==_0x4da556&&_0x240c77>0x0){playSound(_0x35e044(0x1a3),![],0.2);if(highScoreHolderId===_0x35e044(0x1b0))player1TriggeredHighScoreSound=!![];else{if(highScoreHolderId===_0x35e044(0x22b)||highScoreHolderId===_0x35e044(0x28b))player2TriggeredHighScoreSound=!![];}}}if(_0x98552d&&highScoreHolderId!==_0x4da556&&_0x240c77>0x0){if(_0x4da556===_0x35e044(0x1b0))player1TriggeredHighScoreSound=![];else{if(_0x4da556===_0x35e044(0x22b)||_0x4da556===_0x35e044(0x28b))player2TriggeredHighScoreSound=![];}}_0x1eedf0&&!isChallengingStage&&_0x1eedf0();const _0x3dc70b=_0x30a8c0[_0x35e044(0x2d4)]===_0x35e044(0x1f8)||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x35e044(0x283)]({'text':_0xcdba6f[_0x35e044(0x2a9)](),'x':_0x30a8c0['x']+_0x456ea5/0x2,'y':_0x30a8c0['y'],'color':_0x3dc70b,'creationTime':_0x3e26df,'displayStartTime':_0x3e26df+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x30a8c0['x']+_0x456ea5/0x2,_0x30a8c0['y']+_0x259f47/0x2);_0x30a8c0['id']===capturingBossId&&stopSound('captureSound');if(_0x30a8c0[_0x35e044(0x2d4)]===_0x35e044(0x1a5)||_0x30a8c0[_0x35e044(0x2d4)]===_0x35e044(0x238)||_0x30a8c0[_0x35e044(0x2d4)]===_0x35e044(0x2cb)||_0x30a8c0[_0x35e044(0x2d4)]===_0x35e044(0x1a9)||_0x30a8c0[_0x35e044(0x2d4)]===_0x35e044(0x261)||_0x30a8c0[_0x35e044(0x2d4)]==='showing_capture_message'){if(_0x30a8c0['type']===ENEMY3_TYPE)stopSound(_0x35e044(0x1f7));else stopSound(_0x35e044(0x24f));}}else{_0xbe1654=![];if(_0x30a8c0['type']===ENEMY3_TYPE)_0x58d04e=_0x35e044(0x1c3),_0x5b7cab=0.6,_0xcdba6f=0x0;else{_0xcdba6f=0x0;if(_0x30a8c0[_0x35e044(0x22c)]===ENEMY1_TYPE)_0x58d04e=_0x35e044(0x2d2),_0x5b7cab=0.3;else _0x30a8c0[_0x35e044(0x22c)]===ENEMY2_TYPE&&(_0x58d04e=_0x35e044(0x2bf),_0x5b7cab=0.3);}}return _0x58d04e&&playSound(_0x58d04e,![],_0x5b7cab),{'destroyed':_0xbe1654,'pointsAwarded':_0xcdba6f};}function createHitSparks(_0x1b459f,_0x4796a6){const _0x4af68b=_0x49ddb3;if(!gameCtx)return;const _0x3fcd37=Date['now']();for(let _0x5b4c71=0x0;_0x5b4c71<HIT_SPARK_COUNT;_0x5b4c71++){const _0x26b5f9=Math[_0x4af68b(0x24c)]()*Math['PI']*0x2,_0x29ac4b=HIT_SPARK_SPEED*(0.7+Math[_0x4af68b(0x24c)]()*0.6),_0x4c2e97=HIT_SPARK_LIFETIME*(0.8+Math['random']()*0.4);hitSparks['push']({'x':_0x1b459f,'y':_0x4796a6,'vx':Math[_0x4af68b(0x24e)](_0x26b5f9)*_0x29ac4b,'vy':Math['sin'](_0x26b5f9)*_0x29ac4b,'creationTime':_0x3fcd37,'lifetime':_0x4c2e97,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0xfca387=_0x49ddb3,_0x18a95d=Date['now']();for(let _0x12bc0d=hitSparks[_0xfca387(0x2a3)]-0x1;_0x12bc0d>=0x0;_0x12bc0d--){const _0x1d66db=hitSparks[_0x12bc0d],_0x134e04=_0x18a95d-_0x1d66db[_0xfca387(0x2e3)];_0x134e04>=_0x1d66db['lifetime']?hitSparks['splice'](_0x12bc0d,0x1):(_0x1d66db['vy']+=HIT_SPARK_GRAVITY,_0x1d66db['x']+=_0x1d66db['vx'],_0x1d66db['y']+=_0x1d66db['vy'],_0x1d66db[_0xfca387(0x1b9)]=Math['max'](0x0,0x1-_0x134e04*HIT_SPARK_FADE_SPEED));}}function moveEntities(){const _0x12c56a=_0x49ddb3;try{if(isPaused)return;const _0x3db7e6=Date[_0x12c56a(0x28d)]();}catch(_0x10a6a7){console['error']('FATAL\x20Error\x20in\x20moveEntities\x20(Restored\x20Conditions):',_0x10a6a7,_0x10a6a7[_0x12c56a(0x1cc)]),isGridSoundPlaying=![],stopSound(_0x12c56a(0x25f)),isEntrancePhaseActive=![],stopSound(_0x12c56a(0x23b)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x12c56a(0x272)),stopSound(_0x12c56a(0x1d2)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState==='function')showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x12c56a(0x20e));}}function switchPlayerTurn(){const _0x3d54b6=_0x49ddb3;if(!isTwoPlayerMode||selectedGameMode==='coop')return![];currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive,player1MaxLevelReached=Math[_0x3d54b6(0x221)](player1MaxLevelReached,level)):(player2Score=score,player2IsDualShipActive=isDualShipActive,player2MaxLevelReached=Math['max'](player2MaxLevelReached,level));const _0x3bbb8c=currentPlayer===0x1?0x2:0x1,_0x56b0ca=_0x3bbb8c===0x1?player1Lives:player2Lives;if(_0x56b0ca<=0x0){const _0x1dec87=currentPlayer===0x1?player1Lives:player2Lives;return _0x1dec87<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x3bbb8c,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0x23f6c6=null,_0x291f7a=![]){const _0x32297e=_0x49ddb3,_0xf67741=Date[_0x32297e(0x28d)](),_0x28ef9c=isTwoPlayerMode&&selectedGameMode===_0x32297e(0x233)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0xf67741<coopPlayersReadyStartTime+0x1f40;if(_0x28ef9c)return![];let _0x56c44d=![],_0x482ecb=null,_0x490e1b=![],_0x491b1b=0x0,_0x4f5f85=_0x326e7f=>{},_0x25607c=_0x39684b=>{},_0x563c38=![],_0x3cc7e6=()=>![],_0x2e5335=_0x28f487=>{},_0x4c2f8b=_0x23f6c6;const _0x2c1eec=!isPaused&&isInGameState&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!showReadyMessage&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x32297e(0x233)&&(_0x23f6c6===_0x32297e(0x1b0)&&isPlayer1ShowingGameOverMessage||_0x23f6c6==='player2'&&isPlayer2ShowingGameOverMessage));if(!_0x2c1eec)return![];if(_0x4c2f8b){let _0x16743b=![];if(_0x4c2f8b==='ai'&&isShipCaptured)_0x16743b=!![];else{if(_0x4c2f8b===_0x32297e(0x28b)&&isTwoPlayerMode&&selectedGameMode===_0x32297e(0x1ea)&&isShipCaptured)_0x16743b=!![];else{if(_0x4c2f8b===_0x32297e(0x1b0)&&isCoopAIDemoActive&&isPlayer1ShipCaptured)_0x16743b=!![];else{if(_0x4c2f8b==='player2'&&isCoopAIDemoActive&&isPlayer2ShipCaptured)_0x16743b=!![];else{if(_0x4c2f8b===_0x32297e(0x28b)&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&isPlayer2ShipCaptured)_0x16743b=!![];}}}}if(_0x16743b)return![];}if(isTwoPlayerMode&&selectedGameMode===_0x32297e(0x233)){if(_0x23f6c6===_0x32297e(0x1b0)&&ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1NeedsRespawnAfterCapture)(!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer1ShipCaptured)&&(_0x482ecb=ship1,_0x490e1b=player1IsDualShipActive,_0x491b1b=player1LastShotTime,_0x4f5f85=_0x2276ec=>{player1LastShotTime=_0x2276ec;},_0x25607c=_0x1bea0f=>{player1ShotsFired+=_0x1bea0f;},_0x563c38=selectedFiringMode===_0x32297e(0x244),_0x3cc7e6=()=>p1JustFiredSingle,_0x2e5335=_0x25aa10=>{p1JustFiredSingle=_0x25aa10;},_0x56c44d=!![]);else _0x23f6c6===_0x32297e(0x22b)&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2NeedsRespawnAfterCapture&&((!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer2ShipCaptured)&&(_0x482ecb=ship2,_0x490e1b=player2IsDualShipActive,_0x491b1b=player2LastShotTime,_0x4f5f85=_0x26ed04=>{player2LastShotTime=_0x26ed04;},_0x25607c=_0x44d91c=>{player2ShotsFired+=_0x44d91c;},isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x32297e(0x232)?_0x563c38=![]:(_0x563c38=selectedFiringMode==='single',_0x3cc7e6=()=>p2JustFiredSingle,_0x2e5335=_0x457a6e=>{p2JustFiredSingle=_0x457a6e;}),_0x56c44d=!![]));}else{if(ship&&playerLives>0x0&&!isShipCaptured){_0x482ecb=ship,_0x490e1b=isDualShipActive;if(isTwoPlayerMode&&selectedGameMode===_0x32297e(0x1ea)){if(currentPlayer===0x1){_0x491b1b=player1LastShotTime,_0x4f5f85=_0x5ed35b=>{player1LastShotTime=_0x5ed35b;},_0x25607c=_0x21ad65=>{player1ShotsFired+=_0x21ad65;},_0x563c38=selectedFiringMode===_0x32297e(0x244),_0x3cc7e6=()=>p1JustFiredSingle,_0x2e5335=_0x5baf49=>{p1JustFiredSingle=_0x5baf49;};if(!_0x4c2f8b)_0x4c2f8b='player1';}else{_0x491b1b=player2LastShotTime,_0x4f5f85=_0x5d1011=>{player2LastShotTime=_0x5d1011;},_0x25607c=_0x1a1514=>{player2ShotsFired+=_0x1a1514;};if(isPlayerTwoAI){_0x563c38=![];if(!_0x4c2f8b)_0x4c2f8b=_0x32297e(0x28b);}else{_0x563c38=selectedFiringMode===_0x32297e(0x244);connectedGamepadIndexP2===null&&connectedGamepadIndex!==null?(_0x3cc7e6=()=>p1JustFiredSingle,_0x2e5335=_0x247cf3=>{p1JustFiredSingle=_0x247cf3;}):(_0x3cc7e6=()=>p2JustFiredSingle,_0x2e5335=_0xea81c1=>{p2JustFiredSingle=_0xea81c1;});if(!_0x4c2f8b)_0x4c2f8b='player2';}}}else{_0x491b1b=player1LastShotTime,_0x4f5f85=_0x5104b6=>{player1LastShotTime=_0x5104b6;},_0x25607c=_0x531e3d=>{player1ShotsFired+=_0x531e3d;},_0x563c38=selectedFiringMode==='single',_0x3cc7e6=()=>p1JustFiredSingle,_0x2e5335=_0x26b268=>{p1JustFiredSingle=_0x26b268;};if(!_0x4c2f8b)_0x4c2f8b=_0x32297e(0x1b0);}_0x56c44d=!![];}}_0x23f6c6===null&&!isManualControl&&!isCoopAIDemoActive&&ship&&playerLives>0x0&&!isShipCaptured&&!isShowingCaptureMessage&&(_0x482ecb=ship,_0x490e1b=isDualShipActive,_0x491b1b=aiLastShotTime,_0x4f5f85=_0x59d879=>{aiLastShotTime=_0x59d879;},_0x25607c=_0x573c1a=>{player1ShotsFired+=_0x573c1a;},_0x563c38=![],_0x56c44d=!![],_0x4c2f8b='ai');if(!_0x56c44d||!_0x482ecb)return![];if(_0x563c38){if(_0x291f7a){if(_0xf67741-_0x491b1b<SHOOT_COOLDOWN)return![];}else{let _0x3a62b1=![];if(_0x4c2f8b==='player1'||!isTwoPlayerMode&&_0x4c2f8b===_0x32297e(0x1b0))_0x3a62b1=keyboardP1ShootDown||connectedGamepadIndex!==null&&navigator['getGamepads']()?.[connectedGamepadIndex]?.['buttons'][PS5_BUTTON_CROSS]?.['pressed'];else{if(_0x4c2f8b===_0x32297e(0x22b)&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)_0x3a62b1=keyboardP2ShootDown||connectedGamepadIndexP2!==null&&navigator[_0x32297e(0x200)]()?.[connectedGamepadIndexP2]?.[_0x32297e(0x1d1)][PS5_BUTTON_CROSS]?.[_0x32297e(0x282)];else connectedGamepadIndex!==null?_0x3a62b1=keyboardP2ShootDown||connectedGamepadIndex!==null&&navigator[_0x32297e(0x200)]()?.[connectedGamepadIndex]?.[_0x32297e(0x1d1)][PS5_BUTTON_CROSS]?.[_0x32297e(0x282)]:_0x3a62b1=keyboardP2ShootDown;}}if(_0x3cc7e6()){if(_0x3a62b1)return![];else _0x2e5335(![]);}if(_0xf67741-_0x491b1b<SHOOT_COOLDOWN)return![];}}else{if(_0xf67741-_0x491b1b<SHOOT_COOLDOWN)return![];}try{const _0x46a21c=_0x482ecb['y'];let _0x593d73=0x0;if(_0x490e1b){const _0x52d4b3=_0x482ecb['x']+_0x482ecb[_0x32297e(0x268)]/0x2,_0x5216a1=_0x482ecb['x']+DUAL_SHIP_OFFSET_X+_0x482ecb[_0x32297e(0x268)]/0x2,_0x3a85ef=_0x52d4b3-PLAYER_BULLET_WIDTH/0x2,_0x13fde8=_0x5216a1-PLAYER_BULLET_WIDTH/0x2;bullets[_0x32297e(0x283)]({'x':_0x3a85ef,'y':_0x46a21c,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x4c2f8b}),bullets[_0x32297e(0x283)]({'x':_0x13fde8,'y':_0x46a21c,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x4c2f8b}),_0x593d73=0x2;}else{const _0x769ad8=_0x482ecb['x']+_0x482ecb[_0x32297e(0x268)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x32297e(0x283)]({'x':_0x769ad8,'y':_0x46a21c,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x4c2f8b}),_0x593d73=0x1;}if(_0x563c38&&!_0x291f7a)_0x2e5335(!![]);return playSound(_0x32297e(0x1e5),![],0.4),_0x25607c(_0x593d73),_0x4f5f85(_0xf67741),!![];}catch(_0x11a204){return console[_0x32297e(0x2e2)](_0x32297e(0x279),_0x11a204),![];}}function handlePlayerInput(){const _0x249d91=_0x49ddb3;try{const _0x1aebd5=Date[_0x249d91(0x28d)](),_0x3ebb05=isTwoPlayerMode&&selectedGameMode===_0x249d91(0x233)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x1aebd5<coopPlayersReadyStartTime+0x1f40;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2&&!isManualControl){isCoopAIDemoActive&&(leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![]);return;}let _0x2905c6=isPaused||!isManualControl||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage);if(_0x2905c6){keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![];return;}let _0x2cb1a4=0x0;if(isTouchActiveGame&&gameCanvas&&gameCanvas[_0x249d91(0x268)]>0x0){const _0x4eeec6=gameCanvas[_0x249d91(0x1f5)](),_0x4c7f0d=gameCanvas[_0x249d91(0x268)]/_0x4eeec6[_0x249d91(0x268)];_0x2cb1a4=(touchCurrentX-_0x4eeec6[_0x249d91(0x226)])*_0x4c7f0d;}let _0x34c351=![],_0x311c4c=![],_0x2bfb64=![],_0x1c0836=![],_0x3c84cb=![],_0x3e665d=![];if(connectedGamepadIndex!==null){const _0xa8a467=navigator[_0x249d91(0x200)]();if(_0xa8a467?.[connectedGamepadIndex]){const _0x1369a8=_0xa8a467[connectedGamepadIndex],_0x69092a=processSingleController(_0x1369a8,previousGameButtonStates);_0x34c351=_0x69092a['left'],_0x311c4c=_0x69092a['right'],_0x2bfb64=_0x69092a['shoot'],previousGameButtonStates=_0x69092a[_0x249d91(0x2df)]['slice']();if(_0x69092a['pause']&&!isShowingCaptureMessage){togglePause();return;}if(_0x69092a[_0x249d91(0x27a)]&&!isShowingCaptureMessage){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x249d91(0x2a3)]>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates['length']>0x0)previousGameButtonStates=[];}if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')){if(isTwoPlayerMode&&connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex){const _0x5dd804=navigator['getGamepads']();if(_0x5dd804?.[connectedGamepadIndexP2]){const _0x910645=_0x5dd804[connectedGamepadIndexP2],_0x118e4d=processSingleController(_0x910645,previousGameButtonStatesP2);_0x1c0836=_0x118e4d[_0x249d91(0x226)],_0x3c84cb=_0x118e4d[_0x249d91(0x2be)],_0x3e665d=_0x118e4d[_0x249d91(0x253)],previousGameButtonStatesP2=_0x118e4d[_0x249d91(0x2df)][_0x249d91(0x2a6)]();}else{if(previousGameButtonStatesP2[_0x249d91(0x2a3)]>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2[_0x249d91(0x2a3)]>0x0)previousGameButtonStatesP2=[];}}const _0x6848a0=p1FireInputWasDown;p1FireInputWasDown=keyboardP1ShootDown||_0x2bfb64;let _0x33381f=![];if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x249d91(0x232))){_0x33381f=p2FireInputWasDown;if(isTwoPlayerMode&&selectedGameMode===_0x249d91(0x1ea)&&currentPlayer===0x2&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)p2FireInputWasDown=keyboardP2ShootDown||_0x3e665d;else connectedGamepadIndex!==null?p2FireInputWasDown=keyboardP2ShootDown||_0x2bfb64:p2FireInputWasDown=keyboardP2ShootDown;}else p2FireInputWasDown=keyboardP2ShootDown||_0x3e665d;}else p2FireInputWasDown=![];if(selectedFiringMode===_0x249d91(0x244)){if(isTwoPlayerMode&&selectedGameMode===_0x249d91(0x233)){if(!isTouchActiveGame){if(_0x6848a0&&!p1FireInputWasDown)p1JustFiredSingle=![];if(!isPlayerTwoAI&&_0x33381f&&!p2FireInputWasDown)p2JustFiredSingle=![];}}else{if(isTwoPlayerMode&&selectedGameMode==='normal'){if(!isTouchActiveGame){if(currentPlayer===0x1&&_0x6848a0&&!p1FireInputWasDown)p1JustFiredSingle=![];else{if(currentPlayer===0x2&&!isPlayerTwoAI){let _0x2bc5ad=connectedGamepadIndexP2===null&&connectedGamepadIndex!==null,_0x295d88=connectedGamepadIndexP2===null&&connectedGamepadIndex!==null;_0x2bc5ad&&_0x295d88?_0x6848a0&&!p1FireInputWasDown&&(p1JustFiredSingle=![]):_0x33381f&&!p2FireInputWasDown&&(p2JustFiredSingle=![]);}}}}else{if(!isTouchActiveGame){if(_0x6848a0&&!p1FireInputWasDown)p1JustFiredSingle=![];}}}}leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![];let _0x1e30c2=![];if(isTouchActiveGame&&gameCanvas){if(isTwoPlayerMode&&selectedGameMode===_0x249d91(0x233)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x2cf6d1=ship1[_0x249d91(0x268)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x648183=_0x2cb1a4-_0x2cf6d1/0x2;_0x648183=Math[_0x249d91(0x221)](0x0,Math[_0x249d91(0x20a)](gameCanvas[_0x249d91(0x268)]-_0x2cf6d1,_0x648183)),ship1['x']=_0x648183,ship1['targetX']=_0x648183,_0x1e30c2=!![];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1)){const _0x50c460=ship[_0x249d91(0x268)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x100ed4=_0x2cb1a4-_0x50c460/0x2;_0x100ed4=Math['max'](0x0,Math['min'](gameCanvas['width']-_0x50c460,_0x100ed4)),ship['x']=_0x100ed4,ship[_0x249d91(0x1b5)]=_0x100ed4,_0x1e30c2=!![];}}}if(isTwoPlayerMode&&selectedGameMode===_0x249d91(0x233)){if(!_0x1e30c2){const _0x48fc52=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;_0x48fc52&&(leftPressed=keyboardP1LeftDown||_0x34c351,rightPressed=keyboardP1RightDown||_0x311c4c);}if(!isPlayerTwoAI){const _0x5d3c9d=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;_0x5d3c9d&&(p2LeftPressed=keyboardP2LeftDown||_0x1c0836,p2RightPressed=keyboardP2RightDown||_0x3c84cb);}}else{if(!_0x1e30c2){const _0x40526e=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0x40526e){if(currentPlayer===0x1||!isTwoPlayerMode)leftPressed=keyboardP1LeftDown||_0x34c351,rightPressed=keyboardP1RightDown||_0x311c4c;else{if(currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0x249d91(0x1ea)){if(connectedGamepadIndexP2!==null)leftPressed=keyboardP2LeftDown||_0x1c0836,rightPressed=keyboardP2RightDown||_0x3c84cb;else connectedGamepadIndex!==null?(leftPressed=keyboardP2LeftDown||_0x34c351,rightPressed=keyboardP2RightDown||_0x311c4c):(leftPressed=keyboardP2LeftDown,rightPressed=keyboardP2RightDown);}}}}}if(isTwoPlayerMode&&selectedGameMode===_0x249d91(0x233)){const _0x3dfaf7=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture&&!_0x3ebb05;if(_0x3dfaf7){let _0xc8f0a0=![];if(isTouchActiveGame&&selectedFiringMode===_0x249d91(0x225)){if(selectedOnePlayerGameVariant==='1P_VS_AI_COOP')_0xc8f0a0=!![];else!isPlayerTwoAI&&(_0xc8f0a0=!![]);}shootPressed=_0xc8f0a0||p1FireInputWasDown;if(isShowingCaptureMessage&&isPlayer1ShipCaptured)shootPressed=![];}if(!isPlayerTwoAI){const _0x1141dc=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture&&!_0x3ebb05;if(_0x1141dc){p2ShootPressed=isTouchActiveGame&&selectedFiringMode===_0x249d91(0x225)&&_0x2cb1a4>gameCanvas[_0x249d91(0x268)]/0x2||p2FireInputWasDown;if(isShowingCaptureMessage&&isPlayer2ShipCaptured)p2ShootPressed=![];}}}else{const _0x1069a5=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!_0x3ebb05;if(_0x1069a5){let _0x211d49=![];if(currentPlayer===0x1||!isTwoPlayerMode)_0x211d49=p1FireInputWasDown;else currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode==='normal'&&(_0x211d49=p2FireInputWasDown);shootPressed=isTouchActiveGame&&selectedFiringMode===_0x249d91(0x225)||_0x211d49;if(isShowingCaptureMessage&&isShipCaptured)shootPressed=![];}}if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x249d91(0x233))shootPressed&&firePlayerBullet('player1',![]),!isPlayerTwoAI&&p2ShootPressed&&firePlayerBullet(_0x249d91(0x22b),![]);else{if(shootPressed){if(isPlayerTwoAI&&selectedGameMode===_0x249d91(0x1ea)&&currentPlayer===0x2){}else firePlayerBullet(currentPlayer===0x1||!isTwoPlayerMode?_0x249d91(0x1b0):_0x249d91(0x22b),![]);}}}}catch(_0x224ed0){console[_0x249d91(0x2e2)](_0x249d91(0x2d5),_0x224ed0),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![];}}let aiIsCurrentlyTargetingCaptureBoss=![];function aiControl(){const _0x503e13=_0x49ddb3;try{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x503e13(0x232))return;let _0x206409=null,_0x39815a=null,_0x23a34a=![],_0x3d851e=![],_0x5a33bf=![],_0x11627a=0x0,_0x481a85='ai',_0x10ea16=![],_0x41a85d=![];if(isPlayerTwoAI&&selectedGameMode===_0x503e13(0x1ea)&&currentPlayer===0x2){if(!ship||playerLives<=0x0||isShipCaptured||isShowingPlayerGameOverMessage){if(ship)ship['targetX']=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas['width']/0x2:0x0;return;}_0x206409=ship,_0x39815a=smoothedShipX,_0x23a34a=isDualShipActive,_0x3d851e=isShipCaptured,_0x5a33bf=isInvincible,_0x11627a=playerLives,_0x481a85=_0x503e13(0x28b),_0x10ea16=!![],_0x41a85d=playerLives>0x1&&!_0x23a34a&&!isShipCaptured;}else{if(!isManualControl&&!isPlayerTwoAI){if(playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage){if(ship)ship[_0x503e13(0x1b5)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x503e13(0x268)]/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}if(isShipCaptured||isShowingCaptureMessage){if(ship)ship[_0x503e13(0x1b5)]=ship['x'];else{if(_0x206409)_0x206409[_0x503e13(0x1b5)]=_0x206409['x'];}if(smoothedShipX!==undefined&&ship)smoothedShipX=ship['x'];else{if(smoothedShipX!==undefined&&_0x206409)smoothedShipX=_0x206409['x'];}aiIsCurrentlyTargetingCaptureBoss=![];return;}_0x206409=ship,_0x39815a=smoothedShipX,_0x23a34a=isDualShipActive,_0x3d851e=isShipCaptured,_0x5a33bf=isInvincible,_0x11627a=playerLives,_0x41a85d=playerLives>0x1&&!_0x23a34a&&!isShipCaptured;}else{if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}if(_0x39815a===undefined&&_0x206409)_0x39815a=_0x206409['x'],(_0x10ea16||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x39815a);else{if(_0x39815a===undefined&&!_0x206409){_0x39815a=gameCanvas?gameCanvas['width']/0x2:0x0;(_0x10ea16||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x39815a);if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}const _0x61619a=Date[_0x503e13(0x28d)](),_0x5d9cc0=gameCanvas[_0x503e13(0x268)],_0x7b96c8=gameCanvas['height'];let _0x4bbe18=_0x206409[_0x503e13(0x268)];_0x23a34a&&(_0x4bbe18=DUAL_SHIP_OFFSET_X+_0x206409[_0x503e13(0x268)]);const _0x5d738b=_0x206409['x']+_0x4bbe18/0x2,_0x269378=_0x206409['y'],_0x582be8=_0x5d9cc0/0x2,_0x2c676d=_0x582be8-_0x4bbe18/0x2,_0x539b2b=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive||isShowingCaptureMessage||isShowingIntro;let _0x3d95fc=_0x39815a,_0x273ecf=![],_0x316444=![],_0x157f11=_0x39815a,_0x1cbc2f=null,_0x20c749=![],_0x756130=![];aiNeedsStabilization&&!_0x539b2b&&(aiStabilizationEndTime=_0x61619a+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],_0x39815a=_0x206409['x'],(_0x10ea16||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x39815a));const _0x197e46=enemies[_0x503e13(0x20f)](_0x5cd7b0=>_0x5cd7b0['id']===capturingBossId&&_0x5cd7b0[_0x503e13(0x22c)]===ENEMY3_TYPE);if(_0x41a85d&&captureBeamActive&&_0x197e46&&_0x197e46[_0x503e13(0x2d4)]===_0x503e13(0x21e)&&!_0x3d851e&&!isWaitingForRespawn){if(!isManualControl&&!isPlayerTwoAI)aiIsCurrentlyTargetingCaptureBoss=!![];else _0x10ea16&&(_0x756130=!![],aiIsCurrentlyTargetingCaptureBoss=!![]);if(aiIsCurrentlyTargetingCaptureBoss){_0x273ecf=![],_0x1cbc2f=null;const _0x2f0382=_0x197e46['x']+_0x197e46[_0x503e13(0x268)]/0x2;_0x61619a-(_0x197e46[_0x503e13(0x2c7)]||0x0)>=AI_CAPTURE_BEAM_APPROACH_DELAY_MS?(_0x3d95fc=_0x2f0382-_0x4bbe18/0x2,_0x20c749=!![]):(_0x3d95fc=_0x2c676d,_0x20c749=![]);}}else aiIsCurrentlyTargetingCaptureBoss&&(!captureBeamActive||!_0x197e46||_0x197e46['state']!=='capturing'||!_0x41a85d)&&(aiIsCurrentlyTargetingCaptureBoss=![],_0x756130=![]);if(_0x61619a<aiStabilizationEndTime&&!_0x539b2b&&!aiIsCurrentlyTargetingCaptureBoss)_0x3d95fc=_0x2c676d;else{if(!_0x539b2b&&!aiIsCurrentlyTargetingCaptureBoss){_0x316444=![],_0x157f11=_0x39815a;if(!isChallengingStage&&!_0x5a33bf){let _0x3e619b=[];const _0x97dd9=isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_LOOKAHEAD*1.1:FINAL_DODGE_LOOKAHEAD*1.2,_0x438be0=isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_BUFFER*1.1:FINAL_DODGE_BUFFER_BASE*1.2,_0x40b7b1=_0x23a34a?_0x97dd9*1.25:_0x97dd9,_0x1a9a88=_0x23a34a?_0x438be0*1.35:_0x438be0,_0x19dc87={'x':_0x206409['x']-_0x1a9a88,'y':_0x206409['y']-_0x40b7b1,'width':_0x4bbe18+_0x1a9a88*0x2,'height':_0x40b7b1+_0x206409[_0x503e13(0x1ff)]};for(const _0x5834f5 of enemyBullets){if(_0x5834f5&&_0x5834f5['y']+_0x5834f5[_0x503e13(0x1ff)]>_0x206409['y']-_0x206409[_0x503e13(0x1ff)]*0x2&&_0x5834f5['y']<_0x7b96c8){const _0x5cd011={'x':_0x5834f5['x'],'y':_0x5834f5['y'],'width':_0x5834f5[_0x503e13(0x268)],'height':_0x5834f5['height']};checkCollision(_0x19dc87,_0x5cd011)&&_0x3e619b[_0x503e13(0x283)](_0x5834f5);}}if(_0x3e619b[_0x503e13(0x2a3)]>0x0){_0x316444=!![];let _0x37019c=_0x39815a,_0x4691a4=-Infinity;for(let _0x55cf15=-0x1;_0x55cf15<=0x1;_0x55cf15+=0x2){const _0xa892cf=_0x4bbe18*(_0x23a34a?2.6:0x2)+Math[_0x503e13(0x24c)]()*(_0x4bbe18*0.5)+(_0x3e619b[_0x503e13(0x2a3)]>0x1?_0x4bbe18*0.5:0x0);let _0x42b957=_0x39815a+_0x55cf15*_0xa892cf;_0x42b957=Math[_0x503e13(0x221)](AI_ANTI_CORNER_BUFFER,Math[_0x503e13(0x20a)](_0x5d9cc0-_0x4bbe18-AI_ANTI_CORNER_BUFFER,_0x42b957));let _0x12cc2c=0x0;const _0x1f1bc3={'x':_0x42b957-_0x1a9a88/0x2,'y':_0x206409['y']-_0x40b7b1,'width':_0x4bbe18+_0x1a9a88,'height':_0x40b7b1+_0x206409[_0x503e13(0x1ff)]};for(const _0x1a79ed of _0x3e619b){checkCollision(_0x1f1bc3,{'x':_0x1a79ed['x'],'y':_0x1a79ed['y'],'width':_0x1a79ed['width'],'height':_0x1a79ed['height']})&&_0x12cc2c++;}let _0x30ce4b=-_0x12cc2c;if(Math[_0x503e13(0x2b3)](_0x42b957-_0x39815a)<_0x4bbe18*0.5)_0x30ce4b-=0xa;_0x30ce4b>_0x4691a4&&(_0x4691a4=_0x30ce4b,_0x37019c=_0x42b957);}_0x157f11=_0x37019c;}if(!_0x316444){const _0x4beccc=AI_COLLISION_LOOKAHEAD*(_0x23a34a?1.85:1.5),_0x1e0c38=FINAL_DODGE_BUFFER_BASE*(_0x23a34a?1.85:1.5);for(const _0x399997 of enemies){if(_0x399997&&(_0x399997[_0x503e13(0x2d4)]==='attacking'||_0x399997[_0x503e13(0x2d4)]==='diving_to_capture_position'||_0x399997['state']==='following_entrance_path'||_0x399997[_0x503e13(0x2d4)]===_0x503e13(0x1a9))&&_0x399997['y']+_0x399997['height']>_0x206409['y']-_0x4beccc/0x2&&_0x399997['y']<_0x206409['y']+_0x206409['height']){const _0x12d420={'x':_0x206409['x']-_0x1e0c38,'y':_0x206409['y']-_0x4beccc,'width':_0x4bbe18+_0x1e0c38*0x2,'height':_0x4beccc+_0x206409[_0x503e13(0x1ff)]},_0x1b6432={'x':_0x399997['x'],'y':_0x399997['y'],'width':_0x399997['width'],'height':_0x399997[_0x503e13(0x1ff)]};if(checkCollision(_0x12d420,_0x1b6432)){_0x316444=!![];const _0x120a85=_0x399997['x']+_0x399997[_0x503e13(0x268)]/0x2,_0x56129b=_0x5d738b<_0x120a85?-0x1:0x1,_0x2f80cf=_0x4bbe18*(_0x23a34a?2.9:2.2)+Math[_0x503e13(0x24c)]()*(_0x4bbe18*0.6);_0x157f11=_0x39815a+_0x56129b*_0x2f80cf;break;}}}}}if(_0x316444)_0x3d95fc=Math[_0x503e13(0x221)](AI_ANTI_CORNER_BUFFER,Math[_0x503e13(0x20a)](_0x5d9cc0-_0x4bbe18-AI_ANTI_CORNER_BUFFER,_0x157f11)),_0x1cbc2f=null,_0x273ecf=![];else{if(fallingShips[_0x503e13(0x2a3)]>0x0&&!_0x3d851e&&!isWaitingForRespawn&&!_0x23a34a){let _0x32ec04=null,_0x1e92e2=Infinity;for(const _0x250e23 of fallingShips){let _0x289a2d=![];if(!isManualControl&&!isPlayerTwoAI||isPlayerTwoAI&&selectedGameMode===_0x503e13(0x1ea)&&currentPlayer===0x2){if(_0x10ea16&&_0x250e23[_0x503e13(0x275)]===_0x503e13(0x1b0))_0x289a2d=!![];else!isManualControl&&!isPlayerTwoAI&&_0x250e23['targetPlayerId']===_0x503e13(0x1b0)&&(_0x289a2d=!![]);if(!_0x32ec04&&!_0x289a2d)_0x289a2d=!![];}if(_0x250e23&&!_0x250e23[_0x503e13(0x292)]&&_0x289a2d){const _0x48a0a8=Math[_0x503e13(0x2b3)](_0x250e23['x']+_0x250e23[_0x503e13(0x268)]/0x2-_0x5d738b)+Math['abs'](_0x250e23['y']-_0x206409['y']);_0x48a0a8<_0x1e92e2&&(_0x1e92e2=_0x48a0a8,_0x32ec04=_0x250e23);}}_0x32ec04&&(_0x3d95fc=_0x32ec04['x']+_0x32ec04[_0x503e13(0x268)]/0x2-_0x4bbe18/0x2,_0x273ecf=![],_0x1cbc2f=null);}else{if(!_0x20c749){_0x1cbc2f=null;let _0x3ce997=-Infinity;for(const _0x4e5bb4 of enemies){if(!_0x4e5bb4)continue;let _0x153e60=![];aiIsCurrentlyTargetingCaptureBoss&&_0x4e5bb4['id']===capturingBossId&&(_0x153e60=!![]);let _0x1af974=0x0;const _0x5ede9c=_0x4e5bb4['x']+_0x4e5bb4['width']/0x2,_0x36bb54=_0x5ede9c-_0x5d738b,_0x4434c8=_0x269378-(_0x4e5bb4['y']+_0x4e5bb4[_0x503e13(0x1ff)]);if(_0x4434c8<0x0&&_0x4e5bb4[_0x503e13(0x2d4)]!==_0x503e13(0x1a5)&&_0x4e5bb4[_0x503e13(0x2d4)]!==_0x503e13(0x2cb)&&_0x4e5bb4[_0x503e13(0x2d4)]!=='following_bezier_path')continue;_0x1af974=(_0x7b96c8-_0x4e5bb4['y'])*0x2-Math[_0x503e13(0x2b3)](_0x36bb54)*0x3-_0x4434c8;if(_0x4e5bb4[_0x503e13(0x2d4)]===_0x503e13(0x1a5)||_0x4e5bb4[_0x503e13(0x2d4)]==='diving_to_capture_position')_0x1af974+=0xbb8;if(_0x4e5bb4[_0x503e13(0x22c)]===ENEMY3_TYPE&&!_0x4e5bb4[_0x503e13(0x259)])_0x1af974+=0x7d0;if(_0x4e5bb4['type']===ENEMY3_TYPE&&_0x4e5bb4[_0x503e13(0x259)])_0x1af974+=0xfa0;if(_0x4e5bb4[_0x503e13(0x22c)]===ENEMY3_TYPE&&_0x4e5bb4[_0x503e13(0x20c)])_0x1af974+=0x1388;_0x1af974>_0x3ce997&&(_0x3ce997=_0x1af974,_0x1cbc2f=_0x4e5bb4);}if(_0x1cbc2f){const _0x4aaa5f=_0x1cbc2f['x']+_0x1cbc2f[_0x503e13(0x268)]/0x2;_0x3d95fc=_0x4aaa5f-_0x4bbe18/0x2;const _0x2b8bd2=1.8;let _0x37ae0d;if(isChallengingStage)_0x37ae0d=_0x4bbe18*2.5;else _0x1cbc2f['state']===_0x503e13(0x1f8)||_0x1cbc2f[_0x503e13(0x2d4)]==='preparing_capture'?_0x37ae0d=_0x4bbe18*(GRID_SHOOT_ALIGNMENT_FACTOR*_0x2b8bd2):_0x37ae0d=_0x4bbe18*(FINAL_SHOOT_ALIGNMENT_THRESHOLD*_0x2b8bd2);const _0x49d796=Math['abs'](_0x5d738b-_0x4aaa5f);let _0x409cbe=![];if(aiIsCurrentlyTargetingCaptureBoss&&_0x1cbc2f['id']===capturingBossId)_0x409cbe=!![];else _0x41a85d&&_0x1cbc2f[_0x503e13(0x22c)]===ENEMY3_TYPE&&!_0x1cbc2f[_0x503e13(0x20c)]&&!captureAttemptMadeThisLevel&&!isFullGridWave&&(_0x1cbc2f[_0x503e13(0x2d4)]===_0x503e13(0x1f8)||_0x1cbc2f[_0x503e13(0x2d4)]===_0x503e13(0x1c9)||_0x1cbc2f['state']==='diving_to_capture_position'||_0x1cbc2f['state']===_0x503e13(0x21e)&&_0x1cbc2f['id']===capturingBossId)&&(_0x409cbe=!![]);_0x49d796<_0x37ae0d&&!_0x409cbe&&(_0x273ecf=!![]);}else _0x3d95fc=_0x2c676d,_0x273ecf=![];}}}}else aiIsCurrentlyTargetingCaptureBoss&&_0x539b2b&&(_0x273ecf=![],_0x1cbc2f=null);}if(_0x206409){_0x39815a+=(_0x3d95fc-_0x39815a)*AI_SMOOTHING_FACTOR_MOVE,_0x206409[_0x503e13(0x1b5)]=_0x39815a;if(_0x10ea16)smoothedShipX=_0x39815a;else!isManualControl&&!isPlayerTwoAI&&(smoothedShipX=_0x39815a);}aiIsCurrentlyTargetingCaptureBoss&&(_0x273ecf=![]);if(_0x273ecf&&!_0x316444&&!_0x20c749&&!_0x539b2b){let _0x2ea85e=![];_0x10ea16?_0x2ea85e=!![]:_0x61619a>=aiCanShootTime&&(_0x2ea85e=!![]),_0x2ea85e&&!isShowingIntro&&(firePlayerBullet(_0x481a85,![])&&(!_0x10ea16&&(aiCanShootTime=_0x61619a+SHOOT_COOLDOWN)));}}catch(_0x4d6f86){console[_0x503e13(0x2e2)](_0x503e13(0x255),_0x4d6f86,_0x4d6f86[_0x503e13(0x1cc)]);ship&&(ship['targetX']=ship['x']);aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas['width']/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];}}function aiControlCoop(){const _0x438b6d=_0x49ddb3;if(!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x438b6d(0x232))||isPaused||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0){if(ship1)ship1['targetX']=ship1['x'];if(ship2)ship2[_0x438b6d(0x1b5)]=ship2['x'];return;}const _0x3548c3=Date['now'](),_0x2cd3de=gameCanvas['width'],_0x351686=isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP',_0x590f12=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture,_0x985302=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture,_0x393167=_0xb7d207=>{const _0x504800=_0x438b6d,_0x17edae=_0xb7d207==='p1'&&isPlayer1ShowingGameOverMessage||_0xb7d207==='p2'&&isPlayer2ShowingGameOverMessage;return _0x17edae||showReadyMessage||isCsCompletionDelayActive||isShowingIntro&&!(level===0x1&&coopPlayersReadyStartTime>0x0&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x504800(0x232)));};let _0x5bcb2d=!![],_0x8acd8c=!![];if(coopAICaptureDiveAnticipationActive&&_0x3548c3<coopAICaptureDiveAnticipationEndTime){if(!_0x351686)_0x5bcb2d=![];_0x8acd8c=![];}else coopAICaptureDiveAnticipationActive&&(coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);if(_0x590f12&&ship1&&!_0x351686){if(smoothedShip1X===undefined)smoothedShip1X=ship1['x'];const _0x4a0f9a=_0x393167('p1');let {desiredTargetX:_0x17698c,shouldTryShoot:_0x47e9a2,targetEnemyForAI:_0x404e35}=calculateAIDesiredState(ship1,smoothedShip1X,player1IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer1Invincible,isPlayer1ShipCaptured,isPlayer1WaitingForRespawn,_0x3548c3,_0x2cd3de,_0x4a0f9a,'p1');aiShip1TargetEnemy=_0x404e35,smoothedShip1X+=(_0x17698c-smoothedShip1X)*AI_SMOOTHING_FACTOR_MOVE,ship1['targetX']=smoothedShip1X;const _0x20c564=_0x404e35&&_0x404e35[_0x438b6d(0x22c)]===ENEMY3_TYPE&&_0x404e35[_0x438b6d(0x20c)]&&_0x404e35['id']===capturedBossIdWithMessage&&isPlayer2ShipCaptured,_0x481f6b=player1Lives===0x1&&_0x20c564;let _0x3e9d81=_0x47e9a2&&!(isShowingCaptureMessage&&isPlayer1ShipCaptured);!_0x481f6b&&(_0x3e9d81=_0x3e9d81&&_0x5bcb2d);if(_0x3e9d81){if(_0x20c564||_0x3548c3>=aiShip1CanShootTime){fireCoopAIBullet(ship1,player1IsDualShipActive,'player1');if(!_0x20c564)aiShip1CanShootTime=_0x3548c3+SHOOT_COOLDOWN;else aiShip1CanShootTime=_0x3548c3+SHOOT_COOLDOWN/0x2;}}}if(_0x985302&&ship2){if(smoothedShip2X===undefined)smoothedShip2X=ship2['x'];const _0x22b299=_0x393167('p2');let {desiredTargetX:_0x534960,shouldTryShoot:_0x26c1f0,targetEnemyForAI:_0x570cc2}=calculateAIDesiredState(ship2,smoothedShip2X,player2IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer2Invincible,isPlayer2ShipCaptured,isPlayer2WaitingForRespawn,_0x3548c3,_0x2cd3de,_0x22b299,'ai_p2');aiShip2TargetEnemy=_0x570cc2,smoothedShip2X+=(_0x534960-smoothedShip2X)*AI_SMOOTHING_FACTOR_MOVE,ship2['targetX']=smoothedShip2X;const _0x22a517=_0x570cc2&&_0x570cc2[_0x438b6d(0x22c)]===ENEMY3_TYPE&&_0x570cc2[_0x438b6d(0x20c)]&&_0x570cc2['id']===capturedBossIdWithMessage&&isPlayer1ShipCaptured,_0x3ace26=player2Lives===0x1&&_0x22a517;let _0x220680=_0x26c1f0&&!(isShowingCaptureMessage&&isPlayer2ShipCaptured);!_0x3ace26&&(_0x220680=_0x220680&&_0x8acd8c);if(_0x220680){if(_0x22a517||_0x3548c3>=aiShip2CanShootTime){fireCoopAIBullet(ship2,player2IsDualShipActive,isCoopAIDemoActive?'player2':_0x438b6d(0x28b));if(!_0x22a517)aiShip2CanShootTime=_0x3548c3+SHOOT_COOLDOWN;else aiShip2CanShootTime=_0x3548c3+SHOOT_COOLDOWN/0x2;}}}}function fireCoopAIBullet(_0x29808f,_0x25436e,_0x500f50){const _0x508c24=_0x49ddb3;if(!_0x29808f)return![];const _0x52c9d3=Date[_0x508c24(0x28d)]();let _0xe2064b=![];if(_0x500f50===_0x508c24(0x1b0)&&isPlayer1ShowingGameOverMessage)_0xe2064b=!![];if((_0x500f50==='player2'||_0x500f50===_0x508c24(0x28b))&&isPlayer2ShowingGameOverMessage)_0xe2064b=!![];let _0x2e9cf4=isPaused||!isInGameState||gameOverSequenceStartTime>0x0||_0xe2064b;if(_0x2e9cf4)return![];if(_0x500f50==='player1'&&isPlayer1ShipCaptured)return![];if((_0x500f50===_0x508c24(0x22b)||_0x500f50==='ai_p2')&&isPlayer2ShipCaptured)return![];try{const _0x35f1c4=_0x29808f['y'];let _0x37567d=0x0;const _0x2ad96c=_0x500f50;if(_0x25436e){const _0x14c0fe=_0x29808f['x']+_0x29808f[_0x508c24(0x268)]/0x2,_0x1f793e=_0x29808f['x']+DUAL_SHIP_OFFSET_X+_0x29808f[_0x508c24(0x268)]/0x2,_0xec228b=_0x14c0fe-PLAYER_BULLET_WIDTH/0x2,_0x37b85a=_0x1f793e-PLAYER_BULLET_WIDTH/0x2;bullets[_0x508c24(0x283)]({'x':_0xec228b,'y':_0x35f1c4,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x2ad96c}),bullets[_0x508c24(0x283)]({'x':_0x37b85a,'y':_0x35f1c4,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x2ad96c}),_0x37567d=0x2;}else{const _0x70358=_0x29808f['x']+_0x29808f[_0x508c24(0x268)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x508c24(0x283)]({'x':_0x70358,'y':_0x35f1c4,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x2ad96c}),_0x37567d=0x1;}playSound(_0x508c24(0x1e5),![],0.4);if(_0x500f50===_0x508c24(0x1b0))player1ShotsFired+=_0x37567d,player1LastShotTime=_0x52c9d3,aiShip1LastShotTime=_0x52c9d3;else(_0x500f50===_0x508c24(0x22b)||_0x500f50==='ai_p2')&&(player2ShotsFired+=_0x37567d,player2LastShotTime=_0x52c9d3,aiShip2LastShotTime=_0x52c9d3);return!![];}catch(_0x38b4e5){return console[_0x508c24(0x2e2)](_0x508c24(0x2ba)+_0x500f50+':',_0x38b4e5),![];}}function calculateAIDesiredState(_0x312516,_0x5cadf2,_0x2853fb,_0x10cd25,_0x4d1bdf,_0x21dc69,_0x414e32,_0x390415,_0x4a0cc9,_0x4724d3,_0x5d6cb6,_0x2ad958,_0x3ee4f0){const _0x51cbc7=_0x49ddb3;let _0xa80720=_0x5cadf2,_0x5c9015=![],_0x4ab51f=null,_0x35166c=![],_0x37a0b6=![],_0x3282e0=![],_0x3a38ce=![];const _0x130d2a=gameCanvas[_0x51cbc7(0x1ff)],_0x59159b=_0x312516[_0x51cbc7(0x268)]+(_0x2853fb?DUAL_SHIP_OFFSET_X:0x0),_0x546bda=_0x312516['x']+_0x59159b/0x2,_0x56c51a=_0x312516['y'],_0x11774d=_0x3ee4f0==='p1'?player1Lives:_0x3ee4f0===_0x51cbc7(0x28b)||_0x3ee4f0==='p2'?player2Lives:0x0,_0x29fdcd=_0x11774d>0x1&&!_0x2853fb&&!_0x390415;let _0x24e20a=_0x5d6cb6/0x2;const _0x5c279f=isShowingIntro||isShowingCoopPlayersReady,_0x1072aa=isCoopAIDemoActive&&_0x5c279f&&!(isChallengingStage&&isEntrancePhaseActive),_0x2890e6=isCoopAIDemoActive&&(_0x3ee4f0==='p1'&&player1Lives>0x0&&player2Lives<=0x0||(_0x3ee4f0===_0x51cbc7(0x28b)||_0x3ee4f0==='p2')&&player2Lives>0x0&&player1Lives<=0x0);if(_0x1072aa&&_0x2890e6)_0x24e20a=_0x5d6cb6/0x2;else{if(_0x3ee4f0==='p1')_0x24e20a=_0x5d6cb6*0.25+Math[_0x51cbc7(0x26b)](_0x4724d3/(AI_WIGGLE_PERIOD*1.1))*(AI_WIGGLE_AMPLITUDE*0.8);else(_0x3ee4f0===_0x51cbc7(0x28b)||_0x3ee4f0==='p2')&&(_0x24e20a=_0x5d6cb6*0.75+Math[_0x51cbc7(0x24e)](_0x4724d3/(AI_WIGGLE_PERIOD*0.9))*(AI_WIGGLE_AMPLITUDE*0.8));}let _0x66481c=_0x24e20a-_0x59159b/0x2;if(_0x2ad958||_0x390415||_0x4a0cc9||_0x3ee4f0==='p1'&&player1NeedsRespawnAfterCapture||(_0x3ee4f0===_0x51cbc7(0x28b)||_0x3ee4f0==='p2')&&player2NeedsRespawnAfterCapture)return _0x1072aa&&_0x2890e6?_0xa80720=_0x66481c:_0xa80720=_0x66481c,(_0x390415||_0x4a0cc9||_0x3ee4f0==='p1'&&player1NeedsRespawnAfterCapture||(_0x3ee4f0==='ai_p2'||_0x3ee4f0==='p2')&&player2NeedsRespawnAfterCapture)&&(_0xa80720=_0x312516['x']),{'desiredTargetX':_0xa80720,'shouldTryShoot':![],'targetEnemyForAI':null};const _0x427834=_0x3ee4f0==='p1'?_0x51cbc7(0x28b):'p1',_0x1f4b49=_0x427834==='p1'&&isPlayer1ShipCaptured||_0x427834===_0x51cbc7(0x28b)&&isPlayer2ShipCaptured,_0x1cc2f2=_0x427834==='p1'&&isPlayer1ShowingGameOverMessage||_0x427834===_0x51cbc7(0x28b)&&isPlayer2ShowingGameOverMessage;let _0x423626=null,_0x59122a=!![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51cbc7(0x232)){if(_0x1f4b49&&!_0x1cc2f2&&capturedBossIdWithMessage){const _0x3783f1=_0x427834==='p1'?coopPartner1CapturedTime:coopPartner2CapturedTime;_0x3783f1>0x0&&_0x4724d3-_0x3783f1<COOP_AI_SAVE_PARTNER_DELAY_MS&&(_0x59122a=![]),_0x423626=_0x10cd25[_0x51cbc7(0x20f)](_0xea8dfb=>_0xea8dfb['id']===capturedBossIdWithMessage&&_0xea8dfb[_0x51cbc7(0x22c)]===ENEMY3_TYPE&&_0xea8dfb[_0x51cbc7(0x20c)]);}}const _0x53ae57=_0x11774d===0x1&&_0x423626;if(_0x53ae57&&!_0x3a38ce){_0x4ab51f=_0x423626;const _0x4c57c7=_0x423626['x']+_0x423626[_0x51cbc7(0x268)]/0x2;return _0xa80720=_0x4c57c7-_0x59159b/0x2,_0x5c9015=!![],_0x35166c=![],_0x37a0b6=![],_0x3282e0=!![],_0xa80720=Math[_0x51cbc7(0x221)](AI_EDGE_BUFFER,Math['min'](_0x5d6cb6-_0x59159b-AI_EDGE_BUFFER,_0xa80720)),{'desiredTargetX':_0xa80720,'shouldTryShoot':_0x5c9015,'targetEnemyForAI':_0x4ab51f};}if(_0x423626&&!_0x2853fb&&_0x59122a){_0x3282e0=!![],_0x4ab51f=_0x423626;const _0x1ced03=_0x423626['x']+_0x423626[_0x51cbc7(0x268)]/0x2;_0xa80720=_0x1ced03-_0x59159b/0x2,_0x5c9015=!![],_0x35166c=![];if(!_0x414e32){let _0x46d6e0=[];const _0x2b21b8=FINAL_DODGE_LOOKAHEAD*0.4,_0x10389f=FINAL_DODGE_BUFFER_BASE*0.3,_0x5a90a4={'x':Math[_0x51cbc7(0x20a)](_0x546bda,_0x1ced03)-_0x10389f,'y':_0x312516['y']-_0x2b21b8,'width':Math[_0x51cbc7(0x2b3)](_0x546bda-_0x1ced03)+_0x59159b+_0x10389f*0x2,'height':_0x2b21b8+_0x312516['height']};for(const _0x2b0294 of _0x4d1bdf){if(_0x2b0294&&_0x2b0294['y']+_0x2b0294['height']>_0x312516['y']-_0x312516['height']&&_0x2b0294['y']<_0x130d2a){const _0x7e82c3={'x':_0x2b0294['x'],'y':_0x2b0294['y'],'width':_0x2b0294[_0x51cbc7(0x268)],'height':_0x2b0294[_0x51cbc7(0x1ff)]};checkCollision(_0x5a90a4,_0x7e82c3)&&_0x46d6e0[_0x51cbc7(0x283)](_0x2b0294);}}if(_0x46d6e0[_0x51cbc7(0x2a3)]>0x0){_0x35166c=!![];const _0xc2f2d5=_0x5cadf2<_0x5d6cb6/0x2?-0x1:0x1;_0xa80720=_0x5cadf2+_0xc2f2d5*(_0x59159b*0.6),_0x5c9015=![];}}return _0xa80720=Math['max'](AI_EDGE_BUFFER,Math['min'](_0x5d6cb6-_0x59159b-AI_EDGE_BUFFER,_0xa80720)),{'desiredTargetX':_0xa80720,'shouldTryShoot':_0x5c9015,'targetEnemyForAI':_0x4ab51f};}if(!isChallengingStage&&!_0x414e32){let _0x219275=[];const _0x2366b2=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51cbc7(0x232)?1.6:0.8,_0xba58d1=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51cbc7(0x232)?1.7:0.8,_0x43a7fa=FINAL_DODGE_LOOKAHEAD*_0x2366b2*(_0x2853fb?1.25:0x1),_0x4f8d58=FINAL_DODGE_BUFFER_BASE*_0xba58d1*(_0x2853fb?1.35:0x1),_0x2b450f={'x':_0x312516['x']-_0x4f8d58,'y':_0x312516['y']-_0x43a7fa,'width':_0x59159b+_0x4f8d58*0x2,'height':_0x43a7fa+_0x312516['height']};for(const _0x4d0f51 of _0x4d1bdf){if(_0x4d0f51&&_0x4d0f51['y']+_0x4d0f51[_0x51cbc7(0x1ff)]>_0x312516['y']-_0x312516['height']*1.5&&_0x4d0f51['y']<_0x130d2a){const _0x694a6a={'x':_0x4d0f51['x'],'y':_0x4d0f51['y'],'width':_0x4d0f51[_0x51cbc7(0x268)],'height':_0x4d0f51[_0x51cbc7(0x1ff)]};checkCollision(_0x2b450f,_0x694a6a)&&_0x219275[_0x51cbc7(0x283)](_0x4d0f51);}}if(_0x219275[_0x51cbc7(0x2a3)]>0x0){_0x35166c=!![];let _0x34cfdc=_0x5cadf2;const _0x3e939e=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51cbc7(0x232)?0x3:0x2,_0x4b9375=_0x59159b*_0x3e939e*(_0x2853fb?1.3:0x1);let _0x19505b=0x0,_0x56e795=0x0,_0x220a9c=0x0;const _0x3d6012=_0x312516['x']+_0x59159b/0x2;for(const _0x491956 of _0x219275){if(_0x491956['x']<_0x3d6012-_0x59159b*0.5)_0x56e795++;else{if(_0x491956['x']>_0x3d6012+_0x59159b*0.5)_0x220a9c++;else _0x19505b++;}}if(_0x56e795<=_0x220a9c&&_0x56e795<=_0x19505b)_0x34cfdc=_0x5cadf2-_0x4b9375-Math[_0x51cbc7(0x24c)]()*_0x59159b*0.4;else{if(_0x220a9c<=_0x56e795&&_0x220a9c<=_0x19505b)_0x34cfdc=_0x5cadf2+_0x4b9375+Math[_0x51cbc7(0x24c)]()*_0x59159b*0.4;else{if(_0x5cadf2<_0x24e20a)_0x34cfdc=_0x24e20a+_0x4b9375+Math[_0x51cbc7(0x24c)]()*_0x59159b*0.7;else _0x34cfdc=_0x24e20a-_0x4b9375-Math[_0x51cbc7(0x24c)]()*_0x59159b*0.7;}}_0xa80720=_0x34cfdc;}if(!_0x35166c){const _0x4d82ad=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51cbc7(0x232)?0x1:0.75,_0x2601cc=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51cbc7(0x232)?0x1:0.8,_0x512d93=AI_COLLISION_LOOKAHEAD*_0x4d82ad*(_0x2853fb?1.3:0x1),_0x1e828e=AI_COLLISION_BUFFER*_0x2601cc*(_0x2853fb?1.4:0x1);for(const _0x10e643 of _0x10cd25){if(!_0x10e643)continue;if(!_0x59122a&&_0x423626&&_0x10e643['id']===_0x423626['id'])continue;if((_0x10e643[_0x51cbc7(0x2d4)]===_0x51cbc7(0x1a5)||_0x10e643['state']==='diving_to_capture_position')&&_0x10e643['y']+_0x10e643['height']>_0x56c51a-_0x512d93&&_0x10e643['y']<_0x56c51a+_0x312516[_0x51cbc7(0x1ff)]*1.5){const _0x430148={'x':_0x312516['x']-_0x1e828e,'y':_0x312516['y']-_0x512d93,'width':_0x59159b+_0x1e828e*0x2,'height':_0x512d93+_0x312516[_0x51cbc7(0x1ff)]},_0x1bf3c8={'x':_0x10e643['x'],'y':_0x10e643['y'],'width':_0x10e643[_0x51cbc7(0x268)],'height':_0x10e643[_0x51cbc7(0x1ff)]};if(checkCollision(_0x430148,_0x1bf3c8)){_0x35166c=!![],_0x4ab51f=null,_0x5c9015=![];const _0x1eb05d=_0x10e643['x']+_0x10e643['width']/0x2,_0x2b8922=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?2.2:1.9;_0xa80720=_0x5cadf2+(_0x546bda<_0x1eb05d?-0x1:0x1)*(_0x59159b*_0x2b8922*(_0x2853fb?1.35:0x1));break;}}}}}if(!_0x35166c&&_0x29fdcd&&captureBeamActive&&capturingBossId&&!_0x390415){if(aiPlayerActivelySeekingCaptureById===null||aiPlayerActivelySeekingCaptureById===_0x3ee4f0){const _0x1d22a3=_0x10cd25['find'](_0x976ac3=>_0x976ac3['id']===capturingBossId);if(_0x1d22a3&&_0x1d22a3[_0x51cbc7(0x2d4)]===_0x51cbc7(0x21e)){aiPlayerActivelySeekingCaptureById===null&&(aiPlayerActivelySeekingCaptureById=_0x3ee4f0);if(aiPlayerActivelySeekingCaptureById===_0x3ee4f0){if(_0x4724d3-(_0x1d22a3[_0x51cbc7(0x2c7)]||0x0)>=AI_CAPTURE_BEAM_APPROACH_DELAY_MS){_0x3a38ce=!![];const _0x350e20=_0x1d22a3['x']+(_0x1d22a3[_0x51cbc7(0x22c)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH)/0x2;_0xa80720=_0x350e20-_0x59159b/0x2,_0x5c9015=![],_0x4ab51f=null;}else _0xa80720=_0x66481c,_0x5c9015=![],_0x4ab51f=null;}}else aiPlayerActivelySeekingCaptureById===_0x3ee4f0&&(aiPlayerActivelySeekingCaptureById=null);}}else aiPlayerActivelySeekingCaptureById===_0x3ee4f0&&!(_0x29fdcd&&captureBeamActive&&capturingBossId&&!_0x390415)&&(aiPlayerActivelySeekingCaptureById=null);if(!_0x35166c&&!_0x3a38ce&&!_0x2853fb){const _0x3b9904=_0x21dc69['find'](_0x1fd408=>_0x1fd408[_0x51cbc7(0x275)]===_0x3ee4f0&&!_0x1fd408[_0x51cbc7(0x292)]);_0x3b9904&&(_0x37a0b6=!![],_0xa80720=_0x3b9904['x']+_0x3b9904['width']/0x2-_0x59159b/0x2,_0x5c9015=![],_0x4ab51f=null);}if(!_0x35166c&&!_0x3a38ce&&!_0x37a0b6&&!_0x3282e0){let _0x28e47b=-Infinity,_0x3a3faa=![],_0xf70371=null;for(const _0x5b1498 of _0x10cd25){if(!_0x5b1498)continue;if(!_0x59122a&&_0x423626&&_0x5b1498['id']===_0x423626['id'])continue;if(_0x3a38ce&&_0x5b1498['id']===capturingBossId&&aiPlayerActivelySeekingCaptureById===_0x3ee4f0)continue;let _0x549b37=![];if(_0x5b1498[_0x51cbc7(0x22c)]===ENEMY3_TYPE&&_0x5b1498['hasCapturedShip']&&_0x11774d<=0x1){const _0x4e09cd=(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51cbc7(0x232))&&_0x5b1498['id']===capturedBossIdWithMessage&&_0x1f4b49;!_0x4e09cd&&(_0x549b37=!![]);}let _0x38d818=0x0;const _0xf23942=_0x5b1498['x']+_0x5b1498[_0x51cbc7(0x268)]/0x2,_0x4b4943=_0xf23942-_0x546bda,_0x440c2e=_0x56c51a-(_0x5b1498['y']+_0x5b1498[_0x51cbc7(0x1ff)]);if(_0x440c2e<0x0&&_0x5b1498[_0x51cbc7(0x2d4)]!==_0x51cbc7(0x1a5)&&_0x5b1498[_0x51cbc7(0x2d4)]!==_0x51cbc7(0x2cb)&&_0x5b1498[_0x51cbc7(0x2d4)]!==_0x51cbc7(0x1a9))continue;let _0x4a9345=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51cbc7(0x232)){if(_0x3ee4f0==='p1'&&_0xf23942<_0x5d6cb6/0x2)_0x4a9345=0x1388;else{if((_0x3ee4f0==='ai_p2'||_0x3ee4f0==='p2')&&_0xf23942>=_0x5d6cb6/0x2)_0x4a9345=0x1388;}}_0x38d818=_0x4a9345+(_0x130d2a-_0x5b1498['y'])*0x2-Math[_0x51cbc7(0x2b3)](_0x4b4943)*0x3-_0x440c2e;if(_0x5b1498[_0x51cbc7(0x2d4)]===_0x51cbc7(0x1a5)||_0x5b1498[_0x51cbc7(0x2d4)]===_0x51cbc7(0x2cb))_0x38d818+=0xbb8;if(_0x5b1498['type']===ENEMY3_TYPE&&!_0x5b1498[_0x51cbc7(0x259)])_0x38d818+=0x7d0;if(_0x5b1498['type']===ENEMY3_TYPE&&_0x5b1498['isDamaged'])_0x38d818+=0xfa0;_0x5b1498[_0x51cbc7(0x22c)]===ENEMY3_TYPE&&_0x5b1498[_0x51cbc7(0x20c)]&&(!_0x549b37?_0x38d818+=0x1388:_0x38d818-=0x2710);if(_0x38d818>_0x28e47b){_0x28e47b=_0x38d818,_0xf70371=_0x5b1498;let _0x5b9904=![];if(_0xf70371[_0x51cbc7(0x22c)]===ENEMY3_TYPE&&!_0xf70371[_0x51cbc7(0x20c)]&&!isFullGridWave){if(_0x29fdcd&&!captureAttemptMadeThisLevel&&(_0xf70371[_0x51cbc7(0x2d4)]===_0x51cbc7(0x1f8)||_0xf70371[_0x51cbc7(0x2d4)]==='preparing_capture'||_0xf70371[_0x51cbc7(0x2d4)]===_0x51cbc7(0x2cb)||_0xf70371['state']===_0x51cbc7(0x21e))){if(_0x3a38ce&&_0xf70371['id']===capturingBossId&&aiPlayerActivelySeekingCaptureById===_0x3ee4f0)_0x5b9904=!![];else!_0x3a38ce&&aiPlayerActivelySeekingCaptureById!==_0x3ee4f0&&(_0x5b9904=!![]);}if(_0x2853fb){const _0x125bcb=_0x3ee4f0==='p1'?_0x51cbc7(0x28b):'p1';let _0x4246ce=![];_0x125bcb==='p1'?ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture&&!player1IsDualShipActive&&(_0x4246ce=!![]):ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture&&!player2IsDualShipActive&&(_0x4246ce=!![]),_0x4246ce&&(_0x5b9904=!![]);}}if(_0x549b37&&_0xf70371===_0x5b1498)Math[_0x51cbc7(0x2b3)](_0x546bda-(_0xf70371['x']+_0xf70371['width']/0x2))<_0x59159b*1.1?_0x3a3faa=!![]:_0x3a3faa=![];else{if(_0x5b9904)_0x3a3faa=![];else Math[_0x51cbc7(0x2b3)](_0x546bda-(_0xf70371['x']+_0xf70371[_0x51cbc7(0x268)]/0x2))<_0x59159b*0.9?_0x3a3faa=!![]:_0x3a3faa=![];}}}_0x4ab51f=_0xf70371,_0x5c9015=_0x3a3faa;if(_0x4ab51f){let _0x85f6f9=![];if(_0x4ab51f['type']===ENEMY3_TYPE&&_0x4ab51f['hasCapturedShip']&&_0x11774d<=0x1){const _0x2f6faa=(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51cbc7(0x232))&&_0x4ab51f['id']===capturedBossIdWithMessage&&_0x1f4b49;!_0x2f6faa&&(_0x85f6f9=!![]);}if(_0x85f6f9)_0xa80720=_0x66481c;else{const _0x17239a=_0x4ab51f['x']+_0x4ab51f[_0x51cbc7(0x268)]/0x2;_0xa80720=_0x17239a-_0x59159b/0x2;}}else _0xa80720=_0x66481c,_0x5c9015=![];}return _0x3a38ce&&aiPlayerActivelySeekingCaptureById===_0x3ee4f0&&(_0x5c9015=![],_0x4ab51f=null),_0xa80720=Math[_0x51cbc7(0x221)](AI_EDGE_BUFFER,Math[_0x51cbc7(0x20a)](_0x5d6cb6-_0x59159b-AI_EDGE_BUFFER,_0xa80720)),{'desiredTargetX':_0xa80720,'shouldTryShoot':_0x5c9015,'targetEnemyForAI':_0x4ab51f};}function findAndDetachEnemy(){const _0x26f363=_0x49ddb3;try{let _0x4721f7=![];isTwoPlayerMode&&selectedGameMode===_0x26f363(0x233)?_0x4721f7=isPlayer1ShipCaptured||isPlayer2ShipCaptured:_0x4721f7=isShipCaptured;if(!isFullGridWave&&_0x4721f7){const _0x22b154=enemies[_0x26f363(0x20f)](_0x3d14bc=>_0x3d14bc&&_0x3d14bc[_0x26f363(0x22c)]===ENEMY3_TYPE&&_0x3d14bc[_0x26f363(0x20c)]&&_0x3d14bc[_0x26f363(0x2d4)]===_0x26f363(0x1f8));if(_0x22b154){_0x22b154[_0x26f363(0x1ce)]=!![],_0x22b154[_0x26f363(0x223)]=_0x26f363(0x1ea);const _0x1d9b79=new Set([_0x22b154['id']]);return resetJustReturnedFlags(_0x1d9b79),[_0x22b154];}}if(isEntrancePhaseActive)return null;let _0x30da7b=enemies[_0x26f363(0x1d5)](_0x1fbc5d=>_0x1fbc5d&&_0x1fbc5d[_0x26f363(0x2d4)]===_0x26f363(0x1f8)&&!_0x1fbc5d[_0x26f363(0x1ce)]);if(_0x30da7b['length']===0x0){_0x30da7b=enemies[_0x26f363(0x1d5)](_0x36c6aa=>_0x36c6aa&&_0x36c6aa[_0x26f363(0x2d4)]===_0x26f363(0x1f8));if(_0x30da7b[_0x26f363(0x2a3)]===0x0)return null;}if(_0x30da7b[_0x26f363(0x2a3)]===0x0)return null;_0x30da7b['sort']((_0x3d7eb2,_0x461117)=>(_0x461117[_0x26f363(0x1e1)]||0x0)-(_0x3d7eb2[_0x26f363(0x1e1)]||0x0));const _0x3fd1aa=_0x30da7b[_0x26f363(0x2a3)]<=0x3;let _0x449bc1=[];const _0x7c4aa8=_0x26f363(0x1ea);gridJustCompleted&&(gridJustCompleted=![]);let _0x375539=![];if(level>0x1&&!_0x3fd1aa&&_0x30da7b[_0x26f363(0x2a3)]>=0x3){const _0x4f3dbe=_0x30da7b[_0x26f363(0x1d5)](_0xbdb236=>_0xbdb236[_0x26f363(0x22c)]===ENEMY3_TYPE&&!_0xbdb236[_0x26f363(0x20c)]);for(const _0x5a27d5 of _0x4f3dbe){const _0x18e08c=_0x30da7b[_0x26f363(0x20f)](_0x61646b=>_0x61646b[_0x26f363(0x22c)]===ENEMY2_TYPE&&_0x61646b[_0x26f363(0x1e1)]===_0x5a27d5[_0x26f363(0x1e1)]&&_0x61646b[_0x26f363(0x2b5)]===_0x5a27d5[_0x26f363(0x2b5)]-0x1),_0x39c0ac=_0x30da7b['find'](_0x3835cb=>_0x3835cb['type']===ENEMY2_TYPE&&_0x3835cb[_0x26f363(0x1e1)]===_0x5a27d5[_0x26f363(0x1e1)]&&_0x3835cb['gridCol']===_0x5a27d5[_0x26f363(0x2b5)]+0x1);if(_0x18e08c&&_0x39c0ac){_0x449bc1=[_0x5a27d5,_0x18e08c,_0x39c0ac],_0x375539=!![];break;}}}if(!_0x375539&&!_0x3fd1aa){const _0x5173e4=_0x30da7b['filter'](_0x5aaade=>_0x5aaade[_0x26f363(0x22c)]===ENEMY1_TYPE),_0x4dc3f2=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x5173e4[_0x26f363(0x2a3)]>=0x2&&Math['random']()<_0x4dc3f2){const _0x4a4ea1=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x4b9dcb=_0x5173e4[_0x26f363(0x2a3)]>=0x3&&Math[_0x26f363(0x24c)]()<_0x4a4ea1?0x3:0x2;let _0x453c7f=![];_0x5173e4[_0x26f363(0x2a5)](()=>Math['random']()-0.5);for(let _0x4b1859=0x0;_0x4b1859<_0x5173e4[_0x26f363(0x2a3)];_0x4b1859++){const _0x582f34=_0x5173e4[_0x4b1859];let _0x4bf6a3=[_0x582f34];const _0x17a07b=_0x5173e4[_0x26f363(0x1d5)](_0x17eba5=>_0x17eba5['id']!==_0x582f34['id']&&_0x17eba5[_0x26f363(0x1e1)]===_0x582f34[_0x26f363(0x1e1)]);_0x17a07b[_0x26f363(0x2a5)]((_0x175d01,_0x41ab40)=>Math['abs'](_0x175d01[_0x26f363(0x2b5)]-_0x582f34['gridCol'])-Math[_0x26f363(0x2b3)](_0x41ab40[_0x26f363(0x2b5)]-_0x582f34[_0x26f363(0x2b5)]));for(let _0x12a93e=0x0;_0x12a93e<_0x17a07b[_0x26f363(0x2a3)]&&_0x4bf6a3[_0x26f363(0x2a3)]<_0x4b9dcb;_0x12a93e++){_0x4bf6a3[_0x26f363(0x283)](_0x17a07b[_0x12a93e]);}if(_0x4bf6a3[_0x26f363(0x2a3)]===_0x4b9dcb){_0x449bc1=_0x4bf6a3,_0x375539=!![],_0x453c7f=!![];break;}}!_0x453c7f&&_0x5173e4['length']>=_0x4b9dcb&&(_0x449bc1=_0x5173e4[_0x26f363(0x2a6)](0x0,_0x4b9dcb),_0x375539=!![]);}}if(!_0x375539&&!_0x3fd1aa){const _0x1dfa0a=_0x30da7b[_0x26f363(0x1d5)](_0x389d67=>_0x389d67['type']===ENEMY2_TYPE),_0x446412=0.2;if(_0x1dfa0a[_0x26f363(0x2a3)]>=0x2&&Math[_0x26f363(0x24c)]()<_0x446412){const _0x59e172=0x2;let _0x4bc9fc=![];_0x1dfa0a[_0x26f363(0x2a5)](()=>Math[_0x26f363(0x24c)]()-0.5);for(let _0x335b71=0x0;_0x335b71<_0x1dfa0a[_0x26f363(0x2a3)];_0x335b71++){const _0xbc18f5=_0x1dfa0a[_0x335b71];let _0x44327e=[_0xbc18f5];const _0xae44b6=_0x1dfa0a['filter'](_0x343bd9=>_0x343bd9['id']!==_0xbc18f5['id']&&_0x343bd9[_0x26f363(0x1e1)]===_0xbc18f5['gridRow']);_0xae44b6['sort']((_0x3dd5f1,_0x4c6964)=>Math['abs'](_0x3dd5f1[_0x26f363(0x2b5)]-_0xbc18f5[_0x26f363(0x2b5)])-Math[_0x26f363(0x2b3)](_0x4c6964[_0x26f363(0x2b5)]-_0xbc18f5[_0x26f363(0x2b5)]));for(let _0x1853f1=0x0;_0x1853f1<_0xae44b6['length']&&_0x44327e['length']<_0x59e172;_0x1853f1++){_0x44327e[_0x26f363(0x283)](_0xae44b6[_0x1853f1]);}if(_0x44327e[_0x26f363(0x2a3)]===_0x59e172){_0x449bc1=_0x44327e,_0x375539=!![],_0x4bc9fc=!![];break;}}!_0x4bc9fc&&_0x1dfa0a[_0x26f363(0x2a3)]>=_0x59e172&&(_0x449bc1=_0x1dfa0a[_0x26f363(0x2a6)](0x0,_0x59e172),_0x375539=!![]);}}if(!_0x375539&&_0x30da7b[_0x26f363(0x2a3)]>0x0){const _0x162268=_0x30da7b[0x0];_0x449bc1['push'](_0x162268);if(_0x30da7b[_0x26f363(0x2a3)]>0x1&&!_0x3fd1aa&&Math[_0x26f363(0x24c)]()<0.2){const _0x2b4411=_0x30da7b[_0x26f363(0x20f)](_0x4a6a3c=>_0x4a6a3c['id']!==_0x162268['id']&&_0x4a6a3c[_0x26f363(0x1e1)]===_0x162268[_0x26f363(0x1e1)]&&_0x4a6a3c[_0x26f363(0x2b5)]===_0x162268[_0x26f363(0x2b5)]-0x1),_0x423344=_0x30da7b[_0x26f363(0x20f)](_0x147240=>_0x147240['id']!==_0x162268['id']&&_0x147240[_0x26f363(0x1e1)]===_0x162268[_0x26f363(0x1e1)]&&_0x147240[_0x26f363(0x2b5)]===_0x162268['gridCol']+0x1),_0x8ba380=_0x2b4411||_0x423344;if(_0x8ba380){const _0x45210e=_0x162268[_0x26f363(0x22c)]===ENEMY3_TYPE&&_0x8ba380[_0x26f363(0x22c)]===ENEMY3_TYPE;!_0x45210e&&_0x449bc1[_0x26f363(0x283)](_0x8ba380);}}_0x375539=!![];}if(_0x449bc1[_0x26f363(0x2a3)]>0x0){_0x449bc1=_0x449bc1[_0x26f363(0x1d5)](_0x3ae949=>_0x3ae949);if(_0x449bc1[_0x26f363(0x2a3)]===0x0)return null;_0x449bc1[_0x26f363(0x201)](_0x14c6a6=>{const _0x170bc6=_0x26f363;_0x14c6a6&&(_0x14c6a6[_0x170bc6(0x1ce)]=!![],_0x14c6a6[_0x170bc6(0x223)]=_0x7c4aa8);});const _0x327627=new Set(_0x449bc1[_0x26f363(0x1a4)](_0x234831=>_0x234831['id']));return resetJustReturnedFlags(_0x327627),_0x449bc1;}return null;}catch(_0x1b1fd3){return console[_0x26f363(0x2e2)](_0x26f363(0x257),_0x1b1fd3),null;}}function triggerImmediateCaptureDive(){const _0x6c6e6f=_0x49ddb3;try{let _0x43084a=![],_0x402481=null;if(isTwoPlayerMode&&selectedGameMode===_0x6c6e6f(0x233)){const _0x53a88f=ship1&&player1Lives>0x1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x424067=ship2&&player2Lives>0x1&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if((_0x53a88f||_0x424067)&&!captureAttemptMadeThisLevel){_0x43084a=!![];if(_0x53a88f&&_0x424067)_0x402481=Math[_0x6c6e6f(0x24c)]()<0.5?ship1:ship2;else{if(_0x53a88f)_0x402481=ship1;else _0x424067&&(_0x402481=ship2);}}}else playerLives>0x1&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!captureAttemptMadeThisLevel&&(_0x43084a=!![],_0x402481=ship);if(isChallengingStage||!_0x43084a||!_0x402481)return;const _0xce5eef=enemies[_0x6c6e6f(0x1d5)](_0x552d98=>_0x552d98&&_0x552d98['state']==='in_grid'&&_0x552d98[_0x6c6e6f(0x22c)]===ENEMY3_TYPE&&!_0x552d98[_0x6c6e6f(0x20c)]&&!_0x552d98[_0x6c6e6f(0x2b9)]);if(_0xce5eef[_0x6c6e6f(0x2a3)]>0x0){const _0x34c425=_0xce5eef[Math[_0x6c6e6f(0x2d7)](Math[_0x6c6e6f(0x24c)]()*_0xce5eef[_0x6c6e6f(0x2a3)])],_0x3d3ca3=Date['now']();_0x34c425[_0x6c6e6f(0x2b9)]=!![],_0x34c425[_0x6c6e6f(0x1ce)]=!![];const _0x5e8379=new Set([_0x34c425['id']]);resetJustReturnedFlags(_0x5e8379);const _0x1f8c3e=_0x402481['x']+_0x402481['width']/0x2,_0x1776ac=_0x1f8c3e<gameCanvas[_0x6c6e6f(0x268)]/0x2?_0x6c6e6f(0x2be):_0x6c6e6f(0x226),_0x2b5305=_0x1776ac===_0x6c6e6f(0x226)?gameCanvas[_0x6c6e6f(0x268)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:gameCanvas[_0x6c6e6f(0x268)]*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH,_0x501b98=gameCanvas[_0x6c6e6f(0x1ff)]*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR;_0x34c425[_0x6c6e6f(0x2d4)]='preparing_capture',_0x34c425[_0x6c6e6f(0x1b5)]=_0x2b5305,_0x34c425[_0x6c6e6f(0x1e6)]=_0x501b98,_0x34c425[_0x6c6e6f(0x25e)]=_0x3d3ca3,playSound('bossGalagaDiveSound',![],0.2);const _0x55a652=_0x34c425['id'];_0x34c425['capturePrepareTimeout']=setTimeout(()=>{const _0x4f415d=_0x6c6e6f,_0x347763=enemies['find'](_0x3f9da2=>_0x3f9da2?.['id']===_0x55a652);_0x347763&&_0x347763[_0x4f415d(0x2d4)]===_0x4f415d(0x1c9)&&(_0x347763[_0x4f415d(0x2d4)]=_0x4f415d(0x2cb));if(_0x347763)_0x347763[_0x4f415d(0x23e)]=null;const _0x168804=enemySpawnTimeouts[_0x4f415d(0x295)](_0x3f99a=>_0x3f99a===_0x34c425[_0x4f415d(0x23e)]);if(_0x168804>-0x1)enemySpawnTimeouts[_0x4f415d(0x1bc)](_0x168804,0x1);},0x12c),enemySpawnTimeouts[_0x6c6e6f(0x283)](_0x34c425['capturePrepareTimeout']);}}catch(_0x2fc609){console[_0x6c6e6f(0x2e2)](_0x6c6e6f(0x280),_0x2fc609);}}function resetJustReturnedFlags(_0xf1d584){enemies['forEach'](_0x55178a=>{const _0x1b7d24=_0x3195;let _0x2c65f1=![];if(_0xf1d584 instanceof Set)_0x2c65f1=_0xf1d584[_0x1b7d24(0x2b1)](_0x55178a['id']);else typeof _0xf1d584==='string'&&(_0x2c65f1=_0x55178a['id']===_0xf1d584);_0x55178a&&_0x55178a[_0x1b7d24(0x2d4)]===_0x1b7d24(0x1f8)&&_0x55178a['justReturned']&&!_0x2c65f1&&(_0x55178a['justReturned']=![]);});}function updateFloatingScores(){const _0x4ee8b1=_0x49ddb3;if(isPaused)return;try{const _0x619f55=Date[_0x4ee8b1(0x28d)]();floatingScores=floatingScores['filter'](_0x26eb0a=>_0x619f55-_0x26eb0a[_0x4ee8b1(0x2e3)]<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x36b039){console[_0x4ee8b1(0x2e2)](_0x4ee8b1(0x2b7),_0x36b039),floatingScores=[];}}function updateExplosions(){const _0xce5b54=_0x49ddb3;if(isPaused)return;try{const _0x528609=Date['now']();for(let _0x3b8d3a=explosions[_0xce5b54(0x2a3)]-0x1;_0x3b8d3a>=0x0;_0x3b8d3a--){const _0x403963=explosions[_0x3b8d3a],_0xb1110f=_0x528609-_0x403963[_0xce5b54(0x2e3)];if(_0xb1110f>_0x403963[_0xce5b54(0x28c)]){explosions[_0xce5b54(0x1bc)](_0x3b8d3a,0x1);continue;}_0x403963[_0xce5b54(0x27d)][_0xce5b54(0x201)](_0x34106f=>{const _0x5efa2e=_0xce5b54;_0x34106f['x']+=_0x34106f['vx'],_0x34106f['y']+=_0x34106f['vy'],_0x34106f[_0x5efa2e(0x1b9)]=Math[_0x5efa2e(0x221)](0x0,0x1-_0xb1110f/_0x403963['duration']*EXPLOSION_FADE_SPEED);});}}catch(_0x5b13fc){console[_0xce5b54(0x2e2)](_0xce5b54(0x230),_0x5b13fc),explosions=[];}}function moveEntities(_0x267811=null,_0x1e6cbc=null){const _0x311bc5=_0x49ddb3;if(isPaused)return;try{const _0x43b8b6=Date[_0x311bc5(0x28d)](),_0x13f6f5=gameCanvas?gameCanvas[_0x311bc5(0x1ff)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(gameCanvas&&!isTouchActiveGame){if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x311bc5(0x233)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x1d9611=ship1[_0x311bc5(0x268)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(leftPressed)ship1['x']-=ship1[_0x311bc5(0x262)];if(rightPressed)ship1['x']+=ship1['speed'];ship1['x']=Math[_0x311bc5(0x221)](0x0,Math[_0x311bc5(0x20a)](gameCanvas[_0x311bc5(0x268)]-_0x1d9611,ship1['x'])),ship1['targetX']=ship1['x'];}if(!isPlayerTwoAI&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x219f8f=ship2[_0x311bc5(0x268)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(p2LeftPressed)ship2['x']-=ship2[_0x311bc5(0x262)];if(p2RightPressed)ship2['x']+=ship2[_0x311bc5(0x262)];ship2['x']=Math[_0x311bc5(0x221)](0x0,Math[_0x311bc5(0x20a)](gameCanvas[_0x311bc5(0x268)]-_0x219f8f,ship2['x'])),ship2['targetX']=ship2['x'];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1){const _0x2321e0=ship[_0x311bc5(0x268)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x47216e=![],_0x28fee4=![];if(isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x311bc5(0x24b)&&currentPlayer===0x1&&isShowingIntro){if(_0x267811!==null)_0x47216e=_0x267811;if(_0x1e6cbc!==null)_0x28fee4=_0x1e6cbc;}if(_0x47216e||leftPressed)ship['x']-=ship['speed'];if(_0x28fee4||rightPressed)ship['x']+=ship[_0x311bc5(0x262)];ship['x']=Math[_0x311bc5(0x221)](0x0,Math[_0x311bc5(0x20a)](gameCanvas[_0x311bc5(0x268)]-_0x2321e0,ship['x'])),ship[_0x311bc5(0x1b5)]=ship['x'];}}}}}if(!isManualControl||isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x311bc5(0x232)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x311bc5(0x232)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x54090a=ship1[_0x311bc5(0x1b5)]-ship1['x'];let _0x112eed=ship1['speed']*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x311bc5(0x2b3)](_0x54090a)>AI_MOVEMENT_DEADZONE)ship1['x']+=Math[_0x311bc5(0x27e)](_0x54090a)*Math[_0x311bc5(0x20a)](Math[_0x311bc5(0x2b3)](_0x54090a),_0x112eed);const _0x2237d2=ship1[_0x311bc5(0x268)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship1['x']=Math['max'](0x0,Math[_0x311bc5(0x20a)](gameCanvas[_0x311bc5(0x268)]-_0x2237d2,ship1['x']));}if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x2483ec=ship2['targetX']-ship2['x'];let _0x3ba0cb=ship2[_0x311bc5(0x262)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x311bc5(0x2b3)](_0x2483ec)>AI_MOVEMENT_DEADZONE)ship2['x']+=Math[_0x311bc5(0x27e)](_0x2483ec)*Math[_0x311bc5(0x20a)](Math[_0x311bc5(0x2b3)](_0x2483ec),_0x3ba0cb);const _0x485311=ship2[_0x311bc5(0x268)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship2['x']=Math['max'](0x0,Math['min'](gameCanvas[_0x311bc5(0x268)]-_0x485311,ship2['x']));}}else{if(ship){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){const _0x256e88=ship[_0x311bc5(0x1b5)]-ship['x'];let _0x215a24=ship[_0x311bc5(0x262)]*AI_POSITION_MOVE_SPEED_FACTOR;isPlayerTwoAI&&selectedGameMode===_0x311bc5(0x1ea)&&currentPlayer===0x2&&(_0x215a24=ship[_0x311bc5(0x262)]*(AI_POSITION_MOVE_SPEED_FACTOR*1.15));Math[_0x311bc5(0x2b3)](_0x256e88)>AI_MOVEMENT_DEADZONE&&(ship['x']+=Math[_0x311bc5(0x27e)](_0x256e88)*Math[_0x311bc5(0x20a)](Math[_0x311bc5(0x2b3)](_0x256e88),_0x215a24));const _0x490b42=ship[_0x311bc5(0x268)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship['x']=Math[_0x311bc5(0x221)](0x0,Math[_0x311bc5(0x20a)](gameCanvas[_0x311bc5(0x268)]-_0x490b42,ship['x']));}}}}if(isTwoPlayerMode&&selectedGameMode==='coop'){if(isPlayer1WaitingForRespawn&&_0x43b8b6>=player1RespawnTime)isPlayer1WaitingForRespawn=![];if(isPlayer1Invincible&&_0x43b8b6>=player1InvincibilityEndTime)isPlayer1Invincible=![];if(isPlayer2WaitingForRespawn&&_0x43b8b6>=player2RespawnTime)isPlayer2WaitingForRespawn=![];if(isPlayer2Invincible&&_0x43b8b6>=player2InvincibilityEndTime)isPlayer2Invincible=![];}else{if(isWaitingForRespawn&&_0x43b8b6>=respawnTime)isWaitingForRespawn=![];if(isInvincible&&_0x43b8b6>=invincibilityEndTime)isInvincible=![];}for(let _0x5bb96d=bullets[_0x311bc5(0x2a3)]-0x1;_0x5bb96d>=0x0;_0x5bb96d--){const _0x211b9e=bullets[_0x5bb96d];if(!_0x211b9e){bullets[_0x311bc5(0x1bc)](_0x5bb96d,0x1);continue;}_0x211b9e['y']-=_0x211b9e['speed'];if(_0x211b9e['y']+PLAYER_BULLET_HEIGHT<0x0){bullets[_0x311bc5(0x1bc)](_0x5bb96d,0x1);continue;}for(let _0x565605=enemies[_0x311bc5(0x2a3)]-0x1;_0x565605>=0x0;_0x565605--){const _0xbb2cfe=enemies[_0x565605];if(!_0xbb2cfe){enemies['splice'](_0x565605,0x1);continue;}const _0x46f203={'x':_0xbb2cfe['x'],'y':_0xbb2cfe['y'],'width':_0xbb2cfe[_0x311bc5(0x22c)]===ENEMY3_TYPE?BOSS_WIDTH:_0xbb2cfe[_0x311bc5(0x22c)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,'height':_0xbb2cfe[_0x311bc5(0x22c)]===ENEMY3_TYPE?BOSS_HEIGHT:_0xbb2cfe[_0x311bc5(0x22c)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT},_0x3a0d62={'x':_0x211b9e['x'],'y':_0x211b9e['y'],'width':_0x211b9e[_0x311bc5(0x268)],'height':_0x211b9e[_0x311bc5(0x1ff)]};if(checkCollision(_0x3a0d62,_0x46f203)){bullets[_0x311bc5(0x1bc)](_0x5bb96d,0x1);const _0x2d775d=handleEnemyHit(_0xbb2cfe,_0x211b9e['playerId']);if(_0x2d775d['destroyed'])enemies[_0x311bc5(0x1bc)](_0x565605,0x1);break;}}}for(let _0xf2d7c5=enemyBullets[_0x311bc5(0x2a3)]-0x1;_0xf2d7c5>=0x0;_0xf2d7c5--){const _0x5b2eac=enemyBullets[_0xf2d7c5];if(!_0x5b2eac){enemyBullets['splice'](_0xf2d7c5,0x1);continue;}_0x5b2eac['x']+=_0x5b2eac['vx'],_0x5b2eac['y']+=_0x5b2eac['vy'],(_0x5b2eac['y']>gameCanvas[_0x311bc5(0x1ff)]||_0x5b2eac['y']<-ENEMY_BULLET_HEIGHT||_0x5b2eac['x']<-ENEMY_BULLET_WIDTH||_0x5b2eac['x']>gameCanvas[_0x311bc5(0x268)])&&enemyBullets[_0x311bc5(0x1bc)](_0xf2d7c5,0x1);}const _0x55ba12=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x2a8dbc=0x2;for(let _0xf0cb55=fallingShips[_0x311bc5(0x2a3)]-0x1;_0xf0cb55>=0x0;_0xf0cb55--){const _0x39065b=fallingShips[_0xf0cb55];if(!_0x39065b){fallingShips[_0x311bc5(0x1bc)](_0xf0cb55,0x1);continue;}let _0x5b3156=![];if(!_0x39065b[_0x311bc5(0x292)]){_0x39065b['y']+=FALLING_SHIP_SPEED;if(_0x39065b['y']>=_0x55ba12){_0x39065b['y']=_0x55ba12,_0x39065b[_0x311bc5(0x292)]=!![],_0x39065b['landedTime']=_0x43b8b6;!_0x39065b[_0x311bc5(0x1e9)]&&(_0x39065b['rotation']=0x0,_0x39065b[_0x311bc5(0x1e9)]=!![]);let _0x1835d4=null,_0x13be67=()=>{},_0x21df75=![],_0x5be147=![],_0x575f3b=![],_0x3f46c9=null;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x311bc5(0x232)){if(_0x39065b['targetPlayerId']===_0x311bc5(0x1b0)&&ship1&&player1Lives>0x0)_0x1835d4=ship1,_0x21df75=player1IsDualShipActive,_0x13be67=()=>{player1IsDualShipActive=!![];},_0x575f3b=!![],_0x3f46c9=_0x311bc5(0x1b0);else(_0x39065b[_0x311bc5(0x275)]==='player2'||_0x39065b['targetPlayerId']===_0x311bc5(0x28b))&&ship2&&player2Lives>0x0&&(_0x1835d4=ship2,_0x21df75=player2IsDualShipActive,_0x13be67=()=>{player2IsDualShipActive=!![];},_0x575f3b=!![],_0x3f46c9=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x311bc5(0x232)?_0x311bc5(0x28b):_0x311bc5(0x22b));}else{if(isTwoPlayerMode&&selectedGameMode===_0x311bc5(0x233)){if(_0x39065b[_0x311bc5(0x275)]===_0x311bc5(0x1b0)&&ship1&&player1Lives>0x0)_0x1835d4=ship1,_0x21df75=player1IsDualShipActive,_0x5be147=isPlayer1ShipCaptured,_0x13be67=()=>{player1IsDualShipActive=!![],isPlayer1ShipCaptured=![];},_0x575f3b=!![],_0x3f46c9='player1';else _0x39065b[_0x311bc5(0x275)]===_0x311bc5(0x22b)&&ship2&&player2Lives>0x0&&(_0x1835d4=ship2,_0x21df75=player2IsDualShipActive,_0x5be147=isPlayer2ShipCaptured,_0x13be67=()=>{player2IsDualShipActive=!![],isPlayer2ShipCaptured=![];},_0x575f3b=!![],_0x3f46c9=_0x311bc5(0x22b));}else ship&&playerLives>0x0&&(_0x1835d4=ship,_0x21df75=isDualShipActive,_0x5be147=isShipCaptured,_0x13be67=()=>{isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}isShipCaptured=![];},_0x575f3b=!![],_0x3f46c9=isTwoPlayerMode&&selectedGameMode===_0x311bc5(0x1ea)?String(currentPlayer):_0x311bc5(0x1b0));}if(_0x575f3b&&!_0x21df75){_0x13be67(),playSound(_0x311bc5(0x243),![],0.4);if(_0x5be147&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x311bc5(0x232))){if(_0x3f46c9==='player1'&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x43b8b6+INVINCIBILITY_DURATION_MS;else{if(_0x3f46c9===_0x311bc5(0x22b)&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x43b8b6+INVINCIBILITY_DURATION_MS;else ship&&(isInvincible=!![],invincibilityEndTime=_0x43b8b6+INVINCIBILITY_DURATION_MS);}}fallingShips[_0x311bc5(0x1bc)](_0xf0cb55,0x1),_0x5b3156=!![];continue;}else{if(_0x575f3b&&_0x21df75){fallingShips[_0x311bc5(0x1bc)](_0xf0cb55,0x1),_0x5b3156=!![];continue;}else{fallingShips[_0x311bc5(0x1bc)](_0xf0cb55,0x1),_0x5b3156=!![];continue;}}}}if(_0x5b3156)continue;const _0x218902=_0x43b8b6-_0x39065b[_0x311bc5(0x2e3)];if(_0x218902<FALLING_SHIP_FADE_DURATION_MS)_0x39065b['tintProgress']=Math[_0x311bc5(0x221)](0x0,0x1-_0x218902/FALLING_SHIP_FADE_DURATION_MS);else _0x39065b['tintProgress']=0x0;if(_0x39065b['rotationCompleted'])_0x39065b['rotation']=0x0;else{if(!_0x39065b['landed']&&typeof _0x39065b[_0x311bc5(0x23a)]===_0x311bc5(0x26a)&&typeof FALLING_SHIP_ROTATION_SPEED===_0x311bc5(0x26a)&&FALLING_SHIP_ROTATION_SPEED>0x0){const _0x14bccb=FALLING_SHIP_ROTATION_SPEED*_0x39065b[_0x311bc5(0x23a)];_0x39065b[_0x311bc5(0x2b8)]+=_0x14bccb,_0x39065b[_0x311bc5(0x2a1)]+=Math[_0x311bc5(0x2b3)](_0x14bccb);if(_0x39065b[_0x311bc5(0x2a1)]>=_0x2a8dbc*0x2*Math['PI'])_0x39065b[_0x311bc5(0x2b8)]=0x0,_0x39065b[_0x311bc5(0x1e9)]=!![];else{if(_0x39065b[_0x311bc5(0x2b8)]>Math['PI']*0x2)_0x39065b[_0x311bc5(0x2b8)]-=Math['PI']*0x2;if(_0x39065b['rotation']<0x0)_0x39065b[_0x311bc5(0x2b8)]+=Math['PI']*0x2;}}else _0x39065b[_0x311bc5(0x2b8)]=_0x39065b['rotation']||0x0;}if(!_0x39065b[_0x311bc5(0x292)]){let _0x513cf7=null,_0x3fdd1a=()=>{},_0x5c9963=0x0,_0x39a3e4=![],_0x2fe03d=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x311bc5(0x232)){if(_0x39065b['targetPlayerId']===_0x311bc5(0x1b0)&&ship1&&player1Lives>0x0)_0x513cf7=ship1,_0x2fe03d=player1IsDualShipActive,_0x3fdd1a=()=>{if(!_0x2fe03d)player1IsDualShipActive=!![];},_0x5c9963=0x1;else(_0x39065b[_0x311bc5(0x275)]==='player2'||_0x39065b[_0x311bc5(0x275)]===_0x311bc5(0x28b))&&ship2&&player2Lives>0x0&&(_0x513cf7=ship2,_0x2fe03d=player2IsDualShipActive,_0x3fdd1a=()=>{if(!_0x2fe03d)player2IsDualShipActive=!![];},_0x5c9963=0x2);}else{if(isTwoPlayerMode&&selectedGameMode===_0x311bc5(0x233)){if(_0x39065b[_0x311bc5(0x275)]===_0x311bc5(0x1b0)&&ship1&&player1Lives>0x0)_0x513cf7=ship1,_0x39a3e4=isPlayer1ShipCaptured,_0x2fe03d=player1IsDualShipActive,_0x3fdd1a=()=>{if(!_0x2fe03d)player1IsDualShipActive=!![];isPlayer1ShipCaptured=![];},_0x5c9963=0x1;else _0x39065b[_0x311bc5(0x275)]===_0x311bc5(0x22b)&&ship2&&player2Lives>0x0&&(_0x513cf7=ship2,_0x39a3e4=isPlayer2ShipCaptured,_0x2fe03d=player2IsDualShipActive,_0x3fdd1a=()=>{if(!_0x2fe03d)player2IsDualShipActive=!![];isPlayer2ShipCaptured=![];},_0x5c9963=0x2);}else ship&&playerLives>0x0&&(_0x513cf7=ship,_0x39a3e4=isShipCaptured,_0x2fe03d=isDualShipActive,_0x3fdd1a=()=>{const _0x37b262=_0x311bc5;if(!_0x2fe03d){isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x37b262(0x1ea)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}}isShipCaptured=![];},_0x5c9963=isTwoPlayerMode&&selectedGameMode==='normal'?currentPlayer:0x1);}if(_0x513cf7&&!_0x2fe03d){const _0x26c6c5={'x':_0x39065b['x'],'y':_0x39065b['y'],'width':_0x39065b[_0x311bc5(0x268)],'height':_0x39065b[_0x311bc5(0x1ff)]},_0x48b50={'x':_0x513cf7['x'],'y':_0x513cf7['y'],'width':_0x513cf7[_0x311bc5(0x268)],'height':_0x513cf7[_0x311bc5(0x1ff)]};if(checkCollision(_0x26c6c5,_0x48b50)){_0x3fdd1a();if(_0x39a3e4&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x311bc5(0x232))){playSound(_0x311bc5(0x243),![],0.4);if(_0x5c9963===0x1&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x43b8b6+INVINCIBILITY_DURATION_MS;else{if(_0x5c9963===0x2&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x43b8b6+INVINCIBILITY_DURATION_MS;else _0x5c9963!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0x43b8b6+INVINCIBILITY_DURATION_MS);}}else playSound(_0x311bc5(0x243),![],0.4);fallingShips[_0x311bc5(0x1bc)](_0xf0cb55,0x1);continue;}}}if(!_0x39065b[_0x311bc5(0x292)]&&_0x39065b['y']>=gameCanvas[_0x311bc5(0x1ff)])fallingShips[_0x311bc5(0x1bc)](_0xf0cb55,0x1);}let _0x357c58=0x0;const _0x51d68c=enemies[_0x311bc5(0x236)](_0xd6a3f5=>_0xd6a3f5?.[_0x311bc5(0x2d4)]===_0x311bc5(0x1f8)),_0x12b936=!isChallengingStage&&!isWaveTransitioning&&_0x51d68c&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x311bc5(0x233)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage));if(_0x12b936){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0x311bc5(0x25f),!![],0.1));const _0x3ca2f3=enemies[_0x311bc5(0x1d5)](_0x4a3a10=>_0x4a3a10?.['state']===_0x311bc5(0x1f8));if(_0x3ca2f3['length']>0x0){let _0x521c8a=gameCanvas[_0x311bc5(0x268)],_0xee423d=0x0;_0x3ca2f3[_0x311bc5(0x201)](_0x5e17b8=>{const _0x637d94=_0x311bc5;_0x5e17b8&&(_0x521c8a=Math[_0x637d94(0x20a)](_0x521c8a,_0x5e17b8['x']),_0xee423d=Math[_0x637d94(0x221)](_0xee423d,_0x5e17b8['x']+_0x5e17b8[_0x637d94(0x268)]));});const _0x2d6057=gameCanvas[_0x311bc5(0x268)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x5a8cbb=gameCanvas[_0x311bc5(0x268)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0xee423d>=_0x5a8cbb)gridMoveDirection=-0x1;else{if(gridMoveDirection===-0x1&&_0x521c8a<=_0x2d6057)gridMoveDirection=0x1;}const _0x2faf5b=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x357c58=_0x2faf5b*gridMoveDirection,currentGridOffsetX+=_0x357c58,enemies[_0x311bc5(0x201)](_0x4f115c=>{const _0x203011=_0x311bc5;if(_0x4f115c&&(_0x4f115c[_0x203011(0x2d4)]===_0x203011(0x261)||_0x4f115c[_0x203011(0x2d4)]===_0x203011(0x1f8)||_0x4f115c['state']===_0x203011(0x26d)))try{const _0x46b632=_0x4f115c[_0x203011(0x22c)]===ENEMY3_TYPE?BOSS_WIDTH:_0x4f115c[_0x203011(0x22c)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x11f481,y:_0x3e25b5}=getCurrentGridSlotPosition(_0x4f115c[_0x203011(0x1e1)],_0x4f115c[_0x203011(0x2b5)],_0x46b632);_0x4f115c[_0x203011(0x277)]=_0x11f481,_0x4f115c[_0x203011(0x1a8)]=_0x3e25b5;}catch(_0x4ef724){console['error'](_0x203011(0x1a7)+_0x4f115c?.['id']+_0x203011(0x285)+_0x4f115c?.[_0x203011(0x2d4)]+_0x203011(0x25c),_0x4ef724);}});}}else isGridSoundPlaying&&(stopSound('gridBackgroundSound'),isGridSoundPlaying=![]),_0x357c58=0x0;for(let _0x43ec24=enemies[_0x311bc5(0x2a3)]-0x1;_0x43ec24>=0x0;_0x43ec24--){let _0x304fc4=enemies[_0x43ec24];if(!_0x304fc4){enemies['splice'](_0x43ec24,0x1);continue;}const _0x54249f=_0x304fc4['id'];if(_0x304fc4[_0x311bc5(0x23e)]&&_0x304fc4[_0x311bc5(0x2d4)]!=='preparing_capture'){clearTimeout(_0x304fc4['capturePrepareTimeout']);const _0x142649=enemySpawnTimeouts[_0x311bc5(0x24d)](_0x304fc4[_0x311bc5(0x23e)]);if(_0x142649>-0x1)enemySpawnTimeouts[_0x311bc5(0x1bc)](_0x142649,0x1);_0x304fc4[_0x311bc5(0x23e)]=null;}const _0x21148d=_0x304fc4[_0x311bc5(0x22c)]===ENEMY3_TYPE?BOSS_WIDTH:_0x304fc4[_0x311bc5(0x22c)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x26941d=_0x304fc4[_0x311bc5(0x22c)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x304fc4[_0x311bc5(0x22c)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x304fc4[_0x311bc5(0x2d4)]){case _0x311bc5(0x1a9):{let _0x583ee4=CS_ENTRANCE_PATH_SPEED;const _0x237d5a=_0x304fc4[_0x311bc5(0x265)]||0x1;_0x583ee4*=_0x237d5a;if(!isChallengingStage){enemies[_0x311bc5(0x1bc)](_0x43ec24,0x1),_0x304fc4=null;break;}let _0x51a1af=challengingStagePaths,_0x40df3b=_0x51a1af[_0x304fc4[_0x311bc5(0x2a8)]];if(!_0x40df3b||_0x304fc4[_0x311bc5(0x2ab)]>=_0x40df3b[_0x311bc5(0x2a3)]){enemies[_0x311bc5(0x1bc)](_0x43ec24,0x1),_0x304fc4=null;break;}const _0x48713e=_0x40df3b[_0x304fc4[_0x311bc5(0x2ab)]];if(!_0x48713e||!_0x48713e['p0']||!_0x48713e['p1']||!_0x48713e['p2']||!_0x48713e['p3']){console[_0x311bc5(0x2e2)](_0x311bc5(0x206)+_0x304fc4['pathSegmentIndex']+'\x20for\x20path\x20'+_0x304fc4[_0x311bc5(0x2a8)]+_0x311bc5(0x21a)+_0x304fc4['id']),enemies['splice'](_0x43ec24,0x1),_0x304fc4=null;break;}_0x304fc4['pathT']+=_0x583ee4;let _0x49111d,_0x38daec,_0x29331c=_0x304fc4['x'],_0x1c07a1=_0x304fc4['y'];if(_0x304fc4[_0x311bc5(0x21f)]>=0x1){_0x304fc4[_0x311bc5(0x21f)]=0x0,_0x304fc4[_0x311bc5(0x2ab)]++;if(_0x304fc4[_0x311bc5(0x2ab)]>=_0x40df3b[_0x311bc5(0x2a3)])enemies[_0x311bc5(0x1bc)](_0x43ec24,0x1),_0x304fc4=null;else{const _0x25c67a=_0x40df3b[_0x304fc4['pathSegmentIndex']];_0x25c67a?.['p0']?(_0x49111d=_0x25c67a['p0']['x'],_0x38daec=_0x25c67a['p0']['y']):(console['error'](_0x311bc5(0x220)+_0x304fc4[_0x311bc5(0x2ab)]+_0x311bc5(0x2c0)+_0x304fc4[_0x311bc5(0x2a8)]+_0x311bc5(0x21a)+_0x54249f),enemies[_0x311bc5(0x1bc)](_0x43ec24,0x1),_0x304fc4=null);}}else try{_0x49111d=calculateBezierPoint(_0x304fc4[_0x311bc5(0x21f)],_0x48713e['p0']['x'],_0x48713e['p1']['x'],_0x48713e['p2']['x'],_0x48713e['p3']['x']),_0x38daec=calculateBezierPoint(_0x304fc4[_0x311bc5(0x21f)],_0x48713e['p0']['y'],_0x48713e['p1']['y'],_0x48713e['p2']['y'],_0x48713e['p3']['y']);}catch(_0x43b13a){console['error'](_0x311bc5(0x2a2)+_0x54249f+':',_0x43b13a),enemies[_0x311bc5(0x1bc)](_0x43ec24,0x1),_0x304fc4=null;}_0x304fc4&&(isNaN(_0x49111d)||isNaN(_0x38daec)?(console[_0x311bc5(0x2e2)](_0x311bc5(0x214)+_0x54249f+'.\x20Removing.'),enemies[_0x311bc5(0x1bc)](_0x43ec24,0x1),_0x304fc4=null):(_0x304fc4[_0x311bc5(0x1b7)]=_0x49111d-_0x29331c,_0x304fc4[_0x311bc5(0x24a)]=_0x38daec-_0x1c07a1,_0x304fc4['x']=_0x49111d,_0x304fc4['y']=_0x38daec));break;}case _0x311bc5(0x238):{if(isChallengingStage){enemies['splice'](_0x43ec24,0x1),_0x304fc4=null;break;}let _0x8ddba4=normalWaveEntrancePaths,_0x440506=_0x8ddba4[_0x304fc4[_0x311bc5(0x2a8)]],_0x3a869b;_0x304fc4[_0x311bc5(0x2a8)]==='boss_loop_left'||_0x304fc4[_0x311bc5(0x2a8)]==='boss_loop_right'?_0x3a869b=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x3a869b=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x440506){console[_0x311bc5(0x248)]('Enemy\x20'+_0x54249f+_0x311bc5(0x239)+_0x304fc4['entrancePathId']+_0x311bc5(0x1c1));try{_0x304fc4['targetGridX']=_0x304fc4[_0x311bc5(0x277)]??gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4[_0x311bc5(0x1a8)]=_0x304fc4['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x11c529){console['error'](_0x311bc5(0x1aa)+_0x54249f+'\x20after\x20missing\x20path',_0x11c529),_0x304fc4[_0x311bc5(0x277)]=gameCanvas['width']/0x2,_0x304fc4[_0x311bc5(0x1a8)]=ENEMY_TOP_MARGIN;}_0x304fc4['state']=_0x311bc5(0x26d),_0x304fc4['pathT']=0x0,_0x304fc4[_0x311bc5(0x2ab)]=0x0,_0x304fc4[_0x311bc5(0x1b7)]=0x0,_0x304fc4[_0x311bc5(0x24a)]=0x0;_0x304fc4[_0x311bc5(0x269)]!==undefined&&squadronCompletionStatus[_0x304fc4['squadronId']]&&squadronCompletionStatus[_0x304fc4['squadronId']][_0x311bc5(0x1ad)]++;break;}if(_0x304fc4[_0x311bc5(0x2ab)]>=_0x440506['length']){console[_0x311bc5(0x248)](_0x311bc5(0x1f0)+_0x54249f+_0x311bc5(0x22e)+_0x304fc4[_0x311bc5(0x2ab)]+'\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20'+_0x304fc4[_0x311bc5(0x2a8)]+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x304fc4[_0x311bc5(0x277)]=_0x304fc4[_0x311bc5(0x277)]??gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4[_0x311bc5(0x1a8)]=_0x304fc4['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x5e6903){console[_0x311bc5(0x2e2)](_0x311bc5(0x1aa)+_0x54249f+_0x311bc5(0x234),_0x5e6903),_0x304fc4[_0x311bc5(0x277)]=gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4[_0x311bc5(0x1a8)]=ENEMY_TOP_MARGIN;}_0x304fc4[_0x311bc5(0x2d4)]=_0x311bc5(0x26d),_0x304fc4['pathT']=0x0,_0x304fc4['pathSegmentIndex']=0x0,_0x304fc4[_0x311bc5(0x1b7)]=0x0,_0x304fc4[_0x311bc5(0x24a)]=0x0;_0x304fc4[_0x311bc5(0x269)]!==undefined&&squadronCompletionStatus[_0x304fc4['squadronId']]&&squadronCompletionStatus[_0x304fc4[_0x311bc5(0x269)]]['completed']++;break;}const _0x15a0e5=_0x440506[_0x304fc4[_0x311bc5(0x2ab)]];if(!_0x15a0e5||!_0x15a0e5['p0']||!_0x15a0e5['p1']||!_0x15a0e5['p2']||!_0x15a0e5['p3']){console[_0x311bc5(0x2e2)]('Invalid\x20Normal\x20Bezier\x20segment\x20'+_0x304fc4['pathSegmentIndex']+_0x311bc5(0x1dc)+_0x304fc4[_0x311bc5(0x2a8)]+_0x311bc5(0x21a)+_0x54249f+_0x311bc5(0x1c1));try{_0x304fc4[_0x311bc5(0x277)]=_0x304fc4[_0x311bc5(0x277)]??gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4[_0x311bc5(0x1a8)]=_0x304fc4[_0x311bc5(0x1a8)]??ENEMY_TOP_MARGIN+_0x304fc4[_0x311bc5(0x1e1)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0xe389fa){console['error'](_0x311bc5(0x1aa)+_0x54249f+_0x311bc5(0x2d9),_0xe389fa),_0x304fc4['targetGridX']=gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4[_0x311bc5(0x1a8)]=ENEMY_TOP_MARGIN;}_0x304fc4['state']='moving_to_grid',_0x304fc4[_0x311bc5(0x21f)]=0x0,_0x304fc4[_0x311bc5(0x2ab)]=0x0,_0x304fc4['velocityX']=0x0,_0x304fc4['velocityY']=0x0;_0x304fc4['squadronId']!==undefined&&squadronCompletionStatus[_0x304fc4['squadronId']]&&squadronCompletionStatus[_0x304fc4[_0x311bc5(0x269)]][_0x311bc5(0x1ad)]++;break;}_0x304fc4['pathT']+=_0x3a869b;let _0x7591c5,_0x4565ae,_0x2d449b=_0x304fc4['x'],_0x291f2f=_0x304fc4['y'];if(_0x304fc4[_0x311bc5(0x21f)]>=0x1){_0x304fc4[_0x311bc5(0x21f)]=0x0,_0x304fc4[_0x311bc5(0x2ab)]++;if(_0x304fc4['pathSegmentIndex']>=_0x440506[_0x311bc5(0x2a3)]){let _0x2d9a3d,_0x22dd08;try{_0x2d9a3d=calculateBezierPoint(0x1,_0x15a0e5['p0']['x'],_0x15a0e5['p1']['x'],_0x15a0e5['p2']['x'],_0x15a0e5['p3']['x']),_0x22dd08=calculateBezierPoint(0x1,_0x15a0e5['p0']['y'],_0x15a0e5['p1']['y'],_0x15a0e5['p2']['y'],_0x15a0e5['p3']['y']);}catch(_0x3d910b){console[_0x311bc5(0x2e2)](_0x311bc5(0x222)+_0x54249f+_0x311bc5(0x241)+_0x304fc4[_0x311bc5(0x2a8)],_0x3d910b),_0x2d9a3d=_0x15a0e5['p3']['x'],_0x22dd08=_0x15a0e5['p3']['y'];}_0x304fc4['x']=_0x2d9a3d,_0x304fc4['y']=_0x22dd08;try{_0x304fc4[_0x311bc5(0x277)]=_0x304fc4['targetGridX']??gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4[_0x311bc5(0x1a8)]=_0x304fc4[_0x311bc5(0x1a8)]??ENEMY_TOP_MARGIN;}catch(_0x4c9379){console[_0x311bc5(0x2e2)](_0x311bc5(0x1a1)+_0x54249f+'\x20at\x20end\x20of\x20normal\x20path\x20'+_0x304fc4[_0x311bc5(0x2a8)],_0x4c9379),_0x304fc4[_0x311bc5(0x277)]=_0x304fc4['x'],_0x304fc4[_0x311bc5(0x1a8)]=ENEMY_TOP_MARGIN+_0x304fc4[_0x311bc5(0x1e1)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x5493dd=_0x304fc4[_0x311bc5(0x2d4)];_0x304fc4['state']=_0x311bc5(0x26d),_0x304fc4['velocityX']=0x0,_0x304fc4[_0x311bc5(0x24a)]=0x0,_0x304fc4[_0x311bc5(0x2ab)]=0x0;_0x5493dd===_0x311bc5(0x238)&&_0x304fc4[_0x311bc5(0x269)]!==undefined&&squadronCompletionStatus[_0x304fc4[_0x311bc5(0x269)]]&&squadronCompletionStatus[_0x304fc4['squadronId']][_0x311bc5(0x1ad)]++;break;}else{const _0x1a4ee8=_0x440506[_0x304fc4['pathSegmentIndex']];if(_0x1a4ee8?.['p0'])_0x7591c5=_0x1a4ee8['p0']['x'],_0x4565ae=_0x1a4ee8['p0']['y'];else{console['error'](_0x311bc5(0x260)+_0x304fc4[_0x311bc5(0x2ab)]+'\x20for\x20SHARED\x20path\x20'+_0x304fc4[_0x311bc5(0x2a8)]+_0x311bc5(0x21a)+_0x54249f+_0x311bc5(0x1c1));try{_0x304fc4['targetGridX']=_0x304fc4[_0x311bc5(0x277)]??gameCanvas['width']/0x2,_0x304fc4[_0x311bc5(0x1a8)]=_0x304fc4['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x13adaf){console[_0x311bc5(0x2e2)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x54249f+_0x311bc5(0x290),_0x13adaf),_0x304fc4['targetGridX']=gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4[_0x311bc5(0x1a8)]=ENEMY_TOP_MARGIN;}_0x304fc4[_0x311bc5(0x2d4)]='moving_to_grid',_0x304fc4[_0x311bc5(0x21f)]=0x0,_0x304fc4[_0x311bc5(0x2ab)]=0x0,_0x304fc4['velocityX']=0x0,_0x304fc4[_0x311bc5(0x24a)]=0x0;_0x304fc4[_0x311bc5(0x269)]!==undefined&&squadronCompletionStatus[_0x304fc4['squadronId']]&&squadronCompletionStatus[_0x304fc4[_0x311bc5(0x269)]][_0x311bc5(0x1ad)]++;break;}}}else try{_0x7591c5=calculateBezierPoint(_0x304fc4[_0x311bc5(0x21f)],_0x15a0e5['p0']['x'],_0x15a0e5['p1']['x'],_0x15a0e5['p2']['x'],_0x15a0e5['p3']['x']),_0x4565ae=calculateBezierPoint(_0x304fc4[_0x311bc5(0x21f)],_0x15a0e5['p0']['y'],_0x15a0e5['p1']['y'],_0x15a0e5['p2']['y'],_0x15a0e5['p3']['y']);}catch(_0x3bfe1a){console[_0x311bc5(0x2e2)](_0x311bc5(0x242)+_0x54249f+':',_0x3bfe1a);try{_0x304fc4[_0x311bc5(0x277)]=_0x304fc4[_0x311bc5(0x277)]??gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4[_0x311bc5(0x1a8)]=_0x304fc4[_0x311bc5(0x1a8)]??ENEMY_TOP_MARGIN;}catch(_0x1f5b32){console[_0x311bc5(0x2e2)](_0x311bc5(0x1aa)+_0x54249f+'\x20after\x20bezier\x20error',_0x1f5b32),_0x304fc4[_0x311bc5(0x277)]=gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4['targetGridY']=ENEMY_TOP_MARGIN;}_0x304fc4[_0x311bc5(0x2d4)]=_0x311bc5(0x26d),_0x304fc4[_0x311bc5(0x21f)]=0x0,_0x304fc4[_0x311bc5(0x2ab)]=0x0,_0x304fc4[_0x311bc5(0x1b7)]=0x0,_0x304fc4['velocityY']=0x0;_0x304fc4[_0x311bc5(0x269)]!==undefined&&squadronCompletionStatus[_0x304fc4['squadronId']]&&squadronCompletionStatus[_0x304fc4['squadronId']][_0x311bc5(0x1ad)]++;break;}if(_0x304fc4&&_0x304fc4['state']===_0x311bc5(0x238)){if(isNaN(_0x7591c5)||isNaN(_0x4565ae)){console[_0x311bc5(0x2e2)](_0x311bc5(0x208)+_0x54249f+_0x311bc5(0x1c1));try{_0x304fc4[_0x311bc5(0x277)]=_0x304fc4[_0x311bc5(0x277)]??gameCanvas['width']/0x2,_0x304fc4[_0x311bc5(0x1a8)]=_0x304fc4[_0x311bc5(0x1a8)]??ENEMY_TOP_MARGIN;}catch(_0x318c3a){console[_0x311bc5(0x2e2)](_0x311bc5(0x1aa)+_0x54249f+_0x311bc5(0x2e7),_0x318c3a),_0x304fc4['targetGridX']=gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4[_0x311bc5(0x1a8)]=ENEMY_TOP_MARGIN;}_0x304fc4[_0x311bc5(0x2d4)]=_0x311bc5(0x26d),_0x304fc4[_0x311bc5(0x21f)]=0x0,_0x304fc4[_0x311bc5(0x2ab)]=0x0,_0x304fc4['velocityX']=0x0,_0x304fc4['velocityY']=0x0,_0x304fc4[_0x311bc5(0x269)]!==undefined&&squadronCompletionStatus[_0x304fc4[_0x311bc5(0x269)]]&&squadronCompletionStatus[_0x304fc4[_0x311bc5(0x269)]][_0x311bc5(0x1ad)]++;}else{let _0x34ff9b=_0x7591c5;const _0x3f682a=currentWavePatternIndex===0x1&&(_0x304fc4[_0x311bc5(0x269)]===0x2||_0x304fc4[_0x311bc5(0x269)]===0x3),_0x199eee=typeof _0x304fc4['squadronEnemyIndex']===_0x311bc5(0x26a)&&_0x304fc4[_0x311bc5(0x2c4)]%0x2!==0x0;if(_0x3f682a&&_0x199eee){const _0x2beecb=_0x21148d+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x34ff9b=_0x7591c5+_0x2beecb;}_0x304fc4[_0x311bc5(0x1b7)]=_0x34ff9b-_0x2d449b,_0x304fc4[_0x311bc5(0x24a)]=_0x4565ae-_0x291f2f,_0x304fc4['x']=_0x34ff9b,_0x304fc4['y']=_0x4565ae;}}break;}case'moving_to_grid':{if(_0x304fc4[_0x311bc5(0x277)]==null||_0x304fc4[_0x311bc5(0x1a8)]==null){console[_0x311bc5(0x248)]('Enemy\x20'+_0x54249f+_0x311bc5(0x1d8));try{const {x:_0x1efa0a,y:_0x8bba07}=getCurrentGridSlotPosition(_0x304fc4['gridRow'],_0x304fc4['gridCol'],_0x21148d);_0x304fc4[_0x311bc5(0x277)]=_0x1efa0a,_0x304fc4[_0x311bc5(0x1a8)]=_0x8bba07;}catch(_0x298cdf){console[_0x311bc5(0x2e2)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x54249f+_0x311bc5(0x2c6),_0x298cdf),_0x304fc4[_0x311bc5(0x2d4)]=_0x311bc5(0x1f8),_0x304fc4['x']=gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4['y']=ENEMY_TOP_MARGIN;break;}}const _0x35fef5=_0x304fc4[_0x311bc5(0x277)],_0xecb595=_0x304fc4[_0x311bc5(0x1a8)],_0x547c78=_0x35fef5-_0x304fc4['x'],_0xc68175=_0xecb595-_0x304fc4['y'],_0x4fbf0e=Math[_0x311bc5(0x276)](_0x547c78*_0x547c78+_0xc68175*_0xc68175),_0x1092f0=ENTRANCE_SPEED*1.2,_0x1dd576=_0x1092f0*0.5;if(_0x4fbf0e>_0x1dd576)_0x304fc4['velocityX']=_0x547c78/_0x4fbf0e*_0x1092f0,_0x304fc4[_0x311bc5(0x24a)]=_0xc68175/_0x4fbf0e*_0x1092f0,_0x304fc4['x']+=_0x304fc4[_0x311bc5(0x1b7)],_0x304fc4['y']+=_0x304fc4[_0x311bc5(0x24a)];else{_0x304fc4['x']=_0x35fef5,_0x304fc4['y']=_0xecb595,_0x304fc4[_0x311bc5(0x1b7)]=0x0,_0x304fc4[_0x311bc5(0x24a)]=0x0;const _0x15cfe6=_0x304fc4[_0x311bc5(0x2d4)];_0x304fc4[_0x311bc5(0x2d4)]=_0x311bc5(0x1f8),_0x304fc4[_0x311bc5(0x1ce)]=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound('gridBackgroundSound',!![],0.1));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x43b8b6,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date[_0x311bc5(0x28d)](),firstEnemyLanded=!![]);if(_0x15cfe6===_0x311bc5(0x26d)&&!isChallengingStage&&!isFullGridWave&&_0x304fc4[_0x311bc5(0x269)]!==undefined){const _0x4473a4=_0x304fc4[_0x311bc5(0x269)],_0x315b39=squadronCompletionStatus[_0x4473a4];if(_0x315b39&&!_0x315b39['hasFiredPostLanding']){const _0x547dc0=enemies[_0x311bc5(0x28a)](_0x30d20e=>{const _0x149bad=_0x311bc5;if(_0x30d20e&&_0x30d20e[_0x149bad(0x269)]===_0x4473a4)return _0x30d20e[_0x149bad(0x2d4)]===_0x149bad(0x1f8)||!enemies[_0x149bad(0x236)](_0x407297=>_0x407297['id']===_0x30d20e['id']);return!![];});if(_0x547dc0){_0x315b39[_0x311bc5(0x1d9)]=!![];const _0x481378=enemies[_0x311bc5(0x1d5)](_0x1224be=>_0x1224be&&_0x1224be['squadronId']===_0x4473a4&&_0x1224be[_0x311bc5(0x2d4)]===_0x311bc5(0x1f8)&&(_0x1224be['type']===ENEMY2_TYPE||_0x1224be[_0x311bc5(0x22c)]===ENEMY3_TYPE)&&!(_0x1224be['type']===ENEMY3_TYPE&&_0x1224be[_0x311bc5(0x20c)]));if(_0x481378['length']>0x0){const _0x4be41e=_0x481378[Math[_0x311bc5(0x2d7)](Math[_0x311bc5(0x24c)]()*_0x481378['length'])],_0xddad49=_0x4be41e['id'],_0x33b26a=0xc8+Math[_0x311bc5(0x24c)]()*0x190,_0x2b5a45=setTimeout(()=>{const _0x4a7d5e=_0x311bc5;try{const _0x457ba2=enemySpawnTimeouts[_0x4a7d5e(0x24d)](_0x2b5a45);if(_0x457ba2>-0x1)enemySpawnTimeouts[_0x4a7d5e(0x1bc)](_0x457ba2,0x1);if(isPaused||!isInGameState||playerLives<=0x0&&(!isTwoPlayerMode||player1Lives<=0x0&&player2Lives<=0x0)||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x1583a6=enemies['find'](_0x565fb2=>_0x565fb2&&_0x565fb2['id']===_0xddad49);_0x1583a6&&_0x1583a6['state']==='in_grid'&&(createBulletSimple(_0x1583a6)&&(playSound(_0x4a7d5e(0x1e0),![],0.4),_0x1583a6[_0x4a7d5e(0x2d6)]=Date['now']()));}catch(_0x5ab741){console[_0x4a7d5e(0x2e2)](_0x4a7d5e(0x2c5)+_0xddad49+':',_0x5ab741);}},_0x33b26a);enemySpawnTimeouts['push'](_0x2b5a45);}}}}}break;}case'in_grid':{try{const _0x2b165d=_0x304fc4[_0x311bc5(0x22c)]===ENEMY3_TYPE?BOSS_WIDTH:_0x304fc4[_0x311bc5(0x22c)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0xf0f5ed,y:_0x3a7b04}=getCurrentGridSlotPosition(_0x304fc4[_0x311bc5(0x1e1)],_0x304fc4[_0x311bc5(0x2b5)],_0x2b165d);typeof _0xf0f5ed==='number'&&!isNaN(_0xf0f5ed)&&(_0x304fc4['x']=_0xf0f5ed),typeof _0x3a7b04===_0x311bc5(0x26a)&&!isNaN(_0x3a7b04)&&(_0x304fc4['y']=_0x3a7b04),_0x304fc4['targetGridX']=_0xf0f5ed,_0x304fc4[_0x311bc5(0x1a8)]=_0x3a7b04;}catch(_0x2593f1){console[_0x311bc5(0x2e2)](_0x311bc5(0x1e4)+_0x304fc4['id']+':',_0x2593f1);}_0x304fc4[_0x311bc5(0x1b7)]=_0x12b936?_0x357c58:0x0,_0x304fc4[_0x311bc5(0x24a)]=0x0;_0x304fc4[_0x311bc5(0x22c)]===ENEMY3_TYPE&&_0x304fc4[_0x311bc5(0x20c)]&&_0x304fc4[_0x311bc5(0x25a)]&&(_0x304fc4[_0x311bc5(0x2e9)]=_0x304fc4['x']+CAPTURED_SHIP_OFFSET_X,_0x304fc4[_0x311bc5(0x22a)]=_0x304fc4['y']+CAPTURED_SHIP_OFFSET_Y);break;}case _0x311bc5(0x2c2):{_0x304fc4[_0x311bc5(0x1b7)]=0x0,_0x304fc4[_0x311bc5(0x24a)]=0x0;break;}case'preparing_capture':{_0x304fc4[_0x311bc5(0x1b7)]=0x0,_0x304fc4[_0x311bc5(0x24a)]=0x0;break;}case _0x311bc5(0x2cb):{let _0x1340f2=isTwoPlayerMode&&selectedGameMode===_0x311bc5(0x233)?isPlayer1ShipCaptured||isPlayer2ShipCaptured:isShipCaptured;if(_0x1340f2){_0x304fc4[_0x311bc5(0x2d4)]=_0x311bc5(0x261);try{const {x:_0x517cb9,y:_0x2af4a8}=getCurrentGridSlotPosition(_0x304fc4['gridRow'],_0x304fc4[_0x311bc5(0x2b5)],_0x21148d);_0x304fc4['targetGridX']=_0x517cb9,_0x304fc4[_0x311bc5(0x1a8)]=_0x2af4a8;}catch(_0xf51e71){console[_0x311bc5(0x2e2)](_0x311bc5(0x240)+_0x304fc4['id']+':',_0xf51e71),_0x304fc4['targetGridX']=gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4[_0x311bc5(0x1a8)]=ENEMY_TOP_MARGIN;}break;}const _0x48a1a4=_0x304fc4[_0x311bc5(0x1b5)],_0x1d0e8d=_0x304fc4[_0x311bc5(0x1e6)];if(_0x48a1a4==null||_0x1d0e8d==null){console[_0x311bc5(0x2e2)]('Boss\x20'+_0x304fc4['id']+_0x311bc5(0x211)),_0x304fc4[_0x311bc5(0x2d4)]=_0x311bc5(0x261);try{const {x:_0xfec7d9,y:_0x3b6a30}=getCurrentGridSlotPosition(_0x304fc4['gridRow'],_0x304fc4[_0x311bc5(0x2b5)],_0x21148d);_0x304fc4[_0x311bc5(0x277)]=_0xfec7d9,_0x304fc4[_0x311bc5(0x1a8)]=_0x3b6a30;}catch(_0x48986c){console[_0x311bc5(0x2e2)](_0x311bc5(0x240)+_0x304fc4['id']+':',_0x48986c),_0x304fc4[_0x311bc5(0x277)]=gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0x5663c8=_0x48a1a4-_0x304fc4['x'],_0xa3684b=_0x1d0e8d-_0x304fc4['y'],_0x777675=Math['sqrt'](_0x5663c8*_0x5663c8+_0xa3684b*_0xa3684b),_0x58b1e9=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x59ffd3=_0x58b1e9*0.6;_0x777675>_0x59ffd3?(_0x304fc4[_0x311bc5(0x1b7)]=_0x5663c8/_0x777675*_0x58b1e9,_0x304fc4[_0x311bc5(0x24a)]=_0xa3684b/_0x777675*_0x58b1e9,_0x304fc4['x']+=_0x304fc4[_0x311bc5(0x1b7)],_0x304fc4['y']+=_0x304fc4[_0x311bc5(0x24a)]):(_0x304fc4['x']=_0x48a1a4,_0x304fc4['y']=_0x1d0e8d,_0x304fc4['velocityX']=0x0,_0x304fc4['velocityY']=0x0,_0x304fc4[_0x311bc5(0x2d4)]=_0x311bc5(0x21e),_0x304fc4[_0x311bc5(0x2c7)]=_0x43b8b6,capturingBossId=_0x304fc4['id'],captureBeamActive=!![],captureBeamSource={'x':_0x304fc4['x']+_0x21148d/0x2,'y':_0x304fc4['y']+_0x26941d},captureBeamTargetY=_0x304fc4['y'],captureBeamProgress=0x0,playSound(_0x311bc5(0x272),![],0.6),_0x304fc4[_0x311bc5(0x2b9)]&&(captureAttemptMadeThisLevel=!![],delete _0x304fc4[_0x311bc5(0x2b9)]));break;}case _0x311bc5(0x21e):{_0x304fc4['velocityX']=0x0,_0x304fc4[_0x311bc5(0x24a)]=0x0;_0x304fc4['isPreparingForImmediateCapture']&&!captureAttemptMadeThisLevel&&(captureAttemptMadeThisLevel=!![],delete _0x304fc4[_0x311bc5(0x2b9)]);let _0x4c5a29=![];isTwoPlayerMode&&selectedGameMode===_0x311bc5(0x233)?_0x4c5a29=isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x304fc4['id']||isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x304fc4['id']:_0x4c5a29=isShipCaptured&&capturedBossIdWithMessage===_0x304fc4['id'];if(_0x4c5a29){captureBeamActive=![];if(capturingBossId===_0x304fc4['id'])capturingBossId=null;_0x304fc4['state']=_0x311bc5(0x261),stopSound('captureSound');break;}const _0x1cca5c=_0x43b8b6-_0x304fc4[_0x311bc5(0x2c7)],_0x1906e3=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x20306e=CAPTURE_BEAM_DURATION_MS;if(_0x1cca5c<_0x1906e3)captureBeamProgress=_0x1cca5c/_0x1906e3;else{if(_0x1cca5c<_0x20306e-_0x1906e3)captureBeamProgress=0x1;else{if(_0x1cca5c<_0x20306e)captureBeamProgress=0x1-(_0x1cca5c-(_0x20306e-_0x1906e3))/_0x1906e3;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(_0x311bc5(0x272)),_0x304fc4[_0x311bc5(0x2d4)]='attacking',_0x304fc4[_0x311bc5(0x1d6)]=generateAttackPathInternal(_0x304fc4),_0x304fc4[_0x311bc5(0x2c9)]=0x0,_0x304fc4[_0x311bc5(0x1ae)]=0x0,_0x304fc4[_0x311bc5(0x262)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x304fc4[_0x311bc5(0x2d6)]=0x0,_0x304fc4['canFireThisDive']=!![],_0x304fc4[_0x311bc5(0x21c)]=0x0,_0x304fc4[_0x311bc5(0x2a4)]=null;break;}}}captureBeamProgress=Math[_0x311bc5(0x221)](0x0,Math[_0x311bc5(0x20a)](0x1,captureBeamProgress));if(captureBeamActive&&captureBeamProgress>=0.95){const _0x156342=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x262f59=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x3c3ed2=_0x304fc4['x']+_0x21148d/0x2,_0x52f090=_0x304fc4['y']+_0x26941d,_0x269350=gameCanvas[_0x311bc5(0x1ff)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x35bdd9=Math['max'](_0x156342,_0x262f59),_0x252c88=_0x3c3ed2-_0x35bdd9/0x2,_0x5c02be=_0x52f090,_0x298461=_0x269350-_0x52f090;if(_0x298461>0x0){const _0x2aceef={'x':_0x252c88,'y':_0x5c02be,'width':_0x35bdd9,'height':_0x298461};let _0x58931a=null,_0x55ddbd=0x0;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&checkCollision(ship1,_0x2aceef))_0x58931a=ship1,_0x55ddbd=0x1;else ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&checkCollision(ship2,_0x2aceef)&&(_0x58931a=ship2,_0x55ddbd=0x2);}else ship&&playerLives>0x0&&!isShipCaptured&&checkCollision(ship,_0x2aceef)&&(_0x58931a=ship,_0x55ddbd=currentPlayer);if(_0x58931a){_0x304fc4[_0x311bc5(0x25a)]={'width':_0x58931a[_0x311bc5(0x268)],'height':_0x58931a[_0x311bc5(0x1ff)]},_0x304fc4[_0x311bc5(0x20c)]=!![],stopSound(_0x311bc5(0x272)),_0x304fc4[_0x311bc5(0x2d4)]='showing_capture_message',_0x304fc4[_0x311bc5(0x277)]=null,_0x304fc4[_0x311bc5(0x1a8)]=null,_0x304fc4[_0x311bc5(0x2e4)]=_0x58931a['y'],_0x304fc4[_0x311bc5(0x1c6)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x43b8b6,capturedBossIdWithMessage=_0x304fc4['id'],playSound(_0x311bc5(0x1d2),![],0.3),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,handlePlayerShipCollision(_0x55ddbd,![],_0x43b8b6,!![]);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&aiPlayerActivelySeekingCaptureById)aiPlayerActivelySeekingCaptureById=null;break;}}}break;}case'showing_capture_message':{_0x304fc4['velocityX']=0x0,_0x304fc4[_0x311bc5(0x24a)]=0x0;if(_0x304fc4[_0x311bc5(0x20c)]&&_0x304fc4[_0x311bc5(0x25a)]&&typeof _0x304fc4[_0x311bc5(0x2e4)]==='number'){const _0x47d46c=_0x43b8b6-captureMessageStartTime,_0x462f97=Math[_0x311bc5(0x20a)](0x1,_0x47d46c/CAPTURE_MESSAGE_DURATION),_0x2c1cba=_0x304fc4['y']+CAPTURED_SHIP_OFFSET_Y,_0x540b0c=_0x304fc4[_0x311bc5(0x2e4)];_0x304fc4['capturedShipY']=_0x540b0c+(_0x2c1cba-_0x540b0c)*_0x462f97,_0x304fc4[_0x311bc5(0x2e9)]=_0x304fc4['x']+CAPTURED_SHIP_OFFSET_X;}else _0x304fc4[_0x311bc5(0x2e9)]=_0x304fc4['x']+CAPTURED_SHIP_OFFSET_X,_0x304fc4[_0x311bc5(0x22a)]=_0x304fc4['y']+CAPTURED_SHIP_OFFSET_Y;break;}case _0x311bc5(0x1a5):{if(isEntrancePhaseActive)break;const _0x4ba06f=_0x304fc4[_0x311bc5(0x1d6)],_0xff0101=3.8;if(!_0x4ba06f||_0x4ba06f[_0x311bc5(0x2a3)]===0x0){console[_0x311bc5(0x2e2)]('Enemy\x20'+_0x54249f+_0x311bc5(0x29d)),_0x304fc4['state']='returning';try{const {x:_0x30ca38,y:_0x14a10e}=getCurrentGridSlotPosition(_0x304fc4['gridRow'],_0x304fc4[_0x311bc5(0x2b5)],_0x21148d);_0x304fc4['targetGridX']=_0x30ca38,_0x304fc4[_0x311bc5(0x1a8)]=_0x14a10e;}catch(_0x324569){console[_0x311bc5(0x2e2)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x54249f+_0x311bc5(0x1de),_0x324569),_0x304fc4[_0x311bc5(0x277)]=gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4['targetGridY']=ENEMY_TOP_MARGIN;}break;}if(_0x304fc4['attackPathSegmentIndex']>=_0x4ba06f['length']){console[_0x311bc5(0x248)]('Enemy\x20'+_0x54249f+_0x311bc5(0x22d)+_0x304fc4[_0x311bc5(0x2c9)]+'\x20out\x20of\x20bounds\x20('+_0x4ba06f[_0x311bc5(0x2a3)]+_0x311bc5(0x264)),_0x304fc4[_0x311bc5(0x2d4)]=_0x311bc5(0x261);try{const {x:_0x390add,y:_0x3e37dc}=getCurrentGridSlotPosition(_0x304fc4[_0x311bc5(0x1e1)],_0x304fc4['gridCol'],_0x21148d);_0x304fc4['targetGridX']=_0x390add,_0x304fc4['targetGridY']=_0x3e37dc;}catch(_0x2a9689){console['error'](_0x311bc5(0x2c8)+_0x54249f+'\x20(invalid\x20attack\x20index):',_0x2a9689),_0x304fc4[_0x311bc5(0x277)]=gameCanvas['width']/0x2,_0x304fc4[_0x311bc5(0x1a8)]=ENEMY_TOP_MARGIN;}break;}const _0x13c082=_0x4ba06f[_0x304fc4[_0x311bc5(0x2c9)]];if(!_0x13c082||!_0x13c082['p0']||!_0x13c082['p1']||!_0x13c082['p2']||!_0x13c082['p3']){console[_0x311bc5(0x2e2)](_0x311bc5(0x1f0)+_0x54249f+_0x311bc5(0x287)+_0x304fc4[_0x311bc5(0x2c9)]+'!\x20Returning.'),_0x304fc4['state']=_0x311bc5(0x261);try{const {x:_0x983532,y:_0x398c2c}=getCurrentGridSlotPosition(_0x304fc4[_0x311bc5(0x1e1)],_0x304fc4[_0x311bc5(0x2b5)],_0x21148d);_0x304fc4[_0x311bc5(0x277)]=_0x983532,_0x304fc4[_0x311bc5(0x1a8)]=_0x398c2c;}catch(_0x5669da){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x54249f+_0x311bc5(0x205),_0x5669da),_0x304fc4['targetGridX']=gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4[_0x311bc5(0x1a8)]=ENEMY_TOP_MARGIN;}break;}const _0x2e8c1f=_0x304fc4['speed']/0x3e8*_0xff0101;_0x304fc4[_0x311bc5(0x1ae)]+=_0x2e8c1f;let _0x47e7de,_0x757c97;const _0x177659=_0x304fc4['x'],_0x28cd32=_0x304fc4['y'];if(_0x304fc4[_0x311bc5(0x1ae)]>=0x1){try{_0x47e7de=calculateBezierPoint(0x1,_0x13c082['p0']['x'],_0x13c082['p1']['x'],_0x13c082['p2']['x'],_0x13c082['p3']['x']),_0x757c97=calculateBezierPoint(0x1,_0x13c082['p0']['y'],_0x13c082['p1']['y'],_0x13c082['p2']['y'],_0x13c082['p3']['y']);}catch(_0x4cffe1){console[_0x311bc5(0x2e2)](_0x311bc5(0x1bf)+_0x304fc4['id']+':',_0x4cffe1),_0x47e7de=_0x304fc4['x'],_0x757c97=_0x304fc4['y'],_0x304fc4[_0x311bc5(0x2d4)]=_0x311bc5(0x261);try{const {x:_0xf7e503,y:_0x57c3f5}=getCurrentGridSlotPosition(_0x304fc4[_0x311bc5(0x1e1)],_0x304fc4[_0x311bc5(0x2b5)],_0x21148d);_0x304fc4[_0x311bc5(0x277)]=_0xf7e503,_0x304fc4[_0x311bc5(0x1a8)]=_0x57c3f5;}catch(_0x3c3b7d){console['error'](_0x311bc5(0x2ad)+_0x304fc4['id']+':',_0x3c3b7d),_0x304fc4[_0x311bc5(0x277)]=gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4['targetGridY']=ENEMY_TOP_MARGIN;}break;}_0x304fc4['attackPathT']=0x0,_0x304fc4[_0x311bc5(0x2c9)]++;if(_0x304fc4[_0x311bc5(0x2c9)]>=_0x4ba06f[_0x311bc5(0x2a3)]){_0x304fc4[_0x311bc5(0x2d4)]=_0x311bc5(0x261),_0x304fc4[_0x311bc5(0x2d6)]=0x0,_0x304fc4[_0x311bc5(0x21c)]=0x0,_0x304fc4[_0x311bc5(0x2a4)]=null;try{const {x:_0x3564b8,y:_0x1ca4c7}=getCurrentGridSlotPosition(_0x304fc4[_0x311bc5(0x1e1)],_0x304fc4[_0x311bc5(0x2b5)],_0x21148d);_0x304fc4[_0x311bc5(0x277)]=_0x3564b8,_0x304fc4[_0x311bc5(0x1a8)]=_0x1ca4c7;}catch(_0x1aa6e0){console[_0x311bc5(0x2e2)](_0x311bc5(0x2c8)+_0x54249f+_0x311bc5(0x2db),_0x1aa6e0),_0x304fc4[_0x311bc5(0x277)]=gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4[_0x311bc5(0x1a8)]=ENEMY_TOP_MARGIN;}}else{const _0x4191fa=_0x4ba06f[_0x304fc4['attackPathSegmentIndex']];if(!_0x4191fa?.['p0']){console[_0x311bc5(0x2e2)](_0x311bc5(0x1f0)+_0x54249f+_0x311bc5(0x2af)+_0x304fc4['attackPathSegmentIndex']+_0x311bc5(0x2b0)),_0x47e7de=_0x304fc4['x'],_0x757c97=_0x304fc4['y'],_0x304fc4[_0x311bc5(0x2d4)]=_0x311bc5(0x261);try{const {x:_0x50168f,y:_0x360a17}=getCurrentGridSlotPosition(_0x304fc4[_0x311bc5(0x1e1)],_0x304fc4['gridCol'],_0x21148d);_0x304fc4[_0x311bc5(0x277)]=_0x50168f,_0x304fc4[_0x311bc5(0x1a8)]=_0x360a17;}catch(_0x1e44ef){console[_0x311bc5(0x2e2)](_0x311bc5(0x25d)+_0x304fc4['id']+':',_0x1e44ef),_0x304fc4[_0x311bc5(0x277)]=gameCanvas['width']/0x2,_0x304fc4[_0x311bc5(0x1a8)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0x47e7de=calculateBezierPoint(_0x304fc4['attackPathT'],_0x13c082['p0']['x'],_0x13c082['p1']['x'],_0x13c082['p2']['x'],_0x13c082['p3']['x']),_0x757c97=calculateBezierPoint(_0x304fc4[_0x311bc5(0x1ae)],_0x13c082['p0']['y'],_0x13c082['p1']['y'],_0x13c082['p2']['y'],_0x13c082['p3']['y']);}catch(_0x25367d){console['error'](_0x311bc5(0x2cc)+_0x304fc4['id']+':',_0x25367d),_0x47e7de=_0x304fc4['x'],_0x757c97=_0x304fc4['y'],_0x304fc4['state']=_0x311bc5(0x261);try{const {x:_0x1d2f35,y:_0x5f25f9}=getCurrentGridSlotPosition(_0x304fc4[_0x311bc5(0x1e1)],_0x304fc4[_0x311bc5(0x2b5)],_0x21148d);_0x304fc4['targetGridX']=_0x1d2f35,_0x304fc4['targetGridY']=_0x5f25f9;}catch(_0x44ae2b){console[_0x311bc5(0x2e2)](_0x311bc5(0x2dc)+_0x304fc4['id']+':',_0x44ae2b),_0x304fc4[_0x311bc5(0x277)]=gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4[_0x311bc5(0x1a8)]=ENEMY_TOP_MARGIN;}break;}if(_0x304fc4&&_0x304fc4[_0x311bc5(0x2d4)]===_0x311bc5(0x1a5)){const _0x193b82=_0x304fc4['attackFormationOffsetX']||0x0,_0xdeaed5=_0x47e7de+_0x193b82,_0x1d81e8=_0x757c97;_0x304fc4['velocityX']=_0xdeaed5-_0x177659,_0x304fc4[_0x311bc5(0x24a)]=_0x1d81e8-_0x28cd32,_0x304fc4['x']=_0xdeaed5,_0x304fc4['y']=_0x1d81e8;if(_0x304fc4['y']>gameCanvas[_0x311bc5(0x1ff)]+_0x26941d*1.5){_0x304fc4[_0x311bc5(0x2d4)]=_0x311bc5(0x261),_0x304fc4['attackPathSegmentIndex']=0x0,_0x304fc4['attackPathT']=0x0,_0x304fc4[_0x311bc5(0x2d6)]=0x0,_0x304fc4[_0x311bc5(0x21c)]=0x0,_0x304fc4[_0x311bc5(0x2a4)]=null,_0x304fc4['y']=-_0x26941d*(1.1+Math[_0x311bc5(0x24c)]()*0.4),_0x304fc4['x']=Math['random']()*(gameCanvas[_0x311bc5(0x268)]-_0x21148d),_0x304fc4['velocityX']=0x0,_0x304fc4[_0x311bc5(0x24a)]=0x0;try{const {x:_0x45f9f8,y:_0x2f6cba}=getCurrentGridSlotPosition(_0x304fc4[_0x311bc5(0x1e1)],_0x304fc4[_0x311bc5(0x2b5)],_0x21148d);_0x304fc4[_0x311bc5(0x277)]=_0x45f9f8,_0x304fc4['targetGridY']=_0x2f6cba;}catch(_0x1ed774){console[_0x311bc5(0x2e2)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x54249f+_0x311bc5(0x273),_0x1ed774),_0x304fc4[_0x311bc5(0x277)]=gameCanvas[_0x311bc5(0x268)]/0x2,_0x304fc4['targetGridY']=ENEMY_TOP_MARGIN;}}}break;}case _0x311bc5(0x261):{if(isEntrancePhaseActive)break;if(_0x304fc4[_0x311bc5(0x277)]==null||_0x304fc4[_0x311bc5(0x1a8)]==null){console[_0x311bc5(0x248)](_0x311bc5(0x1f0)+_0x54249f+_0x311bc5(0x22f));try{const {x:_0x448194,y:_0x2a9f5c}=getCurrentGridSlotPosition(_0x304fc4['gridRow'],_0x304fc4[_0x311bc5(0x2b5)],_0x21148d);_0x304fc4[_0x311bc5(0x277)]=_0x448194,_0x304fc4['targetGridY']=_0x2a9f5c;}catch(_0x5f26c5){console[_0x311bc5(0x2e2)](_0x311bc5(0x1aa)+_0x54249f+'\x20in\x20returning',_0x5f26c5),_0x304fc4[_0x311bc5(0x2d4)]='in_grid',_0x304fc4['x']=gameCanvas['width']/0x2,_0x304fc4['y']=ENEMY_TOP_MARGIN;break;}}const _0x2dd518=_0x304fc4['targetGridX'],_0xc2e867=_0x304fc4[_0x311bc5(0x1a8)],_0x1bb32b=_0x2dd518-_0x304fc4['x'],_0x11a556=_0xc2e867-_0x304fc4['y'],_0x3ba65f=Math[_0x311bc5(0x276)](_0x1bb32b*_0x1bb32b+_0x11a556*_0x11a556),_0x656e7f=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x18fc73=BASE_RETURN_SPEED*_0x656e7f,_0xd0bfda=_0x18fc73*0.5;_0x3ba65f>_0xd0bfda?(_0x304fc4[_0x311bc5(0x1b7)]=_0x1bb32b/_0x3ba65f*_0x18fc73,_0x304fc4[_0x311bc5(0x24a)]=_0x11a556/_0x3ba65f*_0x18fc73,_0x304fc4['x']+=_0x304fc4[_0x311bc5(0x1b7)],_0x304fc4['y']+=_0x304fc4['velocityY']):(_0x304fc4['x']=_0x2dd518,_0x304fc4['y']=_0xc2e867,_0x304fc4[_0x311bc5(0x1b7)]=0x0,_0x304fc4['velocityY']=0x0,_0x304fc4[_0x311bc5(0x2d4)]=_0x311bc5(0x1f8),_0x304fc4[_0x311bc5(0x1ce)]=!![],_0x304fc4['attackFormationOffsetX']=0x0,_0x304fc4['attackGroupId']=null,_0x304fc4['hasOwnProperty'](_0x311bc5(0x2bd))&&delete _0x304fc4[_0x311bc5(0x2bd)],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound('gridBackgroundSound',!![],0.1)));break;}}if(_0x304fc4&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){const _0x1c27cd=[_0x311bc5(0x1a5),_0x311bc5(0x238),'following_bezier_path',_0x311bc5(0x2cb)];if(_0x1c27cd[_0x311bc5(0x1c7)](_0x304fc4[_0x311bc5(0x2d4)])){let _0x281074=[];if(isTwoPlayerMode&&selectedGameMode===_0x311bc5(0x233)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x281074['push']({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x281074[_0x311bc5(0x283)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x281074[_0x311bc5(0x283)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(const _0x4dc3ea of _0x281074){const _0x2d4272=_0x4dc3ea[_0x311bc5(0x298)],_0x1ce6fb={'x':_0x304fc4['x'],'y':_0x304fc4['y'],'width':_0x21148d,'height':_0x26941d},_0x5b377a={'x':_0x2d4272['x'],'y':_0x2d4272['y'],'width':_0x2d4272['width'],'height':_0x2d4272['height']},_0x531100=_0x4dc3ea[_0x311bc5(0x28e)]?{'x':_0x2d4272['x']+DUAL_SHIP_OFFSET_X,'y':_0x2d4272['y'],'width':_0x2d4272[_0x311bc5(0x268)],'height':_0x2d4272[_0x311bc5(0x1ff)]}:null;let _0x148d46=![],_0x285ed6=![];if(checkCollision(_0x1ce6fb,_0x5b377a))_0x148d46=!![];else _0x4dc3ea['dual']&&_0x531100&&checkCollision(_0x1ce6fb,_0x531100)&&(_0x148d46=!![],_0x285ed6=!![]);if(_0x148d46){createExplosion(_0x304fc4['x']+_0x21148d/0x2,_0x304fc4['y']+_0x26941d/0x2),playSound(_0x311bc5(0x247),![],0.6),enemies[_0x311bc5(0x1bc)](_0x43ec24,0x1),_0x304fc4=null,handlePlayerShipCollision(_0x4dc3ea[_0x311bc5(0x2bc)],_0x285ed6,_0x43b8b6,![]);if(_0x304fc4===null)break;}}}}if(!_0x304fc4)continue;}if(!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){let _0x3d077f=[];if(isTwoPlayerMode&&selectedGameMode===_0x311bc5(0x233)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x3d077f['push']({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x3d077f[_0x311bc5(0x283)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x3d077f[_0x311bc5(0x283)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(let _0x8e68ab=enemyBullets['length']-0x1;_0x8e68ab>=0x0;_0x8e68ab--){const _0x90cbba=enemyBullets[_0x8e68ab];if(!_0x90cbba){enemyBullets[_0x311bc5(0x1bc)](_0x8e68ab,0x1);continue;}const _0x5cf984={'x':_0x90cbba['x'],'y':_0x90cbba['y'],'width':_0x90cbba[_0x311bc5(0x268)],'height':_0x90cbba['height']};let _0x560303=![];for(const _0x1b1da3 of _0x3d077f){const _0x5c40d5=_0x1b1da3[_0x311bc5(0x298)],_0x34c6e5={'x':_0x5c40d5['x'],'y':_0x5c40d5['y'],'width':_0x5c40d5[_0x311bc5(0x268)],'height':_0x5c40d5[_0x311bc5(0x1ff)]},_0x5d5f5b=_0x1b1da3[_0x311bc5(0x28e)]?{'x':_0x5c40d5['x']+DUAL_SHIP_OFFSET_X,'y':_0x5c40d5['y'],'width':_0x5c40d5['width'],'height':_0x5c40d5['height']}:null;let _0x465eb2=![],_0x58ab6c=![];if(checkCollision(_0x5cf984,_0x34c6e5))_0x465eb2=!![];else _0x1b1da3[_0x311bc5(0x28e)]&&_0x5d5f5b&&checkCollision(_0x5cf984,_0x5d5f5b)&&(_0x465eb2=!![],_0x58ab6c=!![]);if(_0x465eb2){playSound(_0x311bc5(0x247),![],0.6),handlePlayerShipCollision(_0x1b1da3[_0x311bc5(0x2bc)],_0x58ab6c,_0x43b8b6,![]),enemyBullets['splice'](_0x8e68ab,0x1),_0x560303=!![];break;}}if(_0x560303)continue;}}updateHitSparks();}catch(_0xaf5fa){console[_0x311bc5(0x2e2)](_0x311bc5(0x1ed),_0xaf5fa,_0xaf5fa['stack']),isGridSoundPlaying=![],stopSound('gridBackgroundSound'),isEntrancePhaseActive=![],stopSound('entranceSound'),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x311bc5(0x272)),stopSound(_0x311bc5(0x1d2)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x311bc5(0x217))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert('Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.');}}function handlePlayerShipCollision(_0x281771,_0x25254e,_0x421d9c,_0x5af73b=![]){const _0xbd017=_0x49ddb3,_0x4e5ccd=_0x421d9c,_0x276020=gameCanvas?gameCanvas[_0xbd017(0x1ff)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;let _0x2af9c3=0x0,_0xc63bbf=null;if(isTwoPlayerMode&&selectedGameMode==='coop'){_0xc63bbf=_0x281771===0x1?ship1:ship2;if(_0xc63bbf){_0x2af9c3=_0xc63bbf['x'];if(_0x5af73b){if(_0x281771===0x1)player1CaptureRespawnX=_0xc63bbf['x'];else{if(_0x281771===0x2)player2CaptureRespawnX=_0xc63bbf['x'];}}}else{if(_0x281771===0x1&&typeof player1CaptureRespawnX===_0xbd017(0x26a)&&player1CaptureRespawnX!==0x0)_0x2af9c3=player1CaptureRespawnX;else{if(_0x281771===0x2&&typeof player2CaptureRespawnX==='number'&&player2CaptureRespawnX!==0x0)_0x2af9c3=player2CaptureRespawnX;else{if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xbd017(0x232))&&gameCanvas)_0x2af9c3=_0x281771===0x1?gameCanvas[_0xbd017(0x268)]/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2:gameCanvas[_0xbd017(0x268)]/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;else gameCanvas?_0x2af9c3=gameCanvas['width']/0x2-SHIP_WIDTH/0x2:_0x2af9c3=0xc8;}}}}else{_0xc63bbf=ship;if(_0xc63bbf)_0x2af9c3=_0xc63bbf['x'],_0x5af73b&&(capturedShipRespawnX_NormalMode=ship['x']);else _0x5af73b&&capturedShipRespawnX_NormalMode!==0x0?_0x2af9c3=capturedShipRespawnX_NormalMode:_0x2af9c3=gameCanvas?gameCanvas['width']/0x2-SHIP_WIDTH/0x2:0xc8;}if(isTwoPlayerMode&&selectedGameMode===_0xbd017(0x233)){if(_0x281771===0x1){if(_0x5af73b){isPlayer1ShipCaptured=!![],player1IsDualShipActive=![],player1Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xbd017(0x232))coopPartner1CapturedTime=_0x4e5ccd;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x4e5ccd,playSound('gameOverSound',![],0.4),ship1=null,player1NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies[_0xbd017(0x20f)](_0x3a84d7=>_0x3a84d7['id']===capturedBossIdWithMessage)){const _0x2df5e7=enemies['find'](_0xbf57d=>_0xbf57d['id']===capturedBossIdWithMessage);_0x2df5e7&&(_0x2df5e7[_0xbd017(0x20c)]=![],_0x2df5e7[_0xbd017(0x25a)]=null);}}else player1NeedsRespawnAfterCapture=!![],ship1=null;}else{if(player1IsDualShipActive&&ship1){player1IsDualShipActive=![];const _0x24b5dd=_0x25254e?ship1['x']+DUAL_SHIP_OFFSET_X+ship1['width']/0x2:ship1['x']+ship1[_0xbd017(0x268)]/0x2;createExplosion(_0x24b5dd,ship1['y']+ship1[_0xbd017(0x1ff)]/0x2),ship1['x']=_0x2af9c3,ship1['y']=_0x276020,ship1['targetX']=ship1['x'],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x4e5ccd+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x4e5ccd+RESPAWN_DELAY_MS;}else{if(ship1)createExplosion(ship1['x']+ship1['width']/0x2,ship1['y']+ship1['height']/0x2);player1Lives--;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x4e5ccd,playSound(_0xbd017(0x1b4),![],0.4),ship1=null;if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;}else isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x4e5ccd+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x4e5ccd+RESPAWN_DELAY_MS,ship1?(ship1['x']=_0x2af9c3,ship1['y']=_0x276020,ship1[_0xbd017(0x1b5)]=ship1['x']):ship1={'x':_0x2af9c3,'y':_0x276020,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x2af9c3,'id':'p1'};}}}else{if(_0x281771===0x2){if(_0x5af73b){isPlayer2ShipCaptured=!![],player2IsDualShipActive=![],player2Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xbd017(0x232))coopPartner2CapturedTime=_0x4e5ccd;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x4e5ccd,playSound(_0xbd017(0x1b4),![],0.4),ship2=null,player2NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0xbd017(0x28b))aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies[_0xbd017(0x20f)](_0x4e6f0f=>_0x4e6f0f['id']===capturedBossIdWithMessage)){const _0xc1df5a=enemies[_0xbd017(0x20f)](_0x34d8f5=>_0x34d8f5['id']===capturedBossIdWithMessage);_0xc1df5a&&(_0xc1df5a['hasCapturedShip']=![],_0xc1df5a['capturedShipDimensions']=null);}}else player2NeedsRespawnAfterCapture=!![],ship2=null;}else{if(player2IsDualShipActive&&ship2){player2IsDualShipActive=![];const _0x39c8d5=_0x25254e?ship2['x']+DUAL_SHIP_OFFSET_X+ship2[_0xbd017(0x268)]/0x2:ship2['x']+ship2[_0xbd017(0x268)]/0x2;createExplosion(_0x39c8d5,ship2['y']+ship2[_0xbd017(0x1ff)]/0x2),ship2['x']=_0x2af9c3,ship2['y']=_0x276020,ship2[_0xbd017(0x1b5)]=ship2['x'],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x4e5ccd+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x4e5ccd+RESPAWN_DELAY_MS;}else{if(ship2)createExplosion(ship2['x']+ship2[_0xbd017(0x268)]/0x2,ship2['y']+ship2[_0xbd017(0x1ff)]/0x2);player2Lives--;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x4e5ccd,playSound(_0xbd017(0x1b4),![],0.4),ship2=null;if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0xbd017(0x28b))aiPlayerActivelySeekingCaptureById=null;}else isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x4e5ccd+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x4e5ccd+RESPAWN_DELAY_MS,ship2?(ship2['x']=_0x2af9c3,ship2['y']=_0x276020,ship2[_0xbd017(0x1b5)]=_0x2af9c3):ship2={'x':_0x2af9c3,'y':_0x276020,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x2af9c3,'id':'p2'};}}}}player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isDualShipActive&&!_0x5af73b&&_0xc63bbf){isDualShipActive=![];if(isTwoPlayerMode&&selectedGameMode===_0xbd017(0x1ea)){if(_0x281771===0x1)player1IsDualShipActive=![];else{if(_0x281771===0x2)player2IsDualShipActive=![];}}else{if(!isTwoPlayerMode)player1IsDualShipActive=![];}const _0x1f8ae5=_0x25254e?_0x2af9c3+DUAL_SHIP_OFFSET_X+SHIP_WIDTH/0x2:_0x2af9c3+SHIP_WIDTH/0x2;createExplosion(_0x1f8ae5,_0x276020+SHIP_HEIGHT/0x2);ship&&(ship['x']=_0x2af9c3,ship['y']=_0x276020,ship[_0xbd017(0x1b5)]=ship['x']);isInvincible=!![],invincibilityEndTime=_0x4e5ccd+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x4e5ccd+RESPAWN_DELAY_MS;if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0xbd017(0x1ea)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}else{if(!_0x5af73b&&_0xc63bbf)createExplosion(_0x2af9c3+SHIP_WIDTH/0x2,_0x276020+SHIP_HEIGHT/0x2);if(_0x5af73b){isShipCaptured=!![];if(ship)ship=null;}playerLives--;if(playerLives<=0x0){playerLives=0x0;if(isTwoPlayerMode&&selectedGameMode===_0xbd017(0x1ea)){if(_0x281771===0x1)player1Lives=0x0;else{if(_0x281771===0x2)player2Lives=0x0;}isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x4e5ccd,playerWhoIsGameOver=_0x281771,playSound('gameOverSound',![],0.4);const _0x398818=_0x281771===0x1?0x2:0x1,_0x1ade77=_0x398818===0x1?player1Lives:player2Lives;_0x1ade77>0x0?nextActionAfterPlayerGameOver=_0xbd017(0x286):nextActionAfterPlayerGameOver=_0xbd017(0x1cf);bullets=[],enemyBullets=[],explosions=[];if(!(_0x1ade77>0x0))ship=null;}else player1Lives=0x0,ship=null,playSound(_0xbd017(0x1b4),![],0.4),triggerFinalGameOverSequence();}else{if(isTwoPlayerMode&&selectedGameMode===_0xbd017(0x1ea)){if(_0x281771===0x1)player1Lives=playerLives;else player2Lives=playerLives;}if(!_0x5af73b){isInvincible=!![],invincibilityEndTime=_0x4e5ccd+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x4e5ccd+RESPAWN_DELAY_MS;if(ship&&gameCanvas){ship['x']=_0x2af9c3,ship['y']=_0x276020,ship[_0xbd017(0x1b5)]=ship['x'];if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0xbd017(0x1ea)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}}if(_0x5af73b)isDualShipActive=![];}}}if(!_0x5af73b)fallingShips=[];}function switchPlayerTurn(){const _0x3973ca=_0x49ddb3;if(!isTwoPlayerMode||selectedGameMode===_0x3973ca(0x233))return![];stopSound(_0x3973ca(0x1a3));if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive;if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive;if(player2Score>highScore)highScore=player2Score;}const _0x1a547c=currentPlayer===0x1?0x2:0x1,_0x592011=_0x1a547c===0x1?player1Lives:player2Lives;if(_0x592011<=0x0){const _0x4ca334=currentPlayer===0x1?player1Lives:player2Lives;return _0x4ca334<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x1a547c,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x3d67e3=_0x49ddb3;if(isPaused||!isInGameState||isChallengingStage||isWaveTransitioning)return;let _0x2ec3a7=![];isTwoPlayerMode&&selectedGameMode===_0x3d67e3(0x233)?(player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)&&(_0x2ec3a7=!![]):playerLives>0x0&&ship&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(_0x2ec3a7=!![]);if(!_0x2ec3a7)return;const _0xcb53ed=enemies[_0x3d67e3(0x1d5)](_0x2e15a7=>_0x2e15a7&&_0x2e15a7[_0x3d67e3(0x2d4)]===_0x3d67e3(0x1f8));if(_0xcb53ed[_0x3d67e3(0x2a3)]===0x0)return;const _0xb803fa=Date[_0x3d67e3(0x28d)](),_0x495d9a=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0xb803fa-lastGridFireCheckTime<_0x495d9a)return;lastGridFireCheckTime=_0xb803fa;const _0x1a8cb5=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x22d2d6=Math[_0x3d67e3(0x249)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x793250=0x0;_0xcb53ed[_0x3d67e3(0x2a5)](()=>Math[_0x3d67e3(0x24c)]()-0.5);for(const _0x4c772a of _0xcb53ed){if(_0x793250>=_0x22d2d6)break;if(_0x4c772a['type']===ENEMY2_TYPE||_0x4c772a[_0x3d67e3(0x22c)]===ENEMY3_TYPE){if(_0x4c772a[_0x3d67e3(0x22c)]===ENEMY3_TYPE&&_0x4c772a['hasCapturedShip'])continue;Math[_0x3d67e3(0x24c)]()<_0x1a8cb5&&(createBulletSimple(_0x4c772a)&&(playSound(_0x3d67e3(0x1e0),![],0.4),_0x4c772a[_0x3d67e3(0x2d6)]=_0xb803fa,_0x793250++));}}}function runSingleGameUpdate(_0x59e3b4){const _0x4c4107=_0x49ddb3;try{const _0x14fa12=Date[_0x4c4107(0x28d)]();let _0x4b9288=![];isTwoPlayerMode&&selectedGameMode===_0x4c4107(0x233)?_0x4b9288=player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture:_0x4b9288=playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;let _0x3098d9=![];if(isManualControl&&connectedGamepadIndex!==null){if(isTwoPlayerMode&&selectedGameMode===_0x4c4107(0x233)){if(player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage)_0x3098d9=!![];}else{if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1))_0x3098d9=!![];}}if(_0x3098d9&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x838c3b=navigator['getGamepads']();if(_0x838c3b?.[connectedGamepadIndex]){const _0x429577=_0x838c3b[connectedGamepadIndex],_0x32a160=processSingleController(_0x429577,previousGameButtonStates);previousGameButtonStates=_0x32a160[_0x4c4107(0x2df)]['slice']();if(_0x32a160['back']){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x4c4107(0x2a3)]>0x0)previousGameButtonStates=[];}}else connectedGamepadIndex===null&&previousGameButtonStates['length']>0x0&&(previousGameButtonStates=[]);let _0x3a4a3b=![];if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x4c4107(0x233)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage)_0x3a4a3b=!![];}else{if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x4c4107(0x1ea)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&currentPlayer===0x2)_0x3a4a3b=!![];}}if(_0x3a4a3b&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x4b09f1=navigator['getGamepads']();if(_0x4b09f1?.[connectedGamepadIndexP2]){const _0x1e6981=_0x4b09f1[connectedGamepadIndexP2],_0xb8fb75=processSingleController(_0x1e6981,previousGameButtonStatesP2);previousGameButtonStatesP2=_0xb8fb75[_0x4c4107(0x2df)][_0x4c4107(0x2a6)]();if(_0xb8fb75[_0x4c4107(0x27a)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStatesP2[_0x4c4107(0x2a3)]>0x0)previousGameButtonStatesP2=[];}}else connectedGamepadIndexP2===null&&previousGameButtonStatesP2['length']>0x0&&(previousGameButtonStatesP2=[]);if(isPaused){renderGame();return;}const _0xd02f4c=showCsBonusScoreMessage||showPerfectMessage;if(isCoopAIDemoActive&&_0xd02f4c&&gameCanvas?.[_0x4c4107(0x268)]>0x0){const _0x169188=ship1&&player1Lives>0x0&&player2Lives<=0x0,_0x1e2388=ship2&&player2Lives>0x0&&player1Lives<=0x0;if(_0x169188){const _0x437852=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x1931f8=Math[_0x4c4107(0x249)](gameCanvas[_0x4c4107(0x268)]/0x2-_0x437852/0x2);ship1['x']=_0x1931f8,ship1[_0x4c4107(0x1b5)]=_0x1931f8,smoothedShip1X=_0x1931f8,ship2&&(ship2['targetX']=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x1e2388){const _0x552cd3=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x4572a1=Math[_0x4c4107(0x249)](gameCanvas[_0x4c4107(0x268)]/0x2-_0x552cd3/0x2);ship2['x']=_0x4572a1,ship2[_0x4c4107(0x1b5)]=_0x4572a1,smoothedShip2X=_0x4572a1,ship1&&(ship1['targetX']=ship1['x'],smoothedShip1X=ship1['x']);}else{if(ship1&&player1Lives>0x0&&ship2&&player2Lives>0x0){const _0x1a2cf0=gameCanvas['width']/0x2-gameCanvas[_0x4c4107(0x268)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1['x']=_0x1a2cf0,ship1[_0x4c4107(0x1b5)]=_0x1a2cf0,smoothedShip1X=_0x1a2cf0;const _0x43f4fc=gameCanvas[_0x4c4107(0x268)]/0x2+gameCanvas[_0x4c4107(0x268)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2['x']=_0x43f4fc,ship2[_0x4c4107(0x1b5)]=_0x43f4fc,smoothedShip2X=_0x43f4fc;}}}}else{if(_0xd02f4c&&gameCanvas?.['width']>0x0){if(isTwoPlayerMode&&selectedGameMode===_0x4c4107(0x233)){const _0x2d19b8=ship1&&player1Lives>0x0,_0x98ddb9=ship2&&player2Lives>0x0;if(_0x2d19b8&&_0x98ddb9){if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232)){const _0x44e2d8=gameCanvas[_0x4c4107(0x268)]/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x195324=gameCanvas['width']/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['x']=_0x195324,ship2[_0x4c4107(0x1b5)]=_0x195324,smoothedShip2X=_0x195324);}}else{if(_0x2d19b8&&ship1){const _0x367929=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x3a82eb=Math[_0x4c4107(0x249)](gameCanvas['width']/0x2-_0x367929/0x2);ship1['x']=_0x3a82eb,ship1['targetX']=_0x3a82eb,ship2&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&(ship2[_0x4c4107(0x1b5)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x98ddb9&&ship2){const _0x401d84=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x52a66a=Math['round'](gameCanvas[_0x4c4107(0x268)]/0x2-_0x401d84/0x2);ship2['x']=_0x52a66a,ship2[_0x4c4107(0x1b5)]=_0x52a66a;if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232))smoothedShip2X=_0x52a66a;ship1&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232)&&(ship1[_0x4c4107(0x1b5)]=ship1['x']);}}}}else{if((!isManualControl||isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)&&ship){const _0x4b47bb=isDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH;ship['x']=Math[_0x4c4107(0x249)](gameCanvas[_0x4c4107(0x268)]/0x2-_0x4b47bb/0x2),ship[_0x4c4107(0x1b5)]=ship['x'];if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)smoothedShipX=ship['x'];else{if(!isManualControl)smoothedShipX=ship['x'];}}}}}let _0x2bef57=![];if(selectedGameMode===_0x4c4107(0x233)&&level===0x1&&coopPlayersReadyStartTime>0x0){_0x2bef57=!![];if(isShowingCoopPlayersReady){if(_0x14fa12-coopPlayersReadyStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(_0x14fa12>=coopPlayersReadyStartTime+0xbb8){isShowingCoopPlayersReady=![],explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232)?(isShowingIntro=!![],introStep=0x2,introDisplayStartTime=_0x14fa12):(isShowingIntro=!![],introStep=0x1,introDisplayStartTime=_0x14fa12);}}else{if(isShowingIntro){if(_0x14fa12-introDisplayStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}let _0x21cb9a=INTRO_DURATION_PER_STEP;introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232))&&(_0x21cb9a=TWO_PLAYER_STAGE_INTRO_DURATION);if(_0x14fa12>=introDisplayStartTime+_0x21cb9a){if(introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232))){introStep=0x2,introDisplayStartTime=_0x14fa12,explosions=[];if(typeof updateExplosions==='function')updateExplosions();}else{isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();_0x2bef57=![],coopPlayersReadyStartTime=0x0;}}}else _0x2bef57=![],coopPlayersReadyStartTime=0x0;}if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')handlePlayerInput();if(typeof moveEntities===_0x4c4107(0x217))moveEntities();renderGame();if(_0x2bef57)return;}if(selectedGameMode===_0x4c4107(0x233)&&level===0x1&&!gameJustStartedAndWaveLaunched&&coopPlayersReadyStartTime===0x0&&gameJustStarted){if(isFullGridWave)startFullGridWave();else{if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x4c4107(0x2a3)]>0x0)scheduleEntranceFlightWave();else isWaveTransitioning=!![],readyForNextWaveReset=!![];}}gameJustStartedAndWaveLaunched=!![],gameJustStarted=![];}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode&&selectedGameMode==='normal'){if(_0x14fa12-playerGameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}if(_0x14fa12-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();const _0xf8fde2=playerWhoIsGameOver;playerWhoIsGameOver=0x0;if(nextActionAfterPlayerGameOver===_0x4c4107(0x286))switchPlayerTurn()?(_0xf8fde2===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,player1MaxLevelReached=Math[_0x4c4107(0x221)](player1MaxLevelReached,level)),resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();else nextActionAfterPlayerGameOver===_0x4c4107(0x1cf)?triggerFinalGameOverSequence():triggerFinalGameOverSequence();renderGame();return;}else{renderGame();return;}}if(isTwoPlayerMode&&selectedGameMode===_0x4c4107(0x233)){let _0x36db61=![],_0x3cf9ca=![];if(isPlayer1ShowingGameOverMessage){if(_0x14fa12-player1GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}if(_0x14fa12-player1GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer1ShowingGameOverMessage=![],_0x36db61=!![],explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}}if(isPlayer2ShowingGameOverMessage){if(_0x14fa12-player2GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}if(_0x14fa12-player2GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer2ShowingGameOverMessage=![],_0x3cf9ca=!![],explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}}if(_0x36db61||_0x3cf9ca){player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232))handlePlayerInput();if(typeof moveEntities===_0x4c4107(0x217))moveEntities();renderGame();if(gameOverSequenceStartTime>0x0||player1Lives>0x0||player2Lives>0x0)return;}else{if(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232))handlePlayerInput();if(typeof moveEntities==='function')moveEntities();renderGame();return;}}}if(isShowingCaptureMessage){if(_0x14fa12-captureMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}const _0x3ed23a=enemies[_0x4c4107(0x20f)](_0x2dc677=>_0x2dc677['id']===capturedBossIdWithMessage);if(_0x3ed23a&&_0x3ed23a[_0x4c4107(0x2d4)]===_0x4c4107(0x2d3)){const _0x46affd=_0x14fa12-captureMessageStartTime,_0x186db0=Math[_0x4c4107(0x20a)](0x1,_0x46affd/CAPTURE_MESSAGE_DURATION);_0x3ed23a['captureAnimationRotation']=_0x186db0*0x2*(0x2*Math['PI']);}else _0x3ed23a&&(_0x3ed23a[_0x4c4107(0x1c6)]=0x0);if(isInGameState&&!isShowingPlayerGameOverMessage&&!isPlayer1ShowingGameOverMessage&&!isPlayer2ShowingGameOverMessage&&gameOverSequenceStartTime===0x0){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')handlePlayerInput();if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232))aiControlCoop();else isPlayerTwoAI&&selectedGameMode===_0x4c4107(0x1ea)&&currentPlayer===0x2&&aiControl();if(typeof moveEntities===_0x4c4107(0x217))moveEntities();updateExplosions(),updateFloatingScores();}if(_0x14fa12-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();stopSound(_0x4c4107(0x1d2)),captureBeamActive=![];if(_0x3ed23a&&_0x3ed23a[_0x4c4107(0x2d4)]===_0x4c4107(0x2d3)){_0x3ed23a[_0x4c4107(0x2d4)]='returning',_0x3ed23a[_0x4c4107(0x1c6)]=0x0;try{const _0x4c8f8b=_0x3ed23a[_0x4c4107(0x22c)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x2bf625,y:_0x18d8d4}=getCurrentGridSlotPosition(_0x3ed23a[_0x4c4107(0x1e1)],_0x3ed23a[_0x4c4107(0x2b5)],_0x4c8f8b);_0x3ed23a['targetGridX']=_0x2bf625,_0x3ed23a[_0x4c4107(0x1a8)]=_0x18d8d4;}catch(_0x5039eb){console[_0x4c4107(0x2e2)](_0x4c4107(0x1ca)+_0x3ed23a['id']+':',_0x5039eb),_0x3ed23a[_0x4c4107(0x277)]=gameCanvas['width']/0x2,_0x3ed23a[_0x4c4107(0x1a8)]=ENEMY_TOP_MARGIN;}}else _0x3ed23a&&(_0x3ed23a[_0x4c4107(0x1c6)]=0x0);capturedBossIdWithMessage=null;const _0x28333b=gameCanvas?gameCanvas[_0x4c4107(0x1ff)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(isTwoPlayerMode&&selectedGameMode===_0x4c4107(0x233)){if(player1NeedsRespawnAfterCapture&&player1Lives>0x0){ship1={'x':player1CaptureRespawnX,'y':_0x28333b,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player1CaptureRespawnX,'id':'p1'},isPlayer1ShipCaptured=![],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x14fa12+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=![],player1NeedsRespawnAfterCapture=![],player1CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')smoothedShip1X=ship1['x'];}if(player2NeedsRespawnAfterCapture&&player2Lives>0x0){ship2={'x':player2CaptureRespawnX,'y':_0x28333b,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player2CaptureRespawnX,'id':'p2'},isPlayer2ShipCaptured=![],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x14fa12+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=![],player2NeedsRespawnAfterCapture=![],player2CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232))smoothedShip2X=ship2['x'];}if(player1Lives<=0x0&&player2Lives<=0x0){if(gameOverSequenceStartTime===0x0)triggerFinalGameOverSequence();}}else{if(!isManualControl&&!isPlayerTwoAI){if(isShipCaptured&&playerLives>0x0){let _0x16b312=gameCanvas?gameCanvas[_0x4c4107(0x268)]/0x2-SHIP_WIDTH/0x2:0xc8;if(typeof smoothedShipX===_0x4c4107(0x26a))_0x16b312=smoothedShipX;ship={'x':_0x16b312,'y':_0x28333b,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x16b312,'id':'main'},isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x14fa12+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=![],aiNeedsStabilization=!![];if(smoothedShipX===undefined&&ship)smoothedShipX=ship['x'];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isManualControl){if(isShipCaptured&&playerLives>0x0){let _0x3359c9=capturedShipRespawnX_NormalMode!==0x0?capturedShipRespawnX_NormalMode:gameCanvas?gameCanvas['width']/0x2-SHIP_WIDTH/0x2:0xc8;ship={'x':_0x3359c9,'y':_0x28333b,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x3359c9,'id':_0x4c4107(0x289)},isShipCaptured=![],capturedShipRespawnX_NormalMode=0x0,isInvincible=!![],invincibilityEndTime=_0x14fa12+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x14fa12+RESPAWN_DELAY_MS;if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)aiNeedsStabilization=!![];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&((!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode===_0x4c4107(0x1ea)&&(currentPlayer===0x1&&player2Lives<=0x0||currentPlayer===0x2&&player1Lives<=0x0))&&triggerFinalGameOverSequence());}}}}renderGame();return;}const _0x1299b9=!(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage||isShowingPlayerGameOverMessage),_0x394531=isShowingIntro&&!_0x2bef57&&!(selectedGameMode===_0x4c4107(0x233)&&level===0x1);if(!_0x2bef57&&gameOverSequenceStartTime===0x0&&_0x4b9288&&!isShowingCaptureMessage&&_0x1299b9){if(isInGameState&&!_0x394531){if(!(_0xd02f4c&&!isManualControl)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232))aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x4c4107(0x1ea)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}}isManualControl&&handlePlayerInput();}}isTwoPlayerMode&&selectedGameMode===_0x4c4107(0x233)?(isPlayer1Invincible&&_0x14fa12>=player1InvincibilityEndTime&&(isPlayer1Invincible=![],player1InvincibilityEndTime=0x0),isPlayer2Invincible&&_0x14fa12>=player2InvincibilityEndTime&&(isPlayer2Invincible=![],player2InvincibilityEndTime=0x0)):(isInvincible&&_0x14fa12>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0),isWaitingForRespawn&&_0x14fa12>=respawnTime&&(isWaitingForRespawn=![]));const _0x3b2fd5=showExtraLifeMessage&&_0x14fa12-extraLifeMessageStartTime<0x64;if(_0x3b2fd5&&(isWaveTransitioning||isChallengingStage&&enemies['length']===0x0)){}if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&isChallengingStage&&enemies[_0x4c4107(0x2a3)]===0x0&&!isCsCompletionDelayActive&&!showCsBonusScoreMessage&&!showPerfectMessage&&gameCanvas&&gameCanvas[_0x4c4107(0x268)]>0x0){const _0x3b8140=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage,_0x250e37=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage;if(_0x3b8140&&!_0x250e37){const _0x9978b4=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0xbe5429=Math['round'](gameCanvas[_0x4c4107(0x268)]/0x2-_0x9978b4/0x2);ship1['x']=_0xbe5429,ship1[_0x4c4107(0x1b5)]=_0xbe5429,smoothedShip1X=_0xbe5429;}else{if(_0x250e37&&!_0x3b8140){const _0x25af6e=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x57ceb9=Math[_0x4c4107(0x249)](gameCanvas[_0x4c4107(0x268)]/0x2-_0x25af6e/0x2);ship2['x']=_0x57ceb9,ship2['targetX']=_0x57ceb9,smoothedShip2X=_0x57ceb9;}}}if(isCsCompletionDelayActive&&_0x1299b9&&gameOverSequenceStartTime===0x0){if(_0x14fa12-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY+EXPLOSION_DURATION){isCsCompletionDelayActive=![],csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies;csCompletionResultIsPerfect?(playSound(_0x4c4107(0x2ea),![],0.6),showCsHitsMessage=!![],csHitsMessageStartTime=_0x14fa12):(playSound(_0x4c4107(0x284),![],0.6),showCSClearMessage=!![],csClearMessageStartTime=_0x14fa12);bullets=[],enemyBullets=[],renderGame();return;}else{if(_0x14fa12-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY&&explosions[_0x4c4107(0x2a3)]>0x0){updateExplosions(),renderGame();return;}else{if(_0x14fa12-csCompletionDelayStartTime<CS_COMPLETION_MESSAGE_DELAY){renderGame();return;}}}}let _0x56f4f3=![],_0x5b2de3=![];if(_0x1299b9&&gameOverSequenceStartTime===0x0&&!isShowingCoopPlayersReady&&!_0x2bef57){if(showCsHitsMessage){if(_0x14fa12-csHitsMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}if(Date[_0x4c4107(0x28d)]()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION){showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x14fa12,explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}_0x5b2de3=!![];}else{if(showPerfectMessage){if(_0x14fa12-perfectMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(Date[_0x4c4107(0x28d)]()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION){showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x14fa12,explosions=[];if(typeof updateExplosions==='function')updateExplosions();}_0x5b2de3=!![];}else{if(showCsBonusScoreMessage){if(_0x14fa12-csBonusScoreMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}if(Date[_0x4c4107(0x28d)]()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION){showCsBonusScoreMessage=![],_0x56f4f3=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}_0x5b2de3=!![];}else{if(showCSClearMessage){if(_0x14fa12-csClearMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}Date[_0x4c4107(0x28d)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]);Date[_0x4c4107(0x28d)]()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]);if(Date[_0x4c4107(0x28d)]()-csClearMessageStartTime>=CS_CLEAR_DELAY){showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x56f4f3=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}_0x5b2de3=!![];}else{if(showExtraLifeMessage)Date['now']()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![]),_0x5b2de3=!![];else{if(showReadyMessage){if(_0x14fa12-readyMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}if(Date[_0x4c4107(0x28d)]()-readyMessageStartTime>READY_MESSAGE_DURATION){showReadyMessage=![],_0x56f4f3=!![],explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}_0x5b2de3=!![];}}}}}}}if(_0x5b2de3&&!_0x56f4f3&&!isShowingCoopPlayersReady&&!_0x2bef57&&!isShowingCaptureMessage&&_0x1299b9){if(!((_0xd02f4c||showCsHitsMessage||showCSClearMessage)&&isManualControl)&&!showExtraLifeMessage){renderGame();return;}}if(_0x394531&&_0x1299b9&&gameOverSequenceStartTime===0x0){let _0x5c7679=![];const _0x105cd7=_0x14fa12-introDisplayStartTime;let _0x2d917f=INTRO_DURATION_PER_STEP;const _0x539c31=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x24b),_0x155bd2=isTwoPlayerMode&&selectedGameMode===_0x4c4107(0x1ea)&&!isPlayerTwoAI;(_0x155bd2||_0x539c31)&&(_0x2d917f=TWO_PLAYER_STAGE_INTRO_DURATION);if(introStep===0x1){if(_0x105cd7<0x64){explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}let _0x40f1e7=null,_0x35ea9c=0x1;if(!playerIntroSoundPlayed){const _0x313d98=_0x539c31||_0x155bd2,_0x49174f=isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&level>0x1;if(_0x313d98){if(currentPlayer===0x1&&level===0x1&&!initialGameStartSoundPlayedThisSession)_0x40f1e7='startSound',_0x35ea9c=0.4;else(currentPlayer===0x2||level>0x1)&&(_0x40f1e7=_0x4c4107(0x1c4),_0x35ea9c=0.2);}else{if(_0x49174f)_0x40f1e7=_0x4c4107(0x1c4),_0x35ea9c=0.2;else{if(!isTwoPlayerMode){if(level===0x1&&!initialGameStartSoundPlayedThisSession)_0x40f1e7='startSound',_0x35ea9c=0.4;else level>0x1&&(_0x40f1e7='levelUpSound',_0x35ea9c=0.2);}}}}_0x40f1e7&&(playSound(_0x40f1e7,![],_0x35ea9c),playerIntroSoundPlayed=!![],_0x40f1e7===_0x4c4107(0x1e3)&&(initialGameStartSoundPlayedThisSession=!![]));if(_0x105cd7>=_0x2d917f){if(isChallengingStage)introStep=0x3;else introStep=0x2;introDisplayStartTime=_0x14fa12,explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}else{if(introStep===0x2){if(_0x105cd7<0x64){explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}if(!stageIntroSoundPlayed){if(playLevelUpAfterCSBonus&&(isTwoPlayerMode&&selectedGameMode==='coop'))playSound('levelUpSound',![],0.2),playLevelUpAfterCSBonus=![],stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x4c4107(0x233)&&!isPlayerTwoAI&&!isCoopAIDemoActive&&level===0x1)playSound(_0x4c4107(0x1c4),![],0.2),stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x4c4107(0x233)&&!isPlayerTwoAI&&!isCoopAIDemoActive&&level>0x1)playSound(_0x4c4107(0x1c4),![],0.2),stageIntroSoundPlayed=!![];else{if(selectedGameMode==='coop'){if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&level>0x1)playSound(_0x4c4107(0x1c4),![],0.2),stageIntroSoundPlayed=!![];else(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232))&&level===0x1&&(stageIntroSoundPlayed=!![]);}else{if(!isTwoPlayerMode&&level>0x1)playSound('levelUpSound',![],0.2),stageIntroSoundPlayed=!![];else{if(level>0x1&&!playerIntroSoundPlayed&&!(isPlayerTwoAI&&selectedGameMode===_0x4c4107(0x1ea))&&!initialGameStartSoundPlayedThisSession)playSound(_0x4c4107(0x1c4),![],0.2),stageIntroSoundPlayed=!![];else level===0x1&&!isManualControl&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x4c4107(0x233))&&!initialGameStartSoundPlayedThisSession&&(playSound(_0x4c4107(0x1e3),![],0.4),initialGameStartSoundPlayedThisSession=!![],stageIntroSoundPlayed=!![]);}}}}}}if(_0x105cd7>=_0x2d917f){_0x5c7679=!![],explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}}else{if(introStep===0x3){if(_0x105cd7<0x64){explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}!csIntroSoundPlayed&&(playSound(_0x4c4107(0x23b),![],0.4),csIntroSoundPlayed=!![],stageIntroSoundPlayed=!![]);if(_0x105cd7>=_0x2d917f){_0x5c7679=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}}}if(isInGameState&&_0x1299b9&&gameOverSequenceStartTime===0x0&&gameCanvas){let _0x292e12=null,_0x4e49bb=null;const _0x1930da=isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x24b)&&currentPlayer===0x1&&isShowingIntro;if(_0x1930da){let _0x497592=![],_0xb9602a=![];const _0x2f8209=navigator[_0x4c4107(0x200)]();if(connectedGamepadIndex!==null&&_0x2f8209?.[connectedGamepadIndex]){const _0x574507=_0x2f8209[connectedGamepadIndex],_0x11c798=processSingleController(_0x574507,previousGameButtonStates);_0x497592=_0x11c798[_0x4c4107(0x226)],_0xb9602a=_0x11c798[_0x4c4107(0x2be)];}_0x292e12=keyboardP1LeftDown||_0x497592,_0x4e49bb=keyboardP1RightDown||_0xb9602a;}if(_0x539c31&&currentPlayer===0x2)aiControl();else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232))aiControlCoop();else!isManualControl&&!isPlayerTwoAI&&aiControl();}typeof moveEntities===_0x4c4107(0x217)&&moveEntities(_0x292e12,_0x4e49bb),updateExplosions(),updateFloatingScores();}if(_0x5c7679){isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![];isManualControl&&(isShowingDemoText=![]);if(!isChallengingStage)isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232)?(aiShip1CanShootTime=Date[_0x4c4107(0x28d)]()+0x3e8,aiShip2CanShootTime=Date[_0x4c4107(0x28d)]()+0x4b0):aiCanShootTime=Date[_0x4c4107(0x28d)]()+(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x24b)?0x3e8:0xbb8);else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232))aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0;else aiCanShootTime=0x0;}const _0x29b153=level===0x1&&selectedGameMode!==_0x4c4107(0x233),_0x22399f=level===0x1&&selectedGameMode==='coop',_0xe3673=_0x29b153&&!gameJustStartedAndWaveLaunched||level>0x1||isChallengingStage||_0x22399f&&!gameJustStartedAndWaveLaunched;if(_0xe3673){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x4c4107(0x2a3)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound('entranceSound',![],0.4);}else isEntrancePhaseActive=![],stopSound('entranceSound'),isWaveTransitioning=!![],readyForNextWaveReset=!![],bullets=[],enemyBullets=[],explosions=[],setTimeout(()=>{const _0x5234e3=_0x4c4107,_0x3dc566=isTwoPlayerMode&&selectedGameMode==='coop'?player1Lives>0x0||player2Lives>0x0:playerLives>0x0;if((isInGameState||!isInGameState&&_0x3dc566)&&typeof resetWaveInternal===_0x5234e3(0x217)){if(_0x3dc566)resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![];else triggerFinalGameOverSequence();}},0x64);}if(_0x29b153||level>0x1||isChallengingStage||_0x22399f)gameJustStartedAndWaveLaunched=!![];}}isManualControl&&_0x394531&&_0x1299b9&&gameOverSequenceStartTime===0x0&&handlePlayerInput();renderGame();return;}const _0x41848d=!_0x2bef57&&!_0x394531&&!_0x56f4f3&&!isShowingCaptureMessage;if(gameJustStarted&&_0x41848d){if(!gameJustStartedAndWaveLaunched){const _0x11b06d=selectedGameMode==='coop'&&level===0x1&&coopPlayersReadyStartTime!==0x0;if(!_0x11b06d){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x4c4107(0x2a3)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound('entranceSound',![],0.4);}else isWaveTransitioning=!![],readyForNextWaveReset=!![];}gameJustStartedAndWaveLaunched=!![];}}gameJustStarted=![];}if(_0x41848d&&isInGameState&&_0x1299b9&&gameOverSequenceStartTime===0x0){if(!_0xd02f4c||_0xd02f4c&&isManualControl){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}isManualControl&&handlePlayerInput();if(typeof moveEntities===_0x4c4107(0x217))moveEntities();updateExplosions(),updateFloatingScores();}else _0xd02f4c&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232))&&(updateExplosions(),updateFloatingScores());}if(_0x41848d&&_0x1299b9&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&_0x4b9288){const _0x1ddcb6=enemies['some'](_0x1c8161=>_0x1c8161?.[_0x4c4107(0x2d4)]==='in_grid');if(_0x1ddcb6&&isGridBreathingActive){const _0xe4c34d=_0x14fa12-gridBreathStartTime,_0x3dbbfd=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0xf309e4=_0xe4c34d%_0x3dbbfd;currentGridBreathFactor=(Math[_0x4c4107(0x26b)](_0xf309e4/_0x3dbbfd*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x1ddcb6&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x1ddcb6&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x14fa12,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x4714ad=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x191637=enemies[_0x4c4107(0x236)](_0x286e8d=>_0x286e8d?.[_0x4c4107(0x2d4)]==='following_entrance_path'||_0x286e8d?.['state']==='moving_to_grid'||_0x286e8d?.['state']===_0x4c4107(0x1a9));if(totalEnemiesScheduledForWave>0x0&&_0x4714ad&&!_0x191637){const _0x14adc2=isEntrancePhaseActive;isEntrancePhaseActive=![];if(_0x14adc2){stopSound('entranceSound'),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![];if(!isChallengingStage&&!isFullGridWave){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232))coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=Date[_0x4c4107(0x28d)]()+COOP_AI_CAPTURE_DIVE_ANTICIPATION_DURATION_MS,typeof triggerImmediateCaptureDive===_0x4c4107(0x217)&&triggerImmediateCaptureDive();else typeof triggerImmediateCaptureDive===_0x4c4107(0x217)&&triggerImmediateCaptureDive();}}}}if(!isChallengingStage&&!_0x394531&&!isPaused&&!isWaveTransitioning)triggerGridFiring();if(!isWaveTransitioning&&_0x4b9288&&!_0x394531&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x1fc258=enemies['length']===0x0,_0x442823=fallingShips['length']===0x0,_0x5e9e3b=![];if(isChallengingStage){if(_0x1fc258&&!isEntrancePhaseActive)_0x5e9e3b=!![];}else{if(_0x1fc258&&!isEntrancePhaseActive&&_0x442823)_0x5e9e3b=!![];}if(_0x5e9e3b){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&gameCanvas&&gameCanvas[_0x4c4107(0x268)]>0x0){const _0x327c11=player1Lives,_0x10c463=player2Lives,_0x2000ff=gameCanvas[_0x4c4107(0x1ff)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(_0x327c11>0x0&&_0x10c463<=0x0&&ship1){const _0x587dd5=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x4f1131=Math[_0x4c4107(0x249)](gameCanvas['width']/0x2-_0x587dd5/0x2);ship1['x']=_0x4f1131,ship1[_0x4c4107(0x1b5)]=_0x4f1131,smoothedShip1X=_0x4f1131,ship1['y']=_0x2000ff;}else{if(_0x10c463>0x0&&_0x327c11<=0x0&&ship2){const _0x1cd755=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x3fa65c=Math['round'](gameCanvas['width']/0x2-_0x1cd755/0x2);ship2['x']=_0x3fa65c,ship2[_0x4c4107(0x1b5)]=_0x3fa65c,smoothedShip2X=_0x3fa65c,ship2['y']=_0x2000ff;}}}isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(_0x4c4107(0x25f)),isGridSoundPlaying=![]);!isChallengingStage&&(bullets=[],enemyBullets=[]);floatingScores=[],enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;let _0x4078a1;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,setTimeout(()=>{const _0x512dd5=_0x4c4107;if(isWaveTransitioning){explosions=[];if(typeof updateExplosions===_0x512dd5(0x217))updateExplosions();isCsCompletionDelayActive=!![],csCompletionDelayStartTime=Date[_0x512dd5(0x28d)]();}},EXPLOSION_DURATION);if(csCompletionResultIsPerfect){let _0x31df9d=0x2710;if(isTwoPlayerMode&&selectedGameMode===_0x4c4107(0x233)){if(player1Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232))&&ship1){player1Score+=_0x31df9d;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x4c4107(0x1b0),!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2));else player1Score===highScore&&highScoreHolderId!=='player1'&&highScore>0x0&&(highScoreHolderId=_0x4c4107(0x1b0),!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x4c4107(0x1a3),![],0.2)));}if(player2Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4c4107(0x232))&&ship2){player2Score+=_0x31df9d;const _0x52771d=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?isCoopAIDemoActive?_0x4c4107(0x22b):'ai_p2':'player2';if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x52771d,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x4c4107(0x1a3),![],0.2));else player2Score===highScore&&highScoreHolderId!==_0x52771d&&highScore>0x0&&(highScoreHolderId=_0x52771d,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x4c4107(0x1a3),![],0.2)));}checkAndAwardExtraLife(null);}else{score+=_0x31df9d;if(!isTwoPlayerMode)player1Score=score;else{if(isTwoPlayerMode&&selectedGameMode===_0x4c4107(0x1ea)){if(currentPlayer===0x1)player1Score=score;else player2Score=score;}}let _0x271a26=!isTwoPlayerMode?'player1':currentPlayer===0x1?_0x4c4107(0x1b0):isPlayerTwoAI?_0x4c4107(0x28b):'player2',_0xe3428e=!isTwoPlayerMode?player1TriggeredHighScoreSound:currentPlayer===0x1?player1TriggeredHighScoreSound:player2TriggeredHighScoreSound,_0x3da80e=!isTwoPlayerMode?()=>player1TriggeredHighScoreSound=!![]:currentPlayer===0x1?()=>player1TriggeredHighScoreSound=!![]:()=>player2TriggeredHighScoreSound=!![];if(score>highScore)highScore=score,highScoreHolderId=_0x271a26,!_0xe3428e&&(_0x3da80e(),playSound('hiScoreSound',![],0.2));else score===highScore&&highScoreHolderId!==_0x271a26&&highScore>0x0&&(highScoreHolderId=_0x271a26,!_0xe3428e&&(_0x3da80e(),playSound('hiScoreSound',![],0.2)));checkAndAwardExtraLife(currentPlayer);}_0x4078a1=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else isTwoPlayerMode&&selectedGameMode===_0x4c4107(0x233)?checkAndAwardExtraLife(null):checkAndAwardExtraLife(currentPlayer),_0x4078a1=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x4078a1+=0x64;}else playSound(_0x4c4107(0x1c2),![],0.8),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,_0x4078a1=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x142bd8=_0x4c4107;let _0x199da5=![],_0x8a003a=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x142bd8(0x1ea)){_0x8a003a=currentPlayer;_0x8a003a===0x1?player1MaxLevelReached=Math[_0x142bd8(0x221)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x142bd8(0x221)](player2MaxLevelReached,level);const _0x57a6f4=switchPlayerTurn();if(_0x57a6f4){if(_0x8a003a===0x2&&currentPlayer===0x1&&player1CompletedLevel===level)_0x199da5=!![],player1CompletedLevel=-0x1;else _0x8a003a===0x1?(player1CompletedLevel=level,_0x199da5=![]):_0x199da5=![];}else _0x199da5=!![],player1CompletedLevel=-0x1;}else{_0x199da5=!![];if(!isTwoPlayerMode)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);else{if(isTwoPlayerMode&&selectedGameMode===_0x142bd8(0x233)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x142bd8(0x221)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math['max'](player2MaxLevelReached,level);}}}if(_0x199da5){level++;if(isTwoPlayerMode&&selectedGameMode===_0x142bd8(0x233)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x142bd8(0x221)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x142bd8(0x221)](player2MaxLevelReached,level);}else{if(isTwoPlayerMode&&selectedGameMode===_0x142bd8(0x1ea)){if(currentPlayer===0x1&&player1Lives>0x0)player1MaxLevelReached=Math[_0x142bd8(0x221)](player1MaxLevelReached,level);else{if(currentPlayer===0x2&&player2Lives>0x0)player2MaxLevelReached=Math['max'](player2MaxLevelReached,level);}}else{if(playerLives>0x0)player1MaxLevelReached=Math[_0x142bd8(0x221)](player1MaxLevelReached,level);}}}let _0x3950e4=![];if(isTwoPlayerMode&&selectedGameMode===_0x142bd8(0x233))_0x3950e4=player1Lives>0x0||player2Lives>0x0;else{if(isTwoPlayerMode&&selectedGameMode===_0x142bd8(0x1ea))_0x3950e4=(currentPlayer===0x1?player1Lives:player2Lives)>0x0;else _0x3950e4=playerLives>0x0;}_0x3950e4?(resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();},_0x4078a1),renderGame();return;}if(!isChallengingStage){if(enemies[_0x4c4107(0x2a3)]>0x0){let _0x59db3a=null;const _0x5518a9=enemies[_0x4c4107(0x1d5)](_0x2839f8=>_0x2839f8?.[_0x4c4107(0x2d4)]===_0x4c4107(0x1f8)),_0x55c3f3=_0x5518a9[_0x4c4107(0x2a3)]<=0x3,_0xf6cc91=Math[_0x4c4107(0x221)](0x1,Math[_0x4c4107(0x20a)](level,LEVEL_CAP_FOR_SCALING)),_0x2e5148=0x1068,_0x5ce247=0x320,_0x43a690=(_0xf6cc91-0x1)*((_0x2e5148-_0x5ce247)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x423811=Math[_0x4c4107(0x221)](_0x5ce247,_0x2e5148-_0x43a690),_0x1e40c9=Math[_0x4c4107(0x249)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x3790c7=enemies['filter'](_0x377734=>_0x377734?.[_0x4c4107(0x2d4)]===_0x4c4107(0x1a5)||_0x377734?.[_0x4c4107(0x2d4)]==='preparing_attack')[_0x4c4107(0x2a3)];if(_0x55c3f3||_0x14fa12-lastEnemyDetachTime>_0x423811&&_0x5518a9['length']>0x0&&_0x3790c7<_0x1e40c9){_0x59db3a=findAndDetachEnemy();if(_0x59db3a&&_0x59db3a[_0x4c4107(0x2a3)]>0x0){const _0x34d907=_0x59db3a['map'](_0x5d8bdf=>enemies['find'](_0x3f75cf=>_0x3f75cf?.['id']===_0x5d8bdf['id']))['filter'](_0x1fa583=>_0x1fa583&&_0x1fa583['state']===_0x4c4107(0x1f8));if(_0x34d907[_0x4c4107(0x2a3)]>0x0){const _0x553a3a=_0x34d907[0x0],_0x121bbe=_0x553a3a[_0x4c4107(0x223)];if(!_0x55c3f3)lastEnemyDetachTime=_0x14fa12;if(_0x121bbe==='normal'){const _0x85dd68=generateAttackPathInternal(_0x553a3a);if(_0x85dd68&&_0x85dd68[_0x4c4107(0x2a3)]>0x0){if(_0x34d907[_0x4c4107(0x2a3)]===0x3&&_0x553a3a[_0x4c4107(0x22c)]===ENEMY3_TYPE&&level!==0x1)playSound('tripleAttackSound',![],0.3);let _0x35d30a=[..._0x34d907];const _0x3f154b=_0x35d30a[_0x4c4107(0x2a3)];if(_0x3f154b>0x1){let _0x432bfd=null,_0x48eb15=[];_0x35d30a[_0x4c4107(0x201)](_0x12a5f8=>{const _0xff4df7=_0x4c4107;if(_0x12a5f8[_0xff4df7(0x22c)]===ENEMY3_TYPE)_0x432bfd=_0x12a5f8;else _0x48eb15[_0xff4df7(0x283)](_0x12a5f8);});if(_0x432bfd&&level!==0x1&&_0x3f154b===0x3&&_0x48eb15[_0x4c4107(0x2a3)]===0x2)_0x35d30a=[_0x48eb15[0x0],_0x432bfd,_0x48eb15[0x1]];else _0x35d30a[_0x4c4107(0x2a5)]((_0x47e0d9,_0x2ff4f9)=>(_0x47e0d9?.[_0x4c4107(0x2b5)]??0x0)-(_0x2ff4f9?.['gridCol']??0x0));const _0x28bdaa=0x5;let _0x41ff9a=0x0;_0x35d30a=_0x35d30a[_0x4c4107(0x1d5)](_0x5f6e36=>_0x5f6e36&&typeof _0x5f6e36['width']===_0x4c4107(0x26a));const _0x11954b=_0x35d30a['length'];for(let _0x4ccd2d=0x0;_0x4ccd2d<_0x11954b;_0x4ccd2d++){_0x41ff9a+=_0x35d30a[_0x4ccd2d]['width'];if(_0x4ccd2d<_0x11954b-0x1)_0x41ff9a+=_0x28bdaa;}const _0x5f438f=-_0x41ff9a/0x2;let _0x3a0d04=_0x5f438f;for(let _0x151683=0x0;_0x151683<_0x11954b;_0x151683++){const _0x3a7ff2=_0x35d30a[_0x151683];_0x3a7ff2[_0x4c4107(0x21c)]=_0x3a0d04+_0x3a7ff2['width']/0x2,_0x3a0d04+=_0x3a7ff2[_0x4c4107(0x268)]+_0x28bdaa;}}else _0x35d30a[_0x4c4107(0x201)](_0x3501e3=>_0x3501e3[_0x4c4107(0x21c)]=0x0);const _0x4035bc=_0x4c4107(0x2d8)+_0x553a3a['id']+'-'+_0x14fa12;_0x35d30a[_0x4c4107(0x201)](_0xb22c44=>{if(_0xb22c44)_0xb22c44['attackGroupId']=_0x4035bc;});let _0x161d04=![],_0x9291ad=GROUP_FIRE_BURST_DELAY;if(_0x553a3a[_0x4c4107(0x22c)]===ENEMY2_TYPE||_0x553a3a[_0x4c4107(0x22c)]===ENEMY3_TYPE){_0x161d04=!![];if(_0x553a3a[_0x4c4107(0x22c)]===ENEMY2_TYPE&&_0x3f154b===0x1)_0x9291ad=SOLO_BUTTERFLY_FIRE_DELAY;}else{if(_0x553a3a[_0x4c4107(0x22c)]===ENEMY1_TYPE)_0x161d04=!![];}if(_0x55c3f3&&level>0x1)_0x161d04=![];_0x161d04&&_0x35d30a[_0x4c4107(0x201)](_0x7ee4f9=>{const _0x4d034b=_0x4c4107,_0x1174b5=_0x7ee4f9&&!(_0x7ee4f9[_0x4d034b(0x22c)]===ENEMY3_TYPE&&_0x7ee4f9['hasCapturedShip']);if(_0x1174b5)fireEnemyBurst(_0x7ee4f9['id'],'attacking',_0x9291ad);}),_0x35d30a[_0x4c4107(0x201)]((_0x1e3f75,_0x2edc7c)=>{const _0x5c4e47=_0x4c4107;_0x1e3f75&&_0x1e3f75[_0x5c4e47(0x2d4)]==='in_grid'&&(_0x1e3f75[_0x5c4e47(0x2d4)]=_0x5c4e47(0x2c2),_0x1e3f75[_0x5c4e47(0x1ce)]=![],_0x1e3f75[_0x5c4e47(0x1b7)]=0x0,_0x1e3f75[_0x5c4e47(0x24a)]=0x0,_0x1e3f75[_0x5c4e47(0x1f4)]=![],setTimeout(()=>{const _0x3e5596=_0x5c4e47;if(isPaused)return;const _0x4415cd=enemies[_0x3e5596(0x20f)](_0x58cbb1=>_0x58cbb1?.['id']===_0x1e3f75['id']);if(_0x4415cd&&_0x4415cd[_0x3e5596(0x2d4)]===_0x3e5596(0x2c2))try{const _0x261bb1=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x88ecd8=0x1;if(_0x4415cd['type']===ENEMY1_TYPE)_0x88ecd8=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x4415cd['type']===ENEMY2_TYPE)_0x88ecd8=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x4415cd[_0x3e5596(0x22c)]===ENEMY3_TYPE)_0x88ecd8=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x1e3f75[_0x3e5596(0x22c)]===ENEMY3_TYPE)playSound(_0x3e5596(0x1f7),![],0.2);else playSound(_0x3e5596(0x24f),![],0.2);_0x4415cd[_0x3e5596(0x2d4)]=_0x3e5596(0x1a5),_0x4415cd['attackPathSegments']=_0x85dd68,_0x4415cd[_0x3e5596(0x2c9)]=0x0,_0x4415cd[_0x3e5596(0x1ae)]=0x0,_0x4415cd['speed']=_0x261bb1*_0x88ecd8,_0x4415cd[_0x3e5596(0x2d6)]=0x0,_0x4415cd['canFireThisDive']=!![];}catch(_0x32dfe9){console[_0x3e5596(0x2e2)]('Error\x20starting\x20attack\x20for\x20'+_0x1e3f75['id']+':',_0x32dfe9);}},_0x2edc7c*GROUP_DETACH_DELAY_MS));});}else _0x59db3a[_0x4c4107(0x201)](_0x37622e=>{if(_0x37622e)_0x37622e['justReturned']=![];});}}}}}}enemies['forEach'](_0x48349e=>{const _0xda1a65=_0x4c4107;if(_0x48349e&&_0x48349e[_0xda1a65(0x22c)]===ENEMY3_TYPE&&_0x48349e[_0xda1a65(0x20c)]&&_0x48349e[_0xda1a65(0x2d4)]===_0xda1a65(0x1a5)&&_0x48349e[_0xda1a65(0x25a)]&&typeof _0x48349e[_0xda1a65(0x1f9)]===_0xda1a65(0x26a)){if(_0x14fa12-_0x48349e[_0xda1a65(0x1f9)]>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x47161b=_0x48349e['x']+_0x48349e[_0xda1a65(0x268)]/0x2,_0x12d3fe=_0x48349e['y']+_0x48349e[_0xda1a65(0x1ff)]+_0x48349e[_0xda1a65(0x25a)][_0xda1a65(0x1ff)]*0.5,_0xf24e18={'x':_0x47161b,'y':_0x12d3fe};createBulletSimple(_0x48349e,_0xf24e18)&&(_0x48349e[_0xda1a65(0x1f9)]=_0x14fa12,playSound('playerShootSound',![],0.4));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x165a2c=_0x14fa12-gameOverSequenceStartTime,_0x188062=_0x165a2c>=GAME_OVER_DURATION;if(_0x188062&&!isShowingResultsScreen){isShowingResultsScreen=!![],stopSound('gameOverSound'),playSound(_0x4c4107(0x1e7),!![],0.2),explosions=[];if(typeof updateExplosions===_0x4c4107(0x217))updateExplosions();}}}!_0x2bef57&&renderGame();}catch(_0x30ba63){console[_0x4c4107(0x2e2)](_0x4c4107(0x23d),_0x30ba63,_0x30ba63[_0x4c4107(0x1cc)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0x4c4107(0x258)),stopAllGameSoundsInternal(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState===_0x4c4107(0x217)&&showMenuState();}catch(_0x1b7cd4){console[_0x4c4107(0x2e2)](_0x4c4107(0x23c),_0x1b7cd4);}}}function checkAndAwardExtraLife(_0x5af98b=null){const _0x3e1ca7=_0x49ddb3;try{const _0x5706c7=[];if(_0x5af98b===0x1){const _0x1c6cd0=isTwoPlayerMode&&selectedGameMode===_0x3e1ca7(0x233)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x3e1ca7(0x1ea)&&currentPlayer===0x1?playerLives:player1Lives,_0x17fea8=isTwoPlayerMode&&selectedGameMode===_0x3e1ca7(0x233)?player1Score:isTwoPlayerMode&&selectedGameMode===_0x3e1ca7(0x1ea)&&currentPlayer===0x1?score:player1Score;_0x5706c7['push']({'num':0x1,'currentLives':_0x1c6cd0,'currentScore':_0x17fea8,'thresholdsMet':player1LifeThresholdsMet});}else{if(_0x5af98b===0x2&&isTwoPlayerMode){const _0x17335f=selectedGameMode===_0x3e1ca7(0x233)?player2Lives:selectedGameMode===_0x3e1ca7(0x1ea)&&currentPlayer===0x2?playerLives:player2Lives,_0x593b0e=selectedGameMode===_0x3e1ca7(0x233)?player2Score:selectedGameMode==='normal'&&currentPlayer===0x2?score:player2Score;_0x5706c7['push']({'num':0x2,'currentLives':_0x17335f,'currentScore':_0x593b0e,'thresholdsMet':player2LifeThresholdsMet});}else{if(isTwoPlayerMode&&selectedGameMode===_0x3e1ca7(0x233)&&_0x5af98b===null)_0x5706c7[_0x3e1ca7(0x283)]({'num':0x1,'currentLives':player1Lives,'currentScore':player1Score,'thresholdsMet':player1LifeThresholdsMet}),_0x5706c7[_0x3e1ca7(0x283)]({'num':0x2,'currentLives':player2Lives,'currentScore':player2Score,'thresholdsMet':player2LifeThresholdsMet});else{if(!isTwoPlayerMode&&(_0x5af98b===null||_0x5af98b===0x1))_0x5706c7[_0x3e1ca7(0x283)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet});else isTwoPlayerMode&&selectedGameMode===_0x3e1ca7(0x1ea)&&_0x5af98b===currentPlayer&&(currentPlayer===0x1?_0x5706c7[_0x3e1ca7(0x283)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet}):_0x5706c7['push']({'num':0x2,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player2LifeThresholdsMet}));}}}_0x5706c7[_0x3e1ca7(0x201)](_0x4d6820=>{const _0x8dba0c=_0x3e1ca7;let _0x1b74e7=![];while(!![]){let _0x2a1e9e=![],_0x1b98cc=-0x1;const _0x5c902c=_0x4d6820[_0x8dba0c(0x2a7)]['size'];if(_0x5c902c===0x0)_0x1b98cc=EXTRA_LIFE_THRESHOLD_1;else{if(_0x5c902c===0x1&&!_0x4d6820[_0x8dba0c(0x2a7)][_0x8dba0c(0x2b1)](EXTRA_LIFE_THRESHOLD_2))_0x1b98cc=EXTRA_LIFE_THRESHOLD_2;else{if(_0x5c902c>=0x1&&_0x4d6820[_0x8dba0c(0x2a7)][_0x8dba0c(0x2b1)](EXTRA_LIFE_THRESHOLD_1)&&_0x4d6820[_0x8dba0c(0x2a7)][_0x8dba0c(0x2b1)](EXTRA_LIFE_THRESHOLD_2)){let _0x1de102=0x0;_0x4d6820[_0x8dba0c(0x2a7)][_0x8dba0c(0x201)](_0x2aad06=>{_0x2aad06>=EXTRA_LIFE_THRESHOLD_2&&(_0x2aad06-EXTRA_LIFE_THRESHOLD_2)%RECURRING_EXTRA_LIFE_INTERVAL===0x0&&_0x1de102++;}),_0x1b98cc=EXTRA_LIFE_THRESHOLD_2+_0x1de102*RECURRING_EXTRA_LIFE_INTERVAL;}else{if(_0x5c902c===0x1&&_0x4d6820[_0x8dba0c(0x2a7)]['has'](EXTRA_LIFE_THRESHOLD_1)&&!_0x4d6820[_0x8dba0c(0x2a7)][_0x8dba0c(0x2b1)](EXTRA_LIFE_THRESHOLD_2))_0x1b98cc=EXTRA_LIFE_THRESHOLD_2;else _0x5c902c===0x1&&_0x4d6820[_0x8dba0c(0x2a7)]['has'](EXTRA_LIFE_THRESHOLD_2)&&!_0x4d6820[_0x8dba0c(0x2a7)][_0x8dba0c(0x2b1)](EXTRA_LIFE_THRESHOLD_1)&&(_0x1b98cc=EXTRA_LIFE_THRESHOLD_1);}}}if(_0x1b98cc!==-0x1&&_0x4d6820['currentScore']>=_0x1b98cc&&!_0x4d6820['thresholdsMet'][_0x8dba0c(0x2b1)](_0x1b98cc)){if(_0x4d6820[_0x8dba0c(0x2ce)]===0x1){if(isTwoPlayerMode&&selectedGameMode===_0x8dba0c(0x233))player1Lives++;else{if(isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x1)playerLives++;else{if(!isTwoPlayerMode)playerLives++;}}player1Lives=isTwoPlayerMode&&selectedGameMode===_0x8dba0c(0x233)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x8dba0c(0x1ea)&&currentPlayer===0x1?playerLives:player1Lives,_0x4d6820['currentLives']=player1Lives;}else{if(_0x4d6820['num']===0x2){if(isTwoPlayerMode&&selectedGameMode==='coop')player2Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x8dba0c(0x1ea)&&currentPlayer===0x2)playerLives++;}player2Lives=isTwoPlayerMode&&selectedGameMode==='coop'?player2Lives:isTwoPlayerMode&&selectedGameMode===_0x8dba0c(0x1ea)&&currentPlayer===0x2?playerLives:player2Lives,_0x4d6820['currentLives']=player2Lives;}}_0x4d6820[_0x8dba0c(0x2a7)][_0x8dba0c(0x1cb)](_0x1b98cc),_0x1b74e7=!![],_0x2a1e9e=!![];}if(!_0x2a1e9e)break;}_0x1b74e7&&!showExtraLifeMessage&&!showCsBonusScoreMessage&&!showPerfectMessage&&!showCsHitsMessage&&!showCSClearMessage&&!showReadyMessage&&setTimeout(()=>{const _0x877a04=_0x8dba0c;if(isInGameState){explosions=[];if(typeof updateExplosions===_0x877a04(0x217))updateExplosions();showExtraLifeMessage=!![],extraLifeMessageStartTime=Date[_0x877a04(0x28d)](),playSound('extraLifeSound',![],0.5);}},EXPLOSION_DURATION);});}catch(_0x2a8682){console['error']('Error\x20checking/awarding\x20extra\x20life:',_0x2a8682);}}