const _0x1d45a4=_0x5b67;(function(_0x5620b8,_0x3485fe){const _0x37f532=_0x5b67,_0x238f56=_0x5620b8();while(!![]){try{const _0x2c173c=parseInt(_0x37f532(0x196))/0x1+-parseInt(_0x37f532(0xd4))/0x2+-parseInt(_0x37f532(0x199))/0x3+-parseInt(_0x37f532(0xba))/0x4+parseInt(_0x37f532(0xab))/0x5+parseInt(_0x37f532(0x13e))/0x6+parseInt(_0x37f532(0xb9))/0x7;if(_0x2c173c===_0x3485fe)break;else _0x238f56['push'](_0x238f56['shift']());}catch(_0x4d0cae){_0x238f56['push'](_0x238f56['shift']());}}}(_0x1298,0xe0529));function generateAttackPathInternal(_0x52447e){const _0x465bb7=_0x5b67;try{if(!_0x52447e||!gameCanvas)return[];const _0x7e777d=_0x52447e[_0x465bb7(0x19d)]===ENEMY3_TYPE?BOSS_WIDTH:_0x52447e[_0x465bb7(0x19d)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x29225b=_0x52447e[_0x465bb7(0x19d)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x52447e[_0x465bb7(0x19d)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x3872d9=_0x7e777d*0.5,_0x1903b1=gameCanvas['width'],_0x34892b=gameCanvas[_0x465bb7(0x74)];let _0x13ea52=[];const _0x160e94={'x':_0x52447e['x'],'y':_0x52447e['y']},_0x39a278=Math[_0x465bb7(0x99)](_0x34892b*0.06,_0x29225b*1.8),_0x27b2a3=Math[_0x465bb7(0x99)](_0x1903b1*0.04,_0x7e777d*1.2),_0x20b729=_0x52447e['x']+_0x7e777d/0x2<_0x1903b1/0x2?0x1:-0x1,_0x15d0bf={'x':_0x160e94['x']-_0x20b729*_0x27b2a3*0.6,'y':_0x160e94['y']-_0x39a278};_0x15d0bf['x']=Math[_0x465bb7(0x12c)](_0x3872d9,Math[_0x465bb7(0x99)](_0x1903b1-_0x3872d9-_0x7e777d,_0x15d0bf['x'])),_0x15d0bf['y']=Math[_0x465bb7(0x12c)](_0x3872d9,_0x15d0bf['y']);const _0x15dc0b={'x':_0x160e94['x']+_0x20b729*_0x27b2a3*0.1,'y':_0x160e94['y']-_0x39a278*1.4},_0x172efb={'x':_0x15d0bf['x']+_0x20b729*_0x27b2a3*0.3,'y':_0x160e94['y']-_0x39a278*1.5},_0x47d21e={'p0':_0x160e94,'p1':_0x15dc0b,'p2':_0x172efb,'p3':_0x15d0bf};_0x13ea52['push'](_0x47d21e);const _0x3196e3=_0x15d0bf,_0x210667=_0x34892b*0.45,_0x593364=_0x1903b1*0.22,_0x5f4bba=_0x34892b*0.28,_0x1f6c5b=0.5,_0x1fe05d=0.6,_0x5311c3=_0x34892b*0.85,_0x28f27a=Math[_0x465bb7(0x119)](Math[_0x465bb7(0x107)]()*0x3);let _0xf881ec=[];if(_0x28f27a===0x0){const _0x123c7a=_0x210667+Math[_0x465bb7(0x107)]()*_0x34892b*0.1,_0x271ece=_0x593364+Math['random']()*_0x1903b1*0.08,_0x2a04e4=_0x5f4bba+Math[_0x465bb7(0x107)]()*_0x34892b*0.08,_0x43f6af=_0x3196e3['x']+_0x20b729*_0x271ece*0.5,_0x5e69c4=Math[_0x465bb7(0x99)](_0x5311c3,_0x3196e3['y']+_0x123c7a),_0x22ba56=_0x43f6af+_0x20b729*_0x271ece*0.5,_0x5c956f=Math['max'](_0x3196e3['y']+0x14,_0x5e69c4-_0x2a04e4),_0x16c389=_0x22ba56-_0x20b729*_0x271ece*0.9,_0x4243f3=Math['max'](_0x3196e3['y']+0x28,_0x5c956f+_0x2a04e4*0.6),_0x57371f=_0x16c389-_0x20b729*_0x271ece*0.3,_0x54db08=_0x34892b+_0x29225b*0x2,_0xdc6638=Math[_0x465bb7(0x12c)](_0x3872d9,Math['min'](_0x1903b1-_0x3872d9-_0x7e777d,_0x43f6af)),_0x28413c=Math[_0x465bb7(0x12c)](_0x3872d9,Math[_0x465bb7(0x99)](_0x1903b1-_0x3872d9-_0x7e777d,_0x22ba56)),_0x24d6d1=Math[_0x465bb7(0x12c)](_0x3872d9,Math[_0x465bb7(0x99)](_0x1903b1-_0x3872d9-_0x7e777d,_0x16c389)),_0x6fb28e={'x':_0x3196e3['x'],'y':_0x3196e3['y']+_0x123c7a*_0x1fe05d*0.5},_0x25f938={'x':_0xdc6638-_0x20b729*_0x271ece*_0x1f6c5b,'y':_0x5e69c4},_0x38b7b4={'x':_0xdc6638,'y':_0x5e69c4},_0x1cb766={'x':_0xdc6638+_0x20b729*_0x271ece*_0x1f6c5b,'y':_0x5e69c4},_0x530383={'x':_0x28413c,'y':_0x5c956f+_0x2a04e4*_0x1fe05d},_0x25e8bc={'x':_0x28413c,'y':_0x5c956f},_0x2905cc={'x':_0x28413c,'y':_0x5c956f-_0x2a04e4*_0x1fe05d*0.5},_0x57141b={'x':_0x24d6d1+_0x20b729*_0x271ece*_0x1f6c5b,'y':_0x4243f3},_0x77ca0e={'x':_0x24d6d1,'y':_0x4243f3},_0xe30dc6={'x':_0x77ca0e['x'],'y':_0x77ca0e['y']+_0x34892b*0.1},_0x484b2c={'x':_0x57371f,'y':_0x54db08-_0x34892b*0.2},_0x41cab4={'x':_0x57371f,'y':_0x54db08};_0xf881ec=[{'p0':_0x3196e3,'p1':_0x6fb28e,'p2':_0x25f938,'p3':_0x38b7b4},{'p0':_0x38b7b4,'p1':_0x1cb766,'p2':_0x530383,'p3':_0x25e8bc},{'p0':_0x25e8bc,'p1':_0x2905cc,'p2':_0x57141b,'p3':_0x77ca0e},{'p0':_0x77ca0e,'p1':_0xe30dc6,'p2':_0x484b2c,'p3':_0x41cab4}];}else{if(_0x28f27a===0x1){const _0x12e96b=_0x210667*0.8+Math[_0x465bb7(0x107)]()*_0x34892b*0.1,_0x3d26f2=_0x593364*1.2+Math[_0x465bb7(0x107)]()*_0x1903b1*0.1,_0x53afb7=_0x5f4bba*0.7+Math[_0x465bb7(0x107)]()*_0x34892b*0.1,_0x1db22b=_0x3196e3['x']+_0x20b729*_0x3d26f2*0.4,_0x18d36a=Math[_0x465bb7(0x99)](_0x5311c3-_0x53afb7*0.5,_0x3196e3['y']+_0x12e96b*0.6),_0x42978e=_0x1db22b+_0x20b729*_0x3d26f2*0.6,_0x3227ca=Math[_0x465bb7(0x99)](_0x5311c3,_0x18d36a+_0x53afb7),_0x4917f5=_0x42978e-_0x20b729*_0x3d26f2*0.5,_0x31c8db=_0x34892b+_0x29225b*0x2,_0x4f1aef=Math[_0x465bb7(0x12c)](_0x3872d9,Math[_0x465bb7(0x99)](_0x1903b1-_0x3872d9-_0x7e777d,_0x1db22b)),_0x1499d9=Math[_0x465bb7(0x12c)](_0x3872d9,Math['min'](_0x1903b1-_0x3872d9-_0x7e777d,_0x42978e)),_0x368bb5={'x':_0x3196e3['x']-_0x20b729*_0x3d26f2*0.1,'y':_0x3196e3['y']+_0x12e96b*0.3},_0x4d3606={'x':_0x4f1aef-_0x20b729*_0x3d26f2*_0x1f6c5b*0.8,'y':_0x18d36a+_0x53afb7*_0x1fe05d*0.4},_0x64b10d={'x':_0x4f1aef,'y':_0x18d36a},_0x14abe6={'x':_0x4f1aef+_0x20b729*_0x3d26f2*_0x1f6c5b*0.8,'y':_0x18d36a-_0x53afb7*_0x1fe05d*0.4},_0x47137a={'x':_0x1499d9+_0x20b729*_0x3d26f2*_0x1f6c5b*0.6,'y':_0x3227ca+_0x53afb7*_0x1fe05d*0.5},_0x253e4a={'x':_0x1499d9,'y':_0x3227ca},_0x341eb8={'x':_0x1499d9-_0x20b729*_0x3d26f2*0.2,'y':_0x3227ca+_0x34892b*0.1},_0x313696={'x':_0x4917f5,'y':_0x31c8db-_0x34892b*0.3},_0xa43439={'x':_0x4917f5,'y':_0x31c8db};_0xf881ec=[{'p0':_0x3196e3,'p1':_0x368bb5,'p2':_0x4d3606,'p3':_0x64b10d},{'p0':_0x64b10d,'p1':_0x14abe6,'p2':_0x47137a,'p3':_0x253e4a},{'p0':_0x253e4a,'p1':_0x341eb8,'p2':_0x313696,'p3':_0xa43439}];}else{const _0x1f98f8=_0x210667*0.6+Math[_0x465bb7(0x107)]()*_0x34892b*0.05,_0x375aae=_0x593364*0.7+Math[_0x465bb7(0x107)]()*_0x1903b1*0.05,_0x95f5a3=_0x5f4bba*0.6+Math[_0x465bb7(0x107)]()*_0x34892b*0.05,_0x470376=_0x95f5a3*1.5,_0x49150c=_0x3196e3['x']+_0x20b729*_0x375aae*0.5,_0x2a111c=Math[_0x465bb7(0x99)](_0x5311c3-_0x470376,_0x3196e3['y']+_0x1f98f8),_0x3b5cc7=_0x49150c+_0x20b729*_0x375aae*0.5,_0x2a3447=_0x2a111c+_0x95f5a3,_0x5b3465=_0x3b5cc7-_0x20b729*_0x375aae*0.8,_0x473232=Math['min'](_0x5311c3,_0x2a3447+_0x470376*0.7),_0xe930c1=_0x5b3465+_0x20b729*_0x375aae*0.4,_0x418cfb=_0x473232+_0x95f5a3*0.8,_0xb94aa4=_0xe930c1,_0x230527=_0x34892b+_0x29225b*0x2,_0x9fa78b=Math['max'](_0x3872d9,Math[_0x465bb7(0x99)](_0x1903b1-_0x3872d9-_0x7e777d,_0x49150c)),_0x181377=Math[_0x465bb7(0x12c)](_0x3872d9,Math[_0x465bb7(0x99)](_0x1903b1-_0x3872d9-_0x7e777d,_0x3b5cc7)),_0x559a2d=Math['max'](_0x3872d9,Math[_0x465bb7(0x99)](_0x1903b1-_0x3872d9-_0x7e777d,_0x5b3465)),_0x5cee92=Math['max'](_0x3872d9,Math[_0x465bb7(0x99)](_0x1903b1-_0x3872d9-_0x7e777d,_0xe930c1)),_0x50ba4a={'x':_0x3196e3['x'],'y':_0x3196e3['y']+_0x1f98f8*0.5},_0xfae2c={'x':_0x9fa78b-_0x20b729*_0x375aae*_0x1f6c5b,'y':_0x2a111c+_0x95f5a3*_0x1fe05d*0.3},_0x8ce323={'x':_0x9fa78b,'y':_0x2a111c},_0x58bc16={'x':_0x9fa78b+_0x20b729*_0x375aae*_0x1f6c5b,'y':_0x2a111c-_0x95f5a3*_0x1fe05d*0.3},_0x224107={'x':_0x181377+_0x20b729*_0x375aae*_0x1f6c5b,'y':_0x2a3447+_0x95f5a3*_0x1fe05d*0.5},_0x25a9e2={'x':_0x181377,'y':_0x2a3447},_0x490936={'x':_0x181377-_0x20b729*_0x375aae*_0x1f6c5b,'y':_0x2a3447-_0x95f5a3*_0x1fe05d*0.5},_0x45dd5b={'x':_0x559a2d-_0x20b729*_0x375aae*_0x1f6c5b,'y':_0x473232+_0x95f5a3*_0x1fe05d*0.4},_0x173bd8={'x':_0x559a2d,'y':_0x473232},_0x3db614={'x':_0x559a2d+_0x20b729*_0x375aae*_0x1f6c5b,'y':_0x473232-_0x95f5a3*_0x1fe05d*0.4},_0x415314={'x':_0x5cee92+_0x20b729*_0x375aae*_0x1f6c5b,'y':_0x418cfb+_0x95f5a3*_0x1fe05d*0.6},_0xfd9d17={'x':_0x5cee92,'y':_0x418cfb},_0x106d17={'x':_0x5cee92-_0x20b729*_0x375aae*0.1,'y':_0x418cfb+_0x34892b*0.05},_0x150a57={'x':_0xb94aa4,'y':_0x230527-_0x34892b*0.2},_0x100c25={'x':_0xb94aa4,'y':_0x230527};_0xf881ec=[{'p0':_0x3196e3,'p1':_0x50ba4a,'p2':_0xfae2c,'p3':_0x8ce323},{'p0':_0x8ce323,'p1':_0x58bc16,'p2':_0x224107,'p3':_0x25a9e2},{'p0':_0x25a9e2,'p1':_0x490936,'p2':_0x45dd5b,'p3':_0x173bd8},{'p0':_0x173bd8,'p1':_0x3db614,'p2':_0x415314,'p3':_0xfd9d17},{'p0':_0xfd9d17,'p1':_0x106d17,'p2':_0x150a57,'p3':_0x100c25}];}}return _0x13ea52[_0x465bb7(0xc9)](..._0xf881ec),_0x13ea52;}catch(_0x4a9978){return console[_0x465bb7(0x186)](_0x465bb7(0xf7)+_0x52447e?.['id']+':',_0x4a9978),[];}}window[_0x1d45a4(0x185)]=generateAttackPathInternal;function resetAllMessagesInternal(){showReadyMessage=![],isShowingIntro=![],showCsHitsMessage=![],showPerfectMessage=![],showCsBonusScoreMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],isShowingCaptureMessage=![],isShowingPlayerGameOverMessage=![],isShowingCoopPlayersReady=![],csHitsMessageStartTime=0x0,perfectMessageStartTime=0x0,csBonusScoreMessageStartTime=0x0,csClearMessageStartTime=0x0,extraLifeMessageStartTime=0x0,readyMessageStartTime=0x0,captureMessageStartTime=0x0,playerGameOverMessageStartTime=0x0,csCompletionDelayStartTime=0x0,introDisplayStartTime=0x0,coopPlayersReadyStartTime=0x0;}window[_0x1d45a4(0x145)]=resetAllMessagesInternal;function stopAllGameSoundsInternal(){const _0x1fb46b=_0x1d45a4;if(typeof soundPaths==='object'&&soundPaths!==null&&typeof stopSound===_0x1fb46b(0x78))for(const _0x38891d in soundPaths){stopSound(_0x38891d);}isGridSoundPlaying=![];}window[_0x1d45a4(0x19e)]=stopAllGameSoundsInternal;function resetGameInternal(){const _0x252c16=_0x1d45a4;score=0x0,level=0x1,playerLives=0x3;if(isTwoPlayerMode){player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,currentPlayer=0x1,player1CompletedLevel=-0x1,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x252c16(0xca)]();else player1LifeThresholdsMet=new Set();if(player2LifeThresholdsMet instanceof Set)player2LifeThresholdsMet[_0x252c16(0xca)]();else player2LifeThresholdsMet=new Set();player1IsDualShipActive=![],player2IsDualShipActive=![],isPlayer1ShipCaptured=![],isPlayer2ShipCaptured=![],isPlayer1WaitingForRespawn=![],isPlayer2WaitingForRespawn=![],isPlayer1Invincible=![],isPlayer2Invincible=![],player1RespawnTime=0x0,player2RespawnTime=0x0,player1InvincibilityEndTime=0x0,player2InvincibilityEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![];if(selectedGameMode===_0x252c16(0xed)){playerLives=0x0;if(gameCanvas&&gameCanvas[_0x252c16(0xaa)]>0x0&&gameCanvas['height']>0x0){const _0x5a017d=gameCanvas['width']/0x2-gameCanvas[_0x252c16(0xaa)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x263158=gameCanvas[_0x252c16(0xaa)]/0x2+gameCanvas[_0x252c16(0xaa)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x141809=gameCanvas[_0x252c16(0x74)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;ship1={'x':_0x5a017d,'y':_0x141809,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x5a017d,'id':'p1'},ship2={'x':_0x263158,'y':_0x141809,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x263158,'id':'p2'},(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x252c16(0xa7))&&(smoothedShip1X=_0x5a017d,smoothedShip2X=_0x263158,aiShip1TargetEnemy=null,aiShip2TargetEnemy=null,aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0,aiShip1LastShotTime=0x0,aiShip2LastShotTime=0x0,aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);}ship=null;}else{if(!ship&&gameCanvas&&gameCanvas[_0x252c16(0xaa)]>0x0&&gameCanvas['height']>0x0)ship={'x':Math[_0x252c16(0x11d)](gameCanvas[_0x252c16(0xaa)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x252c16(0x74)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x252c16(0xda)},ship[_0x252c16(0xa3)]=ship['x'];else ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x252c16(0x74)]>0x0&&(ship['x']=Math[_0x252c16(0x11d)](gameCanvas[_0x252c16(0xaa)]/0x2-SHIP_WIDTH/0x2),ship[_0x252c16(0xa3)]=ship['x'],ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}}else{player1Lives=0x3,player1Score=0x0,player1MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet['clear']();else player1LifeThresholdsMet=new Set();if(!ship&&gameCanvas&&gameCanvas[_0x252c16(0xaa)]>0x0&&gameCanvas[_0x252c16(0x74)]>0x0)ship={'x':Math[_0x252c16(0x11d)](gameCanvas[_0x252c16(0xaa)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x252c16(0xda)},ship[_0x252c16(0xa3)]=ship['x'];else ship&&gameCanvas&&gameCanvas[_0x252c16(0xaa)]>0x0&&gameCanvas['height']>0x0&&(ship['x']=Math[_0x252c16(0x11d)](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),ship[_0x252c16(0xa3)]=ship['x'],ship['y']=gameCanvas[_0x252c16(0x74)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isDualShipActive=![];if(!isTwoPlayerMode)player1IsDualShipActive=![];fallingShips=[],visualOffsetX=-0x14,gameOverSequenceStartTime=0x0,isShowingResultsScreen=![],gameStartTime=Date[_0x252c16(0x12f)](),gameJustStarted=!![],gameJustStartedAndWaveLaunched=![],currentGridOffsetX=0x0,gridMoveDirection=0x1,gridJustCompleted=![],isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,lastGridFireCheckTime=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,scoreEarnedThisCS=0x0,challengingStageEnemiesHit=0x0,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined,aiCanShootTime=0x0,aiLastShotTime=0x0,!(selectedGameMode==='coop'&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x252c16(0xa7)))&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0),playerLastShotTime=0x0,player1LastShotTime=0x0,player2LastShotTime=0x0,p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isShowingCoopPlayersReady=![],coopPlayersReadyStartTime=0x0,resetWaveInternal();}window[_0x1d45a4(0xf9)]=resetGameInternal;function resetWaveInternal(){const _0x3d955b=_0x1d45a4;isWaveTransitioning=![],readyForNextWave=![],readyForNextWaveReset=![],isEntrancePhaseActive=!![],firstEnemyLanded=![],captureAttemptMadeThisLevel=![],gameJustStartedAndWaveLaunched=![],aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![],enemies=[],bullets=[],enemyBullets=[],explosions=[],floatingScores=[],hitSparks=[];Array[_0x3d955b(0x81)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x3d955b(0x10c)](clearTimeout);enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;const _0x56dc47=getWaveTypeInternal(level);isChallengingStage=_0x56dc47===_0x3d955b(0x86),isFullGridWave=_0x56dc47===_0x3d955b(0x149),challengingStageEnemiesHit=0x0,scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null;(isFullGridWave||isChallengingStage)&&(isEntrancePhaseActive=![]);const _0x114cde=isShowingDemoText;resetAllMessagesInternal();_0x114cde&&(isShowingDemoText=!![]);if(selectedGameMode===_0x3d955b(0xed)&&level===0x1)isShowingIntro=![],introStep=0x2;else{if(isTwoPlayerMode&&selectedGameMode===_0x3d955b(0x14b)||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3d955b(0x134)){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(isChallengingStage){introStep=0x3,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(level===0x1&&!isTwoPlayerMode){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{introStep=0x2,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}}}}isShowingIntro&&!(selectedGameMode===_0x3d955b(0xed)&&level===0x1)&&(introDisplayStartTime=Date[_0x3d955b(0x12f)]());playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],currentWaveDefinition=generateWaveDefinitionInternal(level);if(selectedGameMode===_0x3d955b(0xed)){if(gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x3d955b(0x74)]>0x0){const _0x5a4969=ship1&&player1Lives>0x0,_0x27a8b0=ship2&&player2Lives>0x0,_0x30dad3=gameCanvas[_0x3d955b(0x74)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3d955b(0xa7)){if(_0x5a4969&&_0x27a8b0){const _0x40dfb0=gameCanvas[_0x3d955b(0xaa)]/0x2-gameCanvas[_0x3d955b(0xaa)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1&&(ship1[_0x3d955b(0xa3)]=_0x40dfb0,ship1['x']=_0x40dfb0,smoothedShip1X=_0x40dfb0,ship1['y']=_0x30dad3);const _0x2c39e9=gameCanvas[_0x3d955b(0xaa)]/0x2+gameCanvas[_0x3d955b(0xaa)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2[_0x3d955b(0xa3)]=_0x2c39e9,ship2['x']=_0x2c39e9,smoothedShip2X=_0x2c39e9,ship2['y']=_0x30dad3);}else{if(_0x5a4969&&ship1){const _0x3c4eea=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x1a56c0=Math[_0x3d955b(0x11d)](gameCanvas[_0x3d955b(0xaa)]/0x2-_0x3c4eea/0x2);ship1[_0x3d955b(0xa3)]=_0x1a56c0,ship1['x']=_0x1a56c0,smoothedShip1X=_0x1a56c0,ship1['y']=_0x30dad3;}else{if(_0x27a8b0&&ship2){const _0x3b8cbd=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x355b6e=Math[_0x3d955b(0x11d)](gameCanvas[_0x3d955b(0xaa)]/0x2-_0x3b8cbd/0x2);ship2[_0x3d955b(0xa3)]=_0x355b6e,ship2['x']=_0x355b6e,smoothedShip2X=_0x355b6e,ship2['y']=_0x30dad3;}}}}else{if(_0x5a4969&&ship1)ship1['y']=_0x30dad3;if(_0x27a8b0&&ship2)ship2['y']=_0x30dad3;}}}else{if(ship&&gameCanvas&&gameCanvas[_0x3d955b(0xaa)]>0x0&&gameCanvas[_0x3d955b(0x74)]>0x0&&(forceCenterShipNextReset||!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x3d955b(0x14b)&&currentPlayer===0x2)){let _0x2ce875=ship[_0x3d955b(0xaa)];if(isDualShipActive)_0x2ce875=DUAL_SHIP_OFFSET_X+SHIP_WIDTH;ship['x']=Math[_0x3d955b(0x11d)](gameCanvas[_0x3d955b(0xaa)]/0x2-_0x2ce875/0x2),ship[_0x3d955b(0xa3)]=ship['x'],ship['y']=gameCanvas[_0x3d955b(0x74)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isPlayerTwoAI&&selectedGameMode===_0x3d955b(0x14b)&&currentPlayer===0x2)smoothedShipX=ship['x'];}else ship&&gameCanvas&&gameCanvas['width']>0x0&&(ship['y']=gameCanvas[_0x3d955b(0x74)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);}forceCenterShipNextReset=![];if(!isManualControl&&aiNeedsStabilization&&selectedGameMode!==_0x3d955b(0xed)&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x3d955b(0x14b)&&currentPlayer===0x2)){aiStabilizationEndTime=Date[_0x3d955b(0x12f)]()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}else{if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2&&aiNeedsStabilization){aiStabilizationEndTime=Date[_0x3d955b(0x12f)]()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}}}window['resetWave']=resetWaveInternal;function getWaveTypeInternal(_0x3dff36){const _0x4de158=_0x1d45a4,_0x404729=(_0x3dff36-0x1)%0x4;switch(_0x404729){case 0x0:return'full_grid';case 0x1:return _0x4de158(0x91);case 0x2:return _0x4de158(0x86);case 0x3:return _0x4de158(0xe7);default:return _0x4de158(0xe8);}}window[_0x1d45a4(0x170)]=getWaveTypeInternal;function generateWaveDefinitionInternal(_0x3e02e4){const _0x3a7afe=_0x1d45a4;let _0x38ce33=[];currentWavePatternIndex=-0x1;const _0x419c6e=getWaveTypeInternal(_0x3e02e4);if(typeof waveEntrancePatterns===_0x3a7afe(0x8f)||!Array[_0x3a7afe(0x81)](waveEntrancePatterns)||waveEntrancePatterns[_0x3a7afe(0xbb)]<0x2)return[];if(_0x419c6e==='challenging_stage')_0x38ce33=[];else{if(_0x419c6e===_0x3a7afe(0x149)){currentWavePatternIndex=0x0;const _0x11229c=waveEntrancePatterns[0x0];if(!_0x11229c||_0x11229c['length']===0x0)_0x38ce33=[];else try{_0x38ce33=JSON[_0x3a7afe(0x16d)](JSON[_0x3a7afe(0x82)](_0x11229c),(_0x16a46d,_0xc0bd04)=>{const _0x21c062=_0x3a7afe;return _0xc0bd04&&typeof _0xc0bd04==='object'&&_0xc0bd04['type']===ENEMY3_TYPE&&typeof _0xc0bd04[_0x21c062(0x19f)]===_0x21c062(0x8f)&&(_0xc0bd04['hasCapturedShip']=![]),_0xc0bd04;});}catch(_0x2fcd29){_0x38ce33=[];}}else{if(_0x419c6e===_0x3a7afe(0x91)){currentWavePatternIndex=0x0;const _0x4a3be0=waveEntrancePatterns[0x0];if(!_0x4a3be0||_0x4a3be0[_0x3a7afe(0xbb)]===0x0)_0x38ce33=[];else try{_0x38ce33=JSON[_0x3a7afe(0x16d)](JSON[_0x3a7afe(0x82)](_0x4a3be0),(_0x5a36b1,_0x5f4d74)=>{const _0x45ecd1=_0x3a7afe;return _0x5f4d74&&typeof _0x5f4d74===_0x45ecd1(0x140)&&_0x5f4d74['type']===ENEMY3_TYPE&&typeof _0x5f4d74[_0x45ecd1(0x19f)]===_0x45ecd1(0x8f)&&(_0x5f4d74[_0x45ecd1(0x19f)]=![]),_0x5f4d74;});}catch(_0x46e795){_0x38ce33=[];}}else{if(_0x419c6e===_0x3a7afe(0xe7)){currentWavePatternIndex=0x1;const _0x584eb2=waveEntrancePatterns[0x1];if(!_0x584eb2||_0x584eb2[_0x3a7afe(0xbb)]===0x0)_0x38ce33=[];else try{_0x38ce33=JSON[_0x3a7afe(0x16d)](JSON[_0x3a7afe(0x82)](_0x584eb2),(_0x118e6b,_0x476212)=>{const _0x234354=_0x3a7afe;return _0x476212&&typeof _0x476212==='object'&&_0x476212[_0x234354(0x19d)]===ENEMY3_TYPE&&typeof _0x476212[_0x234354(0x19f)]==='undefined'&&(_0x476212[_0x234354(0x19f)]=![]),_0x476212;});}catch(_0x150275){_0x38ce33=[];}}else _0x38ce33=[];}}}if(_0x419c6e!==_0x3a7afe(0x86)){if(typeof normalWaveEntrancePaths===_0x3a7afe(0x8f)||Object[_0x3a7afe(0x105)](normalWaveEntrancePaths)[_0x3a7afe(0xbb)]===0x0)return _0x38ce33;for(let _0x2220a0=_0x38ce33[_0x3a7afe(0xbb)]-0x1;_0x2220a0>=0x0;_0x2220a0--){const _0x1d2f96=_0x38ce33[_0x2220a0];if(!normalWaveEntrancePaths?.[_0x1d2f96[_0x3a7afe(0x93)]]){_0x38ce33[_0x3a7afe(0xa1)](_0x2220a0,0x1);continue;}if(_0x1d2f96[_0x3a7afe(0xc4)]&&Array['isArray'](_0x1d2f96[_0x3a7afe(0xc4)])){for(let _0x27300b=_0x1d2f96[_0x3a7afe(0xc4)][_0x3a7afe(0xbb)]-0x1;_0x27300b>=0x0;_0x27300b--){const _0x29ee75=_0x1d2f96['enemies'][_0x27300b];(!_0x29ee75||!normalWaveEntrancePaths?.[_0x29ee75[_0x3a7afe(0xcd)]])&&_0x1d2f96[_0x3a7afe(0xc4)]['splice'](_0x27300b,0x1),_0x29ee75&&_0x29ee75[_0x3a7afe(0x19d)]===ENEMY3_TYPE&&typeof _0x29ee75[_0x3a7afe(0x19f)]==='undefined'&&(_0x29ee75[_0x3a7afe(0x19f)]=![]);}_0x1d2f96[_0x3a7afe(0xc4)]['length']===0x0&&_0x38ce33[_0x3a7afe(0xa1)](_0x2220a0,0x1);}else _0x38ce33[_0x3a7afe(0xa1)](_0x2220a0,0x1);}}return _0x38ce33;}window[_0x1d45a4(0xc5)]=generateWaveDefinitionInternal;const createBulletSimple=(_0x573663,_0x56ba64=null)=>{const _0x7ab4f9=_0x1d45a4;let _0x20df46=null,_0x30222e=![];if(isTwoPlayerMode&&selectedGameMode===_0x7ab4f9(0xed)){const _0x11b7b5=ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured,_0x22c6ae=ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured;if(_0x11b7b5&&_0x22c6ae)_0x20df46=Math[_0x7ab4f9(0x107)]()<0.5?ship1:ship2,_0x30222e=!![];else{if(_0x11b7b5)_0x20df46=ship1,_0x30222e=!![];else _0x22c6ae&&(_0x20df46=ship2,_0x30222e=!![]);}}else ship&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn&&(_0x20df46=ship,_0x30222e=!![]);if(!_0x573663||!isInGameState||!_0x30222e||!_0x20df46)return![];const _0xde811c=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x139205=_0x56ba64?_0x56ba64['x']:_0x573663['x']+_0x573663['width']/0x2,_0x67f92a=_0x56ba64?_0x56ba64['y']:_0x573663['y']+_0x573663['height']/0x2;let _0xeaa087=0x0,_0x2279fd=_0xde811c;const _0x1cb4dd=_0x20df46['x']+_0x20df46[_0x7ab4f9(0xaa)]/0x2-_0x139205,_0x3c7e85=_0x20df46['y']+_0x20df46[_0x7ab4f9(0x74)]/0x2-_0x67f92a,_0x4c5cb8=Math[_0x7ab4f9(0x160)](_0x1cb4dd*_0x1cb4dd+_0x3c7e85*_0x3c7e85);if(_0x4c5cb8>0x0){let _0x2328d6=0x0;!isChallengingStage&&(_0x2328d6=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x49e441=Math[_0x7ab4f9(0xc3)](_0x3c7e85,_0x1cb4dd);_0xeaa087=Math[_0x7ab4f9(0x10e)](_0x49e441)*_0xde811c*_0x2328d6,_0x2279fd=Math['sqrt'](_0xde811c**0x2-_0xeaa087**0x2),_0x2279fd=Math[_0x7ab4f9(0x12c)](_0xde811c*(0x1-_0x2328d6)*0.5,_0x2279fd);if(_0x3c7e85<0x0&&_0x2279fd>0x0){}if(_0x3c7e85<0x0)_0x2279fd=Math[_0x7ab4f9(0x9e)](_0x2279fd);return enemyBullets[_0x7ab4f9(0xc9)]({'x':_0x139205-ENEMY_BULLET_WIDTH/0x2,'y':_0x67f92a,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0xeaa087,'vy':_0x2279fd,'type':_0x573663[_0x7ab4f9(0x19d)]}),!![];}return![];};function scheduleSingleEntranceSquadron(_0x44ed7a,_0x27dadb,_0x57dd50){const _0x58b85c=_0x1d45a4;if(isFullGridWave||isChallengingStage)return console[_0x58b85c(0x197)]('[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20'+level+_0x58b85c(0x70)+isFullGridWave+_0x58b85c(0x19b)+isChallengingStage+_0x58b85c(0xb4)),_0x44ed7a?.[_0x58b85c(0xc4)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x44ed7a[_0x58b85c(0xc4)][_0x58b85c(0xbb)],squadronCompletionStatus[_0x27dadb]&&(squadronCompletionStatus[_0x27dadb][_0x58b85c(0x7e)]=squadronCompletionStatus[_0x27dadb][_0x58b85c(0x12b)])),![];const _0x360697=normalWaveEntrancePaths,_0x2544d2=_0x44ed7a[_0x58b85c(0x93)],_0x4f56c8=_0x360697[_0x2544d2];if(!_0x4f56c8||_0x4f56c8[_0x58b85c(0xbb)]===0x0)return console['error'](_0x58b85c(0x1a7)+_0x2544d2+_0x58b85c(0x1a0)+_0x27dadb+_0x58b85c(0x195)),_0x44ed7a?.[_0x58b85c(0xc4)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x44ed7a['enemies']['length'],squadronCompletionStatus[_0x27dadb]&&(squadronCompletionStatus[_0x27dadb][_0x58b85c(0x7e)]=squadronCompletionStatus[_0x27dadb][_0x58b85c(0x12b)])),![];const _0x6f9110=setTimeout(()=>{const _0xf33ec0=_0x58b85c,_0x37b582=enemySpawnTimeouts[_0xf33ec0(0x11e)](_0x6f9110);if(_0x37b582>-0x1)enemySpawnTimeouts[_0xf33ec0(0xa1)](_0x37b582,0x1);let _0x186e42=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x186e42=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x186e42=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x186e42||isFullGridWave){_0x44ed7a?.[_0xf33ec0(0xc4)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x44ed7a['enemies'][_0xf33ec0(0xbb)],squadronCompletionStatus[_0x27dadb]&&(squadronCompletionStatus[_0x27dadb][_0xf33ec0(0x7e)]=squadronCompletionStatus[_0x27dadb][_0xf33ec0(0x12b)]));return;}try{squadronEntranceFiringStatus[_0x27dadb]?(squadronEntranceFiringStatus[_0x27dadb][_0xf33ec0(0xee)]=Date[_0xf33ec0(0x12f)]()+_0x57dd50,squadronEntranceFiringStatus[_0x27dadb][_0xf33ec0(0x17a)]=![]):(console[_0xf33ec0(0x197)](_0xf33ec0(0x155)+_0x27dadb+_0xf33ec0(0x118)),squadronEntranceFiringStatus[_0x27dadb]={'hasFired':![],'scheduledStartTime':Date['now']()+_0x57dd50});const _0x5e449a=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x21ee6d=_0x5e449a*0x2,_0x28353a=0x1;_0x44ed7a[_0xf33ec0(0xc4)][_0xf33ec0(0x10c)]((_0x313264,_0x5df45d)=>{const _0x5af29a=_0xf33ec0;if(!_0x313264||!_0x313264['type']||typeof _0x313264[_0x5af29a(0x138)]==='undefined'||typeof _0x313264[_0x5af29a(0xf4)]===_0x5af29a(0x8f)||!_0x313264[_0x5af29a(0xcd)]){console[_0x5af29a(0x186)](_0x5af29a(0x1ae)+_0x27dadb+'\x20(Path\x20'+_0x2544d2+'),\x20index\x20'+_0x5df45d+_0x5af29a(0xce)),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x27dadb]&&squadronCompletionStatus[_0x27dadb][_0x5af29a(0x7e)]++;return;}const _0xe11473=_0x360697[_0x313264[_0x5af29a(0xcd)]];(!_0xe11473||_0xe11473[_0x5af29a(0xbb)]===0x0)&&console[_0x5af29a(0x197)](_0x5af29a(0xb2)+_0x313264[_0x5af29a(0xcd)]+_0x5af29a(0x157)+_0x27dadb+',\x20index\x20'+_0x5df45d+'\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22'+_0x2544d2+'\x22.');let _0x18c114=0x0;const _0x1e7d9e=getWaveType(level),_0x501908=_0x1e7d9e===_0x5af29a(0xe7)&&(_0x27dadb===0x2||_0x27dadb===0x3);if(_0x501908){const _0x3a7ec1=Math[_0x5af29a(0x119)](_0x5df45d/0x2);_0x5df45d%0x2===0x0?_0x18c114=_0x3a7ec1*_0x21ee6d:_0x18c114=_0x3a7ec1*_0x21ee6d+_0x28353a;}else _0x18c114=_0x5df45d*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x3d19ff=setTimeout(()=>{const _0x397387=_0x5af29a,_0x16f210=enemySpawnTimeouts[_0x397387(0x11e)](_0x3d19ff);if(_0x16f210>-0x1)enemySpawnTimeouts['splice'](_0x16f210,0x1);let _0x50975e=![];isTwoPlayerMode&&selectedGameMode===_0x397387(0xed)?_0x50975e=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x50975e=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x50975e||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x27dadb]&&squadronCompletionStatus[_0x27dadb][_0x397387(0x7e)]++;return;}try{let _0x57335d=_0x313264[_0x397387(0x19d)],_0x3400b8=_0x57335d===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x20326e,_0x5d22d9;if(_0x57335d===ENEMY1_TYPE)_0x20326e=ENEMY1_WIDTH,_0x5d22d9=ENEMY1_HEIGHT;else _0x57335d===ENEMY3_TYPE?(_0x20326e=BOSS_WIDTH,_0x5d22d9=BOSS_HEIGHT):(_0x20326e=ENEMY_WIDTH,_0x5d22d9=ENEMY_HEIGHT);let _0x5b4fca=0x0,_0x3cfe0d=0x0;if(_0x4f56c8&&_0x4f56c8[0x0]?.['p0'])_0x5b4fca=_0x4f56c8[0x0]['p0']['x'],_0x3cfe0d=_0x4f56c8[0x0]['p0']['y'];else throw new Error(_0x397387(0x144)+_0x2544d2);let _0x488759,_0x1b15e3;try{const {x:_0x37bcb0,y:_0x1831f4}=getCurrentGridSlotPosition(_0x313264['gridRow'],_0x313264[_0x397387(0xf4)],_0x20326e);_0x488759=_0x37bcb0,_0x1b15e3=_0x1831f4;}catch(_0x1b04b9){console[_0x397387(0x186)](_0x397387(0xc6)+_0x313264[_0x397387(0x19d)]+_0x397387(0xfc)+_0x313264[_0x397387(0x138)]+','+_0x313264[_0x397387(0xf4)]+']',_0x1b04b9),_0x488759=gameCanvas?.[_0x397387(0xaa)]/0x2||0xc8,_0x1b15e3=ENEMY_TOP_MARGIN+_0x313264['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x3b16a4=0x0;const _0x2cb960=_0x501908,_0x4aa32c=_0x2cb960&&_0x5df45d%0x2!==0x0;_0x4aa32c?_0x3b16a4=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x3b16a4=-_0x5df45d*PATH_T_OFFSET_PER_ENEMY;const _0x5ed40a={'x':_0x5b4fca,'y':_0x3cfe0d,'width':_0x20326e,'height':_0x5d22d9,'targetGridX':_0x488759,'targetGridY':_0x1b15e3,'speed':0x0,'state':_0x397387(0x1a2),'gridRow':_0x313264['gridRow'],'gridCol':_0x313264[_0x397387(0xf4)],'type':_0x57335d,'health':_0x3400b8,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x2544d2,'pathSegmentIndex':0x0,'pathT':_0x3b16a4,'squadronId':_0x27dadb,'squadronEnemyIndex':_0x5df45d,'id':'enemy-entr-'+_0x27dadb+'-'+_0x5df45d+'-'+Date['now']()+'-'+Math[_0x397387(0x107)]()[_0x397387(0xb3)](0x24)[_0x397387(0x11c)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x397387(0x14b),'hasCapturedShip':_0x57335d===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x57335d===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x397387(0xc9)](_0x5ed40a),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x27dadb]&&squadronCompletionStatus[_0x27dadb]['completed']++;if(_0x5df45d===0x0){let _0x56b125=0x5dc;(_0x27dadb===0x0||_0x27dadb===0x1)&&(_0x56b125=0xfa);const _0x5ea5d8=_0x5ed40a['id'],_0xf65244=setTimeout(()=>{const _0x2b8696=_0x397387,_0xfc5c1=enemySpawnTimeouts[_0x2b8696(0x11e)](_0xf65244);if(_0xfc5c1>-0x1)enemySpawnTimeouts[_0x2b8696(0xa1)](_0xfc5c1,0x1);let _0x464d48=![];isTwoPlayerMode&&selectedGameMode===_0x2b8696(0xed)?_0x464d48=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x464d48=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x464d48||isChallengingStage||isWaveTransitioning||isFullGridWave)return;fireFixedEnemyBurst(_0x5ea5d8,null,0x0,0x3);},_0x56b125);enemySpawnTimeouts[_0x397387(0xc9)](_0xf65244);}}catch(_0x5d0fd2){console[_0x397387(0x186)](_0x397387(0x72)+_0x27dadb+_0x397387(0x17e)+_0x5df45d+_0x397387(0xc1)+_0x2544d2+'):',_0x5d0fd2),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x27dadb]&&squadronCompletionStatus[_0x27dadb]['completed']++;}},_0x18c114);enemySpawnTimeouts['push'](_0x3d19ff);});}catch(_0x33d706){console[_0xf33ec0(0x186)](_0xf33ec0(0xbf)+_0x27dadb+_0xf33ec0(0x9f)+_0x2544d2+'):',_0x33d706),_0x44ed7a?.[_0xf33ec0(0xc4)]?.[_0xf33ec0(0xbb)]>0x0&&(enemiesSpawnedThisWave+=_0x44ed7a[_0xf33ec0(0xc4)][_0xf33ec0(0xbb)],squadronCompletionStatus[_0x27dadb]&&(squadronCompletionStatus[_0x27dadb][_0xf33ec0(0x7e)]=squadronCompletionStatus[_0x27dadb]['total']));}},_0x57dd50);return enemySpawnTimeouts[_0x58b85c(0xc9)](_0x6f9110),!![];};function scheduleEntranceFlightWave(){const _0xa3715b=_0x1d45a4;if(isFullGridWave||isChallengingStage||!currentWaveDefinition||currentWaveDefinition[_0xa3715b(0xbb)]===0x0){console[_0xa3715b(0x197)]('[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20or\x20with\x20no\x20definition.\x20Level\x20'+level+_0xa3715b(0x70)+isFullGridWave+',\x20isCS:\x20'+isChallengingStage+_0xa3715b(0xdc)+currentWaveDefinition?.['length']),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts[_0xa3715b(0x10c)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x112a77=0x0,_0x3e8c7a=0x0;currentWaveDefinition[_0xa3715b(0x10c)]((_0x24398e,_0x6960ad)=>{const _0x58df8a=_0xa3715b;_0x24398e&&_0x24398e['enemies']&&Array['isArray'](_0x24398e[_0x58df8a(0xc4)])&&_0x24398e[_0x58df8a(0xc4)][_0x58df8a(0xbb)]>0x0?(totalEnemiesScheduledForWave+=_0x24398e[_0x58df8a(0xc4)]['length'],squadronCompletionStatus[_0x6960ad]={'completed':0x0,'total':_0x24398e[_0x58df8a(0xc4)][_0x58df8a(0xbb)],'hasFiredPostLanding':![]},squadronEntranceFiringStatus[_0x6960ad]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x24398e,_0x6960ad,_0x112a77)&&_0x3e8c7a++,_0x112a77+=NORMAL_WAVE_SQUADRON_INTERVAL):console[_0x58df8a(0x197)]('Entrance\x20Wave:\x20Squadron\x20'+_0x6960ad+_0x58df8a(0xfe));}),_0x3e8c7a===0x0&&totalEnemiesScheduledForWave===0x0?(console[_0xa3715b(0x197)](_0xa3715b(0x1a4)+level+_0xa3715b(0x9b)),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![]):isEntrancePhaseActive=!![];}function startChallengingStageSequence(){const _0xb736d=_0x1d45a4;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts[_0xb736d(0x10c)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object[_0xb736d(0x105)](challengingStagePaths)['length']===0x0&&defineChallengingStagePaths();if(Object[_0xb736d(0x105)](challengingStagePaths)[_0xb736d(0xbb)]===0x0){console['error'](_0xb736d(0x7a)),isWaveTransitioning=!![],setTimeout(()=>{const _0x2158ac=_0xb736d;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x2158ac(0xed)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave==='function'&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x13c930=[_0xb736d(0x147),_0xb736d(0x18f),_0xb736d(0x101),_0xb736d(0x113)],_0x1c93ec=['CS_LoopAttack_TL',_0xb736d(0x188),_0xb736d(0x168),_0xb736d(0x85)],_0x5d6a40=[..._0x13c930,..._0x1c93ec];for(const _0xbb4cf8 of _0x5d6a40){if(!challengingStagePaths[_0xb736d(0x16f)](_0xbb4cf8)){console['error'](_0xb736d(0x131)+_0xbb4cf8+_0xb736d(0x19a)),isWaveTransitioning=!![],setTimeout(()=>{const _0x4fb715=_0xb736d;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x4fb715(0xed)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x4fb715(0x78)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x4ea0a5=[..._0x13c930],_0x1dbbad=[..._0x1c93ec]['sort'](()=>Math[_0xb736d(0x107)]()-0.5);_0x4ea0a5[_0xb736d(0xc9)](..._0x1dbbad),currentWaveDefinition=[];for(let _0x2a7c2b=0x0;_0x2a7c2b<CHALLENGING_STAGE_SQUADRON_COUNT;_0x2a7c2b++){const _0x155f8c=_0x4ea0a5[_0x2a7c2b],_0x2b143f={'pathId':_0x155f8c,'enemies':[]};for(let _0x44f0ec=0x0;_0x44f0ec<CHALLENGING_STAGE_SQUADRON_SIZE;_0x44f0ec++){let _0x52f037=_0x44f0ec<Math[_0xb736d(0x119)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x2b143f[_0xb736d(0xc4)]['push']({'type':_0x52f037,'entrancePathId':_0x155f8c});}currentWaveDefinition[_0xb736d(0xc9)](_0x2b143f);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition['length']>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x315a0e=0x0;const _0x3bb2f1=-0x1c,_0x5cca62=Math[_0xb736d(0x119)](Math[_0xb736d(0x12c)](0x0,level-0x3)/0x4)+0x1,_0x19d129=scaleValue(_0x5cca62,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition[_0xb736d(0x10c)]((_0x4f3a9f,_0xd8c2e6)=>{const _0x3f52fc=_0xb736d;let _0x203a8a=0x0;if(_0xd8c2e6<=0x1)_0x203a8a=0x0;else _0xd8c2e6<=0x3?_0x203a8a=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x203a8a=(_0xd8c2e6-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x49d4da=_0x19d129;(_0xd8c2e6===0x2||_0xd8c2e6===0x3)&&(_0x49d4da*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x543e27=setTimeout(()=>{const _0x4c7d47=_0x5b67,_0x3122f1=enemySpawnTimeouts[_0x4c7d47(0x11e)](_0x543e27);if(_0x3122f1>-0x1)enemySpawnTimeouts[_0x4c7d47(0xa1)](_0x3122f1,0x1);let _0xb93ec8=![];isTwoPlayerMode&&selectedGameMode===_0x4c7d47(0xed)?_0xb93ec8=player1Lives>0x0||player2Lives>0x0:_0xb93ec8=playerLives>0x0;if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&_0xb93ec8)try{const _0x1ea46c=_0x4f3a9f[_0x4c7d47(0x93)],_0x273ba7=challengingStagePaths,_0x4a3ffb=_0x273ba7[_0x1ea46c];if(!_0x4a3ffb||_0x4a3ffb[_0x4c7d47(0xbb)]===0x0){console[_0x4c7d47(0x186)](_0x4c7d47(0xc2)+_0x1ea46c+_0x4c7d47(0x1a0)+_0xd8c2e6+_0x4c7d47(0xbd)),enemiesSpawnedThisWave+=_0x4f3a9f[_0x4c7d47(0xc4)][_0x4c7d47(0xbb)];return;}let _0x44d3af=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0xd8c2e6>=0x2&&_0xd8c2e6<=0x3)_0x44d3af=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0xd8c2e6>=0x4&&(_0x44d3af=CS_LOOP_ATTACK_SPAWN_DELAY);_0x4f3a9f[_0x4c7d47(0xc4)]['forEach']((_0x2cd9c1,_0x510c75)=>{const _0x40872b=_0x4c7d47;if(!_0x2cd9c1||!_0x2cd9c1[_0x40872b(0x19d)]){console[_0x40872b(0x186)](_0x40872b(0x128)+_0xd8c2e6+',\x20index\x20'+_0x510c75+_0x40872b(0xce)),enemiesSpawnedThisWave++;return;}const _0x3c9447=_0x510c75*_0x44d3af,_0x5dffc4=setTimeout(()=>{const _0x6cc384=_0x40872b,_0x57867e=enemySpawnTimeouts[_0x6cc384(0x11e)](_0x5dffc4);if(_0x57867e>-0x1)enemySpawnTimeouts[_0x6cc384(0xa1)](_0x57867e,0x1);let _0x358d2c=![];isTwoPlayerMode&&selectedGameMode===_0x6cc384(0xed)?_0x358d2c=player1Lives>0x0||player2Lives>0x0:_0x358d2c=playerLives>0x0;if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||!_0x358d2c){enemiesSpawnedThisWave++;return;}try{let _0x1719b3=_0x2cd9c1[_0x6cc384(0x19d)],_0x52f808=_0x1719b3===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x3bb3ee,_0x14f97b;if(_0x1719b3===ENEMY1_TYPE)_0x3bb3ee=ENEMY1_WIDTH,_0x14f97b=ENEMY1_HEIGHT;else _0x1719b3===ENEMY3_TYPE?(_0x3bb3ee=BOSS_WIDTH,_0x14f97b=BOSS_HEIGHT):(_0x3bb3ee=ENEMY_WIDTH,_0x14f97b=ENEMY_HEIGHT);let _0x561e33=0x0,_0xc224ef=0x0;if(_0x4a3ffb[0x0]?.['p0'])_0x561e33=_0x4a3ffb[0x0]['p0']['x'],_0xc224ef=_0x4a3ffb[0x0]['p0']['y'];else throw new Error(_0x6cc384(0x169)+_0x1ea46c);(_0xd8c2e6===0x0||_0xd8c2e6===0x1)&&(_0x561e33+=_0x3bb2f1);const _0x16f0b4=-_0x510c75*PATH_T_OFFSET_PER_ENEMY,_0x4a3a39={'x':_0x561e33,'y':_0xc224ef,'width':_0x3bb3ee,'height':_0x14f97b,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':'following_bezier_path','gridRow':-0x1,'gridCol':-0x1,'type':_0x1719b3,'health':_0x52f808,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x1ea46c,'pathSegmentIndex':0x0,'pathT':_0x16f0b4,'squadronId':_0xd8c2e6,'id':_0x6cc384(0x16a)+_0xd8c2e6+'-'+_0x510c75+'-'+Date[_0x6cc384(0x12f)]()+'-'+Math[_0x6cc384(0x107)]()[_0x6cc384(0xb3)](0x24)[_0x6cc384(0x11c)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x1719b3===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x1719b3===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x49d4da};enemies[_0x6cc384(0xc9)](_0x4a3a39),enemiesSpawnedThisWave++;}catch(_0x389007){console['error'](_0x6cc384(0x102)+_0xd8c2e6+',\x20Idx\x20'+_0x510c75+_0x6cc384(0xc1)+_0x1ea46c+'):',_0x389007),enemiesSpawnedThisWave++;}},_0x3c9447);enemySpawnTimeouts[_0x40872b(0xc9)](_0x5dffc4),_0x315a0e++;});}catch(_0x20384b){console['error']('CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20'+_0xd8c2e6+':',_0x20384b),enemiesSpawnedThisWave+=_0x4f3a9f[_0x4c7d47(0xc4)][_0x4c7d47(0xbb)];}else _0x4f3a9f?.['enemies']?.[_0x4c7d47(0xbb)]>0x0&&(enemiesSpawnedThisWave+=_0x4f3a9f[_0x4c7d47(0xc4)][_0x4c7d47(0xbb)]);},_0x203a8a);enemySpawnTimeouts[_0x3f52fc(0xc9)](_0x543e27);});}else console[_0xb736d(0x197)]('CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.'),isWaveTransitioning=!![],setTimeout(()=>{const _0x3de2ac=_0xb736d;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x3de2ac(0xed)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x3de2ac(0x78)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x111fbb,_0x3de347,_0x1d048d){const _0x2548b6=_0x1d45a4;let _0x205dcd=![];isTwoPlayerMode&&selectedGameMode===_0x2548b6(0xed)?_0x205dcd=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x205dcd=playerLives>0x0&&!isShipCaptured;if(!_0x111fbb||isPaused||!isInGameState||!_0x205dcd||isChallengingStage||isWaveTransitioning)return;const _0x549519=Math[_0x2548b6(0x11d)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x3e1538=0x0;_0x3e1538<_0x549519;_0x3e1538++){const _0x26d1c6=_0x1d048d+_0x3e1538*ENTRANCE_FIRE_BURST_DELAY_MS,_0x1d2af1=setTimeout(()=>{const _0x111406=_0x2548b6;try{const _0x5d0a94=enemySpawnTimeouts[_0x111406(0x11e)](_0x1d2af1);_0x5d0a94>-0x1&&enemySpawnTimeouts[_0x111406(0xa1)](_0x5d0a94,0x1);let _0x3d7a60=![];isTwoPlayerMode&&selectedGameMode===_0x111406(0xed)?_0x3d7a60=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x3d7a60=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x3d7a60||isChallengingStage||isWaveTransitioning)return;const _0x516e63=enemies['find'](_0x311235=>_0x311235&&_0x311235['id']===_0x111fbb);_0x516e63&&_0x516e63[_0x111406(0x14f)]===_0x3de347&&(createBulletSimple(_0x516e63)&&(_0x3e1538===0x0&&playSound('enemyShootSound',![],0.4),_0x516e63[_0x111406(0x148)]=Date[_0x111406(0x12f)]()));}catch(_0x3dc4ac){console[_0x111406(0x186)](_0x111406(0xff)+(_0x3e1538+0x1)+'/'+_0x549519+_0x111406(0x89)+_0x111fbb+':',_0x3dc4ac);}},_0x26d1c6);enemySpawnTimeouts[_0x2548b6(0xc9)](_0x1d2af1);}}function fireFixedEnemyBurst(_0x2bc89d,_0x55cb50,_0x516bdc,_0x262b8e){const _0x54329e=_0x1d45a4;let _0x23eada=![];isTwoPlayerMode&&selectedGameMode===_0x54329e(0xed)?_0x23eada=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x23eada=playerLives>0x0&&!isShipCaptured;if(!_0x2bc89d||isPaused||!isInGameState||!_0x23eada||isChallengingStage||isWaveTransitioning||_0x262b8e<=0x0)return;for(let _0x68439=0x0;_0x68439<_0x262b8e;_0x68439++){const _0x3a6bc2=_0x516bdc+_0x68439*ENTRANCE_FIRE_BURST_DELAY_MS,_0x534894=setTimeout(()=>{const _0x3dd84a=_0x54329e;try{const _0xb3fab6=enemySpawnTimeouts[_0x3dd84a(0x11e)](_0x534894);_0xb3fab6>-0x1&&enemySpawnTimeouts[_0x3dd84a(0xa1)](_0xb3fab6,0x1);let _0x2ddfdf=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x2ddfdf=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x2ddfdf=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x2ddfdf||isChallengingStage||isWaveTransitioning)return;const _0x5c356f=enemies[_0x3dd84a(0x152)](_0x43d256=>_0x43d256&&_0x43d256['id']===_0x2bc89d);if(_0x5c356f)createBulletSimple(_0x5c356f)&&(_0x68439===0x0&&playSound(_0x3dd84a(0xd7),![],0.4),_0x5c356f['lastFiredTime']=Date[_0x3dd84a(0x12f)]());else{}}catch(_0x571da4){console[_0x3dd84a(0x186)](_0x3dd84a(0xe0)+(_0x68439+0x1)+'/'+_0x262b8e+_0x3dd84a(0x89)+_0x2bc89d+':',_0x571da4);}},_0x3a6bc2);enemySpawnTimeouts[_0x54329e(0xc9)](_0x534894);}}function startFullGridWave(){const _0xe9bb4f=_0x1d45a4;if(!currentWaveDefinition||currentWaveDefinition[_0xe9bb4f(0xbb)]===0x0||!isFullGridWave){console[_0xe9bb4f(0x186)](_0xe9bb4f(0x159)),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(_0xe9bb4f(0x84),![],0.4),enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x1a922b=0x0;currentWaveDefinition[_0xe9bb4f(0x10c)]((_0x34fda3,_0x15225c)=>{const _0x2ac07a=_0xe9bb4f;let _0x3fcaa6=0x0;_0x34fda3&&_0x34fda3[_0x2ac07a(0xc4)]&&Array[_0x2ac07a(0x81)](_0x34fda3[_0x2ac07a(0xc4)])?(_0x3fcaa6=_0x34fda3[_0x2ac07a(0xc4)]['length'],_0x34fda3['enemies']['forEach']((_0x3e84a1,_0xa58947)=>{const _0x1a9390=_0x2ac07a;try{if(!_0x3e84a1||!_0x3e84a1[_0x1a9390(0x19d)]||typeof _0x3e84a1[_0x1a9390(0x138)]===_0x1a9390(0x8f)||typeof _0x3e84a1[_0x1a9390(0xf4)]===_0x1a9390(0x8f)){console[_0x1a9390(0x186)](_0x1a9390(0x7f)+_0x15225c+',\x20index\x20'+_0xa58947+_0x1a9390(0xce));return;}let _0x333556=_0x3e84a1[_0x1a9390(0x19d)],_0x512451=_0x333556===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x3307b4,_0x23b54f;if(_0x333556===ENEMY1_TYPE)_0x3307b4=ENEMY1_WIDTH,_0x23b54f=ENEMY1_HEIGHT;else _0x333556===ENEMY3_TYPE?(_0x3307b4=BOSS_WIDTH,_0x23b54f=BOSS_HEIGHT):(_0x3307b4=ENEMY_WIDTH,_0x23b54f=ENEMY_HEIGHT);let _0x2cf190,_0x3648a9;try{const {x:_0x2bfaa3,y:_0x839aa7}=getCurrentGridSlotPosition(_0x3e84a1[_0x1a9390(0x138)],_0x3e84a1[_0x1a9390(0xf4)],_0x3307b4);_0x2cf190=_0x2bfaa3,_0x3648a9=_0x839aa7;}catch(_0x397184){console[_0x1a9390(0x186)](_0x1a9390(0x14a)+_0x3e84a1['type']+'\x20at\x20['+_0x3e84a1['gridRow']+','+_0x3e84a1[_0x1a9390(0xf4)]+']',_0x397184),_0x2cf190=gameCanvas?.[_0x1a9390(0xaa)]/0x2||0xc8,_0x3648a9=ENEMY_TOP_MARGIN+_0x3e84a1[_0x1a9390(0x138)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x32475f={'x':_0x2cf190,'y':_0x3648a9,'width':_0x3307b4,'height':_0x23b54f,'targetGridX':_0x2cf190,'targetGridY':_0x3648a9,'speed':0x0,'state':'in_grid','gridRow':_0x3e84a1[_0x1a9390(0x138)],'gridCol':_0x3e84a1[_0x1a9390(0xf4)],'type':_0x333556,'health':_0x512451,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x15225c,'squadronEnemyIndex':_0xa58947,'id':_0x1a9390(0x125)+_0x15225c+'-'+_0xa58947+'-'+Date[_0x1a9390(0x12f)]()+'-'+Math[_0x1a9390(0x107)]()[_0x1a9390(0xb3)](0x24)[_0x1a9390(0x11c)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x1a9390(0x14b),'hasCapturedShip':_0x333556===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x333556===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies['push'](_0x32475f),_0x1a922b++;}catch(_0x31f453){console[_0x1a9390(0x186)](_0x1a9390(0x10b)+_0x15225c+',\x20Idx\x20'+_0xa58947+'):',_0x31f453);}})):console[_0x2ac07a(0x197)](_0x2ac07a(0x16b)+_0x15225c+_0x2ac07a(0x156)),squadronCompletionStatus[_0x15225c]={'completed':_0x3fcaa6,'total':_0x3fcaa6};}),totalEnemiesScheduledForWave=_0x1a922b,enemiesSpawnedThisWave=_0x1a922b,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0xe9bb4f(0x191),!![],0.1)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date['now'](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date[_0xe9bb4f(0x12f)](),firstEnemyLanded=!![];}function renderGame(){const _0x1a9b7a=_0x1d45a4;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0x1a9b7a(0x98)](0x0,0x0,gameCanvas['width'],gameCanvas['height']);const _0x436042=Date['now']();gameCtx[_0x1a9b7a(0x95)]();const _0x37c180=_0x1a9b7a(0xd8),_0x573088=_0x1a9b7a(0x124),_0x133efe=_0x1a9b7a(0xbc);let _0x30beb7,_0x369071,_0x8176b5,_0x5a2276,_0x5dc85b=![],_0x46394e=![],_0x216eac=![];if(isShowingResultsScreen){}else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage){}else{if(isShowingPlayerGameOverMessage){}else{if(!isInGameState){}else{_0x8176b5=highScore||0x0;if(!isManualControl){}else{if(isTwoPlayerMode&&selectedGameMode===_0x1a9b7a(0xed)){_0x30beb7=player1Score,_0x369071=player2Score,_0x8176b5=Math[_0x1a9b7a(0x12c)](highScore,player1Score,player2Score),_0x5a2276='1UP',_0x5dc85b=!isShowingIntro&&!isPaused&&player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x46394e=!isShowingIntro&&!isPaused&&player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if(player1Score>=_0x8176b5&&player1Score>0x0)_0x216eac=_0x5dc85b;if(player2Score>=_0x8176b5&&player2Score>0x0&&player2Score>player1Score)_0x216eac=_0x46394e;}else isTwoPlayerMode&&selectedGameMode===_0x1a9b7a(0x14b)?(_0x30beb7=currentPlayer===0x1?score:player1Score,_0x369071=currentPlayer===0x2?score:player2Score,_0x8176b5=Math['max'](highScore,player1Score,player2Score,score),_0x5a2276='1UP',_0x5dc85b=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x46394e=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x216eac=!isPaused&&!isShowingIntro&&score>0x0&&_0x8176b5>0x0&&score>=_0x8176b5):(_0x30beb7=score,_0x369071=0x0,_0x5a2276='1UP');}}}}}let _0x2919aa=![];if(_0x216eac){}typeof MARGIN_SIDE!==_0x1a9b7a(0x8f)&&typeof MARGIN_TOP!==_0x1a9b7a(0x8f)&&typeof SCORE_OFFSET_Y!==_0x1a9b7a(0x8f)&&(drawTopUiElement(_0x5a2276,_0x30beb7,_0x1a9b7a(0xef),MARGIN_SIDE,_0x5dc85b),drawTopUiElement(_0x1a9b7a(0x9a),_0x8176b5,_0x1a9b7a(0x9c),gameCanvas[_0x1a9b7a(0xaa)]/0x2,_0x2919aa),drawTopUiElement(_0x1a9b7a(0x121),_0x369071,_0x1a9b7a(0xf2),gameCanvas[_0x1a9b7a(0xaa)]-MARGIN_SIDE,_0x46394e));if(typeof shipImage!==_0x1a9b7a(0x8f)&&typeof LIFE_ICON_MARGIN_BOTTOM!=='undefined'&&typeof LIFE_ICON_SIZE!==_0x1a9b7a(0x8f)&&typeof LIFE_ICON_MARGIN_LEFT!==_0x1a9b7a(0x8f)&&typeof LIFE_ICON_SPACING!==_0x1a9b7a(0x8f)){if(shipImage[_0x1a9b7a(0x136)]&&shipImage[_0x1a9b7a(0x15c)]!==0x0){const _0x6e9a8c=gameCanvas[_0x1a9b7a(0x74)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x27dbeb=0x0,_0x2230a9=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x1a9b7a(0xed)){if(player1Lives>0x0)_0x27dbeb=Math[_0x1a9b7a(0x12c)](0x0,player1Lives-0x1);if(player2Lives>0x0)_0x2230a9=Math[_0x1a9b7a(0x12c)](0x0,player2Lives-0x1);}else{if(playerLives>0x0)_0x27dbeb=Math[_0x1a9b7a(0x12c)](0x0,playerLives-0x1);}const _0x4bfe1b=0x5;for(let _0x1eb1df=0x0;_0x1eb1df<Math[_0x1a9b7a(0x99)](_0x27dbeb,_0x4bfe1b);_0x1eb1df++){const _0x491efd=LIFE_ICON_MARGIN_LEFT+_0x1eb1df*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx['drawImage'](shipImage,Math[_0x1a9b7a(0x11d)](_0x491efd),Math[_0x1a9b7a(0x11d)](_0x6e9a8c),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}if(isTwoPlayerMode&&selectedGameMode===_0x1a9b7a(0xed)){const _0x263439=gameCanvas[_0x1a9b7a(0xaa)]-LIFE_ICON_MARGIN_RIGHT-Math[_0x1a9b7a(0x99)](_0x2230a9,_0x4bfe1b)*(LIFE_ICON_SIZE+LIFE_ICON_SPACING)+LIFE_ICON_SPACING;for(let _0x27de47=0x0;_0x27de47<Math[_0x1a9b7a(0x99)](_0x2230a9,_0x4bfe1b);_0x27de47++){const _0x4d533c=_0x263439+_0x27de47*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx['drawImage'](shipImage,Math[_0x1a9b7a(0x11d)](_0x4d533c),Math[_0x1a9b7a(0x11d)](_0x6e9a8c),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}}gameCtx['restore'](),gameCtx[_0x1a9b7a(0x95)]();if(isTwoPlayerMode&&selectedGameMode===_0x1a9b7a(0xed)){if(ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured){let _0x272423=!![];if(isPlayer1Invincible){const _0x193f16=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x436042%_0x193f16>=INVINCIBILITY_BLINK_ON_MS)_0x272423=![];}if(_0x272423){const _0x431370=ship1['x'],_0x531f02=ship1['y'];typeof shipImage!=='undefined'&&shipImage[_0x1a9b7a(0x136)]?(gameCtx['drawImage'](shipImage,Math[_0x1a9b7a(0x11d)](_0x431370),Math[_0x1a9b7a(0x11d)](_0x531f02),ship1['width'],ship1[_0x1a9b7a(0x74)]),player1IsDualShipActive&&gameCtx['drawImage'](shipImage,Math[_0x1a9b7a(0x11d)](_0x431370+DUAL_SHIP_OFFSET_X),Math[_0x1a9b7a(0x11d)](_0x531f02),ship1['width'],ship1[_0x1a9b7a(0x74)])):(gameCtx[_0x1a9b7a(0x77)]=_0x1a9b7a(0xb0),gameCtx[_0x1a9b7a(0x13c)](Math[_0x1a9b7a(0x11d)](_0x431370),Math['round'](_0x531f02),ship1['width'],ship1[_0x1a9b7a(0x74)]));}}if(ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured){let _0x411d88=!![];if(isPlayer2Invincible){const _0x490ded=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x436042%_0x490ded>=INVINCIBILITY_BLINK_ON_MS)_0x411d88=![];}if(_0x411d88){const _0x65484e=ship2['x'],_0x46bb05=ship2['y'];typeof shipImage!=='undefined'&&shipImage[_0x1a9b7a(0x136)]?(gameCtx[_0x1a9b7a(0x130)](shipImage,Math['round'](_0x65484e),Math[_0x1a9b7a(0x11d)](_0x46bb05),ship2[_0x1a9b7a(0xaa)],ship2[_0x1a9b7a(0x74)]),player2IsDualShipActive&&gameCtx['drawImage'](shipImage,Math[_0x1a9b7a(0x11d)](_0x65484e+DUAL_SHIP_OFFSET_X),Math[_0x1a9b7a(0x11d)](_0x46bb05),ship2[_0x1a9b7a(0xaa)],ship2[_0x1a9b7a(0x74)])):(gameCtx['fillStyle']=_0x1a9b7a(0xd0),gameCtx['fillRect'](Math[_0x1a9b7a(0x11d)](_0x65484e),Math[_0x1a9b7a(0x11d)](_0x46bb05),ship2[_0x1a9b7a(0xaa)],ship2['height']));}}}else{if(ship&&!isShowingCaptureMessage){let _0x120da8=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x34449c=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x436042%_0x34449c>=INVINCIBILITY_BLINK_ON_MS)_0x120da8=![];}if(_0x120da8){let _0x2ab5fa=ship['x'],_0x4443ef=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x4443ef&&(_0x2ab5fa=Math[_0x1a9b7a(0x11d)](gameCanvas[_0x1a9b7a(0xaa)]/0x2-ship[_0x1a9b7a(0xaa)]/0x2));const _0x10c713=ship['y'];typeof shipImage!==_0x1a9b7a(0x8f)&&shipImage[_0x1a9b7a(0x136)]?(gameCtx[_0x1a9b7a(0x130)](shipImage,Math[_0x1a9b7a(0x11d)](_0x2ab5fa),Math[_0x1a9b7a(0x11d)](_0x10c713),ship[_0x1a9b7a(0xaa)],ship[_0x1a9b7a(0x74)]),isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&gameCtx[_0x1a9b7a(0x130)](shipImage,Math[_0x1a9b7a(0x11d)](_0x2ab5fa+DUAL_SHIP_OFFSET_X),Math[_0x1a9b7a(0x11d)](_0x10c713),ship[_0x1a9b7a(0xaa)],ship[_0x1a9b7a(0x74)])):(gameCtx[_0x1a9b7a(0x77)]=_0x1a9b7a(0xb0),gameCtx['fillRect'](Math[_0x1a9b7a(0x11d)](_0x2ab5fa),Math['round'](_0x10c713),ship[_0x1a9b7a(0xaa)],ship[_0x1a9b7a(0x74)]));}}}if(fallingShips['length']>0x0&&typeof shipImage!=='undefined'&&shipImage[_0x1a9b7a(0x136)]){}gameCtx[_0x1a9b7a(0x187)]();if(!isInGameState){if(isShowingScoreScreen){}else{gameCtx['save']();const _0x38656a=gameCanvas[_0x1a9b7a(0xaa)],_0xf92f15=gameCanvas[_0x1a9b7a(0x74)],_0x4e495c=_0x38656a/0x2;selectedButtonIndex===-0x1&&(isPlayerSelectMode||isFiringModeSelectMode||isGameModeSelectMode||!isPlayerSelectMode&&!isFiringModeSelectMode&&!isGameModeSelectMode)&&(selectedButtonIndex=0x0);let _0xc8e9d7=MENU_LOGO_APPROX_HEIGHT,_0x2b1f89=_0xc8e9d7*(logoImage[_0x1a9b7a(0x108)]/logoImage[_0x1a9b7a(0x15c)]||0x1);typeof logoImage!==_0x1a9b7a(0x8f)&&logoImage[_0x1a9b7a(0x136)]&&logoImage[_0x1a9b7a(0x15c)]!==0x0&&(_0xc8e9d7=logoImage['naturalHeight']*LOGO_SCALE_FACTOR,_0x2b1f89=logoImage[_0x1a9b7a(0x108)]*LOGO_SCALE_FACTOR);const _0x44ebd1=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x5ade55=_0xc8e9d7+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x44ebd1;let _0x30db2b=(_0xf92f15-_0x5ade55)/0x2-0x46;_0x30db2b+=MENU_GENERAL_Y_OFFSET;const _0x50b357=_0x4e495c-_0x2b1f89/0x2,_0x4e174d=_0x30db2b+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!==_0x1a9b7a(0x8f)&&logoImage[_0x1a9b7a(0x136)]&&logoImage[_0x1a9b7a(0x15c)]!==0x0?gameCtx[_0x1a9b7a(0x130)](logoImage,Math[_0x1a9b7a(0x11d)](_0x50b357),Math['round'](_0x4e174d),_0x2b1f89,_0xc8e9d7):drawCanvasText(_0x1a9b7a(0x135),_0x4e495c,_0x4e174d+_0xc8e9d7/0x2,'30px\x20Arial',_0x1a9b7a(0x1a9));if(isGameModeSelectMode)drawCanvasButton(_0x1a9b7a(0x123),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x1a9b7a(0x88),0x1,selectedButtonIndex===0x1);else{if(isFiringModeSelectMode)drawCanvasButton('EASY',0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x1a9b7a(0x122),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton('1\x20PLAYER',0x0,selectedButtonIndex===0x0),drawCanvasButton('2\x20PLAYER',0x1,selectedButtonIndex===0x1)):(drawCanvasButton(_0x1a9b7a(0x18b),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x1a9b7a(0xf6),0x1,selectedButtonIndex===0x1));}const _0x420402=getMenuButtonRect(0x1);let _0x3735f2;_0x420402?_0x3735f2=_0x420402['y']+_0x420402[_0x1a9b7a(0x74)]+MENU_BUTTON_SUBTITLE_V_GAP+_0x44ebd1/0x2:_0x3735f2=_0x30db2b+_0xc8e9d7+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x44ebd1/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x4e495c-0x1,Math[_0x1a9b7a(0x11d)](_0x3735f2),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0x1a9b7a(0x9c),'middle',!![]),gameCtx[_0x1a9b7a(0x187)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0x1a9b7a(0x95)]();let _0x322992=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x322992&&(bullets[_0x1a9b7a(0x10c)](_0x479a6f=>{}),enemyBullets['forEach'](_0x48f340=>{}));enemies[_0x1a9b7a(0x10c)](_0x11c4e5=>{});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x314a8d=![];const _0x4f37c9=gameCanvas[_0x1a9b7a(0x74)]/0x2;if(isPaused){}else{if(isShowingCaptureMessage){}}gameCtx[_0x1a9b7a(0x187)]();}else{if(isShowingPlayerGameOverMessage){}else{if(gameOverSequenceStartTime>0x0){}}}}}catch(_0x7222ec){console[_0x1a9b7a(0x186)](_0x1a9b7a(0x17d),_0x7222ec,_0x7222ec[_0x1a9b7a(0x13f)]);}}function _0x5b67(_0x28c012,_0x138c72){const _0x1298f0=_0x1298();return _0x5b67=function(_0x5b6765,_0x16095e){_0x5b6765=_0x5b6765-0x6f;let _0x12b0a7=_0x1298f0[_0x5b6765];return _0x12b0a7;},_0x5b67(_0x28c012,_0x138c72);}function handleEnemyHit(_0x2b7be9,_0x147530=null){const _0x4555d0=_0x1d45a4;if(!_0x2b7be9)return{'destroyed':![],'pointsAwarded':0x0};const _0x1993c3=Date[_0x4555d0(0x12f)]();let _0x15f5cf=0x0,_0x21d773=![],_0x3160a1=_0x2b7be9[_0x4555d0(0x194)],_0x28ae3b=null,_0x515e2b=0x1;const _0x2cdb9a=_0x2b7be9[_0x4555d0(0x19d)]===ENEMY3_TYPE?BOSS_WIDTH:_0x2b7be9[_0x4555d0(0x19d)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x4b84dd=_0x2b7be9[_0x4555d0(0x19d)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x2b7be9[_0x4555d0(0x19d)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x1b8d7d=_0x2b7be9[_0x4555d0(0x19d)]===ENEMY3_TYPE&&_0x2b7be9[_0x4555d0(0x19f)],_0x20ea12=_0x2b7be9[_0x4555d0(0x19d)]===ENEMY3_TYPE&&_0x2b7be9[_0x4555d0(0x179)];let _0x3e20b4=![],_0x4b81dd=null;if(_0x1b8d7d){if(isTwoPlayerMode&&selectedGameMode===_0x4555d0(0xed)){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x2b7be9['id'])_0x3e20b4=!![],_0x4b81dd=_0x4555d0(0xde);else isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x2b7be9['id']&&(_0x3e20b4=!![],_0x4b81dd=_0x4555d0(0x158));}else!isTwoPlayerMode&&isShipCaptured&&capturedBossIdWithMessage===_0x2b7be9['id']&&(_0x3e20b4=!![]);}const _0x125d79=_0x2b7be9['x']+_0x2cdb9a/0x2,_0x5bd285=_0x2b7be9['y']+_0x4b84dd*0.2;createHitSparks(_0x125d79,_0x5bd285),_0x2b7be9[_0x4555d0(0x127)]--;_0x2b7be9[_0x4555d0(0x19d)]===ENEMY3_TYPE&&(_0x2b7be9[_0x4555d0(0x194)]=_0x2b7be9[_0x4555d0(0x127)]<ENEMY3_MAX_HITS);if(_0x2b7be9[_0x4555d0(0x127)]<=0x0){_0x21d773=!![];isChallengingStage&&challengingStageEnemiesHit++;if(_0x1b8d7d&&_0x20ea12){let _0x4460ff=null;if(_0x3e20b4&&_0x4b81dd)_0x4460ff=_0x4b81dd;else{let _0xb9cabd=![];if(isCoopAIDemoActive){if(_0x147530==='player1'&&player1IsDualShipActive)_0x4460ff=_0x4555d0(0x158),_0xb9cabd=!![];else _0x147530==='player2'&&player2IsDualShipActive&&(_0x4460ff='player1',_0xb9cabd=!![]);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4555d0(0xa7)){if(_0x147530==='ai_p2'&&player2IsDualShipActive)_0x4460ff=_0x4555d0(0xde),_0xb9cabd=!![];else _0x147530==='player1'&&player1IsDualShipActive&&(_0x4460ff=_0x4555d0(0x75),_0xb9cabd=!![]);}}!_0xb9cabd&&(_0x4460ff=_0x147530);}_0x4460ff===null&&_0x147530&&(_0x4460ff=_0x147530);if(_0x2b7be9['capturedShipDimensions']){const _0x4502e6=_0x2b7be9['capturedShipDimensions'][_0x4555d0(0xaa)],_0x4eb6e0=_0x2b7be9[_0x4555d0(0x179)][_0x4555d0(0x74)],_0x2c7e37=_0x2b7be9['x']+(_0x2cdb9a-_0x4502e6)/0x2+CAPTURED_SHIP_OFFSET_X,_0x418dd2=_0x2b7be9['y']+CAPTURED_SHIP_OFFSET_Y,_0x2f1e97=fallingShips[_0x4555d0(0x181)](_0x3f8edb=>Math[_0x4555d0(0x9e)](_0x3f8edb['x']-_0x2c7e37)<0x1&&Math[_0x4555d0(0x9e)](_0x3f8edb['y']-_0x418dd2)<0x1);!_0x2f1e97&&fallingShips[_0x4555d0(0xc9)]({'x':_0x2c7e37,'y':_0x418dd2,'width':_0x4502e6,'height':_0x4eb6e0,'creationTime':_0x1993c3,'tintProgress':0x1,'rotation':0x0,'rotationDirection':Math['random']()<0.5?-0x1:0x1,'totalRotation':0x0,'rotationCompleted':![],'targetPlayerId':_0x4460ff});}else console['error']('[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!');_0x2b7be9[_0x4555d0(0x19f)]=![],_0x2b7be9[_0x4555d0(0x179)]=null;}else _0x1b8d7d&&!_0x20ea12&&(console[_0x4555d0(0x186)](_0x4555d0(0x120)+_0x2b7be9['id']+'\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.'),_0x2b7be9[_0x4555d0(0x19f)]=![],_0x2b7be9[_0x4555d0(0x179)]=null);if(isChallengingStage){let _0x3184f7=0x64;const _0x145325=csLastHitTime;csLastHitTime=_0x1993c3,csLastChainHitPosition={'x':_0x2b7be9['x'],'y':_0x2b7be9['y']},csCurrentChainHits>0x0&&_0x1993c3-_0x145325<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x3184f7*=0x2),_0x15f5cf=_0x3184f7,csCurrentChainScore+=_0x15f5cf,scoreEarnedThisCS+=_0x15f5cf,_0x28ae3b=_0x4555d0(0xb8),_0x515e2b=0.4;}else{if(_0x2b7be9[_0x4555d0(0x14f)]===_0x4555d0(0x80))_0x15f5cf=_0x2b7be9[_0x4555d0(0x19d)]===ENEMY1_TYPE?0x32:_0x2b7be9[_0x4555d0(0x19d)]===ENEMY2_TYPE?0x50:0x0,_0x2b7be9[_0x4555d0(0x19d)]===ENEMY3_TYPE&&(_0x15f5cf=0x96),_0x28ae3b=_0x4555d0(0xb8),_0x515e2b=0.4;else{_0x15f5cf=_0x2b7be9[_0x4555d0(0x19d)]===ENEMY1_TYPE?0x64:_0x2b7be9[_0x4555d0(0x19d)]===ENEMY2_TYPE?0xa0:0x0;if(_0x2b7be9[_0x4555d0(0x19d)]===ENEMY3_TYPE){if(_0x1b8d7d){const _0x115409=[0x3e8,0x5dc,0x7d0,0xbb8];_0x15f5cf=_0x115409[Math[_0x4555d0(0x119)](Math[_0x4555d0(0x107)]()*_0x115409[_0x4555d0(0xbb)])],_0x28ae3b=_0x4555d0(0x15e),_0x515e2b=0.4;}else _0x3160a1?(_0x15f5cf=0x190,_0x28ae3b='bossHit2Sound',_0x515e2b=0.4):(_0x15f5cf=0x0,console[_0x4555d0(0x197)]('[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20'+_0x15f5cf+'\x20points.\x20Health\x20was:\x20'+(_0x2b7be9[_0x4555d0(0x127)]+0x1)),_0x28ae3b=_0x4555d0(0xb8),_0x515e2b=0.4);}else _0x28ae3b='explosionSound',_0x515e2b=0.4;if(_0x21d773&&_0x15f5cf>0x0){const _0x358520=normalWaveLastHitTime;normalWaveLastHitTime=_0x1993c3,normalWaveLastChainHitPosition={'x':_0x2b7be9['x'],'y':_0x2b7be9['y']};normalWaveLastChainHitPosition&&_0x1993c3-_0x358520<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x5d87b2=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x3e0ffa=Math[_0x4555d0(0x99)](_0x5d87b2['length']-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x1f0fe9=_0x5d87b2[_0x3e0ffa];_0x15f5cf+=_0x1f0fe9,normalWaveCurrentChainScore+=_0x1f0fe9;}}}}if(_0x15f5cf>0x0){let _0x358474=null;if(isCoopAIDemoActive){if(_0x147530===_0x4555d0(0xde))player1Score+=_0x15f5cf,_0x358474=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2))),checkAndAwardExtraLife(0x1);else{if(_0x147530===_0x4555d0(0x158))player2Score+=_0x15f5cf,_0x358474=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2))),checkAndAwardExtraLife(0x2);else{player1Score+=_0x15f5cf,_0x358474=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score;checkAndAwardExtraLife(0x1);}}}else{if(!isManualControl)score+=_0x15f5cf,player1Score=score,_0x358474=()=>player1EnemiesHit++,score>highScore&&(highScore=score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x4555d0(0xa6),![],0.2))),checkAndAwardExtraLife(0x1);else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4555d0(0xa7)){if(_0x147530==='player1')player1Score+=_0x15f5cf,_0x358474=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x4555d0(0xa6),![],0.2))),checkAndAwardExtraLife(0x1);else{if(_0x147530===_0x4555d0(0x75))player2Score+=_0x15f5cf,_0x358474=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x4555d0(0xa6),![],0.2))),checkAndAwardExtraLife(0x2);else{player1Score+=_0x15f5cf,_0x358474=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score;checkAndAwardExtraLife(0x1);}}}else{if(isTwoPlayerMode&&selectedGameMode===_0x4555d0(0xed)){if(_0x147530===_0x4555d0(0xde))player1Score+=_0x15f5cf,_0x358474=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2))),checkAndAwardExtraLife(0x1);else _0x147530===_0x4555d0(0x158)?(player2Score+=_0x15f5cf,_0x358474=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x4555d0(0xa6),![],0.2))),checkAndAwardExtraLife(0x2)):(player1Score+=_0x15f5cf,_0x358474=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x4555d0(0xa6),![],0.2))),checkAndAwardExtraLife(0x1));}else{score+=_0x15f5cf;let _0x4f2666=score,_0x311706=null,_0xef40c5=currentPlayer;currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,_0x358474=()=>player1EnemiesHit++,_0x311706=()=>{player1TriggeredHighScoreSound=!![];}):(player2Score=score,_0x358474=()=>player2EnemiesHit++,_0x311706=()=>{player2TriggeredHighScoreSound=!![];});if(_0x4f2666>highScore){highScore=_0x4f2666;const _0x501427=currentPlayer===0x1||!isTwoPlayerMode?player1TriggeredHighScoreSound:player2TriggeredHighScoreSound;!_0x501427&&_0x311706&&(_0x311706(),playSound('hiScoreSound',![],0.2));}checkAndAwardExtraLife(_0xef40c5);}}}}_0x358474&&!isChallengingStage&&_0x358474();const _0x413dce=_0x2b7be9[_0x4555d0(0x14f)]===_0x4555d0(0x80)||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x4555d0(0xc9)]({'text':_0x15f5cf[_0x4555d0(0xb3)](),'x':_0x2b7be9['x']+_0x2cdb9a/0x2,'y':_0x2b7be9['y'],'color':_0x413dce,'creationTime':_0x1993c3,'displayStartTime':_0x1993c3+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x2b7be9['x']+_0x2cdb9a/0x2,_0x2b7be9['y']+_0x4b84dd/0x2);_0x2b7be9['id']===capturingBossId&&stopSound(_0x4555d0(0x193));if(_0x2b7be9['state']==='attacking'||_0x2b7be9['state']==='following_entrance_path'||_0x2b7be9['state']===_0x4555d0(0x7b)||_0x2b7be9['state']===_0x4555d0(0x100)||_0x2b7be9[_0x4555d0(0x14f)]===_0x4555d0(0x18d)||_0x2b7be9[_0x4555d0(0x14f)]===_0x4555d0(0xb5)){if(_0x2b7be9['type']===ENEMY3_TYPE)stopSound(_0x4555d0(0x11b));else stopSound('butterflyDiveSound');}}else{_0x21d773=![];if(_0x2b7be9[_0x4555d0(0x19d)]===ENEMY3_TYPE)_0x28ae3b=_0x4555d0(0x16e),_0x515e2b=0.6,_0x15f5cf=0x0;else{_0x15f5cf=0x0;if(_0x2b7be9[_0x4555d0(0x19d)]===ENEMY1_TYPE)_0x28ae3b='beeHitSound',_0x515e2b=0.3;else _0x2b7be9[_0x4555d0(0x19d)]===ENEMY2_TYPE&&(_0x28ae3b='butterflyHitSound',_0x515e2b=0.3);}}return _0x28ae3b&&playSound(_0x28ae3b,![],_0x515e2b),{'destroyed':_0x21d773,'pointsAwarded':_0x15f5cf};}function createHitSparks(_0x4b713a,_0x5921c4){const _0x5de614=_0x1d45a4;if(!gameCtx)return;const _0x4563db=Date[_0x5de614(0x12f)]();for(let _0x4134b1=0x0;_0x4134b1<HIT_SPARK_COUNT;_0x4134b1++){const _0x3f37ba=Math[_0x5de614(0x107)]()*Math['PI']*0x2,_0x48ab44=HIT_SPARK_SPEED*(0.7+Math[_0x5de614(0x107)]()*0.6),_0xb59999=HIT_SPARK_LIFETIME*(0.8+Math['random']()*0.4);hitSparks['push']({'x':_0x4b713a,'y':_0x5921c4,'vx':Math['cos'](_0x3f37ba)*_0x48ab44,'vy':Math[_0x5de614(0xd1)](_0x3f37ba)*_0x48ab44,'creationTime':_0x4563db,'lifetime':_0xb59999,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x3fa036=_0x1d45a4,_0x2c1d63=Date['now']();for(let _0x504d84=hitSparks[_0x3fa036(0xbb)]-0x1;_0x504d84>=0x0;_0x504d84--){const _0x339ab3=hitSparks[_0x504d84],_0x3d2d84=_0x2c1d63-_0x339ab3[_0x3fa036(0x1a8)];_0x3d2d84>=_0x339ab3[_0x3fa036(0x7c)]?hitSparks[_0x3fa036(0xa1)](_0x504d84,0x1):(_0x339ab3['vy']+=HIT_SPARK_GRAVITY,_0x339ab3['x']+=_0x339ab3['vx'],_0x339ab3['y']+=_0x339ab3['vy'],_0x339ab3[_0x3fa036(0xb1)]=Math[_0x3fa036(0x12c)](0x0,0x1-_0x3d2d84*HIT_SPARK_FADE_SPEED));}}function moveEntities(){const _0x323e99=_0x1d45a4;try{if(isPaused)return;const _0x1d97e4=Date[_0x323e99(0x12f)]();}catch(_0x1d76a1){console['error'](_0x323e99(0x16c),_0x1d76a1,_0x1d76a1['stack']),isGridSoundPlaying=![],stopSound('gridBackgroundSound'),isEntrancePhaseActive=![],stopSound(_0x323e99(0x84)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x323e99(0x193)),stopSound(_0x323e99(0x15f)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x323e99(0x78))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x323e99(0x153));}}function switchPlayerTurn(){const _0x3ec01e=_0x1d45a4;if(!isTwoPlayerMode||selectedGameMode==='coop')return![];stopSound(_0x3ec01e(0xa6));if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive,player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive,player2MaxLevelReached=Math[_0x3ec01e(0x12c)](player2MaxLevelReached,level);if(player2Score>highScore)highScore=player2Score;}const _0x2eaaa2=currentPlayer===0x1?0x2:0x1,_0x115cae=_0x2eaaa2===0x1?player1Lives:player2Lives;if(_0x115cae<=0x0){const _0xd8497f=currentPlayer===0x1?player1Lives:player2Lives;return _0xd8497f<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x2eaaa2,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0x461fd9=null,_0x536901=![]){const _0x5a6530=_0x1d45a4,_0xd4c6e1=Date[_0x5a6530(0x12f)](),_0x111dbf=isTwoPlayerMode&&selectedGameMode===_0x5a6530(0xed)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0xd4c6e1<coopPlayersReadyStartTime+0x1f40;if(_0x111dbf)return![];let _0x5b26c0=![],_0x1f6c65=null,_0xc435f1=![],_0x387548=0x0,_0x35f430=_0x2cb50c=>{},_0x49e062=_0x2c745d=>{},_0x50e17b=![],_0x68e74f=()=>![],_0x5292b7=_0x103070=>{},_0x740bf7=_0x461fd9;const _0x493ed3=!isPaused&&isInGameState&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!showReadyMessage&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(_0x461fd9==='player1'&&isPlayer1ShowingGameOverMessage||_0x461fd9==='player2'&&isPlayer2ShowingGameOverMessage));if(!_0x493ed3)return![];if(_0x740bf7){let _0x174cfa=![];if(_0x740bf7==='ai'&&isShipCaptured)_0x174cfa=!![];else{if(_0x740bf7==='ai_p2'&&isTwoPlayerMode&&selectedGameMode===_0x5a6530(0x14b)&&isShipCaptured)_0x174cfa=!![];else{if(_0x740bf7===_0x5a6530(0xde)&&isCoopAIDemoActive&&isPlayer1ShipCaptured)_0x174cfa=!![];else{if(_0x740bf7===_0x5a6530(0x158)&&isCoopAIDemoActive&&isPlayer2ShipCaptured)_0x174cfa=!![];else{if(_0x740bf7===_0x5a6530(0x75)&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&isPlayer2ShipCaptured)_0x174cfa=!![];}}}}if(_0x174cfa)return![];}if(isTwoPlayerMode&&selectedGameMode===_0x5a6530(0xed)){if(_0x461fd9==='player1'&&ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1NeedsRespawnAfterCapture)(!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer1ShipCaptured)&&(_0x1f6c65=ship1,_0xc435f1=player1IsDualShipActive,_0x387548=player1LastShotTime,_0x35f430=_0x2f7f3c=>{player1LastShotTime=_0x2f7f3c;},_0x49e062=_0x13e8b9=>{player1ShotsFired+=_0x13e8b9;},_0x50e17b=selectedFiringMode===_0x5a6530(0x184),_0x68e74f=()=>p1JustFiredSingle,_0x5292b7=_0x4b907e=>{p1JustFiredSingle=_0x4b907e;},_0x5b26c0=!![]);else _0x461fd9===_0x5a6530(0x158)&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2NeedsRespawnAfterCapture&&((!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer2ShipCaptured)&&(_0x1f6c65=ship2,_0xc435f1=player2IsDualShipActive,_0x387548=player2LastShotTime,_0x35f430=_0x3d5654=>{player2LastShotTime=_0x3d5654;},_0x49e062=_0x4b27b0=>{player2ShotsFired+=_0x4b27b0;},isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?_0x50e17b=![]:(_0x50e17b=selectedFiringMode===_0x5a6530(0x184),_0x68e74f=()=>p2JustFiredSingle,_0x5292b7=_0x21ef10=>{p2JustFiredSingle=_0x21ef10;}),_0x5b26c0=!![]));}else{if(ship&&playerLives>0x0&&!isShipCaptured){_0x1f6c65=ship,_0xc435f1=isDualShipActive;if(isTwoPlayerMode&&selectedGameMode===_0x5a6530(0x14b)){if(currentPlayer===0x1){_0x387548=player1LastShotTime,_0x35f430=_0x568eba=>{player1LastShotTime=_0x568eba;},_0x49e062=_0x4685c1=>{player1ShotsFired+=_0x4685c1;},_0x50e17b=selectedFiringMode===_0x5a6530(0x184),_0x68e74f=()=>p1JustFiredSingle,_0x5292b7=_0x16dd8e=>{p1JustFiredSingle=_0x16dd8e;};if(!_0x740bf7)_0x740bf7=_0x5a6530(0xde);}else{_0x387548=player2LastShotTime,_0x35f430=_0x5b2a29=>{player2LastShotTime=_0x5b2a29;},_0x49e062=_0xdc6cc2=>{player2ShotsFired+=_0xdc6cc2;};if(isPlayerTwoAI){_0x50e17b=![];if(!_0x740bf7)_0x740bf7='ai_p2';}else{_0x50e17b=selectedFiringMode===_0x5a6530(0x184);connectedGamepadIndexP2===null&&connectedGamepadIndex!==null?(_0x68e74f=()=>p1JustFiredSingle,_0x5292b7=_0x42eef6=>{p1JustFiredSingle=_0x42eef6;}):(_0x68e74f=()=>p2JustFiredSingle,_0x5292b7=_0x6117a4=>{p2JustFiredSingle=_0x6117a4;});if(!_0x740bf7)_0x740bf7=_0x5a6530(0x158);}}}else{_0x387548=player1LastShotTime,_0x35f430=_0x233468=>{player1LastShotTime=_0x233468;},_0x49e062=_0x5eda1e=>{player1ShotsFired+=_0x5eda1e;},_0x50e17b=selectedFiringMode===_0x5a6530(0x184),_0x68e74f=()=>p1JustFiredSingle,_0x5292b7=_0x77649c=>{p1JustFiredSingle=_0x77649c;};if(!_0x740bf7)_0x740bf7='player1';}_0x5b26c0=!![];}}_0x461fd9===null&&!isManualControl&&!isCoopAIDemoActive&&ship&&playerLives>0x0&&!isShipCaptured&&!isShowingCaptureMessage&&(_0x1f6c65=ship,_0xc435f1=isDualShipActive,_0x387548=aiLastShotTime,_0x35f430=_0x45f936=>{aiLastShotTime=_0x45f936;},_0x49e062=_0x4c5845=>{player1ShotsFired+=_0x4c5845;},_0x50e17b=![],_0x5b26c0=!![],_0x740bf7='ai');if(!_0x5b26c0||!_0x1f6c65)return![];if(_0x50e17b){if(_0x536901){if(_0xd4c6e1-_0x387548<SHOOT_COOLDOWN)return![];}else{let _0x1cc2d8=![];if(_0x740bf7==='player1'||!isTwoPlayerMode&&_0x740bf7==='player1')_0x1cc2d8=keyboardP1ShootDown||connectedGamepadIndex!==null&&navigator[_0x5a6530(0x142)]()?.[connectedGamepadIndex]?.[_0x5a6530(0x178)][PS5_BUTTON_CROSS]?.[_0x5a6530(0xc8)];else{if(_0x740bf7===_0x5a6530(0x158)&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)_0x1cc2d8=keyboardP2ShootDown||connectedGamepadIndexP2!==null&&navigator[_0x5a6530(0x142)]()?.[connectedGamepadIndexP2]?.[_0x5a6530(0x178)][PS5_BUTTON_CROSS]?.[_0x5a6530(0xc8)];else connectedGamepadIndex!==null?_0x1cc2d8=keyboardP2ShootDown||connectedGamepadIndex!==null&&navigator[_0x5a6530(0x142)]()?.[connectedGamepadIndex]?.[_0x5a6530(0x178)][PS5_BUTTON_CROSS]?.[_0x5a6530(0xc8)]:_0x1cc2d8=keyboardP2ShootDown;}}if(_0x68e74f()){if(_0x1cc2d8)return![];else _0x5292b7(![]);}if(_0xd4c6e1-_0x387548<SHOOT_COOLDOWN)return![];}}else{if(_0xd4c6e1-_0x387548<SHOOT_COOLDOWN)return![];}try{const _0x1c83dd=_0x1f6c65['y'];let _0x27cfa4=0x0;if(_0xc435f1){const _0x211033=_0x1f6c65['x']+_0x1f6c65[_0x5a6530(0xaa)]/0x2,_0x4c0113=_0x1f6c65['x']+DUAL_SHIP_OFFSET_X+_0x1f6c65[_0x5a6530(0xaa)]/0x2,_0x110f82=_0x211033-PLAYER_BULLET_WIDTH/0x2,_0x44b0d9=_0x4c0113-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x110f82,'y':_0x1c83dd,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x740bf7}),bullets[_0x5a6530(0xc9)]({'x':_0x44b0d9,'y':_0x1c83dd,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x740bf7}),_0x27cfa4=0x2;}else{const _0x44f2a5=_0x1f6c65['x']+_0x1f6c65[_0x5a6530(0xaa)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x44f2a5,'y':_0x1c83dd,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x740bf7}),_0x27cfa4=0x1;}if(_0x50e17b&&!_0x536901)_0x5292b7(!![]);return playSound(_0x5a6530(0x174),![],0.4),_0x49e062(_0x27cfa4),_0x35f430(_0xd4c6e1),!![];}catch(_0xb82e35){return console[_0x5a6530(0x186)](_0x5a6530(0x182),_0xb82e35),![];}}function handlePlayerInput(){const _0x5d5fa1=_0x1d45a4;try{const _0x126b43=Date['now'](),_0x4daae0=isTwoPlayerMode&&selectedGameMode==='coop'&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x126b43<coopPlayersReadyStartTime+0x1f40;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedGameMode===_0x5d5fa1(0x14b)&&currentPlayer===0x2&&!isManualControl){isCoopAIDemoActive&&(leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![]);return;}let _0x1a31fe=isPaused||!isManualControl||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isTwoPlayerMode&&selectedGameMode===_0x5d5fa1(0xed)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage);if(_0x1a31fe){keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![];return;}let _0x3c9c16=0x0;if(isTouchActiveGame&&gameCanvas&&gameCanvas['width']>0x0){const _0x102a8c=gameCanvas['getBoundingClientRect'](),_0x1886e4=gameCanvas[_0x5d5fa1(0xaa)]/_0x102a8c[_0x5d5fa1(0xaa)];_0x3c9c16=(touchCurrentX-_0x102a8c['left'])*_0x1886e4;}let _0x416c2d=![],_0x3b8d18=![],_0x50cfe9=![],_0x16b002=![],_0x25db2c=![],_0x8f305b=![];if(connectedGamepadIndex!==null){const _0x2d5931=navigator[_0x5d5fa1(0x142)]();if(_0x2d5931?.[connectedGamepadIndex]){const _0x16ab82=_0x2d5931[connectedGamepadIndex],_0x860725=processSingleController(_0x16ab82,previousGameButtonStates);_0x416c2d=_0x860725[_0x5d5fa1(0xef)],_0x3b8d18=_0x860725[_0x5d5fa1(0xf2)],_0x50cfe9=_0x860725['shoot'],previousGameButtonStates=_0x860725[_0x5d5fa1(0x112)][_0x5d5fa1(0xfa)]();if(_0x860725[_0x5d5fa1(0xaf)]&&!isShowingCaptureMessage){togglePause();return;}if(_0x860725[_0x5d5fa1(0xf3)]&&!isShowingCaptureMessage){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x5d5fa1(0xbb)]>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates[_0x5d5fa1(0xbb)]>0x0)previousGameButtonStates=[];}if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5d5fa1(0xa7))){if(isTwoPlayerMode&&connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex){const _0x22756f=navigator['getGamepads']();if(_0x22756f?.[connectedGamepadIndexP2]){const _0x113c02=_0x22756f[connectedGamepadIndexP2],_0xdf2881=processSingleController(_0x113c02,previousGameButtonStatesP2);_0x16b002=_0xdf2881['left'],_0x25db2c=_0xdf2881[_0x5d5fa1(0xf2)],_0x8f305b=_0xdf2881[_0x5d5fa1(0x1ab)],previousGameButtonStatesP2=_0xdf2881['newButtonStates'][_0x5d5fa1(0xfa)]();}else{if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2[_0x5d5fa1(0xbb)]>0x0)previousGameButtonStatesP2=[];}}const _0x59a25b=p1FireInputWasDown;p1FireInputWasDown=keyboardP1ShootDown||_0x50cfe9;let _0x2010bd=![];if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')){_0x2010bd=p2FireInputWasDown;if(isTwoPlayerMode&&selectedGameMode===_0x5d5fa1(0x14b)&&currentPlayer===0x2&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)p2FireInputWasDown=keyboardP2ShootDown||_0x8f305b;else connectedGamepadIndex!==null?p2FireInputWasDown=keyboardP2ShootDown||_0x50cfe9:p2FireInputWasDown=keyboardP2ShootDown;}else p2FireInputWasDown=keyboardP2ShootDown||_0x8f305b;}else p2FireInputWasDown=![];if(selectedFiringMode===_0x5d5fa1(0x184)){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(!isTouchActiveGame){if(_0x59a25b&&!p1FireInputWasDown)p1JustFiredSingle=![];if(!isPlayerTwoAI&&_0x2010bd&&!p2FireInputWasDown)p2JustFiredSingle=![];}}else{if(isTwoPlayerMode&&selectedGameMode===_0x5d5fa1(0x14b)){if(!isTouchActiveGame){if(currentPlayer===0x1&&_0x59a25b&&!p1FireInputWasDown)p1JustFiredSingle=![];else{if(currentPlayer===0x2&&!isPlayerTwoAI){let _0x538c30=connectedGamepadIndexP2===null&&connectedGamepadIndex!==null,_0x2ea121=connectedGamepadIndexP2===null&&connectedGamepadIndex!==null;_0x538c30&&_0x2ea121?_0x59a25b&&!p1FireInputWasDown&&(p1JustFiredSingle=![]):_0x2010bd&&!p2FireInputWasDown&&(p2JustFiredSingle=![]);}}}}else{if(!isTouchActiveGame){if(_0x59a25b&&!p1FireInputWasDown)p1JustFiredSingle=![];}}}}leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![];let _0x481f80=![];if(isTouchActiveGame&&gameCanvas){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x232307=ship1[_0x5d5fa1(0xaa)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x253337=_0x3c9c16-_0x232307/0x2;_0x253337=Math['max'](0x0,Math[_0x5d5fa1(0x99)](gameCanvas[_0x5d5fa1(0xaa)]-_0x232307,_0x253337)),ship1['x']=_0x253337,ship1[_0x5d5fa1(0xa3)]=_0x253337,_0x481f80=!![];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1)){const _0x1c11fd=ship[_0x5d5fa1(0xaa)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x52c32a=_0x3c9c16-_0x1c11fd/0x2;_0x52c32a=Math[_0x5d5fa1(0x12c)](0x0,Math['min'](gameCanvas[_0x5d5fa1(0xaa)]-_0x1c11fd,_0x52c32a)),ship['x']=_0x52c32a,ship[_0x5d5fa1(0xa3)]=_0x52c32a,_0x481f80=!![];}}}if(isTwoPlayerMode&&selectedGameMode===_0x5d5fa1(0xed)){if(!_0x481f80){const _0x1bdc4b=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;_0x1bdc4b&&(leftPressed=keyboardP1LeftDown||_0x416c2d,rightPressed=keyboardP1RightDown||_0x3b8d18);}if(!isPlayerTwoAI){const _0x33d22e=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;_0x33d22e&&(p2LeftPressed=keyboardP2LeftDown||_0x16b002,p2RightPressed=keyboardP2RightDown||_0x25db2c);}}else{if(!_0x481f80){const _0x39b086=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0x39b086){if(currentPlayer===0x1||!isTwoPlayerMode)leftPressed=keyboardP1LeftDown||_0x416c2d,rightPressed=keyboardP1RightDown||_0x3b8d18;else{if(currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode==='normal'){if(connectedGamepadIndexP2!==null)leftPressed=keyboardP2LeftDown||_0x16b002,rightPressed=keyboardP2RightDown||_0x25db2c;else connectedGamepadIndex!==null?(leftPressed=keyboardP2LeftDown||_0x416c2d,rightPressed=keyboardP2RightDown||_0x3b8d18):(leftPressed=keyboardP2LeftDown,rightPressed=keyboardP2RightDown);}}}}}if(isTwoPlayerMode&&selectedGameMode==='coop'){const _0x48524b=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture&&!_0x4daae0;if(_0x48524b){let _0x4f7144=![];if(isTouchActiveGame&&selectedFiringMode===_0x5d5fa1(0x163)){if(selectedOnePlayerGameVariant===_0x5d5fa1(0xa7))_0x4f7144=!![];else!isPlayerTwoAI&&(_0x4f7144=!![]);}shootPressed=_0x4f7144||p1FireInputWasDown;if(isShowingCaptureMessage&&isPlayer1ShipCaptured)shootPressed=![];}if(!isPlayerTwoAI){const _0x169877=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture&&!_0x4daae0;if(_0x169877){p2ShootPressed=isTouchActiveGame&&selectedFiringMode===_0x5d5fa1(0x163)&&_0x3c9c16>gameCanvas[_0x5d5fa1(0xaa)]/0x2||p2FireInputWasDown;if(isShowingCaptureMessage&&isPlayer2ShipCaptured)p2ShootPressed=![];}}}else{const _0x3d32ed=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!_0x4daae0;if(_0x3d32ed){let _0x51032d=![];if(currentPlayer===0x1||!isTwoPlayerMode)_0x51032d=p1FireInputWasDown;else currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0x5d5fa1(0x14b)&&(_0x51032d=p2FireInputWasDown);shootPressed=isTouchActiveGame&&selectedFiringMode===_0x5d5fa1(0x163)||_0x51032d;if(isShowingCaptureMessage&&isShipCaptured)shootPressed=![];}}if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x5d5fa1(0xed))shootPressed&&firePlayerBullet(_0x5d5fa1(0xde),![]),!isPlayerTwoAI&&p2ShootPressed&&firePlayerBullet('player2',![]);else{if(shootPressed){if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2){}else firePlayerBullet(currentPlayer===0x1||!isTwoPlayerMode?_0x5d5fa1(0xde):_0x5d5fa1(0x158),![]);}}}}catch(_0x5a944e){console[_0x5d5fa1(0x186)]('Error\x20handling\x20player\x20input:',_0x5a944e),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![];}}let aiIsCurrentlyTargetingCaptureBoss=![];function aiControl(){const _0x18879f=_0x1d45a4;try{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x18879f(0xa7))return;let _0x4fa85b=null,_0x5b9ffe=null,_0x2cdfcb=![],_0x102151=![],_0xfb29f1=![],_0x52bad4=0x0,_0x341472='ai',_0x2ccfcc=![],_0x18e73b=![];if(isPlayerTwoAI&&selectedGameMode===_0x18879f(0x14b)&&currentPlayer===0x2){if(!ship||playerLives<=0x0||isShipCaptured||isShowingPlayerGameOverMessage){if(ship)ship[_0x18879f(0xa3)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x18879f(0xaa)]/0x2:0x0;return;}_0x4fa85b=ship,_0x5b9ffe=smoothedShipX,_0x2cdfcb=isDualShipActive,_0x102151=isShipCaptured,_0xfb29f1=isInvincible,_0x52bad4=playerLives,_0x341472='ai_p2',_0x2ccfcc=!![],_0x18e73b=playerLives>0x1&&!_0x2cdfcb&&!isShipCaptured;}else{if(!isManualControl&&!isPlayerTwoAI){if(playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage){if(ship)ship[_0x18879f(0xa3)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x18879f(0xaa)]/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}if(isShipCaptured||isShowingCaptureMessage){if(ship)ship[_0x18879f(0xa3)]=ship['x'];else{if(_0x4fa85b)_0x4fa85b[_0x18879f(0xa3)]=_0x4fa85b['x'];}if(smoothedShipX!==undefined&&ship)smoothedShipX=ship['x'];else{if(smoothedShipX!==undefined&&_0x4fa85b)smoothedShipX=_0x4fa85b['x'];}aiIsCurrentlyTargetingCaptureBoss=![];return;}_0x4fa85b=ship,_0x5b9ffe=smoothedShipX,_0x2cdfcb=isDualShipActive,_0x102151=isShipCaptured,_0xfb29f1=isInvincible,_0x52bad4=playerLives,_0x18e73b=playerLives>0x1&&!_0x2cdfcb&&!isShipCaptured;}else{if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}if(_0x5b9ffe===undefined&&_0x4fa85b)_0x5b9ffe=_0x4fa85b['x'],(_0x2ccfcc||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x5b9ffe);else{if(_0x5b9ffe===undefined&&!_0x4fa85b){_0x5b9ffe=gameCanvas?gameCanvas[_0x18879f(0xaa)]/0x2:0x0;(_0x2ccfcc||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x5b9ffe);if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}const _0x1583d7=Date[_0x18879f(0x12f)](),_0x266e99=gameCanvas[_0x18879f(0xaa)],_0x52d162=gameCanvas[_0x18879f(0x74)];let _0x55abb0=_0x4fa85b[_0x18879f(0xaa)];_0x2cdfcb&&(_0x55abb0=DUAL_SHIP_OFFSET_X+_0x4fa85b['width']);const _0x24d042=_0x4fa85b['x']+_0x55abb0/0x2,_0x2eb6db=_0x4fa85b['y'],_0x191562=_0x266e99/0x2,_0xbb7aac=_0x191562-_0x55abb0/0x2,_0x464d5d=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive||isShowingCaptureMessage||isShowingIntro;let _0x24f036=_0x5b9ffe,_0x27927d=![],_0x4574cc=![],_0x46ea50=_0x5b9ffe,_0x2160da=null,_0x59ddb3=![],_0xbd31ca=![];aiNeedsStabilization&&!_0x464d5d&&(aiStabilizationEndTime=_0x1583d7+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],_0x5b9ffe=_0x4fa85b['x'],(_0x2ccfcc||!isManualControl&&!isPlayerTwoAI)&&(smoothedShipX=_0x5b9ffe));const _0x5995dc=enemies[_0x18879f(0x152)](_0x4659cd=>_0x4659cd['id']===capturingBossId&&_0x4659cd[_0x18879f(0x19d)]===ENEMY3_TYPE);if(_0x18e73b&&captureBeamActive&&_0x5995dc&&_0x5995dc['state']===_0x18879f(0x133)&&!_0x102151&&!isWaitingForRespawn){if(!isManualControl&&!isPlayerTwoAI)aiIsCurrentlyTargetingCaptureBoss=!![];else _0x2ccfcc&&(_0xbd31ca=!![],aiIsCurrentlyTargetingCaptureBoss=!![]);if(aiIsCurrentlyTargetingCaptureBoss){_0x27927d=![],_0x2160da=null;const _0x37cff5=_0x5995dc['x']+_0x5995dc[_0x18879f(0xaa)]/0x2;_0x1583d7-(_0x5995dc[_0x18879f(0x183)]||0x0)>=AI_CAPTURE_BEAM_APPROACH_DELAY_MS?(_0x24f036=_0x37cff5-_0x55abb0/0x2,_0x59ddb3=!![]):(_0x24f036=_0xbb7aac,_0x59ddb3=![]);}}else aiIsCurrentlyTargetingCaptureBoss&&(!captureBeamActive||!_0x5995dc||_0x5995dc[_0x18879f(0x14f)]!==_0x18879f(0x133)||!_0x18e73b)&&(aiIsCurrentlyTargetingCaptureBoss=![],_0xbd31ca=![]);if(_0x1583d7<aiStabilizationEndTime&&!_0x464d5d&&!aiIsCurrentlyTargetingCaptureBoss)_0x24f036=_0xbb7aac;else{if(!_0x464d5d&&!aiIsCurrentlyTargetingCaptureBoss){_0x4574cc=![],_0x46ea50=_0x5b9ffe;if(!isChallengingStage&&!_0xfb29f1){let _0x5b368f=[];const _0x318f6a=isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_LOOKAHEAD*1.1:FINAL_DODGE_LOOKAHEAD*1.2,_0x266153=isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_BUFFER*1.1:FINAL_DODGE_BUFFER_BASE*1.2,_0x5ab37d=_0x2cdfcb?_0x318f6a*1.25:_0x318f6a,_0x277d4c=_0x2cdfcb?_0x266153*1.35:_0x266153,_0x21c11f={'x':_0x4fa85b['x']-_0x277d4c,'y':_0x4fa85b['y']-_0x5ab37d,'width':_0x55abb0+_0x277d4c*0x2,'height':_0x5ab37d+_0x4fa85b[_0x18879f(0x74)]};for(const _0x3f7d71 of enemyBullets){if(_0x3f7d71&&_0x3f7d71['y']+_0x3f7d71[_0x18879f(0x74)]>_0x4fa85b['y']-_0x4fa85b['height']*0x2&&_0x3f7d71['y']<_0x52d162){const _0x568ea2={'x':_0x3f7d71['x'],'y':_0x3f7d71['y'],'width':_0x3f7d71[_0x18879f(0xaa)],'height':_0x3f7d71[_0x18879f(0x74)]};checkCollision(_0x21c11f,_0x568ea2)&&_0x5b368f['push'](_0x3f7d71);}}if(_0x5b368f[_0x18879f(0xbb)]>0x0){_0x4574cc=!![];let _0x315f08=_0x5b9ffe,_0xf21b80=-Infinity;for(let _0x49e097=-0x1;_0x49e097<=0x1;_0x49e097+=0x2){const _0x438a9b=_0x55abb0*(_0x2cdfcb?2.6:0x2)+Math['random']()*(_0x55abb0*0.5)+(_0x5b368f['length']>0x1?_0x55abb0*0.5:0x0);let _0xc20fd1=_0x5b9ffe+_0x49e097*_0x438a9b;_0xc20fd1=Math['max'](AI_ANTI_CORNER_BUFFER,Math[_0x18879f(0x99)](_0x266e99-_0x55abb0-AI_ANTI_CORNER_BUFFER,_0xc20fd1));let _0x46c2be=0x0;const _0xc4fb33={'x':_0xc20fd1-_0x277d4c/0x2,'y':_0x4fa85b['y']-_0x5ab37d,'width':_0x55abb0+_0x277d4c,'height':_0x5ab37d+_0x4fa85b[_0x18879f(0x74)]};for(const _0xc3ac43 of _0x5b368f){checkCollision(_0xc4fb33,{'x':_0xc3ac43['x'],'y':_0xc3ac43['y'],'width':_0xc3ac43[_0x18879f(0xaa)],'height':_0xc3ac43[_0x18879f(0x74)]})&&_0x46c2be++;}let _0x7e4842=-_0x46c2be;if(Math[_0x18879f(0x9e)](_0xc20fd1-_0x5b9ffe)<_0x55abb0*0.5)_0x7e4842-=0xa;_0x7e4842>_0xf21b80&&(_0xf21b80=_0x7e4842,_0x315f08=_0xc20fd1);}_0x46ea50=_0x315f08;}if(!_0x4574cc){const _0x2e7b9d=AI_COLLISION_LOOKAHEAD*(_0x2cdfcb?1.85:1.5),_0x14f4ab=FINAL_DODGE_BUFFER_BASE*(_0x2cdfcb?1.85:1.5);for(const _0x31d4d2 of enemies){if(_0x31d4d2&&(_0x31d4d2[_0x18879f(0x14f)]===_0x18879f(0x177)||_0x31d4d2[_0x18879f(0x14f)]===_0x18879f(0x7b)||_0x31d4d2[_0x18879f(0x14f)]===_0x18879f(0x1a2)||_0x31d4d2['state']===_0x18879f(0x100))&&_0x31d4d2['y']+_0x31d4d2[_0x18879f(0x74)]>_0x4fa85b['y']-_0x2e7b9d/0x2&&_0x31d4d2['y']<_0x4fa85b['y']+_0x4fa85b[_0x18879f(0x74)]){const _0x2cce26={'x':_0x4fa85b['x']-_0x14f4ab,'y':_0x4fa85b['y']-_0x2e7b9d,'width':_0x55abb0+_0x14f4ab*0x2,'height':_0x2e7b9d+_0x4fa85b[_0x18879f(0x74)]},_0x343f86={'x':_0x31d4d2['x'],'y':_0x31d4d2['y'],'width':_0x31d4d2[_0x18879f(0xaa)],'height':_0x31d4d2['height']};if(checkCollision(_0x2cce26,_0x343f86)){_0x4574cc=!![];const _0x4e22c9=_0x31d4d2['x']+_0x31d4d2[_0x18879f(0xaa)]/0x2,_0x1a6682=_0x24d042<_0x4e22c9?-0x1:0x1,_0x8d3005=_0x55abb0*(_0x2cdfcb?2.9:2.2)+Math[_0x18879f(0x107)]()*(_0x55abb0*0.6);_0x46ea50=_0x5b9ffe+_0x1a6682*_0x8d3005;break;}}}}}if(_0x4574cc)_0x24f036=Math['max'](AI_ANTI_CORNER_BUFFER,Math[_0x18879f(0x99)](_0x266e99-_0x55abb0-AI_ANTI_CORNER_BUFFER,_0x46ea50)),_0x2160da=null,_0x27927d=![];else{if(fallingShips[_0x18879f(0xbb)]>0x0&&!_0x102151&&!isWaitingForRespawn&&!_0x2cdfcb){let _0x3acd43=null,_0x252b76=Infinity;for(const _0x3ee755 of fallingShips){let _0x22e843=![];if(!isManualControl&&!isPlayerTwoAI||isPlayerTwoAI&&selectedGameMode===_0x18879f(0x14b)&&currentPlayer===0x2){if(_0x2ccfcc&&_0x3ee755[_0x18879f(0x161)]===_0x18879f(0xde))_0x22e843=!![];else!isManualControl&&!isPlayerTwoAI&&_0x3ee755[_0x18879f(0x161)]===_0x18879f(0xde)&&(_0x22e843=!![]);if(!_0x3acd43&&!_0x22e843)_0x22e843=!![];}if(_0x3ee755&&!_0x3ee755[_0x18879f(0xa8)]&&_0x22e843){const _0xc8f1a9=Math[_0x18879f(0x9e)](_0x3ee755['x']+_0x3ee755[_0x18879f(0xaa)]/0x2-_0x24d042)+Math[_0x18879f(0x9e)](_0x3ee755['y']-_0x4fa85b['y']);_0xc8f1a9<_0x252b76&&(_0x252b76=_0xc8f1a9,_0x3acd43=_0x3ee755);}}_0x3acd43&&(_0x24f036=_0x3acd43['x']+_0x3acd43[_0x18879f(0xaa)]/0x2-_0x55abb0/0x2,_0x27927d=![],_0x2160da=null);}else{if(!_0x59ddb3){_0x2160da=null;let _0xb5ab8d=-Infinity;for(const _0x27cf86 of enemies){if(!_0x27cf86)continue;let _0x3d728b=![];aiIsCurrentlyTargetingCaptureBoss&&_0x27cf86['id']===capturingBossId&&(_0x3d728b=!![]);let _0x4f5336=0x0;const _0x239c92=_0x27cf86['x']+_0x27cf86[_0x18879f(0xaa)]/0x2,_0x258528=_0x239c92-_0x24d042,_0x3b2350=_0x2eb6db-(_0x27cf86['y']+_0x27cf86[_0x18879f(0x74)]);if(_0x3b2350<0x0&&_0x27cf86['state']!=='attacking'&&_0x27cf86[_0x18879f(0x14f)]!==_0x18879f(0x7b)&&_0x27cf86['state']!==_0x18879f(0x100))continue;_0x4f5336=(_0x52d162-_0x27cf86['y'])*0x2-Math[_0x18879f(0x9e)](_0x258528)*0x3-_0x3b2350;if(_0x27cf86['state']===_0x18879f(0x177)||_0x27cf86['state']===_0x18879f(0x7b))_0x4f5336+=0xbb8;if(_0x27cf86['type']===ENEMY3_TYPE&&!_0x27cf86['isDamaged'])_0x4f5336+=0x7d0;if(_0x27cf86[_0x18879f(0x19d)]===ENEMY3_TYPE&&_0x27cf86[_0x18879f(0x194)])_0x4f5336+=0xfa0;if(_0x27cf86['type']===ENEMY3_TYPE&&_0x27cf86[_0x18879f(0x19f)])_0x4f5336+=0x1388;_0x4f5336>_0xb5ab8d&&(_0xb5ab8d=_0x4f5336,_0x2160da=_0x27cf86);}if(_0x2160da){const _0x547231=_0x2160da['x']+_0x2160da[_0x18879f(0xaa)]/0x2;_0x24f036=_0x547231-_0x55abb0/0x2;const _0x41fa03=1.8;let _0x2e634a;if(isChallengingStage)_0x2e634a=_0x55abb0*2.5;else _0x2160da[_0x18879f(0x14f)]===_0x18879f(0x80)||_0x2160da['state']===_0x18879f(0x13d)?_0x2e634a=_0x55abb0*(GRID_SHOOT_ALIGNMENT_FACTOR*_0x41fa03):_0x2e634a=_0x55abb0*(FINAL_SHOOT_ALIGNMENT_THRESHOLD*_0x41fa03);const _0x4d6ca5=Math['abs'](_0x24d042-_0x547231);let _0x583de0=![];if(aiIsCurrentlyTargetingCaptureBoss&&_0x2160da['id']===capturingBossId)_0x583de0=!![];else _0x18e73b&&_0x2160da[_0x18879f(0x19d)]===ENEMY3_TYPE&&!_0x2160da[_0x18879f(0x19f)]&&!captureAttemptMadeThisLevel&&!isFullGridWave&&(_0x2160da[_0x18879f(0x14f)]===_0x18879f(0x80)||_0x2160da[_0x18879f(0x14f)]==='preparing_capture'||_0x2160da[_0x18879f(0x14f)]===_0x18879f(0x7b)||_0x2160da[_0x18879f(0x14f)]===_0x18879f(0x133)&&_0x2160da['id']===capturingBossId)&&(_0x583de0=!![]);_0x4d6ca5<_0x2e634a&&!_0x583de0&&(_0x27927d=!![]);}else _0x24f036=_0xbb7aac,_0x27927d=![];}}}}else aiIsCurrentlyTargetingCaptureBoss&&_0x464d5d&&(_0x27927d=![],_0x2160da=null);}if(_0x4fa85b){_0x5b9ffe+=(_0x24f036-_0x5b9ffe)*AI_SMOOTHING_FACTOR_MOVE,_0x4fa85b[_0x18879f(0xa3)]=_0x5b9ffe;if(_0x2ccfcc)smoothedShipX=_0x5b9ffe;else!isManualControl&&!isPlayerTwoAI&&(smoothedShipX=_0x5b9ffe);}aiIsCurrentlyTargetingCaptureBoss&&(_0x27927d=![]);if(_0x27927d&&!_0x4574cc&&!_0x59ddb3&&!_0x464d5d){let _0xc72509=![];_0x2ccfcc?_0xc72509=!![]:_0x1583d7>=aiCanShootTime&&(_0xc72509=!![]),_0xc72509&&!isShowingIntro&&(firePlayerBullet(_0x341472,![])&&(!_0x2ccfcc&&(aiCanShootTime=_0x1583d7+SHOOT_COOLDOWN)));}}catch(_0x287a69){console[_0x18879f(0x186)](_0x18879f(0x132),_0x287a69,_0x287a69[_0x18879f(0x13f)]);ship&&(ship[_0x18879f(0xa3)]=ship['x']);aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x18879f(0xaa)]/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];}}function aiControlCoop(){const _0x4c210a=_0x1d45a4;if(!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')||isPaused||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0){if(ship1)ship1[_0x4c210a(0xa3)]=ship1['x'];if(ship2)ship2[_0x4c210a(0xa3)]=ship2['x'];return;}const _0x2b85d2=Date[_0x4c210a(0x12f)](),_0x59db2e=gameCanvas[_0x4c210a(0xaa)],_0x18a99c=isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP',_0x392f59=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture,_0x4488bd=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture,_0xb0af70=_0x20defc=>{const _0x46012e=_0x20defc==='p1'&&isPlayer1ShowingGameOverMessage||_0x20defc==='p2'&&isPlayer2ShowingGameOverMessage;return _0x46012e||showReadyMessage||isCsCompletionDelayActive||isShowingIntro&&!(level===0x1&&coopPlayersReadyStartTime>0x0&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'));};let _0x56bb54=!![],_0xdc837d=!![];if(coopAICaptureDiveAnticipationActive&&_0x2b85d2<coopAICaptureDiveAnticipationEndTime){if(!_0x18a99c)_0x56bb54=![];_0xdc837d=![];}else coopAICaptureDiveAnticipationActive&&(coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);if(_0x392f59&&ship1&&!_0x18a99c){if(smoothedShip1X===undefined)smoothedShip1X=ship1['x'];const _0x5f490c=_0xb0af70('p1');let {desiredTargetX:_0x2b169d,shouldTryShoot:_0x45178e,targetEnemyForAI:_0x1480ae}=calculateAIDesiredState(ship1,smoothedShip1X,player1IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer1Invincible,isPlayer1ShipCaptured,isPlayer1WaitingForRespawn,_0x2b85d2,_0x59db2e,_0x5f490c,'p1');aiShip1TargetEnemy=_0x1480ae,smoothedShip1X+=(_0x2b169d-smoothedShip1X)*AI_SMOOTHING_FACTOR_MOVE,ship1['targetX']=smoothedShip1X;const _0x5c4e98=_0x1480ae&&_0x1480ae[_0x4c210a(0x19d)]===ENEMY3_TYPE&&_0x1480ae[_0x4c210a(0x19f)]&&_0x1480ae['id']===capturedBossIdWithMessage&&isPlayer2ShipCaptured;if(_0x45178e&&_0x56bb54&&!(isShowingCaptureMessage&&isPlayer1ShipCaptured)){if(_0x5c4e98||_0x2b85d2>=aiShip1CanShootTime){fireCoopAIBullet(ship1,player1IsDualShipActive,_0x4c210a(0xde));if(!_0x5c4e98)aiShip1CanShootTime=_0x2b85d2+SHOOT_COOLDOWN;else aiShip1CanShootTime=_0x2b85d2+SHOOT_COOLDOWN/0x2;}}}if(_0x4488bd&&ship2){if(smoothedShip2X===undefined)smoothedShip2X=ship2['x'];const _0x1a6393=_0xb0af70('p2');let {desiredTargetX:_0x12c146,shouldTryShoot:_0x534dbb,targetEnemyForAI:_0x157e2e}=calculateAIDesiredState(ship2,smoothedShip2X,player2IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer2Invincible,isPlayer2ShipCaptured,isPlayer2WaitingForRespawn,_0x2b85d2,_0x59db2e,_0x1a6393,_0x4c210a(0x75));aiShip2TargetEnemy=_0x157e2e,smoothedShip2X+=(_0x12c146-smoothedShip2X)*AI_SMOOTHING_FACTOR_MOVE,ship2[_0x4c210a(0xa3)]=smoothedShip2X;const _0x5923e3=_0x157e2e&&_0x157e2e[_0x4c210a(0x19d)]===ENEMY3_TYPE&&_0x157e2e[_0x4c210a(0x19f)]&&_0x157e2e['id']===capturedBossIdWithMessage&&isPlayer1ShipCaptured;if(_0x534dbb&&_0xdc837d&&!(isShowingCaptureMessage&&isPlayer2ShipCaptured)){if(_0x5923e3||_0x2b85d2>=aiShip2CanShootTime){fireCoopAIBullet(ship2,player2IsDualShipActive,isCoopAIDemoActive?_0x4c210a(0x158):_0x4c210a(0x75));if(!_0x5923e3)aiShip2CanShootTime=_0x2b85d2+SHOOT_COOLDOWN;else aiShip2CanShootTime=_0x2b85d2+SHOOT_COOLDOWN/0x2;}}}}function fireCoopAIBullet(_0x96dd24,_0x5bb3e5,_0x1a54cd){const _0x3dd5c3=_0x1d45a4;if(!_0x96dd24)return![];const _0x4e297d=Date['now']();let _0x5b15bd=![];if(_0x1a54cd===_0x3dd5c3(0xde)&&isPlayer1ShowingGameOverMessage)_0x5b15bd=!![];if((_0x1a54cd==='player2'||_0x1a54cd===_0x3dd5c3(0x75))&&isPlayer2ShowingGameOverMessage)_0x5b15bd=!![];let _0x2f9fbe=isPaused||!isInGameState||gameOverSequenceStartTime>0x0||_0x5b15bd;if(_0x2f9fbe)return![];if(_0x1a54cd===_0x3dd5c3(0xde)&&isPlayer1ShipCaptured)return![];if((_0x1a54cd===_0x3dd5c3(0x158)||_0x1a54cd===_0x3dd5c3(0x75))&&isPlayer2ShipCaptured)return![];try{const _0x9b9d11=_0x96dd24['y'];let _0x1c719a=0x0;const _0x12c5a1=_0x1a54cd;if(_0x5bb3e5){const _0x10b5fe=_0x96dd24['x']+_0x96dd24['width']/0x2,_0x34230e=_0x96dd24['x']+DUAL_SHIP_OFFSET_X+_0x96dd24[_0x3dd5c3(0xaa)]/0x2,_0xc51820=_0x10b5fe-PLAYER_BULLET_WIDTH/0x2,_0x3133b1=_0x34230e-PLAYER_BULLET_WIDTH/0x2;bullets[_0x3dd5c3(0xc9)]({'x':_0xc51820,'y':_0x9b9d11,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x12c5a1}),bullets[_0x3dd5c3(0xc9)]({'x':_0x3133b1,'y':_0x9b9d11,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x12c5a1}),_0x1c719a=0x2;}else{const _0x28be34=_0x96dd24['x']+_0x96dd24[_0x3dd5c3(0xaa)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x28be34,'y':_0x9b9d11,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x12c5a1}),_0x1c719a=0x1;}playSound(_0x3dd5c3(0x174),![],0.4);if(_0x1a54cd==='player1')player1ShotsFired+=_0x1c719a,player1LastShotTime=_0x4e297d,aiShip1LastShotTime=_0x4e297d;else(_0x1a54cd===_0x3dd5c3(0x158)||_0x1a54cd===_0x3dd5c3(0x75))&&(player2ShotsFired+=_0x1c719a,player2LastShotTime=_0x4e297d,aiShip2LastShotTime=_0x4e297d);return!![];}catch(_0x5f5629){return console[_0x3dd5c3(0x186)]('Error\x20creating\x20CO-OP\x20AI\x20bullet\x20for\x20'+_0x1a54cd+':',_0x5f5629),![];}}function calculateAIDesiredState(_0x18cff4,_0x4c4237,_0x43f4f6,_0x264865,_0x4b991a,_0x307032,_0xa55bba,_0x5851a3,_0x4f33b0,_0x777928,_0x13c495,_0x88800e,_0x282631){const _0x347a8d=_0x1d45a4;let _0x23c202=_0x4c4237,_0x4924d6=![],_0x522185=null,_0x3b79be=![],_0x23e7f1=![],_0x2c3aa3=![],_0x432d9d=![];const _0x2293d6=gameCanvas['height'],_0x5c5c39=_0x18cff4[_0x347a8d(0xaa)]+(_0x43f4f6?DUAL_SHIP_OFFSET_X:0x0),_0x30a712=_0x18cff4['x']+_0x5c5c39/0x2,_0x363fae=_0x18cff4['y'],_0x826d31=_0x282631==='p1'?player1Lives:_0x282631===_0x347a8d(0x75)||_0x282631==='p2'?player2Lives:0x0,_0x1052e9=_0x826d31>0x1&&!_0x43f4f6&&!_0x5851a3;let _0x33ecc4=_0x13c495/0x2;const _0xf67c4e=isShowingIntro||isShowingCoopPlayersReady,_0x4a05f4=isCoopAIDemoActive&&_0xf67c4e&&!(isChallengingStage&&isEntrancePhaseActive),_0x3df8ef=isCoopAIDemoActive&&(_0x282631==='p1'&&player1Lives>0x0&&player2Lives<=0x0||(_0x282631===_0x347a8d(0x75)||_0x282631==='p2')&&player2Lives>0x0&&player1Lives<=0x0);if(_0x4a05f4&&_0x3df8ef)_0x33ecc4=_0x13c495/0x2;else{if(_0x282631==='p1')_0x33ecc4=_0x13c495*0.25+Math['sin'](_0x777928/(AI_WIGGLE_PERIOD*1.1))*(AI_WIGGLE_AMPLITUDE*0.8);else(_0x282631===_0x347a8d(0x75)||_0x282631==='p2')&&(_0x33ecc4=_0x13c495*0.75+Math['cos'](_0x777928/(AI_WIGGLE_PERIOD*0.9))*(AI_WIGGLE_AMPLITUDE*0.8));}let _0x339239=_0x33ecc4-_0x5c5c39/0x2;if(_0x88800e||_0x5851a3||_0x4f33b0||_0x282631==='p1'&&player1NeedsRespawnAfterCapture||(_0x282631==='ai_p2'||_0x282631==='p2')&&player2NeedsRespawnAfterCapture)return _0x4a05f4&&_0x3df8ef?_0x23c202=_0x339239:_0x23c202=_0x339239,(_0x5851a3||_0x4f33b0||_0x282631==='p1'&&player1NeedsRespawnAfterCapture||(_0x282631===_0x347a8d(0x75)||_0x282631==='p2')&&player2NeedsRespawnAfterCapture)&&(_0x23c202=_0x18cff4['x']),{'desiredTargetX':_0x23c202,'shouldTryShoot':![],'targetEnemyForAI':null};const _0x49ad41=_0x282631==='p1'?_0x347a8d(0x75):'p1',_0x3a97af=_0x49ad41==='p1'&&isPlayer1ShipCaptured||_0x49ad41===_0x347a8d(0x75)&&isPlayer2ShipCaptured,_0x4240bc=_0x49ad41==='p1'&&isPlayer1ShowingGameOverMessage||_0x49ad41===_0x347a8d(0x75)&&isPlayer2ShowingGameOverMessage;let _0x3dc16e=null,_0x1f5b7a=!![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x347a8d(0xa7)){if(_0x3a97af&&!_0x4240bc&&capturedBossIdWithMessage){const _0x2d1875=_0x49ad41==='p1'?coopPartner1CapturedTime:coopPartner2CapturedTime;_0x2d1875>0x0&&_0x777928-_0x2d1875<COOP_AI_SAVE_PARTNER_DELAY_MS&&(_0x1f5b7a=![]),_0x3dc16e=_0x264865[_0x347a8d(0x152)](_0x24dd0a=>_0x24dd0a['id']===capturedBossIdWithMessage&&_0x24dd0a['type']===ENEMY3_TYPE&&_0x24dd0a['hasCapturedShip']);}}if(_0x3dc16e&&!_0x43f4f6&&_0x1f5b7a){_0x2c3aa3=!![],_0x522185=_0x3dc16e;const _0x5a9876=_0x3dc16e['x']+_0x3dc16e[_0x347a8d(0xaa)]/0x2;_0x23c202=_0x5a9876-_0x5c5c39/0x2,_0x4924d6=!![],_0x3b79be=![];if(!_0xa55bba){let _0x3b488e=[];const _0x4d4d15=FINAL_DODGE_LOOKAHEAD*0.4,_0x3c4242=FINAL_DODGE_BUFFER_BASE*0.3,_0x104737={'x':Math[_0x347a8d(0x99)](_0x30a712,_0x5a9876)-_0x3c4242,'y':_0x18cff4['y']-_0x4d4d15,'width':Math[_0x347a8d(0x9e)](_0x30a712-_0x5a9876)+_0x5c5c39+_0x3c4242*0x2,'height':_0x4d4d15+_0x18cff4[_0x347a8d(0x74)]};for(const _0x7a495 of _0x4b991a){if(_0x7a495&&_0x7a495['y']+_0x7a495[_0x347a8d(0x74)]>_0x18cff4['y']-_0x18cff4[_0x347a8d(0x74)]&&_0x7a495['y']<_0x2293d6){const _0x182b9e={'x':_0x7a495['x'],'y':_0x7a495['y'],'width':_0x7a495[_0x347a8d(0xaa)],'height':_0x7a495[_0x347a8d(0x74)]};checkCollision(_0x104737,_0x182b9e)&&_0x3b488e[_0x347a8d(0xc9)](_0x7a495);}}if(_0x3b488e['length']>0x0){_0x3b79be=!![];const _0x1aca2d=_0x4c4237<_0x13c495/0x2?-0x1:0x1;_0x23c202=_0x4c4237+_0x1aca2d*(_0x5c5c39*0.6),_0x4924d6=![];}}return _0x23c202=Math[_0x347a8d(0x12c)](AI_EDGE_BUFFER,Math[_0x347a8d(0x99)](_0x13c495-_0x5c5c39-AI_EDGE_BUFFER,_0x23c202)),{'desiredTargetX':_0x23c202,'shouldTryShoot':_0x4924d6,'targetEnemyForAI':_0x522185};}if(!isChallengingStage&&!_0xa55bba){let _0x3932b5=[];const _0x43acb0=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?1.6:0.8,_0x5a49f6=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x347a8d(0xa7)?1.7:0.8,_0x5c619b=FINAL_DODGE_LOOKAHEAD*_0x43acb0*(_0x43f4f6?1.25:0x1),_0x2b9032=FINAL_DODGE_BUFFER_BASE*_0x5a49f6*(_0x43f4f6?1.35:0x1),_0x44729b={'x':_0x18cff4['x']-_0x2b9032,'y':_0x18cff4['y']-_0x5c619b,'width':_0x5c5c39+_0x2b9032*0x2,'height':_0x5c619b+_0x18cff4['height']};for(const _0xdf6010 of _0x4b991a){if(_0xdf6010&&_0xdf6010['y']+_0xdf6010[_0x347a8d(0x74)]>_0x18cff4['y']-_0x18cff4['height']*1.5&&_0xdf6010['y']<_0x2293d6){const _0x16e29d={'x':_0xdf6010['x'],'y':_0xdf6010['y'],'width':_0xdf6010['width'],'height':_0xdf6010[_0x347a8d(0x74)]};checkCollision(_0x44729b,_0x16e29d)&&_0x3932b5[_0x347a8d(0xc9)](_0xdf6010);}}if(_0x3932b5[_0x347a8d(0xbb)]>0x0){_0x3b79be=!![];let _0x54a683=_0x4c4237;const _0x2186f0=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x347a8d(0xa7)?0x3:0x2,_0x1c79cc=_0x5c5c39*_0x2186f0*(_0x43f4f6?1.3:0x1);let _0x32d159=0x0,_0x256e12=0x0,_0xb95fa7=0x0;const _0x4362d5=_0x18cff4['x']+_0x5c5c39/0x2;for(const _0x4acaac of _0x3932b5){if(_0x4acaac['x']<_0x4362d5-_0x5c5c39*0.5)_0x256e12++;else{if(_0x4acaac['x']>_0x4362d5+_0x5c5c39*0.5)_0xb95fa7++;else _0x32d159++;}}if(_0x256e12<=_0xb95fa7&&_0x256e12<=_0x32d159)_0x54a683=_0x4c4237-_0x1c79cc-Math['random']()*_0x5c5c39*0.4;else{if(_0xb95fa7<=_0x256e12&&_0xb95fa7<=_0x32d159)_0x54a683=_0x4c4237+_0x1c79cc+Math['random']()*_0x5c5c39*0.4;else{if(_0x4c4237<_0x33ecc4)_0x54a683=_0x33ecc4+_0x1c79cc+Math[_0x347a8d(0x107)]()*_0x5c5c39*0.7;else _0x54a683=_0x33ecc4-_0x1c79cc-Math[_0x347a8d(0x107)]()*_0x5c5c39*0.7;}}_0x23c202=_0x54a683;}if(!_0x3b79be){const _0x4ac732=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x347a8d(0xa7)?0x1:0.75,_0xf0ce9e=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x347a8d(0xa7)?0x1:0.8,_0x2f828f=AI_COLLISION_LOOKAHEAD*_0x4ac732*(_0x43f4f6?1.3:0x1),_0x28ff08=AI_COLLISION_BUFFER*_0xf0ce9e*(_0x43f4f6?1.4:0x1);for(const _0x1d4d89 of _0x264865){if(!_0x1d4d89)continue;if(!_0x1f5b7a&&_0x3dc16e&&_0x1d4d89['id']===_0x3dc16e['id'])continue;if((_0x1d4d89['state']==='attacking'||_0x1d4d89[_0x347a8d(0x14f)]===_0x347a8d(0x7b))&&_0x1d4d89['y']+_0x1d4d89[_0x347a8d(0x74)]>_0x363fae-_0x2f828f&&_0x1d4d89['y']<_0x363fae+_0x18cff4[_0x347a8d(0x74)]*1.5){const _0x2c862a={'x':_0x18cff4['x']-_0x28ff08,'y':_0x18cff4['y']-_0x2f828f,'width':_0x5c5c39+_0x28ff08*0x2,'height':_0x2f828f+_0x18cff4[_0x347a8d(0x74)]},_0x22a223={'x':_0x1d4d89['x'],'y':_0x1d4d89['y'],'width':_0x1d4d89[_0x347a8d(0xaa)],'height':_0x1d4d89['height']};if(checkCollision(_0x2c862a,_0x22a223)){_0x3b79be=!![],_0x522185=null,_0x4924d6=![];const _0xcc80ea=_0x1d4d89['x']+_0x1d4d89[_0x347a8d(0xaa)]/0x2,_0x17ac4e=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x347a8d(0xa7)?2.2:1.9;_0x23c202=_0x4c4237+(_0x30a712<_0xcc80ea?-0x1:0x1)*(_0x5c5c39*_0x17ac4e*(_0x43f4f6?1.35:0x1));break;}}}}}if(!_0x3b79be&&_0x1052e9&&captureBeamActive&&capturingBossId&&!_0x5851a3){if(aiPlayerActivelySeekingCaptureById===null||aiPlayerActivelySeekingCaptureById===_0x282631){const _0x4f80b8=_0x264865[_0x347a8d(0x152)](_0x455c87=>_0x455c87['id']===capturingBossId);if(_0x4f80b8&&_0x4f80b8[_0x347a8d(0x14f)]==='capturing'){aiPlayerActivelySeekingCaptureById===null&&(aiPlayerActivelySeekingCaptureById=_0x282631);if(aiPlayerActivelySeekingCaptureById===_0x282631){if(_0x777928-(_0x4f80b8[_0x347a8d(0x183)]||0x0)>=AI_CAPTURE_BEAM_APPROACH_DELAY_MS){_0x432d9d=!![];const _0x2c0363=_0x4f80b8['x']+(_0x4f80b8['type']===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH)/0x2;_0x23c202=_0x2c0363-_0x5c5c39/0x2,_0x4924d6=![],_0x522185=null;}else _0x23c202=_0x339239,_0x4924d6=![],_0x522185=null;}}else aiPlayerActivelySeekingCaptureById===_0x282631&&(aiPlayerActivelySeekingCaptureById=null);}}else aiPlayerActivelySeekingCaptureById===_0x282631&&!(_0x1052e9&&captureBeamActive&&capturingBossId&&!_0x5851a3)&&(aiPlayerActivelySeekingCaptureById=null);if(!_0x3b79be&&!_0x432d9d&&!_0x43f4f6){const _0x5e2a22=_0x307032[_0x347a8d(0x152)](_0x443af9=>_0x443af9[_0x347a8d(0x161)]===_0x282631&&!_0x443af9[_0x347a8d(0xa8)]);_0x5e2a22&&(_0x23e7f1=!![],_0x23c202=_0x5e2a22['x']+_0x5e2a22[_0x347a8d(0xaa)]/0x2-_0x5c5c39/0x2,_0x4924d6=![],_0x522185=null);}if(!_0x3b79be&&!_0x432d9d&&!_0x23e7f1&&!_0x2c3aa3){let _0x1607c3=-Infinity,_0x39a33d=![],_0x47c987=null;for(const _0x49ad26 of _0x264865){if(!_0x49ad26)continue;if(!_0x1f5b7a&&_0x3dc16e&&_0x49ad26['id']===_0x3dc16e['id'])continue;if(_0x432d9d&&_0x49ad26['id']===capturingBossId&&aiPlayerActivelySeekingCaptureById===_0x282631)continue;let _0x359c76=![];if(_0x49ad26[_0x347a8d(0x19d)]===ENEMY3_TYPE&&_0x49ad26[_0x347a8d(0x19f)]&&_0x826d31<=0x1){const _0x4b7035=(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x347a8d(0xa7))&&_0x49ad26['id']===capturedBossIdWithMessage&&_0x3a97af;!_0x4b7035&&(_0x359c76=!![]);}let _0x27eb21=0x0;const _0x3ec7aa=_0x49ad26['x']+_0x49ad26[_0x347a8d(0xaa)]/0x2,_0x4c0d88=_0x3ec7aa-_0x30a712,_0x10ec91=_0x363fae-(_0x49ad26['y']+_0x49ad26[_0x347a8d(0x74)]);if(_0x10ec91<0x0&&_0x49ad26['state']!==_0x347a8d(0x177)&&_0x49ad26[_0x347a8d(0x14f)]!=='diving_to_capture_position'&&_0x49ad26['state']!==_0x347a8d(0x100))continue;let _0x5331d9=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x347a8d(0xa7)){if(_0x282631==='p1'&&_0x3ec7aa<_0x13c495/0x2)_0x5331d9=0x1388;else{if((_0x282631===_0x347a8d(0x75)||_0x282631==='p2')&&_0x3ec7aa>=_0x13c495/0x2)_0x5331d9=0x1388;}}_0x27eb21=_0x5331d9+(_0x2293d6-_0x49ad26['y'])*0x2-Math[_0x347a8d(0x9e)](_0x4c0d88)*0x3-_0x10ec91;if(_0x49ad26['state']===_0x347a8d(0x177)||_0x49ad26[_0x347a8d(0x14f)]===_0x347a8d(0x7b))_0x27eb21+=0xbb8;if(_0x49ad26[_0x347a8d(0x19d)]===ENEMY3_TYPE&&!_0x49ad26['isDamaged'])_0x27eb21+=0x7d0;if(_0x49ad26[_0x347a8d(0x19d)]===ENEMY3_TYPE&&_0x49ad26[_0x347a8d(0x194)])_0x27eb21+=0xfa0;_0x49ad26[_0x347a8d(0x19d)]===ENEMY3_TYPE&&_0x49ad26[_0x347a8d(0x19f)]&&(!_0x359c76?_0x27eb21+=0x1388:_0x27eb21-=0x2710);if(_0x27eb21>_0x1607c3){_0x1607c3=_0x27eb21,_0x47c987=_0x49ad26;let _0x30bdde=![];if(_0x47c987[_0x347a8d(0x19d)]===ENEMY3_TYPE&&!_0x47c987[_0x347a8d(0x19f)]&&!isFullGridWave){if(_0x1052e9&&!captureAttemptMadeThisLevel&&(_0x47c987[_0x347a8d(0x14f)]===_0x347a8d(0x80)||_0x47c987[_0x347a8d(0x14f)]===_0x347a8d(0x13d)||_0x47c987['state']===_0x347a8d(0x7b)||_0x47c987[_0x347a8d(0x14f)]===_0x347a8d(0x133))){if(_0x432d9d&&_0x47c987['id']===capturingBossId&&aiPlayerActivelySeekingCaptureById===_0x282631)_0x30bdde=!![];else!_0x432d9d&&aiPlayerActivelySeekingCaptureById!==_0x282631&&(_0x30bdde=!![]);}if(_0x43f4f6){const _0x2923e5=_0x282631==='p1'?_0x347a8d(0x75):'p1';let _0x2caf72=![];_0x2923e5==='p1'?ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture&&!player1IsDualShipActive&&(_0x2caf72=!![]):ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture&&!player2IsDualShipActive&&(_0x2caf72=!![]),_0x2caf72&&(_0x30bdde=!![]);}}if(_0x359c76&&_0x47c987===_0x49ad26)Math['abs'](_0x30a712-(_0x47c987['x']+_0x47c987['width']/0x2))<_0x5c5c39*1.1?_0x39a33d=!![]:_0x39a33d=![];else{if(_0x30bdde)_0x39a33d=![];else Math[_0x347a8d(0x9e)](_0x30a712-(_0x47c987['x']+_0x47c987[_0x347a8d(0xaa)]/0x2))<_0x5c5c39*0.9?_0x39a33d=!![]:_0x39a33d=![];}}}_0x522185=_0x47c987,_0x4924d6=_0x39a33d;if(_0x522185){let _0x4e8ba7=![];if(_0x522185[_0x347a8d(0x19d)]===ENEMY3_TYPE&&_0x522185['hasCapturedShip']&&_0x826d31<=0x1){const _0x52067d=(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x347a8d(0xa7))&&_0x522185['id']===capturedBossIdWithMessage&&_0x3a97af;!_0x52067d&&(_0x4e8ba7=!![]);}if(_0x4e8ba7)_0x23c202=_0x339239;else{const _0x3cede3=_0x522185['x']+_0x522185[_0x347a8d(0xaa)]/0x2;_0x23c202=_0x3cede3-_0x5c5c39/0x2;}}else _0x23c202=_0x339239,_0x4924d6=![];}return _0x432d9d&&aiPlayerActivelySeekingCaptureById===_0x282631&&(_0x4924d6=![],_0x522185=null),_0x23c202=Math[_0x347a8d(0x12c)](AI_EDGE_BUFFER,Math[_0x347a8d(0x99)](_0x13c495-_0x5c5c39-AI_EDGE_BUFFER,_0x23c202)),{'desiredTargetX':_0x23c202,'shouldTryShoot':_0x4924d6,'targetEnemyForAI':_0x522185};}function findAndDetachEnemy(){const _0x3bf3ff=_0x1d45a4;try{let _0x399a42=![];isTwoPlayerMode&&selectedGameMode===_0x3bf3ff(0xed)?_0x399a42=isPlayer1ShipCaptured||isPlayer2ShipCaptured:_0x399a42=isShipCaptured;if(!isFullGridWave&&_0x399a42){const _0x156564=enemies[_0x3bf3ff(0x152)](_0x5a6997=>_0x5a6997&&_0x5a6997[_0x3bf3ff(0x19d)]===ENEMY3_TYPE&&_0x5a6997[_0x3bf3ff(0x19f)]&&_0x5a6997[_0x3bf3ff(0x14f)]===_0x3bf3ff(0x80));if(_0x156564){_0x156564[_0x3bf3ff(0x71)]=!![],_0x156564[_0x3bf3ff(0x106)]=_0x3bf3ff(0x14b);const _0x369cf4=new Set([_0x156564['id']]);return resetJustReturnedFlags(_0x369cf4),[_0x156564];}}if(isEntrancePhaseActive)return null;let _0x2076e2=enemies[_0x3bf3ff(0xd2)](_0x207a3e=>_0x207a3e&&_0x207a3e[_0x3bf3ff(0x14f)]===_0x3bf3ff(0x80)&&!_0x207a3e[_0x3bf3ff(0x71)]);if(_0x2076e2['length']===0x0){_0x2076e2=enemies[_0x3bf3ff(0xd2)](_0x4097b6=>_0x4097b6&&_0x4097b6[_0x3bf3ff(0x14f)]===_0x3bf3ff(0x80));if(_0x2076e2[_0x3bf3ff(0xbb)]===0x0)return null;}if(_0x2076e2['length']===0x0)return null;_0x2076e2[_0x3bf3ff(0xa9)]((_0x3a3496,_0x2444e8)=>(_0x2444e8['gridRow']||0x0)-(_0x3a3496[_0x3bf3ff(0x138)]||0x0));const _0x42cf7e=_0x2076e2[_0x3bf3ff(0xbb)]<=0x3;let _0x3b7a95=[];const _0xaf494f=_0x3bf3ff(0x14b);gridJustCompleted&&(gridJustCompleted=![]);let _0x11908c=![];if(level>0x1&&!_0x42cf7e&&_0x2076e2[_0x3bf3ff(0xbb)]>=0x3){const _0x26b3b1=_0x2076e2[_0x3bf3ff(0xd2)](_0x51ab06=>_0x51ab06[_0x3bf3ff(0x19d)]===ENEMY3_TYPE&&!_0x51ab06[_0x3bf3ff(0x19f)]);for(const _0xc945bf of _0x26b3b1){const _0x301ca7=_0x2076e2['find'](_0x5abbc3=>_0x5abbc3[_0x3bf3ff(0x19d)]===ENEMY2_TYPE&&_0x5abbc3[_0x3bf3ff(0x138)]===_0xc945bf[_0x3bf3ff(0x138)]&&_0x5abbc3[_0x3bf3ff(0xf4)]===_0xc945bf['gridCol']-0x1),_0x3b7381=_0x2076e2[_0x3bf3ff(0x152)](_0x3aaf17=>_0x3aaf17[_0x3bf3ff(0x19d)]===ENEMY2_TYPE&&_0x3aaf17['gridRow']===_0xc945bf[_0x3bf3ff(0x138)]&&_0x3aaf17[_0x3bf3ff(0xf4)]===_0xc945bf['gridCol']+0x1);if(_0x301ca7&&_0x3b7381){_0x3b7a95=[_0xc945bf,_0x301ca7,_0x3b7381],_0x11908c=!![];break;}}}if(!_0x11908c&&!_0x42cf7e){const _0x238f70=_0x2076e2['filter'](_0x2e97fe=>_0x2e97fe[_0x3bf3ff(0x19d)]===ENEMY1_TYPE),_0x57dde6=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x238f70['length']>=0x2&&Math[_0x3bf3ff(0x107)]()<_0x57dde6){const _0x1824dd=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0xc2594b=_0x238f70['length']>=0x3&&Math[_0x3bf3ff(0x107)]()<_0x1824dd?0x3:0x2;let _0x48c3d5=![];_0x238f70[_0x3bf3ff(0xa9)](()=>Math[_0x3bf3ff(0x107)]()-0.5);for(let _0x59f8a1=0x0;_0x59f8a1<_0x238f70['length'];_0x59f8a1++){const _0x30aad5=_0x238f70[_0x59f8a1];let _0x3111d8=[_0x30aad5];const _0x51332b=_0x238f70[_0x3bf3ff(0xd2)](_0x392ab0=>_0x392ab0['id']!==_0x30aad5['id']&&_0x392ab0[_0x3bf3ff(0x138)]===_0x30aad5[_0x3bf3ff(0x138)]);_0x51332b['sort']((_0x3a2eaa,_0x5617b0)=>Math['abs'](_0x3a2eaa[_0x3bf3ff(0xf4)]-_0x30aad5[_0x3bf3ff(0xf4)])-Math[_0x3bf3ff(0x9e)](_0x5617b0[_0x3bf3ff(0xf4)]-_0x30aad5[_0x3bf3ff(0xf4)]));for(let _0x4f5579=0x0;_0x4f5579<_0x51332b[_0x3bf3ff(0xbb)]&&_0x3111d8[_0x3bf3ff(0xbb)]<_0xc2594b;_0x4f5579++){_0x3111d8[_0x3bf3ff(0xc9)](_0x51332b[_0x4f5579]);}if(_0x3111d8[_0x3bf3ff(0xbb)]===_0xc2594b){_0x3b7a95=_0x3111d8,_0x11908c=!![],_0x48c3d5=!![];break;}}!_0x48c3d5&&_0x238f70[_0x3bf3ff(0xbb)]>=_0xc2594b&&(_0x3b7a95=_0x238f70['slice'](0x0,_0xc2594b),_0x11908c=!![]);}}if(!_0x11908c&&!_0x42cf7e){const _0x29af38=_0x2076e2['filter'](_0x378b2e=>_0x378b2e['type']===ENEMY2_TYPE),_0x20b7e7=0.2;if(_0x29af38[_0x3bf3ff(0xbb)]>=0x2&&Math['random']()<_0x20b7e7){const _0x286ef2=0x2;let _0x175b57=![];_0x29af38[_0x3bf3ff(0xa9)](()=>Math[_0x3bf3ff(0x107)]()-0.5);for(let _0x454ad6=0x0;_0x454ad6<_0x29af38[_0x3bf3ff(0xbb)];_0x454ad6++){const _0x26d02a=_0x29af38[_0x454ad6];let _0x432e1e=[_0x26d02a];const _0x4df680=_0x29af38['filter'](_0x16c36e=>_0x16c36e['id']!==_0x26d02a['id']&&_0x16c36e[_0x3bf3ff(0x138)]===_0x26d02a['gridRow']);_0x4df680[_0x3bf3ff(0xa9)]((_0x38e5bb,_0x3d788a)=>Math['abs'](_0x38e5bb[_0x3bf3ff(0xf4)]-_0x26d02a[_0x3bf3ff(0xf4)])-Math[_0x3bf3ff(0x9e)](_0x3d788a[_0x3bf3ff(0xf4)]-_0x26d02a[_0x3bf3ff(0xf4)]));for(let _0x40c357=0x0;_0x40c357<_0x4df680['length']&&_0x432e1e[_0x3bf3ff(0xbb)]<_0x286ef2;_0x40c357++){_0x432e1e[_0x3bf3ff(0xc9)](_0x4df680[_0x40c357]);}if(_0x432e1e['length']===_0x286ef2){_0x3b7a95=_0x432e1e,_0x11908c=!![],_0x175b57=!![];break;}}!_0x175b57&&_0x29af38[_0x3bf3ff(0xbb)]>=_0x286ef2&&(_0x3b7a95=_0x29af38[_0x3bf3ff(0xfa)](0x0,_0x286ef2),_0x11908c=!![]);}}if(!_0x11908c&&_0x2076e2[_0x3bf3ff(0xbb)]>0x0){const _0x547852=_0x2076e2[0x0];_0x3b7a95['push'](_0x547852);if(_0x2076e2[_0x3bf3ff(0xbb)]>0x1&&!_0x42cf7e&&Math[_0x3bf3ff(0x107)]()<0.2){const _0x20441c=_0x2076e2[_0x3bf3ff(0x152)](_0x3ed2da=>_0x3ed2da['id']!==_0x547852['id']&&_0x3ed2da[_0x3bf3ff(0x138)]===_0x547852[_0x3bf3ff(0x138)]&&_0x3ed2da[_0x3bf3ff(0xf4)]===_0x547852[_0x3bf3ff(0xf4)]-0x1),_0x4cfe61=_0x2076e2[_0x3bf3ff(0x152)](_0x117441=>_0x117441['id']!==_0x547852['id']&&_0x117441['gridRow']===_0x547852['gridRow']&&_0x117441[_0x3bf3ff(0xf4)]===_0x547852[_0x3bf3ff(0xf4)]+0x1),_0x3d5071=_0x20441c||_0x4cfe61;if(_0x3d5071){const _0x372a39=_0x547852['type']===ENEMY3_TYPE&&_0x3d5071[_0x3bf3ff(0x19d)]===ENEMY3_TYPE;!_0x372a39&&_0x3b7a95[_0x3bf3ff(0xc9)](_0x3d5071);}}_0x11908c=!![];}if(_0x3b7a95[_0x3bf3ff(0xbb)]>0x0){_0x3b7a95=_0x3b7a95[_0x3bf3ff(0xd2)](_0x2e100e=>_0x2e100e);if(_0x3b7a95['length']===0x0)return null;_0x3b7a95['forEach'](_0xe861a9=>{const _0x2deaa9=_0x3bf3ff;_0xe861a9&&(_0xe861a9[_0x2deaa9(0x71)]=!![],_0xe861a9[_0x2deaa9(0x106)]=_0xaf494f);});const _0x371568=new Set(_0x3b7a95[_0x3bf3ff(0x141)](_0x4c5353=>_0x4c5353['id']));return resetJustReturnedFlags(_0x371568),_0x3b7a95;}return null;}catch(_0x4f2c9c){return console[_0x3bf3ff(0x186)](_0x3bf3ff(0x165),_0x4f2c9c),null;}}function triggerImmediateCaptureDive(){const _0x55a27e=_0x1d45a4;try{let _0xdeb48b=![],_0x5651df=null;if(isTwoPlayerMode&&selectedGameMode==='coop'){const _0x59062c=ship1&&player1Lives>0x1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x571748=ship2&&player2Lives>0x1&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if((_0x59062c||_0x571748)&&!captureAttemptMadeThisLevel){_0xdeb48b=!![];if(_0x59062c&&_0x571748)_0x5651df=Math[_0x55a27e(0x107)]()<0.5?ship1:ship2;else{if(_0x59062c)_0x5651df=ship1;else _0x571748&&(_0x5651df=ship2);}}}else playerLives>0x1&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!captureAttemptMadeThisLevel&&(_0xdeb48b=!![],_0x5651df=ship);if(isChallengingStage||!_0xdeb48b||!_0x5651df)return;const _0x1c15f6=enemies[_0x55a27e(0xd2)](_0x3e9517=>_0x3e9517&&_0x3e9517['state']==='in_grid'&&_0x3e9517[_0x55a27e(0x19d)]===ENEMY3_TYPE&&!_0x3e9517[_0x55a27e(0x19f)]&&!_0x3e9517['isPreparingForImmediateCapture']);if(_0x1c15f6[_0x55a27e(0xbb)]>0x0){const _0x111abb=_0x1c15f6[Math['floor'](Math[_0x55a27e(0x107)]()*_0x1c15f6['length'])],_0x430cb8=Date[_0x55a27e(0x12f)]();_0x111abb[_0x55a27e(0x79)]=!![],_0x111abb[_0x55a27e(0x71)]=!![];const _0x28ddcc=new Set([_0x111abb['id']]);resetJustReturnedFlags(_0x28ddcc);const _0xaaf6d3=_0x5651df['x']+_0x5651df[_0x55a27e(0xaa)]/0x2,_0x2b60ad=_0xaaf6d3<gameCanvas['width']/0x2?'right':_0x55a27e(0xef),_0x42e365=_0x2b60ad==='left'?gameCanvas[_0x55a27e(0xaa)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:gameCanvas[_0x55a27e(0xaa)]*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH,_0x3f15fd=gameCanvas['height']*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR;_0x111abb[_0x55a27e(0x14f)]=_0x55a27e(0x13d),_0x111abb[_0x55a27e(0xa3)]=_0x42e365,_0x111abb[_0x55a27e(0x90)]=_0x3f15fd,_0x111abb['diveStartTime']=_0x430cb8,playSound(_0x55a27e(0x11b),![],0.2);const _0xcb771=_0x111abb['id'];_0x111abb[_0x55a27e(0xd9)]=setTimeout(()=>{const _0x5aa437=_0x55a27e,_0x2d7f62=enemies[_0x5aa437(0x152)](_0x46183c=>_0x46183c?.['id']===_0xcb771);_0x2d7f62&&_0x2d7f62['state']===_0x5aa437(0x13d)&&(_0x2d7f62[_0x5aa437(0x14f)]=_0x5aa437(0x7b));if(_0x2d7f62)_0x2d7f62[_0x5aa437(0xd9)]=null;const _0x1b5553=enemySpawnTimeouts[_0x5aa437(0x97)](_0x40c3a2=>_0x40c3a2===_0x111abb[_0x5aa437(0xd9)]);if(_0x1b5553>-0x1)enemySpawnTimeouts[_0x5aa437(0xa1)](_0x1b5553,0x1);},0x12c),enemySpawnTimeouts[_0x55a27e(0xc9)](_0x111abb[_0x55a27e(0xd9)]);}}catch(_0x2e6e74){console[_0x55a27e(0x186)](_0x55a27e(0xe2),_0x2e6e74);}}function resetJustReturnedFlags(_0x1295ec){const _0x40787b=_0x1d45a4;enemies[_0x40787b(0x10c)](_0x518ba1=>{const _0x497f99=_0x40787b;let _0x3e49a8=![];if(_0x1295ec instanceof Set)_0x3e49a8=_0x1295ec[_0x497f99(0x8b)](_0x518ba1['id']);else typeof _0x1295ec===_0x497f99(0xf0)&&(_0x3e49a8=_0x518ba1['id']===_0x1295ec);_0x518ba1&&_0x518ba1['state']==='in_grid'&&_0x518ba1[_0x497f99(0x71)]&&!_0x3e49a8&&(_0x518ba1[_0x497f99(0x71)]=![]);});}function updateFloatingScores(){const _0xb06a14=_0x1d45a4;if(isPaused)return;try{const _0x13a2db=Date[_0xb06a14(0x12f)]();floatingScores=floatingScores[_0xb06a14(0xd2)](_0x171652=>_0x13a2db-_0x171652[_0xb06a14(0x1a8)]<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x568eb4){console['error'](_0xb06a14(0x8a),_0x568eb4),floatingScores=[];}}function updateExplosions(){const _0x18550d=_0x1d45a4;if(isPaused)return;try{const _0x3168ca=Date[_0x18550d(0x12f)]();for(let _0x2282fa=explosions[_0x18550d(0xbb)]-0x1;_0x2282fa>=0x0;_0x2282fa--){const _0x514e1b=explosions[_0x2282fa],_0x54be22=_0x3168ca-_0x514e1b[_0x18550d(0x1a8)];if(_0x54be22>_0x514e1b[_0x18550d(0x9d)]){explosions['splice'](_0x2282fa,0x1);continue;}_0x514e1b[_0x18550d(0x8c)]['forEach'](_0x4d7772=>{const _0x2126b0=_0x18550d;_0x4d7772['x']+=_0x4d7772['vx'],_0x4d7772['y']+=_0x4d7772['vy'],_0x4d7772[_0x2126b0(0xb1)]=Math[_0x2126b0(0x12c)](0x0,0x1-_0x54be22/_0x514e1b[_0x2126b0(0x9d)]*EXPLOSION_FADE_SPEED);});}}catch(_0x35dc22){console['error'](_0x18550d(0x12a),_0x35dc22),explosions=[];}}function _0x1298(){const _0x21d133=['function','isPreparingForImmediateCapture','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','diving_to_capture_position','lifetime','playerNum','completed','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','in_grid','isArray','stringify','lostLifeSound','entranceSound','CS_LoopAttack_BR','challenging_stage','hasFiredPostLanding','CO-OP\x20GAME',')\x20for\x20','Error\x20updating\x20floating\x20scores:','has','particles','squadronId','pathSegmentIndex','undefined','targetY','entrance_flight_1','canFireThisDive','pathId','landedTime','save','velocityX','findIndex','clearRect','min','HIGH\x20SCORE','.\x20Transitioning.','center','duration','abs','\x20(Path\x20','Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20','splice','\x20off\x20screen:','targetX','FATAL\x20Error\x20in\x20moveEntities:','attack-','hiScoreSound','1P_VS_AI_COOP','landed','sort','width','7844925pYHMud','\x20path\x20index\x20','returnLogDone','Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20','pause','blue','alpha','Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22','toString',').\x20Skipping.','showing_capture_message','Invalid\x20CS\x20Bezier\x20segment\x20','Error\x20getting\x20grid\x20pos\x20for\x20','explosionSound','6775972rwFoRs','1309680NSxTYe','length','white','\x20invalid!\x20Skipping.','Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20','Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20','Invalid\x20next\x20CS\x20Bezier\x20segment\x20',',\x20Path\x20','CS:\x20Path\x20','atan2','enemies','generateWaveDefinition','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','resultsMusicSound','pressed','push','clear','extraLifeSound','targetGridX','entrancePathId','.\x20Skipping.','number','green','sin','filter','levelUpSound','2689872YQiXSL','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20',')!\x20Returning.','enemyShootSound','20px\x20\x27Press\x20Start\x202P\x27','capturePrepareTimeout','main','\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20',',\x20def\x20length:\x20','moving_to_grid','player1','Enemy\x20','Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20','.\x20Switching\x20to\x20moving_to_grid.','Error\x20in\x20triggerImmediateCaptureDive:','startSound','.\x20Removing.','currentLives','add','entrance_flight_2','unknown','switch_player','\x20after\x20attack:','targetGridY','\x20attacking,\x20index\x20','coop','scheduledStartTime','left','string','velocityY','right','back','gridCol','\x20in\x20moving_to_grid','GAME\x20EXIT','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20','dualShipSound','resetGame','slice','\x20after\x20NaN','\x20at\x20[','[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','\x20is\x20empty\x20or\x20invalid.','Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20','following_bezier_path','CS_HorizontalFlyByL','CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','boss_loop_left','\x20after\x20invalid\x20path\x20index','keys','attackType','random','naturalWidth','preparing_attack','!\x20Returning.','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','forEach','\x20after\x20missing\x20path','cos','destroyed','Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20','num','newButtonStates','CS_HorizontalFlyByR','attackPathSegments','\x20(invalid\x20attack\x20index):','initialCaptureAnimationY','attackPathT','\x20not\x20found.','floor','squadronEnemyIndex','bossGalagaDiveSound','substring','round','indexOf','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20','2UP','NORMAL','NORMAL\x20GAME','red','enemy-grid-','\x20for\x20SHARED\x20path\x20','health','CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!','Error\x20updating\x20explosions:','total','max','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','\x20for\x20path\x20','now','drawImage','CRITICAL:\x20Required\x20CS\x20path\x20\x22','Error\x20in\x20aiControl:','capturing','1P_VS_AI_NORMAL','LOGO','complete','\x20after\x20bad\x20next\x20segment','gridRow','show_results','Error\x20calculating\x20final\x20bezier\x20point\x20for\x20','tintProgress','fillRect','preparing_capture','1504134kualAk','stack','object','map','getGamepads','Error\x20starting\x20attack\x20for\x20','Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20','resetAllMessages','capturedShipLastFiredTime','CS3_DiveLoopL_Sharp','lastFiredTime','full_grid','Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20','normal','NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20','shipObj','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20','state','speed','\x20out\x20of\x20bounds\x20(','find','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','dual','[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20','\x20has\x20invalid\x20enemy\x20data.','\x22\x20for\x20enemy\x20in\x20squadron\x20','player2','Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.','\x20at\x20end\x20of\x20normal\x20path\x20','attackPathSegmentIndex','naturalHeight','playerId','bossHit2Sound','shipCapturedSound','sqrt','targetPlayerId','gameOverSound','rapid','Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20','Error\x20in\x20findAndDetachEnemy:','totalRotation','.\x20Enemy\x20','CS_LoopAttack_BL','Invalid\x20start\x20segment\x20for\x20path\x20','enemy-cs-','Full\x20Grid:\x20Squadron\x20','FATAL\x20Error\x20in\x20moveEntities\x20(Restored\x20Conditions):','parse','bossHit1Sound','hasOwnProperty','getWaveType','\x20(no\x20attack\x20path):','capturedShipY','\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.','playerShootSound','\x20after\x20bezier\x20error','thresholdsMet','attacking','buttons','capturedShipDimensions','hasFired','captureAnimationRotation','\x20after\x20bad\x20segment','Error\x20in\x20renderGame:',',\x20Idx\x20','Error\x20checking/awarding\x20extra\x20life:','size','some','Error\x20creating\x20player\x20bullet(s):','captureStartTime','single','generateAttackPath','error','restore','CS_LoopAttack_TR','boss_loop_right','rotationDirection','START\x20GAME','\x20attacking,\x20invalid\x20segment\x20','returning','rotation','CS3_DiveLoopR_Sharp','sign','gridBackgroundSound','\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.','captureSound','isDamaged','\x20invalid!\x20Skipping\x20squadron.','993974OFpthL','warn','\x20(state:\x20','3571389iEVpXI','\x22\x20not\x20found!\x20Aborting\x20CS.',',\x20isCS:\x20','pathT','type','stopAllGameSounds','hasCapturedShip','\x20for\x20squadron\x20','attackFormationOffsetX','following_entrance_path','\x20attacking\x20without\x20path!\x20Returning.','Entrance\x20Wave:\x20No\x20squadrons\x20or\x20enemies\x20scheduled\x20for\x20level\x20','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','capturedShipX','Entrance\x20Wave:\x20Path\x20','creationTime','grey','rotationCompleted','shoot',')\x20during\x20shift:','waveUpSound','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','csPerfectSound',',\x20isFullGrid:\x20','justReturned','Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20','height','ai_p2','attackGroupId','fillStyle'];_0x1298=function(){return _0x21d133;};return _0x1298();}function moveEntities(_0x3393a6=null,_0x47e0e8=null){const _0x51802b=_0x1d45a4;if(isPaused)return;try{const _0x78ef09=Date['now'](),_0x1c57d2=gameCanvas?gameCanvas[_0x51802b(0x74)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(gameCanvas&&!isTouchActiveGame){if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x51802b(0xed)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x4221cd=ship1[_0x51802b(0xaa)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(leftPressed)ship1['x']-=ship1[_0x51802b(0x150)];if(rightPressed)ship1['x']+=ship1['speed'];ship1['x']=Math[_0x51802b(0x12c)](0x0,Math[_0x51802b(0x99)](gameCanvas[_0x51802b(0xaa)]-_0x4221cd,ship1['x'])),ship1['targetX']=ship1['x'];}if(!isPlayerTwoAI&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x428e60=ship2['width']+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(p2LeftPressed)ship2['x']-=ship2[_0x51802b(0x150)];if(p2RightPressed)ship2['x']+=ship2[_0x51802b(0x150)];ship2['x']=Math['max'](0x0,Math[_0x51802b(0x99)](gameCanvas['width']-_0x428e60,ship2['x'])),ship2['targetX']=ship2['x'];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1){const _0x5b10b=ship[_0x51802b(0xaa)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x463679=![],_0x425b96=![];if(isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51802b(0x134)&&currentPlayer===0x1&&isShowingIntro){if(_0x3393a6!==null)_0x463679=_0x3393a6;if(_0x47e0e8!==null)_0x425b96=_0x47e0e8;}if(_0x463679||leftPressed)ship['x']-=ship[_0x51802b(0x150)];if(_0x425b96||rightPressed)ship['x']+=ship[_0x51802b(0x150)];ship['x']=Math[_0x51802b(0x12c)](0x0,Math[_0x51802b(0x99)](gameCanvas[_0x51802b(0xaa)]-_0x5b10b,ship['x'])),ship[_0x51802b(0xa3)]=ship['x'];}}}}}if(!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x51802b(0x14b)&&currentPlayer===0x2||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51802b(0xa7)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51802b(0xa7)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x574c70=ship1['targetX']-ship1['x'];let _0x346cff=ship1[_0x51802b(0x150)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x51802b(0x9e)](_0x574c70)>AI_MOVEMENT_DEADZONE)ship1['x']+=Math[_0x51802b(0x190)](_0x574c70)*Math[_0x51802b(0x99)](Math[_0x51802b(0x9e)](_0x574c70),_0x346cff);const _0x36fb0e=ship1[_0x51802b(0xaa)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship1['x']=Math['max'](0x0,Math[_0x51802b(0x99)](gameCanvas[_0x51802b(0xaa)]-_0x36fb0e,ship1['x']));}if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x15aa10=ship2['targetX']-ship2['x'];let _0x592ac0=ship2['speed']*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x51802b(0x9e)](_0x15aa10)>AI_MOVEMENT_DEADZONE)ship2['x']+=Math['sign'](_0x15aa10)*Math[_0x51802b(0x99)](Math[_0x51802b(0x9e)](_0x15aa10),_0x592ac0);const _0x3eaa31=ship2[_0x51802b(0xaa)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship2['x']=Math[_0x51802b(0x12c)](0x0,Math[_0x51802b(0x99)](gameCanvas[_0x51802b(0xaa)]-_0x3eaa31,ship2['x']));}}else{if(ship){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){const _0x3d096b=ship[_0x51802b(0xa3)]-ship['x'];let _0x247656=ship[_0x51802b(0x150)]*AI_POSITION_MOVE_SPEED_FACTOR;isPlayerTwoAI&&selectedGameMode===_0x51802b(0x14b)&&currentPlayer===0x2&&(_0x247656=ship[_0x51802b(0x150)]*(AI_POSITION_MOVE_SPEED_FACTOR*1.15));Math[_0x51802b(0x9e)](_0x3d096b)>AI_MOVEMENT_DEADZONE&&(ship['x']+=Math['sign'](_0x3d096b)*Math[_0x51802b(0x99)](Math['abs'](_0x3d096b),_0x247656));const _0x3735b1=ship[_0x51802b(0xaa)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship['x']=Math[_0x51802b(0x12c)](0x0,Math['min'](gameCanvas[_0x51802b(0xaa)]-_0x3735b1,ship['x']));}}}}if(isTwoPlayerMode&&selectedGameMode===_0x51802b(0xed)){if(isPlayer1WaitingForRespawn&&_0x78ef09>=player1RespawnTime)isPlayer1WaitingForRespawn=![];if(isPlayer1Invincible&&_0x78ef09>=player1InvincibilityEndTime)isPlayer1Invincible=![];if(isPlayer2WaitingForRespawn&&_0x78ef09>=player2RespawnTime)isPlayer2WaitingForRespawn=![];if(isPlayer2Invincible&&_0x78ef09>=player2InvincibilityEndTime)isPlayer2Invincible=![];}else{if(isWaitingForRespawn&&_0x78ef09>=respawnTime)isWaitingForRespawn=![];if(isInvincible&&_0x78ef09>=invincibilityEndTime)isInvincible=![];}for(let _0x29fb96=bullets[_0x51802b(0xbb)]-0x1;_0x29fb96>=0x0;_0x29fb96--){const _0x15776c=bullets[_0x29fb96];if(!_0x15776c){bullets[_0x51802b(0xa1)](_0x29fb96,0x1);continue;}_0x15776c['y']-=_0x15776c[_0x51802b(0x150)];if(_0x15776c['y']+PLAYER_BULLET_HEIGHT<0x0){bullets['splice'](_0x29fb96,0x1);continue;}for(let _0x3df60c=enemies['length']-0x1;_0x3df60c>=0x0;_0x3df60c--){const _0x192430=enemies[_0x3df60c];if(!_0x192430){enemies['splice'](_0x3df60c,0x1);continue;}const _0x32b1ab={'x':_0x192430['x'],'y':_0x192430['y'],'width':_0x192430[_0x51802b(0x19d)]===ENEMY3_TYPE?BOSS_WIDTH:_0x192430[_0x51802b(0x19d)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,'height':_0x192430[_0x51802b(0x19d)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x192430[_0x51802b(0x19d)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT},_0x387629={'x':_0x15776c['x'],'y':_0x15776c['y'],'width':_0x15776c['width'],'height':_0x15776c[_0x51802b(0x74)]};if(checkCollision(_0x387629,_0x32b1ab)){bullets[_0x51802b(0xa1)](_0x29fb96,0x1);const _0x14e6ad=handleEnemyHit(_0x192430,_0x15776c[_0x51802b(0x15d)]);if(_0x14e6ad[_0x51802b(0x10f)])enemies['splice'](_0x3df60c,0x1);break;}}}for(let _0x115e0d=enemyBullets[_0x51802b(0xbb)]-0x1;_0x115e0d>=0x0;_0x115e0d--){const _0x273b30=enemyBullets[_0x115e0d];if(!_0x273b30){enemyBullets[_0x51802b(0xa1)](_0x115e0d,0x1);continue;}_0x273b30['x']+=_0x273b30['vx'],_0x273b30['y']+=_0x273b30['vy'],(_0x273b30['y']>gameCanvas[_0x51802b(0x74)]||_0x273b30['y']<-ENEMY_BULLET_HEIGHT||_0x273b30['x']<-ENEMY_BULLET_WIDTH||_0x273b30['x']>gameCanvas[_0x51802b(0xaa)])&&enemyBullets[_0x51802b(0xa1)](_0x115e0d,0x1);}const _0x2e18d1=gameCanvas?gameCanvas[_0x51802b(0x74)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x2e7ade=0x2;for(let _0x4a57e9=fallingShips[_0x51802b(0xbb)]-0x1;_0x4a57e9>=0x0;_0x4a57e9--){const _0x3e50b2=fallingShips[_0x4a57e9];if(!_0x3e50b2){fallingShips[_0x51802b(0xa1)](_0x4a57e9,0x1);continue;}let _0x69d624=![];if(!_0x3e50b2[_0x51802b(0xa8)]){_0x3e50b2['y']+=FALLING_SHIP_SPEED;if(_0x3e50b2['y']>=_0x2e18d1){_0x3e50b2['y']=_0x2e18d1,_0x3e50b2[_0x51802b(0xa8)]=!![],_0x3e50b2[_0x51802b(0x94)]=_0x78ef09;!_0x3e50b2[_0x51802b(0x1aa)]&&(_0x3e50b2['rotation']=0x0,_0x3e50b2[_0x51802b(0x1aa)]=!![]);let _0x1aa87f=null,_0x342e2e=()=>{},_0x30d3b6=![],_0x3e9c88=![],_0x42d0cc=![],_0x476ed8=null;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51802b(0xa7)){if(_0x3e50b2['targetPlayerId']==='player1'&&ship1&&player1Lives>0x0)_0x1aa87f=ship1,_0x30d3b6=player1IsDualShipActive,_0x342e2e=()=>{player1IsDualShipActive=!![];},_0x42d0cc=!![],_0x476ed8=_0x51802b(0xde);else(_0x3e50b2[_0x51802b(0x161)]==='player2'||_0x3e50b2[_0x51802b(0x161)]===_0x51802b(0x75))&&ship2&&player2Lives>0x0&&(_0x1aa87f=ship2,_0x30d3b6=player2IsDualShipActive,_0x342e2e=()=>{player2IsDualShipActive=!![];},_0x42d0cc=!![],_0x476ed8=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51802b(0xa7)?_0x51802b(0x75):_0x51802b(0x158));}else{if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x3e50b2[_0x51802b(0x161)]===_0x51802b(0xde)&&ship1&&player1Lives>0x0)_0x1aa87f=ship1,_0x30d3b6=player1IsDualShipActive,_0x3e9c88=isPlayer1ShipCaptured,_0x342e2e=()=>{player1IsDualShipActive=!![],isPlayer1ShipCaptured=![];},_0x42d0cc=!![],_0x476ed8='player1';else _0x3e50b2[_0x51802b(0x161)]==='player2'&&ship2&&player2Lives>0x0&&(_0x1aa87f=ship2,_0x30d3b6=player2IsDualShipActive,_0x3e9c88=isPlayer2ShipCaptured,_0x342e2e=()=>{player2IsDualShipActive=!![],isPlayer2ShipCaptured=![];},_0x42d0cc=!![],_0x476ed8=_0x51802b(0x158));}else ship&&playerLives>0x0&&(_0x1aa87f=ship,_0x30d3b6=isDualShipActive,_0x3e9c88=isShipCaptured,_0x342e2e=()=>{const _0x38a3b2=_0x51802b;isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x38a3b2(0x14b)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}isShipCaptured=![];},_0x42d0cc=!![],_0x476ed8=isTwoPlayerMode&&selectedGameMode===_0x51802b(0x14b)?String(currentPlayer):'player1');}if(_0x42d0cc&&!_0x30d3b6){_0x342e2e(),playSound('dualShipSound',![],0.4);if(_0x3e9c88&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51802b(0xa7))){if(_0x476ed8===_0x51802b(0xde)&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x78ef09+INVINCIBILITY_DURATION_MS;else{if(_0x476ed8===_0x51802b(0x158)&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x78ef09+INVINCIBILITY_DURATION_MS;else ship&&(isInvincible=!![],invincibilityEndTime=_0x78ef09+INVINCIBILITY_DURATION_MS);}}fallingShips['splice'](_0x4a57e9,0x1),_0x69d624=!![];continue;}else{if(_0x42d0cc&&_0x30d3b6){fallingShips[_0x51802b(0xa1)](_0x4a57e9,0x1),_0x69d624=!![];continue;}else{fallingShips[_0x51802b(0xa1)](_0x4a57e9,0x1),_0x69d624=!![];continue;}}}}if(_0x69d624)continue;const _0x28f8a3=_0x78ef09-_0x3e50b2[_0x51802b(0x1a8)];if(_0x28f8a3<FALLING_SHIP_FADE_DURATION_MS)_0x3e50b2[_0x51802b(0x13b)]=Math[_0x51802b(0x12c)](0x0,0x1-_0x28f8a3/FALLING_SHIP_FADE_DURATION_MS);else _0x3e50b2[_0x51802b(0x13b)]=0x0;if(_0x3e50b2[_0x51802b(0x1aa)])_0x3e50b2[_0x51802b(0x18e)]=0x0;else{if(!_0x3e50b2[_0x51802b(0xa8)]&&typeof _0x3e50b2[_0x51802b(0x18a)]===_0x51802b(0xcf)&&typeof FALLING_SHIP_ROTATION_SPEED===_0x51802b(0xcf)&&FALLING_SHIP_ROTATION_SPEED>0x0){const _0x3b9add=FALLING_SHIP_ROTATION_SPEED*_0x3e50b2[_0x51802b(0x18a)];_0x3e50b2['rotation']+=_0x3b9add,_0x3e50b2[_0x51802b(0x166)]+=Math[_0x51802b(0x9e)](_0x3b9add);if(_0x3e50b2['totalRotation']>=_0x2e7ade*0x2*Math['PI'])_0x3e50b2['rotation']=0x0,_0x3e50b2[_0x51802b(0x1aa)]=!![];else{if(_0x3e50b2[_0x51802b(0x18e)]>Math['PI']*0x2)_0x3e50b2[_0x51802b(0x18e)]-=Math['PI']*0x2;if(_0x3e50b2[_0x51802b(0x18e)]<0x0)_0x3e50b2['rotation']+=Math['PI']*0x2;}}else _0x3e50b2['rotation']=_0x3e50b2['rotation']||0x0;}if(!_0x3e50b2[_0x51802b(0xa8)]){let _0xab968b=null,_0x37e42b=()=>{},_0x175676=0x0,_0x26ab0f=![],_0x452d67=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51802b(0xa7)){if(_0x3e50b2[_0x51802b(0x161)]===_0x51802b(0xde)&&ship1&&player1Lives>0x0)_0xab968b=ship1,_0x452d67=player1IsDualShipActive,_0x37e42b=()=>{if(!_0x452d67)player1IsDualShipActive=!![];},_0x175676=0x1;else(_0x3e50b2[_0x51802b(0x161)]===_0x51802b(0x158)||_0x3e50b2[_0x51802b(0x161)]===_0x51802b(0x75))&&ship2&&player2Lives>0x0&&(_0xab968b=ship2,_0x452d67=player2IsDualShipActive,_0x37e42b=()=>{if(!_0x452d67)player2IsDualShipActive=!![];},_0x175676=0x2);}else{if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x3e50b2[_0x51802b(0x161)]===_0x51802b(0xde)&&ship1&&player1Lives>0x0)_0xab968b=ship1,_0x26ab0f=isPlayer1ShipCaptured,_0x452d67=player1IsDualShipActive,_0x37e42b=()=>{if(!_0x452d67)player1IsDualShipActive=!![];isPlayer1ShipCaptured=![];},_0x175676=0x1;else _0x3e50b2[_0x51802b(0x161)]===_0x51802b(0x158)&&ship2&&player2Lives>0x0&&(_0xab968b=ship2,_0x26ab0f=isPlayer2ShipCaptured,_0x452d67=player2IsDualShipActive,_0x37e42b=()=>{if(!_0x452d67)player2IsDualShipActive=!![];isPlayer2ShipCaptured=![];},_0x175676=0x2);}else ship&&playerLives>0x0&&(_0xab968b=ship,_0x26ab0f=isShipCaptured,_0x452d67=isDualShipActive,_0x37e42b=()=>{const _0x507f5a=_0x51802b;if(!_0x452d67){isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x507f5a(0x14b)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}}isShipCaptured=![];},_0x175676=isTwoPlayerMode&&selectedGameMode===_0x51802b(0x14b)?currentPlayer:0x1);}if(_0xab968b&&!_0x452d67){const _0x29550f={'x':_0x3e50b2['x'],'y':_0x3e50b2['y'],'width':_0x3e50b2[_0x51802b(0xaa)],'height':_0x3e50b2['height']},_0xaabd2d={'x':_0xab968b['x'],'y':_0xab968b['y'],'width':_0xab968b[_0x51802b(0xaa)],'height':_0xab968b[_0x51802b(0x74)]};if(checkCollision(_0x29550f,_0xaabd2d)){_0x37e42b();if(_0x26ab0f&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51802b(0xa7))){playSound(_0x51802b(0xf8),![],0.4);if(_0x175676===0x1&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x78ef09+INVINCIBILITY_DURATION_MS;else{if(_0x175676===0x2&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x78ef09+INVINCIBILITY_DURATION_MS;else _0x175676!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0x78ef09+INVINCIBILITY_DURATION_MS);}}else playSound(_0x51802b(0xf8),![],0.4);fallingShips[_0x51802b(0xa1)](_0x4a57e9,0x1);continue;}}}if(!_0x3e50b2[_0x51802b(0xa8)]&&_0x3e50b2['y']>=gameCanvas[_0x51802b(0x74)])fallingShips[_0x51802b(0xa1)](_0x4a57e9,0x1);}let _0x16451f=0x0;const _0x51fbe1=enemies[_0x51802b(0x181)](_0x20129a=>_0x20129a?.['state']==='in_grid'),_0x13b92d=!isChallengingStage&&!isWaveTransitioning&&_0x51fbe1&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x51802b(0xed)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage));if(_0x13b92d){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound('gridBackgroundSound',!![],0.1));const _0x265dc4=enemies[_0x51802b(0xd2)](_0xf73034=>_0xf73034?.[_0x51802b(0x14f)]===_0x51802b(0x80));if(_0x265dc4[_0x51802b(0xbb)]>0x0){let _0x638bac=gameCanvas[_0x51802b(0xaa)],_0x394491=0x0;_0x265dc4[_0x51802b(0x10c)](_0x954efd=>{const _0xc96af1=_0x51802b;_0x954efd&&(_0x638bac=Math[_0xc96af1(0x99)](_0x638bac,_0x954efd['x']),_0x394491=Math[_0xc96af1(0x12c)](_0x394491,_0x954efd['x']+_0x954efd[_0xc96af1(0xaa)]));});const _0x60dd24=gameCanvas[_0x51802b(0xaa)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x5d8ae3=gameCanvas[_0x51802b(0xaa)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x394491>=_0x5d8ae3)gridMoveDirection=-0x1;else{if(gridMoveDirection===-0x1&&_0x638bac<=_0x60dd24)gridMoveDirection=0x1;}const _0x411bc2=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x16451f=_0x411bc2*gridMoveDirection,currentGridOffsetX+=_0x16451f,enemies[_0x51802b(0x10c)](_0x53f35d=>{const _0x144dbe=_0x51802b;if(_0x53f35d&&(_0x53f35d[_0x144dbe(0x14f)]===_0x144dbe(0x18d)||_0x53f35d[_0x144dbe(0x14f)]===_0x144dbe(0x80)||_0x53f35d[_0x144dbe(0x14f)]===_0x144dbe(0xdd)))try{const _0x974285=_0x53f35d[_0x144dbe(0x19d)]===ENEMY3_TYPE?BOSS_WIDTH:_0x53f35d['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x4c00ab,y:_0x54bc46}=getCurrentGridSlotPosition(_0x53f35d[_0x144dbe(0x138)],_0x53f35d[_0x144dbe(0xf4)],_0x974285);_0x53f35d[_0x144dbe(0xcc)]=_0x4c00ab,_0x53f35d[_0x144dbe(0xeb)]=_0x54bc46;}catch(_0x196ea0){console[_0x144dbe(0x186)](_0x144dbe(0xa0)+_0x53f35d?.['id']+_0x144dbe(0x198)+_0x53f35d?.['state']+_0x144dbe(0x1ac),_0x196ea0);}});}}else isGridSoundPlaying&&(stopSound(_0x51802b(0x191)),isGridSoundPlaying=![]),_0x16451f=0x0;for(let _0x14050c=enemies[_0x51802b(0xbb)]-0x1;_0x14050c>=0x0;_0x14050c--){let _0x69e750=enemies[_0x14050c];if(!_0x69e750){enemies[_0x51802b(0xa1)](_0x14050c,0x1);continue;}const _0xe4de82=_0x69e750['id'];if(_0x69e750[_0x51802b(0xd9)]&&_0x69e750[_0x51802b(0x14f)]!==_0x51802b(0x13d)){clearTimeout(_0x69e750[_0x51802b(0xd9)]);const _0x5b9062=enemySpawnTimeouts['indexOf'](_0x69e750[_0x51802b(0xd9)]);if(_0x5b9062>-0x1)enemySpawnTimeouts['splice'](_0x5b9062,0x1);_0x69e750[_0x51802b(0xd9)]=null;}const _0x29670f=_0x69e750[_0x51802b(0x19d)]===ENEMY3_TYPE?BOSS_WIDTH:_0x69e750['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x467e3a=_0x69e750[_0x51802b(0x19d)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x69e750[_0x51802b(0x19d)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x69e750['state']){case _0x51802b(0x100):{let _0x187efe=CS_ENTRANCE_PATH_SPEED;const _0x230767=_0x69e750['pathSpeedMultiplier']||0x1;_0x187efe*=_0x230767;if(!isChallengingStage){enemies[_0x51802b(0xa1)](_0x14050c,0x1),_0x69e750=null;break;}let _0x45ab59=challengingStagePaths,_0x3071db=_0x45ab59[_0x69e750['entrancePathId']];if(!_0x3071db||_0x69e750['pathSegmentIndex']>=_0x3071db['length']){enemies[_0x51802b(0xa1)](_0x14050c,0x1),_0x69e750=null;break;}const _0x4d0872=_0x3071db[_0x69e750[_0x51802b(0x8e)]];if(!_0x4d0872||!_0x4d0872['p0']||!_0x4d0872['p1']||!_0x4d0872['p2']||!_0x4d0872['p3']){console[_0x51802b(0x186)](_0x51802b(0xb6)+_0x69e750[_0x51802b(0x8e)]+_0x51802b(0x12e)+_0x69e750['entrancePathId']+_0x51802b(0x167)+_0x69e750['id']),enemies[_0x51802b(0xa1)](_0x14050c,0x1),_0x69e750=null;break;}_0x69e750['pathT']+=_0x187efe;let _0x5535e9,_0x9f9d17,_0x378695=_0x69e750['x'],_0x10e29b=_0x69e750['y'];if(_0x69e750['pathT']>=0x1){_0x69e750[_0x51802b(0x19c)]=0x0,_0x69e750[_0x51802b(0x8e)]++;if(_0x69e750[_0x51802b(0x8e)]>=_0x3071db[_0x51802b(0xbb)])enemies[_0x51802b(0xa1)](_0x14050c,0x1),_0x69e750=null;else{const _0x2eb503=_0x3071db[_0x69e750[_0x51802b(0x8e)]];_0x2eb503?.['p0']?(_0x5535e9=_0x2eb503['p0']['x'],_0x9f9d17=_0x2eb503['p0']['y']):(console[_0x51802b(0x186)](_0x51802b(0xc0)+_0x69e750[_0x51802b(0x8e)]+_0x51802b(0x12e)+_0x69e750[_0x51802b(0xcd)]+'.\x20Enemy\x20'+_0xe4de82),enemies[_0x51802b(0xa1)](_0x14050c,0x1),_0x69e750=null);}}else try{_0x5535e9=calculateBezierPoint(_0x69e750['pathT'],_0x4d0872['p0']['x'],_0x4d0872['p1']['x'],_0x4d0872['p2']['x'],_0x4d0872['p3']['x']),_0x9f9d17=calculateBezierPoint(_0x69e750[_0x51802b(0x19c)],_0x4d0872['p0']['y'],_0x4d0872['p1']['y'],_0x4d0872['p2']['y'],_0x4d0872['p3']['y']);}catch(_0x19e51e){console[_0x51802b(0x186)]('Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20'+_0xe4de82+':',_0x19e51e),enemies[_0x51802b(0xa1)](_0x14050c,0x1),_0x69e750=null;}_0x69e750&&(isNaN(_0x5535e9)||isNaN(_0x9f9d17)?(console[_0x51802b(0x186)](_0x51802b(0x14c)+_0xe4de82+_0x51802b(0xe4)),enemies[_0x51802b(0xa1)](_0x14050c,0x1),_0x69e750=null):(_0x69e750[_0x51802b(0x96)]=_0x5535e9-_0x378695,_0x69e750['velocityY']=_0x9f9d17-_0x10e29b,_0x69e750['x']=_0x5535e9,_0x69e750['y']=_0x9f9d17));break;}case _0x51802b(0x1a2):{if(isChallengingStage){enemies[_0x51802b(0xa1)](_0x14050c,0x1),_0x69e750=null;break;}let _0x383952=normalWaveEntrancePaths,_0x3b0ad1=_0x383952[_0x69e750[_0x51802b(0xcd)]],_0x227826;_0x69e750[_0x51802b(0xcd)]===_0x51802b(0x103)||_0x69e750['entrancePathId']===_0x51802b(0x189)?_0x227826=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x227826=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x3b0ad1){console['warn']('Enemy\x20'+_0xe4de82+'\x20missing\x20SHARED\x20path\x20'+_0x69e750[_0x51802b(0xcd)]+_0x51802b(0xe1));try{_0x69e750[_0x51802b(0xcc)]=_0x69e750[_0x51802b(0xcc)]??gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750['targetGridY']=_0x69e750['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x46386f){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20'+_0xe4de82+_0x51802b(0x10d),_0x46386f),_0x69e750[_0x51802b(0xcc)]=gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750[_0x51802b(0xeb)]=ENEMY_TOP_MARGIN;}_0x69e750[_0x51802b(0x14f)]=_0x51802b(0xdd),_0x69e750[_0x51802b(0x19c)]=0x0,_0x69e750[_0x51802b(0x8e)]=0x0,_0x69e750[_0x51802b(0x96)]=0x0,_0x69e750[_0x51802b(0xf1)]=0x0;_0x69e750['squadronId']!==undefined&&squadronCompletionStatus[_0x69e750[_0x51802b(0x8d)]]&&squadronCompletionStatus[_0x69e750[_0x51802b(0x8d)]][_0x51802b(0x7e)]++;break;}if(_0x69e750['pathSegmentIndex']>=_0x3b0ad1[_0x51802b(0xbb)]){console[_0x51802b(0x197)](_0x51802b(0xdf)+_0xe4de82+_0x51802b(0xac)+_0x69e750[_0x51802b(0x8e)]+_0x51802b(0xdb)+_0x69e750[_0x51802b(0xcd)]+_0x51802b(0xe1));try{_0x69e750[_0x51802b(0xcc)]=_0x69e750[_0x51802b(0xcc)]??gameCanvas['width']/0x2,_0x69e750[_0x51802b(0xeb)]=_0x69e750[_0x51802b(0xeb)]??ENEMY_TOP_MARGIN;}catch(_0x5e3eeb){console[_0x51802b(0x186)](_0x51802b(0xb7)+_0xe4de82+_0x51802b(0x104),_0x5e3eeb),_0x69e750['targetGridX']=gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750['targetGridY']=ENEMY_TOP_MARGIN;}_0x69e750[_0x51802b(0x14f)]=_0x51802b(0xdd),_0x69e750[_0x51802b(0x19c)]=0x0,_0x69e750[_0x51802b(0x8e)]=0x0,_0x69e750[_0x51802b(0x96)]=0x0,_0x69e750[_0x51802b(0xf1)]=0x0;_0x69e750['squadronId']!==undefined&&squadronCompletionStatus[_0x69e750['squadronId']]&&squadronCompletionStatus[_0x69e750[_0x51802b(0x8d)]][_0x51802b(0x7e)]++;break;}const _0x13ccab=_0x3b0ad1[_0x69e750[_0x51802b(0x8e)]];if(!_0x13ccab||!_0x13ccab['p0']||!_0x13ccab['p1']||!_0x13ccab['p2']||!_0x13ccab['p3']){console[_0x51802b(0x186)]('Invalid\x20Normal\x20Bezier\x20segment\x20'+_0x69e750['pathSegmentIndex']+_0x51802b(0x126)+_0x69e750['entrancePathId']+_0x51802b(0x167)+_0xe4de82+_0x51802b(0xe1));try{_0x69e750[_0x51802b(0xcc)]=_0x69e750[_0x51802b(0xcc)]??gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750[_0x51802b(0xeb)]=_0x69e750[_0x51802b(0xeb)]??ENEMY_TOP_MARGIN+_0x69e750['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x178b92){console[_0x51802b(0x186)](_0x51802b(0xb7)+_0xe4de82+_0x51802b(0x17c),_0x178b92),_0x69e750[_0x51802b(0xcc)]=gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750['targetGridY']=ENEMY_TOP_MARGIN;}_0x69e750['state']=_0x51802b(0xdd),_0x69e750[_0x51802b(0x19c)]=0x0,_0x69e750[_0x51802b(0x8e)]=0x0,_0x69e750['velocityX']=0x0,_0x69e750['velocityY']=0x0;_0x69e750[_0x51802b(0x8d)]!==undefined&&squadronCompletionStatus[_0x69e750[_0x51802b(0x8d)]]&&squadronCompletionStatus[_0x69e750[_0x51802b(0x8d)]][_0x51802b(0x7e)]++;break;}_0x69e750[_0x51802b(0x19c)]+=_0x227826;let _0x5e41d5,_0xea96ef,_0x2b6212=_0x69e750['x'],_0x8a9641=_0x69e750['y'];if(_0x69e750[_0x51802b(0x19c)]>=0x1){_0x69e750['pathT']=0x0,_0x69e750[_0x51802b(0x8e)]++;if(_0x69e750['pathSegmentIndex']>=_0x3b0ad1['length']){let _0x23e110,_0x3cd29f;try{_0x23e110=calculateBezierPoint(0x1,_0x13ccab['p0']['x'],_0x13ccab['p1']['x'],_0x13ccab['p2']['x'],_0x13ccab['p3']['x']),_0x3cd29f=calculateBezierPoint(0x1,_0x13ccab['p0']['y'],_0x13ccab['p1']['y'],_0x13ccab['p2']['y'],_0x13ccab['p3']['y']);}catch(_0x509763){console[_0x51802b(0x186)](_0x51802b(0x13a)+_0xe4de82+_0x51802b(0x15a)+_0x69e750['entrancePathId'],_0x509763),_0x23e110=_0x13ccab['p3']['x'],_0x3cd29f=_0x13ccab['p3']['y'];}_0x69e750['x']=_0x23e110,_0x69e750['y']=_0x3cd29f;try{_0x69e750[_0x51802b(0xcc)]=_0x69e750[_0x51802b(0xcc)]??gameCanvas['width']/0x2,_0x69e750[_0x51802b(0xeb)]=_0x69e750[_0x51802b(0xeb)]??ENEMY_TOP_MARGIN;}catch(_0x21ae30){console['error']('Error\x20getting\x20target\x20grid\x20pos\x20for\x20'+_0xe4de82+_0x51802b(0x15a)+_0x69e750[_0x51802b(0xcd)],_0x21ae30),_0x69e750[_0x51802b(0xcc)]=_0x69e750['x'],_0x69e750[_0x51802b(0xeb)]=ENEMY_TOP_MARGIN+_0x69e750['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x3c76e6=_0x69e750[_0x51802b(0x14f)];_0x69e750[_0x51802b(0x14f)]=_0x51802b(0xdd),_0x69e750[_0x51802b(0x96)]=0x0,_0x69e750['velocityY']=0x0,_0x69e750['pathSegmentIndex']=0x0;_0x3c76e6===_0x51802b(0x1a2)&&_0x69e750[_0x51802b(0x8d)]!==undefined&&squadronCompletionStatus[_0x69e750[_0x51802b(0x8d)]]&&squadronCompletionStatus[_0x69e750[_0x51802b(0x8d)]][_0x51802b(0x7e)]++;break;}else{const _0x1ffe97=_0x3b0ad1[_0x69e750[_0x51802b(0x8e)]];if(_0x1ffe97?.['p0'])_0x5e41d5=_0x1ffe97['p0']['x'],_0xea96ef=_0x1ffe97['p0']['y'];else{console['error']('Invalid\x20next\x20Normal\x20Bezier\x20segment\x20'+_0x69e750[_0x51802b(0x8e)]+_0x51802b(0x126)+_0x69e750['entrancePathId']+'.\x20Enemy\x20'+_0xe4de82+_0x51802b(0xe1));try{_0x69e750[_0x51802b(0xcc)]=_0x69e750['targetGridX']??gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750[_0x51802b(0xeb)]=_0x69e750[_0x51802b(0xeb)]??ENEMY_TOP_MARGIN;}catch(_0x4f7bab){console[_0x51802b(0x186)](_0x51802b(0xb7)+_0xe4de82+_0x51802b(0x137),_0x4f7bab),_0x69e750[_0x51802b(0xcc)]=gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750[_0x51802b(0xeb)]=ENEMY_TOP_MARGIN;}_0x69e750[_0x51802b(0x14f)]=_0x51802b(0xdd),_0x69e750[_0x51802b(0x19c)]=0x0,_0x69e750['pathSegmentIndex']=0x0,_0x69e750[_0x51802b(0x96)]=0x0,_0x69e750['velocityY']=0x0;_0x69e750[_0x51802b(0x8d)]!==undefined&&squadronCompletionStatus[_0x69e750[_0x51802b(0x8d)]]&&squadronCompletionStatus[_0x69e750[_0x51802b(0x8d)]][_0x51802b(0x7e)]++;break;}}}else try{_0x5e41d5=calculateBezierPoint(_0x69e750['pathT'],_0x13ccab['p0']['x'],_0x13ccab['p1']['x'],_0x13ccab['p2']['x'],_0x13ccab['p3']['x']),_0xea96ef=calculateBezierPoint(_0x69e750[_0x51802b(0x19c)],_0x13ccab['p0']['y'],_0x13ccab['p1']['y'],_0x13ccab['p2']['y'],_0x13ccab['p3']['y']);}catch(_0x5f1646){console[_0x51802b(0x186)](_0x51802b(0xae)+_0xe4de82+':',_0x5f1646);try{_0x69e750[_0x51802b(0xcc)]=_0x69e750[_0x51802b(0xcc)]??gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750[_0x51802b(0xeb)]=_0x69e750[_0x51802b(0xeb)]??ENEMY_TOP_MARGIN;}catch(_0x3e281e){console['error'](_0x51802b(0xb7)+_0xe4de82+_0x51802b(0x175),_0x3e281e),_0x69e750['targetGridX']=gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750[_0x51802b(0xeb)]=ENEMY_TOP_MARGIN;}_0x69e750['state']=_0x51802b(0xdd),_0x69e750[_0x51802b(0x19c)]=0x0,_0x69e750[_0x51802b(0x8e)]=0x0,_0x69e750[_0x51802b(0x96)]=0x0,_0x69e750[_0x51802b(0xf1)]=0x0;_0x69e750[_0x51802b(0x8d)]!==undefined&&squadronCompletionStatus[_0x69e750[_0x51802b(0x8d)]]&&squadronCompletionStatus[_0x69e750[_0x51802b(0x8d)]][_0x51802b(0x7e)]++;break;}if(_0x69e750&&_0x69e750[_0x51802b(0x14f)]===_0x51802b(0x1a2)){if(isNaN(_0x5e41d5)||isNaN(_0xea96ef)){console[_0x51802b(0x186)](_0x51802b(0x73)+_0xe4de82+_0x51802b(0xe1));try{_0x69e750[_0x51802b(0xcc)]=_0x69e750[_0x51802b(0xcc)]??gameCanvas['width']/0x2,_0x69e750[_0x51802b(0xeb)]=_0x69e750['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x454ec3){console['error'](_0x51802b(0xb7)+_0xe4de82+_0x51802b(0xfb),_0x454ec3),_0x69e750[_0x51802b(0xcc)]=gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750['targetGridY']=ENEMY_TOP_MARGIN;}_0x69e750[_0x51802b(0x14f)]='moving_to_grid',_0x69e750[_0x51802b(0x19c)]=0x0,_0x69e750['pathSegmentIndex']=0x0,_0x69e750[_0x51802b(0x96)]=0x0,_0x69e750[_0x51802b(0xf1)]=0x0,_0x69e750[_0x51802b(0x8d)]!==undefined&&squadronCompletionStatus[_0x69e750[_0x51802b(0x8d)]]&&squadronCompletionStatus[_0x69e750['squadronId']][_0x51802b(0x7e)]++;}else{let _0x2d6600=_0x5e41d5;const _0x848d17=currentWavePatternIndex===0x1&&(_0x69e750[_0x51802b(0x8d)]===0x2||_0x69e750[_0x51802b(0x8d)]===0x3),_0x1c4257=typeof _0x69e750['squadronEnemyIndex']===_0x51802b(0xcf)&&_0x69e750[_0x51802b(0x11a)]%0x2!==0x0;if(_0x848d17&&_0x1c4257){const _0x5b72ae=_0x29670f+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x2d6600=_0x5e41d5+_0x5b72ae;}_0x69e750[_0x51802b(0x96)]=_0x2d6600-_0x2b6212,_0x69e750['velocityY']=_0xea96ef-_0x8a9641,_0x69e750['x']=_0x2d6600,_0x69e750['y']=_0xea96ef;}}break;}case _0x51802b(0xdd):{if(_0x69e750[_0x51802b(0xcc)]==null||_0x69e750[_0x51802b(0xeb)]==null){console['warn'](_0x51802b(0xdf)+_0xe4de82+_0x51802b(0x192));try{const {x:_0x3481e2,y:_0x343a22}=getCurrentGridSlotPosition(_0x69e750[_0x51802b(0x138)],_0x69e750[_0x51802b(0xf4)],_0x29670f);_0x69e750[_0x51802b(0xcc)]=_0x3481e2,_0x69e750[_0x51802b(0xeb)]=_0x343a22;}catch(_0x9d2936){console[_0x51802b(0x186)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0xe4de82+_0x51802b(0xf5),_0x9d2936),_0x69e750[_0x51802b(0x14f)]=_0x51802b(0x80),_0x69e750['x']=gameCanvas['width']/0x2,_0x69e750['y']=ENEMY_TOP_MARGIN;break;}}const _0x25d4c5=_0x69e750['targetGridX'],_0x22ed60=_0x69e750[_0x51802b(0xeb)],_0x3349cf=_0x25d4c5-_0x69e750['x'],_0x43b694=_0x22ed60-_0x69e750['y'],_0x10ee6c=Math[_0x51802b(0x160)](_0x3349cf*_0x3349cf+_0x43b694*_0x43b694),_0x498bf0=ENTRANCE_SPEED*1.2,_0x4aec1d=_0x498bf0*0.5;if(_0x10ee6c>_0x4aec1d)_0x69e750[_0x51802b(0x96)]=_0x3349cf/_0x10ee6c*_0x498bf0,_0x69e750[_0x51802b(0xf1)]=_0x43b694/_0x10ee6c*_0x498bf0,_0x69e750['x']+=_0x69e750[_0x51802b(0x96)],_0x69e750['y']+=_0x69e750[_0x51802b(0xf1)];else{_0x69e750['x']=_0x25d4c5,_0x69e750['y']=_0x22ed60,_0x69e750['velocityX']=0x0,_0x69e750['velocityY']=0x0;const _0x270bc6=_0x69e750[_0x51802b(0x14f)];_0x69e750[_0x51802b(0x14f)]=_0x51802b(0x80),_0x69e750['justReturned']=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(_0x51802b(0x191),!![],0.1));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x78ef09,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date['now'](),firstEnemyLanded=!![]);if(_0x270bc6===_0x51802b(0xdd)&&!isChallengingStage&&!isFullGridWave&&_0x69e750[_0x51802b(0x8d)]!==undefined){const _0x236a2c=_0x69e750['squadronId'],_0xe12d6d=squadronCompletionStatus[_0x236a2c];if(_0xe12d6d&&!_0xe12d6d[_0x51802b(0x87)]){const _0x38d35b=enemies['every'](_0x51b26=>{const _0x2691ba=_0x51802b;if(_0x51b26&&_0x51b26['squadronId']===_0x236a2c)return _0x51b26[_0x2691ba(0x14f)]===_0x2691ba(0x80)||!enemies[_0x2691ba(0x181)](_0x2d50b4=>_0x2d50b4['id']===_0x51b26['id']);return!![];});if(_0x38d35b){_0xe12d6d['hasFiredPostLanding']=!![];const _0x3984fa=enemies[_0x51802b(0xd2)](_0x584abf=>_0x584abf&&_0x584abf[_0x51802b(0x8d)]===_0x236a2c&&_0x584abf[_0x51802b(0x14f)]===_0x51802b(0x80)&&(_0x584abf[_0x51802b(0x19d)]===ENEMY2_TYPE||_0x584abf[_0x51802b(0x19d)]===ENEMY3_TYPE)&&!(_0x584abf[_0x51802b(0x19d)]===ENEMY3_TYPE&&_0x584abf[_0x51802b(0x19f)]));if(_0x3984fa['length']>0x0){const _0x41af9a=_0x3984fa[Math[_0x51802b(0x119)](Math[_0x51802b(0x107)]()*_0x3984fa[_0x51802b(0xbb)])],_0x50607e=_0x41af9a['id'],_0xd76918=0xc8+Math['random']()*0x190,_0x1d243f=setTimeout(()=>{const _0x285f48=_0x51802b;try{const _0x517105=enemySpawnTimeouts[_0x285f48(0x11e)](_0x1d243f);if(_0x517105>-0x1)enemySpawnTimeouts['splice'](_0x517105,0x1);if(isPaused||!isInGameState||playerLives<=0x0&&(!isTwoPlayerMode||player1Lives<=0x0&&player2Lives<=0x0)||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x77a171=enemies[_0x285f48(0x152)](_0x8f8fc8=>_0x8f8fc8&&_0x8f8fc8['id']===_0x50607e);_0x77a171&&_0x77a171['state']==='in_grid'&&(createBulletSimple(_0x77a171)&&(playSound('enemyShootSound',![],0.4),_0x77a171[_0x285f48(0x148)]=Date['now']()));}catch(_0x473b00){console[_0x285f48(0x186)]('Error\x20during\x20post-landing\x20fire\x20for\x20'+_0x50607e+':',_0x473b00);}},_0xd76918);enemySpawnTimeouts[_0x51802b(0xc9)](_0x1d243f);}}}}}break;}case _0x51802b(0x80):{try{const _0x49a5be=_0x69e750['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x69e750[_0x51802b(0x19d)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x424e91,y:_0xb5b0d2}=getCurrentGridSlotPosition(_0x69e750['gridRow'],_0x69e750['gridCol'],_0x49a5be);typeof _0x424e91===_0x51802b(0xcf)&&!isNaN(_0x424e91)&&(_0x69e750['x']=_0x424e91),typeof _0xb5b0d2===_0x51802b(0xcf)&&!isNaN(_0xb5b0d2)&&(_0x69e750['y']=_0xb5b0d2),_0x69e750[_0x51802b(0xcc)]=_0x424e91,_0x69e750[_0x51802b(0xeb)]=_0xb5b0d2;}catch(_0x1867ea){console[_0x51802b(0x186)](_0x51802b(0x164)+_0x69e750['id']+':',_0x1867ea);}_0x69e750[_0x51802b(0x96)]=_0x13b92d?_0x16451f:0x0,_0x69e750['velocityY']=0x0;_0x69e750[_0x51802b(0x19d)]===ENEMY3_TYPE&&_0x69e750[_0x51802b(0x19f)]&&_0x69e750['capturedShipDimensions']&&(_0x69e750[_0x51802b(0x1a6)]=_0x69e750['x']+CAPTURED_SHIP_OFFSET_X,_0x69e750[_0x51802b(0x172)]=_0x69e750['y']+CAPTURED_SHIP_OFFSET_Y);break;}case _0x51802b(0x109):{_0x69e750[_0x51802b(0x96)]=0x0,_0x69e750[_0x51802b(0xf1)]=0x0;break;}case'preparing_capture':{_0x69e750[_0x51802b(0x96)]=0x0,_0x69e750['velocityY']=0x0;break;}case'diving_to_capture_position':{let _0x549121=isTwoPlayerMode&&selectedGameMode===_0x51802b(0xed)?isPlayer1ShipCaptured||isPlayer2ShipCaptured:isShipCaptured;if(_0x549121){_0x69e750[_0x51802b(0x14f)]=_0x51802b(0x18d);try{const {x:_0x41dd76,y:_0x47b2da}=getCurrentGridSlotPosition(_0x69e750[_0x51802b(0x138)],_0x69e750['gridCol'],_0x29670f);_0x69e750[_0x51802b(0xcc)]=_0x41dd76,_0x69e750[_0x51802b(0xeb)]=_0x47b2da;}catch(_0x16938c){console[_0x51802b(0x186)](_0x51802b(0xd5)+_0x69e750['id']+':',_0x16938c),_0x69e750[_0x51802b(0xcc)]=gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0x2cd1fa=_0x69e750[_0x51802b(0xa3)],_0x37b0de=_0x69e750[_0x51802b(0x90)];if(_0x2cd1fa==null||_0x37b0de==null){console[_0x51802b(0x186)]('Boss\x20'+_0x69e750['id']+_0x51802b(0x173)),_0x69e750[_0x51802b(0x14f)]=_0x51802b(0x18d);try{const {x:_0x11b74a,y:_0x1baf98}=getCurrentGridSlotPosition(_0x69e750[_0x51802b(0x138)],_0x69e750[_0x51802b(0xf4)],_0x29670f);_0x69e750[_0x51802b(0xcc)]=_0x11b74a,_0x69e750['targetGridY']=_0x1baf98;}catch(_0xc7a12e){console[_0x51802b(0x186)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20'+_0x69e750['id']+':',_0xc7a12e),_0x69e750[_0x51802b(0xcc)]=gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750[_0x51802b(0xeb)]=ENEMY_TOP_MARGIN;}break;}const _0x1597d8=_0x2cd1fa-_0x69e750['x'],_0x2df662=_0x37b0de-_0x69e750['y'],_0x5c2579=Math[_0x51802b(0x160)](_0x1597d8*_0x1597d8+_0x2df662*_0x2df662),_0x1e48e6=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x4c592d=_0x1e48e6*0.6;_0x5c2579>_0x4c592d?(_0x69e750[_0x51802b(0x96)]=_0x1597d8/_0x5c2579*_0x1e48e6,_0x69e750[_0x51802b(0xf1)]=_0x2df662/_0x5c2579*_0x1e48e6,_0x69e750['x']+=_0x69e750[_0x51802b(0x96)],_0x69e750['y']+=_0x69e750['velocityY']):(_0x69e750['x']=_0x2cd1fa,_0x69e750['y']=_0x37b0de,_0x69e750[_0x51802b(0x96)]=0x0,_0x69e750[_0x51802b(0xf1)]=0x0,_0x69e750[_0x51802b(0x14f)]=_0x51802b(0x133),_0x69e750[_0x51802b(0x183)]=_0x78ef09,capturingBossId=_0x69e750['id'],captureBeamActive=!![],captureBeamSource={'x':_0x69e750['x']+_0x29670f/0x2,'y':_0x69e750['y']+_0x467e3a},captureBeamTargetY=_0x69e750['y'],captureBeamProgress=0x0,playSound(_0x51802b(0x193),![],0.6),_0x69e750[_0x51802b(0x79)]&&(captureAttemptMadeThisLevel=!![],delete _0x69e750[_0x51802b(0x79)]));break;}case _0x51802b(0x133):{_0x69e750[_0x51802b(0x96)]=0x0,_0x69e750[_0x51802b(0xf1)]=0x0;_0x69e750['isPreparingForImmediateCapture']&&!captureAttemptMadeThisLevel&&(captureAttemptMadeThisLevel=!![],delete _0x69e750['isPreparingForImmediateCapture']);let _0x53d6ce=![];isTwoPlayerMode&&selectedGameMode===_0x51802b(0xed)?_0x53d6ce=isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x69e750['id']||isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x69e750['id']:_0x53d6ce=isShipCaptured&&capturedBossIdWithMessage===_0x69e750['id'];if(_0x53d6ce){captureBeamActive=![];if(capturingBossId===_0x69e750['id'])capturingBossId=null;_0x69e750[_0x51802b(0x14f)]=_0x51802b(0x18d),stopSound(_0x51802b(0x193));break;}const _0x31d7ad=_0x78ef09-_0x69e750['captureStartTime'],_0x28e1de=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x21fbdc=CAPTURE_BEAM_DURATION_MS;if(_0x31d7ad<_0x28e1de)captureBeamProgress=_0x31d7ad/_0x28e1de;else{if(_0x31d7ad<_0x21fbdc-_0x28e1de)captureBeamProgress=0x1;else{if(_0x31d7ad<_0x21fbdc)captureBeamProgress=0x1-(_0x31d7ad-(_0x21fbdc-_0x28e1de))/_0x28e1de;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound('captureSound'),_0x69e750['state']=_0x51802b(0x177),_0x69e750[_0x51802b(0x114)]=generateAttackPathInternal(_0x69e750),_0x69e750[_0x51802b(0x15b)]=0x0,_0x69e750['attackPathT']=0x0,_0x69e750['speed']=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x69e750[_0x51802b(0x148)]=0x0,_0x69e750[_0x51802b(0x92)]=!![],_0x69e750[_0x51802b(0x1a1)]=0x0,_0x69e750[_0x51802b(0x76)]=null;break;}}}captureBeamProgress=Math[_0x51802b(0x12c)](0x0,Math[_0x51802b(0x99)](0x1,captureBeamProgress));if(captureBeamActive&&captureBeamProgress>=0.95){const _0x527373=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x34d326=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x31bdb1=_0x69e750['x']+_0x29670f/0x2,_0x3dc2b7=_0x69e750['y']+_0x467e3a,_0x4caeec=gameCanvas[_0x51802b(0x74)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x57d715=Math[_0x51802b(0x12c)](_0x527373,_0x34d326),_0x470dd0=_0x31bdb1-_0x57d715/0x2,_0x3f7ba3=_0x3dc2b7,_0x1a2be=_0x4caeec-_0x3dc2b7;if(_0x1a2be>0x0){const _0x299b2c={'x':_0x470dd0,'y':_0x3f7ba3,'width':_0x57d715,'height':_0x1a2be};let _0x2b17c9=null,_0x27c181=0x0;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&checkCollision(ship1,_0x299b2c))_0x2b17c9=ship1,_0x27c181=0x1;else ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&checkCollision(ship2,_0x299b2c)&&(_0x2b17c9=ship2,_0x27c181=0x2);}else ship&&playerLives>0x0&&!isShipCaptured&&checkCollision(ship,_0x299b2c)&&(_0x2b17c9=ship,_0x27c181=currentPlayer);if(_0x2b17c9){_0x69e750['capturedShipDimensions']={'width':_0x2b17c9[_0x51802b(0xaa)],'height':_0x2b17c9[_0x51802b(0x74)]},_0x69e750['hasCapturedShip']=!![],stopSound('captureSound'),_0x69e750[_0x51802b(0x14f)]='showing_capture_message',_0x69e750['targetGridX']=null,_0x69e750[_0x51802b(0xeb)]=null,_0x69e750['initialCaptureAnimationY']=_0x2b17c9['y'],_0x69e750[_0x51802b(0x17b)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x78ef09,capturedBossIdWithMessage=_0x69e750['id'],playSound(_0x51802b(0x15f),![],0.3),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,handlePlayerShipCollision(_0x27c181,![],_0x78ef09,!![]);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x51802b(0xa7))&&aiPlayerActivelySeekingCaptureById)aiPlayerActivelySeekingCaptureById=null;break;}}}break;}case _0x51802b(0xb5):{_0x69e750['velocityX']=0x0,_0x69e750[_0x51802b(0xf1)]=0x0;if(_0x69e750[_0x51802b(0x19f)]&&_0x69e750[_0x51802b(0x179)]&&typeof _0x69e750[_0x51802b(0x116)]===_0x51802b(0xcf)){const _0x13eaca=_0x78ef09-captureMessageStartTime,_0x4d77c7=Math[_0x51802b(0x99)](0x1,_0x13eaca/CAPTURE_MESSAGE_DURATION),_0x4f9167=_0x69e750['y']+CAPTURED_SHIP_OFFSET_Y,_0x546903=_0x69e750[_0x51802b(0x116)];_0x69e750[_0x51802b(0x172)]=_0x546903+(_0x4f9167-_0x546903)*_0x4d77c7,_0x69e750['capturedShipX']=_0x69e750['x']+CAPTURED_SHIP_OFFSET_X;}else _0x69e750[_0x51802b(0x1a6)]=_0x69e750['x']+CAPTURED_SHIP_OFFSET_X,_0x69e750['capturedShipY']=_0x69e750['y']+CAPTURED_SHIP_OFFSET_Y;break;}case _0x51802b(0x177):{if(isEntrancePhaseActive)break;const _0x3ef09a=_0x69e750[_0x51802b(0x114)],_0x762aa8=3.8;if(!_0x3ef09a||_0x3ef09a[_0x51802b(0xbb)]===0x0){console[_0x51802b(0x186)](_0x51802b(0xdf)+_0xe4de82+_0x51802b(0x1a3)),_0x69e750[_0x51802b(0x14f)]='returning';try{const {x:_0x1e74ad,y:_0x51794d}=getCurrentGridSlotPosition(_0x69e750['gridRow'],_0x69e750[_0x51802b(0xf4)],_0x29670f);_0x69e750[_0x51802b(0xcc)]=_0x1e74ad,_0x69e750['targetGridY']=_0x51794d;}catch(_0x3d64a7){console[_0x51802b(0x186)](_0x51802b(0x11f)+_0xe4de82+_0x51802b(0x171),_0x3d64a7),_0x69e750[_0x51802b(0xcc)]=gameCanvas['width']/0x2,_0x69e750[_0x51802b(0xeb)]=ENEMY_TOP_MARGIN;}break;}if(_0x69e750['attackPathSegmentIndex']>=_0x3ef09a[_0x51802b(0xbb)]){console[_0x51802b(0x197)](_0x51802b(0xdf)+_0xe4de82+_0x51802b(0xec)+_0x69e750[_0x51802b(0x15b)]+_0x51802b(0x151)+_0x3ef09a[_0x51802b(0xbb)]+_0x51802b(0xd6)),_0x69e750[_0x51802b(0x14f)]=_0x51802b(0x18d);try{const {x:_0x39be75,y:_0x40c84a}=getCurrentGridSlotPosition(_0x69e750[_0x51802b(0x138)],_0x69e750[_0x51802b(0xf4)],_0x29670f);_0x69e750[_0x51802b(0xcc)]=_0x39be75,_0x69e750[_0x51802b(0xeb)]=_0x40c84a;}catch(_0x3a99f2){console[_0x51802b(0x186)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0xe4de82+_0x51802b(0x115),_0x3a99f2),_0x69e750[_0x51802b(0xcc)]=gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0x545757=_0x3ef09a[_0x69e750[_0x51802b(0x15b)]];if(!_0x545757||!_0x545757['p0']||!_0x545757['p1']||!_0x545757['p2']||!_0x545757['p3']){console[_0x51802b(0x186)](_0x51802b(0xdf)+_0xe4de82+_0x51802b(0x18c)+_0x69e750[_0x51802b(0x15b)]+_0x51802b(0x10a)),_0x69e750[_0x51802b(0x14f)]=_0x51802b(0x18d);try{const {x:_0x4a5007,y:_0x5f25dd}=getCurrentGridSlotPosition(_0x69e750[_0x51802b(0x138)],_0x69e750[_0x51802b(0xf4)],_0x29670f);_0x69e750[_0x51802b(0xcc)]=_0x4a5007,_0x69e750['targetGridY']=_0x5f25dd;}catch(_0x335c3f){console[_0x51802b(0x186)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0xe4de82+'\x20(invalid\x20attack\x20segment):',_0x335c3f),_0x69e750[_0x51802b(0xcc)]=gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750[_0x51802b(0xeb)]=ENEMY_TOP_MARGIN;}break;}const _0xfa3382=_0x69e750['speed']/0x3e8*_0x762aa8;_0x69e750[_0x51802b(0x117)]+=_0xfa3382;let _0x1b9e40,_0x349750;const _0x405ed9=_0x69e750['x'],_0x4c67e0=_0x69e750['y'];if(_0x69e750[_0x51802b(0x117)]>=0x1){try{_0x1b9e40=calculateBezierPoint(0x1,_0x545757['p0']['x'],_0x545757['p1']['x'],_0x545757['p2']['x'],_0x545757['p3']['x']),_0x349750=calculateBezierPoint(0x1,_0x545757['p0']['y'],_0x545757['p1']['y'],_0x545757['p2']['y'],_0x545757['p3']['y']);}catch(_0x398b0a){console[_0x51802b(0x186)](_0x51802b(0xbe)+_0x69e750['id']+':',_0x398b0a),_0x1b9e40=_0x69e750['x'],_0x349750=_0x69e750['y'],_0x69e750[_0x51802b(0x14f)]=_0x51802b(0x18d);try{const {x:_0xbd1caf,y:_0x13666b}=getCurrentGridSlotPosition(_0x69e750[_0x51802b(0x138)],_0x69e750[_0x51802b(0xf4)],_0x29670f);_0x69e750[_0x51802b(0xcc)]=_0xbd1caf,_0x69e750[_0x51802b(0xeb)]=_0x13666b;}catch(_0x7dd612){console[_0x51802b(0x186)](_0x51802b(0x1a5)+_0x69e750['id']+':',_0x7dd612),_0x69e750[_0x51802b(0xcc)]=gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750[_0x51802b(0xeb)]=ENEMY_TOP_MARGIN;}break;}_0x69e750[_0x51802b(0x117)]=0x0,_0x69e750[_0x51802b(0x15b)]++;if(_0x69e750[_0x51802b(0x15b)]>=_0x3ef09a[_0x51802b(0xbb)]){_0x69e750[_0x51802b(0x14f)]=_0x51802b(0x18d),_0x69e750[_0x51802b(0x148)]=0x0,_0x69e750[_0x51802b(0x1a1)]=0x0,_0x69e750['attackGroupId']=null;try{const {x:_0x6fb77a,y:_0x826eac}=getCurrentGridSlotPosition(_0x69e750[_0x51802b(0x138)],_0x69e750['gridCol'],_0x29670f);_0x69e750[_0x51802b(0xcc)]=_0x6fb77a,_0x69e750['targetGridY']=_0x826eac;}catch(_0x4999f1){console[_0x51802b(0x186)](_0x51802b(0x11f)+_0xe4de82+_0x51802b(0xea),_0x4999f1),_0x69e750[_0x51802b(0xcc)]=gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750[_0x51802b(0xeb)]=ENEMY_TOP_MARGIN;}}else{const _0x5cdb0e=_0x3ef09a[_0x69e750[_0x51802b(0x15b)]];if(!_0x5cdb0e?.['p0']){console[_0x51802b(0x186)](_0x51802b(0xdf)+_0xe4de82+_0x51802b(0x12d)+_0x69e750[_0x51802b(0x15b)]+_0x51802b(0x10a)),_0x1b9e40=_0x69e750['x'],_0x349750=_0x69e750['y'],_0x69e750[_0x51802b(0x14f)]=_0x51802b(0x18d);try{const {x:_0x5b56d6,y:_0x304a79}=getCurrentGridSlotPosition(_0x69e750[_0x51802b(0x138)],_0x69e750['gridCol'],_0x29670f);_0x69e750[_0x51802b(0xcc)]=_0x5b56d6,_0x69e750['targetGridY']=_0x304a79;}catch(_0x296ffb){console['error'](_0x51802b(0x14e)+_0x69e750['id']+':',_0x296ffb),_0x69e750[_0x51802b(0xcc)]=gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750[_0x51802b(0xeb)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0x1b9e40=calculateBezierPoint(_0x69e750['attackPathT'],_0x545757['p0']['x'],_0x545757['p1']['x'],_0x545757['p2']['x'],_0x545757['p3']['x']),_0x349750=calculateBezierPoint(_0x69e750[_0x51802b(0x117)],_0x545757['p0']['y'],_0x545757['p1']['y'],_0x545757['p2']['y'],_0x545757['p3']['y']);}catch(_0xfd5641){console[_0x51802b(0x186)](_0x51802b(0x110)+_0x69e750['id']+':',_0xfd5641),_0x1b9e40=_0x69e750['x'],_0x349750=_0x69e750['y'],_0x69e750[_0x51802b(0x14f)]=_0x51802b(0x18d);try{const {x:_0x4eaf25,y:_0xf4d61}=getCurrentGridSlotPosition(_0x69e750[_0x51802b(0x138)],_0x69e750[_0x51802b(0xf4)],_0x29670f);_0x69e750['targetGridX']=_0x4eaf25,_0x69e750[_0x51802b(0xeb)]=_0xf4d61;}catch(_0x1d8447){console[_0x51802b(0x186)]('Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20'+_0x69e750['id']+':',_0x1d8447),_0x69e750[_0x51802b(0xcc)]=gameCanvas['width']/0x2,_0x69e750[_0x51802b(0xeb)]=ENEMY_TOP_MARGIN;}break;}if(_0x69e750&&_0x69e750[_0x51802b(0x14f)]===_0x51802b(0x177)){const _0x67f2dd=_0x69e750['attackFormationOffsetX']||0x0,_0x7f17e5=_0x1b9e40+_0x67f2dd,_0x4467b8=_0x349750;_0x69e750[_0x51802b(0x96)]=_0x7f17e5-_0x405ed9,_0x69e750[_0x51802b(0xf1)]=_0x4467b8-_0x4c67e0,_0x69e750['x']=_0x7f17e5,_0x69e750['y']=_0x4467b8;if(_0x69e750['y']>gameCanvas[_0x51802b(0x74)]+_0x467e3a*1.5){_0x69e750['state']='returning',_0x69e750[_0x51802b(0x15b)]=0x0,_0x69e750[_0x51802b(0x117)]=0x0,_0x69e750['lastFiredTime']=0x0,_0x69e750[_0x51802b(0x1a1)]=0x0,_0x69e750[_0x51802b(0x76)]=null,_0x69e750['y']=-_0x467e3a*(1.1+Math[_0x51802b(0x107)]()*0.4),_0x69e750['x']=Math[_0x51802b(0x107)]()*(gameCanvas[_0x51802b(0xaa)]-_0x29670f),_0x69e750['velocityX']=0x0,_0x69e750['velocityY']=0x0;try{const {x:_0x28b10c,y:_0x322694}=getCurrentGridSlotPosition(_0x69e750['gridRow'],_0x69e750[_0x51802b(0xf4)],_0x29670f);_0x69e750[_0x51802b(0xcc)]=_0x28b10c,_0x69e750[_0x51802b(0xeb)]=_0x322694;}catch(_0x4c23a5){console[_0x51802b(0x186)](_0x51802b(0x11f)+_0xe4de82+_0x51802b(0xa2),_0x4c23a5),_0x69e750['targetGridX']=gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750[_0x51802b(0xeb)]=ENEMY_TOP_MARGIN;}}}break;}case _0x51802b(0x18d):{if(isEntrancePhaseActive)break;if(_0x69e750[_0x51802b(0xcc)]==null||_0x69e750[_0x51802b(0xeb)]==null){console['warn'](_0x51802b(0xdf)+_0xe4de82+'\x20returning\x20without\x20target\x20coords.\x20Recalculating.');try{const {x:_0x489031,y:_0xb1a58}=getCurrentGridSlotPosition(_0x69e750['gridRow'],_0x69e750[_0x51802b(0xf4)],_0x29670f);_0x69e750[_0x51802b(0xcc)]=_0x489031,_0x69e750['targetGridY']=_0xb1a58;}catch(_0x5df318){console['error'](_0x51802b(0xb7)+_0xe4de82+'\x20in\x20returning',_0x5df318),_0x69e750['state']=_0x51802b(0x80),_0x69e750['x']=gameCanvas[_0x51802b(0xaa)]/0x2,_0x69e750['y']=ENEMY_TOP_MARGIN;break;}}const _0x146b59=_0x69e750[_0x51802b(0xcc)],_0x436107=_0x69e750[_0x51802b(0xeb)],_0x4889a7=_0x146b59-_0x69e750['x'],_0x464ae3=_0x436107-_0x69e750['y'],_0x3f3e1d=Math[_0x51802b(0x160)](_0x4889a7*_0x4889a7+_0x464ae3*_0x464ae3),_0x166e92=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x28f0ec=BASE_RETURN_SPEED*_0x166e92,_0x1cc468=_0x28f0ec*0.5;_0x3f3e1d>_0x1cc468?(_0x69e750[_0x51802b(0x96)]=_0x4889a7/_0x3f3e1d*_0x28f0ec,_0x69e750[_0x51802b(0xf1)]=_0x464ae3/_0x3f3e1d*_0x28f0ec,_0x69e750['x']+=_0x69e750[_0x51802b(0x96)],_0x69e750['y']+=_0x69e750[_0x51802b(0xf1)]):(_0x69e750['x']=_0x146b59,_0x69e750['y']=_0x436107,_0x69e750['velocityX']=0x0,_0x69e750['velocityY']=0x0,_0x69e750[_0x51802b(0x14f)]=_0x51802b(0x80),_0x69e750[_0x51802b(0x71)]=!![],_0x69e750[_0x51802b(0x1a1)]=0x0,_0x69e750[_0x51802b(0x76)]=null,_0x69e750[_0x51802b(0x16f)](_0x51802b(0xad))&&delete _0x69e750[_0x51802b(0xad)],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound('gridBackgroundSound',!![],0.1)));break;}}if(_0x69e750&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){const _0x1d8772=[_0x51802b(0x177),_0x51802b(0x1a2),_0x51802b(0x100),'diving_to_capture_position'];if(_0x1d8772['includes'](_0x69e750['state'])){let _0x1aab2f=[];if(isTwoPlayerMode&&selectedGameMode===_0x51802b(0xed)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x1aab2f['push']({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x1aab2f[_0x51802b(0xc9)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x1aab2f[_0x51802b(0xc9)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(const _0x5068f9 of _0x1aab2f){const _0x9f44f7=_0x5068f9[_0x51802b(0x14d)],_0x24348b={'x':_0x69e750['x'],'y':_0x69e750['y'],'width':_0x29670f,'height':_0x467e3a},_0x330012={'x':_0x9f44f7['x'],'y':_0x9f44f7['y'],'width':_0x9f44f7[_0x51802b(0xaa)],'height':_0x9f44f7['height']},_0x26b58e=_0x5068f9[_0x51802b(0x154)]?{'x':_0x9f44f7['x']+DUAL_SHIP_OFFSET_X,'y':_0x9f44f7['y'],'width':_0x9f44f7[_0x51802b(0xaa)],'height':_0x9f44f7[_0x51802b(0x74)]}:null;let _0x23e4e0=![],_0x22677b=![];if(checkCollision(_0x24348b,_0x330012))_0x23e4e0=!![];else _0x5068f9[_0x51802b(0x154)]&&_0x26b58e&&checkCollision(_0x24348b,_0x26b58e)&&(_0x23e4e0=!![],_0x22677b=!![]);if(_0x23e4e0){createExplosion(_0x69e750['x']+_0x29670f/0x2,_0x69e750['y']+_0x467e3a/0x2),playSound('lostLifeSound',![],0.6),enemies[_0x51802b(0xa1)](_0x14050c,0x1),_0x69e750=null,handlePlayerShipCollision(_0x5068f9['playerNum'],_0x22677b,_0x78ef09,![]);if(_0x69e750===null)break;}}}}if(!_0x69e750)continue;}if(!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x51802b(0xed)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){let _0x40db6f=[];if(isTwoPlayerMode&&selectedGameMode===_0x51802b(0xed)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x40db6f[_0x51802b(0xc9)]({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x40db6f[_0x51802b(0xc9)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x40db6f[_0x51802b(0xc9)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(let _0x1a41d9=enemyBullets[_0x51802b(0xbb)]-0x1;_0x1a41d9>=0x0;_0x1a41d9--){const _0x5b78c3=enemyBullets[_0x1a41d9];if(!_0x5b78c3){enemyBullets['splice'](_0x1a41d9,0x1);continue;}const _0xe57f6c={'x':_0x5b78c3['x'],'y':_0x5b78c3['y'],'width':_0x5b78c3[_0x51802b(0xaa)],'height':_0x5b78c3['height']};let _0x3b00d5=![];for(const _0x453295 of _0x40db6f){const _0x4637c4=_0x453295['shipObj'],_0x12d997={'x':_0x4637c4['x'],'y':_0x4637c4['y'],'width':_0x4637c4[_0x51802b(0xaa)],'height':_0x4637c4[_0x51802b(0x74)]},_0x1e41f4=_0x453295[_0x51802b(0x154)]?{'x':_0x4637c4['x']+DUAL_SHIP_OFFSET_X,'y':_0x4637c4['y'],'width':_0x4637c4['width'],'height':_0x4637c4['height']}:null;let _0x4d355f=![],_0x3dc59d=![];if(checkCollision(_0xe57f6c,_0x12d997))_0x4d355f=!![];else _0x453295['dual']&&_0x1e41f4&&checkCollision(_0xe57f6c,_0x1e41f4)&&(_0x4d355f=!![],_0x3dc59d=!![]);if(_0x4d355f){playSound(_0x51802b(0x83),![],0.6),handlePlayerShipCollision(_0x453295[_0x51802b(0x7d)],_0x3dc59d,_0x78ef09,![]),enemyBullets[_0x51802b(0xa1)](_0x1a41d9,0x1),_0x3b00d5=!![];break;}}if(_0x3b00d5)continue;}}updateHitSparks();}catch(_0x3ecadf){console['error'](_0x51802b(0xa4),_0x3ecadf,_0x3ecadf[_0x51802b(0x13f)]),isGridSoundPlaying=![],stopSound(_0x51802b(0x191)),isEntrancePhaseActive=![],stopSound(_0x51802b(0x84)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x51802b(0x193)),stopSound('shipCapturedSound'),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x51802b(0x78))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert('Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.');}}function handlePlayerShipCollision(_0x12d111,_0x5dc91e,_0x3ca105,_0x53e98b=![]){const _0x1cf756=_0x1d45a4,_0x4048f4=_0x3ca105,_0x1d0141=gameCanvas?gameCanvas[_0x1cf756(0x74)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;let _0x49f0df=0x0,_0x526c02=null;if(isTwoPlayerMode&&selectedGameMode===_0x1cf756(0xed)){_0x526c02=_0x12d111===0x1?ship1:ship2;if(_0x526c02){_0x49f0df=_0x526c02['x'];if(_0x53e98b){if(_0x12d111===0x1)player1CaptureRespawnX=_0x526c02['x'];else{if(_0x12d111===0x2)player2CaptureRespawnX=_0x526c02['x'];}}}else{if(_0x12d111===0x1&&typeof player1CaptureRespawnX===_0x1cf756(0xcf)&&player1CaptureRespawnX!==0x0)_0x49f0df=player1CaptureRespawnX;else{if(_0x12d111===0x2&&typeof player2CaptureRespawnX===_0x1cf756(0xcf)&&player2CaptureRespawnX!==0x0)_0x49f0df=player2CaptureRespawnX;else{if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&gameCanvas)_0x49f0df=_0x12d111===0x1?gameCanvas[_0x1cf756(0xaa)]/0x2-gameCanvas[_0x1cf756(0xaa)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2:gameCanvas[_0x1cf756(0xaa)]/0x2+gameCanvas[_0x1cf756(0xaa)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;else gameCanvas?_0x49f0df=gameCanvas[_0x1cf756(0xaa)]/0x2-SHIP_WIDTH/0x2:_0x49f0df=0xc8;}}}}else{_0x526c02=ship;if(_0x526c02)_0x49f0df=_0x526c02['x'],_0x53e98b&&(capturedShipRespawnX_NormalMode=ship['x']);else _0x53e98b&&capturedShipRespawnX_NormalMode!==0x0?_0x49f0df=capturedShipRespawnX_NormalMode:_0x49f0df=gameCanvas?gameCanvas[_0x1cf756(0xaa)]/0x2-SHIP_WIDTH/0x2:0xc8;}if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x12d111===0x1){if(_0x53e98b){isPlayer1ShipCaptured=!![],player1IsDualShipActive=![],player1Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1cf756(0xa7))coopPartner1CapturedTime=_0x4048f4;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x4048f4,playSound('gameOverSound',![],0.4),ship1=null,player1NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies[_0x1cf756(0x152)](_0x394bc2=>_0x394bc2['id']===capturedBossIdWithMessage)){const _0x3f52b9=enemies[_0x1cf756(0x152)](_0x2fe859=>_0x2fe859['id']===capturedBossIdWithMessage);_0x3f52b9&&(_0x3f52b9[_0x1cf756(0x19f)]=![],_0x3f52b9[_0x1cf756(0x179)]=null);}}else player1NeedsRespawnAfterCapture=!![],ship1=null;}else{if(player1IsDualShipActive&&ship1){player1IsDualShipActive=![];const _0x4044ff=_0x5dc91e?ship1['x']+DUAL_SHIP_OFFSET_X+ship1[_0x1cf756(0xaa)]/0x2:ship1['x']+ship1[_0x1cf756(0xaa)]/0x2;createExplosion(_0x4044ff,ship1['y']+ship1[_0x1cf756(0x74)]/0x2),ship1['x']=_0x49f0df,ship1['y']=_0x1d0141,ship1[_0x1cf756(0xa3)]=ship1['x'],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x4048f4+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x4048f4+RESPAWN_DELAY_MS;}else{if(ship1)createExplosion(ship1['x']+ship1['width']/0x2,ship1['y']+ship1[_0x1cf756(0x74)]/0x2);player1Lives--;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x4048f4,playSound(_0x1cf756(0x162),![],0.4),ship1=null;if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;}else isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x4048f4+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x4048f4+RESPAWN_DELAY_MS,ship1?(ship1['x']=_0x49f0df,ship1['y']=_0x1d0141,ship1['targetX']=ship1['x']):ship1={'x':_0x49f0df,'y':_0x1d0141,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x49f0df,'id':'p1'};}}}else{if(_0x12d111===0x2){if(_0x53e98b){isPlayer2ShipCaptured=!![],player2IsDualShipActive=![],player2Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1cf756(0xa7))coopPartner2CapturedTime=_0x4048f4;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x4048f4,playSound(_0x1cf756(0x162),![],0.4),ship2=null,player2NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x1cf756(0x75))aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies['find'](_0x5ebbe9=>_0x5ebbe9['id']===capturedBossIdWithMessage)){const _0xd77604=enemies[_0x1cf756(0x152)](_0x508729=>_0x508729['id']===capturedBossIdWithMessage);_0xd77604&&(_0xd77604['hasCapturedShip']=![],_0xd77604[_0x1cf756(0x179)]=null);}}else player2NeedsRespawnAfterCapture=!![],ship2=null;}else{if(player2IsDualShipActive&&ship2){player2IsDualShipActive=![];const _0x442867=_0x5dc91e?ship2['x']+DUAL_SHIP_OFFSET_X+ship2[_0x1cf756(0xaa)]/0x2:ship2['x']+ship2[_0x1cf756(0xaa)]/0x2;createExplosion(_0x442867,ship2['y']+ship2[_0x1cf756(0x74)]/0x2),ship2['x']=_0x49f0df,ship2['y']=_0x1d0141,ship2[_0x1cf756(0xa3)]=ship2['x'],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x4048f4+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x4048f4+RESPAWN_DELAY_MS;}else{if(ship2)createExplosion(ship2['x']+ship2[_0x1cf756(0xaa)]/0x2,ship2['y']+ship2['height']/0x2);player2Lives--;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x4048f4,playSound(_0x1cf756(0x162),![],0.4),ship2=null;if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById==='ai_p2')aiPlayerActivelySeekingCaptureById=null;}else isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x4048f4+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x4048f4+RESPAWN_DELAY_MS,ship2?(ship2['x']=_0x49f0df,ship2['y']=_0x1d0141,ship2['targetX']=_0x49f0df):ship2={'x':_0x49f0df,'y':_0x1d0141,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x49f0df,'id':'p2'};}}}}player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isDualShipActive&&!_0x53e98b&&_0x526c02){isDualShipActive=![];if(isTwoPlayerMode&&selectedGameMode===_0x1cf756(0x14b)){if(_0x12d111===0x1)player1IsDualShipActive=![];else{if(_0x12d111===0x2)player2IsDualShipActive=![];}}else{if(!isTwoPlayerMode)player1IsDualShipActive=![];}const _0x458a51=_0x5dc91e?_0x49f0df+DUAL_SHIP_OFFSET_X+SHIP_WIDTH/0x2:_0x49f0df+SHIP_WIDTH/0x2;createExplosion(_0x458a51,_0x1d0141+SHIP_HEIGHT/0x2);ship&&(ship['x']=_0x49f0df,ship['y']=_0x1d0141,ship[_0x1cf756(0xa3)]=ship['x']);isInvincible=!![],invincibilityEndTime=_0x4048f4+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x4048f4+RESPAWN_DELAY_MS;if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x1cf756(0x14b)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}else{if(!_0x53e98b&&_0x526c02)createExplosion(_0x49f0df+SHIP_WIDTH/0x2,_0x1d0141+SHIP_HEIGHT/0x2);if(_0x53e98b){isShipCaptured=!![];if(ship)ship=null;}playerLives--;if(playerLives<=0x0){playerLives=0x0;if(isTwoPlayerMode&&selectedGameMode==='normal'){if(_0x12d111===0x1)player1Lives=0x0;else{if(_0x12d111===0x2)player2Lives=0x0;}isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x4048f4,playerWhoIsGameOver=_0x12d111,playSound('gameOverSound',![],0.4);const _0x54b613=_0x12d111===0x1?0x2:0x1,_0x4b5c71=_0x54b613===0x1?player1Lives:player2Lives;_0x4b5c71>0x0?nextActionAfterPlayerGameOver=_0x1cf756(0xe9):nextActionAfterPlayerGameOver=_0x1cf756(0x139);bullets=[],enemyBullets=[],explosions=[];if(!(_0x4b5c71>0x0))ship=null;}else player1Lives=0x0,ship=null,playSound(_0x1cf756(0x162),![],0.4),triggerFinalGameOverSequence();}else{if(isTwoPlayerMode&&selectedGameMode===_0x1cf756(0x14b)){if(_0x12d111===0x1)player1Lives=playerLives;else player2Lives=playerLives;}if(!_0x53e98b){isInvincible=!![],invincibilityEndTime=_0x4048f4+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x4048f4+RESPAWN_DELAY_MS;if(ship&&gameCanvas){ship['x']=_0x49f0df,ship['y']=_0x1d0141,ship[_0x1cf756(0xa3)]=ship['x'];if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x1cf756(0x14b)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}}if(_0x53e98b)isDualShipActive=![];}}}if(!_0x53e98b)fallingShips=[];}function switchPlayerTurn(){const _0x52ed91=_0x1d45a4;if(!isTwoPlayerMode||selectedGameMode==='coop')return![];stopSound(_0x52ed91(0xa6));if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive;if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive;if(player2Score>highScore)highScore=player2Score;}const _0x452c9c=currentPlayer===0x1?0x2:0x1,_0x43186b=_0x452c9c===0x1?player1Lives:player2Lives;if(_0x43186b<=0x0){const _0x3ac23a=currentPlayer===0x1?player1Lives:player2Lives;return _0x3ac23a<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x452c9c,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x3cfacc=_0x1d45a4;if(isPaused||!isInGameState||isChallengingStage||isWaveTransitioning)return;let _0x2b79dd=![];isTwoPlayerMode&&selectedGameMode===_0x3cfacc(0xed)?(player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)&&(_0x2b79dd=!![]):playerLives>0x0&&ship&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(_0x2b79dd=!![]);if(!_0x2b79dd)return;const _0x5d9f98=enemies[_0x3cfacc(0xd2)](_0x5238d4=>_0x5238d4&&_0x5238d4[_0x3cfacc(0x14f)]===_0x3cfacc(0x80));if(_0x5d9f98[_0x3cfacc(0xbb)]===0x0)return;const _0x3fbac7=Date[_0x3cfacc(0x12f)](),_0x13c983=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x3fbac7-lastGridFireCheckTime<_0x13c983)return;lastGridFireCheckTime=_0x3fbac7;const _0x45ebbb=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x5c3e30=Math[_0x3cfacc(0x11d)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x54dd99=0x0;_0x5d9f98[_0x3cfacc(0xa9)](()=>Math[_0x3cfacc(0x107)]()-0.5);for(const _0x236bfc of _0x5d9f98){if(_0x54dd99>=_0x5c3e30)break;if(_0x236bfc[_0x3cfacc(0x19d)]===ENEMY2_TYPE||_0x236bfc[_0x3cfacc(0x19d)]===ENEMY3_TYPE){if(_0x236bfc['type']===ENEMY3_TYPE&&_0x236bfc[_0x3cfacc(0x19f)])continue;Math[_0x3cfacc(0x107)]()<_0x45ebbb&&(createBulletSimple(_0x236bfc)&&(playSound(_0x3cfacc(0xd7),![],0.4),_0x236bfc['lastFiredTime']=_0x3fbac7,_0x54dd99++));}}}function runSingleGameUpdate(_0x1c3e0d){const _0x3e004f=_0x1d45a4;try{const _0x628a77=Date['now']();let _0x36be0f=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x36be0f=player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture:_0x36be0f=playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;let _0x1ec3f1=![];if(isManualControl&&connectedGamepadIndex!==null){if(isTwoPlayerMode&&selectedGameMode===_0x3e004f(0xed)){if(player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage)_0x1ec3f1=!![];}else{if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1))_0x1ec3f1=!![];}}if(_0x1ec3f1&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x22b928=navigator[_0x3e004f(0x142)]();if(_0x22b928?.[connectedGamepadIndex]){const _0x5b2564=_0x22b928[connectedGamepadIndex],_0x26a171=processSingleController(_0x5b2564,previousGameButtonStates);previousGameButtonStates=_0x26a171[_0x3e004f(0x112)][_0x3e004f(0xfa)]();if(_0x26a171['back']){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates['length']>0x0)previousGameButtonStates=[];}}else connectedGamepadIndex===null&&previousGameButtonStates[_0x3e004f(0xbb)]>0x0&&(previousGameButtonStates=[]);let _0x2ec50b=![];if(isManualControl&&isTwoPlayerMode&&selectedGameMode==='coop'&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage)_0x2ec50b=!![];}else{if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x3e004f(0x14b)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&currentPlayer===0x2)_0x2ec50b=!![];}}if(_0x2ec50b&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x1304ab=navigator[_0x3e004f(0x142)]();if(_0x1304ab?.[connectedGamepadIndexP2]){const _0x47a95e=_0x1304ab[connectedGamepadIndexP2],_0x54495a=processSingleController(_0x47a95e,previousGameButtonStatesP2);previousGameButtonStatesP2=_0x54495a[_0x3e004f(0x112)][_0x3e004f(0xfa)]();if(_0x54495a['back']){stopGameAndShowMenu();return;}}else{if(previousGameButtonStatesP2[_0x3e004f(0xbb)]>0x0)previousGameButtonStatesP2=[];}}else connectedGamepadIndexP2===null&&previousGameButtonStatesP2[_0x3e004f(0xbb)]>0x0&&(previousGameButtonStatesP2=[]);if(isPaused){renderGame();return;}const _0x25ba54=showCsBonusScoreMessage||showPerfectMessage;if(isCoopAIDemoActive&&_0x25ba54&&gameCanvas?.[_0x3e004f(0xaa)]>0x0){const _0x21fe4f=ship1&&player1Lives>0x0&&player2Lives<=0x0,_0x554fb0=ship2&&player2Lives>0x0&&player1Lives<=0x0;if(_0x21fe4f){const _0x566b5e=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x193236=Math[_0x3e004f(0x11d)](gameCanvas[_0x3e004f(0xaa)]/0x2-_0x566b5e/0x2);ship1['x']=_0x193236,ship1[_0x3e004f(0xa3)]=_0x193236,smoothedShip1X=_0x193236,ship2&&(ship2['targetX']=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x554fb0){const _0x4f6844=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x127e86=Math[_0x3e004f(0x11d)](gameCanvas[_0x3e004f(0xaa)]/0x2-_0x4f6844/0x2);ship2['x']=_0x127e86,ship2[_0x3e004f(0xa3)]=_0x127e86,smoothedShip2X=_0x127e86,ship1&&(ship1[_0x3e004f(0xa3)]=ship1['x'],smoothedShip1X=ship1['x']);}else{if(ship1&&player1Lives>0x0&&ship2&&player2Lives>0x0){const _0x173b58=gameCanvas[_0x3e004f(0xaa)]/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1['x']=_0x173b58,ship1['targetX']=_0x173b58,smoothedShip1X=_0x173b58;const _0x1d121d=gameCanvas[_0x3e004f(0xaa)]/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2['x']=_0x1d121d,ship2[_0x3e004f(0xa3)]=_0x1d121d,smoothedShip2X=_0x1d121d;}}}}else{if(_0x25ba54&&gameCanvas?.[_0x3e004f(0xaa)]>0x0){if(isTwoPlayerMode&&selectedGameMode===_0x3e004f(0xed)){const _0x526e25=ship1&&player1Lives>0x0,_0x4440e3=ship2&&player2Lives>0x0;if(_0x526e25&&_0x4440e3){if(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){const _0x2f9bd0=gameCanvas[_0x3e004f(0xaa)]/0x2-gameCanvas[_0x3e004f(0xaa)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x3679fd=gameCanvas['width']/0x2+gameCanvas[_0x3e004f(0xaa)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['x']=_0x3679fd,ship2[_0x3e004f(0xa3)]=_0x3679fd,smoothedShip2X=_0x3679fd);}}else{if(_0x526e25&&ship1){const _0x57bc77=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x513b9e=Math[_0x3e004f(0x11d)](gameCanvas[_0x3e004f(0xaa)]/0x2-_0x57bc77/0x2);ship1['x']=_0x513b9e,ship1[_0x3e004f(0xa3)]=_0x513b9e,ship2&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7)&&(ship2[_0x3e004f(0xa3)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x4440e3&&ship2){const _0x3cbb78=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x1d6426=Math[_0x3e004f(0x11d)](gameCanvas['width']/0x2-_0x3cbb78/0x2);ship2['x']=_0x1d6426,ship2[_0x3e004f(0xa3)]=_0x1d6426;if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))smoothedShip2X=_0x1d6426;ship1&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7)&&(ship1[_0x3e004f(0xa3)]=ship1['x']);}}}}else{if((!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x3e004f(0x14b)&&currentPlayer===0x2)&&ship){const _0x5dc56c=isDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH;ship['x']=Math['round'](gameCanvas[_0x3e004f(0xaa)]/0x2-_0x5dc56c/0x2),ship[_0x3e004f(0xa3)]=ship['x'];if(isPlayerTwoAI&&selectedGameMode===_0x3e004f(0x14b)&&currentPlayer===0x2)smoothedShipX=ship['x'];else{if(!isManualControl)smoothedShipX=ship['x'];}}}}}let _0x483794=![];if(selectedGameMode===_0x3e004f(0xed)&&level===0x1&&coopPlayersReadyStartTime>0x0){_0x483794=!![];if(isShowingCoopPlayersReady){if(_0x628a77-coopPlayersReadyStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}if(_0x628a77>=coopPlayersReadyStartTime+0xbb8){isShowingCoopPlayersReady=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7)?(isShowingIntro=!![],introStep=0x2,introDisplayStartTime=_0x628a77):(isShowingIntro=!![],introStep=0x1,introDisplayStartTime=_0x628a77);}}else{if(isShowingIntro){if(_0x628a77-introDisplayStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}let _0x302424=INTRO_DURATION_PER_STEP;introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))&&(_0x302424=TWO_PLAYER_STAGE_INTRO_DURATION);if(_0x628a77>=introDisplayStartTime+_0x302424){if(introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))){introStep=0x2,introDisplayStartTime=_0x628a77,explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}else{isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();_0x483794=![],coopPlayersReadyStartTime=0x0;}}}else _0x483794=![],coopPlayersReadyStartTime=0x0;}if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))handlePlayerInput();if(typeof moveEntities===_0x3e004f(0x78))moveEntities();renderGame();if(_0x483794)return;}if(selectedGameMode===_0x3e004f(0xed)&&level===0x1&&!gameJustStartedAndWaveLaunched&&coopPlayersReadyStartTime===0x0&&gameJustStarted){if(isFullGridWave)startFullGridWave();else{if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition['length']>0x0)scheduleEntranceFlightWave();else isWaveTransitioning=!![],readyForNextWaveReset=!![];}}gameJustStartedAndWaveLaunched=!![],gameJustStarted=![];}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode&&selectedGameMode===_0x3e004f(0x14b)){if(_0x628a77-playerGameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(_0x628a77-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![],explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();const _0x17a433=playerWhoIsGameOver;playerWhoIsGameOver=0x0;if(nextActionAfterPlayerGameOver==='switch_player')switchPlayerTurn()?(_0x17a433===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,player1MaxLevelReached=Math[_0x3e004f(0x12c)](player1MaxLevelReached,level)),resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();else nextActionAfterPlayerGameOver===_0x3e004f(0x139)?triggerFinalGameOverSequence():triggerFinalGameOverSequence();renderGame();return;}else{renderGame();return;}}if(isTwoPlayerMode&&selectedGameMode===_0x3e004f(0xed)){let _0x9d0dd7=![],_0x1c89ee=![];if(isPlayer1ShowingGameOverMessage){if(_0x628a77-player1GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}if(_0x628a77-player1GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer1ShowingGameOverMessage=![],_0x9d0dd7=!![],explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}}if(isPlayer2ShowingGameOverMessage){if(_0x628a77-player2GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}if(_0x628a77-player2GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer2ShowingGameOverMessage=![],_0x1c89ee=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}if(_0x9d0dd7||_0x1c89ee){player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))handlePlayerInput();if(typeof moveEntities===_0x3e004f(0x78))moveEntities();renderGame();if(gameOverSequenceStartTime>0x0||player1Lives>0x0||player2Lives>0x0)return;}else{if(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))handlePlayerInput();if(typeof moveEntities===_0x3e004f(0x78))moveEntities();renderGame();return;}}}if(isShowingCaptureMessage){if(_0x628a77-captureMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}const _0x49d339=enemies['find'](_0xbbb47c=>_0xbbb47c['id']===capturedBossIdWithMessage);if(_0x49d339&&_0x49d339[_0x3e004f(0x14f)]==='showing_capture_message'){const _0x580389=_0x628a77-captureMessageStartTime,_0x46dfc8=Math[_0x3e004f(0x99)](0x1,_0x580389/CAPTURE_MESSAGE_DURATION);_0x49d339[_0x3e004f(0x17b)]=_0x46dfc8*0x2*(0x2*Math['PI']);}else _0x49d339&&(_0x49d339['captureAnimationRotation']=0x0);if(isInGameState&&!isShowingPlayerGameOverMessage&&!isPlayer1ShowingGameOverMessage&&!isPlayer2ShowingGameOverMessage&&gameOverSequenceStartTime===0x0){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))handlePlayerInput();if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else isPlayerTwoAI&&selectedGameMode===_0x3e004f(0x14b)&&currentPlayer===0x2&&aiControl();if(typeof moveEntities===_0x3e004f(0x78))moveEntities();updateExplosions(),updateFloatingScores();}if(_0x628a77-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();stopSound(_0x3e004f(0x15f)),captureBeamActive=![];if(_0x49d339&&_0x49d339['state']==='showing_capture_message'){_0x49d339[_0x3e004f(0x14f)]='returning',_0x49d339[_0x3e004f(0x17b)]=0x0;try{const _0x15781c=_0x49d339[_0x3e004f(0x19d)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x5bb352,y:_0x5c781d}=getCurrentGridSlotPosition(_0x49d339[_0x3e004f(0x138)],_0x49d339[_0x3e004f(0xf4)],_0x15781c);_0x49d339[_0x3e004f(0xcc)]=_0x5bb352,_0x49d339[_0x3e004f(0xeb)]=_0x5c781d;}catch(_0x4ae6b4){console[_0x3e004f(0x186)](_0x3e004f(0xfd)+_0x49d339['id']+':',_0x4ae6b4),_0x49d339['targetGridX']=gameCanvas[_0x3e004f(0xaa)]/0x2,_0x49d339[_0x3e004f(0xeb)]=ENEMY_TOP_MARGIN;}}else _0x49d339&&(_0x49d339[_0x3e004f(0x17b)]=0x0);capturedBossIdWithMessage=null;const _0x134ae9=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(isTwoPlayerMode&&selectedGameMode===_0x3e004f(0xed)){if(player1NeedsRespawnAfterCapture&&player1Lives>0x0){ship1={'x':player1CaptureRespawnX,'y':_0x134ae9,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player1CaptureRespawnX,'id':'p1'},isPlayer1ShipCaptured=![],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x628a77+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=![],player1NeedsRespawnAfterCapture=![],player1CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))smoothedShip1X=ship1['x'];}if(player2NeedsRespawnAfterCapture&&player2Lives>0x0){ship2={'x':player2CaptureRespawnX,'y':_0x134ae9,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player2CaptureRespawnX,'id':'p2'},isPlayer2ShipCaptured=![],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x628a77+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=![],player2NeedsRespawnAfterCapture=![],player2CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))smoothedShip2X=ship2['x'];}if(player1Lives<=0x0&&player2Lives<=0x0){if(gameOverSequenceStartTime===0x0)triggerFinalGameOverSequence();}}else{if(!isManualControl&&!isPlayerTwoAI){if(isShipCaptured&&playerLives>0x0){let _0x715cb7=gameCanvas?gameCanvas[_0x3e004f(0xaa)]/0x2-SHIP_WIDTH/0x2:0xc8;if(typeof smoothedShipX===_0x3e004f(0xcf))_0x715cb7=smoothedShipX;ship={'x':_0x715cb7,'y':_0x134ae9,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x715cb7,'id':'main'},isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x628a77+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=![],aiNeedsStabilization=!![];if(smoothedShipX===undefined&&ship)smoothedShipX=ship['x'];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isManualControl){if(isShipCaptured&&playerLives>0x0){let _0x5ab0f9=capturedShipRespawnX_NormalMode!==0x0?capturedShipRespawnX_NormalMode:gameCanvas?gameCanvas[_0x3e004f(0xaa)]/0x2-SHIP_WIDTH/0x2:0xc8;ship={'x':_0x5ab0f9,'y':_0x134ae9,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x5ab0f9,'id':_0x3e004f(0xda)},isShipCaptured=![],capturedShipRespawnX_NormalMode=0x0,isInvincible=!![],invincibilityEndTime=_0x628a77+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x628a77+RESPAWN_DELAY_MS;if(isPlayerTwoAI&&selectedGameMode===_0x3e004f(0x14b)&&currentPlayer===0x2)aiNeedsStabilization=!![];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&((!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode===_0x3e004f(0x14b)&&(currentPlayer===0x1&&player2Lives<=0x0||currentPlayer===0x2&&player1Lives<=0x0))&&triggerFinalGameOverSequence());}}}}renderGame();return;}const _0x1d6721=!(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage||isShowingPlayerGameOverMessage),_0x132221=isShowingIntro&&!_0x483794&&!(selectedGameMode===_0x3e004f(0xed)&&level===0x1);if(!_0x483794&&gameOverSequenceStartTime===0x0&&_0x36be0f&&!isShowingCaptureMessage&&_0x1d6721){if(isInGameState&&!_0x132221){if(!(_0x25ba54&&!isManualControl)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x3e004f(0x14b)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}}isManualControl&&handlePlayerInput();}}isTwoPlayerMode&&selectedGameMode===_0x3e004f(0xed)?(isPlayer1Invincible&&_0x628a77>=player1InvincibilityEndTime&&(isPlayer1Invincible=![],player1InvincibilityEndTime=0x0),isPlayer2Invincible&&_0x628a77>=player2InvincibilityEndTime&&(isPlayer2Invincible=![],player2InvincibilityEndTime=0x0)):(isInvincible&&_0x628a77>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0),isWaitingForRespawn&&_0x628a77>=respawnTime&&(isWaitingForRespawn=![]));const _0x119768=showExtraLifeMessage&&_0x628a77-extraLifeMessageStartTime<0x64;if(_0x119768&&(isWaveTransitioning||isChallengingStage&&enemies[_0x3e004f(0xbb)]===0x0)){}if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&isChallengingStage&&enemies[_0x3e004f(0xbb)]===0x0&&!isCsCompletionDelayActive&&!showCsBonusScoreMessage&&!showPerfectMessage&&gameCanvas&&gameCanvas['width']>0x0){const _0x1ffe59=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage,_0x463f5d=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage;if(_0x1ffe59&&!_0x463f5d){const _0x4d5cde=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x15ee73=Math[_0x3e004f(0x11d)](gameCanvas[_0x3e004f(0xaa)]/0x2-_0x4d5cde/0x2);ship1['x']=_0x15ee73,ship1[_0x3e004f(0xa3)]=_0x15ee73,smoothedShip1X=_0x15ee73;}else{if(_0x463f5d&&!_0x1ffe59){const _0x4ef3a1=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x241d44=Math[_0x3e004f(0x11d)](gameCanvas[_0x3e004f(0xaa)]/0x2-_0x4ef3a1/0x2);ship2['x']=_0x241d44,ship2[_0x3e004f(0xa3)]=_0x241d44,smoothedShip2X=_0x241d44;}}}if(isCsCompletionDelayActive&&_0x1d6721&&gameOverSequenceStartTime===0x0){if(_0x628a77-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY+EXPLOSION_DURATION){isCsCompletionDelayActive=![],csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies;csCompletionResultIsPerfect?(playSound(_0x3e004f(0x6f),![],0.6),showCsHitsMessage=!![],csHitsMessageStartTime=_0x628a77):(playSound('csClearSound',![],0.6),showCSClearMessage=!![],csClearMessageStartTime=_0x628a77);bullets=[],enemyBullets=[],renderGame();return;}else{if(_0x628a77-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY&&explosions[_0x3e004f(0xbb)]>0x0){updateExplosions(),renderGame();return;}else{if(_0x628a77-csCompletionDelayStartTime<CS_COMPLETION_MESSAGE_DELAY){renderGame();return;}}}}let _0x1465b6=![],_0x44f623=![];if(_0x1d6721&&gameOverSequenceStartTime===0x0&&!isShowingCoopPlayersReady&&!_0x483794){if(showCsHitsMessage){if(_0x628a77-csHitsMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}if(Date['now']()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION){showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x628a77,explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}_0x44f623=!![];}else{if(showPerfectMessage){if(_0x628a77-perfectMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}if(Date['now']()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION){showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x628a77,explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}_0x44f623=!![];}else{if(showCsBonusScoreMessage){if(_0x628a77-csBonusScoreMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}if(Date['now']()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION){showCsBonusScoreMessage=![],_0x1465b6=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}_0x44f623=!![];}else{if(showCSClearMessage){if(_0x628a77-csClearMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}Date['now']()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]);Date['now']()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]);if(Date['now']()-csClearMessageStartTime>=CS_CLEAR_DELAY){showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x1465b6=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}_0x44f623=!![];}else{if(showExtraLifeMessage)Date[_0x3e004f(0x12f)]()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![]),_0x44f623=!![];else{if(showReadyMessage){if(_0x628a77-readyMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(Date[_0x3e004f(0x12f)]()-readyMessageStartTime>READY_MESSAGE_DURATION){showReadyMessage=![],_0x1465b6=!![],explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}_0x44f623=!![];}}}}}}}if(_0x44f623&&!_0x1465b6&&!isShowingCoopPlayersReady&&!_0x483794&&!isShowingCaptureMessage&&_0x1d6721){if(!((_0x25ba54||showCsHitsMessage||showCSClearMessage)&&isManualControl)&&!showExtraLifeMessage){renderGame();return;}}if(_0x132221&&_0x1d6721&&gameOverSequenceStartTime===0x0){let _0x21bd6b=![];const _0x5aeb74=_0x628a77-introDisplayStartTime;let _0x586382=INTRO_DURATION_PER_STEP;const _0x27e078=isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL',_0x4379c5=isTwoPlayerMode&&selectedGameMode===_0x3e004f(0x14b)&&!isPlayerTwoAI;(_0x4379c5||_0x27e078)&&(_0x586382=TWO_PLAYER_STAGE_INTRO_DURATION);if(introStep===0x1){if(_0x5aeb74<0x64){explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}let _0x2135a2=null,_0xafcc3b=0x1;if(!playerIntroSoundPlayed){const _0x2c52a8=_0x27e078||_0x4379c5,_0x3ec187=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7)&&level>0x1;if(_0x2c52a8){if(currentPlayer===0x1&&level===0x1&&!initialGameStartSoundPlayedThisSession)_0x2135a2=_0x3e004f(0xe3),_0xafcc3b=0.4;else(currentPlayer===0x2||level>0x1)&&(_0x2135a2=_0x3e004f(0xd3),_0xafcc3b=0.2);}else{if(_0x3ec187)_0x2135a2=_0x3e004f(0xd3),_0xafcc3b=0.2;else{if(!isTwoPlayerMode){if(level===0x1&&!initialGameStartSoundPlayedThisSession)_0x2135a2=_0x3e004f(0xe3),_0xafcc3b=0.4;else level>0x1&&(_0x2135a2='levelUpSound',_0xafcc3b=0.2);}}}}_0x2135a2&&(playSound(_0x2135a2,![],_0xafcc3b),playerIntroSoundPlayed=!![],_0x2135a2==='startSound'&&(initialGameStartSoundPlayedThisSession=!![]));if(_0x5aeb74>=_0x586382){if(isChallengingStage)introStep=0x3;else introStep=0x2;introDisplayStartTime=_0x628a77,explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}}else{if(introStep===0x2){if(_0x5aeb74<0x64){explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}if(!stageIntroSoundPlayed){if(playLevelUpAfterCSBonus&&(isTwoPlayerMode&&selectedGameMode==='coop'))playSound(_0x3e004f(0xd3),![],0.2),playLevelUpAfterCSBonus=![],stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x3e004f(0xed)&&!isPlayerTwoAI&&!isCoopAIDemoActive)playSound(_0x3e004f(0xd3),![],0.2),stageIntroSoundPlayed=!![];else{if(selectedGameMode==='coop'){if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))&&level>0x1)playSound(_0x3e004f(0xd3),![],0.2),stageIntroSoundPlayed=!![];else(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))&&level===0x1&&(stageIntroSoundPlayed=!![]);}else{if(!isTwoPlayerMode&&level>0x1)playSound('levelUpSound',![],0.2),stageIntroSoundPlayed=!![];else{if(level>0x1&&!playerIntroSoundPlayed&&!(isPlayerTwoAI&&selectedGameMode==='normal')&&!initialGameStartSoundPlayedThisSession)playSound(_0x3e004f(0xd3),![],0.2),stageIntroSoundPlayed=!![];else level===0x1&&!isManualControl&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode==='coop')&&!initialGameStartSoundPlayedThisSession&&(playSound(_0x3e004f(0xe3),![],0.4),initialGameStartSoundPlayedThisSession=!![],stageIntroSoundPlayed=!![]);}}}}}if(_0x5aeb74>=_0x586382){_0x21bd6b=!![],explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}}else{if(introStep===0x3){if(_0x5aeb74<0x64){explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}!csIntroSoundPlayed&&(playSound(_0x3e004f(0x84),![],0.4),csIntroSoundPlayed=!![],stageIntroSoundPlayed=!![]);if(_0x5aeb74>=_0x586382){_0x21bd6b=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}}}if(isInGameState&&_0x1d6721&&gameOverSequenceStartTime===0x0&&gameCanvas){let _0x44067d=null,_0x23bf59=null;const _0x113051=isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL'&&currentPlayer===0x1&&isShowingIntro;if(_0x113051){let _0x1ff91f=![],_0x13e9da=![];const _0x27da11=navigator[_0x3e004f(0x142)]();if(connectedGamepadIndex!==null&&_0x27da11?.[connectedGamepadIndex]){const _0x468484=_0x27da11[connectedGamepadIndex],_0x4dde94=processSingleController(_0x468484,previousGameButtonStates);_0x1ff91f=_0x4dde94[_0x3e004f(0xef)],_0x13e9da=_0x4dde94[_0x3e004f(0xf2)];}_0x44067d=keyboardP1LeftDown||_0x1ff91f,_0x23bf59=keyboardP1RightDown||_0x13e9da;}if(_0x27e078&&currentPlayer===0x2)aiControl();else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else!isManualControl&&!isPlayerTwoAI&&aiControl();}typeof moveEntities==='function'&&moveEntities(_0x44067d,_0x23bf59),updateExplosions(),updateFloatingScores();}if(_0x21bd6b){isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![];isManualControl&&(isShowingDemoText=![]);if(!isChallengingStage)isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7)?(aiShip1CanShootTime=Date['now']()+0x3e8,aiShip2CanShootTime=Date[_0x3e004f(0x12f)]()+0x4b0):aiCanShootTime=Date['now']()+(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0x134)?0x3e8:0xbb8);else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0;else aiCanShootTime=0x0;}const _0x3fa924=level===0x1&&selectedGameMode!=='coop',_0x2093e8=level===0x1&&selectedGameMode===_0x3e004f(0xed),_0x4f1888=_0x3fa924&&!gameJustStartedAndWaveLaunched||level>0x1||isChallengingStage||_0x2093e8&&!gameJustStartedAndWaveLaunched;if(_0x4f1888){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x3e004f(0xbb)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0x3e004f(0x84),![],0.4);}else isEntrancePhaseActive=![],stopSound(_0x3e004f(0x84)),isWaveTransitioning=!![],readyForNextWaveReset=!![],bullets=[],enemyBullets=[],explosions=[],setTimeout(()=>{const _0xba9bfc=_0x3e004f,_0x301bd8=isTwoPlayerMode&&selectedGameMode===_0xba9bfc(0xed)?player1Lives>0x0||player2Lives>0x0:playerLives>0x0;if((isInGameState||!isInGameState&&_0x301bd8)&&typeof resetWaveInternal===_0xba9bfc(0x78)){if(_0x301bd8)resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![];else triggerFinalGameOverSequence();}},0x64);}if(_0x3fa924||level>0x1||isChallengingStage||_0x2093e8)gameJustStartedAndWaveLaunched=!![];}}isManualControl&&_0x132221&&_0x1d6721&&gameOverSequenceStartTime===0x0&&handlePlayerInput();renderGame();return;}const _0x3da7c8=!_0x483794&&!_0x132221&&!_0x1465b6&&!isShowingCaptureMessage;if(gameJustStarted&&_0x3da7c8){if(!gameJustStartedAndWaveLaunched){const _0xc82bec=selectedGameMode===_0x3e004f(0xed)&&level===0x1&&coopPlayersReadyStartTime!==0x0;if(!_0xc82bec){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x3e004f(0xbb)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0x3e004f(0x84),![],0.4);}else isWaveTransitioning=!![],readyForNextWaveReset=!![];}gameJustStartedAndWaveLaunched=!![];}}gameJustStarted=![];}if(_0x3da7c8&&isInGameState&&_0x1d6721&&gameOverSequenceStartTime===0x0){if(!_0x25ba54||_0x25ba54&&isManualControl){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x3e004f(0x14b)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}isManualControl&&handlePlayerInput();if(typeof moveEntities==='function')moveEntities();updateExplosions(),updateFloatingScores();}else _0x25ba54&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))&&(updateExplosions(),updateFloatingScores());}if(_0x3da7c8&&_0x1d6721&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&_0x36be0f){const _0x1f5a32=enemies[_0x3e004f(0x181)](_0x488b67=>_0x488b67?.['state']===_0x3e004f(0x80));if(_0x1f5a32&&isGridBreathingActive){const _0x3839f6=_0x628a77-gridBreathStartTime,_0x353336=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x5b2241=_0x3839f6%_0x353336;currentGridBreathFactor=(Math[_0x3e004f(0xd1)](_0x5b2241/_0x353336*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x1f5a32&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x1f5a32&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x628a77,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x27eec0=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x2832b3=enemies[_0x3e004f(0x181)](_0x3b2953=>_0x3b2953?.[_0x3e004f(0x14f)]===_0x3e004f(0x1a2)||_0x3b2953?.[_0x3e004f(0x14f)]===_0x3e004f(0xdd)||_0x3b2953?.[_0x3e004f(0x14f)]===_0x3e004f(0x100));if(totalEnemiesScheduledForWave>0x0&&_0x27eec0&&!_0x2832b3){const _0x22e225=isEntrancePhaseActive;isEntrancePhaseActive=![];if(_0x22e225){stopSound(_0x3e004f(0x84)),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts[_0x3e004f(0x10c)](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![];if(!isChallengingStage&&!isFullGridWave){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=Date['now']()+COOP_AI_CAPTURE_DIVE_ANTICIPATION_DURATION_MS,typeof triggerImmediateCaptureDive===_0x3e004f(0x78)&&triggerImmediateCaptureDive();else typeof triggerImmediateCaptureDive===_0x3e004f(0x78)&&triggerImmediateCaptureDive();}}}}if(!isChallengingStage&&!_0x132221&&!isPaused&&!isWaveTransitioning)triggerGridFiring();if(!isWaveTransitioning&&_0x36be0f&&!_0x132221&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x33ecf0=enemies[_0x3e004f(0xbb)]===0x0,_0x5aed8d=fallingShips[_0x3e004f(0xbb)]===0x0,_0x4e3158=![];if(isChallengingStage){if(_0x33ecf0&&!isEntrancePhaseActive)_0x4e3158=!![];}else{if(_0x33ecf0&&!isEntrancePhaseActive&&_0x5aed8d)_0x4e3158=!![];}if(_0x4e3158){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))&&gameCanvas&&gameCanvas[_0x3e004f(0xaa)]>0x0){const _0x31cb88=player1Lives,_0x3570a1=player2Lives,_0x528e00=gameCanvas[_0x3e004f(0x74)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(_0x31cb88>0x0&&_0x3570a1<=0x0&&ship1){const _0x3e23ab=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x571b6d=Math[_0x3e004f(0x11d)](gameCanvas[_0x3e004f(0xaa)]/0x2-_0x3e23ab/0x2);ship1['x']=_0x571b6d,ship1['targetX']=_0x571b6d,smoothedShip1X=_0x571b6d,ship1['y']=_0x528e00;}else{if(_0x3570a1>0x0&&_0x31cb88<=0x0&&ship2){const _0x22cbec=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x1b93b2=Math[_0x3e004f(0x11d)](gameCanvas[_0x3e004f(0xaa)]/0x2-_0x22cbec/0x2);ship2['x']=_0x1b93b2,ship2[_0x3e004f(0xa3)]=_0x1b93b2,smoothedShip2X=_0x1b93b2,ship2['y']=_0x528e00;}}}isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(_0x3e004f(0x191)),isGridSoundPlaying=![]);!isChallengingStage&&(bullets=[],enemyBullets=[]);floatingScores=[],enemySpawnTimeouts[_0x3e004f(0x10c)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;let _0xc4f0aa;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,setTimeout(()=>{const _0x5b77ab=_0x3e004f;if(isWaveTransitioning){explosions=[];if(typeof updateExplosions===_0x5b77ab(0x78))updateExplosions();isCsCompletionDelayActive=!![],csCompletionDelayStartTime=Date[_0x5b77ab(0x12f)]();}},EXPLOSION_DURATION);if(csCompletionResultIsPerfect){let _0x5a039b=0x2710;if(isTwoPlayerMode&&selectedGameMode===_0x3e004f(0xed))(player1Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))&&ship1)&&(player1Score+=_0x5a039b),(player2Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e004f(0xa7))&&ship2)&&(player2Score+=_0x5a039b),highScore=Math[_0x3e004f(0x12c)](highScore,player1Score,player2Score),checkAndAwardExtraLife(null);else{score+=_0x5a039b;if(!isTwoPlayerMode)player1Score=score;else{if(isTwoPlayerMode&&selectedGameMode===_0x3e004f(0x14b)){if(currentPlayer===0x1)player1Score=score;else player2Score=score;}}highScore=Math[_0x3e004f(0x12c)](highScore,score,player1Score,player2Score),checkAndAwardExtraLife(currentPlayer);}_0xc4f0aa=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else isTwoPlayerMode&&selectedGameMode===_0x3e004f(0xed)?checkAndAwardExtraLife(null):checkAndAwardExtraLife(currentPlayer),_0xc4f0aa=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0xc4f0aa+=0x64;}else playSound(_0x3e004f(0x1ad),![],0.8),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,_0xc4f0aa=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x1a5d66=_0x3e004f;let _0x299998=![],_0x38be7c=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x1a5d66(0x14b)){_0x38be7c=currentPlayer;_0x38be7c===0x1?player1MaxLevelReached=Math[_0x1a5d66(0x12c)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x1a5d66(0x12c)](player2MaxLevelReached,level);const _0x35d29e=switchPlayerTurn();if(_0x35d29e){if(_0x38be7c===0x2&&currentPlayer===0x1&&player1CompletedLevel===level)_0x299998=!![],player1CompletedLevel=-0x1;else _0x38be7c===0x1?(player1CompletedLevel=level,_0x299998=![]):_0x299998=![];}else _0x299998=!![],player1CompletedLevel=-0x1;}else{_0x299998=!![];if(!isTwoPlayerMode)player1MaxLevelReached=Math[_0x1a5d66(0x12c)](player1MaxLevelReached,level);else{if(isTwoPlayerMode&&selectedGameMode==='coop'){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x1a5d66(0x12c)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x1a5d66(0x12c)](player2MaxLevelReached,level);}}}if(_0x299998){level++;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x1a5d66(0x12c)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x1a5d66(0x12c)](player2MaxLevelReached,level);}else{if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1&&player1Lives>0x0)player1MaxLevelReached=Math[_0x1a5d66(0x12c)](player1MaxLevelReached,level);else{if(currentPlayer===0x2&&player2Lives>0x0)player2MaxLevelReached=Math[_0x1a5d66(0x12c)](player2MaxLevelReached,level);}}else{if(playerLives>0x0)player1MaxLevelReached=Math[_0x1a5d66(0x12c)](player1MaxLevelReached,level);}}}let _0x81716a=![];if(isTwoPlayerMode&&selectedGameMode===_0x1a5d66(0xed))_0x81716a=player1Lives>0x0||player2Lives>0x0;else{if(isTwoPlayerMode&&selectedGameMode==='normal')_0x81716a=(currentPlayer===0x1?player1Lives:player2Lives)>0x0;else _0x81716a=playerLives>0x0;}_0x81716a?(resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();},_0xc4f0aa),renderGame();return;}if(!isChallengingStage){if(enemies[_0x3e004f(0xbb)]>0x0){let _0x581383=null;const _0x33758d=enemies[_0x3e004f(0xd2)](_0x752a78=>_0x752a78?.['state']===_0x3e004f(0x80)),_0x1f061e=_0x33758d[_0x3e004f(0xbb)]<=0x3,_0x398505=Math[_0x3e004f(0x12c)](0x1,Math[_0x3e004f(0x99)](level,LEVEL_CAP_FOR_SCALING)),_0x5b679c=0x1068,_0x409123=0x320,_0x51c16a=(_0x398505-0x1)*((_0x5b679c-_0x409123)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x2b1058=Math[_0x3e004f(0x12c)](_0x409123,_0x5b679c-_0x51c16a),_0x4529ba=Math['round'](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x3d2333=enemies[_0x3e004f(0xd2)](_0x2c7a37=>_0x2c7a37?.[_0x3e004f(0x14f)]===_0x3e004f(0x177)||_0x2c7a37?.[_0x3e004f(0x14f)]===_0x3e004f(0x109))[_0x3e004f(0xbb)];if(_0x1f061e||_0x628a77-lastEnemyDetachTime>_0x2b1058&&_0x33758d[_0x3e004f(0xbb)]>0x0&&_0x3d2333<_0x4529ba){_0x581383=findAndDetachEnemy();if(_0x581383&&_0x581383['length']>0x0){const _0x416f8f=_0x581383['map'](_0x423925=>enemies['find'](_0x4f1fad=>_0x4f1fad?.['id']===_0x423925['id']))[_0x3e004f(0xd2)](_0x201d0e=>_0x201d0e&&_0x201d0e[_0x3e004f(0x14f)]==='in_grid');if(_0x416f8f['length']>0x0){const _0x5ea8cf=_0x416f8f[0x0],_0xd7e5a1=_0x5ea8cf['attackType'];if(!_0x1f061e)lastEnemyDetachTime=_0x628a77;if(_0xd7e5a1===_0x3e004f(0x14b)){const _0x5a0d24=generateAttackPathInternal(_0x5ea8cf);if(_0x5a0d24&&_0x5a0d24[_0x3e004f(0xbb)]>0x0){if(_0x416f8f[_0x3e004f(0xbb)]===0x3&&_0x5ea8cf[_0x3e004f(0x19d)]===ENEMY3_TYPE&&level!==0x1)playSound('tripleAttackSound',![],0.3);let _0x1c9925=[..._0x416f8f];const _0x208df0=_0x1c9925[_0x3e004f(0xbb)];if(_0x208df0>0x1){let _0x15d343=null,_0xd11e82=[];_0x1c9925[_0x3e004f(0x10c)](_0x749838=>{const _0x30a122=_0x3e004f;if(_0x749838['type']===ENEMY3_TYPE)_0x15d343=_0x749838;else _0xd11e82[_0x30a122(0xc9)](_0x749838);});if(_0x15d343&&level!==0x1&&_0x208df0===0x3&&_0xd11e82[_0x3e004f(0xbb)]===0x2)_0x1c9925=[_0xd11e82[0x0],_0x15d343,_0xd11e82[0x1]];else _0x1c9925[_0x3e004f(0xa9)]((_0x308a93,_0x58eedc)=>(_0x308a93?.[_0x3e004f(0xf4)]??0x0)-(_0x58eedc?.['gridCol']??0x0));const _0x14a80f=0x5;let _0x24de0e=0x0;_0x1c9925=_0x1c9925[_0x3e004f(0xd2)](_0x31edce=>_0x31edce&&typeof _0x31edce[_0x3e004f(0xaa)]===_0x3e004f(0xcf));const _0x32864e=_0x1c9925[_0x3e004f(0xbb)];for(let _0x7dda11=0x0;_0x7dda11<_0x32864e;_0x7dda11++){_0x24de0e+=_0x1c9925[_0x7dda11][_0x3e004f(0xaa)];if(_0x7dda11<_0x32864e-0x1)_0x24de0e+=_0x14a80f;}const _0x195aaa=-_0x24de0e/0x2;let _0x3064aa=_0x195aaa;for(let _0x2d6761=0x0;_0x2d6761<_0x32864e;_0x2d6761++){const _0x1627d1=_0x1c9925[_0x2d6761];_0x1627d1['attackFormationOffsetX']=_0x3064aa+_0x1627d1[_0x3e004f(0xaa)]/0x2,_0x3064aa+=_0x1627d1['width']+_0x14a80f;}}else _0x1c9925['forEach'](_0x56cff4=>_0x56cff4['attackFormationOffsetX']=0x0);const _0x4b4d59=_0x3e004f(0xa5)+_0x5ea8cf['id']+'-'+_0x628a77;_0x1c9925[_0x3e004f(0x10c)](_0x57a6b0=>{const _0x17c3b0=_0x3e004f;if(_0x57a6b0)_0x57a6b0[_0x17c3b0(0x76)]=_0x4b4d59;});let _0x104496=![],_0x107fef=GROUP_FIRE_BURST_DELAY;if(_0x5ea8cf['type']===ENEMY2_TYPE||_0x5ea8cf[_0x3e004f(0x19d)]===ENEMY3_TYPE){_0x104496=!![];if(_0x5ea8cf[_0x3e004f(0x19d)]===ENEMY2_TYPE&&_0x208df0===0x1)_0x107fef=SOLO_BUTTERFLY_FIRE_DELAY;}else{if(_0x5ea8cf['type']===ENEMY1_TYPE)_0x104496=!![];}if(_0x1f061e&&level>0x1)_0x104496=![];_0x104496&&_0x1c9925[_0x3e004f(0x10c)](_0x5a8d6c=>{const _0x49b608=_0x3e004f,_0x38b8d6=_0x5a8d6c&&!(_0x5a8d6c[_0x49b608(0x19d)]===ENEMY3_TYPE&&_0x5a8d6c[_0x49b608(0x19f)]);if(_0x38b8d6)fireEnemyBurst(_0x5a8d6c['id'],_0x49b608(0x177),_0x107fef);}),_0x1c9925[_0x3e004f(0x10c)]((_0xf0f035,_0x38c3ed)=>{const _0x3ec914=_0x3e004f;_0xf0f035&&_0xf0f035['state']==='in_grid'&&(_0xf0f035['state']=_0x3ec914(0x109),_0xf0f035[_0x3ec914(0x71)]=![],_0xf0f035[_0x3ec914(0x96)]=0x0,_0xf0f035[_0x3ec914(0xf1)]=0x0,_0xf0f035[_0x3ec914(0x92)]=![],setTimeout(()=>{const _0xb57753=_0x3ec914;if(isPaused)return;const _0xff3641=enemies[_0xb57753(0x152)](_0x1b7955=>_0x1b7955?.['id']===_0xf0f035['id']);if(_0xff3641&&_0xff3641[_0xb57753(0x14f)]==='preparing_attack')try{const _0x4e81b0=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x151fef=0x1;if(_0xff3641[_0xb57753(0x19d)]===ENEMY1_TYPE)_0x151fef=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0xff3641[_0xb57753(0x19d)]===ENEMY2_TYPE)_0x151fef=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0xff3641[_0xb57753(0x19d)]===ENEMY3_TYPE)_0x151fef=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0xf0f035['type']===ENEMY3_TYPE)playSound('bossGalagaDiveSound',![],0.2);else playSound('butterflyDiveSound',![],0.2);_0xff3641[_0xb57753(0x14f)]='attacking',_0xff3641[_0xb57753(0x114)]=_0x5a0d24,_0xff3641['attackPathSegmentIndex']=0x0,_0xff3641['attackPathT']=0x0,_0xff3641['speed']=_0x4e81b0*_0x151fef,_0xff3641['lastFiredTime']=0x0,_0xff3641[_0xb57753(0x92)]=!![];}catch(_0x5b319e){console[_0xb57753(0x186)](_0xb57753(0x143)+_0xf0f035['id']+':',_0x5b319e);}},_0x38c3ed*GROUP_DETACH_DELAY_MS));});}else _0x581383['forEach'](_0x446b04=>{const _0x2cbbbe=_0x3e004f;if(_0x446b04)_0x446b04[_0x2cbbbe(0x71)]=![];});}}}}}}enemies['forEach'](_0x3b35f1=>{const _0xc1d878=_0x3e004f;if(_0x3b35f1&&_0x3b35f1['type']===ENEMY3_TYPE&&_0x3b35f1[_0xc1d878(0x19f)]&&_0x3b35f1[_0xc1d878(0x14f)]===_0xc1d878(0x177)&&_0x3b35f1[_0xc1d878(0x179)]&&typeof _0x3b35f1['capturedShipLastFiredTime']===_0xc1d878(0xcf)){if(_0x628a77-_0x3b35f1[_0xc1d878(0x146)]>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x2d471f=_0x3b35f1['x']+_0x3b35f1[_0xc1d878(0xaa)]/0x2,_0x1ee4f6=_0x3b35f1['y']+_0x3b35f1['height']+_0x3b35f1['capturedShipDimensions'][_0xc1d878(0x74)]*0.5,_0x317081={'x':_0x2d471f,'y':_0x1ee4f6};createBulletSimple(_0x3b35f1,_0x317081)&&(_0x3b35f1[_0xc1d878(0x146)]=_0x628a77,playSound(_0xc1d878(0x174),![],0.4));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x51404b=_0x628a77-gameOverSequenceStartTime,_0x3ee6a5=_0x51404b>=GAME_OVER_DURATION;if(_0x3ee6a5&&!isShowingResultsScreen){isShowingResultsScreen=!![],stopSound('gameOverSound'),playSound(_0x3e004f(0xc7),!![],0.2),explosions=[];if(typeof updateExplosions===_0x3e004f(0x78))updateExplosions();}}}!_0x483794&&renderGame();}catch(_0x10f53d){console[_0x3e004f(0x186)](_0x3e004f(0x129),_0x10f53d,_0x10f53d['stack']),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert('A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.'),stopAllGameSoundsInternal(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState===_0x3e004f(0x78)&&showMenuState();}catch(_0xd9326c){console['error']('Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:',_0xd9326c);}}}function checkAndAwardExtraLife(_0x383f21=null){const _0x47d335=_0x1d45a4;try{const _0x29da7e=[];if(_0x383f21===0x1){const _0x3fbe71=isTwoPlayerMode&&selectedGameMode===_0x47d335(0xed)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x47d335(0x14b)&&currentPlayer===0x1?playerLives:player1Lives,_0x1f7157=isTwoPlayerMode&&selectedGameMode===_0x47d335(0xed)?player1Score:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x1?score:player1Score;_0x29da7e[_0x47d335(0xc9)]({'num':0x1,'currentLives':_0x3fbe71,'currentScore':_0x1f7157,'thresholdsMet':player1LifeThresholdsMet});}else{if(_0x383f21===0x2&&isTwoPlayerMode){const _0x27e8f6=selectedGameMode===_0x47d335(0xed)?player2Lives:selectedGameMode===_0x47d335(0x14b)&&currentPlayer===0x2?playerLives:player2Lives,_0x32c064=selectedGameMode===_0x47d335(0xed)?player2Score:selectedGameMode===_0x47d335(0x14b)&&currentPlayer===0x2?score:player2Score;_0x29da7e[_0x47d335(0xc9)]({'num':0x2,'currentLives':_0x27e8f6,'currentScore':_0x32c064,'thresholdsMet':player2LifeThresholdsMet});}else{if(isTwoPlayerMode&&selectedGameMode===_0x47d335(0xed)&&_0x383f21===null)_0x29da7e['push']({'num':0x1,'currentLives':player1Lives,'currentScore':player1Score,'thresholdsMet':player1LifeThresholdsMet}),_0x29da7e[_0x47d335(0xc9)]({'num':0x2,'currentLives':player2Lives,'currentScore':player2Score,'thresholdsMet':player2LifeThresholdsMet});else{if(!isTwoPlayerMode&&(_0x383f21===null||_0x383f21===0x1))_0x29da7e[_0x47d335(0xc9)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet});else isTwoPlayerMode&&selectedGameMode===_0x47d335(0x14b)&&_0x383f21===currentPlayer&&(currentPlayer===0x1?_0x29da7e[_0x47d335(0xc9)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet}):_0x29da7e[_0x47d335(0xc9)]({'num':0x2,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player2LifeThresholdsMet}));}}}_0x29da7e['forEach'](_0x139884=>{const _0x2d7019=_0x47d335;let _0x4c34b9=![];while(!![]){let _0x41b9f1=![],_0x1265de=-0x1;const _0x2a6e71=_0x139884[_0x2d7019(0x176)][_0x2d7019(0x180)];if(_0x2a6e71===0x0)_0x1265de=EXTRA_LIFE_THRESHOLD_1;else{if(_0x2a6e71===0x1&&!_0x139884[_0x2d7019(0x176)][_0x2d7019(0x8b)](EXTRA_LIFE_THRESHOLD_2))_0x1265de=EXTRA_LIFE_THRESHOLD_2;else{if(_0x2a6e71>=0x1&&_0x139884['thresholdsMet'][_0x2d7019(0x8b)](EXTRA_LIFE_THRESHOLD_1)&&_0x139884['thresholdsMet'][_0x2d7019(0x8b)](EXTRA_LIFE_THRESHOLD_2)){let _0x4bc442=0x0;_0x139884[_0x2d7019(0x176)][_0x2d7019(0x10c)](_0x53cd20=>{_0x53cd20>=EXTRA_LIFE_THRESHOLD_2&&(_0x53cd20-EXTRA_LIFE_THRESHOLD_2)%RECURRING_EXTRA_LIFE_INTERVAL===0x0&&_0x4bc442++;}),_0x1265de=EXTRA_LIFE_THRESHOLD_2+_0x4bc442*RECURRING_EXTRA_LIFE_INTERVAL;}else{if(_0x2a6e71===0x1&&_0x139884[_0x2d7019(0x176)][_0x2d7019(0x8b)](EXTRA_LIFE_THRESHOLD_1)&&!_0x139884[_0x2d7019(0x176)][_0x2d7019(0x8b)](EXTRA_LIFE_THRESHOLD_2))_0x1265de=EXTRA_LIFE_THRESHOLD_2;else _0x2a6e71===0x1&&_0x139884['thresholdsMet'][_0x2d7019(0x8b)](EXTRA_LIFE_THRESHOLD_2)&&!_0x139884[_0x2d7019(0x176)][_0x2d7019(0x8b)](EXTRA_LIFE_THRESHOLD_1)&&(_0x1265de=EXTRA_LIFE_THRESHOLD_1);}}}if(_0x1265de!==-0x1&&_0x139884['currentScore']>=_0x1265de&&!_0x139884[_0x2d7019(0x176)][_0x2d7019(0x8b)](_0x1265de)){if(_0x139884[_0x2d7019(0x111)]===0x1){if(isTwoPlayerMode&&selectedGameMode===_0x2d7019(0xed))player1Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x2d7019(0x14b)&&currentPlayer===0x1)playerLives++;else{if(!isTwoPlayerMode)playerLives++;}}player1Lives=isTwoPlayerMode&&selectedGameMode==='coop'?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x2d7019(0x14b)&&currentPlayer===0x1?playerLives:player1Lives,_0x139884[_0x2d7019(0xe5)]=player1Lives;}else{if(_0x139884[_0x2d7019(0x111)]===0x2){if(isTwoPlayerMode&&selectedGameMode===_0x2d7019(0xed))player2Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x2d7019(0x14b)&&currentPlayer===0x2)playerLives++;}player2Lives=isTwoPlayerMode&&selectedGameMode===_0x2d7019(0xed)?player2Lives:isTwoPlayerMode&&selectedGameMode===_0x2d7019(0x14b)&&currentPlayer===0x2?playerLives:player2Lives,_0x139884[_0x2d7019(0xe5)]=player2Lives;}}_0x139884[_0x2d7019(0x176)][_0x2d7019(0xe6)](_0x1265de),_0x4c34b9=!![],_0x41b9f1=!![];}if(!_0x41b9f1)break;}_0x4c34b9&&!showExtraLifeMessage&&!showCsBonusScoreMessage&&!showPerfectMessage&&!showCsHitsMessage&&!showCSClearMessage&&!showReadyMessage&&setTimeout(()=>{const _0x428348=_0x2d7019;if(isInGameState){explosions=[];if(typeof updateExplosions==='function')updateExplosions();showExtraLifeMessage=!![],extraLifeMessageStartTime=Date[_0x428348(0x12f)](),playSound(_0x428348(0xcb),![],0.5);}},EXPLOSION_DURATION);});}catch(_0x27c1ba){console[_0x47d335(0x186)](_0x47d335(0x17f),_0x27c1ba);}}