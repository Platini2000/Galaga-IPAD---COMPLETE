const _0x42eb05=_0x4a68;(function(_0x5d5f4e,_0x47e5c3){const _0x5e6283=_0x4a68,_0x18f8a2=_0x5d5f4e();while(!![]){try{const _0x5b9b27=-parseInt(_0x5e6283(0x12b))/0x1+parseInt(_0x5e6283(0x118))/0x2*(-parseInt(_0x5e6283(0x155))/0x3)+-parseInt(_0x5e6283(0x240))/0x4*(parseInt(_0x5e6283(0x241))/0x5)+-parseInt(_0x5e6283(0x22e))/0x6*(parseInt(_0x5e6283(0x16e))/0x7)+parseInt(_0x5e6283(0x181))/0x8*(parseInt(_0x5e6283(0x104))/0x9)+-parseInt(_0x5e6283(0x1de))/0xa*(parseInt(_0x5e6283(0x171))/0xb)+parseInt(_0x5e6283(0x176))/0xc;if(_0x5b9b27===_0x47e5c3)break;else _0x18f8a2['push'](_0x18f8a2['shift']());}catch(_0x13a440){_0x18f8a2['push'](_0x18f8a2['shift']());}}}(_0x36a5,0x9b8ee));function generateAttackPathInternal(_0xa934){const _0x208f40=_0x4a68;try{if(!_0xa934||!gameCanvas)return[];const _0x486826=_0xa934[_0x208f40(0x1ea)]===ENEMY3_TYPE?BOSS_WIDTH:_0xa934[_0x208f40(0x1ea)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x48e556=_0xa934[_0x208f40(0x1ea)]===ENEMY3_TYPE?BOSS_HEIGHT:_0xa934['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x2fb9a2=_0x486826*0.5,_0x1cc570=gameCanvas[_0x208f40(0x230)],_0x3c4aca=gameCanvas[_0x208f40(0x11f)];let _0x1976d1=[];const _0x445830={'x':_0xa934['x'],'y':_0xa934['y']},_0x2d32e4=Math[_0x208f40(0x16c)](_0x3c4aca*0.06,_0x48e556*1.8),_0x5a5375=Math[_0x208f40(0x16c)](_0x1cc570*0.04,_0x486826*1.2),_0x500d90=_0xa934['x']+_0x486826/0x2<_0x1cc570/0x2?0x1:-0x1,_0x2ab9e5={'x':_0x445830['x']-_0x500d90*_0x5a5375*0.6,'y':_0x445830['y']-_0x2d32e4};_0x2ab9e5['x']=Math[_0x208f40(0x1cb)](_0x2fb9a2,Math[_0x208f40(0x16c)](_0x1cc570-_0x2fb9a2-_0x486826,_0x2ab9e5['x'])),_0x2ab9e5['y']=Math[_0x208f40(0x1cb)](_0x2fb9a2,_0x2ab9e5['y']);const _0x448363={'x':_0x445830['x']+_0x500d90*_0x5a5375*0.1,'y':_0x445830['y']-_0x2d32e4*1.4},_0x353311={'x':_0x2ab9e5['x']+_0x500d90*_0x5a5375*0.3,'y':_0x445830['y']-_0x2d32e4*1.5},_0x32051b={'p0':_0x445830,'p1':_0x448363,'p2':_0x353311,'p3':_0x2ab9e5};_0x1976d1[_0x208f40(0x20b)](_0x32051b);const _0x2fed1c=_0x2ab9e5,_0x31120d=_0x3c4aca*0.45,_0x407f28=_0x1cc570*0.22,_0xda74b5=_0x3c4aca*0.28,_0x12668f=0.5,_0x2b618b=0.6,_0x3c6dc9=_0x3c4aca*0.85,_0x5d3fb1=Math[_0x208f40(0x1a6)](Math[_0x208f40(0x12e)]()*0x3);let _0x1335ec=[];if(_0x5d3fb1===0x0){const _0x71e728=_0x31120d+Math['random']()*_0x3c4aca*0.1,_0x29c03b=_0x407f28+Math['random']()*_0x1cc570*0.08,_0x3dd39e=_0xda74b5+Math['random']()*_0x3c4aca*0.08,_0x5735f=_0x2fed1c['x']+_0x500d90*_0x29c03b*0.5,_0x38e18d=Math['min'](_0x3c6dc9,_0x2fed1c['y']+_0x71e728),_0x2cb9be=_0x5735f+_0x500d90*_0x29c03b*0.5,_0x2591b3=Math[_0x208f40(0x1cb)](_0x2fed1c['y']+0x14,_0x38e18d-_0x3dd39e),_0xfec256=_0x2cb9be-_0x500d90*_0x29c03b*0.9,_0x2e042b=Math[_0x208f40(0x1cb)](_0x2fed1c['y']+0x28,_0x2591b3+_0x3dd39e*0.6),_0x36d67e=_0xfec256-_0x500d90*_0x29c03b*0.3,_0x598476=_0x3c4aca+_0x48e556*0x2,_0x24f12e=Math[_0x208f40(0x1cb)](_0x2fb9a2,Math[_0x208f40(0x16c)](_0x1cc570-_0x2fb9a2-_0x486826,_0x5735f)),_0x40e801=Math[_0x208f40(0x1cb)](_0x2fb9a2,Math[_0x208f40(0x16c)](_0x1cc570-_0x2fb9a2-_0x486826,_0x2cb9be)),_0x940c4d=Math[_0x208f40(0x1cb)](_0x2fb9a2,Math[_0x208f40(0x16c)](_0x1cc570-_0x2fb9a2-_0x486826,_0xfec256)),_0x4ea4d8={'x':_0x2fed1c['x'],'y':_0x2fed1c['y']+_0x71e728*_0x2b618b*0.5},_0x1a8b7f={'x':_0x24f12e-_0x500d90*_0x29c03b*_0x12668f,'y':_0x38e18d},_0x46b30d={'x':_0x24f12e,'y':_0x38e18d},_0x1c6d46={'x':_0x24f12e+_0x500d90*_0x29c03b*_0x12668f,'y':_0x38e18d},_0xf906c9={'x':_0x40e801,'y':_0x2591b3+_0x3dd39e*_0x2b618b},_0x17c2ce={'x':_0x40e801,'y':_0x2591b3},_0x2b713d={'x':_0x40e801,'y':_0x2591b3-_0x3dd39e*_0x2b618b*0.5},_0x51c201={'x':_0x940c4d+_0x500d90*_0x29c03b*_0x12668f,'y':_0x2e042b},_0x44648e={'x':_0x940c4d,'y':_0x2e042b},_0x441749={'x':_0x44648e['x'],'y':_0x44648e['y']+_0x3c4aca*0.1},_0x3a7041={'x':_0x36d67e,'y':_0x598476-_0x3c4aca*0.2},_0x26b5fe={'x':_0x36d67e,'y':_0x598476};_0x1335ec=[{'p0':_0x2fed1c,'p1':_0x4ea4d8,'p2':_0x1a8b7f,'p3':_0x46b30d},{'p0':_0x46b30d,'p1':_0x1c6d46,'p2':_0xf906c9,'p3':_0x17c2ce},{'p0':_0x17c2ce,'p1':_0x2b713d,'p2':_0x51c201,'p3':_0x44648e},{'p0':_0x44648e,'p1':_0x441749,'p2':_0x3a7041,'p3':_0x26b5fe}];}else{if(_0x5d3fb1===0x1){const _0x4f1da0=_0x31120d*0.8+Math[_0x208f40(0x12e)]()*_0x3c4aca*0.1,_0x5acaad=_0x407f28*1.2+Math[_0x208f40(0x12e)]()*_0x1cc570*0.1,_0x300cb6=_0xda74b5*0.7+Math[_0x208f40(0x12e)]()*_0x3c4aca*0.1,_0x332f23=_0x2fed1c['x']+_0x500d90*_0x5acaad*0.4,_0x494d0d=Math[_0x208f40(0x16c)](_0x3c6dc9-_0x300cb6*0.5,_0x2fed1c['y']+_0x4f1da0*0.6),_0x17206f=_0x332f23+_0x500d90*_0x5acaad*0.6,_0x569610=Math['min'](_0x3c6dc9,_0x494d0d+_0x300cb6),_0x4d69e0=_0x17206f-_0x500d90*_0x5acaad*0.5,_0x5b0b0b=_0x3c4aca+_0x48e556*0x2,_0x7dd18c=Math[_0x208f40(0x1cb)](_0x2fb9a2,Math[_0x208f40(0x16c)](_0x1cc570-_0x2fb9a2-_0x486826,_0x332f23)),_0x5d8dd7=Math[_0x208f40(0x1cb)](_0x2fb9a2,Math[_0x208f40(0x16c)](_0x1cc570-_0x2fb9a2-_0x486826,_0x17206f)),_0x2343a8={'x':_0x2fed1c['x']-_0x500d90*_0x5acaad*0.1,'y':_0x2fed1c['y']+_0x4f1da0*0.3},_0x4d227e={'x':_0x7dd18c-_0x500d90*_0x5acaad*_0x12668f*0.8,'y':_0x494d0d+_0x300cb6*_0x2b618b*0.4},_0x919eed={'x':_0x7dd18c,'y':_0x494d0d},_0x12ba78={'x':_0x7dd18c+_0x500d90*_0x5acaad*_0x12668f*0.8,'y':_0x494d0d-_0x300cb6*_0x2b618b*0.4},_0x584c0b={'x':_0x5d8dd7+_0x500d90*_0x5acaad*_0x12668f*0.6,'y':_0x569610+_0x300cb6*_0x2b618b*0.5},_0x1acfc3={'x':_0x5d8dd7,'y':_0x569610},_0x324959={'x':_0x5d8dd7-_0x500d90*_0x5acaad*0.2,'y':_0x569610+_0x3c4aca*0.1},_0x20544a={'x':_0x4d69e0,'y':_0x5b0b0b-_0x3c4aca*0.3},_0x3d8a={'x':_0x4d69e0,'y':_0x5b0b0b};_0x1335ec=[{'p0':_0x2fed1c,'p1':_0x2343a8,'p2':_0x4d227e,'p3':_0x919eed},{'p0':_0x919eed,'p1':_0x12ba78,'p2':_0x584c0b,'p3':_0x1acfc3},{'p0':_0x1acfc3,'p1':_0x324959,'p2':_0x20544a,'p3':_0x3d8a}];}else{const _0x4f0149=_0x31120d*0.6+Math[_0x208f40(0x12e)]()*_0x3c4aca*0.05,_0xb71b05=_0x407f28*0.7+Math[_0x208f40(0x12e)]()*_0x1cc570*0.05,_0x32dd92=_0xda74b5*0.6+Math[_0x208f40(0x12e)]()*_0x3c4aca*0.05,_0x138c61=_0x32dd92*1.5,_0x28c2a3=_0x2fed1c['x']+_0x500d90*_0xb71b05*0.5,_0x4c0746=Math[_0x208f40(0x16c)](_0x3c6dc9-_0x138c61,_0x2fed1c['y']+_0x4f0149),_0x41a899=_0x28c2a3+_0x500d90*_0xb71b05*0.5,_0x4ee78f=_0x4c0746+_0x32dd92,_0x505e4a=_0x41a899-_0x500d90*_0xb71b05*0.8,_0x50f0dd=Math[_0x208f40(0x16c)](_0x3c6dc9,_0x4ee78f+_0x138c61*0.7),_0xf628de=_0x505e4a+_0x500d90*_0xb71b05*0.4,_0x338809=_0x50f0dd+_0x32dd92*0.8,_0x15ead7=_0xf628de,_0xa0e2b0=_0x3c4aca+_0x48e556*0x2,_0x34df42=Math['max'](_0x2fb9a2,Math[_0x208f40(0x16c)](_0x1cc570-_0x2fb9a2-_0x486826,_0x28c2a3)),_0x7c78ac=Math[_0x208f40(0x1cb)](_0x2fb9a2,Math['min'](_0x1cc570-_0x2fb9a2-_0x486826,_0x41a899)),_0x64f029=Math['max'](_0x2fb9a2,Math[_0x208f40(0x16c)](_0x1cc570-_0x2fb9a2-_0x486826,_0x505e4a)),_0x14b3f6=Math[_0x208f40(0x1cb)](_0x2fb9a2,Math[_0x208f40(0x16c)](_0x1cc570-_0x2fb9a2-_0x486826,_0xf628de)),_0x4e7db6={'x':_0x2fed1c['x'],'y':_0x2fed1c['y']+_0x4f0149*0.5},_0x304a49={'x':_0x34df42-_0x500d90*_0xb71b05*_0x12668f,'y':_0x4c0746+_0x32dd92*_0x2b618b*0.3},_0x10e548={'x':_0x34df42,'y':_0x4c0746},_0x381a41={'x':_0x34df42+_0x500d90*_0xb71b05*_0x12668f,'y':_0x4c0746-_0x32dd92*_0x2b618b*0.3},_0x36d854={'x':_0x7c78ac+_0x500d90*_0xb71b05*_0x12668f,'y':_0x4ee78f+_0x32dd92*_0x2b618b*0.5},_0x4f4193={'x':_0x7c78ac,'y':_0x4ee78f},_0x1c46b1={'x':_0x7c78ac-_0x500d90*_0xb71b05*_0x12668f,'y':_0x4ee78f-_0x32dd92*_0x2b618b*0.5},_0x4589fc={'x':_0x64f029-_0x500d90*_0xb71b05*_0x12668f,'y':_0x50f0dd+_0x32dd92*_0x2b618b*0.4},_0x2435ea={'x':_0x64f029,'y':_0x50f0dd},_0x47752d={'x':_0x64f029+_0x500d90*_0xb71b05*_0x12668f,'y':_0x50f0dd-_0x32dd92*_0x2b618b*0.4},_0x436a95={'x':_0x14b3f6+_0x500d90*_0xb71b05*_0x12668f,'y':_0x338809+_0x32dd92*_0x2b618b*0.6},_0x55b4ac={'x':_0x14b3f6,'y':_0x338809},_0x246246={'x':_0x14b3f6-_0x500d90*_0xb71b05*0.1,'y':_0x338809+_0x3c4aca*0.05},_0x47b7c9={'x':_0x15ead7,'y':_0xa0e2b0-_0x3c4aca*0.2},_0x23fea9={'x':_0x15ead7,'y':_0xa0e2b0};_0x1335ec=[{'p0':_0x2fed1c,'p1':_0x4e7db6,'p2':_0x304a49,'p3':_0x10e548},{'p0':_0x10e548,'p1':_0x381a41,'p2':_0x36d854,'p3':_0x4f4193},{'p0':_0x4f4193,'p1':_0x1c46b1,'p2':_0x4589fc,'p3':_0x2435ea},{'p0':_0x2435ea,'p1':_0x47752d,'p2':_0x436a95,'p3':_0x55b4ac},{'p0':_0x55b4ac,'p1':_0x246246,'p2':_0x47b7c9,'p3':_0x23fea9}];}}return _0x1976d1[_0x208f40(0x20b)](..._0x1335ec),_0x1976d1;}catch(_0x4fae6a){return console[_0x208f40(0x1a4)]('[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20'+_0xa934?.['id']+':',_0x4fae6a),[];}}window[_0x42eb05(0x22c)]=generateAttackPathInternal;function resetAllMessagesInternal(){showReadyMessage=![],isShowingIntro=![],showCsHitsMessage=![],showPerfectMessage=![],showCsBonusScoreMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],isShowingCaptureMessage=![],isShowingPlayerGameOverMessage=![],isShowingCoopPlayersReady=![],csHitsMessageStartTime=0x0,perfectMessageStartTime=0x0,csBonusScoreMessageStartTime=0x0,csClearMessageStartTime=0x0,extraLifeMessageStartTime=0x0,readyMessageStartTime=0x0,captureMessageStartTime=0x0,playerGameOverMessageStartTime=0x0,csCompletionDelayStartTime=0x0,introDisplayStartTime=0x0,coopPlayersReadyStartTime=0x0;}window['resetAllMessages']=resetAllMessagesInternal;function stopAllGameSoundsInternal(){const _0x32308a=_0x42eb05;if(typeof soundPaths===_0x32308a(0x10e)&&soundPaths!==null&&typeof stopSound==='function')for(const _0x4ba66a in soundPaths){stopSound(_0x4ba66a);}isGridSoundPlaying=![];}function _0x36a5(){const _0x442d06=['1P_VS_AI_NORMAL','Error\x20handling\x20player\x20input:','attackPathSegmentIndex','bossHit2Sound','\x20in\x20returning','csClearSound','Error\x20starting\x20attack\x20for\x20','substring','canFireThisDive','capturing','attackPathT','Error\x20updating\x20explosions:','358821xdpyCD','velocityX','size','\x20attacking,\x20invalid\x20segment\x20','\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22','\x20is\x20empty\x20or\x20invalid.','startSound','Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20','object','red','pathT','.\x20Skipping.','targetGridY','\x20invalid!\x20Skipping.','levelUpSound','main','.\x20Removing.','pressed','153392QZwRko','NORMAL','stopAllGameSounds','Error\x20cloning\x20full\x20grid\x20wave\x20pattern:','[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','Entrance\x20Wave:\x20No\x20squadrons\x20or\x20enemies\x20scheduled\x20for\x20level\x20','center','height','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!','clear','CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20','indexOf','slice','coop','\x20after\x20invalid\x20path\x20index','middle','capturePrepareTimeout','particles','GAME\x20EXIT','731631zaNjAE','sort','show_results','random','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','drawImage','\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20','rotationDirection','hiScoreSound','targetPlayerId','preparing_capture','attacking','destroyed','rapid','green','round','creationTime','shipObj','squadronEnemyIndex','state','Invalid\x20CS\x20Bezier\x20segment\x20','showing_capture_message','dualShipSound',',\x20isCS:\x20','gridCol','full_grid','Error\x20during\x20post-landing\x20fire\x20for\x20','1UP','Error\x20getting\x20grid\x20pos\x20for\x20','predictedCollisions','\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.','landed','CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.','filter','pause','butterflyDiveSound','\x20for\x20SHARED\x20path\x20','Error\x20getting\x20target\x20grid\x20pos\x20for\x20','2UP','initialCaptureAnimationY','\x20path\x20index\x20','chosenDodgeDir','3zTeyzZ','[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20','pathSegmentIndex','entrance_flight_1','scheduledStartTime','),\x20index\x20','isDamaged','[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20','\x20points.\x20Health\x20was:\x20','\x20off\x20screen:','waveUpSound','enemyShootSound','normal','naturalWidth','diving_to_capture_position','fillStyle','CS_HorizontalFlyByL','hasFired','\x20(Path\x20','newButtonStates','returnLogDone','thresholdsMet','keys','min','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20','574KoioSp',',\x20Idx\x20','Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20','10608686iqItVp','right','boss_loop_left','bossGalagaDiveSound','Error\x20updating\x20floating\x20scores:','42552072VFTCSf','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20or\x20with\x20no\x20definition.\x20Level\x20','completed','CRITICAL:\x20Entrance\x20flight\x201\x20wave\x20pattern\x20(index\x200)\x20is\x20missing\x20or\x20empty.','playerId','resetWave','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','getGamepads','num','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','152PVNZRo','number','stack','returning','CS3_DiveLoopR_Sharp','playerShootSound','lostLifeSound','currentScore','Full\x20Grid:\x20Squadron\x20','Error\x20in\x20triggerImmediateCaptureDive:','buttons','isDodging','save','following_entrance_path','naturalHeight',',\x20def\x20length:\x20','rotation','\x20(no\x20attack\x20path):','Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20','CRITICAL:\x20waveEntrancePatterns\x20not\x20defined\x20or\x20insufficient\x20for\x20wave\x20generation.','some','\x20for\x20path\x20','\x20returning\x20without\x20target\x20coords.\x20Recalculating.','CS:\x20Path\x20','sin','\x20attacking,\x20index\x20','highScoreHolderId','totalRotation','player1','desiredTargetX','targetEnemyForAI','health','\x20missing\x20SHARED\x20path\x20','switch_player','.\x20Enemy\x20','error','NORMAL\x20GAME','floor','tripleAttackSound','sign','resetGame','hasFiredPostLanding','total','pathId','explosionSound','\x20out\x20of\x20bounds\x20(','alpha','CS3_DiveLoopL_Sharp','Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20','following_bezier_path','ai_p2','forEach','targetGridX','stringify','targetX','CRITICAL:\x20Required\x20CS\x20path\x20\x22','challenging_stage','Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20','capturedShipDimensions','dual','captureMessageStartTime','Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22','capturedShipX','lastFiredTime','toString','moving_to_grid','CS_LoopAttack_BR','hasOwnProperty','bossHit1Sound','CRITICAL:\x20normalWaveEntrancePaths\x20not\x20defined\x20or\x20empty.\x20Cannot\x20assign\x20paths\x20to\x20squadrons.','enemy-grid-','rotationCompleted','sqrt','Invalid\x20next\x20CS\x20Bezier\x20segment\x20','max','isFromAbove','Enemy\x20',',\x20index\x20','Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20','tintProgress','length','\x20at\x20end\x20of\x20normal\x20path\x20','back','entranceSound','.\x20Switching\x20to\x20moving_to_grid.','Invalid\x20start\x20segment\x20for\x20path\x20','Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20','capturedShipY','\x20after\x20bad\x20next\x20segment','has','velocityY','white','\x20invalid!\x20Skipping\x20squadron.','10kLOnsT','Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20','left','find','Error\x20in\x20renderGame:','LOGO','NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20','CRITICAL:\x20Entrance\x20flight\x202\x20wave\x20pattern\x20(index\x201)\x20is\x20missing\x20or\x20empty.','\x20has\x20invalid\x20enemy\x20data.','captureSound','enemies','targetY','type','justReturned','in_grid','FATAL\x20Error\x20in\x20moveEntities\x20(Restored\x20Conditions):','every','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','Error\x20checking/awarding\x20extra\x20life:','hasCapturedShip','splice','\x20(invalid\x20attack\x20segment):','abs','gameOverSound','Invalid\x20next\x20Normal\x20Bezier\x20segment\x20','gridBackgroundSound','shouldTryShoot','CS_LoopAttack_TR','undefined','30px\x20Arial','originalVy','playerNum','function','isArray','restore','cos','EASY','minDistance','unshift','Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','clearRect','attackGroupId','atan2','complete','speed','push','string','isPreparingForImmediateCapture','collisions','shoot','shipCapturedSound','Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20','\x20at\x20[','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','attackPathSegments','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','entrancePathId','capturedShipLastFiredTime','includes','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','map','NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20','\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.','attackFormationOffsetX','attack-',',\x20isFullGrid:\x20','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','Unknown\x20wave\x20type\x20for\x20level\x20','Entrance\x20Wave:\x20Path\x20','blue','player2','captureStartTime','captureDiveInitiationTime','\x22\x20for\x20enemy\x20in\x20squadron\x20',',\x20Path\x20','\x20(state:\x20','\x20not\x20found.','warn','generateAttackPath','2\x20PLAYER','73938KfJGGm','1P_VS_AI_COOP','width','Error\x20creating\x20player\x20bullet(s):','single','Invalid\x20Normal\x20Bezier\x20segment\x20',').\x20Skipping.','Error\x20cloning\x20entrance\x20flight\x202\x20wave\x20pattern:','parse','CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','preparing_attack','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','Error\x20cloning\x20entrance\x20flight\x201\x20wave\x20pattern:','FATAL\x20Error\x20in\x20moveEntities:','CRITICAL:\x20Full\x20grid\x20wave\x20pattern\x20(index\x200)\x20is\x20missing\x20or\x20empty.','squadronId','duration','Error\x20in\x20aiControl:','29936iHwUeG','590VjuybN','[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','entrance_flight_2','now','captureAnimationRotation','\x20for\x20squadron\x20','HIGH\x20SCORE','1\x20PLAYER','dir','grey','gridRow','butterflyHitSound','!\x20Returning.'];_0x36a5=function(){return _0x442d06;};return _0x36a5();}window[_0x42eb05(0x11a)]=stopAllGameSoundsInternal;function _0x4a68(_0x3b8d33,_0x50ff91){const _0x36a5f8=_0x36a5();return _0x4a68=function(_0x4a682d,_0x3ba1b4){_0x4a682d=_0x4a682d-0xf6;let _0x3fff46=_0x36a5f8[_0x4a682d];return _0x3fff46;},_0x4a68(_0x3b8d33,_0x50ff91);}function resetGameInternal(){const _0xb54606=_0x42eb05;score=0x0,level=0x1,playerLives=0x3,window[_0xb54606(0x19b)]=null;if(isTwoPlayerMode){player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,currentPlayer=0x1,player1CompletedLevel=-0x1,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0xb54606(0x121)]();else player1LifeThresholdsMet=new Set();if(player2LifeThresholdsMet instanceof Set)player2LifeThresholdsMet[_0xb54606(0x121)]();else player2LifeThresholdsMet=new Set();player1IsDualShipActive=![],player2IsDualShipActive=![],isPlayer1ShipCaptured=![],isPlayer2ShipCaptured=![],isPlayer1WaitingForRespawn=![],isPlayer2WaitingForRespawn=![],isPlayer1Invincible=![],isPlayer2Invincible=![],player1RespawnTime=0x0,player2RespawnTime=0x0,player1InvincibilityEndTime=0x0,player2InvincibilityEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![];if(selectedGameMode==='coop'){playerLives=0x0;if(gameCanvas&&gameCanvas[_0xb54606(0x230)]>0x0&&gameCanvas['height']>0x0){const _0xb84a3b=gameCanvas[_0xb54606(0x230)]/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x4e939a=gameCanvas[_0xb54606(0x230)]/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x39377c=gameCanvas[_0xb54606(0x11f)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;ship1={'x':_0xb84a3b,'y':_0x39377c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0xb84a3b,'id':'p1'},ship2={'x':_0x4e939a,'y':_0x39377c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x4e939a,'id':'p2'},(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xb54606(0x22f))&&(smoothedShip1X=_0xb84a3b,smoothedShip2X=_0x4e939a,aiShip1TargetEnemy=null,aiShip2TargetEnemy=null,aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0,aiShip1LastShotTime=0x0,aiShip2LastShotTime=0x0,aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);}ship=null;}else{if(!ship&&gameCanvas&&gameCanvas[_0xb54606(0x230)]>0x0&&gameCanvas['height']>0x0)ship={'x':Math['round'](gameCanvas[_0xb54606(0x230)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0xb54606(0x115)},ship[_0xb54606(0x1b7)]=ship['x'];else ship&&gameCanvas&&gameCanvas[_0xb54606(0x230)]>0x0&&gameCanvas[_0xb54606(0x11f)]>0x0&&(ship['x']=Math[_0xb54606(0x13a)](gameCanvas[_0xb54606(0x230)]/0x2-SHIP_WIDTH/0x2),ship[_0xb54606(0x1b7)]=ship['x'],ship['y']=gameCanvas[_0xb54606(0x11f)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}}else{player1Lives=0x3,player1Score=0x0,player1MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0xb54606(0x121)]();else player1LifeThresholdsMet=new Set();if(!ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas['height']>0x0)ship={'x':Math[_0xb54606(0x13a)](gameCanvas[_0xb54606(0x230)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0xb54606(0x11f)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':'main'},ship['targetX']=ship['x'];else ship&&gameCanvas&&gameCanvas[_0xb54606(0x230)]>0x0&&gameCanvas[_0xb54606(0x11f)]>0x0&&(ship['x']=Math['round'](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),ship['targetX']=ship['x'],ship['y']=gameCanvas[_0xb54606(0x11f)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isDualShipActive=![];if(!isTwoPlayerMode)player1IsDualShipActive=![];fallingShips=[],visualOffsetX=-0x14,gameOverSequenceStartTime=0x0,isShowingResultsScreen=![],gameStartTime=Date[_0xb54606(0x244)](),gameJustStarted=!![],gameJustStartedAndWaveLaunched=![],currentGridOffsetX=0x0,gridMoveDirection=0x1,gridJustCompleted=![],isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,lastGridFireCheckTime=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,scoreEarnedThisCS=0x0,challengingStageEnemiesHit=0x0,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined,aiCanShootTime=0x0,aiLastShotTime=0x0,!(selectedGameMode===_0xb54606(0x125)&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xb54606(0x22f)))&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0),playerLastShotTime=0x0,player1LastShotTime=0x0,player2LastShotTime=0x0,p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isShowingCoopPlayersReady=![],coopPlayersReadyStartTime=0x0,resetWaveInternal();}window[_0x42eb05(0x1a9)]=resetGameInternal;function resetWaveInternal(){const _0x1f1732=_0x42eb05;isWaveTransitioning=![],readyForNextWave=![],readyForNextWaveReset=![],isEntrancePhaseActive=!![],firstEnemyLanded=![],captureAttemptMadeThisLevel=![],gameJustStartedAndWaveLaunched=![],aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![],enemies=[],bullets=[],enemyBullets=[],explosions=[],floatingScores=[],hitSparks=[];Array[_0x1f1732(0x1ff)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x1f1732(0x1b4)](clearTimeout);enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;const _0x1fcd10=getWaveTypeInternal(level);isChallengingStage=_0x1fcd10===_0x1f1732(0x1b9),isFullGridWave=_0x1fcd10==='full_grid',challengingStageEnemiesHit=0x0,scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null;(isFullGridWave||isChallengingStage)&&(isEntrancePhaseActive=![]);const _0x1c61c5=isShowingDemoText;resetAllMessagesInternal();_0x1c61c5&&(isShowingDemoText=!![]);if(selectedGameMode===_0x1f1732(0x125)&&level===0x1)isShowingIntro=![],introStep=0x2;else{if(isTwoPlayerMode&&selectedGameMode===_0x1f1732(0x161)||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1f1732(0xf8)){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(isChallengingStage){introStep=0x3,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(level===0x1&&!isTwoPlayerMode){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{introStep=0x2,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}}}}isShowingIntro&&!(selectedGameMode===_0x1f1732(0x125)&&level===0x1)&&(introDisplayStartTime=Date[_0x1f1732(0x244)]());playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],currentWaveDefinition=generateWaveDefinitionInternal(level);if(selectedGameMode===_0x1f1732(0x125)){if(gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x1f1732(0x11f)]>0x0){const _0x5ef2b6=ship1&&player1Lives>0x0,_0xed15b9=ship2&&player2Lives>0x0,_0x3265ee=gameCanvas[_0x1f1732(0x11f)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x5ef2b6&&_0xed15b9){const _0x42ee78=gameCanvas['width']/0x2-gameCanvas[_0x1f1732(0x230)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1&&(ship1['targetX']=_0x42ee78,ship1['x']=_0x42ee78,smoothedShip1X=_0x42ee78,ship1['y']=_0x3265ee);const _0x3ab904=gameCanvas['width']/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2[_0x1f1732(0x1b7)]=_0x3ab904,ship2['x']=_0x3ab904,smoothedShip2X=_0x3ab904,ship2['y']=_0x3265ee);}else{if(_0x5ef2b6&&ship1){const _0x3c2d68=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x4fcca4=Math[_0x1f1732(0x13a)](gameCanvas[_0x1f1732(0x230)]/0x2-_0x3c2d68/0x2);ship1['targetX']=_0x4fcca4,ship1['x']=_0x4fcca4,smoothedShip1X=_0x4fcca4,ship1['y']=_0x3265ee;}else{if(_0xed15b9&&ship2){const _0x2172e8=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x40d788=Math[_0x1f1732(0x13a)](gameCanvas['width']/0x2-_0x2172e8/0x2);ship2[_0x1f1732(0x1b7)]=_0x40d788,ship2['x']=_0x40d788,smoothedShip2X=_0x40d788,ship2['y']=_0x3265ee;}}}}else{if(_0x5ef2b6&&ship1)ship1['y']=_0x3265ee;if(_0xed15b9&&ship2)ship2['y']=_0x3265ee;}}}else{if(ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x1f1732(0x11f)]>0x0&&(forceCenterShipNextReset||!isManualControl||isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)){let _0x4eaf0d=ship[_0x1f1732(0x230)];if(isDualShipActive)_0x4eaf0d=DUAL_SHIP_OFFSET_X+SHIP_WIDTH;ship['x']=Math[_0x1f1732(0x13a)](gameCanvas[_0x1f1732(0x230)]/0x2-_0x4eaf0d/0x2),ship[_0x1f1732(0x1b7)]=ship['x'],ship['y']=gameCanvas[_0x1f1732(0x11f)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isPlayerTwoAI&&selectedGameMode===_0x1f1732(0x161)&&currentPlayer===0x2)smoothedShipX=ship['x'];}else ship&&gameCanvas&&gameCanvas[_0x1f1732(0x230)]>0x0&&(ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);}forceCenterShipNextReset=![];if(!isManualControl&&aiNeedsStabilization&&selectedGameMode!=='coop'&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)){aiStabilizationEndTime=Date[_0x1f1732(0x244)]()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}else{if(isPlayerTwoAI&&selectedGameMode===_0x1f1732(0x161)&&currentPlayer===0x2&&aiNeedsStabilization){aiStabilizationEndTime=Date['now']()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}}}window[_0x42eb05(0x17b)]=resetWaveInternal;function getWaveTypeInternal(_0x49ffc7){const _0x5c85f8=_0x42eb05,_0x95655c=(_0x49ffc7-0x1)%0x4;switch(_0x95655c){case 0x0:return _0x5c85f8(0x144);case 0x1:return _0x5c85f8(0x158);case 0x2:return _0x5c85f8(0x1b9);case 0x3:return _0x5c85f8(0x243);default:return'unknown';}}window['getWaveType']=getWaveTypeInternal;function generateWaveDefinitionInternal(_0x1c6b4d){const _0x24b89c=_0x42eb05;let _0x140615=[];currentWavePatternIndex=-0x1;const _0x1d219a=getWaveTypeInternal(_0x1c6b4d);if(typeof waveEntrancePatterns===_0x24b89c(0x1fa)||!Array['isArray'](waveEntrancePatterns)||waveEntrancePatterns[_0x24b89c(0x1d1)]<0x2)return console[_0x24b89c(0x1a4)](_0x24b89c(0x194)),[];if(_0x1d219a===_0x24b89c(0x1b9))_0x140615=[];else{if(_0x1d219a===_0x24b89c(0x144)){currentWavePatternIndex=0x0;const _0xc50b00=waveEntrancePatterns[0x0];if(!_0xc50b00||_0xc50b00[_0x24b89c(0x1d1)]===0x0)console[_0x24b89c(0x1a4)](_0x24b89c(0x23c)),_0x140615=[];else try{_0x140615=JSON['parse'](JSON[_0x24b89c(0x1b6)](_0xc50b00),(_0x222714,_0x1224a6)=>{const _0x180db4=_0x24b89c;return _0x1224a6&&typeof _0x1224a6===_0x180db4(0x10e)&&_0x1224a6['type']===ENEMY3_TYPE&&typeof _0x1224a6['hasCapturedShip']===_0x180db4(0x1fa)&&(_0x1224a6[_0x180db4(0x1f1)]=![]),_0x1224a6;});}catch(_0x57d549){console[_0x24b89c(0x1a4)](_0x24b89c(0x11b),_0x57d549),_0x140615=[];}}else{if(_0x1d219a===_0x24b89c(0x158)){currentWavePatternIndex=0x0;const _0x697f15=waveEntrancePatterns[0x0];if(!_0x697f15||_0x697f15[_0x24b89c(0x1d1)]===0x0)console['error'](_0x24b89c(0x179)),_0x140615=[];else try{_0x140615=JSON[_0x24b89c(0x236)](JSON[_0x24b89c(0x1b6)](_0x697f15),(_0x3b2510,_0x40f8a5)=>{const _0x2a857d=_0x24b89c;return _0x40f8a5&&typeof _0x40f8a5==='object'&&_0x40f8a5[_0x2a857d(0x1ea)]===ENEMY3_TYPE&&typeof _0x40f8a5['hasCapturedShip']===_0x2a857d(0x1fa)&&(_0x40f8a5['hasCapturedShip']=![]),_0x40f8a5;});}catch(_0xb15002){console[_0x24b89c(0x1a4)](_0x24b89c(0x23a),_0xb15002),_0x140615=[];}}else{if(_0x1d219a===_0x24b89c(0x243)){currentWavePatternIndex=0x1;const _0x375870=waveEntrancePatterns[0x1];if(!_0x375870||_0x375870[_0x24b89c(0x1d1)]===0x0)console[_0x24b89c(0x1a4)](_0x24b89c(0x1e5)),_0x140615=[];else try{_0x140615=JSON[_0x24b89c(0x236)](JSON[_0x24b89c(0x1b6)](_0x375870),(_0x2fb92d,_0x328383)=>{const _0x376f0f=_0x24b89c;return _0x328383&&typeof _0x328383===_0x376f0f(0x10e)&&_0x328383[_0x376f0f(0x1ea)]===ENEMY3_TYPE&&typeof _0x328383[_0x376f0f(0x1f1)]===_0x376f0f(0x1fa)&&(_0x328383[_0x376f0f(0x1f1)]=![]),_0x328383;});}catch(_0x35006f){console[_0x24b89c(0x1a4)](_0x24b89c(0x235),_0x35006f),_0x140615=[];}}else console[_0x24b89c(0x22b)](_0x24b89c(0x221)+_0x1c6b4d+':\x20'+_0x1d219a),_0x140615=[];}}}if(_0x1d219a!==_0x24b89c(0x1b9)){if(typeof normalWaveEntrancePaths==='undefined'||Object[_0x24b89c(0x16b)](normalWaveEntrancePaths)[_0x24b89c(0x1d1)]===0x0)return console['error'](_0x24b89c(0x1c6)),_0x140615;for(let _0x4906cd=_0x140615[_0x24b89c(0x1d1)]-0x1;_0x4906cd>=0x0;_0x4906cd--){const _0x563d05=_0x140615[_0x4906cd];if(!normalWaveEntrancePaths?.[_0x563d05[_0x24b89c(0x1ac)]]){_0x140615[_0x24b89c(0x1f2)](_0x4906cd,0x1);continue;}if(_0x563d05[_0x24b89c(0x1e8)]&&Array[_0x24b89c(0x1ff)](_0x563d05[_0x24b89c(0x1e8)])){for(let _0x337cab=_0x563d05[_0x24b89c(0x1e8)]['length']-0x1;_0x337cab>=0x0;_0x337cab--){const _0x379e82=_0x563d05[_0x24b89c(0x1e8)][_0x337cab];(!_0x379e82||!normalWaveEntrancePaths?.[_0x379e82[_0x24b89c(0x216)]])&&_0x563d05[_0x24b89c(0x1e8)]['splice'](_0x337cab,0x1),_0x379e82&&_0x379e82['type']===ENEMY3_TYPE&&typeof _0x379e82[_0x24b89c(0x1f1)]===_0x24b89c(0x1fa)&&(_0x379e82[_0x24b89c(0x1f1)]=![]);}_0x563d05[_0x24b89c(0x1e8)][_0x24b89c(0x1d1)]===0x0&&_0x140615[_0x24b89c(0x1f2)](_0x4906cd,0x1);}else _0x140615[_0x24b89c(0x1f2)](_0x4906cd,0x1);}}return _0x140615;}window['generateWaveDefinition']=generateWaveDefinitionInternal;const createBulletSimple=(_0x85b549,_0x2b5159=null)=>{const _0x17d599=_0x42eb05;let _0x113c39=null,_0x4d473f=![];if(isTwoPlayerMode&&selectedGameMode===_0x17d599(0x125)){const _0x719685=ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured,_0x4d07ed=ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured;if(_0x719685&&_0x4d07ed)_0x113c39=Math[_0x17d599(0x12e)]()<0.5?ship1:ship2,_0x4d473f=!![];else{if(_0x719685)_0x113c39=ship1,_0x4d473f=!![];else _0x4d07ed&&(_0x113c39=ship2,_0x4d473f=!![]);}}else ship&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn&&(_0x113c39=ship,_0x4d473f=!![]);if(!_0x85b549||!isInGameState||!_0x4d473f||!_0x113c39)return![];const _0x427e9c=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x4156c8=_0x2b5159?_0x2b5159['x']:_0x85b549['x']+_0x85b549['width']/0x2,_0x371c7f=_0x2b5159?_0x2b5159['y']:_0x85b549['y']+_0x85b549[_0x17d599(0x11f)]/0x2;let _0x160535=0x0,_0x49a66e=_0x427e9c;const _0x5897f3=_0x113c39['x']+_0x113c39[_0x17d599(0x230)]/0x2-_0x4156c8,_0x190181=_0x113c39['y']+_0x113c39[_0x17d599(0x11f)]/0x2-_0x371c7f,_0x391688=Math['sqrt'](_0x5897f3*_0x5897f3+_0x190181*_0x190181);if(_0x391688>0x0){let _0x11eb6c=0x0;!isChallengingStage&&(_0x11eb6c=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x5d19f8=Math[_0x17d599(0x208)](_0x190181,_0x5897f3);_0x160535=Math[_0x17d599(0x201)](_0x5d19f8)*_0x427e9c*_0x11eb6c,_0x49a66e=Math[_0x17d599(0x1c9)](_0x427e9c**0x2-_0x160535**0x2),_0x49a66e=Math[_0x17d599(0x1cb)](_0x427e9c*(0x1-_0x11eb6c)*0.5,_0x49a66e);if(_0x190181<0x0&&_0x49a66e>0x0){}if(_0x190181<0x0)_0x49a66e=Math['abs'](_0x49a66e);return enemyBullets['push']({'x':_0x4156c8-ENEMY_BULLET_WIDTH/0x2,'y':_0x371c7f,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x160535,'vy':_0x49a66e,'type':_0x85b549[_0x17d599(0x1ea)]}),!![];}return![];};function scheduleSingleEntranceSquadron(_0x5d5092,_0x5cc53c,_0x6ebc2){const _0x2da303=_0x42eb05;if(isFullGridWave||isChallengingStage)return console[_0x2da303(0x22b)](_0x2da303(0x242)+level+_0x2da303(0x21f)+isFullGridWave+',\x20isCS:\x20'+isChallengingStage+_0x2da303(0x234)),_0x5d5092?.[_0x2da303(0x1e8)]?.[_0x2da303(0x1d1)]>0x0&&(enemiesSpawnedThisWave+=_0x5d5092[_0x2da303(0x1e8)]['length'],squadronCompletionStatus[_0x5cc53c]&&(squadronCompletionStatus[_0x5cc53c][_0x2da303(0x178)]=squadronCompletionStatus[_0x5cc53c]['total'])),![];const _0x5c3668=normalWaveEntrancePaths,_0x1f980c=_0x5d5092[_0x2da303(0x1ac)],_0x4b9bb9=_0x5c3668[_0x1f980c];if(!_0x4b9bb9||_0x4b9bb9[_0x2da303(0x1d1)]===0x0)return console[_0x2da303(0x1a4)](_0x2da303(0x222)+_0x1f980c+_0x2da303(0x246)+_0x5cc53c+_0x2da303(0x1dd)),_0x5d5092?.[_0x2da303(0x1e8)]?.[_0x2da303(0x1d1)]>0x0&&(enemiesSpawnedThisWave+=_0x5d5092[_0x2da303(0x1e8)][_0x2da303(0x1d1)],squadronCompletionStatus[_0x5cc53c]&&(squadronCompletionStatus[_0x5cc53c][_0x2da303(0x178)]=squadronCompletionStatus[_0x5cc53c][_0x2da303(0x1ab)])),![];const _0x16359c=setTimeout(()=>{const _0xf7c36f=_0x2da303,_0xa61845=enemySpawnTimeouts[_0xf7c36f(0x123)](_0x16359c);if(_0xa61845>-0x1)enemySpawnTimeouts[_0xf7c36f(0x1f2)](_0xa61845,0x1);let _0x3f3f8a=![];isTwoPlayerMode&&selectedGameMode===_0xf7c36f(0x125)?_0x3f3f8a=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x3f3f8a=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x3f3f8a||isFullGridWave){_0x5d5092?.[_0xf7c36f(0x1e8)]?.[_0xf7c36f(0x1d1)]>0x0&&(enemiesSpawnedThisWave+=_0x5d5092['enemies'][_0xf7c36f(0x1d1)],squadronCompletionStatus[_0x5cc53c]&&(squadronCompletionStatus[_0x5cc53c][_0xf7c36f(0x178)]=squadronCompletionStatus[_0x5cc53c][_0xf7c36f(0x1ab)]));return;}try{squadronEntranceFiringStatus[_0x5cc53c]?(squadronEntranceFiringStatus[_0x5cc53c][_0xf7c36f(0x159)]=Date[_0xf7c36f(0x244)]()+_0x6ebc2,squadronEntranceFiringStatus[_0x5cc53c][_0xf7c36f(0x166)]=![]):(console['warn'](_0xf7c36f(0x15c)+_0x5cc53c+_0xf7c36f(0x22a)),squadronEntranceFiringStatus[_0x5cc53c]={'hasFired':![],'scheduledStartTime':Date['now']()+_0x6ebc2});const _0x4099c8=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x3a8432=_0x4099c8*0x2,_0x57a5f4=0x1;_0x5d5092[_0xf7c36f(0x1e8)]['forEach']((_0x2e0e6c,_0x335135)=>{const _0x5a46d0=_0xf7c36f;if(!_0x2e0e6c||!_0x2e0e6c[_0x5a46d0(0x1ea)]||typeof _0x2e0e6c[_0x5a46d0(0x24b)]===_0x5a46d0(0x1fa)||typeof _0x2e0e6c[_0x5a46d0(0x143)]===_0x5a46d0(0x1fa)||!_0x2e0e6c[_0x5a46d0(0x216)]){console[_0x5a46d0(0x1a4)](_0x5a46d0(0x12f)+_0x5cc53c+_0x5a46d0(0x167)+_0x1f980c+_0x5a46d0(0x15a)+_0x335135+_0x5a46d0(0x111)),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x5cc53c]&&squadronCompletionStatus[_0x5cc53c]['completed']++;return;}const _0x487d6f=_0x5c3668[_0x2e0e6c[_0x5a46d0(0x216)]];(!_0x487d6f||_0x487d6f[_0x5a46d0(0x1d1)]===0x0)&&console[_0x5a46d0(0x22b)](_0x5a46d0(0x1be)+_0x2e0e6c[_0x5a46d0(0x216)]+_0x5a46d0(0x227)+_0x5cc53c+',\x20index\x20'+_0x335135+_0x5a46d0(0x108)+_0x1f980c+'\x22.');let _0x2ae043=0x0;const _0xbc5a92=getWaveType(level),_0x35d17f=_0xbc5a92===_0x5a46d0(0x243)&&(_0x5cc53c===0x2||_0x5cc53c===0x3);if(_0x35d17f){const _0xd2c62c=Math[_0x5a46d0(0x1a6)](_0x335135/0x2);_0x335135%0x2===0x0?_0x2ae043=_0xd2c62c*_0x3a8432:_0x2ae043=_0xd2c62c*_0x3a8432+_0x57a5f4;}else _0x2ae043=_0x335135*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x23d227=setTimeout(()=>{const _0x5a5506=_0x5a46d0,_0x39539c=enemySpawnTimeouts['indexOf'](_0x23d227);if(_0x39539c>-0x1)enemySpawnTimeouts[_0x5a5506(0x1f2)](_0x39539c,0x1);let _0xd6eeac=![];isTwoPlayerMode&&selectedGameMode===_0x5a5506(0x125)?_0xd6eeac=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0xd6eeac=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0xd6eeac||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x5cc53c]&&squadronCompletionStatus[_0x5cc53c][_0x5a5506(0x178)]++;return;}try{let _0x381259=_0x2e0e6c[_0x5a5506(0x1ea)],_0x78e863=_0x381259===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x5568b1,_0x342753;if(_0x381259===ENEMY1_TYPE)_0x5568b1=ENEMY1_WIDTH,_0x342753=ENEMY1_HEIGHT;else _0x381259===ENEMY3_TYPE?(_0x5568b1=BOSS_WIDTH,_0x342753=BOSS_HEIGHT):(_0x5568b1=ENEMY_WIDTH,_0x342753=ENEMY_HEIGHT);let _0x486ba6=0x0,_0x2bc72b=0x0;if(_0x4b9bb9&&_0x4b9bb9[0x0]?.['p0'])_0x486ba6=_0x4b9bb9[0x0]['p0']['x'],_0x2bc72b=_0x4b9bb9[0x0]['p0']['y'];else throw new Error(_0x5a5506(0x170)+_0x1f980c);let _0x2ffd85,_0x484677;try{const {x:_0x23faa8,y:_0x4078e4}=getCurrentGridSlotPosition(_0x2e0e6c['gridRow'],_0x2e0e6c[_0x5a5506(0x143)],_0x5568b1);_0x2ffd85=_0x23faa8,_0x484677=_0x4078e4;}catch(_0x179a72){console[_0x5a5506(0x1a4)](_0x5a5506(0x17c)+_0x2e0e6c[_0x5a5506(0x1ea)]+_0x5a5506(0x212)+_0x2e0e6c['gridRow']+','+_0x2e0e6c[_0x5a5506(0x143)]+']',_0x179a72),_0x2ffd85=gameCanvas?.['width']/0x2||0xc8,_0x484677=ENEMY_TOP_MARGIN+_0x2e0e6c[_0x5a5506(0x24b)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x51cb03=0x0;const _0x4d6b07=_0x35d17f,_0x423ae8=_0x4d6b07&&_0x335135%0x2!==0x0;_0x423ae8?_0x51cb03=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x51cb03=-_0x335135*PATH_T_OFFSET_PER_ENEMY;const _0x5309bc={'x':_0x486ba6,'y':_0x2bc72b,'width':_0x5568b1,'height':_0x342753,'targetGridX':_0x2ffd85,'targetGridY':_0x484677,'speed':0x0,'state':_0x5a5506(0x18e),'gridRow':_0x2e0e6c[_0x5a5506(0x24b)],'gridCol':_0x2e0e6c[_0x5a5506(0x143)],'type':_0x381259,'health':_0x78e863,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x1f980c,'pathSegmentIndex':0x0,'pathT':_0x51cb03,'squadronId':_0x5cc53c,'squadronEnemyIndex':_0x335135,'id':'enemy-entr-'+_0x5cc53c+'-'+_0x335135+'-'+Date[_0x5a5506(0x244)]()+'-'+Math[_0x5a5506(0x12e)]()[_0x5a5506(0x1c1)](0x24)['substring'](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x381259===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x381259===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1,'captureDiveInitiationTime':0x0};enemies['push'](_0x5309bc),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x5cc53c]&&squadronCompletionStatus[_0x5cc53c][_0x5a5506(0x178)]++;if(_0x335135===0x0){let _0x12bb54=0x5dc;(_0x5cc53c===0x0||_0x5cc53c===0x1)&&(_0x12bb54=0xfa);const _0x275553=_0x5309bc['id'],_0xd777a2=setTimeout(()=>{const _0xc56b18=_0x5a5506,_0x377387=enemySpawnTimeouts[_0xc56b18(0x123)](_0xd777a2);if(_0x377387>-0x1)enemySpawnTimeouts[_0xc56b18(0x1f2)](_0x377387,0x1);let _0x1a0501=![];isTwoPlayerMode&&selectedGameMode===_0xc56b18(0x125)?_0x1a0501=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x1a0501=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x1a0501||isChallengingStage||isWaveTransitioning||isFullGridWave)return;fireFixedEnemyBurst(_0x275553,null,0x0,0x3);},_0x12bb54);enemySpawnTimeouts[_0x5a5506(0x20b)](_0xd777a2);}}catch(_0x124927){console[_0x5a5506(0x1a4)](_0x5a5506(0x205)+_0x5cc53c+',\x20Idx\x20'+_0x335135+_0x5a5506(0x228)+_0x1f980c+'):',_0x124927),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x5cc53c]&&squadronCompletionStatus[_0x5cc53c][_0x5a5506(0x178)]++;}},_0x2ae043);enemySpawnTimeouts[_0x5a46d0(0x20b)](_0x23d227);});}catch(_0x1736e2){console[_0xf7c36f(0x1a4)](_0xf7c36f(0x1ba)+_0x5cc53c+_0xf7c36f(0x167)+_0x1f980c+'):',_0x1736e2),_0x5d5092?.['enemies']?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x5d5092['enemies'][_0xf7c36f(0x1d1)],squadronCompletionStatus[_0x5cc53c]&&(squadronCompletionStatus[_0x5cc53c][_0xf7c36f(0x178)]=squadronCompletionStatus[_0x5cc53c][_0xf7c36f(0x1ab)]));}},_0x6ebc2);return enemySpawnTimeouts[_0x2da303(0x20b)](_0x16359c),!![];};function scheduleEntranceFlightWave(){const _0x5d77af=_0x42eb05;if(isFullGridWave||isChallengingStage||!currentWaveDefinition||currentWaveDefinition['length']===0x0){console[_0x5d77af(0x22b)](_0x5d77af(0x177)+level+_0x5d77af(0x21f)+isFullGridWave+_0x5d77af(0x142)+isChallengingStage+_0x5d77af(0x190)+currentWaveDefinition?.[_0x5d77af(0x1d1)]),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts[_0x5d77af(0x1b4)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x44e796=0x0,_0x45e37c=0x0;currentWaveDefinition[_0x5d77af(0x1b4)]((_0x5e0dec,_0x570909)=>{const _0xf1d88f=_0x5d77af;_0x5e0dec&&_0x5e0dec['enemies']&&Array[_0xf1d88f(0x1ff)](_0x5e0dec['enemies'])&&_0x5e0dec[_0xf1d88f(0x1e8)]['length']>0x0?(totalEnemiesScheduledForWave+=_0x5e0dec[_0xf1d88f(0x1e8)][_0xf1d88f(0x1d1)],squadronCompletionStatus[_0x570909]={'completed':0x0,'total':_0x5e0dec[_0xf1d88f(0x1e8)][_0xf1d88f(0x1d1)],'hasFiredPostLanding':![]},squadronEntranceFiringStatus[_0x570909]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x5e0dec,_0x570909,_0x44e796)&&_0x45e37c++,_0x44e796+=NORMAL_WAVE_SQUADRON_INTERVAL):console['warn']('Entrance\x20Wave:\x20Squadron\x20'+_0x570909+_0xf1d88f(0x109));}),_0x45e37c===0x0&&totalEnemiesScheduledForWave===0x0?(console[_0x5d77af(0x22b)](_0x5d77af(0x11d)+level+'.\x20Transitioning.'),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![]):isEntrancePhaseActive=!![];}function startChallengingStageSequence(){const _0xd21e54=_0x42eb05;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts[_0xd21e54(0x1b4)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object[_0xd21e54(0x16b)](challengingStagePaths)[_0xd21e54(0x1d1)]===0x0&&defineChallengingStagePaths();if(Object['keys'](challengingStagePaths)['length']===0x0){console['error'](_0xd21e54(0x239)),isWaveTransitioning=!![],setTimeout(()=>{const _0x1e793a=_0xd21e54;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode==='coop'&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x1e793a(0x1fe)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x2b221b=[_0xd21e54(0x1b0),_0xd21e54(0x185),_0xd21e54(0x165),'CS_HorizontalFlyByR'],_0x58c433=['CS_LoopAttack_TL',_0xd21e54(0x1f9),'CS_LoopAttack_BL',_0xd21e54(0x1c3)],_0x37a6fc=[..._0x2b221b,..._0x58c433];for(const _0x16ea62 of _0x37a6fc){if(!challengingStagePaths['hasOwnProperty'](_0x16ea62)){console[_0xd21e54(0x1a4)](_0xd21e54(0x1b8)+_0x16ea62+'\x22\x20not\x20found!\x20Aborting\x20CS.'),isWaveTransitioning=!![],setTimeout(()=>{const _0x1aade9=_0xd21e54;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x1aade9(0x125)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave==='function'&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x558c6a=[..._0x2b221b],_0x2b1037=[..._0x58c433][_0xd21e54(0x12c)](()=>Math[_0xd21e54(0x12e)]()-0.5);_0x558c6a[_0xd21e54(0x20b)](..._0x2b1037),currentWaveDefinition=[];for(let _0x42ec7b=0x0;_0x42ec7b<CHALLENGING_STAGE_SQUADRON_COUNT;_0x42ec7b++){const _0x2b8e01=_0x558c6a[_0x42ec7b],_0x4ccf2c={'pathId':_0x2b8e01,'enemies':[]};for(let _0xd635e8=0x0;_0xd635e8<CHALLENGING_STAGE_SQUADRON_SIZE;_0xd635e8++){let _0x1645d1=_0xd635e8<Math[_0xd21e54(0x1a6)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x4ccf2c[_0xd21e54(0x1e8)][_0xd21e54(0x20b)]({'type':_0x1645d1,'entrancePathId':_0x2b8e01});}currentWaveDefinition[_0xd21e54(0x20b)](_0x4ccf2c);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0xd21e54(0x1d1)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x5b824e=0x0;const _0x5e2513=-0x1c,_0x55ef5d=Math[_0xd21e54(0x1a6)](Math[_0xd21e54(0x1cb)](0x0,level-0x3)/0x4)+0x1,_0x4072d0=scaleValue(_0x55ef5d,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition[_0xd21e54(0x1b4)]((_0x281471,_0xe82a7c)=>{const _0x7f5411=_0xd21e54;let _0x4032e7=0x0;if(_0xe82a7c<=0x1)_0x4032e7=0x0;else _0xe82a7c<=0x3?_0x4032e7=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x4032e7=(_0xe82a7c-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x9af197=_0x4072d0;(_0xe82a7c===0x2||_0xe82a7c===0x3)&&(_0x9af197*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x4d9a56=setTimeout(()=>{const _0x59918f=_0x4a68,_0x9ea50=enemySpawnTimeouts['indexOf'](_0x4d9a56);if(_0x9ea50>-0x1)enemySpawnTimeouts[_0x59918f(0x1f2)](_0x9ea50,0x1);let _0x5bd341=![];isTwoPlayerMode&&selectedGameMode===_0x59918f(0x125)?_0x5bd341=player1Lives>0x0||player2Lives>0x0:_0x5bd341=playerLives>0x0;if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&_0x5bd341)try{const _0x10c5e5=_0x281471[_0x59918f(0x1ac)],_0x3023c8=challengingStagePaths,_0x3b49f9=_0x3023c8[_0x10c5e5];if(!_0x3b49f9||_0x3b49f9[_0x59918f(0x1d1)]===0x0){console['error'](_0x59918f(0x198)+_0x10c5e5+_0x59918f(0x246)+_0xe82a7c+_0x59918f(0x113)),enemiesSpawnedThisWave+=_0x281471['enemies'][_0x59918f(0x1d1)];return;}let _0x2afe52=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0xe82a7c>=0x2&&_0xe82a7c<=0x3)_0x2afe52=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0xe82a7c>=0x4&&(_0x2afe52=CS_LOOP_ATTACK_SPAWN_DELAY);_0x281471['enemies'][_0x59918f(0x1b4)]((_0x1d4ef4,_0x2369db)=>{const _0x4765ee=_0x59918f;if(!_0x1d4ef4||!_0x1d4ef4[_0x4765ee(0x1ea)]){console[_0x4765ee(0x1a4)](_0x4765ee(0x237)+_0xe82a7c+_0x4765ee(0x1ce)+_0x2369db+_0x4765ee(0x111)),enemiesSpawnedThisWave++;return;}const _0x2be978=_0x2369db*_0x2afe52,_0x4efd0a=setTimeout(()=>{const _0x372f4d=_0x4765ee,_0x509283=enemySpawnTimeouts['indexOf'](_0x4efd0a);if(_0x509283>-0x1)enemySpawnTimeouts[_0x372f4d(0x1f2)](_0x509283,0x1);let _0x1aefa0=![];isTwoPlayerMode&&selectedGameMode===_0x372f4d(0x125)?_0x1aefa0=player1Lives>0x0||player2Lives>0x0:_0x1aefa0=playerLives>0x0;if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||!_0x1aefa0){enemiesSpawnedThisWave++;return;}try{let _0x5b34cf=_0x1d4ef4[_0x372f4d(0x1ea)],_0x21dfd7=_0x5b34cf===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x57d815,_0x7ce79;if(_0x5b34cf===ENEMY1_TYPE)_0x57d815=ENEMY1_WIDTH,_0x7ce79=ENEMY1_HEIGHT;else _0x5b34cf===ENEMY3_TYPE?(_0x57d815=BOSS_WIDTH,_0x7ce79=BOSS_HEIGHT):(_0x57d815=ENEMY_WIDTH,_0x7ce79=ENEMY_HEIGHT);let _0x43c957=0x0,_0x30637d=0x0;if(_0x3b49f9[0x0]?.['p0'])_0x43c957=_0x3b49f9[0x0]['p0']['x'],_0x30637d=_0x3b49f9[0x0]['p0']['y'];else throw new Error(_0x372f4d(0x1d6)+_0x10c5e5);(_0xe82a7c===0x0||_0xe82a7c===0x1)&&(_0x43c957+=_0x5e2513);const _0x4e067a=-_0x2369db*PATH_T_OFFSET_PER_ENEMY,_0x3124ed={'x':_0x43c957,'y':_0x30637d,'width':_0x57d815,'height':_0x7ce79,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x372f4d(0x1b2),'gridRow':-0x1,'gridCol':-0x1,'type':_0x5b34cf,'health':_0x21dfd7,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x10c5e5,'pathSegmentIndex':0x0,'pathT':_0x4e067a,'squadronId':_0xe82a7c,'id':'enemy-cs-'+_0xe82a7c+'-'+_0x2369db+'-'+Date[_0x372f4d(0x244)]()+'-'+Math[_0x372f4d(0x12e)]()[_0x372f4d(0x1c1)](0x24)[_0x372f4d(0xff)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x372f4d(0x161),'hasCapturedShip':_0x5b34cf===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x5b34cf===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x9af197,'captureDiveInitiationTime':0x0};enemies[_0x372f4d(0x20b)](_0x3124ed),enemiesSpawnedThisWave++;}catch(_0x53fed5){console[_0x372f4d(0x1a4)]('CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20'+_0xe82a7c+_0x372f4d(0x16f)+_0x2369db+_0x372f4d(0x228)+_0x10c5e5+'):',_0x53fed5),enemiesSpawnedThisWave++;}},_0x2be978);enemySpawnTimeouts['push'](_0x4efd0a),_0x5b824e++;});}catch(_0x2088ec){console[_0x59918f(0x1a4)](_0x59918f(0x122)+_0xe82a7c+':',_0x2088ec),enemiesSpawnedThisWave+=_0x281471[_0x59918f(0x1e8)]['length'];}else _0x281471?.[_0x59918f(0x1e8)]?.[_0x59918f(0x1d1)]>0x0&&(enemiesSpawnedThisWave+=_0x281471[_0x59918f(0x1e8)]['length']);},_0x4032e7);enemySpawnTimeouts[_0x7f5411(0x20b)](_0x4d9a56);});}else console['warn'](_0xd21e54(0x14b)),isWaveTransitioning=!![],setTimeout(()=>{const _0x38baed=_0xd21e54;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode==='coop'&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x38baed(0x1fe)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x35bfbd,_0x363aef,_0x794bab){const _0x56995d=_0x42eb05;let _0x250c64=![];isTwoPlayerMode&&selectedGameMode===_0x56995d(0x125)?_0x250c64=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x250c64=playerLives>0x0&&!isShipCaptured;if(!_0x35bfbd||isPaused||!isInGameState||!_0x250c64||isChallengingStage||isWaveTransitioning)return;const _0x5badd0=Math[_0x56995d(0x13a)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x3b066e=0x0;_0x3b066e<_0x5badd0;_0x3b066e++){const _0x3f9fa4=_0x794bab+_0x3b066e*ENTRANCE_FIRE_BURST_DELAY_MS,_0x4436f2=setTimeout(()=>{const _0x449cfb=_0x56995d;try{const _0x40ca48=enemySpawnTimeouts[_0x449cfb(0x123)](_0x4436f2);_0x40ca48>-0x1&&enemySpawnTimeouts[_0x449cfb(0x1f2)](_0x40ca48,0x1);let _0x211ab3=![];isTwoPlayerMode&&selectedGameMode===_0x449cfb(0x125)?_0x211ab3=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x211ab3=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x211ab3||isChallengingStage||isWaveTransitioning)return;const _0x170f25=enemies[_0x449cfb(0x1e1)](_0x441c43=>_0x441c43&&_0x441c43['id']===_0x35bfbd);_0x170f25&&_0x170f25[_0x449cfb(0x13e)]===_0x363aef&&(createBulletSimple(_0x170f25)&&(_0x3b066e===0x0&&playSound('enemyShootSound',![],0.4),_0x170f25[_0x449cfb(0x1c0)]=Date[_0x449cfb(0x244)]()));}catch(_0x6711dc){console[_0x449cfb(0x1a4)](_0x449cfb(0x1b1)+(_0x3b066e+0x1)+'/'+_0x5badd0+')\x20for\x20'+_0x35bfbd+':',_0x6711dc);}},_0x3f9fa4);enemySpawnTimeouts[_0x56995d(0x20b)](_0x4436f2);}}function fireFixedEnemyBurst(_0x58a9bd,_0x26f443,_0x1bb711,_0x1564f6){const _0x350129=_0x42eb05;let _0x42951c=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x42951c=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x42951c=playerLives>0x0&&!isShipCaptured;if(!_0x58a9bd||isPaused||!isInGameState||!_0x42951c||isChallengingStage||isWaveTransitioning||_0x1564f6<=0x0)return;for(let _0x2050e6=0x0;_0x2050e6<_0x1564f6;_0x2050e6++){const _0x75d58b=_0x1bb711+_0x2050e6*ENTRANCE_FIRE_BURST_DELAY_MS,_0x4482c6=setTimeout(()=>{const _0x49bda5=_0x4a68;try{const _0x352214=enemySpawnTimeouts[_0x49bda5(0x123)](_0x4482c6);_0x352214>-0x1&&enemySpawnTimeouts['splice'](_0x352214,0x1);let _0x42bae7=![];isTwoPlayerMode&&selectedGameMode===_0x49bda5(0x125)?_0x42bae7=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x42bae7=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x42bae7||isChallengingStage||isWaveTransitioning)return;const _0x39952c=enemies[_0x49bda5(0x1e1)](_0x191a4c=>_0x191a4c&&_0x191a4c['id']===_0x58a9bd);if(_0x39952c)createBulletSimple(_0x39952c)&&(_0x2050e6===0x0&&playSound(_0x49bda5(0x160),![],0.4),_0x39952c[_0x49bda5(0x1c0)]=Date['now']());else{}}catch(_0x5e8f72){console[_0x49bda5(0x1a4)](_0x49bda5(0x10b)+(_0x2050e6+0x1)+'/'+_0x1564f6+')\x20for\x20'+_0x58a9bd+':',_0x5e8f72);}},_0x75d58b);enemySpawnTimeouts[_0x350129(0x20b)](_0x4482c6);}}function startFullGridWave(){const _0x595dc1=_0x42eb05;if(!currentWaveDefinition||currentWaveDefinition[_0x595dc1(0x1d1)]===0x0||!isFullGridWave){console[_0x595dc1(0x1a4)]('Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.'),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(_0x595dc1(0x1d4),![],0.4),enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x55fd8a=0x0;currentWaveDefinition[_0x595dc1(0x1b4)]((_0x40d91f,_0x3b22bb)=>{const _0x389c99=_0x595dc1;let _0x343ed9=0x0;_0x40d91f&&_0x40d91f['enemies']&&Array['isArray'](_0x40d91f['enemies'])?(_0x343ed9=_0x40d91f[_0x389c99(0x1e8)][_0x389c99(0x1d1)],_0x40d91f[_0x389c99(0x1e8)][_0x389c99(0x1b4)]((_0xe32710,_0x3b7690)=>{const _0x54bf29=_0x389c99;try{if(!_0xe32710||!_0xe32710[_0x54bf29(0x1ea)]||typeof _0xe32710[_0x54bf29(0x24b)]===_0x54bf29(0x1fa)||typeof _0xe32710[_0x54bf29(0x143)]===_0x54bf29(0x1fa)){console[_0x54bf29(0x1a4)](_0x54bf29(0x1ef)+_0x3b22bb+_0x54bf29(0x1ce)+_0x3b7690+_0x54bf29(0x111));return;}let _0x33664a=_0xe32710[_0x54bf29(0x1ea)],_0x1329b5=_0x33664a===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x5f4e82,_0x1335b3;if(_0x33664a===ENEMY1_TYPE)_0x5f4e82=ENEMY1_WIDTH,_0x1335b3=ENEMY1_HEIGHT;else _0x33664a===ENEMY3_TYPE?(_0x5f4e82=BOSS_WIDTH,_0x1335b3=BOSS_HEIGHT):(_0x5f4e82=ENEMY_WIDTH,_0x1335b3=ENEMY_HEIGHT);let _0x217b32,_0x461f79;try{const {x:_0x56562d,y:_0x33d2f4}=getCurrentGridSlotPosition(_0xe32710[_0x54bf29(0x24b)],_0xe32710[_0x54bf29(0x143)],_0x5f4e82);_0x217b32=_0x56562d,_0x461f79=_0x33d2f4;}catch(_0x595739){console['error'](_0x54bf29(0x193)+_0xe32710[_0x54bf29(0x1ea)]+_0x54bf29(0x212)+_0xe32710[_0x54bf29(0x24b)]+','+_0xe32710[_0x54bf29(0x143)]+']',_0x595739),_0x217b32=gameCanvas?.['width']/0x2||0xc8,_0x461f79=ENEMY_TOP_MARGIN+_0xe32710[_0x54bf29(0x24b)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x403bb9={'x':_0x217b32,'y':_0x461f79,'width':_0x5f4e82,'height':_0x1335b3,'targetGridX':_0x217b32,'targetGridY':_0x461f79,'speed':0x0,'state':_0x54bf29(0x1ec),'gridRow':_0xe32710[_0x54bf29(0x24b)],'gridCol':_0xe32710[_0x54bf29(0x143)],'type':_0x33664a,'health':_0x1329b5,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x3b22bb,'squadronEnemyIndex':_0x3b7690,'id':_0x54bf29(0x1c7)+_0x3b22bb+'-'+_0x3b7690+'-'+Date['now']()+'-'+Math['random']()['toString'](0x24)[_0x54bf29(0xff)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x54bf29(0x161),'hasCapturedShip':_0x33664a===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x33664a===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1,'captureDiveInitiationTime':0x0};enemies[_0x54bf29(0x20b)](_0x403bb9),_0x55fd8a++;}catch(_0x1abf64){console[_0x54bf29(0x1a4)](_0x54bf29(0x220)+_0x3b22bb+_0x54bf29(0x16f)+_0x3b7690+'):',_0x1abf64);}})):console[_0x389c99(0x22b)](_0x389c99(0x189)+_0x3b22bb+_0x389c99(0x1e6)),squadronCompletionStatus[_0x3b22bb]={'completed':_0x343ed9,'total':_0x343ed9};}),totalEnemiesScheduledForWave=_0x55fd8a,enemiesSpawnedThisWave=_0x55fd8a,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0x595dc1(0x1f7),!![],0.1)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date[_0x595dc1(0x244)](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date[_0x595dc1(0x244)](),firstEnemyLanded=!![];}function renderGame(){const _0x226357=_0x42eb05;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0x226357(0x206)](0x0,0x0,gameCanvas[_0x226357(0x230)],gameCanvas['height']);const _0x47d411=Date[_0x226357(0x244)]();gameCtx[_0x226357(0x18d)]();const _0x733378='20px\x20\x27Press\x20Start\x202P\x27',_0x36c5ac=_0x226357(0x10f),_0x16ca4f=_0x226357(0x1dc);let _0x519cd5,_0x5c28a2,_0x3a96df,_0x1b9475,_0x5e9e70=![],_0x10cde4=![],_0x1dbdbf=![];if(isShowingResultsScreen){}else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage){}else{if(isShowingPlayerGameOverMessage){}else{if(!isInGameState){}else{_0x3a96df=highScore||0x0;if(!isManualControl){}else{if(isTwoPlayerMode&&selectedGameMode===_0x226357(0x125)){_0x519cd5=player1Score,_0x5c28a2=player2Score,_0x3a96df=Math['max'](highScore,player1Score,player2Score),_0x1b9475=_0x226357(0x146),_0x5e9e70=!isShowingIntro&&!isPaused&&player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x10cde4=!isShowingIntro&&!isPaused&&player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if(player1Score>=_0x3a96df&&player1Score>0x0)_0x1dbdbf=_0x5e9e70;if(player2Score>=_0x3a96df&&player2Score>0x0&&player2Score>player1Score)_0x1dbdbf=_0x10cde4;}else isTwoPlayerMode&&selectedGameMode===_0x226357(0x161)?(_0x519cd5=currentPlayer===0x1?score:player1Score,_0x5c28a2=currentPlayer===0x2?score:player2Score,_0x3a96df=Math[_0x226357(0x1cb)](highScore,player1Score,player2Score,score),_0x1b9475=_0x226357(0x146),_0x5e9e70=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x10cde4=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x1dbdbf=!isPaused&&!isShowingIntro&&score>0x0&&_0x3a96df>0x0&&score>=_0x3a96df):(_0x519cd5=score,_0x5c28a2=0x0,_0x1b9475='1UP');}}}}}let _0x40c9c6=![];if(_0x1dbdbf){}typeof MARGIN_SIDE!==_0x226357(0x1fa)&&typeof MARGIN_TOP!==_0x226357(0x1fa)&&typeof SCORE_OFFSET_Y!==_0x226357(0x1fa)&&(drawTopUiElement(_0x1b9475,_0x519cd5,_0x226357(0x1e0),MARGIN_SIDE,_0x5e9e70),drawTopUiElement(_0x226357(0x247),_0x3a96df,_0x226357(0x11e),gameCanvas[_0x226357(0x230)]/0x2,_0x40c9c6),drawTopUiElement(_0x226357(0x151),_0x5c28a2,_0x226357(0x172),gameCanvas[_0x226357(0x230)]-MARGIN_SIDE,_0x10cde4));if(typeof shipImage!==_0x226357(0x1fa)&&typeof LIFE_ICON_MARGIN_BOTTOM!=='undefined'&&typeof LIFE_ICON_SIZE!==_0x226357(0x1fa)&&typeof LIFE_ICON_MARGIN_LEFT!=='undefined'&&typeof LIFE_ICON_SPACING!==_0x226357(0x1fa)){if(shipImage[_0x226357(0x209)]&&shipImage[_0x226357(0x18f)]!==0x0){const _0x3ed944=gameCanvas[_0x226357(0x11f)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x25dcd4=0x0,_0x3db0f4=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x226357(0x125)){if(player1Lives>0x0)_0x25dcd4=Math[_0x226357(0x1cb)](0x0,player1Lives-0x1);if(player2Lives>0x0)_0x3db0f4=Math[_0x226357(0x1cb)](0x0,player2Lives-0x1);}else{if(playerLives>0x0)_0x25dcd4=Math[_0x226357(0x1cb)](0x0,playerLives-0x1);}const _0x25208c=0x5;for(let _0x50ee62=0x0;_0x50ee62<Math[_0x226357(0x16c)](_0x25dcd4,_0x25208c);_0x50ee62++){const _0xb74913=LIFE_ICON_MARGIN_LEFT+_0x50ee62*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x226357(0x130)](shipImage,Math[_0x226357(0x13a)](_0xb74913),Math[_0x226357(0x13a)](_0x3ed944),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}if(isTwoPlayerMode&&selectedGameMode===_0x226357(0x125)){const _0xfae958=gameCanvas['width']-LIFE_ICON_MARGIN_RIGHT-Math['min'](_0x3db0f4,_0x25208c)*(LIFE_ICON_SIZE+LIFE_ICON_SPACING)+LIFE_ICON_SPACING;for(let _0x236562=0x0;_0x236562<Math[_0x226357(0x16c)](_0x3db0f4,_0x25208c);_0x236562++){const _0x19e3f2=_0xfae958+_0x236562*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x226357(0x130)](shipImage,Math[_0x226357(0x13a)](_0x19e3f2),Math['round'](_0x3ed944),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}}gameCtx[_0x226357(0x200)](),gameCtx[_0x226357(0x18d)]();if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured){let _0x20acd1=!![];if(isPlayer1Invincible){const _0x52ece8=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x47d411%_0x52ece8>=INVINCIBILITY_BLINK_ON_MS)_0x20acd1=![];}if(_0x20acd1){const _0x273b93=ship1['x'],_0x25d7e6=ship1['y'];typeof shipImage!==_0x226357(0x1fa)&&shipImage[_0x226357(0x209)]?(gameCtx[_0x226357(0x130)](shipImage,Math[_0x226357(0x13a)](_0x273b93),Math['round'](_0x25d7e6),ship1[_0x226357(0x230)],ship1['height']),player1IsDualShipActive&&gameCtx['drawImage'](shipImage,Math[_0x226357(0x13a)](_0x273b93+DUAL_SHIP_OFFSET_X),Math['round'](_0x25d7e6),ship1['width'],ship1[_0x226357(0x11f)])):(gameCtx['fillStyle']=_0x226357(0x223),gameCtx['fillRect'](Math['round'](_0x273b93),Math[_0x226357(0x13a)](_0x25d7e6),ship1[_0x226357(0x230)],ship1['height']));}}if(ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured){let _0x1a6e1c=!![];if(isPlayer2Invincible){const _0x1b9da0=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x47d411%_0x1b9da0>=INVINCIBILITY_BLINK_ON_MS)_0x1a6e1c=![];}if(_0x1a6e1c){const _0x4ee0e=ship2['x'],_0x52ca93=ship2['y'];typeof shipImage!==_0x226357(0x1fa)&&shipImage['complete']?(gameCtx[_0x226357(0x130)](shipImage,Math[_0x226357(0x13a)](_0x4ee0e),Math['round'](_0x52ca93),ship2['width'],ship2[_0x226357(0x11f)]),player2IsDualShipActive&&gameCtx[_0x226357(0x130)](shipImage,Math[_0x226357(0x13a)](_0x4ee0e+DUAL_SHIP_OFFSET_X),Math[_0x226357(0x13a)](_0x52ca93),ship2[_0x226357(0x230)],ship2[_0x226357(0x11f)])):(gameCtx[_0x226357(0x164)]=_0x226357(0x139),gameCtx['fillRect'](Math[_0x226357(0x13a)](_0x4ee0e),Math[_0x226357(0x13a)](_0x52ca93),ship2[_0x226357(0x230)],ship2[_0x226357(0x11f)]));}}}else{if(ship&&!isShowingCaptureMessage){let _0x2a027d=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x2d90ff=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x47d411%_0x2d90ff>=INVINCIBILITY_BLINK_ON_MS)_0x2a027d=![];}if(_0x2a027d){let _0x35ba2a=ship['x'],_0x3a3e8d=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x3a3e8d&&(_0x35ba2a=Math[_0x226357(0x13a)](gameCanvas['width']/0x2-ship[_0x226357(0x230)]/0x2));const _0x28e192=ship['y'];typeof shipImage!==_0x226357(0x1fa)&&shipImage[_0x226357(0x209)]?(gameCtx['drawImage'](shipImage,Math[_0x226357(0x13a)](_0x35ba2a),Math[_0x226357(0x13a)](_0x28e192),ship[_0x226357(0x230)],ship[_0x226357(0x11f)]),isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&gameCtx['drawImage'](shipImage,Math['round'](_0x35ba2a+DUAL_SHIP_OFFSET_X),Math[_0x226357(0x13a)](_0x28e192),ship[_0x226357(0x230)],ship[_0x226357(0x11f)])):(gameCtx['fillStyle']='blue',gameCtx['fillRect'](Math[_0x226357(0x13a)](_0x35ba2a),Math[_0x226357(0x13a)](_0x28e192),ship['width'],ship[_0x226357(0x11f)]));}}}if(fallingShips['length']>0x0&&typeof shipImage!==_0x226357(0x1fa)&&shipImage[_0x226357(0x209)]){}gameCtx[_0x226357(0x200)]();if(!isInGameState){if(isShowingScoreScreen){}else{gameCtx['save']();const _0x355e78=gameCanvas[_0x226357(0x230)],_0x39107=gameCanvas['height'],_0x493c43=_0x355e78/0x2;selectedButtonIndex===-0x1&&(isPlayerSelectMode||isFiringModeSelectMode||isGameModeSelectMode||!isPlayerSelectMode&&!isFiringModeSelectMode&&!isGameModeSelectMode)&&(selectedButtonIndex=0x0);let _0x2c6ca5=MENU_LOGO_APPROX_HEIGHT,_0x17d0c5=_0x2c6ca5*(logoImage[_0x226357(0x162)]/logoImage[_0x226357(0x18f)]||0x1);typeof logoImage!=='undefined'&&logoImage['complete']&&logoImage['naturalHeight']!==0x0&&(_0x2c6ca5=logoImage[_0x226357(0x18f)]*LOGO_SCALE_FACTOR,_0x17d0c5=logoImage[_0x226357(0x162)]*LOGO_SCALE_FACTOR);const _0x3831b6=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x124483=_0x2c6ca5+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x3831b6;let _0x423715=(_0x39107-_0x124483)/0x2-0x46;_0x423715+=MENU_GENERAL_Y_OFFSET;const _0x52296c=_0x493c43-_0x17d0c5/0x2,_0xee74cc=_0x423715+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!=='undefined'&&logoImage['complete']&&logoImage[_0x226357(0x18f)]!==0x0?gameCtx[_0x226357(0x130)](logoImage,Math[_0x226357(0x13a)](_0x52296c),Math[_0x226357(0x13a)](_0xee74cc),_0x17d0c5,_0x2c6ca5):drawCanvasText(_0x226357(0x1e3),_0x493c43,_0xee74cc+_0x2c6ca5/0x2,_0x226357(0x1fb),_0x226357(0x24a));if(isGameModeSelectMode)drawCanvasButton(_0x226357(0x1a5),0x0,selectedButtonIndex===0x0),drawCanvasButton('CO-OP\x20GAME',0x1,selectedButtonIndex===0x1);else{if(isFiringModeSelectMode)drawCanvasButton(_0x226357(0x202),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x226357(0x119),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0x226357(0x248),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x226357(0x22d),0x1,selectedButtonIndex===0x1)):(drawCanvasButton('START\x20GAME',0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x226357(0x12a),0x1,selectedButtonIndex===0x1));}const _0x348bb4=getMenuButtonRect(0x1);let _0x133c7f;_0x348bb4?_0x133c7f=_0x348bb4['y']+_0x348bb4['height']+MENU_BUTTON_SUBTITLE_V_GAP+_0x3831b6/0x2:_0x133c7f=_0x423715+_0x2c6ca5+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x3831b6/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x493c43-0x1,Math['round'](_0x133c7f),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,'center',_0x226357(0x127),!![]),gameCtx[_0x226357(0x200)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0x226357(0x18d)]();let _0x210a05=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x210a05&&(bullets[_0x226357(0x1b4)](_0x287b39=>{}),enemyBullets['forEach'](_0x2aa05e=>{}));enemies[_0x226357(0x1b4)](_0xa27746=>{});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x3e5c9c=![];const _0x52bec8=gameCanvas[_0x226357(0x11f)]/0x2;if(isPaused){}else{if(isShowingCaptureMessage){}}gameCtx[_0x226357(0x200)]();}else{if(isShowingPlayerGameOverMessage){}else{if(gameOverSequenceStartTime>0x0){}}}}}catch(_0x2638a5){console[_0x226357(0x1a4)](_0x226357(0x1e2),_0x2638a5,_0x2638a5[_0x226357(0x183)]);}}function handleEnemyHit(_0x3c3369,_0x285e1=null){const _0x16da07=_0x42eb05;if(!_0x3c3369)return{'destroyed':![],'pointsAwarded':0x0};const _0xcdffc7=Date[_0x16da07(0x244)]();let _0x2eb95b=0x0,_0x2bec1f=![],_0x4418ac=_0x3c3369[_0x16da07(0x15b)],_0x439295=null,_0x329ec9=0x1;const _0x4a2f3b=_0x3c3369[_0x16da07(0x1ea)]===ENEMY3_TYPE?BOSS_WIDTH:_0x3c3369[_0x16da07(0x1ea)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0xf43eea=_0x3c3369[_0x16da07(0x1ea)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x3c3369[_0x16da07(0x1ea)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x54537e=_0x3c3369[_0x16da07(0x1ea)]===ENEMY3_TYPE&&_0x3c3369['hasCapturedShip'],_0x56fda3=_0x3c3369[_0x16da07(0x1ea)]===ENEMY3_TYPE&&_0x3c3369[_0x16da07(0x1bb)];let _0x4a88ec=![],_0xe7b817=null;if(_0x54537e){if(isTwoPlayerMode&&selectedGameMode===_0x16da07(0x125)){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x3c3369['id'])_0x4a88ec=!![],_0xe7b817=_0x16da07(0x19d);else isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x3c3369['id']&&(_0x4a88ec=!![],_0xe7b817=_0x16da07(0x224));}else!isTwoPlayerMode&&isShipCaptured&&capturedBossIdWithMessage===_0x3c3369['id']&&(_0x4a88ec=!![]);}const _0x330c33=_0x3c3369['x']+_0x4a2f3b/0x2,_0x1f3010=_0x3c3369['y']+_0xf43eea*0.2;createHitSparks(_0x330c33,_0x1f3010),_0x3c3369[_0x16da07(0x1a0)]--;_0x3c3369[_0x16da07(0x1ea)]===ENEMY3_TYPE&&(_0x3c3369['isDamaged']=_0x3c3369[_0x16da07(0x1a0)]<ENEMY3_MAX_HITS);if(_0x3c3369[_0x16da07(0x1a0)]<=0x0){_0x2bec1f=!![];isChallengingStage&&challengingStageEnemiesHit++;if(_0x54537e&&_0x56fda3){let _0x3a5d85=null;if(_0x4a88ec&&_0xe7b817)_0x3a5d85=_0xe7b817;else{let _0x61dd71=![];if(isCoopAIDemoActive){if(_0x285e1==='player1'&&player1IsDualShipActive)_0x3a5d85='player2',_0x61dd71=!![];else _0x285e1===_0x16da07(0x224)&&player2IsDualShipActive&&(_0x3a5d85=_0x16da07(0x19d),_0x61dd71=!![]);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x16da07(0x22f)){if(_0x285e1===_0x16da07(0x1b3)&&player2IsDualShipActive)_0x3a5d85='player1',_0x61dd71=!![];else _0x285e1===_0x16da07(0x19d)&&player1IsDualShipActive&&(_0x3a5d85=_0x16da07(0x1b3),_0x61dd71=!![]);}}!_0x61dd71&&(_0x3a5d85=_0x285e1);}_0x3a5d85===null&&_0x285e1&&(_0x3a5d85=_0x285e1);if(_0x3c3369[_0x16da07(0x1bb)]){const _0x4c8dc9=_0x3c3369[_0x16da07(0x1bb)]['width'],_0xad38ba=_0x3c3369[_0x16da07(0x1bb)]['height'],_0x564798=_0x3c3369['x']+(_0x4a2f3b-_0x4c8dc9)/0x2+CAPTURED_SHIP_OFFSET_X,_0x3a10b4=_0x3c3369['y']+CAPTURED_SHIP_OFFSET_Y,_0x2c4fd7=fallingShips[_0x16da07(0x195)](_0x4bcdff=>Math['abs'](_0x4bcdff['x']-_0x564798)<0x1&&Math['abs'](_0x4bcdff['y']-_0x3a10b4)<0x1);!_0x2c4fd7&&fallingShips['push']({'x':_0x564798,'y':_0x3a10b4,'width':_0x4c8dc9,'height':_0xad38ba,'creationTime':_0xcdffc7,'tintProgress':0x1,'rotation':0x0,'rotationDirection':Math['random']()<0.5?-0x1:0x1,'totalRotation':0x0,'rotationCompleted':![],'targetPlayerId':_0x3a5d85});}else console['error'](_0x16da07(0x120));_0x3c3369[_0x16da07(0x1f1)]=![],_0x3c3369['capturedShipDimensions']=null;}else _0x54537e&&!_0x56fda3&&(console[_0x16da07(0x1a4)](_0x16da07(0x16d)+_0x3c3369['id']+_0x16da07(0x149)),_0x3c3369[_0x16da07(0x1f1)]=![],_0x3c3369[_0x16da07(0x1bb)]=null);if(isChallengingStage){let _0x33ab37=0x64;const _0x2d34bd=csLastHitTime;csLastHitTime=_0xcdffc7,csLastChainHitPosition={'x':_0x3c3369['x'],'y':_0x3c3369['y']},csCurrentChainHits>0x0&&_0xcdffc7-_0x2d34bd<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x33ab37*=0x2),_0x2eb95b=_0x33ab37,csCurrentChainScore+=_0x2eb95b,scoreEarnedThisCS+=_0x2eb95b,_0x439295=_0x16da07(0x1ad),_0x329ec9=0.4;}else{if(_0x3c3369[_0x16da07(0x13e)]===_0x16da07(0x1ec))_0x2eb95b=_0x3c3369['type']===ENEMY1_TYPE?0x32:_0x3c3369[_0x16da07(0x1ea)]===ENEMY2_TYPE?0x50:0x0,_0x3c3369[_0x16da07(0x1ea)]===ENEMY3_TYPE&&(_0x2eb95b=0x96),_0x439295=_0x16da07(0x1ad),_0x329ec9=0.4;else{_0x2eb95b=_0x3c3369[_0x16da07(0x1ea)]===ENEMY1_TYPE?0x64:_0x3c3369['type']===ENEMY2_TYPE?0xa0:0x0;if(_0x3c3369[_0x16da07(0x1ea)]===ENEMY3_TYPE){if(_0x54537e){const _0x21fce5=[0x3e8,0x5dc,0x7d0,0xbb8];_0x2eb95b=_0x21fce5[Math[_0x16da07(0x1a6)](Math[_0x16da07(0x12e)]()*_0x21fce5[_0x16da07(0x1d1)])],_0x439295=_0x16da07(0xfb),_0x329ec9=0.4;}else _0x4418ac?(_0x2eb95b=0x190,_0x439295=_0x16da07(0xfb),_0x329ec9=0.4):(_0x2eb95b=0x0,console[_0x16da07(0x22b)](_0x16da07(0x156)+_0x2eb95b+_0x16da07(0x15d)+(_0x3c3369[_0x16da07(0x1a0)]+0x1)),_0x439295=_0x16da07(0x1ad),_0x329ec9=0.4);}else _0x439295=_0x16da07(0x1ad),_0x329ec9=0.4;if(_0x2bec1f&&_0x2eb95b>0x0){const _0x40c10c=normalWaveLastHitTime;normalWaveLastHitTime=_0xcdffc7,normalWaveLastChainHitPosition={'x':_0x3c3369['x'],'y':_0x3c3369['y']};normalWaveLastChainHitPosition&&_0xcdffc7-_0x40c10c<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x3f6f4b=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0xdf78e2=Math[_0x16da07(0x16c)](_0x3f6f4b[_0x16da07(0x1d1)]-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x549b25=_0x3f6f4b[_0xdf78e2];_0x2eb95b+=_0x549b25,normalWaveCurrentChainScore+=_0x549b25;}}}}if(_0x2eb95b>0x0){let _0xd22b3=null,_0x14d77c=0x0,_0x5d005e=_0x285e1,_0x26f5da=highScore,_0x2344fa=highScoreHolderId,_0x2d4095=![],_0xb3f058=![];if(isCoopAIDemoActive){if(_0x285e1===_0x16da07(0x19d)){player1Score+=_0x2eb95b,_0x14d77c=player1Score,_0xd22b3=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x16da07(0x19d),_0x2d4095=!![],_0xb3f058=!![];else player1Score===highScore&&highScoreHolderId!==_0x16da07(0x19d)&&highScore>0x0&&(highScoreHolderId=_0x16da07(0x19d),_0x2d4095=!![],_0xb3f058=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x285e1==='player2'){player2Score+=_0x2eb95b,_0x14d77c=player2Score,_0xd22b3=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x16da07(0x224),_0x2d4095=!![],_0xb3f058=!![];else player2Score===highScore&&highScoreHolderId!==_0x16da07(0x224)&&highScore>0x0&&(highScoreHolderId='player2',_0x2d4095=!![],_0xb3f058=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x2eb95b,_0x14d77c=player1Score,_0xd22b3=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId=_0x16da07(0x19d),_0xb3f058=!![]),checkAndAwardExtraLife(0x1);}}else{if(!isManualControl){score+=_0x2eb95b,player1Score=score,_0x14d77c=score,_0x5d005e=_0x16da07(0x19d),_0xd22b3=()=>player1EnemiesHit++;if(score>highScore)highScore=score,highScoreHolderId=_0x16da07(0x19d),_0x2d4095=!![],_0xb3f058=!![];else score===highScore&&highScoreHolderId!==_0x16da07(0x19d)&&highScore>0x0&&(highScoreHolderId=_0x16da07(0x19d),_0x2d4095=!![],_0xb3f058=!![]);checkAndAwardExtraLife(0x1);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x16da07(0x22f)){if(_0x285e1===_0x16da07(0x19d)){player1Score+=_0x2eb95b,_0x14d77c=player1Score,_0xd22b3=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x16da07(0x19d),_0x2d4095=!![],_0xb3f058=!![];else player1Score===highScore&&highScoreHolderId!==_0x16da07(0x19d)&&highScore>0x0&&(highScoreHolderId=_0x16da07(0x19d),_0x2d4095=!![],_0xb3f058=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x285e1===_0x16da07(0x1b3)){player2Score+=_0x2eb95b,_0x14d77c=player2Score,_0x5d005e=_0x16da07(0x1b3),_0xd22b3=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x16da07(0x1b3),_0x2d4095=!![],_0xb3f058=!![];else player2Score===highScore&&highScoreHolderId!=='ai_p2'&&highScore>0x0&&(highScoreHolderId=_0x16da07(0x1b3),_0x2d4095=!![],_0xb3f058=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x2eb95b,_0x14d77c=player1Score,_0xd22b3=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId=_0x16da07(0x19d),_0xb3f058=!![]),checkAndAwardExtraLife(0x1);}}else{if(isTwoPlayerMode&&selectedGameMode===_0x16da07(0x125)){if(_0x285e1===_0x16da07(0x19d)){player1Score+=_0x2eb95b,_0x14d77c=player1Score,_0xd22b3=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId='player1',_0x2d4095=!![],_0xb3f058=!![];else player1Score===highScore&&highScoreHolderId!=='player1'&&highScore>0x0&&(highScoreHolderId='player1',_0x2d4095=!![],_0xb3f058=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x285e1===_0x16da07(0x224)){player2Score+=_0x2eb95b,_0x14d77c=player2Score,_0xd22b3=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x16da07(0x224),_0x2d4095=!![],_0xb3f058=!![];else player2Score===highScore&&highScoreHolderId!==_0x16da07(0x224)&&highScore>0x0&&(highScoreHolderId=_0x16da07(0x224),_0x2d4095=!![],_0xb3f058=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x2eb95b,_0x14d77c=player1Score,_0xd22b3=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId='player1',_0xb3f058=!![]),checkAndAwardExtraLife(0x1);}}else{score+=_0x2eb95b,_0x14d77c=score;currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,_0x5d005e=_0x16da07(0x19d),_0xd22b3=()=>player1EnemiesHit++):(player2Score=score,_0x5d005e=isPlayerTwoAI?_0x16da07(0x1b3):_0x16da07(0x224),_0xd22b3=()=>player2EnemiesHit++);if(score>highScore)highScore=score,highScoreHolderId=_0x5d005e,_0x2d4095=!![],_0xb3f058=!![];else score===highScore&&highScoreHolderId!==_0x5d005e&&highScore>0x0&&(highScoreHolderId=_0x5d005e,_0x2d4095=!![],_0xb3f058=!![]);checkAndAwardExtraLife(currentPlayer);}}}}if(_0x2d4095||_0xb3f058&&_0x26f5da>0x0&&highScoreHolderId!==_0x2344fa){let _0x583d2e=![];if(highScoreHolderId==='player1')_0x583d2e=player1TriggeredHighScoreSound;else{if(highScoreHolderId===_0x16da07(0x224)||highScoreHolderId==='ai_p2')_0x583d2e=player2TriggeredHighScoreSound;}if(!_0x583d2e||highScoreHolderId!==_0x2344fa&&_0x26f5da>0x0){playSound(_0x16da07(0x133),![],0.2);if(highScoreHolderId==='player1')player1TriggeredHighScoreSound=!![];else{if(highScoreHolderId===_0x16da07(0x224)||highScoreHolderId==='ai_p2')player2TriggeredHighScoreSound=!![];}}}if(_0xb3f058&&highScoreHolderId!==_0x2344fa&&_0x26f5da>0x0){if(_0x2344fa==='player1')player1TriggeredHighScoreSound=![];else{if(_0x2344fa===_0x16da07(0x224)||_0x2344fa===_0x16da07(0x1b3))player2TriggeredHighScoreSound=![];}}_0xd22b3&&!isChallengingStage&&_0xd22b3();const _0x4eda1c=_0x3c3369[_0x16da07(0x13e)]==='in_grid'||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x16da07(0x20b)]({'text':_0x2eb95b[_0x16da07(0x1c1)](),'x':_0x3c3369['x']+_0x4a2f3b/0x2,'y':_0x3c3369['y'],'color':_0x4eda1c,'creationTime':_0xcdffc7,'displayStartTime':_0xcdffc7+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x3c3369['x']+_0x4a2f3b/0x2,_0x3c3369['y']+_0xf43eea/0x2);_0x3c3369['id']===capturingBossId&&stopSound(_0x16da07(0x1e7));if(_0x3c3369[_0x16da07(0x13e)]===_0x16da07(0x136)||_0x3c3369[_0x16da07(0x13e)]==='following_entrance_path'||_0x3c3369[_0x16da07(0x13e)]===_0x16da07(0x163)||_0x3c3369[_0x16da07(0x13e)]===_0x16da07(0x1b2)||_0x3c3369['state']===_0x16da07(0x184)||_0x3c3369[_0x16da07(0x13e)]===_0x16da07(0x140)){if(_0x3c3369[_0x16da07(0x1ea)]===ENEMY3_TYPE)stopSound(_0x16da07(0x174));else stopSound(_0x16da07(0x14e));}}else{_0x2bec1f=![];if(_0x3c3369[_0x16da07(0x1ea)]===ENEMY3_TYPE)_0x439295=_0x16da07(0x1c5),_0x329ec9=0.6,_0x2eb95b=0x0;else{_0x2eb95b=0x0;if(_0x3c3369[_0x16da07(0x1ea)]===ENEMY1_TYPE)_0x439295='beeHitSound',_0x329ec9=0.3;else _0x3c3369[_0x16da07(0x1ea)]===ENEMY2_TYPE&&(_0x439295=_0x16da07(0xf6),_0x329ec9=0.3);}}return _0x439295&&playSound(_0x439295,![],_0x329ec9),{'destroyed':_0x2bec1f,'pointsAwarded':_0x2eb95b};}function createHitSparks(_0x580529,_0x14b485){const _0x341cff=_0x42eb05;if(!gameCtx)return;const _0x2282ec=Date[_0x341cff(0x244)]();for(let _0x2d3a1c=0x0;_0x2d3a1c<HIT_SPARK_COUNT;_0x2d3a1c++){const _0x3e24ef=Math[_0x341cff(0x12e)]()*Math['PI']*0x2,_0x3b5162=HIT_SPARK_SPEED*(0.7+Math['random']()*0.6),_0x19b223=HIT_SPARK_LIFETIME*(0.8+Math[_0x341cff(0x12e)]()*0.4);hitSparks[_0x341cff(0x20b)]({'x':_0x580529,'y':_0x14b485,'vx':Math[_0x341cff(0x201)](_0x3e24ef)*_0x3b5162,'vy':Math[_0x341cff(0x199)](_0x3e24ef)*_0x3b5162,'creationTime':_0x2282ec,'lifetime':_0x19b223,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x2f197f=_0x42eb05,_0x1621d0=Date[_0x2f197f(0x244)]();for(let _0x786e22=hitSparks[_0x2f197f(0x1d1)]-0x1;_0x786e22>=0x0;_0x786e22--){const _0x428604=hitSparks[_0x786e22],_0x3ef662=_0x1621d0-_0x428604[_0x2f197f(0x13b)];_0x3ef662>=_0x428604['lifetime']?hitSparks[_0x2f197f(0x1f2)](_0x786e22,0x1):(_0x428604['vy']+=HIT_SPARK_GRAVITY,_0x428604['x']+=_0x428604['vx'],_0x428604['y']+=_0x428604['vy'],_0x428604[_0x2f197f(0x1af)]=Math[_0x2f197f(0x1cb)](0x0,0x1-_0x3ef662*HIT_SPARK_FADE_SPEED));}}function moveEntities(){const _0x462d49=_0x42eb05;try{if(isPaused)return;const _0x264ad5=Date[_0x462d49(0x244)]();}catch(_0x581d67){console['error'](_0x462d49(0x1ed),_0x581d67,_0x581d67['stack']),isGridSoundPlaying=![],stopSound('gridBackgroundSound'),isEntrancePhaseActive=![],stopSound(_0x462d49(0x1d4)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x462d49(0x1e7)),stopSound(_0x462d49(0x210)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x462d49(0x1fe))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert('Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.');}}function switchPlayerTurn(){const _0x367f1c=_0x42eb05;if(!isTwoPlayerMode||selectedGameMode===_0x367f1c(0x125))return![];currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive,player1MaxLevelReached=Math[_0x367f1c(0x1cb)](player1MaxLevelReached,level)):(player2Score=score,player2IsDualShipActive=isDualShipActive,player2MaxLevelReached=Math['max'](player2MaxLevelReached,level));const _0x1747c4=currentPlayer===0x1?0x2:0x1,_0x38c316=_0x1747c4===0x1?player1Lives:player2Lives;if(_0x38c316<=0x0){const _0x5cc6a5=currentPlayer===0x1?player1Lives:player2Lives;return _0x5cc6a5<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x1747c4,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0xd59f5a=null,_0x75a764=![]){const _0x9b98bd=_0x42eb05,_0x1ed230=Date[_0x9b98bd(0x244)](),_0x4a323e=isTwoPlayerMode&&selectedGameMode===_0x9b98bd(0x125)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x1ed230<coopPlayersReadyStartTime+0x1f40;if(_0x4a323e){if(_0xd59f5a==='player1'&&!_0x75a764)return![];if(_0xd59f5a==='ai_p2'&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x9b98bd(0x22f))return![];}let _0x4dfce6=![],_0x4fb792=null,_0x39819d=![],_0x1a5a9c=0x0,_0x4ddbb2=_0x33f786=>{},_0x55e0d1=_0x5eabaf=>{},_0x471513=![],_0x19e28c=()=>![],_0x4aeafd=_0x4b4568=>{},_0x375700=_0xd59f5a;const _0x4b675e=!isPaused&&isInGameState&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!showReadyMessage&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(_0xd59f5a===_0x9b98bd(0x19d)&&isPlayer1ShowingGameOverMessage||_0xd59f5a===_0x9b98bd(0x224)&&isPlayer2ShowingGameOverMessage||_0xd59f5a==='ai_p2'&&isPlayer2ShowingGameOverMessage));if(!_0x4b675e)return![];if(_0x375700){let _0xf8ca0e=![];if(_0x375700==='ai'&&isShipCaptured)_0xf8ca0e=!![];else{if(_0x375700===_0x9b98bd(0x1b3)&&isTwoPlayerMode&&selectedGameMode===_0x9b98bd(0x161)&&isShipCaptured)_0xf8ca0e=!![];else{if(_0x375700===_0x9b98bd(0x19d)&&isCoopAIDemoActive&&isPlayer1ShipCaptured)_0xf8ca0e=!![];else{if(_0x375700===_0x9b98bd(0x224)&&isCoopAIDemoActive&&isPlayer2ShipCaptured)_0xf8ca0e=!![];else{if(_0x375700===_0x9b98bd(0x1b3)&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x9b98bd(0x22f)&&isPlayer2ShipCaptured)_0xf8ca0e=!![];}}}}if(_0xf8ca0e)return![];}if(isTwoPlayerMode&&selectedGameMode===_0x9b98bd(0x125)){if(_0xd59f5a===_0x9b98bd(0x19d)&&ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1NeedsRespawnAfterCapture)(!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer1ShipCaptured)&&(_0x4fb792=ship1,_0x39819d=player1IsDualShipActive,_0x1a5a9c=player1LastShotTime,_0x4ddbb2=_0x45fd6a=>{player1LastShotTime=_0x45fd6a;},_0x55e0d1=_0x380e14=>{player1ShotsFired+=_0x380e14;},_0x471513=selectedFiringMode===_0x9b98bd(0x232),_0x19e28c=()=>p1JustFiredSingle,_0x4aeafd=_0x16e848=>{p1JustFiredSingle=_0x16e848;},_0x4dfce6=!![]);else(_0xd59f5a===_0x9b98bd(0x224)||_0xd59f5a===_0x9b98bd(0x1b3))&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2NeedsRespawnAfterCapture&&((!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer2ShipCaptured)&&(_0x4fb792=ship2,_0x39819d=player2IsDualShipActive,_0xd59f5a===_0x9b98bd(0x1b3)&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?(_0x1a5a9c=aiShip2LastShotTime,_0x4ddbb2=_0x3f873c=>{aiShip2LastShotTime=_0x3f873c,player2LastShotTime=_0x3f873c;}):(_0x1a5a9c=player2LastShotTime,_0x4ddbb2=_0xc03a58=>{player2LastShotTime=_0xc03a58;}),_0x55e0d1=_0x4a4b8f=>{player2ShotsFired+=_0x4a4b8f;},isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x9b98bd(0x22f)?_0x471513=![]:(_0x471513=selectedFiringMode===_0x9b98bd(0x232),_0x19e28c=()=>p2JustFiredSingle,_0x4aeafd=_0x5caa51=>{p2JustFiredSingle=_0x5caa51;}),_0x4dfce6=!![]));}else{if(ship&&playerLives>0x0&&!isShipCaptured){_0x4fb792=ship,_0x39819d=isDualShipActive;if(isTwoPlayerMode&&selectedGameMode===_0x9b98bd(0x161)){if(currentPlayer===0x1){_0x1a5a9c=player1LastShotTime,_0x4ddbb2=_0x53607d=>{player1LastShotTime=_0x53607d;},_0x55e0d1=_0x6455ab=>{player1ShotsFired+=_0x6455ab;},_0x471513=selectedFiringMode==='single',_0x19e28c=()=>p1JustFiredSingle,_0x4aeafd=_0x121267=>{p1JustFiredSingle=_0x121267;};if(!_0x375700)_0x375700=_0x9b98bd(0x19d);}else{isPlayerTwoAI?(_0x1a5a9c=aiLastShotTime,_0x4ddbb2=_0xe15526=>{aiLastShotTime=_0xe15526,player2LastShotTime=_0xe15526;}):(_0x1a5a9c=player2LastShotTime,_0x4ddbb2=_0x3325cc=>{player2LastShotTime=_0x3325cc;});_0x55e0d1=_0x3896fb=>{player2ShotsFired+=_0x3896fb;};if(isPlayerTwoAI){_0x471513=![];if(!_0x375700)_0x375700=_0x9b98bd(0x1b3);}else{_0x471513=selectedFiringMode===_0x9b98bd(0x232);connectedGamepadIndexP2===null&&connectedGamepadIndex!==null?(_0x19e28c=()=>p1JustFiredSingle,_0x4aeafd=_0x2bd8dd=>{p1JustFiredSingle=_0x2bd8dd;}):(_0x19e28c=()=>p2JustFiredSingle,_0x4aeafd=_0x17b25b=>{p2JustFiredSingle=_0x17b25b;});if(!_0x375700)_0x375700=_0x9b98bd(0x224);}}}else{_0x1a5a9c=player1LastShotTime,_0x4ddbb2=_0x3f995d=>{player1LastShotTime=_0x3f995d;},_0x55e0d1=_0x51fa2e=>{player1ShotsFired+=_0x51fa2e;},_0x471513=selectedFiringMode===_0x9b98bd(0x232),_0x19e28c=()=>p1JustFiredSingle,_0x4aeafd=_0x569412=>{p1JustFiredSingle=_0x569412;};if(!_0x375700)_0x375700=_0x9b98bd(0x19d);}_0x4dfce6=!![];}}_0xd59f5a===null&&!isManualControl&&ship&&playerLives>0x0&&!isShipCaptured&&!isShowingCaptureMessage&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x9b98bd(0x125))&&(_0x4fb792=ship,_0x39819d=isDualShipActive,_0x1a5a9c=aiLastShotTime,_0x4ddbb2=_0x3d9fde=>{aiLastShotTime=_0x3d9fde;},_0x55e0d1=_0x525a29=>{player1ShotsFired+=_0x525a29;},_0x471513=![],_0x4dfce6=!![],_0x375700='ai');if(!_0x4dfce6||!_0x4fb792)return![];if(_0x471513){if(_0x75a764){if(_0x1ed230-_0x1a5a9c<SHOOT_COOLDOWN)return![];}else{let _0x5dc51d=![];if(_0x375700===_0x9b98bd(0x19d)||!isTwoPlayerMode&&_0x375700==='player1')_0x5dc51d=keyboardP1ShootDown||connectedGamepadIndex!==null&&navigator[_0x9b98bd(0x17d)]()?.[connectedGamepadIndex]?.[_0x9b98bd(0x18b)][PS5_BUTTON_CROSS]?.[_0x9b98bd(0x117)];else{if(_0x375700==='player2'&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)_0x5dc51d=keyboardP2ShootDown||connectedGamepadIndexP2!==null&&navigator['getGamepads']()?.[connectedGamepadIndexP2]?.[_0x9b98bd(0x18b)][PS5_BUTTON_CROSS]?.[_0x9b98bd(0x117)];else connectedGamepadIndex!==null?_0x5dc51d=keyboardP2ShootDown||connectedGamepadIndex!==null&&navigator[_0x9b98bd(0x17d)]()?.[connectedGamepadIndex]?.['buttons'][PS5_BUTTON_CROSS]?.[_0x9b98bd(0x117)]:_0x5dc51d=keyboardP2ShootDown;}}if(_0x19e28c()){if(_0x5dc51d)return![];else _0x4aeafd(![]);}if(_0x1ed230-_0x1a5a9c<SHOOT_COOLDOWN)return![];}}else{if(_0x1ed230-_0x1a5a9c<SHOOT_COOLDOWN)return![];}try{const _0x559fc8=_0x4fb792['y'];let _0x145b19=0x0;if(_0x39819d){const _0x3cf86d=_0x4fb792['x']+_0x4fb792['width']/0x2,_0x3ca220=_0x4fb792['x']+DUAL_SHIP_OFFSET_X+_0x4fb792[_0x9b98bd(0x230)]/0x2,_0x492e32=_0x3cf86d-PLAYER_BULLET_WIDTH/0x2,_0x2ae929=_0x3ca220-PLAYER_BULLET_WIDTH/0x2;bullets[_0x9b98bd(0x20b)]({'x':_0x492e32,'y':_0x559fc8,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x375700}),bullets['push']({'x':_0x2ae929,'y':_0x559fc8,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x375700}),_0x145b19=0x2;}else{const _0x59de79=_0x4fb792['x']+_0x4fb792[_0x9b98bd(0x230)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x9b98bd(0x20b)]({'x':_0x59de79,'y':_0x559fc8,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x375700}),_0x145b19=0x1;}if(_0x471513&&!_0x75a764)_0x4aeafd(!![]);return playSound('playerShootSound',![],0.4),_0x55e0d1(_0x145b19),_0x4ddbb2(_0x1ed230),!![];}catch(_0x55f7fd){return console[_0x9b98bd(0x1a4)](_0x9b98bd(0x231),_0x55f7fd),![];}}function handlePlayerInput(){const _0x3c7b59=_0x42eb05;try{const _0x5af361=Date[_0x3c7b59(0x244)]();let _0x32b81d=![],_0x1bf64a=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedGameMode===_0x3c7b59(0x161)&&currentPlayer===0x2&&!isManualControl||!isManualControl&&!isPlayerTwoAI&&!isCoopAIDemoActive){(isCoopAIDemoActive||!isManualControl&&!isPlayerTwoAI&&!isCoopAIDemoActive)&&(leftPressed=![],rightPressed=![]);shootPressed=![],p2ShootPressed=![];return;}let _0x1cc237=isPaused||!isManualControl||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isTwoPlayerMode&&selectedGameMode===_0x3c7b59(0x125)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage)||isShowingCaptureMessage||showCsBonusScoreMessage||showPerfectMessage||showCsHitsMessage||showCSClearMessage||isCsCompletionDelayActive;const _0x5e0895=isTwoPlayerMode&&selectedGameMode==='coop'&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x5af361<coopPlayersReadyStartTime+0x1f40;let _0x45243d=(_0x5e0895||showReadyMessage)&&isTwoPlayerMode&&selectedGameMode===_0x3c7b59(0x125)&&ship1&&player1Lives>0x0;if(_0x1cc237&&!_0x45243d){keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],leftPressed=![],rightPressed=![],p2LeftPressed=![],p2RightPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],shootPressed=![],p2ShootPressed=![];return;}let _0x30c3e4=0x0;if(isTouchActiveGame&&gameCanvas&&gameCanvas[_0x3c7b59(0x230)]>0x0){const _0x48b24f=gameCanvas['getBoundingClientRect'](),_0x3069c8=gameCanvas[_0x3c7b59(0x230)]/_0x48b24f[_0x3c7b59(0x230)];_0x30c3e4=(touchCurrentX-_0x48b24f[_0x3c7b59(0x1e0)])*_0x3069c8;}let _0x2dc55c=![],_0x4cef67=![],_0x52c903=![],_0x4d58d0=![],_0xcc7517=![],_0x5c6dc4=![];if(!_0x1cc237||_0x45243d){if(connectedGamepadIndex!==null){const _0x3c7c1a=navigator[_0x3c7b59(0x17d)]();if(_0x3c7c1a?.[connectedGamepadIndex]){const _0x5285d6=_0x3c7c1a[connectedGamepadIndex],_0x19ff60=processSingleController(_0x5285d6,previousGameButtonStates);_0x2dc55c=_0x19ff60[_0x3c7b59(0x1e0)],_0x4cef67=_0x19ff60['right'],_0x52c903=_0x19ff60['shoot'],previousGameButtonStates=_0x19ff60[_0x3c7b59(0x168)][_0x3c7b59(0x124)]();if(_0x19ff60[_0x3c7b59(0x14d)]&&!isShowingCaptureMessage&&!generalMessageBlockingInput){togglePause();return;}if(_0x19ff60['back']&&!isShowingCaptureMessage&&!generalMessageBlockingInput){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x3c7b59(0x1d1)]>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates[_0x3c7b59(0x1d1)]>0x0)previousGameButtonStates=[];}if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3c7b59(0x22f))){if(isTwoPlayerMode&&connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex){const _0x21159a=navigator[_0x3c7b59(0x17d)]();if(_0x21159a?.[connectedGamepadIndexP2]){const _0xe80e0b=_0x21159a[connectedGamepadIndexP2],_0x1d4d17=processSingleController(_0xe80e0b,previousGameButtonStatesP2);_0x4d58d0=_0x1d4d17['left'],_0xcc7517=_0x1d4d17['right'],_0x5c6dc4=_0x1d4d17[_0x3c7b59(0x20f)],previousGameButtonStatesP2=_0x1d4d17['newButtonStates']['slice']();}else{if(previousGameButtonStatesP2[_0x3c7b59(0x1d1)]>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}}}const _0x4360cf=p1FireInputWasDown;!_0x1cc237||_0x45243d?p1FireInputWasDown=keyboardP1ShootDown||_0x52c903:p1FireInputWasDown=![];let _0x161a5d=![];if(!_0x1cc237||_0x45243d){if(!(isPlayerTwoAI&&(selectedOnePlayerGameVariant===_0x3c7b59(0x22f)||selectedGameMode===_0x3c7b59(0x161)))){_0x161a5d=p2FireInputWasDown;if(isTwoPlayerMode&&selectedGameMode===_0x3c7b59(0x161)&&currentPlayer===0x2&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)p2FireInputWasDown=keyboardP2ShootDown||_0x5c6dc4;else connectedGamepadIndex!==null?p2FireInputWasDown=keyboardP2ShootDown||_0x52c903:p2FireInputWasDown=keyboardP2ShootDown;}else isTwoPlayerMode&&selectedGameMode==='coop'&&!isPlayerTwoAI&&(p2FireInputWasDown=keyboardP2ShootDown||_0x5c6dc4);}else p2FireInputWasDown=![];}else p2FireInputWasDown=![];if(selectedFiringMode===_0x3c7b59(0x232)&&!isTouchActiveGame){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x4360cf&&!p1FireInputWasDown)p1JustFiredSingle=![];if(!isPlayerTwoAI&&_0x161a5d&&!p2FireInputWasDown)p2JustFiredSingle=![];}else{if(isTwoPlayerMode&&selectedGameMode===_0x3c7b59(0x161)){if(currentPlayer===0x1&&_0x4360cf&&!p1FireInputWasDown)p1JustFiredSingle=![];else{if(currentPlayer===0x2&&!isPlayerTwoAI){let _0x16754b=_0x161a5d,_0x144911=p2FireInputWasDown;connectedGamepadIndexP2===null&&connectedGamepadIndex!==null&&(_0x16754b=_0x4360cf,_0x144911=p1FireInputWasDown);if(_0x16754b&&!_0x144911){if(connectedGamepadIndexP2===null&&connectedGamepadIndex!==null)p1JustFiredSingle=![];else p2JustFiredSingle=![];}}}}else{if(_0x4360cf&&!p1FireInputWasDown)p1JustFiredSingle=![];}}}leftPressed=![],rightPressed=![],p2LeftPressed=![],p2RightPressed=![];let _0x1aa925=![];if(!_0x1cc237||_0x45243d){if(isTouchActiveGame&&gameCanvas){if(isTwoPlayerMode&&selectedGameMode===_0x3c7b59(0x125)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x4fe4a4=ship1[_0x3c7b59(0x230)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x2301c3=_0x30c3e4-_0x4fe4a4/0x2;_0x2301c3=Math[_0x3c7b59(0x1cb)](0x0,Math['min'](gameCanvas[_0x3c7b59(0x230)]-_0x4fe4a4,_0x2301c3)),ship1['x']=_0x2301c3,ship1[_0x3c7b59(0x1b7)]=_0x2301c3,_0x1aa925=!![];}}else{const _0x27619e=ship,_0x18c158=playerLives,_0x119a99=isShipCaptured,_0x4bd130=isDualShipActive,_0x4d2a40=!isPlayerTwoAI||isPlayerTwoAI&&selectedGameMode===_0x3c7b59(0x161)&&currentPlayer===0x1;if(_0x27619e&&_0x18c158>0x0&&!_0x119a99&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&_0x4d2a40){const _0x1d003c=_0x27619e[_0x3c7b59(0x230)]+(_0x4bd130?DUAL_SHIP_OFFSET_X:0x0);let _0x154150=_0x30c3e4-_0x1d003c/0x2;_0x154150=Math[_0x3c7b59(0x1cb)](0x0,Math['min'](gameCanvas[_0x3c7b59(0x230)]-_0x1d003c,_0x154150)),_0x27619e['x']=_0x154150,_0x27619e[_0x3c7b59(0x1b7)]=_0x154150,_0x1aa925=!![];}}}if(!_0x1aa925){if(isTwoPlayerMode&&selectedGameMode===_0x3c7b59(0x125)){const _0x5d8c19=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;_0x5d8c19&&(leftPressed=keyboardP1LeftDown||_0x2dc55c,rightPressed=keyboardP1RightDown||_0x4cef67);if(!isPlayerTwoAI){const _0x23023a=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;_0x23023a&&(p2LeftPressed=keyboardP2LeftDown||_0x4d58d0,p2RightPressed=keyboardP2RightDown||_0xcc7517);}}else{const _0x3b2e36=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0x3b2e36){if(currentPlayer===0x1||!isTwoPlayerMode)leftPressed=keyboardP1LeftDown||_0x2dc55c,rightPressed=keyboardP1RightDown||_0x4cef67;else{if(currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0x3c7b59(0x161)){if(connectedGamepadIndexP2!==null)leftPressed=keyboardP2LeftDown||_0x4d58d0,rightPressed=keyboardP2RightDown||_0xcc7517;else connectedGamepadIndex!==null?(leftPressed=keyboardP2LeftDown||_0x2dc55c,rightPressed=keyboardP2RightDown||_0x4cef67):(leftPressed=keyboardP2LeftDown,rightPressed=keyboardP2RightDown);}}}}}}if(!_0x1cc237){if(isTwoPlayerMode&&selectedGameMode===_0x3c7b59(0x125)){const _0x382199=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;if(_0x382199){(isTouchActiveGame&&selectedFiringMode===_0x3c7b59(0x138)||p1FireInputWasDown)&&(_0x32b81d=!![]);if(isShowingCaptureMessage&&isPlayer1ShipCaptured)_0x32b81d=![];}if(!isPlayerTwoAI){const _0xac1bfc=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;if(_0xac1bfc){p2FireInputWasDown&&(_0x1bf64a=!![]);if(isShowingCaptureMessage&&isPlayer2ShipCaptured)_0x1bf64a=![];}}}else{const _0x32dfdb=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isShowingIntro;if(_0x32dfdb){let _0x45b6e5=![];if(currentPlayer===0x1||!isTwoPlayerMode)_0x45b6e5=p1FireInputWasDown;else currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0x3c7b59(0x161)&&(_0x45b6e5=p2FireInputWasDown);(isTouchActiveGame&&selectedFiringMode===_0x3c7b59(0x138)||_0x45b6e5)&&(_0x32b81d=!![]);(gameJustStarted||isShowingIntro&&level===0x1)&&(!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x1)&&(!(keyboardP1ShootDown||_0x52c903)&&!(isTouchActiveGame&&selectedFiringMode===_0x3c7b59(0x232))&&(_0x32b81d=![]));if(isShowingCaptureMessage&&isShipCaptured)_0x32b81d=![];}}}shootPressed=_0x32b81d,p2ShootPressed=_0x1bf64a,isManualControl&&(isTwoPlayerMode&&selectedGameMode==='coop'?(shootPressed&&firePlayerBullet(_0x3c7b59(0x19d),isTouchActiveGame&&selectedFiringMode==='single'),!isPlayerTwoAI&&p2ShootPressed&&firePlayerBullet(_0x3c7b59(0x224),![])):shootPressed&&(!(isPlayerTwoAI&&selectedGameMode===_0x3c7b59(0x161)&&currentPlayer===0x2)&&firePlayerBullet(currentPlayer===0x1||!isTwoPlayerMode?_0x3c7b59(0x19d):'player2',isTouchActiveGame&&selectedFiringMode===_0x3c7b59(0x232))));}catch(_0x33cda9){console[_0x3c7b59(0x1a4)](_0x3c7b59(0xf9),_0x33cda9),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![];}}let aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;const AI_DODGE_COMMIT_DURATION=0xa0,AI_DODGE_MOVEMENT_SMOOTHING_FACTOR=0.015,AI_NORMAL_MOVEMENT_SMOOTHING_FACTOR=0.04,AI_CAPTURE_DIVE_SHOOT_STOP_DURATION_MS=0xbb8;function aiControl(){const _0x3aa4ed=_0x42eb05;try{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3aa4ed(0x22f))return;let _0x28dee2=null,_0xa7dde6=null,_0x4212b6=![],_0x20577a=![],_0x43fd66=![],_0x26b0ec=0x0,_0x43355a='ai',_0x2c1191=![];if(isPlayerTwoAI&&selectedGameMode===_0x3aa4ed(0x161)&&currentPlayer===0x2){if(!ship||playerLives<=0x0||isShipCaptured||isShowingPlayerGameOverMessage){if(ship)ship[_0x3aa4ed(0x1b7)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x3aa4ed(0x230)]/0x2:0x0;return;}_0x28dee2=ship,_0xa7dde6=smoothedShipX,_0x4212b6=isDualShipActive,_0x20577a=isShipCaptured,_0x43fd66=isInvincible,_0x26b0ec=playerLives,_0x43355a='ai_p2',_0x2c1191=!![];}else{if(!isManualControl&&!isPlayerTwoAI){if(playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage){if(ship)ship[_0x3aa4ed(0x1b7)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x3aa4ed(0x230)]/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}if(isShipCaptured||isShowingCaptureMessage){if(ship)ship[_0x3aa4ed(0x1b7)]=ship['x'];if(smoothedShipX!==undefined&&ship)smoothedShipX=ship['x'];aiIsCurrentlyTargetingCaptureBoss=![];return;}_0x28dee2=ship,_0xa7dde6=smoothedShipX,_0x4212b6=isDualShipActive,_0x20577a=isShipCaptured,_0x43fd66=isInvincible,_0x26b0ec=playerLives,_0x43355a='ai';}else{if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}if(_0xa7dde6===undefined&&_0x28dee2){_0xa7dde6=_0x28dee2['x'];if(_0x2c1191||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0xa7dde6;}else{if(_0xa7dde6===undefined&&!_0x28dee2){_0xa7dde6=gameCanvas?gameCanvas[_0x3aa4ed(0x230)]/0x2:0x0;if(_0x2c1191||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0xa7dde6;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}const _0x147e16=Date[_0x3aa4ed(0x244)](),_0x48b065=gameCanvas['width'],_0x506403=gameCanvas[_0x3aa4ed(0x11f)];let _0x112cc0=_0x28dee2['width'];if(_0x4212b6)_0x112cc0=DUAL_SHIP_OFFSET_X+_0x28dee2['width'];const _0x1eeb5d=_0x28dee2['x']+_0x112cc0/0x2,_0x139962=_0x28dee2['y'],_0x31638d=_0x48b065/0x2,_0x1081ef=_0x31638d-_0x112cc0/0x2,_0x319e42=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive||isShowingCaptureMessage||isShowingIntro;let _0x591e3d=_0xa7dde6,_0x7a751f=![],_0x2a000f=![],_0x588214=_0xa7dde6,_0x578d62=null,_0x132336=![];aiIsCurrentlyTargetingCaptureBoss=![];let _0x36f95c=![],_0x127b1b=![];if(aiNeedsStabilization&&!_0x319e42){aiStabilizationEndTime=_0x147e16+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],_0xa7dde6=_0x28dee2['x'];if(_0x2c1191||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0xa7dde6;}_0x147e16>aiDodgeCommitEndTime&&(aiPreviousDodgeDirection=0x0);if(isChallengingStage&&_0x28dee2){_0x2a000f=![],_0x132336=![],aiIsCurrentlyTargetingCaptureBoss=![],_0x36f95c=![],_0x127b1b=![];let _0x4298d0=null,_0x58ed0f=-Infinity;for(const _0x443b55 of enemies){if(!_0x443b55||_0x443b55['y']<-_0x443b55[_0x3aa4ed(0x11f)]||_0x443b55['y']>_0x506403+_0x443b55[_0x3aa4ed(0x11f)]||_0x443b55['x']<-_0x443b55[_0x3aa4ed(0x230)]||_0x443b55['x']>_0x48b065+_0x443b55[_0x3aa4ed(0x230)])continue;const _0x439bc6=_0x443b55['x']+_0x443b55[_0x3aa4ed(0x230)]/0x2,_0x5b112a=_0x443b55['y']+_0x443b55['height']/0x2,_0x39a219=Math[_0x3aa4ed(0x1cb)](0x0,(_0x28dee2['y']-_0x5b112a)/PLAYER_BULLET_SPEED),_0x45076c=_0x439bc6+(_0x443b55['velocityX']||0x0)*_0x39a219;let _0x489898=_0x45076c-_0x112cc0/0x2;_0x489898=Math['max'](AI_EDGE_BUFFER,Math[_0x3aa4ed(0x16c)](_0x48b065-_0x112cc0-AI_EDGE_BUFFER,_0x489898));let _0x5865ec=(_0x506403-_0x5b112a)*0x2;_0x5865ec-=Math[_0x3aa4ed(0x1f4)](_0x1eeb5d-_0x45076c)*0.5,_0x5865ec>_0x58ed0f&&(_0x58ed0f=_0x5865ec,_0x4298d0=_0x443b55,_0x591e3d=_0x489898);}_0x578d62=_0x4298d0,_0x578d62?_0x7a751f=!![]:(_0x591e3d=_0x1081ef,_0x7a751f=![]),aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;}else{if(!_0x43fd66&&!_0x319e42){const _0x3af6d7=Math[_0x3aa4ed(0x16c)](0x1,level/0xa),_0x4933ec=SHIP_HEIGHT*(8.5+3.5*_0x3af6d7),_0x4ebe2a=0x1f4+0x12c*_0x3af6d7,_0x3bc551=0x12c+0x96*_0x3af6d7,_0x44fda9=_0x112cc0*(0.9+0.5*_0x3af6d7),_0x8e31f0=SHIP_HEIGHT*(0.7+0.4*_0x3af6d7),_0xe30a35=_0x112cc0*(1.8+0.8*_0x3af6d7);let _0x35049a=[];for(const _0x53175c of enemyBullets){if(_0x53175c['y']<_0x28dee2['y']+_0x4933ec&&_0x53175c['y']+_0x53175c['height']>_0x28dee2['y']-SHIP_HEIGHT*0x2){const _0x275741=(_0x28dee2['y']-_0x53175c['y'])/(_0x53175c['vy']||0.01),_0x596b3d=Math[_0x3aa4ed(0x16c)](_0x4ebe2a/16.67,Math[_0x3aa4ed(0x1cb)](0x0,_0x275741/16.67*1.25));let _0x7f24d5=_0x53175c['x']+_0x53175c['vx']*_0x596b3d,_0x34ae8d=_0x53175c['y']+_0x53175c['vy']*_0x596b3d,_0x2261be=![],_0x105df6=_0x8e31f0,_0x32315e=_0x44fda9;const _0x59e26f=Math[_0x3aa4ed(0x1c9)](_0x53175c['vx']*_0x53175c['vx']+_0x53175c['vy']*_0x53175c['vy'])||BASE_ENEMY_BULLET_SPEED;_0x53175c['vy']>_0x59e26f*0.35&&Math['abs'](_0x53175c['x']+_0x53175c[_0x3aa4ed(0x230)]/0x2-(_0x28dee2['x']+_0x112cc0/0x2))<_0x112cc0*1.1&&(_0x2261be=!![],_0x105df6=_0x8e31f0*2.6,_0x32315e*=1.5),_0x35049a[_0x3aa4ed(0x20b)]({'x':_0x7f24d5-_0x53175c[_0x3aa4ed(0x230)]/0x2-_0x32315e,'y':_0x34ae8d-_0x53175c[_0x3aa4ed(0x11f)]/0x2-_0x105df6,'width':_0x53175c[_0x3aa4ed(0x230)]+0x2*_0x32315e,'height':_0x53175c[_0x3aa4ed(0x11f)]+0x2*_0x105df6,'isCritical':!![],'isFromAbove':_0x2261be,'originalVy':_0x53175c['vy']});}}for(const _0x54a3fb of enemies){if(_0x54a3fb&&(_0x54a3fb['state']===_0x3aa4ed(0x136)||_0x54a3fb[_0x3aa4ed(0x13e)]===_0x3aa4ed(0x163))&&_0x54a3fb['y']<_0x28dee2['y']+_0x4933ec*0.9&&_0x54a3fb['y']+_0x54a3fb[_0x3aa4ed(0x11f)]>_0x28dee2['y']-SHIP_HEIGHT*3.5){const _0x8cd8e5=_0x3bc551/16.67;let _0x3750b9=_0x54a3fb['x']+_0x54a3fb[_0x3aa4ed(0x105)]*_0x8cd8e5,_0x77f5b5=_0x54a3fb['y']+_0x54a3fb[_0x3aa4ed(0x1db)]*_0x8cd8e5;_0x35049a[_0x3aa4ed(0x20b)]({'x':_0x3750b9-_0x44fda9*0.95,'y':_0x77f5b5-_0x8e31f0*0.95,'width':_0x54a3fb[_0x3aa4ed(0x230)]+0x2*_0x44fda9*0.95,'height':_0x54a3fb[_0x3aa4ed(0x11f)]+0x2*_0x8e31f0*0.95,'isCritical':!![],'isFromAbove':![],'originalVy':_0x54a3fb[_0x3aa4ed(0x1db)]});}}_0x35049a[_0x3aa4ed(0x12c)]((_0x3e09d3,_0x4157be)=>(_0x4157be[_0x3aa4ed(0x1cc)]?0x1:-0x1)-(_0x3e09d3[_0x3aa4ed(0x1cc)]?0x1:-0x1)||(_0x4157be[_0x3aa4ed(0x1fc)]||0x0)-(_0x3e09d3['originalVy']||0x0));if(_0x35049a[_0x3aa4ed(0x1d1)]>0x0){_0x2a000f=!![];let _0x488c68={'x':_0xa7dde6,'score':-Infinity,'dir':0x0,'minDistance':Infinity,'collisions':Infinity};const _0x4f2b3d={'x':_0xa7dde6,'y':_0x28dee2['y'],'width':_0x112cc0,'height':_0x28dee2[_0x3aa4ed(0x11f)]};let _0x4f635e=0x0,_0x4189ad=0x0,_0x52dd69=Infinity;for(const _0x4f000e of _0x35049a){checkCollision(_0x4f2b3d,_0x4f000e)&&(_0x4f635e++,_0x4189ad-=level===0x1?0xdac:0xbb8,_0x4f000e[_0x3aa4ed(0x1cc)]&&(_0x4189ad-=level===0x1?0x3a98:0x32c8));const _0x4b0c1e=_0x4f000e['x']+_0x4f000e[_0x3aa4ed(0x230)]/0x2,_0x157bfb=_0x4f2b3d['x']+_0x4f2b3d[_0x3aa4ed(0x230)]/0x2,_0x55ee6e=Math[_0x3aa4ed(0x1f4)](_0x157bfb-_0x4b0c1e)-(_0x4f2b3d[_0x3aa4ed(0x230)]/0x2+_0x4f000e[_0x3aa4ed(0x230)]/0x2);_0x55ee6e<_0x52dd69&&(_0x52dd69=_0x55ee6e);}_0x488c68={'x':_0xa7dde6,'score':_0x4189ad,'dir':0x0,'minDistance':_0x52dd69,'collisions':_0x4f635e};const _0x21e985=_0xe30a35,_0xac6792=0x3;for(let _0x30ef72=0x0;_0x30ef72<_0xac6792;_0x30ef72++){for(const _0xbc0165 of[-0x1,0x1]){let _0x37dd87=_0xa7dde6+_0xbc0165*_0x21e985*(_0x30ef72+0x1);_0x37dd87=Math[_0x3aa4ed(0x1cb)](AI_EDGE_BUFFER*1.2,Math['min'](_0x48b065-_0x112cc0-AI_EDGE_BUFFER*1.2,_0x37dd87));const _0x2b0c57={'x':_0x37dd87,'y':_0x28dee2['y'],'width':_0x112cc0,'height':_0x28dee2[_0x3aa4ed(0x11f)]};let _0x486737=0x0,_0x288dcf=0x0,_0x158325=Infinity;for(const _0x45037f of _0x35049a){checkCollision(_0x2b0c57,_0x45037f)&&(_0x486737++,_0x288dcf-=level===0x1?0xdac:0xbb8,_0x45037f[_0x3aa4ed(0x1cc)]&&(_0x288dcf-=level===0x1?0x3a98:0x32c8));const _0x54ca93=_0x45037f['x']+_0x45037f[_0x3aa4ed(0x230)]/0x2,_0x55eeb8=_0x2b0c57['x']+_0x2b0c57[_0x3aa4ed(0x230)]/0x2,_0xc5f6cf=Math[_0x3aa4ed(0x1f4)](_0x55eeb8-_0x54ca93)-(_0x2b0c57[_0x3aa4ed(0x230)]/0x2+_0x45037f['width']/0x2);_0xc5f6cf<_0x158325&&(_0x158325=_0xc5f6cf);}_0x288dcf-=Math[_0x3aa4ed(0x1f4)](_0x37dd87-_0x1081ef)*0.05,_0x288dcf-=_0x30ef72*0x2;_0x486737===0x0&&_0xbc0165===aiPreviousDodgeDirection&&aiPreviousDodgeDirection!==0x0&&(_0x288dcf+=0x64);if(_0x486737<_0x488c68[_0x3aa4ed(0x20e)])_0x488c68={'x':_0x37dd87,'score':_0x288dcf,'dir':_0xbc0165,'minDistance':_0x158325,'collisions':_0x486737};else{if(_0x486737===_0x488c68[_0x3aa4ed(0x20e)]){if(_0x158325>_0x488c68[_0x3aa4ed(0x203)])_0x488c68={'x':_0x37dd87,'score':_0x288dcf,'dir':_0xbc0165,'minDistance':_0x158325,'collisions':_0x486737};else _0x158325===_0x488c68[_0x3aa4ed(0x203)]&&Math[_0x3aa4ed(0x1f4)](_0x37dd87-_0x1081ef)<Math[_0x3aa4ed(0x1f4)](_0x488c68['x']-_0x1081ef)&&(_0x488c68={'x':_0x37dd87,'score':_0x288dcf,'dir':_0xbc0165,'minDistance':_0x158325,'collisions':_0x486737});}}}}_0x588214=_0x488c68['x'],_0x591e3d=_0x588214;if(_0x488c68[_0x3aa4ed(0x249)]!==0x0&&_0x488c68[_0x3aa4ed(0x20e)]===0x0)(aiPreviousDodgeDirection!==_0x488c68[_0x3aa4ed(0x249)]||_0x488c68['minDistance']<_0x112cc0*0.5)&&(aiPreviousDodgeDirection=_0x488c68[_0x3aa4ed(0x249)],aiDodgeCommitEndTime=_0x147e16+AI_DODGE_COMMIT_DURATION+(level===0x1?0x3c:0x0));else _0x488c68[_0x3aa4ed(0x20e)]>0x0?(aiPreviousDodgeDirection=_0x488c68[_0x3aa4ed(0x249)],aiDodgeCommitEndTime=_0x147e16+AI_DODGE_COMMIT_DURATION/0x2):(aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0);}else aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;}else aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;}if(_0x2a000f&&!isChallengingStage){_0x132336=![],aiIsCurrentlyTargetingCaptureBoss=![],_0x36f95c=![],_0x127b1b=![],_0x578d62=null;const _0x4fb7a9=_0x591e3d<AI_EDGE_BUFFER*2.5||_0x591e3d>_0x48b065-_0x112cc0-AI_EDGE_BUFFER*2.5;if(Math[_0x3aa4ed(0x1f4)](_0x591e3d-_0xa7dde6)>_0x112cc0*0.1&&!_0x4fb7a9){let _0x3f5971=null,_0x4014dc=-Infinity;for(const _0x3f24d6 of enemies){if(!_0x3f24d6)continue;let _0x49e847=(_0x506403-_0x3f24d6['y'])*1.5-Math[_0x3aa4ed(0x1f4)](_0x3f24d6['x']+_0x3f24d6[_0x3aa4ed(0x230)]/0x2-_0x1eeb5d)*0x2;if(_0x3f24d6[_0x3aa4ed(0x13e)]===_0x3aa4ed(0x136)||_0x3f24d6[_0x3aa4ed(0x13e)]===_0x3aa4ed(0x163))_0x49e847+=0x258;if(_0x3f24d6['type']===ENEMY3_TYPE&&_0x3f24d6[_0x3aa4ed(0x1f1)])_0x49e847+=0x4b0;else{if(_0x3f24d6[_0x3aa4ed(0x1ea)]===ENEMY3_TYPE&&_0x3f24d6['isDamaged'])_0x49e847+=0x190;else{if(_0x3f24d6['type']===ENEMY3_TYPE)_0x49e847-=0xc8;}}_0x49e847>_0x4014dc&&(_0x4014dc=_0x49e847,_0x3f5971=_0x3f24d6);}_0x578d62=_0x3f5971;}_0x7a751f=_0x578d62!==null;}else{if(!isChallengingStage){if(fallingShips['length']>0x0&&!_0x20577a&&!isWaitingForRespawn&&!_0x4212b6){let _0x564a00=null,_0x2faa4f=Infinity;for(const _0x13abfc of fallingShips){let _0x345b38=!isManualControl&&!isPlayerTwoAI&&_0x13abfc[_0x3aa4ed(0x134)]===_0x3aa4ed(0x19d)||_0x2c1191&&_0x13abfc['targetPlayerId']===String(currentPlayer);if(!_0x564a00&&!_0x345b38&&_0x13abfc[_0x3aa4ed(0x134)]===null)_0x345b38=!![];if(_0x13abfc&&!_0x13abfc['landed']&&_0x345b38){const _0x4d9e64=Math[_0x3aa4ed(0x1f4)](_0x13abfc['x']+_0x13abfc[_0x3aa4ed(0x230)]/0x2-_0x1eeb5d)+Math['abs'](_0x13abfc['y']-_0x28dee2['y']);_0x4d9e64<_0x2faa4f&&(_0x2faa4f=_0x4d9e64,_0x564a00=_0x13abfc);}}_0x564a00&&(_0x127b1b=!![],_0x591e3d=_0x564a00['x']+_0x564a00['width']/0x2-_0x112cc0/0x2,_0x7a751f=![],_0x578d62=null);}if(!_0x127b1b){const _0x32363c=enemies[_0x3aa4ed(0x1e1)](_0x458fe6=>_0x458fe6['id']===capturingBossId&&_0x458fe6[_0x3aa4ed(0x1ea)]===ENEMY3_TYPE),_0x11bc53=captureBeamActive&&_0x32363c&&_0x32363c[_0x3aa4ed(0x13e)]===_0x3aa4ed(0x101)&&!_0x20577a;if(_0x11bc53){const _0x3c684e=_0x26b0ec>0x1&&!_0x4212b6;if(_0x3c684e){aiIsCurrentlyTargetingCaptureBoss=!![],_0x132336=!![];const _0x960b64=_0x32363c['x']+_0x32363c['width']/0x2;_0x591e3d=_0x960b64-_0x112cc0/0x2,_0x7a751f=![],_0x578d62=null;}}}if(!_0x127b1b&&!_0x132336&&!aiIsCurrentlyTargetingCaptureBoss){const _0x2c681e=enemies[_0x3aa4ed(0x1e1)](_0x31713f=>_0x31713f[_0x3aa4ed(0x1ea)]===ENEMY3_TYPE&&_0x31713f['hasCapturedShip']&&_0x31713f[_0x3aa4ed(0x1bd)]>0x0&&_0x147e16-_0x31713f[_0x3aa4ed(0x1bd)]>0xbb8);if(_0x2c681e)_0x36f95c=!![],_0x578d62=_0x2c681e,_0x591e3d=_0x2c681e['x']+_0x2c681e[_0x3aa4ed(0x230)]/0x2-_0x112cc0/0x2,_0x7a751f=!![];else{_0x578d62=null;let _0x11743d=-Infinity;for(const _0x4fdcec of enemies){if(!_0x4fdcec)continue;let _0x34b06b=0x0;const _0x3ae025=_0x4fdcec['x']+_0x4fdcec['width']/0x2,_0x38adad=_0x3ae025-_0x1eeb5d,_0x2376b8=_0x139962-(_0x4fdcec['y']+_0x4fdcec[_0x3aa4ed(0x11f)]);if(_0x2376b8<0x0&&_0x4fdcec['state']!==_0x3aa4ed(0x136)&&_0x4fdcec[_0x3aa4ed(0x13e)]!=='diving_to_capture_position'&&_0x4fdcec[_0x3aa4ed(0x13e)]!==_0x3aa4ed(0x1b2))continue;_0x34b06b=(_0x506403-_0x4fdcec['y'])*0x2-Math[_0x3aa4ed(0x1f4)](_0x38adad)*0x3-_0x2376b8;if(_0x4fdcec[_0x3aa4ed(0x13e)]===_0x3aa4ed(0x136)||_0x4fdcec[_0x3aa4ed(0x13e)]===_0x3aa4ed(0x163))_0x34b06b+=0xbb8;if(_0x4fdcec[_0x3aa4ed(0x1ea)]===ENEMY3_TYPE&&!_0x4fdcec[_0x3aa4ed(0x15b)]&&!_0x4fdcec['hasCapturedShip'])_0x34b06b-=0x5dc;if(_0x4fdcec[_0x3aa4ed(0x1ea)]===ENEMY3_TYPE&&_0x4fdcec[_0x3aa4ed(0x15b)]&&!_0x4fdcec[_0x3aa4ed(0x1f1)])_0x34b06b+=0x3e8;if(_0x4fdcec[_0x3aa4ed(0x1ea)]===ENEMY3_TYPE&&_0x4fdcec[_0x3aa4ed(0x1f1)])_0x34b06b+=0x1388;_0x34b06b>_0x11743d&&(_0x11743d=_0x34b06b,_0x578d62=_0x4fdcec);}if(_0x578d62){const _0x2acd13=_0x578d62['x']+_0x578d62[_0x3aa4ed(0x230)]/0x2;_0x591e3d=_0x2acd13-_0x112cc0/0x2;const _0x34198e=1.8;let _0x5ea69c=_0x578d62[_0x3aa4ed(0x13e)]===_0x3aa4ed(0x1ec)||_0x578d62['state']===_0x3aa4ed(0x135)?_0x112cc0*(GRID_SHOOT_ALIGNMENT_FACTOR*_0x34198e):_0x112cc0*(FINAL_SHOOT_ALIGNMENT_THRESHOLD*_0x34198e);Math[_0x3aa4ed(0x1f4)](_0x1eeb5d-_0x2acd13)<_0x5ea69c&&(_0x7a751f=!![]);}else _0x591e3d=_0x1081ef,_0x7a751f=![];}}}}let _0x56ebb3;isChallengingStage?_0x56ebb3=CS_SHOOTING_MOVE_FRACTION:_0x56ebb3=_0x2a000f?AI_DODGE_MOVEMENT_SMOOTHING_FACTOR:AI_NORMAL_MOVEMENT_SMOOTHING_FACTOR;if(_0x28dee2){_0xa7dde6+=(_0x591e3d-_0xa7dde6)*_0x56ebb3,_0x28dee2[_0x3aa4ed(0x1b7)]=_0xa7dde6;if(_0x2c1191||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0xa7dde6;}if(_0x7a751f&&!isShowingIntro){let _0x38d83e=!![];if(!isChallengingStage){(_0x132336||_0x127b1b)&&(_0x38d83e=![]);if(_0x578d62){if(_0x578d62[_0x3aa4ed(0x1ea)]===ENEMY3_TYPE&&!_0x578d62[_0x3aa4ed(0x1f1)]){const _0x5e1669=isEntrancePhaseActive||[_0x3aa4ed(0x1ec),_0x3aa4ed(0x135),_0x3aa4ed(0x163),_0x3aa4ed(0x101)][_0x3aa4ed(0x218)](_0x578d62['state']),_0x37bf23=_0x578d62['id']===capturingBossId&&aiIsCurrentlyTargetingCaptureBoss;_0x5e1669&&!_0x37bf23&&!_0x36f95c&&(_0x38d83e=![]);}_0x578d62['type']===ENEMY3_TYPE&&_0x578d62['captureDiveInitiationTime']&&_0x578d62[_0x3aa4ed(0x226)]>0x0&&_0x147e16-_0x578d62[_0x3aa4ed(0x226)]<AI_CAPTURE_DIVE_SHOOT_STOP_DURATION_MS&&(_0x38d83e=![]);}else _0x38d83e=![];}if(_0x38d83e){if(firePlayerBullet(_0x43355a,![])){}}}}catch(_0x1d9561){console['error'](_0x3aa4ed(0x23f),_0x1d9561,_0x1d9561[_0x3aa4ed(0x183)]);if(ship)ship[_0x3aa4ed(0x1b7)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas['width']/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];}}let aiCoopP1_PreviousDodgeDirection=0x0,aiCoopP1_DodgeCommitEndTime=0x0,aiCoopP2_PreviousDodgeDirection=0x0,aiCoopP2_DodgeCommitEndTime=0x0;const AI_COOP_DODGE_MOVEMENT_SMOOTHING_FACTOR=0.022;function aiControlCoop(){const _0x5d109b=_0x42eb05;if(!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5d109b(0x22f))||isPaused||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0){if(ship1)ship1[_0x5d109b(0x1b7)]=ship1['x'];if(ship2)ship2[_0x5d109b(0x1b7)]=ship2['x'];return;}const _0xe435d8=Date[_0x5d109b(0x244)](),_0x257d7a=gameCanvas[_0x5d109b(0x230)],_0x28852c=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture,_0x133b5c=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture,_0x554c4d=_0x16df2b=>{const _0x1c158c=_0x16df2b==='p1'&&isPlayer1ShowingGameOverMessage||_0x16df2b==='p2'&&isPlayer2ShowingGameOverMessage;return _0x1c158c||showReadyMessage||isCsCompletionDelayActive||isShowingIntro&&!(level===0x1&&coopPlayersReadyStartTime>0x0&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'));};if(_0x28852c&&ship1&&isCoopAIDemoActive){if(smoothedShip1X===undefined)smoothedShip1X=ship1['x'];if(_0xe435d8>aiCoopP1_DodgeCommitEndTime)aiCoopP1_PreviousDodgeDirection=0x0;const _0x529753=_0x554c4d('p1');let _0x1103e1,_0x661484=null;_0x1103e1=calculateAIDesiredState(ship1,smoothedShip1X,player1IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer1Invincible,isPlayer1ShipCaptured,isPlayer1WaitingForRespawn,_0xe435d8,_0x257d7a,_0x529753,'p1',_0x661484,aiCoopP1_PreviousDodgeDirection),aiShip1TargetEnemy=_0x1103e1[_0x5d109b(0x19f)];let _0x375d3a=_0x1103e1[_0x5d109b(0x18c)]?AI_COOP_DODGE_MOVEMENT_SMOOTHING_FACTOR:AI_SMOOTHING_FACTOR_MOVE;smoothedShip1X+=(_0x1103e1[_0x5d109b(0x19e)]-smoothedShip1X)*_0x375d3a,ship1['targetX']=smoothedShip1X;if(_0x1103e1[_0x5d109b(0x154)]!==undefined&&_0x1103e1['predictedCollisions']===0x0){if(_0x1103e1['chosenDodgeDir']!==0x0&&_0x1103e1[_0x5d109b(0x154)]!==aiCoopP1_PreviousDodgeDirection)aiCoopP1_PreviousDodgeDirection=_0x1103e1[_0x5d109b(0x154)],aiCoopP1_DodgeCommitEndTime=_0xe435d8+AI_DODGE_COMMIT_DURATION;else _0x1103e1[_0x5d109b(0x154)]===0x0&&(aiCoopP1_PreviousDodgeDirection=0x0);}else _0x1103e1[_0x5d109b(0x148)]>0x0&&(aiCoopP1_PreviousDodgeDirection=0x0);_0x1103e1[_0x5d109b(0x1f8)]&&!(isShowingCaptureMessage&&isPlayer1ShipCaptured)&&fireCoopAIBullet(ship1,player1IsDualShipActive,_0x5d109b(0x19d));}if(_0x133b5c&&ship2&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5d109b(0x22f))){if(smoothedShip2X===undefined)smoothedShip2X=ship2['x'];if(_0xe435d8>aiCoopP2_DodgeCommitEndTime)aiCoopP2_PreviousDodgeDirection=0x0;const _0x4498c9=_0x554c4d('p2'),_0x3f2b20=isCoopAIDemoActive?_0x5d109b(0x224):_0x5d109b(0x1b3);let _0x3ac2bc,_0x1c0176=null;_0x3ac2bc=calculateAIDesiredState(ship2,smoothedShip2X,player2IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer2Invincible,isPlayer2ShipCaptured,isPlayer2WaitingForRespawn,_0xe435d8,_0x257d7a,_0x4498c9,_0x3f2b20,_0x1c0176,aiCoopP2_PreviousDodgeDirection),aiShip2TargetEnemy=_0x3ac2bc[_0x5d109b(0x19f)];let _0x430c77=_0x3ac2bc[_0x5d109b(0x18c)]?AI_COOP_DODGE_MOVEMENT_SMOOTHING_FACTOR:AI_SMOOTHING_FACTOR_MOVE;smoothedShip2X+=(_0x3ac2bc[_0x5d109b(0x19e)]-smoothedShip2X)*_0x430c77,ship2[_0x5d109b(0x1b7)]=smoothedShip2X;if(_0x3ac2bc[_0x5d109b(0x154)]!==undefined&&_0x3ac2bc[_0x5d109b(0x148)]===0x0){if(_0x3ac2bc[_0x5d109b(0x154)]!==0x0&&_0x3ac2bc[_0x5d109b(0x154)]!==aiCoopP2_PreviousDodgeDirection)aiCoopP2_PreviousDodgeDirection=_0x3ac2bc[_0x5d109b(0x154)],aiCoopP2_DodgeCommitEndTime=_0xe435d8+AI_DODGE_COMMIT_DURATION;else _0x3ac2bc[_0x5d109b(0x154)]===0x0&&(aiCoopP2_PreviousDodgeDirection=0x0);}else _0x3ac2bc[_0x5d109b(0x148)]>0x0&&(aiCoopP2_PreviousDodgeDirection=0x0);_0x3ac2bc['shouldTryShoot']&&!(isShowingCaptureMessage&&isPlayer2ShipCaptured)&&fireCoopAIBullet(ship2,player2IsDualShipActive,_0x3f2b20);}}function fireCoopAIBullet(_0x2a1adf,_0x2575e0,_0xaec6fd){if(!_0x2a1adf)return![];return firePlayerBullet(_0xaec6fd,![]);}function calculateAIDesiredState(_0x495229,_0x5c334a,_0x293cba,_0x427922,_0x3f730b,_0x147802,_0x2f8193,_0x1fa3e3,_0x1d7bd2,_0x3b0a90,_0x1cb763,_0x3223ba,_0x337bb8,_0x288f60=null,_0x37f031=0x0){const _0x204c09=_0x42eb05;let _0x52940b=_0x5c334a,_0x173727=![],_0x56ec3b=null,_0x1265ea=![],_0x146ebe=![],_0x49ae63=![],_0x3e8bd8=![],_0xf6a8b9=0x0,_0xca6046=0x0,_0x4f9e36=null;const _0x48ac14=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x204c09(0x22f),_0x43f6ac=gameCanvas[_0x204c09(0x11f)],_0x1edc52=_0x495229['width']+(_0x293cba?DUAL_SHIP_OFFSET_X:0x0),_0x3af15a=_0x495229['x']+_0x1edc52/0x2,_0xa40cbb=_0x495229['y'],_0x37544e=_0x337bb8==='p1'?player1Lives:_0x337bb8===_0x204c09(0x1b3)||_0x337bb8===_0x204c09(0x224)?player2Lives:0x0,_0x3a5ae0=_0x37544e>0x1&&!_0x293cba&&!_0x1fa3e3;let _0x31e624=gameCanvas[_0x204c09(0x230)]/0x2;const _0x1cde5d=isShowingIntro||isShowingCoopPlayersReady,_0x54cdf9=_0x48ac14&&_0x1cde5d&&!(isChallengingStage&&isEntrancePhaseActive),_0x1cadc4=_0x48ac14&&(_0x337bb8==='p1'&&player1Lives>0x0&&player2Lives<=0x0||(_0x337bb8===_0x204c09(0x1b3)||_0x337bb8==='player2')&&player2Lives>0x0&&player1Lives<=0x0);if(_0x54cdf9&&_0x1cadc4)_0x31e624=gameCanvas[_0x204c09(0x230)]/0x2;else{if(_0x337bb8==='p1')_0x31e624=gameCanvas[_0x204c09(0x230)]*0.25+Math[_0x204c09(0x199)](_0x3b0a90/(AI_WIGGLE_PERIOD*1.1))*(AI_WIGGLE_AMPLITUDE*0.8);else(_0x337bb8===_0x204c09(0x1b3)||_0x337bb8===_0x204c09(0x224))&&(_0x31e624=gameCanvas[_0x204c09(0x230)]*0.75+Math[_0x204c09(0x201)](_0x3b0a90/(AI_WIGGLE_PERIOD*0.9))*(AI_WIGGLE_AMPLITUDE*0.8));}let _0x17c267=_0x31e624-_0x1edc52/0x2;if(_0x3223ba||_0x1fa3e3||_0x1d7bd2||_0x337bb8==='p1'&&player1NeedsRespawnAfterCapture||(_0x337bb8===_0x204c09(0x1b3)||_0x337bb8==='player2')&&player2NeedsRespawnAfterCapture)return _0x52940b=_0x54cdf9&&_0x1cadc4?_0x17c267:_0x495229['x'],{'desiredTargetX':_0x52940b,'shouldTryShoot':![],'targetEnemyForAI':null,'chosenDodgeDir':0x0,'isDodging':![],'predictedCollisions':0x0};const _0x239469=_0x427922[_0x204c09(0x1e1)](_0x25afd5=>_0x25afd5['id']===capturingBossId&&_0x25afd5[_0x204c09(0x1ea)]===ENEMY3_TYPE);if(isCoopAIDemoActive){for(const _0x5ae647 of _0x427922){if(_0x5ae647[_0x204c09(0x1ea)]===ENEMY3_TYPE&&_0x5ae647[_0x204c09(0x1f1)]&&_0x5ae647[_0x204c09(0x1bd)]>0x0&&_0x3b0a90-_0x5ae647[_0x204c09(0x1bd)]>0xbb8){_0x4f9e36=_0x5ae647;break;}}_0x4f9e36&&(_0x56ec3b=_0x4f9e36,_0x52940b=_0x56ec3b['x']+_0x56ec3b[_0x204c09(0x230)]/0x2-_0x1edc52/0x2,_0x173727=!![],_0x3e8bd8=!![]);}let _0x11715a=_0x5c334a;if(!isChallengingStage&&!_0x2f8193){const _0x1d373d=SHIP_HEIGHT*0x9,_0x446841=0x226,_0x15d551=0x15e,_0x11a853=_0x1edc52*0.6,_0x3032d8=SHIP_HEIGHT*0.4,_0x5567df=_0x1edc52*0.6,_0x5ae22c=SHIP_HEIGHT*0.6;let _0x11e83a=[];for(const _0x537b33 of _0x3f730b){if(_0x537b33['y']<_0x495229['y']+_0x1d373d&&_0x537b33['y']+_0x537b33[_0x204c09(0x11f)]>_0x495229['y']-SHIP_HEIGHT*0x3){const _0x5eacc9=_0x446841/16.67;let _0x3cc262=_0x537b33['x']+_0x537b33['vx']*_0x5eacc9,_0x1a709f=_0x537b33['y']+_0x537b33['vy']*_0x5eacc9,_0x5865e9=![],_0x1bf8ed=_0x3032d8,_0x259faa=_0x11a853;const _0x24af4b=Math[_0x204c09(0x1c9)](_0x537b33['vx']*_0x537b33['vx']+_0x537b33['vy']*_0x537b33['vy'])||BASE_ENEMY_BULLET_SPEED;_0x537b33['vy']>_0x24af4b*0.6&&Math[_0x204c09(0x1f4)](_0x537b33['x']+_0x537b33[_0x204c09(0x230)]/0x2-(_0x495229['x']+_0x1edc52/0x2))<_0x1edc52*0.9&&(_0x5865e9=!![],_0x1bf8ed=_0x3032d8*1.85),_0x11e83a['push']({'x':_0x3cc262-_0x537b33[_0x204c09(0x230)]/0x2-_0x259faa,'y':_0x1a709f-_0x537b33['height']/0x2-_0x1bf8ed,'width':_0x537b33[_0x204c09(0x230)]+0x2*_0x259faa,'height':_0x537b33[_0x204c09(0x11f)]+0x2*_0x1bf8ed,'isCritical':!![],'isFromAbove':_0x5865e9});}}for(const _0x436499 of _0x427922){if(_0x436499&&(_0x436499[_0x204c09(0x13e)]===_0x204c09(0x136)||_0x436499['state']===_0x204c09(0x163))&&_0x436499['y']<_0x495229['y']+_0x1d373d*0.8&&_0x436499['y']+_0x436499[_0x204c09(0x11f)]>_0x495229['y']-SHIP_HEIGHT*3.5){const _0x3daba5=_0x15d551/16.67;let _0x383f9d=_0x436499['x']+_0x436499[_0x204c09(0x105)]*_0x3daba5,_0x5cc54d=_0x436499['y']+_0x436499[_0x204c09(0x1db)]*_0x3daba5;_0x11e83a[_0x204c09(0x20b)]({'x':_0x383f9d-_0x5567df/0x2,'y':_0x5cc54d-_0x5ae22c/0x2,'width':_0x436499[_0x204c09(0x230)]+_0x5567df,'height':_0x436499[_0x204c09(0x11f)]+_0x5ae22c,'isCritical':!![],'isFromAbove':![]});}}if(_0x11e83a['length']>0x0){_0x1265ea=!![];let _0x8b5ebd=_0x5c334a,_0x17e874=Infinity,_0x15c2a7=-0x1;const _0x47d397=[-0x1,0x1];if(_0x37f031!==0x0){_0x47d397[_0x204c09(0x204)](_0x37f031);const _0x22e13f=-_0x37f031;if(!_0x47d397['includes'](_0x22e13f))_0x47d397[_0x204c09(0x20b)](_0x22e13f);}const _0x564c33=[...new Set(_0x47d397),0x0];for(const _0x56d3e of _0x564c33){const _0x3ecd98=_0x56d3e===0x0?0x0:_0x1edc52*1.8+Math[_0x204c09(0x12e)]()*_0x1edc52*0.8;let _0x3bacbe=_0x5c334a+_0x56d3e*_0x3ecd98;_0x3bacbe=Math[_0x204c09(0x1cb)](AI_EDGE_BUFFER*2.5,Math[_0x204c09(0x16c)](_0x1cb763-_0x1edc52-AI_EDGE_BUFFER*2.5,_0x3bacbe));const _0xf6909f={'x':_0x3bacbe,'y':_0x495229['y'],'width':_0x1edc52,'height':_0x495229[_0x204c09(0x11f)]};let _0x2161a4=0x0,_0x2dff3b=Infinity;for(const _0xb705be of _0x11e83a){checkCollision(_0xf6909f,_0xb705be)&&(_0x2161a4++,_0xb705be[_0x204c09(0x1cc)]&&(_0x2161a4+=0x5));const _0x39743a=_0xb705be['x']+_0xb705be[_0x204c09(0x230)]/0x2,_0x29d53a=_0xf6909f['x']+_0xf6909f[_0x204c09(0x230)]/0x2,_0x42e956=Math['abs'](_0x29d53a-_0x39743a)-(_0xf6909f['width']/0x2+_0xb705be[_0x204c09(0x230)]/0x2);_0x42e956<_0x2dff3b&&(_0x2dff3b=_0x42e956);}if(_0x2161a4<_0x17e874)_0x17e874=_0x2161a4,_0x15c2a7=_0x2dff3b,_0x8b5ebd=_0x3bacbe,_0xf6a8b9=_0x56d3e;else{if(_0x2161a4===_0x17e874){if(_0x2dff3b>_0x15c2a7)_0x15c2a7=_0x2dff3b,_0x8b5ebd=_0x3bacbe,_0xf6a8b9=_0x56d3e;else _0x2dff3b===_0x15c2a7&&Math[_0x204c09(0x1f4)](_0x3bacbe-_0x17c267)<Math['abs'](_0x8b5ebd-_0x17c267)&&(_0x8b5ebd=_0x3bacbe,_0xf6a8b9=_0x56d3e);}}}_0x11715a=_0x8b5ebd,_0xca6046=_0x17e874;}else _0x37f031!==0x0&&_0x3b0a90<(_0x337bb8==='p1'?aiCoopP1_DodgeCommitEndTime:aiCoopP2_DodgeCommitEndTime)?(_0x1265ea=!![],_0x11715a=_0x5c334a+_0x37f031*(_0x1edc52*0.05),_0xf6a8b9=_0x37f031):_0xf6a8b9=0x0;}else _0xf6a8b9=0x0;if(_0x1265ea){_0x52940b=Math[_0x204c09(0x1cb)](AI_EDGE_BUFFER,Math[_0x204c09(0x16c)](gameCanvas[_0x204c09(0x230)]-_0x1edc52-AI_EDGE_BUFFER,_0x11715a));if(isCoopAIDemoActive&&_0x4f9e36)_0x56ec3b=null,_0x173727=![],_0x3e8bd8=![];else{_0x146ebe=![],_0x49ae63=![],_0x3e8bd8=![],_0x56ec3b=null;const _0x126047=_0x52940b<AI_EDGE_BUFFER*0x2||_0x52940b>_0x1cb763-_0x1edc52-AI_EDGE_BUFFER*0x2;if(Math[_0x204c09(0x1f4)](_0x52940b-_0x5c334a)>_0x1edc52*0.1&&!_0x126047){let _0x2222e1=null,_0x7edd0d=-Infinity;for(const _0xae0432 of _0x427922){if(!_0xae0432)continue;if(_0x288f60&&_0xae0432['id']===_0x288f60)continue;let _0x2b60b2=0x0;const _0x1b9102=_0xae0432['x']+_0xae0432[_0x204c09(0x230)]/0x2,_0x1e4d71=_0x1b9102-_0x3af15a,_0x2d00cb=_0xa40cbb-(_0xae0432['y']+_0xae0432['height']);if(_0x2d00cb<0x0&&_0xae0432['state']!==_0x204c09(0x136)&&_0xae0432[_0x204c09(0x13e)]!=='diving_to_capture_position'&&_0xae0432[_0x204c09(0x13e)]!==_0x204c09(0x1b2))continue;_0x2b60b2=(_0x43f6ac-_0xae0432['y'])*1.2-Math[_0x204c09(0x1f4)](_0x1e4d71)*2.2-_0x2d00cb*0.7;if(_0xae0432[_0x204c09(0x13e)]==='attacking'||_0xae0432[_0x204c09(0x13e)]===_0x204c09(0x163))_0x2b60b2+=0x15e;if(_0xae0432[_0x204c09(0x1ea)]===ENEMY3_TYPE&&_0xae0432[_0x204c09(0x1f1)])_0x2b60b2+=0x2bc;else{if(_0xae0432[_0x204c09(0x1ea)]===ENEMY3_TYPE&&_0xae0432[_0x204c09(0x15b)])_0x2b60b2+=0x12c;else{if(_0xae0432[_0x204c09(0x1ea)]===ENEMY3_TYPE)_0x2b60b2-=0x96;}}_0x2b60b2>_0x7edd0d&&(_0x7edd0d=_0x2b60b2,_0x2222e1=_0xae0432);}_0x56ec3b=_0x2222e1;}_0x173727=_0x56ec3b!==null;}}else{if(!(isCoopAIDemoActive&&_0x4f9e36)){_0x146ebe=![],_0x49ae63=![],_0x3e8bd8=![],_0x56ec3b=null;if(!_0x293cba){const _0x10f770=_0x147802[_0x204c09(0x1e1)](_0x509b44=>_0x509b44[_0x204c09(0x134)]===_0x337bb8&&!_0x509b44[_0x204c09(0x14a)]);_0x10f770&&(_0x146ebe=!![],_0x52940b=_0x10f770['x']+_0x10f770['width']/0x2-_0x1edc52/0x2,_0x173727=![]);}if(!_0x146ebe){const _0x1b97ef=captureBeamActive&&_0x239469&&_0x239469[_0x204c09(0x13e)]===_0x204c09(0x101)&&!_0x1fa3e3;if(_0x3a5ae0&&_0x1b97ef){let _0x4ed14d=![];if(_0x48ac14){if(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&_0x337bb8===_0x204c09(0x1b3)){_0x4ed14d=!![];if(aiPlayerActivelySeekingCaptureById===null)aiPlayerActivelySeekingCaptureById=_0x337bb8;}else{if(isCoopAIDemoActive){if(aiPlayerActivelySeekingCaptureById===null||aiPlayerActivelySeekingCaptureById===_0x337bb8){if(aiPlayerActivelySeekingCaptureById===null)aiPlayerActivelySeekingCaptureById=_0x337bb8;_0x4ed14d=!![];}}}}if(_0x4ed14d){_0x49ae63=!![];const _0x285cc7=_0x239469['x']+_0x239469[_0x204c09(0x230)]/0x2;_0x52940b=_0x285cc7-_0x1edc52/0x2,_0x173727=![],_0x56ec3b=_0x239469;}}aiPlayerActivelySeekingCaptureById===_0x337bb8&&!_0x49ae63&&(aiPlayerActivelySeekingCaptureById=null);}if(!_0x146ebe&&!_0x49ae63){if(!isCoopAIDemoActive){const _0x3968d9=_0x427922[_0x204c09(0x1e1)](_0x4c247a=>_0x4c247a[_0x204c09(0x1ea)]===ENEMY3_TYPE&&_0x4c247a[_0x204c09(0x1f1)]&&_0x4c247a[_0x204c09(0x1bd)]>0x0&&_0x3b0a90-_0x4c247a[_0x204c09(0x1bd)]>0xbb8&&(!_0x48ac14||_0x48ac14&&_0x4c247a['id']!==capturedBossIdWithMessage)&&(!_0x239469||_0x4c247a['id']!==_0x239469['id'])&&(!_0x288f60||_0x4c247a['id']!==_0x288f60));let _0x9a8076=![];isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x204c09(0x22f)&&_0x337bb8===_0x204c09(0x1b3)&&isPlayer1ShipCaptured&&capturedBossIdWithMessage&&(_0x3968d9&&_0x3968d9['id']===capturedBossIdWithMessage&&(_0x9a8076=!![])),_0x3968d9&&!_0x9a8076&&(_0x3e8bd8=!![],_0x56ec3b=_0x3968d9,_0x52940b=_0x3968d9['x']+_0x3968d9[_0x204c09(0x230)]/0x2-_0x1edc52/0x2,_0x173727=!![]);}if(!_0x3e8bd8){let _0x49eb52=-Infinity;for(const _0x4ea6bb of _0x427922){if(!_0x4ea6bb)continue;if(_0x288f60&&_0x4ea6bb['id']===_0x288f60)continue;if(_0x239469&&_0x4ea6bb['id']===_0x239469['id']&&(_0x239469[_0x204c09(0x13e)]===_0x204c09(0x135)||_0x239469[_0x204c09(0x13e)]===_0x204c09(0x163)||_0x239469[_0x204c09(0x13e)]===_0x204c09(0x101)))continue;if(_0x48ac14&&aiPlayerActivelySeekingCaptureById&&aiPlayerActivelySeekingCaptureById!==_0x337bb8&&_0x239469&&_0x4ea6bb['id']===_0x239469['id'])continue;if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x204c09(0x22f)&&_0x337bb8===_0x204c09(0x1b3)&&isPlayer1ShipCaptured&&capturedBossIdWithMessage&&_0x4ea6bb['id']===capturedBossIdWithMessage)continue;if(isCoopAIDemoActive&&capturedBossIdWithMessage&&_0x4ea6bb['id']===capturedBossIdWithMessage&&(_0x337bb8==='player2'&&isPlayer1ShipCaptured||_0x337bb8===_0x204c09(0x19d)&&isPlayer2ShipCaptured))continue;let _0x5c897b=_0x4ea6bb[_0x204c09(0x1ea)]===ENEMY3_TYPE&&_0x4ea6bb[_0x204c09(0x1f1)]&&_0x37544e<=0x1&&(!_0x48ac14||_0x48ac14&&_0x4ea6bb['id']!==capturedBossIdWithMessage),_0x1b4a97=0x0;const _0xaa6d6b=_0x4ea6bb['x']+_0x4ea6bb[_0x204c09(0x230)]/0x2,_0x4c91ec=_0xaa6d6b-_0x3af15a,_0x1f2a32=_0xa40cbb-(_0x4ea6bb['y']+_0x4ea6bb['height']);if(_0x1f2a32<0x0&&_0x4ea6bb[_0x204c09(0x13e)]!==_0x204c09(0x136)&&_0x4ea6bb[_0x204c09(0x13e)]!==_0x204c09(0x163)&&_0x4ea6bb[_0x204c09(0x13e)]!==_0x204c09(0x1b2))continue;let _0x1b3c8d=0x0;if(_0x48ac14&&!(isCoopAIDemoActive&&aiPlayerActivelySeekingCaptureById&&aiPlayerActivelySeekingCaptureById!==_0x337bb8)){if(_0x337bb8==='p1'&&_0xaa6d6b<gameCanvas[_0x204c09(0x230)]/0x2)_0x1b3c8d=0x1388;else{if((_0x337bb8===_0x204c09(0x1b3)||_0x337bb8==='player2')&&_0xaa6d6b>=gameCanvas[_0x204c09(0x230)]/0x2)_0x1b3c8d=0x1388;}}_0x1b4a97=_0x1b3c8d+(_0x43f6ac-_0x4ea6bb['y'])*0x2-Math[_0x204c09(0x1f4)](_0x4c91ec)*0x3-_0x1f2a32;if(_0x4ea6bb[_0x204c09(0x13e)]===_0x204c09(0x136)||_0x4ea6bb['state']===_0x204c09(0x163))_0x1b4a97+=0xbb8;if(_0x4ea6bb[_0x204c09(0x1ea)]===ENEMY3_TYPE&&!_0x4ea6bb[_0x204c09(0x15b)]&&!_0x4ea6bb[_0x204c09(0x1f1)])_0x1b4a97-=0x5dc;if(_0x4ea6bb[_0x204c09(0x1ea)]===ENEMY3_TYPE&&_0x4ea6bb[_0x204c09(0x15b)]&&!_0x4ea6bb[_0x204c09(0x1f1)])_0x1b4a97+=0x3e8;if(_0x4ea6bb['type']===ENEMY3_TYPE&&_0x4ea6bb[_0x204c09(0x1f1)]){if(!_0x5c897b)_0x1b4a97+=0x1388;else _0x1b4a97-=0x2710;}_0x1b4a97>_0x49eb52&&(_0x49eb52=_0x1b4a97,_0x56ec3b=_0x4ea6bb);}if(_0x56ec3b){_0x52940b=_0x56ec3b['x']+_0x56ec3b[_0x204c09(0x230)]/0x2-_0x1edc52/0x2;const _0x17a3f1=isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?1.2:0.9;Math['abs'](_0x3af15a-(_0x56ec3b['x']+_0x56ec3b[_0x204c09(0x230)]/0x2))<_0x1edc52*_0x17a3f1&&(_0x173727=!![]);}else _0x52940b=_0x17c267,_0x173727=![];}}}}if(_0x173727){(_0x49ae63||_0x146ebe)&&(_0x173727=![]);if(_0x173727&&_0x56ec3b){if(isCoopAIDemoActive&&_0x56ec3b===_0x4f9e36){}else{if(_0x56ec3b['id']===capturingBossId){const _0x3bb5e9=_0x56ec3b[_0x204c09(0x13e)]===_0x204c09(0x135)||_0x56ec3b[_0x204c09(0x13e)]===_0x204c09(0x163)||_0x56ec3b[_0x204c09(0x13e)]===_0x204c09(0x101);if(_0x3bb5e9)_0x173727=![];}if(_0x56ec3b[_0x204c09(0x1ea)]===ENEMY3_TYPE&&!_0x56ec3b[_0x204c09(0x1f1)]){const _0x236f06=['in_grid','preparing_capture',_0x204c09(0x163),_0x204c09(0x101)][_0x204c09(0x218)](_0x56ec3b[_0x204c09(0x13e)])||isEntrancePhaseActive,_0x53ffe3=_0x239469&&_0x56ec3b['id']===_0x239469['id']&&aiPlayerActivelySeekingCaptureById===_0x337bb8;_0x236f06&&!_0x3e8bd8&&!_0x53ffe3&&(_0x173727=![]);}if(_0x293cba&&_0x48ac14&&_0x56ec3b[_0x204c09(0x1ea)]===ENEMY3_TYPE&&!_0x56ec3b['hasCapturedShip']){const _0x275746=_0x337bb8==='p1'?isCoopAIDemoActive?'player2':'ai_p2':'p1';let _0x1dfcc3=![];_0x275746==='p1'?_0x1dfcc3=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1IsDualShipActive:_0x1dfcc3=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2IsDualShipActive;if(_0x1dfcc3)_0x173727=![];}if(_0x56ec3b[_0x204c09(0x1ea)]===ENEMY3_TYPE&&_0x56ec3b['hasCapturedShip']&&_0x37544e<=0x1){const _0x1dd58c=_0x48ac14&&_0x56ec3b['id']===capturedBossIdWithMessage&&(_0x337bb8==='p1'&&isPlayer2ShipCaptured||_0x337bb8!=='p1'&&isPlayer1ShipCaptured);if(!_0x1dd58c&&!_0x3e8bd8)_0x173727=![];}_0x288f60&&_0x56ec3b['id']===_0x288f60&&(_0x173727=![]);}}else _0x173727&&!_0x56ec3b&&(_0x173727=![]);if(_0x173727){_0x48ac14&&aiPlayerActivelySeekingCaptureById&&aiPlayerActivelySeekingCaptureById!==_0x337bb8&&_0x239469&&_0x56ec3b&&_0x56ec3b['id']===_0x239469['id']&&(_0x173727=![]);if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x204c09(0x22f)&&_0x337bb8===_0x204c09(0x1b3)){const _0x228749=isShowingIntro&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x3b0a90<coopPlayersReadyStartTime+0x1f40;(_0x228749||isShowingIntro)&&(_0x173727=![]);const _0xf387ac=_0x427922['some'](_0x3f4960=>_0x3f4960[_0x204c09(0x1ea)]===ENEMY3_TYPE&&_0x3f4960[_0x204c09(0x226)]&&_0x3f4960[_0x204c09(0x226)]>0x0&&_0x3b0a90-_0x3f4960[_0x204c09(0x226)]<AI_CAPTURE_DIVE_SHOOT_STOP_DURATION_MS);_0xf387ac&&(_0x173727=![]),isPlayer1ShipCaptured&&capturedBossIdWithMessage&&_0x56ec3b&&_0x56ec3b['id']===capturedBossIdWithMessage&&(_0x173727=![]);}}}return _0x52940b=Math[_0x204c09(0x1cb)](AI_EDGE_BUFFER,Math[_0x204c09(0x16c)](gameCanvas[_0x204c09(0x230)]-_0x1edc52-AI_EDGE_BUFFER,_0x52940b)),{'desiredTargetX':_0x52940b,'shouldTryShoot':_0x173727,'targetEnemyForAI':_0x56ec3b,'chosenDodgeDir':_0xf6a8b9,'isDodging':_0x1265ea,'predictedCollisions':_0xca6046};}function findAndDetachEnemy(){const _0x5157c5=_0x42eb05;try{let _0xf2c688=![];isTwoPlayerMode&&selectedGameMode===_0x5157c5(0x125)?_0xf2c688=isPlayer1ShipCaptured||isPlayer2ShipCaptured:_0xf2c688=isShipCaptured;if(!isFullGridWave&&_0xf2c688){const _0x3905eb=enemies[_0x5157c5(0x1e1)](_0x183452=>_0x183452&&_0x183452['type']===ENEMY3_TYPE&&_0x183452[_0x5157c5(0x1f1)]&&_0x183452['state']===_0x5157c5(0x1ec));if(_0x3905eb){_0x3905eb['justReturned']=!![],_0x3905eb['attackType']='normal';const _0x177b3b=new Set([_0x3905eb['id']]);return resetJustReturnedFlags(_0x177b3b),[_0x3905eb];}}if(isEntrancePhaseActive)return null;let _0x328d3b=enemies[_0x5157c5(0x14c)](_0x9624c6=>_0x9624c6&&_0x9624c6[_0x5157c5(0x13e)]===_0x5157c5(0x1ec)&&!_0x9624c6['justReturned']);if(_0x328d3b[_0x5157c5(0x1d1)]===0x0){_0x328d3b=enemies[_0x5157c5(0x14c)](_0x2b13ff=>_0x2b13ff&&_0x2b13ff[_0x5157c5(0x13e)]===_0x5157c5(0x1ec));if(_0x328d3b[_0x5157c5(0x1d1)]===0x0)return null;}if(_0x328d3b['length']===0x0)return null;_0x328d3b[_0x5157c5(0x12c)]((_0x48b548,_0x5e3a2e)=>(_0x5e3a2e[_0x5157c5(0x24b)]||0x0)-(_0x48b548[_0x5157c5(0x24b)]||0x0));const _0xe6db26=_0x328d3b[_0x5157c5(0x1d1)]<=0x3;let _0x119296=[];const _0x20c149=_0x5157c5(0x161);gridJustCompleted&&(gridJustCompleted=![]);let _0x163c52=![];if(level>0x1&&!_0xe6db26&&_0x328d3b['length']>=0x3){const _0x4eec64=_0x328d3b[_0x5157c5(0x14c)](_0x35be08=>_0x35be08['type']===ENEMY3_TYPE&&!_0x35be08[_0x5157c5(0x1f1)]);for(const _0x36c971 of _0x4eec64){const _0x1f8c93=_0x328d3b[_0x5157c5(0x1e1)](_0x6fc0e9=>_0x6fc0e9[_0x5157c5(0x1ea)]===ENEMY2_TYPE&&_0x6fc0e9[_0x5157c5(0x24b)]===_0x36c971['gridRow']&&_0x6fc0e9[_0x5157c5(0x143)]===_0x36c971[_0x5157c5(0x143)]-0x1),_0x2ec296=_0x328d3b[_0x5157c5(0x1e1)](_0x235aa7=>_0x235aa7[_0x5157c5(0x1ea)]===ENEMY2_TYPE&&_0x235aa7[_0x5157c5(0x24b)]===_0x36c971[_0x5157c5(0x24b)]&&_0x235aa7[_0x5157c5(0x143)]===_0x36c971['gridCol']+0x1);if(_0x1f8c93&&_0x2ec296){_0x119296=[_0x36c971,_0x1f8c93,_0x2ec296],_0x163c52=!![];break;}}}if(!_0x163c52&&!_0xe6db26){const _0x3e3dfc=_0x328d3b[_0x5157c5(0x14c)](_0x2b1155=>_0x2b1155[_0x5157c5(0x1ea)]===ENEMY1_TYPE),_0x3e33d0=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x3e3dfc[_0x5157c5(0x1d1)]>=0x2&&Math[_0x5157c5(0x12e)]()<_0x3e33d0){const _0x279a29=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x60cc6a=_0x3e3dfc[_0x5157c5(0x1d1)]>=0x3&&Math[_0x5157c5(0x12e)]()<_0x279a29?0x3:0x2;let _0x615c7f=![];_0x3e3dfc[_0x5157c5(0x12c)](()=>Math[_0x5157c5(0x12e)]()-0.5);for(let _0x4fd060=0x0;_0x4fd060<_0x3e3dfc[_0x5157c5(0x1d1)];_0x4fd060++){const _0x3899d3=_0x3e3dfc[_0x4fd060];let _0x3d22ce=[_0x3899d3];const _0x4d6463=_0x3e3dfc['filter'](_0xda1dcb=>_0xda1dcb['id']!==_0x3899d3['id']&&_0xda1dcb['gridRow']===_0x3899d3[_0x5157c5(0x24b)]);_0x4d6463[_0x5157c5(0x12c)]((_0xf707e3,_0x5ee359)=>Math[_0x5157c5(0x1f4)](_0xf707e3['gridCol']-_0x3899d3[_0x5157c5(0x143)])-Math[_0x5157c5(0x1f4)](_0x5ee359[_0x5157c5(0x143)]-_0x3899d3[_0x5157c5(0x143)]));for(let _0x58f07b=0x0;_0x58f07b<_0x4d6463[_0x5157c5(0x1d1)]&&_0x3d22ce['length']<_0x60cc6a;_0x58f07b++){_0x3d22ce[_0x5157c5(0x20b)](_0x4d6463[_0x58f07b]);}if(_0x3d22ce[_0x5157c5(0x1d1)]===_0x60cc6a){_0x119296=_0x3d22ce,_0x163c52=!![],_0x615c7f=!![];break;}}!_0x615c7f&&_0x3e3dfc['length']>=_0x60cc6a&&(_0x119296=_0x3e3dfc[_0x5157c5(0x124)](0x0,_0x60cc6a),_0x163c52=!![]);}}if(!_0x163c52&&!_0xe6db26){const _0x78c937=_0x328d3b[_0x5157c5(0x14c)](_0x2c39bd=>_0x2c39bd['type']===ENEMY2_TYPE),_0x2392c5=0.2;if(_0x78c937[_0x5157c5(0x1d1)]>=0x2&&Math[_0x5157c5(0x12e)]()<_0x2392c5){const _0x51f04d=0x2;let _0x5054d9=![];_0x78c937[_0x5157c5(0x12c)](()=>Math['random']()-0.5);for(let _0xef69cd=0x0;_0xef69cd<_0x78c937[_0x5157c5(0x1d1)];_0xef69cd++){const _0x35d810=_0x78c937[_0xef69cd];let _0x2e8c96=[_0x35d810];const _0x1e2c37=_0x78c937[_0x5157c5(0x14c)](_0x2a4106=>_0x2a4106['id']!==_0x35d810['id']&&_0x2a4106[_0x5157c5(0x24b)]===_0x35d810[_0x5157c5(0x24b)]);_0x1e2c37[_0x5157c5(0x12c)]((_0x169d41,_0x51c529)=>Math[_0x5157c5(0x1f4)](_0x169d41[_0x5157c5(0x143)]-_0x35d810[_0x5157c5(0x143)])-Math[_0x5157c5(0x1f4)](_0x51c529[_0x5157c5(0x143)]-_0x35d810['gridCol']));for(let _0x518090=0x0;_0x518090<_0x1e2c37[_0x5157c5(0x1d1)]&&_0x2e8c96[_0x5157c5(0x1d1)]<_0x51f04d;_0x518090++){_0x2e8c96[_0x5157c5(0x20b)](_0x1e2c37[_0x518090]);}if(_0x2e8c96['length']===_0x51f04d){_0x119296=_0x2e8c96,_0x163c52=!![],_0x5054d9=!![];break;}}!_0x5054d9&&_0x78c937['length']>=_0x51f04d&&(_0x119296=_0x78c937['slice'](0x0,_0x51f04d),_0x163c52=!![]);}}if(!_0x163c52&&_0x328d3b[_0x5157c5(0x1d1)]>0x0){const _0x578190=_0x328d3b[0x0];_0x119296[_0x5157c5(0x20b)](_0x578190);if(_0x328d3b[_0x5157c5(0x1d1)]>0x1&&!_0xe6db26&&Math[_0x5157c5(0x12e)]()<0.2){const _0x208609=_0x328d3b[_0x5157c5(0x1e1)](_0x23cff3=>_0x23cff3['id']!==_0x578190['id']&&_0x23cff3[_0x5157c5(0x24b)]===_0x578190['gridRow']&&_0x23cff3[_0x5157c5(0x143)]===_0x578190['gridCol']-0x1),_0x99c15e=_0x328d3b[_0x5157c5(0x1e1)](_0x116189=>_0x116189['id']!==_0x578190['id']&&_0x116189[_0x5157c5(0x24b)]===_0x578190['gridRow']&&_0x116189[_0x5157c5(0x143)]===_0x578190[_0x5157c5(0x143)]+0x1),_0x1eeefc=_0x208609||_0x99c15e;if(_0x1eeefc){const _0x52398c=_0x578190[_0x5157c5(0x1ea)]===ENEMY3_TYPE&&_0x1eeefc['type']===ENEMY3_TYPE;!_0x52398c&&_0x119296[_0x5157c5(0x20b)](_0x1eeefc);}}_0x163c52=!![];}if(_0x119296['length']>0x0){_0x119296=_0x119296['filter'](_0x19833f=>_0x19833f);if(_0x119296[_0x5157c5(0x1d1)]===0x0)return null;_0x119296[_0x5157c5(0x1b4)](_0x320b43=>{const _0x4a6e9b=_0x5157c5;_0x320b43&&(_0x320b43[_0x4a6e9b(0x1eb)]=!![],_0x320b43['attackType']=_0x20c149);});const _0x4572de=new Set(_0x119296[_0x5157c5(0x21a)](_0x5b68ec=>_0x5b68ec['id']));return resetJustReturnedFlags(_0x4572de),_0x119296;}return null;}catch(_0x2ee460){return console[_0x5157c5(0x1a4)]('Error\x20in\x20findAndDetachEnemy:',_0x2ee460),null;}}function triggerImmediateCaptureDive(){const _0x5e6e50=_0x42eb05;try{if(isChallengingStage||captureAttemptMadeThisLevel)return;let _0x557906=[];isTwoPlayerMode&&selectedGameMode===_0x5e6e50(0x125)?(ship1&&player1Lives>0x1&&!player1IsDualShipActive&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!player1NeedsRespawnAfterCapture&&_0x557906[_0x5e6e50(0x20b)]({'playerShip':ship1,'playerNum':0x1}),ship2&&player2Lives>0x1&&!player2IsDualShipActive&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!player2NeedsRespawnAfterCapture&&_0x557906['push']({'playerShip':ship2,'playerNum':0x2})):ship&&playerLives>0x1&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0x557906[_0x5e6e50(0x20b)]({'playerShip':ship,'playerNum':currentPlayer});if(_0x557906['length']===0x0)return;const _0x3dbe87=_0x557906[Math['floor'](Math[_0x5e6e50(0x12e)]()*_0x557906['length'])],_0x33a7a2=_0x3dbe87['playerShip'],_0x2861e5=enemies[_0x5e6e50(0x14c)](_0xea2e47=>_0xea2e47&&_0xea2e47['state']===_0x5e6e50(0x1ec)&&_0xea2e47[_0x5e6e50(0x1ea)]===ENEMY3_TYPE&&!_0xea2e47[_0x5e6e50(0x1f1)]&&!_0xea2e47[_0x5e6e50(0x20d)]);if(_0x2861e5[_0x5e6e50(0x1d1)]>0x0){const _0x2ce2d3=_0x2861e5[Math[_0x5e6e50(0x1a6)](Math[_0x5e6e50(0x12e)]()*_0x2861e5[_0x5e6e50(0x1d1)])],_0x48ba01=Date['now']();_0x2ce2d3[_0x5e6e50(0x20d)]=!![],_0x2ce2d3[_0x5e6e50(0x1eb)]=!![],_0x2ce2d3['captureDiveInitiationTime']=_0x48ba01;const _0x36bfe7=new Set([_0x2ce2d3['id']]);resetJustReturnedFlags(_0x36bfe7);const _0xdf39c1=_0x33a7a2['x']+_0x33a7a2[_0x5e6e50(0x230)]/0x2,_0x29c5d9=_0xdf39c1<gameCanvas['width']/0x2?_0x5e6e50(0x1e0):_0x5e6e50(0x172);let _0x4bc64a,_0xdf1840;_0x29c5d9===_0x5e6e50(0x1e0)?_0x4bc64a=gameCanvas[_0x5e6e50(0x230)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:_0x4bc64a=gameCanvas['width']*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH;_0xdf1840=gameCanvas['height']*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR,_0x2ce2d3[_0x5e6e50(0x13e)]=_0x5e6e50(0x135),_0x2ce2d3[_0x5e6e50(0x1b7)]=_0x4bc64a,_0x2ce2d3[_0x5e6e50(0x1e9)]=_0xdf1840,_0x2ce2d3['diveStartTime']=_0x48ba01,playSound(_0x5e6e50(0x174),![],0.2);const _0x1b6d61=_0x2ce2d3['id'],_0x1a8ab9=setTimeout(()=>{const _0x4db9d4=_0x5e6e50,_0x215b10=enemies[_0x4db9d4(0x1e1)](_0x173694=>_0x173694?.['id']===_0x1b6d61);_0x215b10&&_0x215b10[_0x4db9d4(0x13e)]===_0x4db9d4(0x135)&&(_0x215b10['state']=_0x4db9d4(0x163),captureAttemptMadeThisLevel=!![]);if(_0x215b10)_0x215b10[_0x4db9d4(0x128)]=null;const _0x558247=enemySpawnTimeouts['indexOf'](_0x1a8ab9);if(_0x558247>-0x1)enemySpawnTimeouts[_0x4db9d4(0x1f2)](_0x558247,0x1);},0x12c);_0x2ce2d3[_0x5e6e50(0x128)]=_0x1a8ab9,enemySpawnTimeouts[_0x5e6e50(0x20b)](_0x1a8ab9);}}catch(_0x11a128){console[_0x5e6e50(0x1a4)](_0x5e6e50(0x18a),_0x11a128);}}function resetJustReturnedFlags(_0x41b83c){enemies['forEach'](_0x479e07=>{const _0x193b1f=_0x4a68;let _0x3c973b=![];if(_0x41b83c instanceof Set)_0x3c973b=_0x41b83c['has'](_0x479e07['id']);else typeof _0x41b83c===_0x193b1f(0x20c)&&(_0x3c973b=_0x479e07['id']===_0x41b83c);_0x479e07&&_0x479e07[_0x193b1f(0x13e)]===_0x193b1f(0x1ec)&&_0x479e07['justReturned']&&!_0x3c973b&&(_0x479e07[_0x193b1f(0x1eb)]=![]);});}function updateFloatingScores(){const _0x5bec1a=_0x42eb05;if(isPaused)return;try{const _0x4e3b9c=Date[_0x5bec1a(0x244)]();floatingScores=floatingScores[_0x5bec1a(0x14c)](_0x2fe9a9=>_0x4e3b9c-_0x2fe9a9[_0x5bec1a(0x13b)]<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x721fd0){console[_0x5bec1a(0x1a4)](_0x5bec1a(0x175),_0x721fd0),floatingScores=[];}}function updateExplosions(){const _0x5ec2a9=_0x42eb05;if(isPaused)return;try{const _0x5e1100=Date[_0x5ec2a9(0x244)]();for(let _0x4efed3=explosions[_0x5ec2a9(0x1d1)]-0x1;_0x4efed3>=0x0;_0x4efed3--){const _0x5ec2e0=explosions[_0x4efed3],_0xbc3bd6=_0x5e1100-_0x5ec2e0[_0x5ec2a9(0x13b)];if(_0xbc3bd6>_0x5ec2e0[_0x5ec2a9(0x23e)]){explosions[_0x5ec2a9(0x1f2)](_0x4efed3,0x1);continue;}_0x5ec2e0[_0x5ec2a9(0x129)][_0x5ec2a9(0x1b4)](_0x173b0e=>{const _0x4367a8=_0x5ec2a9;_0x173b0e['x']+=_0x173b0e['vx'],_0x173b0e['y']+=_0x173b0e['vy'],_0x173b0e['alpha']=Math[_0x4367a8(0x1cb)](0x0,0x1-_0xbc3bd6/_0x5ec2e0[_0x4367a8(0x23e)]*EXPLOSION_FADE_SPEED);});}}catch(_0x1de7ab){console[_0x5ec2a9(0x1a4)](_0x5ec2a9(0x103),_0x1de7ab),explosions=[];}}function moveEntities(_0x3ddea8=null,_0x58efb9=null){const _0x2f2a4c=_0x42eb05;if(isPaused)return;try{const _0x5097e5=Date[_0x2f2a4c(0x244)](),_0x3992d7=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x2ecdad=0xbb8;if(gameCanvas&&!isTouchActiveGame){if(isManualControl){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0xf495cc=ship1['width']+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(leftPressed)ship1['x']-=ship1[_0x2f2a4c(0x20a)];if(rightPressed)ship1['x']+=ship1[_0x2f2a4c(0x20a)];ship1['x']=Math[_0x2f2a4c(0x1cb)](0x0,Math[_0x2f2a4c(0x16c)](gameCanvas[_0x2f2a4c(0x230)]-_0xf495cc,ship1['x'])),ship1[_0x2f2a4c(0x1b7)]=ship1['x'];}if(!isPlayerTwoAI&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x3316d1=ship2['width']+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(p2LeftPressed)ship2['x']-=ship2[_0x2f2a4c(0x20a)];if(p2RightPressed)ship2['x']+=ship2['speed'];ship2['x']=Math[_0x2f2a4c(0x1cb)](0x0,Math[_0x2f2a4c(0x16c)](gameCanvas[_0x2f2a4c(0x230)]-_0x3316d1,ship2['x'])),ship2[_0x2f2a4c(0x1b7)]=ship2['x'];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1){const _0x30e775=ship['width']+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x1ec5e6=![],_0x46901d=![];if(isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2f2a4c(0xf8)&&currentPlayer===0x1&&isShowingIntro){if(_0x3ddea8!==null)_0x1ec5e6=_0x3ddea8;if(_0x58efb9!==null)_0x46901d=_0x58efb9;}if(_0x1ec5e6||leftPressed)ship['x']-=ship[_0x2f2a4c(0x20a)];if(_0x46901d||rightPressed)ship['x']+=ship['speed'];ship['x']=Math[_0x2f2a4c(0x1cb)](0x0,Math[_0x2f2a4c(0x16c)](gameCanvas['width']-_0x30e775,ship['x'])),ship[_0x2f2a4c(0x1b7)]=ship['x'];}}}}}if(!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x2f2a4c(0x161)&&currentPlayer===0x2||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2f2a4c(0x22f)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2f2a4c(0x22f)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x4bf0d1=ship1[_0x2f2a4c(0x1b7)]-ship1['x'];let _0x399a26=ship1[_0x2f2a4c(0x20a)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x2f2a4c(0x1f4)](_0x4bf0d1)>AI_MOVEMENT_DEADZONE)ship1['x']+=Math['sign'](_0x4bf0d1)*Math['min'](Math[_0x2f2a4c(0x1f4)](_0x4bf0d1),_0x399a26);const _0x2a5304=ship1['width']+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship1['x']=Math[_0x2f2a4c(0x1cb)](0x0,Math[_0x2f2a4c(0x16c)](gameCanvas[_0x2f2a4c(0x230)]-_0x2a5304,ship1['x']));}if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x30d25c=ship2[_0x2f2a4c(0x1b7)]-ship2['x'];let _0x66a801=ship2[_0x2f2a4c(0x20a)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x2f2a4c(0x1f4)](_0x30d25c)>AI_MOVEMENT_DEADZONE)ship2['x']+=Math[_0x2f2a4c(0x1a8)](_0x30d25c)*Math[_0x2f2a4c(0x16c)](Math['abs'](_0x30d25c),_0x66a801);const _0x95fb35=ship2[_0x2f2a4c(0x230)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship2['x']=Math[_0x2f2a4c(0x1cb)](0x0,Math[_0x2f2a4c(0x16c)](gameCanvas[_0x2f2a4c(0x230)]-_0x95fb35,ship2['x']));}}else{if(ship){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){const _0x40534c=ship[_0x2f2a4c(0x1b7)]-ship['x'];let _0x51a063=ship['speed']*AI_POSITION_MOVE_SPEED_FACTOR;isPlayerTwoAI&&selectedGameMode===_0x2f2a4c(0x161)&&currentPlayer===0x2&&(_0x51a063=ship[_0x2f2a4c(0x20a)]*(AI_POSITION_MOVE_SPEED_FACTOR*1.15));Math[_0x2f2a4c(0x1f4)](_0x40534c)>AI_MOVEMENT_DEADZONE&&(ship['x']+=Math['sign'](_0x40534c)*Math['min'](Math[_0x2f2a4c(0x1f4)](_0x40534c),_0x51a063));const _0x139b56=ship[_0x2f2a4c(0x230)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship['x']=Math['max'](0x0,Math[_0x2f2a4c(0x16c)](gameCanvas[_0x2f2a4c(0x230)]-_0x139b56,ship['x']));}}}}if(isTwoPlayerMode&&selectedGameMode===_0x2f2a4c(0x125)){if(isPlayer1WaitingForRespawn&&_0x5097e5>=player1RespawnTime)isPlayer1WaitingForRespawn=![];if(isPlayer1Invincible&&_0x5097e5>=player1InvincibilityEndTime)isPlayer1Invincible=![];if(isPlayer2WaitingForRespawn&&_0x5097e5>=player2RespawnTime)isPlayer2WaitingForRespawn=![];if(isPlayer2Invincible&&_0x5097e5>=player2InvincibilityEndTime)isPlayer2Invincible=![];}else{if(isWaitingForRespawn&&_0x5097e5>=respawnTime)isWaitingForRespawn=![];if(isInvincible&&_0x5097e5>=invincibilityEndTime)isInvincible=![];}for(let _0x246741=bullets[_0x2f2a4c(0x1d1)]-0x1;_0x246741>=0x0;_0x246741--){const _0x5027db=bullets[_0x246741];if(!_0x5027db){bullets['splice'](_0x246741,0x1);continue;}_0x5027db['y']-=_0x5027db[_0x2f2a4c(0x20a)];if(_0x5027db['y']+PLAYER_BULLET_HEIGHT<0x0){bullets[_0x2f2a4c(0x1f2)](_0x246741,0x1);continue;}for(let _0x2b974d=enemies[_0x2f2a4c(0x1d1)]-0x1;_0x2b974d>=0x0;_0x2b974d--){const _0x22cde3=enemies[_0x2b974d];if(!_0x22cde3){enemies[_0x2f2a4c(0x1f2)](_0x2b974d,0x1);continue;}const _0x1ce165={'x':_0x22cde3['x'],'y':_0x22cde3['y'],'width':_0x22cde3[_0x2f2a4c(0x1ea)]===ENEMY3_TYPE?BOSS_WIDTH:_0x22cde3[_0x2f2a4c(0x1ea)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,'height':_0x22cde3[_0x2f2a4c(0x1ea)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x22cde3[_0x2f2a4c(0x1ea)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT},_0x56bea3={'x':_0x5027db['x'],'y':_0x5027db['y'],'width':_0x5027db[_0x2f2a4c(0x230)],'height':_0x5027db[_0x2f2a4c(0x11f)]};if(checkCollision(_0x56bea3,_0x1ce165)){bullets['splice'](_0x246741,0x1);const _0xc118eb=handleEnemyHit(_0x22cde3,_0x5027db[_0x2f2a4c(0x17a)]);if(_0xc118eb[_0x2f2a4c(0x137)])enemies[_0x2f2a4c(0x1f2)](_0x2b974d,0x1);break;}}}for(let _0x19b9b9=enemyBullets[_0x2f2a4c(0x1d1)]-0x1;_0x19b9b9>=0x0;_0x19b9b9--){const _0x52af7b=enemyBullets[_0x19b9b9];if(!_0x52af7b){enemyBullets[_0x2f2a4c(0x1f2)](_0x19b9b9,0x1);continue;}_0x52af7b['x']+=_0x52af7b['vx'],_0x52af7b['y']+=_0x52af7b['vy'],(_0x52af7b['y']>gameCanvas[_0x2f2a4c(0x11f)]||_0x52af7b['y']<-ENEMY_BULLET_HEIGHT||_0x52af7b['x']<-ENEMY_BULLET_WIDTH||_0x52af7b['x']>gameCanvas[_0x2f2a4c(0x230)])&&enemyBullets[_0x2f2a4c(0x1f2)](_0x19b9b9,0x1);}const _0x117011=gameCanvas?gameCanvas[_0x2f2a4c(0x11f)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x227ac6=0x2;for(let _0x4b49de=fallingShips['length']-0x1;_0x4b49de>=0x0;_0x4b49de--){const _0x560270=fallingShips[_0x4b49de];if(!_0x560270){fallingShips[_0x2f2a4c(0x1f2)](_0x4b49de,0x1);continue;}let _0x3732df=![];if(!_0x560270[_0x2f2a4c(0x14a)]){_0x560270['y']+=FALLING_SHIP_SPEED;if(_0x560270['y']>=_0x117011){_0x560270['y']=_0x117011,_0x560270[_0x2f2a4c(0x14a)]=!![],_0x560270['landedTime']=_0x5097e5;!_0x560270[_0x2f2a4c(0x1c8)]&&(_0x560270[_0x2f2a4c(0x191)]=0x0,_0x560270[_0x2f2a4c(0x1c8)]=!![]);let _0xed6a1b=null,_0x792cb0=()=>{},_0xf3e61f=![],_0xfeb73b=![],_0x232010=![],_0x453801=null;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x560270[_0x2f2a4c(0x134)]===_0x2f2a4c(0x19d)&&ship1&&player1Lives>0x0)_0xed6a1b=ship1,_0xf3e61f=player1IsDualShipActive,_0x792cb0=()=>{player1IsDualShipActive=!![];},_0x232010=!![],_0x453801=_0x2f2a4c(0x19d);else(_0x560270[_0x2f2a4c(0x134)]==='player2'||_0x560270['targetPlayerId']===_0x2f2a4c(0x1b3))&&ship2&&player2Lives>0x0&&(_0xed6a1b=ship2,_0xf3e61f=player2IsDualShipActive,_0x792cb0=()=>{player2IsDualShipActive=!![];},_0x232010=!![],_0x453801=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2f2a4c(0x22f)?_0x2f2a4c(0x1b3):_0x2f2a4c(0x224));}else{if(isTwoPlayerMode&&selectedGameMode===_0x2f2a4c(0x125)){if(_0x560270[_0x2f2a4c(0x134)]===_0x2f2a4c(0x19d)&&ship1&&player1Lives>0x0)_0xed6a1b=ship1,_0xf3e61f=player1IsDualShipActive,_0xfeb73b=isPlayer1ShipCaptured,_0x792cb0=()=>{player1IsDualShipActive=!![],isPlayer1ShipCaptured=![];},_0x232010=!![],_0x453801=_0x2f2a4c(0x19d);else _0x560270[_0x2f2a4c(0x134)]===_0x2f2a4c(0x224)&&ship2&&player2Lives>0x0&&(_0xed6a1b=ship2,_0xf3e61f=player2IsDualShipActive,_0xfeb73b=isPlayer2ShipCaptured,_0x792cb0=()=>{player2IsDualShipActive=!![],isPlayer2ShipCaptured=![];},_0x232010=!![],_0x453801='player2');}else ship&&playerLives>0x0&&(_0xed6a1b=ship,_0xf3e61f=isDualShipActive,_0xfeb73b=isShipCaptured,_0x792cb0=()=>{const _0x567a54=_0x2f2a4c;isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x567a54(0x161)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}isShipCaptured=![];},_0x232010=!![],_0x453801=isTwoPlayerMode&&selectedGameMode===_0x2f2a4c(0x161)?String(currentPlayer):_0x2f2a4c(0x19d));}if(_0x232010&&!_0xf3e61f){_0x792cb0(),playSound('dualShipSound',![],0.4);if(_0xfeb73b&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2f2a4c(0x22f))){if(_0x453801===_0x2f2a4c(0x19d)&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x5097e5+INVINCIBILITY_DURATION_MS;else{if(_0x453801==='player2'&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x5097e5+INVINCIBILITY_DURATION_MS;else playerNumForDocking!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0x5097e5+INVINCIBILITY_DURATION_MS);}}fallingShips[_0x2f2a4c(0x1f2)](_0x4b49de,0x1),_0x3732df=!![];continue;}else{if(_0x232010&&_0xf3e61f){fallingShips['splice'](_0x4b49de,0x1),_0x3732df=!![];continue;}else{fallingShips['splice'](_0x4b49de,0x1),_0x3732df=!![];continue;}}}}if(_0x3732df)continue;const _0x33cde4=_0x5097e5-_0x560270[_0x2f2a4c(0x13b)];if(_0x33cde4<FALLING_SHIP_FADE_DURATION_MS)_0x560270[_0x2f2a4c(0x1d0)]=Math[_0x2f2a4c(0x1cb)](0x0,0x1-_0x33cde4/FALLING_SHIP_FADE_DURATION_MS);else _0x560270[_0x2f2a4c(0x1d0)]=0x0;if(_0x560270[_0x2f2a4c(0x1c8)])_0x560270[_0x2f2a4c(0x191)]=0x0;else{if(!_0x560270[_0x2f2a4c(0x14a)]&&typeof _0x560270[_0x2f2a4c(0x132)]===_0x2f2a4c(0x182)&&typeof FALLING_SHIP_ROTATION_SPEED==='number'&&FALLING_SHIP_ROTATION_SPEED>0x0){const _0x537d10=FALLING_SHIP_ROTATION_SPEED*_0x560270[_0x2f2a4c(0x132)];_0x560270[_0x2f2a4c(0x191)]+=_0x537d10,_0x560270[_0x2f2a4c(0x19c)]+=Math[_0x2f2a4c(0x1f4)](_0x537d10);if(_0x560270[_0x2f2a4c(0x19c)]>=_0x227ac6*0x2*Math['PI'])_0x560270['rotation']=0x0,_0x560270[_0x2f2a4c(0x1c8)]=!![];else{if(_0x560270[_0x2f2a4c(0x191)]>Math['PI']*0x2)_0x560270[_0x2f2a4c(0x191)]-=Math['PI']*0x2;if(_0x560270[_0x2f2a4c(0x191)]<0x0)_0x560270[_0x2f2a4c(0x191)]+=Math['PI']*0x2;}}else _0x560270[_0x2f2a4c(0x191)]=_0x560270[_0x2f2a4c(0x191)]||0x0;}if(!_0x560270['landed']){let _0x5a0b28=null,_0x5d929f=()=>{},_0x1feea1=0x0,_0x1a878b=![],_0x599dd7=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x560270['targetPlayerId']===_0x2f2a4c(0x19d)&&ship1&&player1Lives>0x0)_0x5a0b28=ship1,_0x599dd7=player1IsDualShipActive,_0x5d929f=()=>{if(!_0x599dd7)player1IsDualShipActive=!![];},_0x1feea1=0x1;else(_0x560270['targetPlayerId']===_0x2f2a4c(0x224)||_0x560270['targetPlayerId']===_0x2f2a4c(0x1b3))&&ship2&&player2Lives>0x0&&(_0x5a0b28=ship2,_0x599dd7=player2IsDualShipActive,_0x5d929f=()=>{if(!_0x599dd7)player2IsDualShipActive=!![];},_0x1feea1=0x2);}else{if(isTwoPlayerMode&&selectedGameMode===_0x2f2a4c(0x125)){if(_0x560270[_0x2f2a4c(0x134)]===_0x2f2a4c(0x19d)&&ship1&&player1Lives>0x0)_0x5a0b28=ship1,_0x1a878b=isPlayer1ShipCaptured,_0x599dd7=player1IsDualShipActive,_0x5d929f=()=>{if(!_0x599dd7)player1IsDualShipActive=!![];isPlayer1ShipCaptured=![];},_0x1feea1=0x1;else _0x560270[_0x2f2a4c(0x134)]===_0x2f2a4c(0x224)&&ship2&&player2Lives>0x0&&(_0x5a0b28=ship2,_0x1a878b=isPlayer2ShipCaptured,_0x599dd7=player2IsDualShipActive,_0x5d929f=()=>{if(!_0x599dd7)player2IsDualShipActive=!![];isPlayer2ShipCaptured=![];},_0x1feea1=0x2);}else ship&&playerLives>0x0&&(_0x5a0b28=ship,_0x1a878b=isShipCaptured,_0x599dd7=isDualShipActive,_0x5d929f=()=>{const _0x1b9bfb=_0x2f2a4c;if(!_0x599dd7){isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x1b9bfb(0x161)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}}isShipCaptured=![];},_0x1feea1=isTwoPlayerMode&&selectedGameMode==='normal'?currentPlayer:0x1);}if(_0x5a0b28&&!_0x599dd7){const _0x552b55={'x':_0x560270['x'],'y':_0x560270['y'],'width':_0x560270[_0x2f2a4c(0x230)],'height':_0x560270[_0x2f2a4c(0x11f)]},_0x33b066={'x':_0x5a0b28['x'],'y':_0x5a0b28['y'],'width':_0x5a0b28[_0x2f2a4c(0x230)],'height':_0x5a0b28[_0x2f2a4c(0x11f)]};if(checkCollision(_0x552b55,_0x33b066)){_0x5d929f();if(_0x1a878b&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2f2a4c(0x22f))){playSound(_0x2f2a4c(0x141),![],0.4);if(_0x1feea1===0x1&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x5097e5+INVINCIBILITY_DURATION_MS;else{if(_0x1feea1===0x2&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x5097e5+INVINCIBILITY_DURATION_MS;else _0x1feea1!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0x5097e5+INVINCIBILITY_DURATION_MS);}}else playSound('dualShipSound',![],0.4);fallingShips['splice'](_0x4b49de,0x1);continue;}}}if(!_0x560270['landed']&&_0x560270['y']>=gameCanvas[_0x2f2a4c(0x11f)])fallingShips[_0x2f2a4c(0x1f2)](_0x4b49de,0x1);}let _0x8f4cc0=0x0;const _0x4ebd82=enemies['some'](_0xd95e5f=>_0xd95e5f?.[_0x2f2a4c(0x13e)]===_0x2f2a4c(0x1ec)),_0x238bb0=!isChallengingStage&&!isWaveTransitioning&&_0x4ebd82&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage));if(_0x238bb0){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound('gridBackgroundSound',!![],0.1));const _0x2fb370=enemies[_0x2f2a4c(0x14c)](_0x539548=>_0x539548?.[_0x2f2a4c(0x13e)]===_0x2f2a4c(0x1ec));if(_0x2fb370['length']>0x0){let _0x2564d2=gameCanvas[_0x2f2a4c(0x230)],_0xc40139=0x0;_0x2fb370['forEach'](_0x2f8e63=>{const _0x382b16=_0x2f2a4c;_0x2f8e63&&(_0x2564d2=Math[_0x382b16(0x16c)](_0x2564d2,_0x2f8e63['x']),_0xc40139=Math['max'](_0xc40139,_0x2f8e63['x']+_0x2f8e63[_0x382b16(0x230)]));});const _0x5a00cf=gameCanvas['width']*GRID_HORIZONTAL_MARGIN_PERCENT,_0x3cc9b5=gameCanvas[_0x2f2a4c(0x230)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0xc40139>=_0x3cc9b5)gridMoveDirection=-0x1;else{if(gridMoveDirection===-0x1&&_0x2564d2<=_0x5a00cf)gridMoveDirection=0x1;}const _0x111e3a=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x8f4cc0=_0x111e3a*gridMoveDirection,currentGridOffsetX+=_0x8f4cc0,enemies[_0x2f2a4c(0x1b4)](_0x1b6703=>{const _0x44e604=_0x2f2a4c;if(_0x1b6703&&(_0x1b6703[_0x44e604(0x13e)]===_0x44e604(0x184)||_0x1b6703[_0x44e604(0x13e)]===_0x44e604(0x1ec)||_0x1b6703[_0x44e604(0x13e)]===_0x44e604(0x1c2)))try{const _0x55f027=_0x1b6703[_0x44e604(0x1ea)]===ENEMY3_TYPE?BOSS_WIDTH:_0x1b6703['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x308cad,y:_0x271d66}=getCurrentGridSlotPosition(_0x1b6703[_0x44e604(0x24b)],_0x1b6703[_0x44e604(0x143)],_0x55f027);_0x1b6703[_0x44e604(0x1b5)]=_0x308cad,_0x1b6703[_0x44e604(0x112)]=_0x271d66;}catch(_0x534020){console[_0x44e604(0x1a4)](_0x44e604(0x211)+_0x1b6703?.['id']+_0x44e604(0x229)+_0x1b6703?.['state']+')\x20during\x20shift:',_0x534020);}});}}else isGridSoundPlaying&&(stopSound(_0x2f2a4c(0x1f7)),isGridSoundPlaying=![]),_0x8f4cc0=0x0;for(let _0x221288=enemies['length']-0x1;_0x221288>=0x0;_0x221288--){let _0x440b22=enemies[_0x221288];if(!_0x440b22){enemies[_0x2f2a4c(0x1f2)](_0x221288,0x1);continue;}const _0x2caaf0=_0x440b22['id'];if(_0x440b22[_0x2f2a4c(0x128)]&&_0x440b22[_0x2f2a4c(0x13e)]!=='preparing_capture'){clearTimeout(_0x440b22[_0x2f2a4c(0x128)]);const _0x5b4281=enemySpawnTimeouts['indexOf'](_0x440b22[_0x2f2a4c(0x128)]);if(_0x5b4281>-0x1)enemySpawnTimeouts[_0x2f2a4c(0x1f2)](_0x5b4281,0x1);_0x440b22[_0x2f2a4c(0x128)]=null;}const _0x5d697a=_0x440b22[_0x2f2a4c(0x1ea)]===ENEMY3_TYPE?BOSS_WIDTH:_0x440b22['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x1b4276=_0x440b22[_0x2f2a4c(0x1ea)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x440b22['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x31dcb5=_0x440b22['state'];switch(_0x440b22[_0x2f2a4c(0x13e)]){case _0x2f2a4c(0x1b2):{let _0x1ebf31=CS_ENTRANCE_PATH_SPEED;const _0x3674f8=_0x440b22['pathSpeedMultiplier']||0x1;_0x1ebf31*=_0x3674f8;if(!isChallengingStage){enemies[_0x2f2a4c(0x1f2)](_0x221288,0x1),_0x440b22=null;break;}let _0x5b3528=challengingStagePaths,_0x34b4a9=_0x5b3528[_0x440b22[_0x2f2a4c(0x216)]];if(!_0x34b4a9||_0x440b22['pathSegmentIndex']>=_0x34b4a9[_0x2f2a4c(0x1d1)]){enemies[_0x2f2a4c(0x1f2)](_0x221288,0x1),_0x440b22=null;break;}const _0x57b0e7=_0x34b4a9[_0x440b22['pathSegmentIndex']];if(!_0x57b0e7||!_0x57b0e7['p0']||!_0x57b0e7['p1']||!_0x57b0e7['p2']||!_0x57b0e7['p3']){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x13f)+_0x440b22[_0x2f2a4c(0x157)]+_0x2f2a4c(0x196)+_0x440b22[_0x2f2a4c(0x216)]+_0x2f2a4c(0x1a3)+_0x440b22['id']),enemies[_0x2f2a4c(0x1f2)](_0x221288,0x1),_0x440b22=null;break;}_0x440b22['pathT']+=_0x1ebf31;let _0x1b0a6e,_0x153502,_0x59d18d=_0x440b22['x'],_0x2ed3bc=_0x440b22['y'];if(_0x440b22[_0x2f2a4c(0x110)]>=0x1){_0x440b22[_0x2f2a4c(0x110)]=0x0,_0x440b22[_0x2f2a4c(0x157)]++;if(_0x440b22[_0x2f2a4c(0x157)]>=_0x34b4a9[_0x2f2a4c(0x1d1)])enemies[_0x2f2a4c(0x1f2)](_0x221288,0x1),_0x440b22=null;else{const _0x13e03e=_0x34b4a9[_0x440b22[_0x2f2a4c(0x157)]];_0x13e03e?.['p0']?(_0x1b0a6e=_0x13e03e['p0']['x'],_0x153502=_0x13e03e['p0']['y']):(console['error'](_0x2f2a4c(0x1ca)+_0x440b22[_0x2f2a4c(0x157)]+'\x20for\x20path\x20'+_0x440b22['entrancePathId']+_0x2f2a4c(0x1a3)+_0x2caaf0),enemies[_0x2f2a4c(0x1f2)](_0x221288,0x1),_0x440b22=null);}}else try{_0x1b0a6e=calculateBezierPoint(_0x440b22[_0x2f2a4c(0x110)],_0x57b0e7['p0']['x'],_0x57b0e7['p1']['x'],_0x57b0e7['p2']['x'],_0x57b0e7['p3']['x']),_0x153502=calculateBezierPoint(_0x440b22[_0x2f2a4c(0x110)],_0x57b0e7['p0']['y'],_0x57b0e7['p1']['y'],_0x57b0e7['p2']['y'],_0x57b0e7['p3']['y']);}catch(_0x40de9a){console[_0x2f2a4c(0x1a4)]('Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20'+_0x2caaf0+':',_0x40de9a),enemies[_0x2f2a4c(0x1f2)](_0x221288,0x1),_0x440b22=null;}_0x440b22&&(isNaN(_0x1b0a6e)||isNaN(_0x153502)?(console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x1e4)+_0x2caaf0+_0x2f2a4c(0x116)),enemies[_0x2f2a4c(0x1f2)](_0x221288,0x1),_0x440b22=null):(_0x440b22[_0x2f2a4c(0x105)]=_0x1b0a6e-_0x59d18d,_0x440b22[_0x2f2a4c(0x1db)]=_0x153502-_0x2ed3bc,_0x440b22['x']=_0x1b0a6e,_0x440b22['y']=_0x153502));break;}case'following_entrance_path':{if(isChallengingStage){enemies['splice'](_0x221288,0x1),_0x440b22=null;break;}let _0x4b83db=normalWaveEntrancePaths,_0x15fc00=_0x4b83db[_0x440b22[_0x2f2a4c(0x216)]],_0x51e433;_0x440b22['entrancePathId']===_0x2f2a4c(0x173)||_0x440b22[_0x2f2a4c(0x216)]==='boss_loop_right'?_0x51e433=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x51e433=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x15fc00){console[_0x2f2a4c(0x22b)](_0x2f2a4c(0x1cd)+_0x2caaf0+_0x2f2a4c(0x1a1)+_0x440b22[_0x2f2a4c(0x216)]+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x440b22[_0x2f2a4c(0x1b5)]=_0x440b22['targetGridX']??gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22['targetGridY']=_0x440b22[_0x2f2a4c(0x112)]??ENEMY_TOP_MARGIN;}catch(_0x25edb6){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x147)+_0x2caaf0+'\x20after\x20missing\x20path',_0x25edb6),_0x440b22[_0x2f2a4c(0x1b5)]=gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22[_0x2f2a4c(0x112)]=ENEMY_TOP_MARGIN;}_0x440b22['state']=_0x2f2a4c(0x1c2),_0x440b22[_0x2f2a4c(0x110)]=0x0,_0x440b22[_0x2f2a4c(0x157)]=0x0,_0x440b22[_0x2f2a4c(0x105)]=0x0,_0x440b22[_0x2f2a4c(0x1db)]=0x0;_0x440b22['squadronId']!==undefined&&squadronCompletionStatus[_0x440b22[_0x2f2a4c(0x23d)]]&&squadronCompletionStatus[_0x440b22['squadronId']][_0x2f2a4c(0x178)]++;break;}if(_0x440b22[_0x2f2a4c(0x157)]>=_0x15fc00[_0x2f2a4c(0x1d1)]){console[_0x2f2a4c(0x22b)](_0x2f2a4c(0x1cd)+_0x2caaf0+_0x2f2a4c(0x153)+_0x440b22[_0x2f2a4c(0x157)]+_0x2f2a4c(0x131)+_0x440b22[_0x2f2a4c(0x216)]+_0x2f2a4c(0x1d5));try{_0x440b22[_0x2f2a4c(0x1b5)]=_0x440b22[_0x2f2a4c(0x1b5)]??gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22[_0x2f2a4c(0x112)]=_0x440b22[_0x2f2a4c(0x112)]??ENEMY_TOP_MARGIN;}catch(_0x1c615f){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x147)+_0x2caaf0+_0x2f2a4c(0x126),_0x1c615f),_0x440b22['targetGridX']=gameCanvas['width']/0x2,_0x440b22[_0x2f2a4c(0x112)]=ENEMY_TOP_MARGIN;}_0x440b22[_0x2f2a4c(0x13e)]=_0x2f2a4c(0x1c2),_0x440b22[_0x2f2a4c(0x110)]=0x0,_0x440b22[_0x2f2a4c(0x157)]=0x0,_0x440b22[_0x2f2a4c(0x105)]=0x0,_0x440b22[_0x2f2a4c(0x1db)]=0x0;_0x440b22['squadronId']!==undefined&&squadronCompletionStatus[_0x440b22[_0x2f2a4c(0x23d)]]&&squadronCompletionStatus[_0x440b22[_0x2f2a4c(0x23d)]]['completed']++;break;}const _0x5d8c5e=_0x15fc00[_0x440b22[_0x2f2a4c(0x157)]];if(!_0x5d8c5e||!_0x5d8c5e['p0']||!_0x5d8c5e['p1']||!_0x5d8c5e['p2']||!_0x5d8c5e['p3']){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x233)+_0x440b22[_0x2f2a4c(0x157)]+'\x20for\x20SHARED\x20path\x20'+_0x440b22[_0x2f2a4c(0x216)]+'.\x20Enemy\x20'+_0x2caaf0+_0x2f2a4c(0x1d5));try{_0x440b22[_0x2f2a4c(0x1b5)]=_0x440b22[_0x2f2a4c(0x1b5)]??gameCanvas['width']/0x2,_0x440b22[_0x2f2a4c(0x112)]=_0x440b22[_0x2f2a4c(0x112)]??ENEMY_TOP_MARGIN+_0x440b22[_0x2f2a4c(0x24b)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x569cdf){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x147)+_0x2caaf0+'\x20after\x20bad\x20segment',_0x569cdf),_0x440b22['targetGridX']=gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22[_0x2f2a4c(0x112)]=ENEMY_TOP_MARGIN;}_0x440b22[_0x2f2a4c(0x13e)]=_0x2f2a4c(0x1c2),_0x440b22[_0x2f2a4c(0x110)]=0x0,_0x440b22[_0x2f2a4c(0x157)]=0x0,_0x440b22[_0x2f2a4c(0x105)]=0x0,_0x440b22[_0x2f2a4c(0x1db)]=0x0;_0x440b22['squadronId']!==undefined&&squadronCompletionStatus[_0x440b22['squadronId']]&&squadronCompletionStatus[_0x440b22[_0x2f2a4c(0x23d)]][_0x2f2a4c(0x178)]++;break;}_0x440b22[_0x2f2a4c(0x110)]+=_0x51e433;let _0x4e9bec,_0x3445c7,_0x24e2b3=_0x440b22['x'],_0x35c46d=_0x440b22['y'];if(_0x440b22[_0x2f2a4c(0x110)]>=0x1){_0x440b22[_0x2f2a4c(0x110)]=0x0,_0x440b22['pathSegmentIndex']++;if(_0x440b22[_0x2f2a4c(0x157)]>=_0x15fc00[_0x2f2a4c(0x1d1)]){let _0x3aaa42,_0x451f07;try{_0x3aaa42=calculateBezierPoint(0x1,_0x5d8c5e['p0']['x'],_0x5d8c5e['p1']['x'],_0x5d8c5e['p2']['x'],_0x5d8c5e['p3']['x']),_0x451f07=calculateBezierPoint(0x1,_0x5d8c5e['p0']['y'],_0x5d8c5e['p1']['y'],_0x5d8c5e['p2']['y'],_0x5d8c5e['p3']['y']);}catch(_0x368846){console[_0x2f2a4c(0x1a4)]('Error\x20calculating\x20final\x20bezier\x20point\x20for\x20'+_0x2caaf0+'\x20at\x20end\x20of\x20normal\x20path\x20'+_0x440b22[_0x2f2a4c(0x216)],_0x368846),_0x3aaa42=_0x5d8c5e['p3']['x'],_0x451f07=_0x5d8c5e['p3']['y'];}_0x440b22['x']=_0x3aaa42,_0x440b22['y']=_0x451f07;try{_0x440b22[_0x2f2a4c(0x1b5)]=_0x440b22['targetGridX']??gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22['targetGridY']=_0x440b22[_0x2f2a4c(0x112)]??ENEMY_TOP_MARGIN;}catch(_0x12d5d2){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x150)+_0x2caaf0+_0x2f2a4c(0x1d2)+_0x440b22['entrancePathId'],_0x12d5d2),_0x440b22[_0x2f2a4c(0x1b5)]=_0x440b22['x'],_0x440b22[_0x2f2a4c(0x112)]=ENEMY_TOP_MARGIN+_0x440b22[_0x2f2a4c(0x24b)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x1a4894=_0x440b22[_0x2f2a4c(0x13e)];_0x440b22['state']=_0x2f2a4c(0x1c2),_0x440b22['velocityX']=0x0,_0x440b22['velocityY']=0x0,_0x440b22[_0x2f2a4c(0x157)]=0x0;_0x1a4894===_0x2f2a4c(0x18e)&&_0x440b22[_0x2f2a4c(0x23d)]!==undefined&&squadronCompletionStatus[_0x440b22[_0x2f2a4c(0x23d)]]&&squadronCompletionStatus[_0x440b22[_0x2f2a4c(0x23d)]][_0x2f2a4c(0x178)]++;break;}else{const _0x2f1351=_0x15fc00[_0x440b22[_0x2f2a4c(0x157)]];if(_0x2f1351?.['p0'])_0x4e9bec=_0x2f1351['p0']['x'],_0x3445c7=_0x2f1351['p0']['y'];else{console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x1f6)+_0x440b22['pathSegmentIndex']+_0x2f2a4c(0x14f)+_0x440b22['entrancePathId']+'.\x20Enemy\x20'+_0x2caaf0+_0x2f2a4c(0x1d5));try{_0x440b22[_0x2f2a4c(0x1b5)]=_0x440b22['targetGridX']??gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22[_0x2f2a4c(0x112)]=_0x440b22['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0xe9a79e){console['error'](_0x2f2a4c(0x147)+_0x2caaf0+_0x2f2a4c(0x1d9),_0xe9a79e),_0x440b22[_0x2f2a4c(0x1b5)]=gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22['targetGridY']=ENEMY_TOP_MARGIN;}_0x440b22[_0x2f2a4c(0x13e)]=_0x2f2a4c(0x1c2),_0x440b22[_0x2f2a4c(0x110)]=0x0,_0x440b22[_0x2f2a4c(0x157)]=0x0,_0x440b22['velocityX']=0x0,_0x440b22['velocityY']=0x0;_0x440b22['squadronId']!==undefined&&squadronCompletionStatus[_0x440b22[_0x2f2a4c(0x23d)]]&&squadronCompletionStatus[_0x440b22['squadronId']][_0x2f2a4c(0x178)]++;break;}}}else try{_0x4e9bec=calculateBezierPoint(_0x440b22[_0x2f2a4c(0x110)],_0x5d8c5e['p0']['x'],_0x5d8c5e['p1']['x'],_0x5d8c5e['p2']['x'],_0x5d8c5e['p3']['x']),_0x3445c7=calculateBezierPoint(_0x440b22['pathT'],_0x5d8c5e['p0']['y'],_0x5d8c5e['p1']['y'],_0x5d8c5e['p2']['y'],_0x5d8c5e['p3']['y']);}catch(_0x3ed761){console['error'](_0x2f2a4c(0x1d7)+_0x2caaf0+':',_0x3ed761);try{_0x440b22[_0x2f2a4c(0x1b5)]=_0x440b22[_0x2f2a4c(0x1b5)]??gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22[_0x2f2a4c(0x112)]=_0x440b22[_0x2f2a4c(0x112)]??ENEMY_TOP_MARGIN;}catch(_0x3cfc76){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x147)+_0x2caaf0+'\x20after\x20bezier\x20error',_0x3cfc76),_0x440b22[_0x2f2a4c(0x1b5)]=gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22['targetGridY']=ENEMY_TOP_MARGIN;}_0x440b22[_0x2f2a4c(0x13e)]=_0x2f2a4c(0x1c2),_0x440b22[_0x2f2a4c(0x110)]=0x0,_0x440b22[_0x2f2a4c(0x157)]=0x0,_0x440b22[_0x2f2a4c(0x105)]=0x0,_0x440b22[_0x2f2a4c(0x1db)]=0x0;_0x440b22['squadronId']!==undefined&&squadronCompletionStatus[_0x440b22['squadronId']]&&squadronCompletionStatus[_0x440b22['squadronId']]['completed']++;break;}if(_0x440b22&&_0x440b22['state']==='following_entrance_path'){if(isNaN(_0x4e9bec)||isNaN(_0x3445c7)){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x21b)+_0x2caaf0+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x440b22['targetGridX']=_0x440b22['targetGridX']??gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22[_0x2f2a4c(0x112)]=_0x440b22[_0x2f2a4c(0x112)]??ENEMY_TOP_MARGIN;}catch(_0x75f45d){console['error'](_0x2f2a4c(0x147)+_0x2caaf0+'\x20after\x20NaN',_0x75f45d),_0x440b22['targetGridX']=gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22['targetGridY']=ENEMY_TOP_MARGIN;}_0x440b22[_0x2f2a4c(0x13e)]='moving_to_grid',_0x440b22[_0x2f2a4c(0x110)]=0x0,_0x440b22[_0x2f2a4c(0x157)]=0x0,_0x440b22[_0x2f2a4c(0x105)]=0x0,_0x440b22['velocityY']=0x0,_0x440b22[_0x2f2a4c(0x23d)]!==undefined&&squadronCompletionStatus[_0x440b22[_0x2f2a4c(0x23d)]]&&squadronCompletionStatus[_0x440b22[_0x2f2a4c(0x23d)]][_0x2f2a4c(0x178)]++;}else{let _0x7ab4cb=_0x4e9bec;const _0x37416=currentWavePatternIndex===0x1&&(_0x440b22[_0x2f2a4c(0x23d)]===0x2||_0x440b22[_0x2f2a4c(0x23d)]===0x3),_0x5ddd06=typeof _0x440b22['squadronEnemyIndex']===_0x2f2a4c(0x182)&&_0x440b22[_0x2f2a4c(0x13d)]%0x2!==0x0;if(_0x37416&&_0x5ddd06){const _0x694bfa=_0x5d697a+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x7ab4cb=_0x4e9bec+_0x694bfa;}_0x440b22[_0x2f2a4c(0x105)]=_0x7ab4cb-_0x24e2b3,_0x440b22[_0x2f2a4c(0x1db)]=_0x3445c7-_0x35c46d,_0x440b22['x']=_0x7ab4cb,_0x440b22['y']=_0x3445c7;}}break;}case _0x2f2a4c(0x1c2):{if(_0x440b22[_0x2f2a4c(0x1b5)]==null||_0x440b22[_0x2f2a4c(0x112)]==null){console[_0x2f2a4c(0x22b)](_0x2f2a4c(0x1cd)+_0x2caaf0+_0x2f2a4c(0x21c));try{const {x:_0x389e5c,y:_0x49aac0}=getCurrentGridSlotPosition(_0x440b22['gridRow'],_0x440b22[_0x2f2a4c(0x143)],_0x5d697a);_0x440b22[_0x2f2a4c(0x1b5)]=_0x389e5c,_0x440b22[_0x2f2a4c(0x112)]=_0x49aac0;}catch(_0x1b89f2){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x147)+_0x2caaf0+'\x20in\x20moving_to_grid',_0x1b89f2),_0x440b22[_0x2f2a4c(0x13e)]=_0x2f2a4c(0x1ec),_0x440b22['x']=gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22['y']=ENEMY_TOP_MARGIN;break;}}const _0x4d646e=_0x440b22[_0x2f2a4c(0x1b5)],_0x351353=_0x440b22[_0x2f2a4c(0x112)],_0x449d98=_0x4d646e-_0x440b22['x'],_0x5f374d=_0x351353-_0x440b22['y'],_0x2d5706=Math[_0x2f2a4c(0x1c9)](_0x449d98*_0x449d98+_0x5f374d*_0x5f374d),_0x2b4b69=ENTRANCE_SPEED*1.2,_0x4873b1=_0x2b4b69*0.5;if(_0x2d5706>_0x4873b1)_0x440b22[_0x2f2a4c(0x105)]=_0x449d98/_0x2d5706*_0x2b4b69,_0x440b22[_0x2f2a4c(0x1db)]=_0x5f374d/_0x2d5706*_0x2b4b69,_0x440b22['x']+=_0x440b22[_0x2f2a4c(0x105)],_0x440b22['y']+=_0x440b22['velocityY'];else{_0x440b22['x']=_0x4d646e,_0x440b22['y']=_0x351353,_0x440b22[_0x2f2a4c(0x105)]=0x0,_0x440b22[_0x2f2a4c(0x1db)]=0x0;const _0x30e3b8=_0x440b22[_0x2f2a4c(0x13e)];_0x440b22['state']=_0x2f2a4c(0x1ec),_0x440b22[_0x2f2a4c(0x1eb)]=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound('gridBackgroundSound',!![],0.1));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x5097e5,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date['now'](),firstEnemyLanded=!![]);if(_0x30e3b8==='moving_to_grid'&&!isChallengingStage&&!isFullGridWave&&_0x440b22[_0x2f2a4c(0x23d)]!==undefined){const _0x476675=_0x440b22[_0x2f2a4c(0x23d)],_0x4cdc2a=squadronCompletionStatus[_0x476675];if(_0x4cdc2a&&!_0x4cdc2a['hasFiredPostLanding']){const _0x157f64=enemies[_0x2f2a4c(0x1ee)](_0x145c89=>{const _0x1a1cdd=_0x2f2a4c;if(_0x145c89&&_0x145c89[_0x1a1cdd(0x23d)]===_0x476675)return _0x145c89['state']===_0x1a1cdd(0x1ec)||!enemies[_0x1a1cdd(0x195)](_0x5df124=>_0x5df124['id']===_0x145c89['id']);return!![];});if(_0x157f64){_0x4cdc2a[_0x2f2a4c(0x1aa)]=!![];const _0x2117f6=enemies[_0x2f2a4c(0x14c)](_0x13fb3a=>_0x13fb3a&&_0x13fb3a[_0x2f2a4c(0x23d)]===_0x476675&&_0x13fb3a[_0x2f2a4c(0x13e)]===_0x2f2a4c(0x1ec)&&(_0x13fb3a[_0x2f2a4c(0x1ea)]===ENEMY2_TYPE||_0x13fb3a[_0x2f2a4c(0x1ea)]===ENEMY3_TYPE)&&!(_0x13fb3a[_0x2f2a4c(0x1ea)]===ENEMY3_TYPE&&_0x13fb3a[_0x2f2a4c(0x1f1)]));if(_0x2117f6[_0x2f2a4c(0x1d1)]>0x0){const _0x564151=_0x2117f6[Math['floor'](Math['random']()*_0x2117f6[_0x2f2a4c(0x1d1)])],_0x41aa27=_0x564151['id'],_0x4bf31b=0xc8+Math[_0x2f2a4c(0x12e)]()*0x190,_0x55449a=setTimeout(()=>{const _0x2d6209=_0x2f2a4c;try{const _0xe26ebd=enemySpawnTimeouts[_0x2d6209(0x123)](_0x55449a);if(_0xe26ebd>-0x1)enemySpawnTimeouts[_0x2d6209(0x1f2)](_0xe26ebd,0x1);if(isPaused||!isInGameState||playerLives<=0x0&&(!isTwoPlayerMode||player1Lives<=0x0&&player2Lives<=0x0)||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x447fc5=enemies[_0x2d6209(0x1e1)](_0x1e6f1d=>_0x1e6f1d&&_0x1e6f1d['id']===_0x41aa27);_0x447fc5&&_0x447fc5['state']===_0x2d6209(0x1ec)&&(createBulletSimple(_0x447fc5)&&(playSound(_0x2d6209(0x160),![],0.4),_0x447fc5['lastFiredTime']=Date[_0x2d6209(0x244)]()));}catch(_0x1e5020){console['error'](_0x2d6209(0x145)+_0x41aa27+':',_0x1e5020);}},_0x4bf31b);enemySpawnTimeouts[_0x2f2a4c(0x20b)](_0x55449a);}}}}}break;}case _0x2f2a4c(0x1ec):{try{const _0x448c5d=_0x440b22[_0x2f2a4c(0x1ea)]===ENEMY3_TYPE?BOSS_WIDTH:_0x440b22['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0xc4e9bd,y:_0x138931}=getCurrentGridSlotPosition(_0x440b22['gridRow'],_0x440b22[_0x2f2a4c(0x143)],_0x448c5d);typeof _0xc4e9bd===_0x2f2a4c(0x182)&&!isNaN(_0xc4e9bd)&&(_0x440b22['x']=_0xc4e9bd),typeof _0x138931==='number'&&!isNaN(_0x138931)&&(_0x440b22['y']=_0x138931),_0x440b22[_0x2f2a4c(0x1b5)]=_0xc4e9bd,_0x440b22['targetGridY']=_0x138931;}catch(_0x20f731){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x1df)+_0x440b22['id']+':',_0x20f731);}_0x440b22['velocityX']=_0x238bb0?_0x8f4cc0:0x0,_0x440b22[_0x2f2a4c(0x1db)]=0x0;_0x440b22[_0x2f2a4c(0x1ea)]===ENEMY3_TYPE&&_0x440b22[_0x2f2a4c(0x1f1)]&&_0x440b22[_0x2f2a4c(0x1bb)]&&(_0x440b22[_0x2f2a4c(0x1bf)]=_0x440b22['x']+CAPTURED_SHIP_OFFSET_X,_0x440b22[_0x2f2a4c(0x1d8)]=_0x440b22['y']+CAPTURED_SHIP_OFFSET_Y);break;}case'preparing_attack':{_0x440b22['velocityX']=0x0,_0x440b22['velocityY']=0x0;break;}case'preparing_capture':{_0x440b22[_0x2f2a4c(0x105)]=0x0,_0x440b22[_0x2f2a4c(0x1db)]=0x0;isCoopAIDemoActive&&_0x440b22[_0x2f2a4c(0x1ea)]===ENEMY3_TYPE&&_0x31dcb5!==_0x2f2a4c(0x135)&&((!coopAICaptureDiveAnticipationActive||_0x5097e5>coopAICaptureDiveAnticipationEndTime)&&(coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=_0x5097e5+_0x2ecdad));break;}case _0x2f2a4c(0x163):{isCoopAIDemoActive&&_0x440b22['type']===ENEMY3_TYPE&&_0x31dcb5!==_0x2f2a4c(0x163)&&((!coopAICaptureDiveAnticipationActive||_0x5097e5>coopAICaptureDiveAnticipationEndTime)&&(coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=_0x5097e5+_0x2ecdad));let _0xbbb08f=isTwoPlayerMode&&selectedGameMode===_0x2f2a4c(0x125)?isPlayer1ShipCaptured||isPlayer2ShipCaptured:isShipCaptured;if(_0xbbb08f){_0x440b22[_0x2f2a4c(0x13e)]='returning';try{const {x:_0x3703c1,y:_0x628689}=getCurrentGridSlotPosition(_0x440b22[_0x2f2a4c(0x24b)],_0x440b22[_0x2f2a4c(0x143)],_0x5d697a);_0x440b22['targetGridX']=_0x3703c1,_0x440b22[_0x2f2a4c(0x112)]=_0x628689;}catch(_0x21d3d9){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x10c)+_0x440b22['id']+':',_0x21d3d9),_0x440b22['targetGridX']=gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22[_0x2f2a4c(0x112)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x40f0a9=_0x440b22[_0x2f2a4c(0x1b7)],_0x20b9c0=_0x440b22['targetY'];if(_0x40f0a9==null||_0x20b9c0==null){console[_0x2f2a4c(0x1a4)]('Boss\x20'+_0x440b22['id']+'\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.'),_0x440b22[_0x2f2a4c(0x13e)]=_0x2f2a4c(0x184);try{const {x:_0x5e0bb6,y:_0x2a8447}=getCurrentGridSlotPosition(_0x440b22['gridRow'],_0x440b22[_0x2f2a4c(0x143)],_0x5d697a);_0x440b22[_0x2f2a4c(0x1b5)]=_0x5e0bb6,_0x440b22['targetGridY']=_0x2a8447;}catch(_0x283866){console[_0x2f2a4c(0x1a4)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20'+_0x440b22['id']+':',_0x283866),_0x440b22[_0x2f2a4c(0x1b5)]=gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22[_0x2f2a4c(0x112)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x37ad79=_0x40f0a9-_0x440b22['x'],_0x54dc99=_0x20b9c0-_0x440b22['y'],_0x1d9576=Math[_0x2f2a4c(0x1c9)](_0x37ad79*_0x37ad79+_0x54dc99*_0x54dc99),_0x2afd63=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x53a300=_0x2afd63*0.6;_0x1d9576>_0x53a300?(_0x440b22[_0x2f2a4c(0x105)]=_0x37ad79/_0x1d9576*_0x2afd63,_0x440b22[_0x2f2a4c(0x1db)]=_0x54dc99/_0x1d9576*_0x2afd63,_0x440b22['x']+=_0x440b22[_0x2f2a4c(0x105)],_0x440b22['y']+=_0x440b22[_0x2f2a4c(0x1db)]):(_0x440b22['x']=_0x40f0a9,_0x440b22['y']=_0x20b9c0,_0x440b22['velocityX']=0x0,_0x440b22[_0x2f2a4c(0x1db)]=0x0,_0x440b22['state']=_0x2f2a4c(0x101),_0x440b22[_0x2f2a4c(0x225)]=_0x5097e5,capturingBossId=_0x440b22['id'],captureBeamActive=!![],captureBeamSource={'x':_0x440b22['x']+_0x5d697a/0x2,'y':_0x440b22['y']+_0x1b4276},captureBeamTargetY=_0x440b22['y'],captureBeamProgress=0x0,playSound(_0x2f2a4c(0x1e7),![],0.6),_0x440b22['isPreparingForImmediateCapture']&&(captureAttemptMadeThisLevel=!![],delete _0x440b22[_0x2f2a4c(0x20d)]));break;}case _0x2f2a4c(0x101):{_0x440b22[_0x2f2a4c(0x105)]=0x0,_0x440b22[_0x2f2a4c(0x1db)]=0x0;_0x440b22['isPreparingForImmediateCapture']&&!captureAttemptMadeThisLevel&&(captureAttemptMadeThisLevel=!![],delete _0x440b22[_0x2f2a4c(0x20d)]);let _0x319f12=![];isTwoPlayerMode&&selectedGameMode===_0x2f2a4c(0x125)?_0x319f12=isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x440b22['id']||isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x440b22['id']:_0x319f12=isShipCaptured&&capturedBossIdWithMessage===_0x440b22['id'];if(_0x319f12){captureBeamActive=![];if(capturingBossId===_0x440b22['id'])capturingBossId=null;_0x440b22[_0x2f2a4c(0x13e)]=_0x2f2a4c(0x184),stopSound(_0x2f2a4c(0x1e7));if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x570978=_0x5097e5-_0x440b22[_0x2f2a4c(0x225)],_0x9b3918=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x483252=CAPTURE_BEAM_DURATION_MS;if(_0x570978<_0x9b3918)captureBeamProgress=_0x570978/_0x9b3918;else{if(_0x570978<_0x483252-_0x9b3918)captureBeamProgress=0x1;else{if(_0x570978<_0x483252)captureBeamProgress=0x1-(_0x570978-(_0x483252-_0x9b3918))/_0x9b3918;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(_0x2f2a4c(0x1e7)),_0x440b22[_0x2f2a4c(0x13e)]=_0x2f2a4c(0x136),_0x440b22[_0x2f2a4c(0x214)]=generateAttackPathInternal(_0x440b22),_0x440b22[_0x2f2a4c(0xfa)]=0x0,_0x440b22[_0x2f2a4c(0x102)]=0x0,_0x440b22['speed']=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x440b22[_0x2f2a4c(0x1c0)]=0x0,_0x440b22[_0x2f2a4c(0x100)]=!![],_0x440b22[_0x2f2a4c(0x21d)]=0x0,_0x440b22[_0x2f2a4c(0x207)]=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}}}captureBeamProgress=Math[_0x2f2a4c(0x1cb)](0x0,Math[_0x2f2a4c(0x16c)](0x1,captureBeamProgress));if(captureBeamActive&&captureBeamProgress>=0.95){const _0x3d16ce=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x56ef05=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0xbb0a44=_0x440b22['x']+_0x5d697a/0x2,_0x5e1048=_0x440b22['y']+_0x1b4276,_0x5ce126=gameCanvas[_0x2f2a4c(0x11f)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x503ce8=Math['max'](_0x3d16ce,_0x56ef05),_0x1966bd=_0xbb0a44-_0x503ce8/0x2,_0x4c4f7d=_0x5e1048,_0xdaf6a4=_0x5ce126-_0x5e1048;if(_0xdaf6a4>0x0){const _0x3d43cc={'x':_0x1966bd,'y':_0x4c4f7d,'width':_0x503ce8,'height':_0xdaf6a4};let _0x2c0c94=null,_0xea8344=0x0;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&checkCollision(ship1,_0x3d43cc))_0x2c0c94=ship1,_0xea8344=0x1;else ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&checkCollision(ship2,_0x3d43cc)&&(_0x2c0c94=ship2,_0xea8344=0x2);}else ship&&playerLives>0x0&&!isShipCaptured&&checkCollision(ship,_0x3d43cc)&&(_0x2c0c94=ship,_0xea8344=currentPlayer);if(_0x2c0c94){_0x440b22['capturedShipDimensions']={'width':_0x2c0c94['width'],'height':_0x2c0c94[_0x2f2a4c(0x11f)]},_0x440b22[_0x2f2a4c(0x1f1)]=!![],stopSound(_0x2f2a4c(0x1e7)),_0x440b22[_0x2f2a4c(0x13e)]='showing_capture_message',_0x440b22[_0x2f2a4c(0x1b5)]=null,_0x440b22[_0x2f2a4c(0x112)]=null,_0x440b22[_0x2f2a4c(0x152)]=_0x2c0c94['y'],_0x440b22[_0x2f2a4c(0x245)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x5097e5,capturedBossIdWithMessage=_0x440b22['id'],playSound('shipCapturedSound',![],0.3),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,handlePlayerShipCollision(_0xea8344,![],_0x5097e5,!![]);isCoopAIDemoActive&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![]);break;}}}break;}case'showing_capture_message':{_0x440b22[_0x2f2a4c(0x105)]=0x0,_0x440b22[_0x2f2a4c(0x1db)]=0x0;if(_0x440b22[_0x2f2a4c(0x1f1)]&&_0x440b22[_0x2f2a4c(0x1bb)]&&typeof _0x440b22['initialCaptureAnimationY']===_0x2f2a4c(0x182)){const _0x105b94=_0x5097e5-captureMessageStartTime,_0x11dae7=Math[_0x2f2a4c(0x16c)](0x1,_0x105b94/CAPTURE_MESSAGE_DURATION),_0x8e90e9=_0x440b22['y']+CAPTURED_SHIP_OFFSET_Y,_0x5e54ca=_0x440b22[_0x2f2a4c(0x152)];_0x440b22[_0x2f2a4c(0x1d8)]=_0x5e54ca+(_0x8e90e9-_0x5e54ca)*_0x11dae7,_0x440b22['capturedShipX']=_0x440b22['x']+CAPTURED_SHIP_OFFSET_X;}else _0x440b22[_0x2f2a4c(0x1bf)]=_0x440b22['x']+CAPTURED_SHIP_OFFSET_X,_0x440b22[_0x2f2a4c(0x1d8)]=_0x440b22['y']+CAPTURED_SHIP_OFFSET_Y;break;}case'attacking':{if(isEntrancePhaseActive)break;const _0x4bb321=_0x440b22['attackPathSegments'],_0x5ea029=3.8;if(!_0x4bb321||_0x4bb321[_0x2f2a4c(0x1d1)]===0x0){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x1cd)+_0x2caaf0+'\x20attacking\x20without\x20path!\x20Returning.'),_0x440b22[_0x2f2a4c(0x13e)]=_0x2f2a4c(0x184);try{const {x:_0xde76f3,y:_0x3f7661}=getCurrentGridSlotPosition(_0x440b22[_0x2f2a4c(0x24b)],_0x440b22['gridCol'],_0x5d697a);_0x440b22[_0x2f2a4c(0x1b5)]=_0xde76f3,_0x440b22['targetGridY']=_0x3f7661;}catch(_0x3f8f87){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x17f)+_0x2caaf0+_0x2f2a4c(0x192),_0x3f8f87),_0x440b22['targetGridX']=gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22['targetGridY']=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}if(_0x440b22[_0x2f2a4c(0xfa)]>=_0x4bb321[_0x2f2a4c(0x1d1)]){console[_0x2f2a4c(0x22b)](_0x2f2a4c(0x1cd)+_0x2caaf0+_0x2f2a4c(0x19a)+_0x440b22['attackPathSegmentIndex']+_0x2f2a4c(0x1ae)+_0x4bb321[_0x2f2a4c(0x1d1)]+')!\x20Returning.'),_0x440b22[_0x2f2a4c(0x13e)]=_0x2f2a4c(0x184);try{const {x:_0x1220a9,y:_0x1b126d}=getCurrentGridSlotPosition(_0x440b22[_0x2f2a4c(0x24b)],_0x440b22[_0x2f2a4c(0x143)],_0x5d697a);_0x440b22['targetGridX']=_0x1220a9,_0x440b22[_0x2f2a4c(0x112)]=_0x1b126d;}catch(_0x31e577){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x17f)+_0x2caaf0+'\x20(invalid\x20attack\x20index):',_0x31e577),_0x440b22[_0x2f2a4c(0x1b5)]=gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22[_0x2f2a4c(0x112)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x2e80a8=_0x4bb321[_0x440b22['attackPathSegmentIndex']];if(!_0x2e80a8||!_0x2e80a8['p0']||!_0x2e80a8['p1']||!_0x2e80a8['p2']||!_0x2e80a8['p3']){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x1cd)+_0x2caaf0+_0x2f2a4c(0x107)+_0x440b22[_0x2f2a4c(0xfa)]+_0x2f2a4c(0xf7)),_0x440b22[_0x2f2a4c(0x13e)]=_0x2f2a4c(0x184);try{const {x:_0x490264,y:_0x3a837a}=getCurrentGridSlotPosition(_0x440b22[_0x2f2a4c(0x24b)],_0x440b22['gridCol'],_0x5d697a);_0x440b22[_0x2f2a4c(0x1b5)]=_0x490264,_0x440b22[_0x2f2a4c(0x112)]=_0x3a837a;}catch(_0x39a1cf){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x17f)+_0x2caaf0+_0x2f2a4c(0x1f3),_0x39a1cf),_0x440b22[_0x2f2a4c(0x1b5)]=gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22[_0x2f2a4c(0x112)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x324d7c=_0x440b22[_0x2f2a4c(0x20a)]/0x3e8*_0x5ea029;_0x440b22['attackPathT']+=_0x324d7c;let _0x2f5756,_0x5b2781;const _0x526cd4=_0x440b22['x'],_0x5acd1f=_0x440b22['y'];if(_0x440b22['attackPathT']>=0x1){try{_0x2f5756=calculateBezierPoint(0x1,_0x2e80a8['p0']['x'],_0x2e80a8['p1']['x'],_0x2e80a8['p2']['x'],_0x2e80a8['p3']['x']),_0x5b2781=calculateBezierPoint(0x1,_0x2e80a8['p0']['y'],_0x2e80a8['p1']['y'],_0x2e80a8['p2']['y'],_0x2e80a8['p3']['y']);}catch(_0xd33124){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x1cf)+_0x440b22['id']+':',_0xd33124),_0x2f5756=_0x440b22['x'],_0x5b2781=_0x440b22['y'],_0x440b22['state']=_0x2f2a4c(0x184);try{const {x:_0x44711f,y:_0x132b91}=getCurrentGridSlotPosition(_0x440b22[_0x2f2a4c(0x24b)],_0x440b22['gridCol'],_0x5d697a);_0x440b22[_0x2f2a4c(0x1b5)]=_0x44711f,_0x440b22['targetGridY']=_0x132b91;}catch(_0x588f2e){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x180)+_0x440b22['id']+':',_0x588f2e),_0x440b22[_0x2f2a4c(0x1b5)]=gameCanvas['width']/0x2,_0x440b22[_0x2f2a4c(0x112)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}_0x440b22[_0x2f2a4c(0x102)]=0x0,_0x440b22[_0x2f2a4c(0xfa)]++;if(_0x440b22[_0x2f2a4c(0xfa)]>=_0x4bb321[_0x2f2a4c(0x1d1)]){_0x440b22[_0x2f2a4c(0x13e)]=_0x2f2a4c(0x184),_0x440b22[_0x2f2a4c(0x1c0)]=0x0,_0x440b22[_0x2f2a4c(0x21d)]=0x0,_0x440b22[_0x2f2a4c(0x207)]=null;try{const {x:_0xd10cd9,y:_0x1fbae1}=getCurrentGridSlotPosition(_0x440b22['gridRow'],_0x440b22[_0x2f2a4c(0x143)],_0x5d697a);_0x440b22[_0x2f2a4c(0x1b5)]=_0xd10cd9,_0x440b22[_0x2f2a4c(0x112)]=_0x1fbae1;}catch(_0x29781c){console[_0x2f2a4c(0x1a4)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x2caaf0+'\x20after\x20attack:',_0x29781c),_0x440b22[_0x2f2a4c(0x1b5)]=gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22[_0x2f2a4c(0x112)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}else{const _0x262173=_0x4bb321[_0x440b22[_0x2f2a4c(0xfa)]];if(!_0x262173?.['p0']){console['error'](_0x2f2a4c(0x1cd)+_0x2caaf0+_0x2f2a4c(0x213)+_0x440b22[_0x2f2a4c(0xfa)]+_0x2f2a4c(0xf7)),_0x2f5756=_0x440b22['x'],_0x5b2781=_0x440b22['y'],_0x440b22[_0x2f2a4c(0x13e)]=_0x2f2a4c(0x184);try{const {x:_0x49d3ee,y:_0x4967b6}=getCurrentGridSlotPosition(_0x440b22[_0x2f2a4c(0x24b)],_0x440b22['gridCol'],_0x5d697a);_0x440b22[_0x2f2a4c(0x1b5)]=_0x49d3ee,_0x440b22[_0x2f2a4c(0x112)]=_0x4967b6;}catch(_0x46069f){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x10d)+_0x440b22['id']+':',_0x46069f),_0x440b22['targetGridX']=gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22[_0x2f2a4c(0x112)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}}}else try{_0x2f5756=calculateBezierPoint(_0x440b22[_0x2f2a4c(0x102)],_0x2e80a8['p0']['x'],_0x2e80a8['p1']['x'],_0x2e80a8['p2']['x'],_0x2e80a8['p3']['x']),_0x5b2781=calculateBezierPoint(_0x440b22[_0x2f2a4c(0x102)],_0x2e80a8['p0']['y'],_0x2e80a8['p1']['y'],_0x2e80a8['p2']['y'],_0x2e80a8['p3']['y']);}catch(_0x1a8f5d){console['error']('Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20'+_0x440b22['id']+':',_0x1a8f5d),_0x2f5756=_0x440b22['x'],_0x5b2781=_0x440b22['y'],_0x440b22['state']=_0x2f2a4c(0x184);try{const {x:_0xe5a57d,y:_0x3b93ec}=getCurrentGridSlotPosition(_0x440b22[_0x2f2a4c(0x24b)],_0x440b22['gridCol'],_0x5d697a);_0x440b22[_0x2f2a4c(0x1b5)]=_0xe5a57d,_0x440b22[_0x2f2a4c(0x112)]=_0x3b93ec;}catch(_0x555059){console[_0x2f2a4c(0x1a4)]('Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20'+_0x440b22['id']+':',_0x555059),_0x440b22[_0x2f2a4c(0x1b5)]=gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22[_0x2f2a4c(0x112)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}if(_0x440b22&&_0x440b22[_0x2f2a4c(0x13e)]===_0x2f2a4c(0x136)){const _0x2e70b8=_0x440b22[_0x2f2a4c(0x21d)]||0x0,_0x402aac=_0x2f5756+_0x2e70b8,_0x441c8b=_0x5b2781;_0x440b22['velocityX']=_0x402aac-_0x526cd4,_0x440b22['velocityY']=_0x441c8b-_0x5acd1f,_0x440b22['x']=_0x402aac,_0x440b22['y']=_0x441c8b;if(_0x440b22['y']>gameCanvas['height']+_0x1b4276*1.5){_0x440b22[_0x2f2a4c(0x13e)]=_0x2f2a4c(0x184),_0x440b22['attackPathSegmentIndex']=0x0,_0x440b22['attackPathT']=0x0,_0x440b22[_0x2f2a4c(0x1c0)]=0x0,_0x440b22[_0x2f2a4c(0x21d)]=0x0,_0x440b22[_0x2f2a4c(0x207)]=null,_0x440b22['y']=-_0x1b4276*(1.1+Math[_0x2f2a4c(0x12e)]()*0.4),_0x440b22['x']=Math['random']()*(gameCanvas[_0x2f2a4c(0x230)]-_0x5d697a),_0x440b22[_0x2f2a4c(0x105)]=0x0,_0x440b22[_0x2f2a4c(0x1db)]=0x0;try{const {x:_0x28d8bb,y:_0x5590c4}=getCurrentGridSlotPosition(_0x440b22[_0x2f2a4c(0x24b)],_0x440b22[_0x2f2a4c(0x143)],_0x5d697a);_0x440b22[_0x2f2a4c(0x1b5)]=_0x28d8bb,_0x440b22[_0x2f2a4c(0x112)]=_0x5590c4;}catch(_0x58b7bd){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x17f)+_0x2caaf0+_0x2f2a4c(0x15e),_0x58b7bd),_0x440b22[_0x2f2a4c(0x1b5)]=gameCanvas[_0x2f2a4c(0x230)]/0x2,_0x440b22[_0x2f2a4c(0x112)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}}break;}case _0x2f2a4c(0x184):{if(isEntrancePhaseActive)break;if(_0x440b22[_0x2f2a4c(0x1b5)]==null||_0x440b22['targetGridY']==null){console[_0x2f2a4c(0x22b)](_0x2f2a4c(0x1cd)+_0x2caaf0+_0x2f2a4c(0x197));try{const {x:_0x366de4,y:_0xdda5e}=getCurrentGridSlotPosition(_0x440b22['gridRow'],_0x440b22['gridCol'],_0x5d697a);_0x440b22[_0x2f2a4c(0x1b5)]=_0x366de4,_0x440b22['targetGridY']=_0xdda5e;}catch(_0x37b756){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x147)+_0x2caaf0+_0x2f2a4c(0xfc),_0x37b756),_0x440b22[_0x2f2a4c(0x13e)]='in_grid',_0x440b22['x']=gameCanvas['width']/0x2,_0x440b22['y']=ENEMY_TOP_MARGIN;break;}}const _0x4189f7=_0x440b22[_0x2f2a4c(0x1b5)],_0x464c4=_0x440b22[_0x2f2a4c(0x112)],_0x2cc67b=_0x4189f7-_0x440b22['x'],_0x25cea7=_0x464c4-_0x440b22['y'],_0x2f0563=Math[_0x2f2a4c(0x1c9)](_0x2cc67b*_0x2cc67b+_0x25cea7*_0x25cea7),_0x231e15=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x2f380d=BASE_RETURN_SPEED*_0x231e15,_0x2f2516=_0x2f380d*0.5;if(_0x2f0563>_0x2f2516)_0x440b22[_0x2f2a4c(0x105)]=_0x2cc67b/_0x2f0563*_0x2f380d,_0x440b22[_0x2f2a4c(0x1db)]=_0x25cea7/_0x2f0563*_0x2f380d,_0x440b22['x']+=_0x440b22['velocityX'],_0x440b22['y']+=_0x440b22[_0x2f2a4c(0x1db)];else{_0x440b22['x']=_0x4189f7,_0x440b22['y']=_0x464c4,_0x440b22[_0x2f2a4c(0x105)]=0x0,_0x440b22[_0x2f2a4c(0x1db)]=0x0,_0x440b22[_0x2f2a4c(0x13e)]='in_grid',_0x440b22[_0x2f2a4c(0x1eb)]=!![],_0x440b22[_0x2f2a4c(0x21d)]=0x0,_0x440b22['attackGroupId']=null;_0x440b22[_0x2f2a4c(0x1c4)](_0x2f2a4c(0x169))&&delete _0x440b22['returnLogDone'];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(_0x2f2a4c(0x1f7),!![],0.1));if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}break;}}if(_0x440b22&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x2f2a4c(0x125)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){const _0x3c3007=[_0x2f2a4c(0x136),'following_entrance_path',_0x2f2a4c(0x1b2),'diving_to_capture_position'];if(_0x3c3007['includes'](_0x440b22['state'])){let _0x44ba89=[];if(isTwoPlayerMode&&selectedGameMode===_0x2f2a4c(0x125)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x44ba89[_0x2f2a4c(0x20b)]({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x44ba89[_0x2f2a4c(0x20b)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x44ba89['push']({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(const _0x14a147 of _0x44ba89){const _0x99da55=_0x14a147['shipObj'],_0x3aeb74={'x':_0x440b22['x'],'y':_0x440b22['y'],'width':_0x5d697a,'height':_0x1b4276},_0x66c474={'x':_0x99da55['x'],'y':_0x99da55['y'],'width':_0x99da55[_0x2f2a4c(0x230)],'height':_0x99da55['height']},_0x2e1ae5=_0x14a147[_0x2f2a4c(0x1bc)]?{'x':_0x99da55['x']+DUAL_SHIP_OFFSET_X,'y':_0x99da55['y'],'width':_0x99da55['width'],'height':_0x99da55[_0x2f2a4c(0x11f)]}:null;let _0x43a714=![],_0x5b5519=![];if(checkCollision(_0x3aeb74,_0x66c474))_0x43a714=!![];else _0x14a147[_0x2f2a4c(0x1bc)]&&_0x2e1ae5&&checkCollision(_0x3aeb74,_0x2e1ae5)&&(_0x43a714=!![],_0x5b5519=!![]);if(_0x43a714){createExplosion(_0x440b22['x']+_0x5d697a/0x2,_0x440b22['y']+_0x1b4276/0x2),playSound('lostLifeSound',![],0.6),enemies[_0x2f2a4c(0x1f2)](_0x221288,0x1),_0x440b22=null,handlePlayerShipCollision(_0x14a147[_0x2f2a4c(0x1fd)],_0x5b5519,_0x5097e5,![]);if(_0x440b22===null)break;}}}}if(!_0x440b22)continue;}if(!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x2f2a4c(0x125)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){let _0x19a8f3=[];if(isTwoPlayerMode&&selectedGameMode===_0x2f2a4c(0x125)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x19a8f3[_0x2f2a4c(0x20b)]({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x19a8f3[_0x2f2a4c(0x20b)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x19a8f3[_0x2f2a4c(0x20b)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(let _0x36b712=enemyBullets['length']-0x1;_0x36b712>=0x0;_0x36b712--){const _0x1ea10a=enemyBullets[_0x36b712];if(!_0x1ea10a){enemyBullets[_0x2f2a4c(0x1f2)](_0x36b712,0x1);continue;}const _0x26df48={'x':_0x1ea10a['x'],'y':_0x1ea10a['y'],'width':_0x1ea10a[_0x2f2a4c(0x230)],'height':_0x1ea10a[_0x2f2a4c(0x11f)]};let _0x5276cd=![];for(const _0x26557c of _0x19a8f3){const _0x6ea24f=_0x26557c[_0x2f2a4c(0x13c)],_0x1d5620={'x':_0x6ea24f['x'],'y':_0x6ea24f['y'],'width':_0x6ea24f[_0x2f2a4c(0x230)],'height':_0x6ea24f[_0x2f2a4c(0x11f)]},_0x369891=_0x26557c['dual']?{'x':_0x6ea24f['x']+DUAL_SHIP_OFFSET_X,'y':_0x6ea24f['y'],'width':_0x6ea24f[_0x2f2a4c(0x230)],'height':_0x6ea24f['height']}:null;let _0x23d651=![],_0x214625=![];if(checkCollision(_0x26df48,_0x1d5620))_0x23d651=!![];else _0x26557c[_0x2f2a4c(0x1bc)]&&_0x369891&&checkCollision(_0x26df48,_0x369891)&&(_0x23d651=!![],_0x214625=!![]);if(_0x23d651){playSound(_0x2f2a4c(0x187),![],0.6),handlePlayerShipCollision(_0x26557c[_0x2f2a4c(0x1fd)],_0x214625,_0x5097e5,![]),enemyBullets[_0x2f2a4c(0x1f2)](_0x36b712,0x1),_0x5276cd=!![];break;}}if(_0x5276cd)continue;}}updateHitSparks();}catch(_0x2a469c){console[_0x2f2a4c(0x1a4)](_0x2f2a4c(0x23b),_0x2a469c,_0x2a469c[_0x2f2a4c(0x183)]),isGridSoundPlaying=![],stopSound(_0x2f2a4c(0x1f7)),isEntrancePhaseActive=![],stopSound(_0x2f2a4c(0x1d4)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x2f2a4c(0x1e7)),stopSound(_0x2f2a4c(0x210)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x2f2a4c(0x1fe))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x2f2a4c(0x219));}}function handlePlayerShipCollision(_0xd4e25d,_0x27f184,_0x251499,_0x2e16e8=![]){const _0x13f65e=_0x42eb05,_0x53b987=_0x251499,_0x1dc627=gameCanvas?gameCanvas[_0x13f65e(0x11f)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;let _0x5b03cf=0x0,_0x46e0d5=null;if(isTwoPlayerMode&&selectedGameMode==='coop'){_0x46e0d5=_0xd4e25d===0x1?ship1:ship2;if(_0x46e0d5){_0x5b03cf=_0x46e0d5['x'];if(_0x2e16e8){if(_0xd4e25d===0x1)player1CaptureRespawnX=_0x46e0d5['x'];else{if(_0xd4e25d===0x2)player2CaptureRespawnX=_0x46e0d5['x'];}}}else{if(_0xd4e25d===0x1&&typeof player1CaptureRespawnX===_0x13f65e(0x182)&&player1CaptureRespawnX!==0x0)_0x5b03cf=player1CaptureRespawnX;else{if(_0xd4e25d===0x2&&typeof player2CaptureRespawnX===_0x13f65e(0x182)&&player2CaptureRespawnX!==0x0)_0x5b03cf=player2CaptureRespawnX;else{if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&gameCanvas)_0x5b03cf=_0xd4e25d===0x1?gameCanvas['width']/0x2-gameCanvas[_0x13f65e(0x230)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2:gameCanvas[_0x13f65e(0x230)]/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;else gameCanvas?_0x5b03cf=gameCanvas['width']/0x2-SHIP_WIDTH/0x2:_0x5b03cf=0xc8;}}}}else{_0x46e0d5=ship;if(_0x46e0d5)_0x5b03cf=_0x46e0d5['x'],_0x2e16e8&&(capturedShipRespawnX_NormalMode=ship['x']);else _0x2e16e8&&capturedShipRespawnX_NormalMode!==0x0?_0x5b03cf=capturedShipRespawnX_NormalMode:_0x5b03cf=gameCanvas?gameCanvas[_0x13f65e(0x230)]/0x2-SHIP_WIDTH/0x2:0xc8;}if(isTwoPlayerMode&&selectedGameMode===_0x13f65e(0x125)){if(_0xd4e25d===0x1){if(_0x2e16e8){isPlayer1ShipCaptured=!![],player1IsDualShipActive=![],player1Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x13f65e(0x22f))coopPartner1CapturedTime=_0x53b987;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x53b987,playSound(_0x13f65e(0x1f5),![],0.4),ship1=null,player1NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];if(capturedBossIdWithMessage&&enemies[_0x13f65e(0x1e1)](_0x47e536=>_0x47e536['id']===capturedBossIdWithMessage)){const _0x27bca2=enemies[_0x13f65e(0x1e1)](_0x365920=>_0x365920['id']===capturedBossIdWithMessage);_0x27bca2&&(_0x27bca2[_0x13f65e(0x1f1)]=![],_0x27bca2[_0x13f65e(0x1bb)]=null);}}else player1NeedsRespawnAfterCapture=!![],ship1=null;}else{if(player1IsDualShipActive&&ship1){player1IsDualShipActive=![];const _0x14e31e=_0x27f184?ship1['x']+DUAL_SHIP_OFFSET_X+ship1[_0x13f65e(0x230)]/0x2:ship1['x']+ship1[_0x13f65e(0x230)]/0x2;createExplosion(_0x14e31e,ship1['y']+ship1[_0x13f65e(0x11f)]/0x2),ship1['x']=_0x5b03cf,ship1['y']=_0x1dc627,ship1[_0x13f65e(0x1b7)]=ship1['x'],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x53b987+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x53b987+RESPAWN_DELAY_MS;}else{if(ship1)createExplosion(ship1['x']+ship1['width']/0x2,ship1['y']+ship1['height']/0x2);player1Lives--;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x53b987,playSound(_0x13f65e(0x1f5),![],0.4),ship1=null;if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}else isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x53b987+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x53b987+RESPAWN_DELAY_MS,ship1?(ship1['x']=_0x5b03cf,ship1['y']=_0x1dc627,ship1['targetX']=ship1['x']):ship1={'x':_0x5b03cf,'y':_0x1dc627,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x5b03cf,'id':'p1'};}}}else{if(_0xd4e25d===0x2){if(_0x2e16e8){isPlayer2ShipCaptured=!![],player2IsDualShipActive=![],player2Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x13f65e(0x22f))coopPartner2CapturedTime=_0x53b987;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x53b987,playSound(_0x13f65e(0x1f5),![],0.4),ship2=null,player2NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x13f65e(0x1b3))aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];if(capturedBossIdWithMessage&&enemies[_0x13f65e(0x1e1)](_0x267a07=>_0x267a07['id']===capturedBossIdWithMessage)){const _0x114092=enemies[_0x13f65e(0x1e1)](_0x38142d=>_0x38142d['id']===capturedBossIdWithMessage);_0x114092&&(_0x114092[_0x13f65e(0x1f1)]=![],_0x114092[_0x13f65e(0x1bb)]=null);}}else player2NeedsRespawnAfterCapture=!![],ship2=null;}else{if(player2IsDualShipActive&&ship2){player2IsDualShipActive=![];const _0x445042=_0x27f184?ship2['x']+DUAL_SHIP_OFFSET_X+ship2[_0x13f65e(0x230)]/0x2:ship2['x']+ship2[_0x13f65e(0x230)]/0x2;createExplosion(_0x445042,ship2['y']+ship2[_0x13f65e(0x11f)]/0x2),ship2['x']=_0x5b03cf,ship2['y']=_0x1dc627,ship2[_0x13f65e(0x1b7)]=ship2['x'],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x53b987+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x53b987+RESPAWN_DELAY_MS;}else{if(ship2)createExplosion(ship2['x']+ship2['width']/0x2,ship2['y']+ship2[_0x13f65e(0x11f)]/0x2);player2Lives--;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x53b987,playSound('gameOverSound',![],0.4),ship2=null;if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x13f65e(0x1b3))aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}else isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x53b987+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x53b987+RESPAWN_DELAY_MS,ship2?(ship2['x']=_0x5b03cf,ship2['y']=_0x1dc627,ship2[_0x13f65e(0x1b7)]=_0x5b03cf):ship2={'x':_0x5b03cf,'y':_0x1dc627,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x5b03cf,'id':'p2'};}}}}player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isDualShipActive&&!_0x2e16e8&&_0x46e0d5){isDualShipActive=![];if(isTwoPlayerMode&&selectedGameMode===_0x13f65e(0x161)){if(_0xd4e25d===0x1)player1IsDualShipActive=![];else{if(_0xd4e25d===0x2)player2IsDualShipActive=![];}}else{if(!isTwoPlayerMode)player1IsDualShipActive=![];}const _0x1f7197=_0x27f184?_0x5b03cf+DUAL_SHIP_OFFSET_X+SHIP_WIDTH/0x2:_0x5b03cf+SHIP_WIDTH/0x2;createExplosion(_0x1f7197,_0x1dc627+SHIP_HEIGHT/0x2);ship&&(ship['x']=_0x5b03cf,ship['y']=_0x1dc627,ship[_0x13f65e(0x1b7)]=ship['x']);isInvincible=!![],invincibilityEndTime=_0x53b987+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x53b987+RESPAWN_DELAY_MS;if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)aiNeedsStabilization=!![];}}else{if(!_0x2e16e8&&_0x46e0d5)createExplosion(_0x5b03cf+SHIP_WIDTH/0x2,_0x1dc627+SHIP_HEIGHT/0x2);if(_0x2e16e8){isShipCaptured=!![];if(ship)ship=null;}playerLives--;if(playerLives<=0x0){playerLives=0x0;if(isTwoPlayerMode&&selectedGameMode==='normal'){if(_0xd4e25d===0x1)player1Lives=0x0;else{if(_0xd4e25d===0x2)player2Lives=0x0;}isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x53b987,playerWhoIsGameOver=_0xd4e25d,playSound(_0x13f65e(0x1f5),![],0.4);const _0xebc7f3=_0xd4e25d===0x1?0x2:0x1,_0x501b92=_0xebc7f3===0x1?player1Lives:player2Lives;_0x501b92>0x0?nextActionAfterPlayerGameOver=_0x13f65e(0x1a2):nextActionAfterPlayerGameOver=_0x13f65e(0x12d);bullets=[],enemyBullets=[],explosions=[];if(!(_0x501b92>0x0))ship=null;}else player1Lives=0x0,ship=null,playSound(_0x13f65e(0x1f5),![],0.4),triggerFinalGameOverSequence();}else{if(isTwoPlayerMode&&selectedGameMode===_0x13f65e(0x161)){if(_0xd4e25d===0x1)player1Lives=playerLives;else player2Lives=playerLives;}if(!_0x2e16e8){isInvincible=!![],invincibilityEndTime=_0x53b987+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x53b987+RESPAWN_DELAY_MS;if(ship&&gameCanvas){ship['x']=_0x5b03cf,ship['y']=_0x1dc627,ship['targetX']=ship['x'];if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x13f65e(0x161)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}}if(_0x2e16e8)isDualShipActive=![];}}}if(!_0x2e16e8)fallingShips=[];}function switchPlayerTurn(){const _0x30cf82=_0x42eb05;if(!isTwoPlayerMode||selectedGameMode===_0x30cf82(0x125))return![];stopSound(_0x30cf82(0x133));if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive;if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive;if(player2Score>highScore)highScore=player2Score;}const _0x1ace4e=currentPlayer===0x1?0x2:0x1,_0x5e966d=_0x1ace4e===0x1?player1Lives:player2Lives;if(_0x5e966d<=0x0){const _0x262011=currentPlayer===0x1?player1Lives:player2Lives;return _0x262011<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x1ace4e,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x532d1c=_0x42eb05;try{if(isPaused||!isInGameState||isChallengingStage||isWaveTransitioning)return;let _0x317848=![];isTwoPlayerMode&&selectedGameMode===_0x532d1c(0x125)?(player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)&&(_0x317848=!![]):playerLives>0x0&&ship&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(_0x317848=!![]);if(!_0x317848)return;if(isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&Date[_0x532d1c(0x244)]()<coopAICaptureDiveAnticipationEndTime)return;const _0x3dfc8b=enemies[_0x532d1c(0x14c)](_0x2b57b1=>_0x2b57b1&&_0x2b57b1[_0x532d1c(0x13e)]===_0x532d1c(0x1ec));if(_0x3dfc8b[_0x532d1c(0x1d1)]===0x0)return;const _0x106043=Date[_0x532d1c(0x244)](),_0x1b76e8=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x106043-lastGridFireCheckTime<_0x1b76e8)return;lastGridFireCheckTime=_0x106043;const _0x41f600=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x14991c=Math['round'](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x37f563=0x0;_0x3dfc8b[_0x532d1c(0x12c)](()=>Math[_0x532d1c(0x12e)]()-0.5);for(const _0xe1c8e5 of _0x3dfc8b){if(_0x37f563>=_0x14991c)break;if(_0xe1c8e5[_0x532d1c(0x1ea)]===ENEMY2_TYPE||_0xe1c8e5[_0x532d1c(0x1ea)]===ENEMY3_TYPE){if(_0xe1c8e5[_0x532d1c(0x1ea)]===ENEMY3_TYPE&&_0xe1c8e5[_0x532d1c(0x1f1)])continue;Math[_0x532d1c(0x12e)]()<_0x41f600&&(createBulletSimple(_0xe1c8e5)&&(playSound(_0x532d1c(0x160),![],0.4),_0xe1c8e5[_0x532d1c(0x1c0)]=_0x106043,_0x37f563++));}}}catch(_0x1c399e){console[_0x532d1c(0x1a4)]('Error\x20in\x20triggerGridFiring:',_0x1c399e);}}function runSingleGameUpdate(_0x3ffae9){const _0x439766=_0x42eb05;try{const _0x428cbf=Date[_0x439766(0x244)]();let _0x540858=![];isTwoPlayerMode&&selectedGameMode===_0x439766(0x125)?_0x540858=player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture:_0x540858=playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;let _0x123291=![];if(isManualControl&&connectedGamepadIndex!==null){if(isTwoPlayerMode&&selectedGameMode===_0x439766(0x125)){if(player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage)_0x123291=!![];}else{if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1))_0x123291=!![];}}if(_0x123291&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x6d7f4c=navigator[_0x439766(0x17d)]();if(_0x6d7f4c?.[connectedGamepadIndex]){const _0x2af406=_0x6d7f4c[connectedGamepadIndex],_0x3cfd68=processSingleController(_0x2af406,previousGameButtonStates);previousGameButtonStates=_0x3cfd68[_0x439766(0x168)]['slice']();if(_0x3cfd68[_0x439766(0x1d3)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x439766(0x1d1)]>0x0)previousGameButtonStates=[];}}else connectedGamepadIndex===null&&previousGameButtonStates[_0x439766(0x1d1)]>0x0&&(previousGameButtonStates=[]);let _0x10b7d2=![];if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x439766(0x125)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage)_0x10b7d2=!![];}else{if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x439766(0x161)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&currentPlayer===0x2)_0x10b7d2=!![];}}if(_0x10b7d2&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x11e9da=navigator['getGamepads']();if(_0x11e9da?.[connectedGamepadIndexP2]){const _0x2d6c69=_0x11e9da[connectedGamepadIndexP2],_0x5ae366=processSingleController(_0x2d6c69,previousGameButtonStatesP2);previousGameButtonStatesP2=_0x5ae366['newButtonStates'][_0x439766(0x124)]();if(_0x5ae366['back']){stopGameAndShowMenu();return;}}else{if(previousGameButtonStatesP2[_0x439766(0x1d1)]>0x0)previousGameButtonStatesP2=[];}}else connectedGamepadIndexP2===null&&previousGameButtonStatesP2[_0x439766(0x1d1)]>0x0&&(previousGameButtonStatesP2=[]);if(isPaused){renderGame();return;}const _0x273013=showCsBonusScoreMessage||showPerfectMessage;if(isCoopAIDemoActive&&_0x273013&&gameCanvas?.[_0x439766(0x230)]>0x0){const _0x3f6e01=ship1&&player1Lives>0x0&&player2Lives<=0x0,_0x4236b5=ship2&&player2Lives>0x0&&player1Lives<=0x0;if(_0x3f6e01){const _0x47bcdf=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x39f69c=Math[_0x439766(0x13a)](gameCanvas[_0x439766(0x230)]/0x2-_0x47bcdf/0x2);ship1['x']=_0x39f69c,ship1['targetX']=_0x39f69c,smoothedShip1X=_0x39f69c,ship2&&(ship2[_0x439766(0x1b7)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x4236b5){const _0x4fb64b=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x14da96=Math['round'](gameCanvas[_0x439766(0x230)]/0x2-_0x4fb64b/0x2);ship2['x']=_0x14da96,ship2[_0x439766(0x1b7)]=_0x14da96,smoothedShip2X=_0x14da96,ship1&&(ship1[_0x439766(0x1b7)]=ship1['x'],smoothedShip1X=ship1['x']);}else{if(ship1&&player1Lives>0x0&&ship2&&player2Lives>0x0){const _0x34d0b3=gameCanvas[_0x439766(0x230)]/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1['x']=_0x34d0b3,ship1['targetX']=_0x34d0b3,smoothedShip1X=_0x34d0b3;const _0x3e6028=gameCanvas[_0x439766(0x230)]/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2['x']=_0x3e6028,ship2[_0x439766(0x1b7)]=_0x3e6028,smoothedShip2X=_0x3e6028;}}}}else{if(_0x273013&&gameCanvas?.[_0x439766(0x230)]>0x0){if(isTwoPlayerMode&&selectedGameMode===_0x439766(0x125)){const _0xbe8b5f=ship1&&player1Lives>0x0,_0x25a4e3=ship2&&player2Lives>0x0;if(_0xbe8b5f&&_0x25a4e3){if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f)){const _0x3300a4=gameCanvas['width']/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x15f953=gameCanvas[_0x439766(0x230)]/0x2+gameCanvas[_0x439766(0x230)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['x']=_0x15f953,ship2['targetX']=_0x15f953,smoothedShip2X=_0x15f953);}}else{if(_0xbe8b5f&&ship1){const _0x4fabcf=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x4c9f3d=Math['round'](gameCanvas['width']/0x2-_0x4fabcf/0x2);ship1['x']=_0x4c9f3d,ship1[_0x439766(0x1b7)]=_0x4c9f3d,ship2&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f)&&(ship2[_0x439766(0x1b7)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x25a4e3&&ship2){const _0x46a8c5=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x2c62b7=Math[_0x439766(0x13a)](gameCanvas[_0x439766(0x230)]/0x2-_0x46a8c5/0x2);ship2['x']=_0x2c62b7,ship2[_0x439766(0x1b7)]=_0x2c62b7;if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f))smoothedShip2X=_0x2c62b7;ship1&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f)&&(ship1[_0x439766(0x1b7)]=ship1['x']);}}}}else{if((!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x439766(0x161)&&currentPlayer===0x2)&&ship){const _0x282e21=isDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH;ship['x']=Math[_0x439766(0x13a)](gameCanvas[_0x439766(0x230)]/0x2-_0x282e21/0x2),ship[_0x439766(0x1b7)]=ship['x'];if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)smoothedShipX=ship['x'];else{if(!isManualControl)smoothedShipX=ship['x'];}}}}}let _0x3ea49b=![];if(selectedGameMode===_0x439766(0x125)&&level===0x1&&coopPlayersReadyStartTime>0x0){_0x3ea49b=!![];if(isShowingCoopPlayersReady){if(_0x428cbf-coopPlayersReadyStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}if(_0x428cbf>=coopPlayersReadyStartTime+0xbb8){isShowingCoopPlayersReady=![],explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f)?(isShowingIntro=!![],introStep=0x2,introDisplayStartTime=_0x428cbf):(isShowingIntro=!![],introStep=0x1,introDisplayStartTime=_0x428cbf);}}else{if(isShowingIntro){if(_0x428cbf-introDisplayStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}let _0x42268b=INTRO_DURATION_PER_STEP;introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&(_0x42268b=TWO_PLAYER_STAGE_INTRO_DURATION);if(_0x428cbf>=introDisplayStartTime+_0x42268b){if(introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f))){introStep=0x2,introDisplayStartTime=_0x428cbf,explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}else{isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();_0x3ea49b=![],coopPlayersReadyStartTime=0x0;}}}else _0x3ea49b=![],coopPlayersReadyStartTime=0x0;}if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f))handlePlayerInput();if(typeof moveEntities===_0x439766(0x1fe))moveEntities();renderGame();if(_0x3ea49b)return;}if(selectedGameMode===_0x439766(0x125)&&level===0x1&&!gameJustStartedAndWaveLaunched&&coopPlayersReadyStartTime===0x0&&gameJustStarted){if(isFullGridWave)startFullGridWave();else{if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition['length']>0x0)scheduleEntranceFlightWave();else isWaveTransitioning=!![],readyForNextWaveReset=!![];}}gameJustStartedAndWaveLaunched=!![],gameJustStarted=![];}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode&&selectedGameMode===_0x439766(0x161)){if(_0x428cbf-playerGameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}if(_0x428cbf-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![],explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();const _0x5ae261=playerWhoIsGameOver;playerWhoIsGameOver=0x0;if(nextActionAfterPlayerGameOver==='switch_player')switchPlayerTurn()?(_0x5ae261===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,player1MaxLevelReached=Math[_0x439766(0x1cb)](player1MaxLevelReached,level)),resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();else nextActionAfterPlayerGameOver==='show_results'?triggerFinalGameOverSequence():triggerFinalGameOverSequence();renderGame();return;}else{renderGame();return;}}if(isTwoPlayerMode&&selectedGameMode==='coop'){let _0x5c8460=![],_0x30cf28=![];if(isPlayer1ShowingGameOverMessage){if(_0x428cbf-player1GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(_0x428cbf-player1GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer1ShowingGameOverMessage=![],_0x5c8460=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}if(isPlayer2ShowingGameOverMessage){if(_0x428cbf-player2GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}if(_0x428cbf-player2GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer2ShowingGameOverMessage=![],_0x30cf28=!![],explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}}if(_0x5c8460||_0x30cf28){player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f))handlePlayerInput();if(typeof moveEntities===_0x439766(0x1fe))moveEntities();renderGame();if(gameOverSequenceStartTime>0x0||player1Lives>0x0||player2Lives>0x0)return;}else{if(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f))handlePlayerInput();if(typeof moveEntities===_0x439766(0x1fe))moveEntities();renderGame();return;}}}if(isShowingCaptureMessage){if(_0x428cbf-captureMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}const _0x3d4561=enemies[_0x439766(0x1e1)](_0x59fedb=>_0x59fedb['id']===capturedBossIdWithMessage);if(_0x3d4561&&_0x3d4561[_0x439766(0x13e)]===_0x439766(0x140)){const _0x1e07f4=_0x428cbf-captureMessageStartTime,_0x3c8b2f=Math[_0x439766(0x16c)](0x1,_0x1e07f4/CAPTURE_MESSAGE_DURATION);_0x3d4561[_0x439766(0x245)]=_0x3c8b2f*0x2*(0x2*Math['PI']);}else _0x3d4561&&(_0x3d4561[_0x439766(0x245)]=0x0);if(isInGameState&&!isShowingPlayerGameOverMessage&&!isPlayer1ShowingGameOverMessage&&!isPlayer2ShowingGameOverMessage&&gameOverSequenceStartTime===0x0){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f))handlePlayerInput();if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else isPlayerTwoAI&&selectedGameMode===_0x439766(0x161)&&currentPlayer===0x2&&aiControl();if(typeof moveEntities==='function')moveEntities();updateExplosions(),updateFloatingScores();}if(_0x428cbf-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();stopSound('shipCapturedSound'),captureBeamActive=![];if(_0x3d4561&&_0x3d4561[_0x439766(0x13e)]===_0x439766(0x140)){_0x3d4561['state']=_0x439766(0x184),_0x3d4561[_0x439766(0x245)]=0x0;try{const _0x51e094=_0x3d4561[_0x439766(0x1ea)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x431a0e,y:_0x56dbd6}=getCurrentGridSlotPosition(_0x3d4561[_0x439766(0x24b)],_0x3d4561[_0x439766(0x143)],_0x51e094);_0x3d4561[_0x439766(0x1b5)]=_0x431a0e,_0x3d4561['targetGridY']=_0x56dbd6;}catch(_0x12effa){console[_0x439766(0x1a4)](_0x439766(0x11c)+_0x3d4561['id']+':',_0x12effa),_0x3d4561[_0x439766(0x1b5)]=gameCanvas['width']/0x2,_0x3d4561[_0x439766(0x112)]=ENEMY_TOP_MARGIN;}}else _0x3d4561&&(_0x3d4561[_0x439766(0x245)]=0x0);capturedBossIdWithMessage=null;const _0x2ffc0b=gameCanvas?gameCanvas[_0x439766(0x11f)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(isTwoPlayerMode&&selectedGameMode===_0x439766(0x125)){if(player1NeedsRespawnAfterCapture&&player1Lives>0x0){ship1={'x':player1CaptureRespawnX,'y':_0x2ffc0b,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player1CaptureRespawnX,'id':'p1'},isPlayer1ShipCaptured=![],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x428cbf+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=![],player1NeedsRespawnAfterCapture=![],player1CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f))smoothedShip1X=ship1['x'];}if(player2NeedsRespawnAfterCapture&&player2Lives>0x0){ship2={'x':player2CaptureRespawnX,'y':_0x2ffc0b,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player2CaptureRespawnX,'id':'p2'},isPlayer2ShipCaptured=![],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x428cbf+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=![],player2NeedsRespawnAfterCapture=![],player2CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')smoothedShip2X=ship2['x'];}if(player1Lives<=0x0&&player2Lives<=0x0){if(gameOverSequenceStartTime===0x0)triggerFinalGameOverSequence();}}else{if(!isManualControl&&!isPlayerTwoAI){if(isShipCaptured&&playerLives>0x0){let _0x2a76d7=gameCanvas?gameCanvas[_0x439766(0x230)]/0x2-SHIP_WIDTH/0x2:0xc8;if(typeof smoothedShipX===_0x439766(0x182))_0x2a76d7=smoothedShipX;ship={'x':_0x2a76d7,'y':_0x2ffc0b,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x2a76d7,'id':_0x439766(0x115)},isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x428cbf+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=![],aiNeedsStabilization=!![];if(smoothedShipX===undefined&&ship)smoothedShipX=ship['x'];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isManualControl){if(isShipCaptured&&playerLives>0x0){let _0x45e91b=capturedShipRespawnX_NormalMode!==0x0?capturedShipRespawnX_NormalMode:gameCanvas?gameCanvas[_0x439766(0x230)]/0x2-SHIP_WIDTH/0x2:0xc8;ship={'x':_0x45e91b,'y':_0x2ffc0b,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x45e91b,'id':_0x439766(0x115)},isShipCaptured=![],capturedShipRespawnX_NormalMode=0x0,isInvincible=!![],invincibilityEndTime=_0x428cbf+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x428cbf+RESPAWN_DELAY_MS;if(isPlayerTwoAI&&selectedGameMode===_0x439766(0x161)&&currentPlayer===0x2)aiNeedsStabilization=!![];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&((!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode==='normal'&&(currentPlayer===0x1&&player2Lives<=0x0||currentPlayer===0x2&&player1Lives<=0x0))&&triggerFinalGameOverSequence());}}}}renderGame();return;}const _0x23e956=!(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage||isShowingPlayerGameOverMessage),_0x525445=isShowingIntro&&!_0x3ea49b&&!(selectedGameMode===_0x439766(0x125)&&level===0x1);if(!_0x3ea49b&&gameOverSequenceStartTime===0x0&&_0x540858&&!isShowingCaptureMessage&&_0x23e956){if(isInGameState&&!_0x525445){if(!(_0x273013&&!isManualControl)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f))aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x439766(0x161)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}}isManualControl&&handlePlayerInput();}}isTwoPlayerMode&&selectedGameMode===_0x439766(0x125)?(isPlayer1Invincible&&_0x428cbf>=player1InvincibilityEndTime&&(isPlayer1Invincible=![],player1InvincibilityEndTime=0x0),isPlayer2Invincible&&_0x428cbf>=player2InvincibilityEndTime&&(isPlayer2Invincible=![],player2InvincibilityEndTime=0x0)):(isInvincible&&_0x428cbf>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0),isWaitingForRespawn&&_0x428cbf>=respawnTime&&(isWaitingForRespawn=![]));const _0x388fdc=showExtraLifeMessage&&_0x428cbf-extraLifeMessageStartTime<0x64;if(_0x388fdc&&(isWaveTransitioning||isChallengingStage&&enemies[_0x439766(0x1d1)]===0x0)){}if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f))&&isChallengingStage&&enemies[_0x439766(0x1d1)]===0x0&&!isCsCompletionDelayActive&&!showCsBonusScoreMessage&&!showPerfectMessage&&gameCanvas&&gameCanvas['width']>0x0){const _0x40b5a5=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage,_0x360830=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage;if(_0x40b5a5&&!_0x360830){const _0x1b92eb=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x118bc1=Math['round'](gameCanvas[_0x439766(0x230)]/0x2-_0x1b92eb/0x2);ship1['x']=_0x118bc1,ship1[_0x439766(0x1b7)]=_0x118bc1,smoothedShip1X=_0x118bc1;}else{if(_0x360830&&!_0x40b5a5){const _0xf21fd7=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x64bb5b=Math[_0x439766(0x13a)](gameCanvas[_0x439766(0x230)]/0x2-_0xf21fd7/0x2);ship2['x']=_0x64bb5b,ship2['targetX']=_0x64bb5b,smoothedShip2X=_0x64bb5b;}}}if(isCsCompletionDelayActive&&_0x23e956&&gameOverSequenceStartTime===0x0){if(_0x428cbf-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY+EXPLOSION_DURATION){isCsCompletionDelayActive=![],csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies;csCompletionResultIsPerfect?(playSound('csPerfectSound',![],0.6),showCsHitsMessage=!![],csHitsMessageStartTime=_0x428cbf):(playSound(_0x439766(0xfd),![],0.6),showCSClearMessage=!![],csClearMessageStartTime=_0x428cbf);bullets=[],enemyBullets=[],renderGame();return;}else{if(_0x428cbf-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY&&explosions[_0x439766(0x1d1)]>0x0){updateExplosions(),renderGame();return;}else{if(_0x428cbf-csCompletionDelayStartTime<CS_COMPLETION_MESSAGE_DELAY){renderGame();return;}}}}let _0x2e37c5=![],_0x22645e=![];if(_0x23e956&&gameOverSequenceStartTime===0x0&&!isShowingCoopPlayersReady&&!_0x3ea49b){if(showCsHitsMessage){if(_0x428cbf-csHitsMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}if(Date[_0x439766(0x244)]()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION){showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x428cbf,explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}_0x22645e=!![];}else{if(showPerfectMessage){if(_0x428cbf-perfectMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(Date[_0x439766(0x244)]()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION){showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x428cbf,explosions=[];if(typeof updateExplosions==='function')updateExplosions();}_0x22645e=!![];}else{if(showCsBonusScoreMessage){if(_0x428cbf-csBonusScoreMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}if(Date['now']()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION){showCsBonusScoreMessage=![],_0x2e37c5=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}_0x22645e=!![];}else{if(showCSClearMessage){if(_0x428cbf-csClearMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}Date[_0x439766(0x244)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]);Date[_0x439766(0x244)]()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]);if(Date[_0x439766(0x244)]()-csClearMessageStartTime>=CS_CLEAR_DELAY){showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x2e37c5=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}_0x22645e=!![];}else{if(showExtraLifeMessage)Date[_0x439766(0x244)]()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![]),_0x22645e=!![];else{if(showReadyMessage){if(_0x428cbf-readyMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}if(Date['now']()-readyMessageStartTime>READY_MESSAGE_DURATION){showReadyMessage=![],_0x2e37c5=!![],explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}_0x22645e=!![];}}}}}}}if(_0x22645e&&!_0x2e37c5&&!isShowingCoopPlayersReady&&!_0x3ea49b&&!isShowingCaptureMessage&&_0x23e956){if(!((_0x273013||showCsHitsMessage||showCSClearMessage)&&isManualControl)&&!showExtraLifeMessage){renderGame();return;}}if(_0x525445&&_0x23e956&&gameOverSequenceStartTime===0x0){let _0x39fcce=![];const _0x32aaee=_0x428cbf-introDisplayStartTime;let _0x55599e=INTRO_DURATION_PER_STEP;const _0x3921ac=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0xf8),_0x11a056=isTwoPlayerMode&&selectedGameMode==='normal'&&!isPlayerTwoAI;(_0x11a056||_0x3921ac)&&(_0x55599e=TWO_PLAYER_STAGE_INTRO_DURATION);if(introStep===0x1){if(_0x32aaee<0x64){explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}let _0x2f8713=null,_0x4fc667=0x1;if(!playerIntroSoundPlayed){const _0x5d16ad=_0x3921ac||_0x11a056,_0x493951=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f)&&level>0x1;if(_0x5d16ad){if(currentPlayer===0x1&&level===0x1&&!initialGameStartSoundPlayedThisSession)_0x2f8713=_0x439766(0x10a),_0x4fc667=0.4;else(currentPlayer===0x2||level>0x1)&&(_0x2f8713=_0x439766(0x114),_0x4fc667=0.2);}else{if(_0x493951)_0x2f8713='levelUpSound',_0x4fc667=0.2;else{if(!isTwoPlayerMode){if(level===0x1&&!initialGameStartSoundPlayedThisSession)_0x2f8713='startSound',_0x4fc667=0.4;else level>0x1&&(_0x2f8713=_0x439766(0x114),_0x4fc667=0.2);}}}}_0x2f8713&&(playSound(_0x2f8713,![],_0x4fc667),playerIntroSoundPlayed=!![],_0x2f8713===_0x439766(0x10a)&&(initialGameStartSoundPlayedThisSession=!![]));if(_0x32aaee>=_0x55599e){if(isChallengingStage)introStep=0x3;else introStep=0x2;introDisplayStartTime=_0x428cbf,explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}}else{if(introStep===0x2){if(_0x32aaee<0x64){explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}if(!stageIntroSoundPlayed){if(playLevelUpAfterCSBonus&&(isTwoPlayerMode&&selectedGameMode===_0x439766(0x125)))playSound('levelUpSound',![],0.2),playLevelUpAfterCSBonus=![],stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x439766(0x125)&&!isPlayerTwoAI&&!isCoopAIDemoActive&&level===0x1)playSound(_0x439766(0x114),![],0.2),stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x439766(0x125)&&!isPlayerTwoAI&&!isCoopAIDemoActive&&level>0x1)playSound(_0x439766(0x114),![],0.2),stageIntroSoundPlayed=!![];else{if(selectedGameMode===_0x439766(0x125)){if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f))&&level>0x1)playSound(_0x439766(0x114),![],0.2),stageIntroSoundPlayed=!![];else(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f))&&level===0x1&&(stageIntroSoundPlayed=!![]);}else{if(!isTwoPlayerMode&&level>0x1)playSound(_0x439766(0x114),![],0.2),stageIntroSoundPlayed=!![];else{if(level>0x1&&!playerIntroSoundPlayed&&!(isPlayerTwoAI&&selectedGameMode===_0x439766(0x161))&&!initialGameStartSoundPlayedThisSession)playSound(_0x439766(0x114),![],0.2),stageIntroSoundPlayed=!![];else level===0x1&&!isManualControl&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x439766(0x125))&&!initialGameStartSoundPlayedThisSession&&(playSound('startSound',![],0.4),initialGameStartSoundPlayedThisSession=!![],stageIntroSoundPlayed=!![]);}}}}}}if(_0x32aaee>=_0x55599e){_0x39fcce=!![],explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}}else{if(introStep===0x3){if(_0x32aaee<0x64){explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}!csIntroSoundPlayed&&(playSound(_0x439766(0x1d4),![],0.4),csIntroSoundPlayed=!![],stageIntroSoundPlayed=!![]);if(_0x32aaee>=_0x55599e){_0x39fcce=!![],explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}}}}if(isInGameState&&_0x23e956&&gameOverSequenceStartTime===0x0&&gameCanvas){let _0x561846=null,_0x2247b9=null;const _0x217150=isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL'&&currentPlayer===0x1&&isShowingIntro;if(_0x217150){let _0x362d7c=![],_0x4a1f0e=![];const _0x1af7e2=navigator[_0x439766(0x17d)]();if(connectedGamepadIndex!==null&&_0x1af7e2?.[connectedGamepadIndex]){const _0x5a879a=_0x1af7e2[connectedGamepadIndex],_0x171c38=processSingleController(_0x5a879a,previousGameButtonStates);_0x362d7c=_0x171c38[_0x439766(0x1e0)],_0x4a1f0e=_0x171c38['right'];}_0x561846=keyboardP1LeftDown||_0x362d7c,_0x2247b9=keyboardP1RightDown||_0x4a1f0e;}if(_0x3921ac&&currentPlayer===0x2)aiControl();else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else!isManualControl&&!isPlayerTwoAI&&aiControl();}typeof moveEntities==='function'&&moveEntities(_0x561846,_0x2247b9),updateExplosions(),updateFloatingScores();}if(_0x39fcce){isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![];isManualControl&&(isShowingDemoText=![]);if(!isChallengingStage)isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f)?(aiShip1CanShootTime=Date[_0x439766(0x244)]()+0x3e8,aiShip2CanShootTime=Date['now']()+0x4b0):aiCanShootTime=Date['now']()+(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0xf8)?0x3e8:0x3e8);else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0;else aiCanShootTime=0x0;}const _0x5343d9=level===0x1&&selectedGameMode!==_0x439766(0x125),_0x10e12a=level===0x1&&selectedGameMode===_0x439766(0x125),_0x1cb859=_0x5343d9&&!gameJustStartedAndWaveLaunched||level>0x1||isChallengingStage||_0x10e12a&&!gameJustStartedAndWaveLaunched;if(_0x1cb859){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition['length']>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0x439766(0x1d4),![],0.4);}else isEntrancePhaseActive=![],stopSound(_0x439766(0x1d4)),isWaveTransitioning=!![],readyForNextWaveReset=!![],bullets=[],enemyBullets=[],explosions=[],setTimeout(()=>{const _0x392547=_0x439766,_0x59d9d2=isTwoPlayerMode&&selectedGameMode==='coop'?player1Lives>0x0||player2Lives>0x0:playerLives>0x0;if((isInGameState||!isInGameState&&_0x59d9d2)&&typeof resetWaveInternal===_0x392547(0x1fe)){if(_0x59d9d2)resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![];else triggerFinalGameOverSequence();}},0x64);}if(_0x5343d9||level>0x1||isChallengingStage||_0x10e12a)gameJustStartedAndWaveLaunched=!![];}}isManualControl&&_0x525445&&_0x23e956&&gameOverSequenceStartTime===0x0&&handlePlayerInput();renderGame();return;}const _0x3515ab=!_0x3ea49b&&!_0x525445&&!_0x2e37c5&&!isShowingCaptureMessage;if(gameJustStarted&&_0x3515ab){if(!gameJustStartedAndWaveLaunched){const _0x145cec=selectedGameMode==='coop'&&level===0x1&&coopPlayersReadyStartTime!==0x0;if(!_0x145cec){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x439766(0x1d1)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0x439766(0x1d4),![],0.4);}else isWaveTransitioning=!![],readyForNextWaveReset=!![];}gameJustStartedAndWaveLaunched=!![];}}gameJustStarted=![];}if(_0x3515ab&&isInGameState&&_0x23e956&&gameOverSequenceStartTime===0x0){if(!_0x273013||_0x273013&&isManualControl){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f))aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}isManualControl&&handlePlayerInput();if(typeof moveEntities==='function')moveEntities();updateExplosions(),updateFloatingScores();}else _0x273013&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f))&&(updateExplosions(),updateFloatingScores());}if(_0x3515ab&&_0x23e956&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&_0x540858){const _0x42d972=enemies[_0x439766(0x195)](_0x205bda=>_0x205bda?.['state']===_0x439766(0x1ec));if(_0x42d972&&isGridBreathingActive){const _0x3ef240=_0x428cbf-gridBreathStartTime,_0x521f17=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x4290bc=_0x3ef240%_0x521f17;currentGridBreathFactor=(Math[_0x439766(0x199)](_0x4290bc/_0x521f17*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x42d972&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x42d972&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x428cbf,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x28746f=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0xead361=enemies[_0x439766(0x195)](_0x582a7b=>_0x582a7b?.[_0x439766(0x13e)]===_0x439766(0x18e)||_0x582a7b?.['state']===_0x439766(0x1c2)||_0x582a7b?.[_0x439766(0x13e)]===_0x439766(0x1b2));if(totalEnemiesScheduledForWave>0x0&&_0x28746f&&!_0xead361){const _0x328516=isEntrancePhaseActive;isEntrancePhaseActive=![];if(_0x328516){stopSound('entranceSound'),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![];if(!isChallengingStage&&!isFullGridWave){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f))coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=Date[_0x439766(0x244)]()+COOP_AI_CAPTURE_DIVE_ANTICIPATION_DURATION_MS,typeof triggerImmediateCaptureDive===_0x439766(0x1fe)&&triggerImmediateCaptureDive();else typeof triggerImmediateCaptureDive===_0x439766(0x1fe)&&triggerImmediateCaptureDive();}}}}if(!isChallengingStage&&!_0x525445&&!isPaused&&!isWaveTransitioning)triggerGridFiring();if(!isWaveTransitioning&&_0x540858&&!_0x525445&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x1b2d88=enemies[_0x439766(0x1d1)]===0x0,_0x20ed6d=fallingShips[_0x439766(0x1d1)]===0x0,_0x2f370f=![];if(isChallengingStage){if(_0x1b2d88&&!isEntrancePhaseActive)_0x2f370f=!![];}else{if(_0x1b2d88&&!isEntrancePhaseActive&&_0x20ed6d)_0x2f370f=!![];}if(_0x2f370f){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&gameCanvas&&gameCanvas['width']>0x0){const _0x29463b=player1Lives,_0x49f712=player2Lives,_0x1dfc60=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(_0x29463b>0x0&&_0x49f712<=0x0&&ship1){const _0x55a4cb=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x2684b2=Math[_0x439766(0x13a)](gameCanvas['width']/0x2-_0x55a4cb/0x2);ship1['x']=_0x2684b2,ship1[_0x439766(0x1b7)]=_0x2684b2,smoothedShip1X=_0x2684b2,ship1['y']=_0x1dfc60;}else{if(_0x49f712>0x0&&_0x29463b<=0x0&&ship2){const _0x23b811=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x2ca24d=Math[_0x439766(0x13a)](gameCanvas[_0x439766(0x230)]/0x2-_0x23b811/0x2);ship2['x']=_0x2ca24d,ship2[_0x439766(0x1b7)]=_0x2ca24d,smoothedShip2X=_0x2ca24d,ship2['y']=_0x1dfc60;}}}isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(_0x439766(0x1f7)),isGridSoundPlaying=![]);!isChallengingStage&&(bullets=[],enemyBullets=[]);floatingScores=[],enemySpawnTimeouts[_0x439766(0x1b4)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;let _0xbfbacd;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,setTimeout(()=>{const _0x260ae7=_0x439766;if(isWaveTransitioning){explosions=[];if(typeof updateExplosions===_0x260ae7(0x1fe))updateExplosions();isCsCompletionDelayActive=!![],csCompletionDelayStartTime=Date[_0x260ae7(0x244)]();}},EXPLOSION_DURATION);if(csCompletionResultIsPerfect){let _0x3ca3fe=0x2710;if(isTwoPlayerMode&&selectedGameMode===_0x439766(0x125)){if(player1Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f))&&ship1){player1Score+=_0x3ca3fe;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x439766(0x19d),!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2));else player1Score===highScore&&highScoreHolderId!=='player1'&&highScore>0x0&&(highScoreHolderId='player1',!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x439766(0x133),![],0.2)));}if(player2Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f))&&ship2){player2Score+=_0x3ca3fe;const _0x356db8=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x439766(0x22f)?isCoopAIDemoActive?_0x439766(0x224):_0x439766(0x1b3):_0x439766(0x224);if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x356db8,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x439766(0x133),![],0.2));else player2Score===highScore&&highScoreHolderId!==_0x356db8&&highScore>0x0&&(highScoreHolderId=_0x356db8,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x439766(0x133),![],0.2)));}checkAndAwardExtraLife(null);}else{score+=_0x3ca3fe;if(!isTwoPlayerMode)player1Score=score;else{if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1)player1Score=score;else player2Score=score;}}let _0x44a3c2=!isTwoPlayerMode?_0x439766(0x19d):currentPlayer===0x1?_0x439766(0x19d):isPlayerTwoAI?_0x439766(0x1b3):_0x439766(0x224),_0x4efdfb=!isTwoPlayerMode?player1TriggeredHighScoreSound:currentPlayer===0x1?player1TriggeredHighScoreSound:player2TriggeredHighScoreSound,_0x2133a0=!isTwoPlayerMode?()=>player1TriggeredHighScoreSound=!![]:currentPlayer===0x1?()=>player1TriggeredHighScoreSound=!![]:()=>player2TriggeredHighScoreSound=!![];if(score>highScore)highScore=score,highScoreHolderId=_0x44a3c2,!_0x4efdfb&&(_0x2133a0(),playSound(_0x439766(0x133),![],0.2));else score===highScore&&highScoreHolderId!==_0x44a3c2&&highScore>0x0&&(highScoreHolderId=_0x44a3c2,!_0x4efdfb&&(_0x2133a0(),playSound('hiScoreSound',![],0.2)));checkAndAwardExtraLife(currentPlayer);}_0xbfbacd=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else isTwoPlayerMode&&selectedGameMode===_0x439766(0x125)?checkAndAwardExtraLife(null):checkAndAwardExtraLife(currentPlayer),_0xbfbacd=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0xbfbacd+=0x64;}else playSound(_0x439766(0x15f),![],0.8),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,_0xbfbacd=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x581b87=_0x439766;let _0x29c7d3=![],_0x492d23=0x0;if(isTwoPlayerMode&&selectedGameMode==='normal'){_0x492d23=currentPlayer;_0x492d23===0x1?player1MaxLevelReached=Math[_0x581b87(0x1cb)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x581b87(0x1cb)](player2MaxLevelReached,level);const _0x3cc148=switchPlayerTurn();if(_0x3cc148){if(_0x492d23===0x2&&currentPlayer===0x1&&player1CompletedLevel===level)_0x29c7d3=!![],player1CompletedLevel=-0x1;else _0x492d23===0x1?(player1CompletedLevel=level,_0x29c7d3=![]):_0x29c7d3=![];}else _0x29c7d3=!![],player1CompletedLevel=-0x1;}else{_0x29c7d3=!![];if(!isTwoPlayerMode)player1MaxLevelReached=Math[_0x581b87(0x1cb)](player1MaxLevelReached,level);else{if(isTwoPlayerMode&&selectedGameMode===_0x581b87(0x125)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x581b87(0x1cb)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x581b87(0x1cb)](player2MaxLevelReached,level);}}}if(_0x29c7d3){level++;if(isTwoPlayerMode&&selectedGameMode===_0x581b87(0x125)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x581b87(0x1cb)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x581b87(0x1cb)](player2MaxLevelReached,level);}else{if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1&&player1Lives>0x0)player1MaxLevelReached=Math[_0x581b87(0x1cb)](player1MaxLevelReached,level);else{if(currentPlayer===0x2&&player2Lives>0x0)player2MaxLevelReached=Math[_0x581b87(0x1cb)](player2MaxLevelReached,level);}}else{if(playerLives>0x0)player1MaxLevelReached=Math[_0x581b87(0x1cb)](player1MaxLevelReached,level);}}}let _0x13f02a=![];if(isTwoPlayerMode&&selectedGameMode==='coop')_0x13f02a=player1Lives>0x0||player2Lives>0x0;else{if(isTwoPlayerMode&&selectedGameMode===_0x581b87(0x161))_0x13f02a=(currentPlayer===0x1?player1Lives:player2Lives)>0x0;else _0x13f02a=playerLives>0x0;}_0x13f02a?(resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();},_0xbfbacd),renderGame();return;}if(!isChallengingStage){if(enemies[_0x439766(0x1d1)]>0x0){let _0x22a277=null;const _0x152ce8=enemies[_0x439766(0x14c)](_0x17c8bd=>_0x17c8bd?.[_0x439766(0x13e)]==='in_grid'),_0x25cec9=_0x152ce8[_0x439766(0x1d1)]<=0x3,_0x4d2f5a=Math[_0x439766(0x1cb)](0x1,Math[_0x439766(0x16c)](level,LEVEL_CAP_FOR_SCALING)),_0x58d27b=0x1068,_0x2e937d=0x320,_0x34ba6a=(_0x4d2f5a-0x1)*((_0x58d27b-_0x2e937d)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x52ddbf=Math[_0x439766(0x1cb)](_0x2e937d,_0x58d27b-_0x34ba6a),_0x1b75a1=Math[_0x439766(0x13a)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x4ebcfb=enemies[_0x439766(0x14c)](_0x3ee273=>_0x3ee273?.['state']===_0x439766(0x136)||_0x3ee273?.['state']===_0x439766(0x238))[_0x439766(0x1d1)];if(_0x25cec9||_0x428cbf-lastEnemyDetachTime>_0x52ddbf&&_0x152ce8[_0x439766(0x1d1)]>0x0&&_0x4ebcfb<_0x1b75a1){_0x22a277=findAndDetachEnemy();if(_0x22a277&&_0x22a277[_0x439766(0x1d1)]>0x0){const _0xa0efeb=_0x22a277[_0x439766(0x21a)](_0x1557c7=>enemies[_0x439766(0x1e1)](_0xb724e1=>_0xb724e1?.['id']===_0x1557c7['id']))[_0x439766(0x14c)](_0x3e41b0=>_0x3e41b0&&_0x3e41b0['state']===_0x439766(0x1ec));if(_0xa0efeb[_0x439766(0x1d1)]>0x0){const _0x126e2e=_0xa0efeb[0x0],_0x3705a8=_0x126e2e['attackType'];if(!_0x25cec9)lastEnemyDetachTime=_0x428cbf;if(_0x3705a8===_0x439766(0x161)){const _0x57d0d3=generateAttackPathInternal(_0x126e2e);if(_0x57d0d3&&_0x57d0d3[_0x439766(0x1d1)]>0x0){if(_0xa0efeb[_0x439766(0x1d1)]===0x3&&_0x126e2e[_0x439766(0x1ea)]===ENEMY3_TYPE&&level!==0x1)playSound(_0x439766(0x1a7),![],0.3);let _0x30b192=[..._0xa0efeb];const _0x578b4c=_0x30b192[_0x439766(0x1d1)];if(_0x578b4c>0x1){let _0x470b3d=null,_0x479ded=[];_0x30b192[_0x439766(0x1b4)](_0x23778b=>{const _0x299bfd=_0x439766;if(_0x23778b[_0x299bfd(0x1ea)]===ENEMY3_TYPE)_0x470b3d=_0x23778b;else _0x479ded['push'](_0x23778b);});if(_0x470b3d&&level!==0x1&&_0x578b4c===0x3&&_0x479ded[_0x439766(0x1d1)]===0x2)_0x30b192=[_0x479ded[0x0],_0x470b3d,_0x479ded[0x1]];else _0x30b192['sort']((_0x2b1041,_0x4edb07)=>(_0x2b1041?.[_0x439766(0x143)]??0x0)-(_0x4edb07?.[_0x439766(0x143)]??0x0));const _0x5a69e6=0x5;let _0x55ea34=0x0;_0x30b192=_0x30b192[_0x439766(0x14c)](_0x2cea51=>_0x2cea51&&typeof _0x2cea51[_0x439766(0x230)]==='number');const _0xc07b47=_0x30b192[_0x439766(0x1d1)];for(let _0x4d4da6=0x0;_0x4d4da6<_0xc07b47;_0x4d4da6++){_0x55ea34+=_0x30b192[_0x4d4da6][_0x439766(0x230)];if(_0x4d4da6<_0xc07b47-0x1)_0x55ea34+=_0x5a69e6;}const _0x499ce6=-_0x55ea34/0x2;let _0xf093c0=_0x499ce6;for(let _0x21e78e=0x0;_0x21e78e<_0xc07b47;_0x21e78e++){const _0x2f537c=_0x30b192[_0x21e78e];_0x2f537c[_0x439766(0x21d)]=_0xf093c0+_0x2f537c[_0x439766(0x230)]/0x2,_0xf093c0+=_0x2f537c[_0x439766(0x230)]+_0x5a69e6;}}else _0x30b192['forEach'](_0x2d61f4=>_0x2d61f4[_0x439766(0x21d)]=0x0);const _0x147976=_0x439766(0x21e)+_0x126e2e['id']+'-'+_0x428cbf;_0x30b192['forEach'](_0x1059f8=>{if(_0x1059f8)_0x1059f8['attackGroupId']=_0x147976;});let _0x224f7a=![],_0x42a792=GROUP_FIRE_BURST_DELAY;if(_0x126e2e[_0x439766(0x1ea)]===ENEMY2_TYPE||_0x126e2e['type']===ENEMY3_TYPE){_0x224f7a=!![];if(_0x126e2e[_0x439766(0x1ea)]===ENEMY2_TYPE&&_0x578b4c===0x1)_0x42a792=SOLO_BUTTERFLY_FIRE_DELAY;}else{if(_0x126e2e[_0x439766(0x1ea)]===ENEMY1_TYPE)_0x224f7a=!![];}if(_0x25cec9&&level>0x1)_0x224f7a=![];_0x224f7a&&_0x30b192['forEach'](_0x26f369=>{const _0x319d0b=_0x439766,_0x5a8d2b=_0x26f369&&!(_0x26f369[_0x319d0b(0x1ea)]===ENEMY3_TYPE&&_0x26f369[_0x319d0b(0x1f1)]);if(_0x5a8d2b)fireEnemyBurst(_0x26f369['id'],_0x319d0b(0x136),_0x42a792);}),_0x30b192['forEach']((_0x90e668,_0x315982)=>{const _0x13c045=_0x439766;_0x90e668&&_0x90e668[_0x13c045(0x13e)]==='in_grid'&&(_0x90e668[_0x13c045(0x13e)]=_0x13c045(0x238),_0x90e668[_0x13c045(0x1eb)]=![],_0x90e668[_0x13c045(0x105)]=0x0,_0x90e668[_0x13c045(0x1db)]=0x0,_0x90e668[_0x13c045(0x100)]=![],setTimeout(()=>{const _0x1b64a7=_0x13c045;if(isPaused)return;const _0x5a26c2=enemies['find'](_0x25c44c=>_0x25c44c?.['id']===_0x90e668['id']);if(_0x5a26c2&&_0x5a26c2[_0x1b64a7(0x13e)]===_0x1b64a7(0x238))try{const _0x1ae890=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x28af6f=0x1;if(_0x5a26c2[_0x1b64a7(0x1ea)]===ENEMY1_TYPE)_0x28af6f=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x5a26c2[_0x1b64a7(0x1ea)]===ENEMY2_TYPE)_0x28af6f=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x5a26c2['type']===ENEMY3_TYPE)_0x28af6f=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x90e668['type']===ENEMY3_TYPE)playSound('bossGalagaDiveSound',![],0.2);else playSound(_0x1b64a7(0x14e),![],0.2);_0x5a26c2[_0x1b64a7(0x13e)]=_0x1b64a7(0x136),_0x5a26c2[_0x1b64a7(0x214)]=_0x57d0d3,_0x5a26c2['attackPathSegmentIndex']=0x0,_0x5a26c2['attackPathT']=0x0,_0x5a26c2[_0x1b64a7(0x20a)]=_0x1ae890*_0x28af6f,_0x5a26c2['lastFiredTime']=0x0,_0x5a26c2[_0x1b64a7(0x100)]=!![];}catch(_0x44b194){console[_0x1b64a7(0x1a4)](_0x1b64a7(0xfe)+_0x90e668['id']+':',_0x44b194);}},_0x315982*GROUP_DETACH_DELAY_MS));});}else _0x22a277[_0x439766(0x1b4)](_0x317e7a=>{const _0x8658ca=_0x439766;if(_0x317e7a)_0x317e7a[_0x8658ca(0x1eb)]=![];});}}}}}}enemies[_0x439766(0x1b4)](_0xc23e85=>{const _0x2970be=_0x439766;if(_0xc23e85&&_0xc23e85[_0x2970be(0x1ea)]===ENEMY3_TYPE&&_0xc23e85['hasCapturedShip']&&_0xc23e85['state']===_0x2970be(0x136)&&_0xc23e85[_0x2970be(0x1bb)]&&typeof _0xc23e85[_0x2970be(0x217)]==='number'){if(_0x428cbf-_0xc23e85[_0x2970be(0x217)]>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x43b2fd=_0xc23e85['x']+_0xc23e85[_0x2970be(0x230)]/0x2,_0x45a67a=_0xc23e85['y']+_0xc23e85[_0x2970be(0x11f)]+_0xc23e85[_0x2970be(0x1bb)][_0x2970be(0x11f)]*0.5,_0x4348be={'x':_0x43b2fd,'y':_0x45a67a};createBulletSimple(_0xc23e85,_0x4348be)&&(_0xc23e85[_0x2970be(0x217)]=_0x428cbf,playSound(_0x2970be(0x186),![],0.4));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x43f797=_0x428cbf-gameOverSequenceStartTime,_0x219721=_0x43f797>=GAME_OVER_DURATION;if(_0x219721&&!isShowingResultsScreen){isShowingResultsScreen=!![],stopSound(_0x439766(0x1f5)),playSound('resultsMusicSound',!![],0.2),explosions=[];if(typeof updateExplosions===_0x439766(0x1fe))updateExplosions();}}}!_0x3ea49b&&renderGame();}catch(_0x595262){console[_0x439766(0x1a4)]('!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!',_0x595262,_0x595262[_0x439766(0x183)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0x439766(0x215)),stopAllGameSoundsInternal(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState===_0x439766(0x1fe)&&showMenuState();}catch(_0x4a7342){console[_0x439766(0x1a4)]('Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:',_0x4a7342);}}}function checkAndAwardExtraLife(_0x139988=null){const _0x1cfe8f=_0x42eb05;try{const _0xd0a522=[];if(_0x139988===0x1){const _0x80a888=isTwoPlayerMode&&selectedGameMode===_0x1cfe8f(0x125)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x1cfe8f(0x161)&&currentPlayer===0x1?playerLives:player1Lives,_0x4763b8=isTwoPlayerMode&&selectedGameMode==='coop'?player1Score:isTwoPlayerMode&&selectedGameMode===_0x1cfe8f(0x161)&&currentPlayer===0x1?score:player1Score;_0xd0a522[_0x1cfe8f(0x20b)]({'num':0x1,'currentLives':_0x80a888,'currentScore':_0x4763b8,'thresholdsMet':player1LifeThresholdsMet});}else{if(_0x139988===0x2&&isTwoPlayerMode){const _0x51ff4c=selectedGameMode===_0x1cfe8f(0x125)?player2Lives:selectedGameMode==='normal'&&currentPlayer===0x2?playerLives:player2Lives,_0x363f59=selectedGameMode===_0x1cfe8f(0x125)?player2Score:selectedGameMode===_0x1cfe8f(0x161)&&currentPlayer===0x2?score:player2Score;_0xd0a522[_0x1cfe8f(0x20b)]({'num':0x2,'currentLives':_0x51ff4c,'currentScore':_0x363f59,'thresholdsMet':player2LifeThresholdsMet});}else{if(isTwoPlayerMode&&selectedGameMode===_0x1cfe8f(0x125)&&_0x139988===null)_0xd0a522['push']({'num':0x1,'currentLives':player1Lives,'currentScore':player1Score,'thresholdsMet':player1LifeThresholdsMet}),_0xd0a522['push']({'num':0x2,'currentLives':player2Lives,'currentScore':player2Score,'thresholdsMet':player2LifeThresholdsMet});else{if(!isTwoPlayerMode&&(_0x139988===null||_0x139988===0x1))_0xd0a522[_0x1cfe8f(0x20b)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet});else isTwoPlayerMode&&selectedGameMode==='normal'&&_0x139988===currentPlayer&&(currentPlayer===0x1?_0xd0a522[_0x1cfe8f(0x20b)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet}):_0xd0a522[_0x1cfe8f(0x20b)]({'num':0x2,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player2LifeThresholdsMet}));}}}_0xd0a522[_0x1cfe8f(0x1b4)](_0x14f482=>{const _0x5ddef2=_0x1cfe8f;let _0x4cf953=![];while(!![]){let _0x56ee59=![],_0x13caa7=-0x1;const _0x4daa1e=_0x14f482[_0x5ddef2(0x16a)][_0x5ddef2(0x106)];if(_0x4daa1e===0x0)_0x13caa7=EXTRA_LIFE_THRESHOLD_1;else{if(_0x4daa1e===0x1&&!_0x14f482[_0x5ddef2(0x16a)][_0x5ddef2(0x1da)](EXTRA_LIFE_THRESHOLD_2))_0x13caa7=EXTRA_LIFE_THRESHOLD_2;else{if(_0x4daa1e>=0x1&&_0x14f482[_0x5ddef2(0x16a)][_0x5ddef2(0x1da)](EXTRA_LIFE_THRESHOLD_1)&&_0x14f482[_0x5ddef2(0x16a)][_0x5ddef2(0x1da)](EXTRA_LIFE_THRESHOLD_2)){let _0x354078=0x0;_0x14f482[_0x5ddef2(0x16a)][_0x5ddef2(0x1b4)](_0x289237=>{_0x289237>=EXTRA_LIFE_THRESHOLD_2&&(_0x289237-EXTRA_LIFE_THRESHOLD_2)%RECURRING_EXTRA_LIFE_INTERVAL===0x0&&_0x354078++;}),_0x13caa7=EXTRA_LIFE_THRESHOLD_2+_0x354078*RECURRING_EXTRA_LIFE_INTERVAL;}else{if(_0x4daa1e===0x1&&_0x14f482[_0x5ddef2(0x16a)][_0x5ddef2(0x1da)](EXTRA_LIFE_THRESHOLD_1)&&!_0x14f482[_0x5ddef2(0x16a)]['has'](EXTRA_LIFE_THRESHOLD_2))_0x13caa7=EXTRA_LIFE_THRESHOLD_2;else _0x4daa1e===0x1&&_0x14f482[_0x5ddef2(0x16a)][_0x5ddef2(0x1da)](EXTRA_LIFE_THRESHOLD_2)&&!_0x14f482['thresholdsMet'][_0x5ddef2(0x1da)](EXTRA_LIFE_THRESHOLD_1)&&(_0x13caa7=EXTRA_LIFE_THRESHOLD_1);}}}if(_0x13caa7!==-0x1&&_0x14f482[_0x5ddef2(0x188)]>=_0x13caa7&&!_0x14f482[_0x5ddef2(0x16a)][_0x5ddef2(0x1da)](_0x13caa7)){if(_0x14f482['num']===0x1){if(isTwoPlayerMode&&selectedGameMode==='coop')player1Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x5ddef2(0x161)&&currentPlayer===0x1)playerLives++;else{if(!isTwoPlayerMode)playerLives++;}}player1Lives=isTwoPlayerMode&&selectedGameMode===_0x5ddef2(0x125)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x5ddef2(0x161)&&currentPlayer===0x1?playerLives:player1Lives,_0x14f482['currentLives']=player1Lives;}else{if(_0x14f482[_0x5ddef2(0x17e)]===0x2){if(isTwoPlayerMode&&selectedGameMode===_0x5ddef2(0x125))player2Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x5ddef2(0x161)&&currentPlayer===0x2)playerLives++;}player2Lives=isTwoPlayerMode&&selectedGameMode===_0x5ddef2(0x125)?player2Lives:isTwoPlayerMode&&selectedGameMode===_0x5ddef2(0x161)&&currentPlayer===0x2?playerLives:player2Lives,_0x14f482['currentLives']=player2Lives;}}_0x14f482[_0x5ddef2(0x16a)]['add'](_0x13caa7),_0x4cf953=!![],_0x56ee59=!![];}if(!_0x56ee59)break;}_0x4cf953&&!showExtraLifeMessage&&!showCsBonusScoreMessage&&!showPerfectMessage&&!showCsHitsMessage&&!showCSClearMessage&&!showReadyMessage&&setTimeout(()=>{const _0x20b02c=_0x5ddef2;if(isInGameState){explosions=[];if(typeof updateExplosions===_0x20b02c(0x1fe))updateExplosions();showExtraLifeMessage=!![],extraLifeMessageStartTime=Date['now'](),playSound('extraLifeSound',![],0.5);}},EXPLOSION_DURATION);});}catch(_0x4d3592){console['error'](_0x1cfe8f(0x1f0),_0x4d3592);}}