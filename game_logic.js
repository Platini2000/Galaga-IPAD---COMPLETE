const _0x973987=_0x1121;(function(_0x40810f,_0x37aa23){const _0x42f192=_0x1121,_0xc3690d=_0x40810f();while(!![]){try{const _0x142a09=-parseInt(_0x42f192(0x1e8))/0x1+-parseInt(_0x42f192(0x264))/0x2+parseInt(_0x42f192(0x332))/0x3*(-parseInt(_0x42f192(0x309))/0x4)+-parseInt(_0x42f192(0x273))/0x5*(-parseInt(_0x42f192(0x2cc))/0x6)+parseInt(_0x42f192(0x2b9))/0x7+parseInt(_0x42f192(0x1fe))/0x8*(parseInt(_0x42f192(0x229))/0x9)+parseInt(_0x42f192(0x233))/0xa*(parseInt(_0x42f192(0x2f8))/0xb);if(_0x142a09===_0x37aa23)break;else _0xc3690d['push'](_0xc3690d['shift']());}catch(_0x42ddbe){_0xc3690d['push'](_0xc3690d['shift']());}}}(_0xb0d8,0x6c318));function generateAttackPathInternal(_0x1f0ae7){const _0x576a26=_0x1121;try{if(!_0x1f0ae7||!gameCanvas)return[];const _0x34833d=_0x1f0ae7[_0x576a26(0x243)]===ENEMY3_TYPE?BOSS_WIDTH:_0x1f0ae7[_0x576a26(0x243)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x3adf0e=_0x1f0ae7[_0x576a26(0x243)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x1f0ae7[_0x576a26(0x243)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x2f3ab0=_0x34833d*0.5,_0x150611=gameCanvas[_0x576a26(0x254)],_0x1f3ac0=gameCanvas['height'];let _0xd703a6=[];const _0x158809={'x':_0x1f0ae7['x'],'y':_0x1f0ae7['y']},_0x53897d=Math[_0x576a26(0x228)](_0x1f3ac0*0.06,_0x3adf0e*1.8),_0x557827=Math[_0x576a26(0x228)](_0x150611*0.04,_0x34833d*1.2),_0x295840=_0x1f0ae7['x']+_0x34833d/0x2<_0x150611/0x2?0x1:-0x1,_0x49bf6f={'x':_0x158809['x']-_0x295840*_0x557827*0.6,'y':_0x158809['y']-_0x53897d};_0x49bf6f['x']=Math[_0x576a26(0x269)](_0x2f3ab0,Math[_0x576a26(0x228)](_0x150611-_0x2f3ab0-_0x34833d,_0x49bf6f['x'])),_0x49bf6f['y']=Math[_0x576a26(0x269)](_0x2f3ab0,_0x49bf6f['y']);const _0x269312={'x':_0x158809['x']+_0x295840*_0x557827*0.1,'y':_0x158809['y']-_0x53897d*1.4},_0x285176={'x':_0x49bf6f['x']+_0x295840*_0x557827*0.3,'y':_0x158809['y']-_0x53897d*1.5},_0x4359ac={'p0':_0x158809,'p1':_0x269312,'p2':_0x285176,'p3':_0x49bf6f};_0xd703a6[_0x576a26(0x1e7)](_0x4359ac);const _0xb176e4=_0x49bf6f,_0x371a2e=_0x1f3ac0*0.45,_0x331f6f=_0x150611*0.22,_0x426420=_0x1f3ac0*0.28,_0x5e024c=0.5,_0x49b768=0.6,_0x15cb15=_0x1f3ac0*0.85,_0x199a6a=Math['floor'](Math[_0x576a26(0x2d1)]()*0x3);let _0x164c1e=[];if(_0x199a6a===0x0){const _0x3545c1=_0x371a2e+Math[_0x576a26(0x2d1)]()*_0x1f3ac0*0.1,_0x1886fd=_0x331f6f+Math[_0x576a26(0x2d1)]()*_0x150611*0.08,_0x24a0a3=_0x426420+Math[_0x576a26(0x2d1)]()*_0x1f3ac0*0.08,_0x1ee7aa=_0xb176e4['x']+_0x295840*_0x1886fd*0.5,_0x3eca56=Math[_0x576a26(0x228)](_0x15cb15,_0xb176e4['y']+_0x3545c1),_0x586480=_0x1ee7aa+_0x295840*_0x1886fd*0.5,_0x13edb4=Math[_0x576a26(0x269)](_0xb176e4['y']+0x14,_0x3eca56-_0x24a0a3),_0x452cf1=_0x586480-_0x295840*_0x1886fd*0.9,_0x117fff=Math[_0x576a26(0x269)](_0xb176e4['y']+0x28,_0x13edb4+_0x24a0a3*0.6),_0x1f5df5=_0x452cf1-_0x295840*_0x1886fd*0.3,_0x191c2d=_0x1f3ac0+_0x3adf0e*0x2,_0x56912=Math[_0x576a26(0x269)](_0x2f3ab0,Math[_0x576a26(0x228)](_0x150611-_0x2f3ab0-_0x34833d,_0x1ee7aa)),_0x4b177a=Math[_0x576a26(0x269)](_0x2f3ab0,Math[_0x576a26(0x228)](_0x150611-_0x2f3ab0-_0x34833d,_0x586480)),_0x19a3f0=Math[_0x576a26(0x269)](_0x2f3ab0,Math[_0x576a26(0x228)](_0x150611-_0x2f3ab0-_0x34833d,_0x452cf1)),_0x17e9b7={'x':_0xb176e4['x'],'y':_0xb176e4['y']+_0x3545c1*_0x49b768*0.5},_0xcef467={'x':_0x56912-_0x295840*_0x1886fd*_0x5e024c,'y':_0x3eca56},_0x541026={'x':_0x56912,'y':_0x3eca56},_0x332610={'x':_0x56912+_0x295840*_0x1886fd*_0x5e024c,'y':_0x3eca56},_0x5c3a34={'x':_0x4b177a,'y':_0x13edb4+_0x24a0a3*_0x49b768},_0xc6799c={'x':_0x4b177a,'y':_0x13edb4},_0x2b64d4={'x':_0x4b177a,'y':_0x13edb4-_0x24a0a3*_0x49b768*0.5},_0x4e3917={'x':_0x19a3f0+_0x295840*_0x1886fd*_0x5e024c,'y':_0x117fff},_0x2e77cd={'x':_0x19a3f0,'y':_0x117fff},_0x5ad878={'x':_0x2e77cd['x'],'y':_0x2e77cd['y']+_0x1f3ac0*0.1},_0x425ff0={'x':_0x1f5df5,'y':_0x191c2d-_0x1f3ac0*0.2},_0x1deea2={'x':_0x1f5df5,'y':_0x191c2d};_0x164c1e=[{'p0':_0xb176e4,'p1':_0x17e9b7,'p2':_0xcef467,'p3':_0x541026},{'p0':_0x541026,'p1':_0x332610,'p2':_0x5c3a34,'p3':_0xc6799c},{'p0':_0xc6799c,'p1':_0x2b64d4,'p2':_0x4e3917,'p3':_0x2e77cd},{'p0':_0x2e77cd,'p1':_0x5ad878,'p2':_0x425ff0,'p3':_0x1deea2}];}else{if(_0x199a6a===0x1){const _0x31ed03=_0x371a2e*0.8+Math[_0x576a26(0x2d1)]()*_0x1f3ac0*0.1,_0x726695=_0x331f6f*1.2+Math[_0x576a26(0x2d1)]()*_0x150611*0.1,_0x3a670c=_0x426420*0.7+Math['random']()*_0x1f3ac0*0.1,_0x450b92=_0xb176e4['x']+_0x295840*_0x726695*0.4,_0x497691=Math['min'](_0x15cb15-_0x3a670c*0.5,_0xb176e4['y']+_0x31ed03*0.6),_0x4705e5=_0x450b92+_0x295840*_0x726695*0.6,_0x33ec7f=Math['min'](_0x15cb15,_0x497691+_0x3a670c),_0x1cc0ff=_0x4705e5-_0x295840*_0x726695*0.5,_0x353064=_0x1f3ac0+_0x3adf0e*0x2,_0x24e35c=Math[_0x576a26(0x269)](_0x2f3ab0,Math[_0x576a26(0x228)](_0x150611-_0x2f3ab0-_0x34833d,_0x450b92)),_0x152d8b=Math[_0x576a26(0x269)](_0x2f3ab0,Math[_0x576a26(0x228)](_0x150611-_0x2f3ab0-_0x34833d,_0x4705e5)),_0x7eb2fb={'x':_0xb176e4['x']-_0x295840*_0x726695*0.1,'y':_0xb176e4['y']+_0x31ed03*0.3},_0x485c07={'x':_0x24e35c-_0x295840*_0x726695*_0x5e024c*0.8,'y':_0x497691+_0x3a670c*_0x49b768*0.4},_0x4fb1a0={'x':_0x24e35c,'y':_0x497691},_0x1225b4={'x':_0x24e35c+_0x295840*_0x726695*_0x5e024c*0.8,'y':_0x497691-_0x3a670c*_0x49b768*0.4},_0x2fd2eb={'x':_0x152d8b+_0x295840*_0x726695*_0x5e024c*0.6,'y':_0x33ec7f+_0x3a670c*_0x49b768*0.5},_0x584834={'x':_0x152d8b,'y':_0x33ec7f},_0x39a0bd={'x':_0x152d8b-_0x295840*_0x726695*0.2,'y':_0x33ec7f+_0x1f3ac0*0.1},_0x9c8aea={'x':_0x1cc0ff,'y':_0x353064-_0x1f3ac0*0.3},_0x14821c={'x':_0x1cc0ff,'y':_0x353064};_0x164c1e=[{'p0':_0xb176e4,'p1':_0x7eb2fb,'p2':_0x485c07,'p3':_0x4fb1a0},{'p0':_0x4fb1a0,'p1':_0x1225b4,'p2':_0x2fd2eb,'p3':_0x584834},{'p0':_0x584834,'p1':_0x39a0bd,'p2':_0x9c8aea,'p3':_0x14821c}];}else{const _0x2e657c=_0x371a2e*0.6+Math[_0x576a26(0x2d1)]()*_0x1f3ac0*0.05,_0x5923db=_0x331f6f*0.7+Math['random']()*_0x150611*0.05,_0x559b6d=_0x426420*0.6+Math['random']()*_0x1f3ac0*0.05,_0xa3d4fa=_0x559b6d*1.5,_0x284633=_0xb176e4['x']+_0x295840*_0x5923db*0.5,_0x4fa43e=Math[_0x576a26(0x228)](_0x15cb15-_0xa3d4fa,_0xb176e4['y']+_0x2e657c),_0x6e3638=_0x284633+_0x295840*_0x5923db*0.5,_0x34a8aa=_0x4fa43e+_0x559b6d,_0x1adf87=_0x6e3638-_0x295840*_0x5923db*0.8,_0xb7499a=Math['min'](_0x15cb15,_0x34a8aa+_0xa3d4fa*0.7),_0x3c7fc2=_0x1adf87+_0x295840*_0x5923db*0.4,_0xd044d0=_0xb7499a+_0x559b6d*0.8,_0x2caade=_0x3c7fc2,_0xd8dd35=_0x1f3ac0+_0x3adf0e*0x2,_0x25c71f=Math['max'](_0x2f3ab0,Math[_0x576a26(0x228)](_0x150611-_0x2f3ab0-_0x34833d,_0x284633)),_0x457962=Math[_0x576a26(0x269)](_0x2f3ab0,Math[_0x576a26(0x228)](_0x150611-_0x2f3ab0-_0x34833d,_0x6e3638)),_0x11517d=Math[_0x576a26(0x269)](_0x2f3ab0,Math[_0x576a26(0x228)](_0x150611-_0x2f3ab0-_0x34833d,_0x1adf87)),_0x45cea1=Math[_0x576a26(0x269)](_0x2f3ab0,Math[_0x576a26(0x228)](_0x150611-_0x2f3ab0-_0x34833d,_0x3c7fc2)),_0x4a7ca1={'x':_0xb176e4['x'],'y':_0xb176e4['y']+_0x2e657c*0.5},_0x157035={'x':_0x25c71f-_0x295840*_0x5923db*_0x5e024c,'y':_0x4fa43e+_0x559b6d*_0x49b768*0.3},_0x3dfa31={'x':_0x25c71f,'y':_0x4fa43e},_0x3eb36b={'x':_0x25c71f+_0x295840*_0x5923db*_0x5e024c,'y':_0x4fa43e-_0x559b6d*_0x49b768*0.3},_0x4b5ac9={'x':_0x457962+_0x295840*_0x5923db*_0x5e024c,'y':_0x34a8aa+_0x559b6d*_0x49b768*0.5},_0x45d3b3={'x':_0x457962,'y':_0x34a8aa},_0x27aaab={'x':_0x457962-_0x295840*_0x5923db*_0x5e024c,'y':_0x34a8aa-_0x559b6d*_0x49b768*0.5},_0x24e0f5={'x':_0x11517d-_0x295840*_0x5923db*_0x5e024c,'y':_0xb7499a+_0x559b6d*_0x49b768*0.4},_0x131f2f={'x':_0x11517d,'y':_0xb7499a},_0x2a7cc3={'x':_0x11517d+_0x295840*_0x5923db*_0x5e024c,'y':_0xb7499a-_0x559b6d*_0x49b768*0.4},_0x5d7c13={'x':_0x45cea1+_0x295840*_0x5923db*_0x5e024c,'y':_0xd044d0+_0x559b6d*_0x49b768*0.6},_0x6926c3={'x':_0x45cea1,'y':_0xd044d0},_0x511102={'x':_0x45cea1-_0x295840*_0x5923db*0.1,'y':_0xd044d0+_0x1f3ac0*0.05},_0x57f590={'x':_0x2caade,'y':_0xd8dd35-_0x1f3ac0*0.2},_0x35fa5c={'x':_0x2caade,'y':_0xd8dd35};_0x164c1e=[{'p0':_0xb176e4,'p1':_0x4a7ca1,'p2':_0x157035,'p3':_0x3dfa31},{'p0':_0x3dfa31,'p1':_0x3eb36b,'p2':_0x4b5ac9,'p3':_0x45d3b3},{'p0':_0x45d3b3,'p1':_0x27aaab,'p2':_0x24e0f5,'p3':_0x131f2f},{'p0':_0x131f2f,'p1':_0x2a7cc3,'p2':_0x5d7c13,'p3':_0x6926c3},{'p0':_0x6926c3,'p1':_0x511102,'p2':_0x57f590,'p3':_0x35fa5c}];}}return _0xd703a6[_0x576a26(0x1e7)](..._0x164c1e),_0xd703a6;}catch(_0x463fcd){return console[_0x576a26(0x2eb)](_0x576a26(0x224)+_0x1f0ae7?.['id']+':',_0x463fcd),[];}}window[_0x973987(0x1ed)]=generateAttackPathInternal;function resetAllMessagesInternal(){showReadyMessage=![],isShowingIntro=![],showCsHitsMessage=![],showPerfectMessage=![],showCsBonusScoreMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],isShowingCaptureMessage=![],isShowingPlayerGameOverMessage=![],isShowingCoopPlayersReady=![],csHitsMessageStartTime=0x0,perfectMessageStartTime=0x0,csBonusScoreMessageStartTime=0x0,csClearMessageStartTime=0x0,extraLifeMessageStartTime=0x0,readyMessageStartTime=0x0,captureMessageStartTime=0x0,playerGameOverMessageStartTime=0x0,csCompletionDelayStartTime=0x0,introDisplayStartTime=0x0,coopPlayersReadyStartTime=0x0;}window[_0x973987(0x31f)]=resetAllMessagesInternal;function stopAllGameSoundsInternal(){const _0x26177c=_0x973987;if(typeof soundPaths===_0x26177c(0x280)&&soundPaths!==null&&typeof stopSound===_0x26177c(0x30c))for(const _0x4caf78 in soundPaths){stopSound(_0x4caf78);}isGridSoundPlaying=![];}window[_0x973987(0x2f3)]=stopAllGameSoundsInternal;function resetGameInternal(){const _0x56b8b0=_0x973987;score=0x0,level=0x1,playerLives=0x3,window[_0x56b8b0(0x221)]=null;if(isTwoPlayerMode){player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,currentPlayer=0x1,player1CompletedLevel=-0x1,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x56b8b0(0x268)]();else player1LifeThresholdsMet=new Set();if(player2LifeThresholdsMet instanceof Set)player2LifeThresholdsMet[_0x56b8b0(0x268)]();else player2LifeThresholdsMet=new Set();player1IsDualShipActive=![],player2IsDualShipActive=![],isPlayer1ShipCaptured=![],isPlayer2ShipCaptured=![],isPlayer1WaitingForRespawn=![],isPlayer2WaitingForRespawn=![],isPlayer1Invincible=![],isPlayer2Invincible=![],player1RespawnTime=0x0,player2RespawnTime=0x0,player1InvincibilityEndTime=0x0,player2InvincibilityEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![];if(selectedGameMode===_0x56b8b0(0x260)){playerLives=0x0;if(gameCanvas&&gameCanvas[_0x56b8b0(0x254)]>0x0&&gameCanvas[_0x56b8b0(0x334)]>0x0){const _0x1c4026=gameCanvas[_0x56b8b0(0x254)]/0x2-gameCanvas[_0x56b8b0(0x254)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x41b8f3=gameCanvas[_0x56b8b0(0x254)]/0x2+gameCanvas[_0x56b8b0(0x254)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x16b8f9=gameCanvas[_0x56b8b0(0x334)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;ship1={'x':_0x1c4026,'y':_0x16b8f9,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x1c4026,'id':'p1'},ship2={'x':_0x41b8f3,'y':_0x16b8f9,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x41b8f3,'id':'p2'},(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x56b8b0(0x208))&&(smoothedShip1X=_0x1c4026,smoothedShip2X=_0x41b8f3,aiShip1TargetEnemy=null,aiShip2TargetEnemy=null,aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0,aiShip1LastShotTime=0x0,aiShip2LastShotTime=0x0,aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);}ship=null;}else{if(!ship&&gameCanvas&&gameCanvas[_0x56b8b0(0x254)]>0x0&&gameCanvas['height']>0x0)ship={'x':Math['round'](gameCanvas[_0x56b8b0(0x254)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x56b8b0(0x334)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x56b8b0(0x230)},ship[_0x56b8b0(0x1d6)]=ship['x'];else ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas['height']>0x0&&(ship['x']=Math[_0x56b8b0(0x223)](gameCanvas[_0x56b8b0(0x254)]/0x2-SHIP_WIDTH/0x2),ship[_0x56b8b0(0x1d6)]=ship['x'],ship['y']=gameCanvas[_0x56b8b0(0x334)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}}else{player1Lives=0x3,player1Score=0x0,player1MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x56b8b0(0x268)]();else player1LifeThresholdsMet=new Set();if(!ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x56b8b0(0x334)]>0x0)ship={'x':Math[_0x56b8b0(0x223)](gameCanvas[_0x56b8b0(0x254)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x56b8b0(0x230)},ship[_0x56b8b0(0x1d6)]=ship['x'];else ship&&gameCanvas&&gameCanvas[_0x56b8b0(0x254)]>0x0&&gameCanvas['height']>0x0&&(ship['x']=Math[_0x56b8b0(0x223)](gameCanvas[_0x56b8b0(0x254)]/0x2-SHIP_WIDTH/0x2),ship['targetX']=ship['x'],ship['y']=gameCanvas[_0x56b8b0(0x334)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isDualShipActive=![];if(!isTwoPlayerMode)player1IsDualShipActive=![];fallingShips=[],visualOffsetX=-0x14,gameOverSequenceStartTime=0x0,isShowingResultsScreen=![],gameStartTime=Date[_0x56b8b0(0x1f5)](),gameJustStarted=!![],gameJustStartedAndWaveLaunched=![],currentGridOffsetX=0x0,gridMoveDirection=0x1,gridJustCompleted=![],isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,lastGridFireCheckTime=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,scoreEarnedThisCS=0x0,challengingStageEnemiesHit=0x0,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined,aiCanShootTime=0x0,aiLastShotTime=0x0,!(selectedGameMode===_0x56b8b0(0x260)&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x56b8b0(0x208)))&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0),playerLastShotTime=0x0,player1LastShotTime=0x0,player2LastShotTime=0x0,p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isShowingCoopPlayersReady=![],coopPlayersReadyStartTime=0x0,resetWaveInternal();}window[_0x973987(0x1d7)]=resetGameInternal;function resetWaveInternal(){const _0x18bd16=_0x973987;isWaveTransitioning=![],readyForNextWave=![],readyForNextWaveReset=![],isEntrancePhaseActive=!![],firstEnemyLanded=![],captureAttemptMadeThisLevel=![],gameJustStartedAndWaveLaunched=![],aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![],enemies=[],bullets=[],enemyBullets=[],explosions=[],floatingScores=[],hitSparks=[];Array[_0x18bd16(0x242)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x18bd16(0x2ac)](clearTimeout);enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;const _0x4ece78=getWaveTypeInternal(level);isChallengingStage=_0x4ece78===_0x18bd16(0x225),isFullGridWave=_0x4ece78===_0x18bd16(0x1fa),challengingStageEnemiesHit=0x0,scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null;(isFullGridWave||isChallengingStage)&&(isEntrancePhaseActive=![]);const _0x45a227=isShowingDemoText;resetAllMessagesInternal();_0x45a227&&(isShowingDemoText=!![]);if(selectedGameMode===_0x18bd16(0x260)&&level===0x1)isShowingIntro=![],introStep=0x2;else{if(isTwoPlayerMode&&selectedGameMode===_0x18bd16(0x2c3)||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x18bd16(0x2d6)){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(isChallengingStage){introStep=0x3,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(level===0x1&&!isTwoPlayerMode){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{introStep=0x2,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}}}}isShowingIntro&&!(selectedGameMode==='coop'&&level===0x1)&&(introDisplayStartTime=Date[_0x18bd16(0x1f5)]());playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],currentWaveDefinition=generateWaveDefinitionInternal(level);if(selectedGameMode==='coop'){if(gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x18bd16(0x334)]>0x0){const _0x36765d=ship1&&player1Lives>0x0,_0x17cdab=ship2&&player2Lives>0x0,_0xb10260=gameCanvas[_0x18bd16(0x334)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x18bd16(0x208)){if(_0x36765d&&_0x17cdab){const _0x301cb3=gameCanvas[_0x18bd16(0x254)]/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1&&(ship1[_0x18bd16(0x1d6)]=_0x301cb3,ship1['x']=_0x301cb3,smoothedShip1X=_0x301cb3,ship1['y']=_0xb10260);const _0x568c18=gameCanvas['width']/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2[_0x18bd16(0x1d6)]=_0x568c18,ship2['x']=_0x568c18,smoothedShip2X=_0x568c18,ship2['y']=_0xb10260);}else{if(_0x36765d&&ship1){const _0x4feb0f=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x4583e9=Math[_0x18bd16(0x223)](gameCanvas[_0x18bd16(0x254)]/0x2-_0x4feb0f/0x2);ship1[_0x18bd16(0x1d6)]=_0x4583e9,ship1['x']=_0x4583e9,smoothedShip1X=_0x4583e9,ship1['y']=_0xb10260;}else{if(_0x17cdab&&ship2){const _0x206a4f=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x1ebbda=Math[_0x18bd16(0x223)](gameCanvas[_0x18bd16(0x254)]/0x2-_0x206a4f/0x2);ship2[_0x18bd16(0x1d6)]=_0x1ebbda,ship2['x']=_0x1ebbda,smoothedShip2X=_0x1ebbda,ship2['y']=_0xb10260;}}}}else{if(_0x36765d&&ship1)ship1['y']=_0xb10260;if(_0x17cdab&&ship2)ship2['y']=_0xb10260;}}}else{if(ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x18bd16(0x334)]>0x0&&(forceCenterShipNextReset||!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x18bd16(0x2c3)&&currentPlayer===0x2)){let _0x23c1c5=ship[_0x18bd16(0x254)];if(isDualShipActive)_0x23c1c5=DUAL_SHIP_OFFSET_X+SHIP_WIDTH;ship['x']=Math['round'](gameCanvas[_0x18bd16(0x254)]/0x2-_0x23c1c5/0x2),ship['targetX']=ship['x'],ship['y']=gameCanvas[_0x18bd16(0x334)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)smoothedShipX=ship['x'];}else ship&&gameCanvas&&gameCanvas[_0x18bd16(0x254)]>0x0&&(ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);}forceCenterShipNextReset=![];if(!isManualControl&&aiNeedsStabilization&&selectedGameMode!==_0x18bd16(0x260)&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)){aiStabilizationEndTime=Date['now']()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}else{if(isPlayerTwoAI&&selectedGameMode===_0x18bd16(0x2c3)&&currentPlayer===0x2&&aiNeedsStabilization){aiStabilizationEndTime=Date['now']()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}}}window[_0x973987(0x1dc)]=resetWaveInternal;function getWaveTypeInternal(_0x23983f){const _0xf142d8=_0x973987,_0x46fe31=(_0x23983f-0x1)%0x4;switch(_0x46fe31){case 0x0:return'full_grid';case 0x1:return'entrance_flight_1';case 0x2:return _0xf142d8(0x225);case 0x3:return _0xf142d8(0x2f9);default:return _0xf142d8(0x238);}}window[_0x973987(0x329)]=getWaveTypeInternal;function generateWaveDefinitionInternal(_0x352378){const _0x56de3d=_0x973987;let _0x46924a=[];currentWavePatternIndex=-0x1;const _0x5b1925=getWaveTypeInternal(_0x352378);if(typeof waveEntrancePatterns===_0x56de3d(0x245)||!Array[_0x56de3d(0x242)](waveEntrancePatterns)||waveEntrancePatterns[_0x56de3d(0x2aa)]<0x2)return console[_0x56de3d(0x2eb)]('CRITICAL:\x20waveEntrancePatterns\x20not\x20defined\x20or\x20insufficient\x20for\x20wave\x20generation.'),[];if(_0x5b1925===_0x56de3d(0x225))_0x46924a=[];else{if(_0x5b1925===_0x56de3d(0x1fa)){currentWavePatternIndex=0x0;const _0x130780=waveEntrancePatterns[0x0];if(!_0x130780||_0x130780[_0x56de3d(0x2aa)]===0x0)console[_0x56de3d(0x2eb)](_0x56de3d(0x28d)),_0x46924a=[];else try{_0x46924a=JSON['parse'](JSON[_0x56de3d(0x2fa)](_0x130780),(_0x512fce,_0x145808)=>{const _0xa33602=_0x56de3d;return _0x145808&&typeof _0x145808==='object'&&_0x145808[_0xa33602(0x243)]===ENEMY3_TYPE&&typeof _0x145808[_0xa33602(0x301)]==='undefined'&&(_0x145808['hasCapturedShip']=![]),_0x145808;});}catch(_0x23aad1){console[_0x56de3d(0x2eb)]('Error\x20cloning\x20full\x20grid\x20wave\x20pattern:',_0x23aad1),_0x46924a=[];}}else{if(_0x5b1925===_0x56de3d(0x2f1)){currentWavePatternIndex=0x0;const _0x2cbfe9=waveEntrancePatterns[0x0];if(!_0x2cbfe9||_0x2cbfe9[_0x56de3d(0x2aa)]===0x0)console[_0x56de3d(0x2eb)](_0x56de3d(0x27d)),_0x46924a=[];else try{_0x46924a=JSON[_0x56de3d(0x2da)](JSON['stringify'](_0x2cbfe9),(_0x620a7e,_0x202178)=>{const _0x5d18bd=_0x56de3d;return _0x202178&&typeof _0x202178==='object'&&_0x202178[_0x5d18bd(0x243)]===ENEMY3_TYPE&&typeof _0x202178[_0x5d18bd(0x301)]===_0x5d18bd(0x245)&&(_0x202178[_0x5d18bd(0x301)]=![]),_0x202178;});}catch(_0x20195a){console[_0x56de3d(0x2eb)](_0x56de3d(0x1fb),_0x20195a),_0x46924a=[];}}else{if(_0x5b1925===_0x56de3d(0x2f9)){currentWavePatternIndex=0x1;const _0x53eae8=waveEntrancePatterns[0x1];if(!_0x53eae8||_0x53eae8[_0x56de3d(0x2aa)]===0x0)console[_0x56de3d(0x2eb)](_0x56de3d(0x2ca)),_0x46924a=[];else try{_0x46924a=JSON[_0x56de3d(0x2da)](JSON[_0x56de3d(0x2fa)](_0x53eae8),(_0x5de500,_0x2cf96a)=>{const _0x1ac8ac=_0x56de3d;return _0x2cf96a&&typeof _0x2cf96a==='object'&&_0x2cf96a[_0x1ac8ac(0x243)]===ENEMY3_TYPE&&typeof _0x2cf96a[_0x1ac8ac(0x301)]===_0x1ac8ac(0x245)&&(_0x2cf96a[_0x1ac8ac(0x301)]=![]),_0x2cf96a;});}catch(_0x3d6939){console[_0x56de3d(0x2eb)](_0x56de3d(0x2d3),_0x3d6939),_0x46924a=[];}}else console[_0x56de3d(0x259)](_0x56de3d(0x2bc)+_0x352378+':\x20'+_0x5b1925),_0x46924a=[];}}}if(_0x5b1925!==_0x56de3d(0x225)){if(typeof normalWaveEntrancePaths===_0x56de3d(0x245)||Object['keys'](normalWaveEntrancePaths)[_0x56de3d(0x2aa)]===0x0)return console[_0x56de3d(0x2eb)]('CRITICAL:\x20normalWaveEntrancePaths\x20not\x20defined\x20or\x20empty.\x20Cannot\x20assign\x20paths\x20to\x20squadrons.'),_0x46924a;for(let _0x37cd48=_0x46924a[_0x56de3d(0x2aa)]-0x1;_0x37cd48>=0x0;_0x37cd48--){const _0x22d8ea=_0x46924a[_0x37cd48];if(!normalWaveEntrancePaths?.[_0x22d8ea['pathId']]){_0x46924a[_0x56de3d(0x256)](_0x37cd48,0x1);continue;}if(_0x22d8ea['enemies']&&Array[_0x56de3d(0x242)](_0x22d8ea['enemies'])){for(let _0x2ad50d=_0x22d8ea[_0x56de3d(0x26d)]['length']-0x1;_0x2ad50d>=0x0;_0x2ad50d--){const _0x31ce6e=_0x22d8ea[_0x56de3d(0x26d)][_0x2ad50d];(!_0x31ce6e||!normalWaveEntrancePaths?.[_0x31ce6e['entrancePathId']])&&_0x22d8ea[_0x56de3d(0x26d)][_0x56de3d(0x256)](_0x2ad50d,0x1),_0x31ce6e&&_0x31ce6e[_0x56de3d(0x243)]===ENEMY3_TYPE&&typeof _0x31ce6e[_0x56de3d(0x301)]===_0x56de3d(0x245)&&(_0x31ce6e[_0x56de3d(0x301)]=![]);}_0x22d8ea['enemies'][_0x56de3d(0x2aa)]===0x0&&_0x46924a['splice'](_0x37cd48,0x1);}else _0x46924a['splice'](_0x37cd48,0x1);}}return _0x46924a;}window['generateWaveDefinition']=generateWaveDefinitionInternal;const createBulletSimple=(_0x3137fc,_0x326f0e=null)=>{const _0x1b61e2=_0x973987;let _0x3051fc=null,_0x3e3ab3=![];if(isTwoPlayerMode&&selectedGameMode==='coop'){const _0x3c0bcd=ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured,_0xcc5e66=ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured;if(_0x3c0bcd&&_0xcc5e66)_0x3051fc=Math[_0x1b61e2(0x2d1)]()<0.5?ship1:ship2,_0x3e3ab3=!![];else{if(_0x3c0bcd)_0x3051fc=ship1,_0x3e3ab3=!![];else _0xcc5e66&&(_0x3051fc=ship2,_0x3e3ab3=!![]);}}else ship&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn&&(_0x3051fc=ship,_0x3e3ab3=!![]);if(!_0x3137fc||!isInGameState||!_0x3e3ab3||!_0x3051fc)return![];const _0x49f912=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x405296=_0x326f0e?_0x326f0e['x']:_0x3137fc['x']+_0x3137fc['width']/0x2,_0x230cbf=_0x326f0e?_0x326f0e['y']:_0x3137fc['y']+_0x3137fc['height']/0x2;let _0x24eab4=0x0,_0x3c2651=_0x49f912;const _0x29c0f6=_0x3051fc['x']+_0x3051fc[_0x1b61e2(0x254)]/0x2-_0x405296,_0x5f1339=_0x3051fc['y']+_0x3051fc[_0x1b61e2(0x334)]/0x2-_0x230cbf,_0x55dbd8=Math[_0x1b61e2(0x2f0)](_0x29c0f6*_0x29c0f6+_0x5f1339*_0x5f1339);if(_0x55dbd8>0x0){let _0x318a70=0x0;!isChallengingStage&&(_0x318a70=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x5c560f=Math['atan2'](_0x5f1339,_0x29c0f6);_0x24eab4=Math[_0x1b61e2(0x2c6)](_0x5c560f)*_0x49f912*_0x318a70,_0x3c2651=Math['sqrt'](_0x49f912**0x2-_0x24eab4**0x2),_0x3c2651=Math[_0x1b61e2(0x269)](_0x49f912*(0x1-_0x318a70)*0.5,_0x3c2651);if(_0x5f1339<0x0&&_0x3c2651>0x0){}if(_0x5f1339<0x0)_0x3c2651=Math[_0x1b61e2(0x2a7)](_0x3c2651);return enemyBullets['push']({'x':_0x405296-ENEMY_BULLET_WIDTH/0x2,'y':_0x230cbf,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x24eab4,'vy':_0x3c2651,'type':_0x3137fc[_0x1b61e2(0x243)]}),!![];}return![];};function scheduleSingleEntranceSquadron(_0x8f50ec,_0x76bbdd,_0x6e6e33){const _0x4ed708=_0x973987;if(isFullGridWave||isChallengingStage)return console[_0x4ed708(0x259)](_0x4ed708(0x203)+level+_0x4ed708(0x25e)+isFullGridWave+',\x20isCS:\x20'+isChallengingStage+_0x4ed708(0x307)),_0x8f50ec?.[_0x4ed708(0x26d)]?.[_0x4ed708(0x2aa)]>0x0&&(enemiesSpawnedThisWave+=_0x8f50ec['enemies']['length'],squadronCompletionStatus[_0x76bbdd]&&(squadronCompletionStatus[_0x76bbdd][_0x4ed708(0x2ea)]=squadronCompletionStatus[_0x76bbdd][_0x4ed708(0x2ad)])),![];const _0x5b8209=normalWaveEntrancePaths,_0xe81247=_0x8f50ec[_0x4ed708(0x305)],_0x194cab=_0x5b8209[_0xe81247];if(!_0x194cab||_0x194cab['length']===0x0)return console[_0x4ed708(0x2eb)]('Entrance\x20Wave:\x20Path\x20'+_0xe81247+_0x4ed708(0x336)+_0x76bbdd+'\x20invalid!\x20Skipping\x20squadron.'),_0x8f50ec?.[_0x4ed708(0x26d)]?.[_0x4ed708(0x2aa)]>0x0&&(enemiesSpawnedThisWave+=_0x8f50ec[_0x4ed708(0x26d)][_0x4ed708(0x2aa)],squadronCompletionStatus[_0x76bbdd]&&(squadronCompletionStatus[_0x76bbdd][_0x4ed708(0x2ea)]=squadronCompletionStatus[_0x76bbdd][_0x4ed708(0x2ad)])),![];const _0xe8a247=setTimeout(()=>{const _0xee9b61=_0x4ed708,_0xd83e89=enemySpawnTimeouts[_0xee9b61(0x27f)](_0xe8a247);if(_0xd83e89>-0x1)enemySpawnTimeouts[_0xee9b61(0x256)](_0xd83e89,0x1);let _0x49b757=![];isTwoPlayerMode&&selectedGameMode===_0xee9b61(0x260)?_0x49b757=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x49b757=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x49b757||isFullGridWave){_0x8f50ec?.['enemies']?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x8f50ec['enemies'][_0xee9b61(0x2aa)],squadronCompletionStatus[_0x76bbdd]&&(squadronCompletionStatus[_0x76bbdd]['completed']=squadronCompletionStatus[_0x76bbdd]['total']));return;}try{squadronEntranceFiringStatus[_0x76bbdd]?(squadronEntranceFiringStatus[_0x76bbdd][_0xee9b61(0x232)]=Date['now']()+_0x6e6e33,squadronEntranceFiringStatus[_0x76bbdd]['hasFired']=![]):(console[_0xee9b61(0x259)](_0xee9b61(0x219)+_0x76bbdd+_0xee9b61(0x1ec)),squadronEntranceFiringStatus[_0x76bbdd]={'hasFired':![],'scheduledStartTime':Date[_0xee9b61(0x1f5)]()+_0x6e6e33});const _0x5ef7fd=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x491744=_0x5ef7fd*0x2,_0x2b32b9=0x1;_0x8f50ec[_0xee9b61(0x26d)][_0xee9b61(0x2ac)]((_0x141959,_0x138164)=>{const _0x1a788f=_0xee9b61;if(!_0x141959||!_0x141959[_0x1a788f(0x243)]||typeof _0x141959[_0x1a788f(0x236)]===_0x1a788f(0x245)||typeof _0x141959[_0x1a788f(0x25f)]===_0x1a788f(0x245)||!_0x141959[_0x1a788f(0x2e8)]){console[_0x1a788f(0x2eb)]('Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20'+_0x76bbdd+'\x20(Path\x20'+_0xe81247+_0x1a788f(0x214)+_0x138164+_0x1a788f(0x23c)),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x76bbdd]&&squadronCompletionStatus[_0x76bbdd][_0x1a788f(0x2ea)]++;return;}const _0x1a61bb=_0x5b8209[_0x141959['entrancePathId']];(!_0x1a61bb||_0x1a61bb[_0x1a788f(0x2aa)]===0x0)&&console['warn'](_0x1a788f(0x308)+_0x141959[_0x1a788f(0x2e8)]+'\x22\x20for\x20enemy\x20in\x20squadron\x20'+_0x76bbdd+_0x1a788f(0x2e2)+_0x138164+_0x1a788f(0x2dc)+_0xe81247+'\x22.');let _0x2c8e1b=0x0;const _0x26763e=getWaveType(level),_0xdcacb6=_0x26763e===_0x1a788f(0x2f9)&&(_0x76bbdd===0x2||_0x76bbdd===0x3);if(_0xdcacb6){const _0x1c4e91=Math[_0x1a788f(0x291)](_0x138164/0x2);_0x138164%0x2===0x0?_0x2c8e1b=_0x1c4e91*_0x491744:_0x2c8e1b=_0x1c4e91*_0x491744+_0x2b32b9;}else _0x2c8e1b=_0x138164*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x261768=setTimeout(()=>{const _0x578812=_0x1a788f,_0x1cfecc=enemySpawnTimeouts[_0x578812(0x27f)](_0x261768);if(_0x1cfecc>-0x1)enemySpawnTimeouts[_0x578812(0x256)](_0x1cfecc,0x1);let _0x4d5bc0=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x4d5bc0=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x4d5bc0=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x4d5bc0||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x76bbdd]&&squadronCompletionStatus[_0x76bbdd][_0x578812(0x2ea)]++;return;}try{let _0xe046cb=_0x141959[_0x578812(0x243)],_0x1802d1=_0xe046cb===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x243c5c,_0x25ebdf;if(_0xe046cb===ENEMY1_TYPE)_0x243c5c=ENEMY1_WIDTH,_0x25ebdf=ENEMY1_HEIGHT;else _0xe046cb===ENEMY3_TYPE?(_0x243c5c=BOSS_WIDTH,_0x25ebdf=BOSS_HEIGHT):(_0x243c5c=ENEMY_WIDTH,_0x25ebdf=ENEMY_HEIGHT);let _0x386228=0x0,_0x15ab1a=0x0;if(_0x194cab&&_0x194cab[0x0]?.['p0'])_0x386228=_0x194cab[0x0]['p0']['x'],_0x15ab1a=_0x194cab[0x0]['p0']['y'];else throw new Error(_0x578812(0x27a)+_0xe81247);let _0x36ad39,_0x1cae82;try{const {x:_0x580022,y:_0x375b27}=getCurrentGridSlotPosition(_0x141959['gridRow'],_0x141959[_0x578812(0x25f)],_0x243c5c);_0x36ad39=_0x580022,_0x1cae82=_0x375b27;}catch(_0x1b4a1e){console[_0x578812(0x2eb)](_0x578812(0x23d)+_0x141959[_0x578812(0x243)]+_0x578812(0x2ff)+_0x141959[_0x578812(0x236)]+','+_0x141959[_0x578812(0x25f)]+']',_0x1b4a1e),_0x36ad39=gameCanvas?.[_0x578812(0x254)]/0x2||0xc8,_0x1cae82=ENEMY_TOP_MARGIN+_0x141959[_0x578812(0x236)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x143bb0=0x0;const _0x148116=_0xdcacb6,_0x1fcf58=_0x148116&&_0x138164%0x2!==0x0;_0x1fcf58?_0x143bb0=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x143bb0=-_0x138164*PATH_T_OFFSET_PER_ENEMY;const _0x13e70a={'x':_0x386228,'y':_0x15ab1a,'width':_0x243c5c,'height':_0x25ebdf,'targetGridX':_0x36ad39,'targetGridY':_0x1cae82,'speed':0x0,'state':_0x578812(0x32a),'gridRow':_0x141959[_0x578812(0x236)],'gridCol':_0x141959['gridCol'],'type':_0xe046cb,'health':_0x1802d1,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0xe81247,'pathSegmentIndex':0x0,'pathT':_0x143bb0,'squadronId':_0x76bbdd,'squadronEnemyIndex':_0x138164,'id':_0x578812(0x333)+_0x76bbdd+'-'+_0x138164+'-'+Date[_0x578812(0x1f5)]()+'-'+Math[_0x578812(0x2d1)]()[_0x578812(0x248)](0x24)[_0x578812(0x23b)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x578812(0x2c3),'hasCapturedShip':_0xe046cb===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0xe046cb===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1,'captureDiveInitiationTime':0x0};enemies['push'](_0x13e70a),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x76bbdd]&&squadronCompletionStatus[_0x76bbdd][_0x578812(0x2ea)]++;if(_0x138164===0x0){let _0x3abd4a=0x5dc;(_0x76bbdd===0x0||_0x76bbdd===0x1)&&(_0x3abd4a=0xfa);const _0x5a9c55=_0x13e70a['id'],_0x3fc061=setTimeout(()=>{const _0x54cd8e=_0x578812,_0xf00e00=enemySpawnTimeouts[_0x54cd8e(0x27f)](_0x3fc061);if(_0xf00e00>-0x1)enemySpawnTimeouts[_0x54cd8e(0x256)](_0xf00e00,0x1);let _0x33910c=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x33910c=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x33910c=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x33910c||isChallengingStage||isWaveTransitioning||isFullGridWave)return;fireFixedEnemyBurst(_0x5a9c55,null,0x0,0x3);},_0x3abd4a);enemySpawnTimeouts[_0x578812(0x1e7)](_0x3fc061);}}catch(_0x3fb90f){console[_0x578812(0x2eb)](_0x578812(0x207)+_0x76bbdd+_0x578812(0x277)+_0x138164+_0x578812(0x25d)+_0xe81247+'):',_0x3fb90f),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x76bbdd]&&squadronCompletionStatus[_0x76bbdd][_0x578812(0x2ea)]++;}},_0x2c8e1b);enemySpawnTimeouts['push'](_0x261768);});}catch(_0x15cb89){console[_0xee9b61(0x2eb)](_0xee9b61(0x2d7)+_0x76bbdd+'\x20(Path\x20'+_0xe81247+'):',_0x15cb89),_0x8f50ec?.[_0xee9b61(0x26d)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x8f50ec[_0xee9b61(0x26d)][_0xee9b61(0x2aa)],squadronCompletionStatus[_0x76bbdd]&&(squadronCompletionStatus[_0x76bbdd][_0xee9b61(0x2ea)]=squadronCompletionStatus[_0x76bbdd]['total']));}},_0x6e6e33);return enemySpawnTimeouts['push'](_0xe8a247),!![];};function scheduleEntranceFlightWave(){const _0x3344f3=_0x973987;if(isFullGridWave||isChallengingStage||!currentWaveDefinition||currentWaveDefinition[_0x3344f3(0x2aa)]===0x0){console[_0x3344f3(0x259)](_0x3344f3(0x2a3)+level+',\x20isFullGrid:\x20'+isFullGridWave+_0x3344f3(0x2cb)+isChallengingStage+_0x3344f3(0x286)+currentWaveDefinition?.[_0x3344f3(0x2aa)]),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x45ff0e=0x0,_0x3d9ffc=0x0;currentWaveDefinition[_0x3344f3(0x2ac)]((_0x3db946,_0x2f9d6a)=>{const _0x2aea2b=_0x3344f3;_0x3db946&&_0x3db946[_0x2aea2b(0x26d)]&&Array['isArray'](_0x3db946[_0x2aea2b(0x26d)])&&_0x3db946[_0x2aea2b(0x26d)][_0x2aea2b(0x2aa)]>0x0?(totalEnemiesScheduledForWave+=_0x3db946[_0x2aea2b(0x26d)][_0x2aea2b(0x2aa)],squadronCompletionStatus[_0x2f9d6a]={'completed':0x0,'total':_0x3db946['enemies'][_0x2aea2b(0x2aa)],'hasFiredPostLanding':![]},squadronEntranceFiringStatus[_0x2f9d6a]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x3db946,_0x2f9d6a,_0x45ff0e)&&_0x3d9ffc++,_0x45ff0e+=NORMAL_WAVE_SQUADRON_INTERVAL):console[_0x2aea2b(0x259)]('Entrance\x20Wave:\x20Squadron\x20'+_0x2f9d6a+_0x2aea2b(0x315));}),_0x3d9ffc===0x0&&totalEnemiesScheduledForWave===0x0?(console[_0x3344f3(0x259)](_0x3344f3(0x2f2)+level+_0x3344f3(0x2ae)),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![]):isEntrancePhaseActive=!![];}function startChallengingStageSequence(){const _0x46c57e=_0x973987;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts[_0x46c57e(0x2ac)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object[_0x46c57e(0x31b)](challengingStagePaths)[_0x46c57e(0x2aa)]===0x0&&defineChallengingStagePaths();if(Object['keys'](challengingStagePaths)[_0x46c57e(0x2aa)]===0x0){console[_0x46c57e(0x2eb)](_0x46c57e(0x27c)),isWaveTransitioning=!![],setTimeout(()=>{const _0x3ef724=_0x46c57e;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x3ef724(0x260)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x3ef724(0x30c)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x2b19e4=[_0x46c57e(0x2fc),_0x46c57e(0x1dd),_0x46c57e(0x26c),_0x46c57e(0x1ff)],_0x356135=[_0x46c57e(0x270),'CS_LoopAttack_TR',_0x46c57e(0x237),_0x46c57e(0x318)],_0x3f8e98=[..._0x2b19e4,..._0x356135];for(const _0x42f1cb of _0x3f8e98){if(!challengingStagePaths['hasOwnProperty'](_0x42f1cb)){console[_0x46c57e(0x2eb)]('CRITICAL:\x20Required\x20CS\x20path\x20\x22'+_0x42f1cb+_0x46c57e(0x1fc)),isWaveTransitioning=!![],setTimeout(()=>{const _0x116918=_0x46c57e;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x116918(0x260)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x116918(0x30c)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x122db1=[..._0x2b19e4],_0x17d08f=[..._0x356135]['sort'](()=>Math[_0x46c57e(0x2d1)]()-0.5);_0x122db1[_0x46c57e(0x1e7)](..._0x17d08f),currentWaveDefinition=[];for(let _0x51b801=0x0;_0x51b801<CHALLENGING_STAGE_SQUADRON_COUNT;_0x51b801++){const _0x4fefda=_0x122db1[_0x51b801],_0x3ea996={'pathId':_0x4fefda,'enemies':[]};for(let _0x23c03a=0x0;_0x23c03a<CHALLENGING_STAGE_SQUADRON_SIZE;_0x23c03a++){let _0x31c90c=_0x23c03a<Math[_0x46c57e(0x291)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x3ea996[_0x46c57e(0x26d)][_0x46c57e(0x1e7)]({'type':_0x31c90c,'entrancePathId':_0x4fefda});}currentWaveDefinition[_0x46c57e(0x1e7)](_0x3ea996);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0x46c57e(0x2aa)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x1fd5e1=0x0;const _0x4bfd87=-0x1c,_0xa3792e=Math['floor'](Math[_0x46c57e(0x269)](0x0,level-0x3)/0x4)+0x1,_0x316a19=scaleValue(_0xa3792e,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition[_0x46c57e(0x2ac)]((_0x372965,_0x4230bb)=>{let _0x3f216e=0x0;if(_0x4230bb<=0x1)_0x3f216e=0x0;else _0x4230bb<=0x3?_0x3f216e=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x3f216e=(_0x4230bb-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x33d501=_0x316a19;(_0x4230bb===0x2||_0x4230bb===0x3)&&(_0x33d501*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x438308=setTimeout(()=>{const _0x44d69c=_0x1121,_0x51cf54=enemySpawnTimeouts[_0x44d69c(0x27f)](_0x438308);if(_0x51cf54>-0x1)enemySpawnTimeouts['splice'](_0x51cf54,0x1);let _0x2b6f8b=![];isTwoPlayerMode&&selectedGameMode===_0x44d69c(0x260)?_0x2b6f8b=player1Lives>0x0||player2Lives>0x0:_0x2b6f8b=playerLives>0x0;if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&_0x2b6f8b)try{const _0x464b44=_0x372965[_0x44d69c(0x305)],_0x525508=challengingStagePaths,_0x4927b1=_0x525508[_0x464b44];if(!_0x4927b1||_0x4927b1[_0x44d69c(0x2aa)]===0x0){console[_0x44d69c(0x2eb)](_0x44d69c(0x21d)+_0x464b44+_0x44d69c(0x336)+_0x4230bb+_0x44d69c(0x30d)),enemiesSpawnedThisWave+=_0x372965['enemies'][_0x44d69c(0x2aa)];return;}let _0x3380f6=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x4230bb>=0x2&&_0x4230bb<=0x3)_0x3380f6=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x4230bb>=0x4&&(_0x3380f6=CS_LOOP_ATTACK_SPAWN_DELAY);_0x372965['enemies']['forEach']((_0x1f7406,_0x4f3b0c)=>{const _0x155047=_0x44d69c;if(!_0x1f7406||!_0x1f7406[_0x155047(0x243)]){console[_0x155047(0x2eb)](_0x155047(0x1e5)+_0x4230bb+',\x20index\x20'+_0x4f3b0c+_0x155047(0x23c)),enemiesSpawnedThisWave++;return;}const _0xa2e11b=_0x4f3b0c*_0x3380f6,_0x3cd7f8=setTimeout(()=>{const _0x1755aa=_0x155047,_0x12cb18=enemySpawnTimeouts['indexOf'](_0x3cd7f8);if(_0x12cb18>-0x1)enemySpawnTimeouts[_0x1755aa(0x256)](_0x12cb18,0x1);let _0x1e0eaf=![];isTwoPlayerMode&&selectedGameMode===_0x1755aa(0x260)?_0x1e0eaf=player1Lives>0x0||player2Lives>0x0:_0x1e0eaf=playerLives>0x0;if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||!_0x1e0eaf){enemiesSpawnedThisWave++;return;}try{let _0x52caf0=_0x1f7406['type'],_0x27506c=_0x52caf0===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x134b61,_0x13166f;if(_0x52caf0===ENEMY1_TYPE)_0x134b61=ENEMY1_WIDTH,_0x13166f=ENEMY1_HEIGHT;else _0x52caf0===ENEMY3_TYPE?(_0x134b61=BOSS_WIDTH,_0x13166f=BOSS_HEIGHT):(_0x134b61=ENEMY_WIDTH,_0x13166f=ENEMY_HEIGHT);let _0xd1f66b=0x0,_0x4a6354=0x0;if(_0x4927b1[0x0]?.['p0'])_0xd1f66b=_0x4927b1[0x0]['p0']['x'],_0x4a6354=_0x4927b1[0x0]['p0']['y'];else throw new Error(_0x1755aa(0x1f8)+_0x464b44);(_0x4230bb===0x0||_0x4230bb===0x1)&&(_0xd1f66b+=_0x4bfd87);const _0x222bf0=-_0x4f3b0c*PATH_T_OFFSET_PER_ENEMY,_0x59f346={'x':_0xd1f66b,'y':_0x4a6354,'width':_0x134b61,'height':_0x13166f,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x1755aa(0x23f),'gridRow':-0x1,'gridCol':-0x1,'type':_0x52caf0,'health':_0x27506c,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x464b44,'pathSegmentIndex':0x0,'pathT':_0x222bf0,'squadronId':_0x4230bb,'id':'enemy-cs-'+_0x4230bb+'-'+_0x4f3b0c+'-'+Date[_0x1755aa(0x1f5)]()+'-'+Math['random']()['toString'](0x24)[_0x1755aa(0x23b)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x1755aa(0x2c3),'hasCapturedShip':_0x52caf0===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x52caf0===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x33d501,'captureDiveInitiationTime':0x0};enemies[_0x1755aa(0x1e7)](_0x59f346),enemiesSpawnedThisWave++;}catch(_0xb6ae52){console[_0x1755aa(0x2eb)](_0x1755aa(0x2b6)+_0x4230bb+_0x1755aa(0x277)+_0x4f3b0c+_0x1755aa(0x25d)+_0x464b44+'):',_0xb6ae52),enemiesSpawnedThisWave++;}},_0xa2e11b);enemySpawnTimeouts[_0x155047(0x1e7)](_0x3cd7f8),_0x1fd5e1++;});}catch(_0x2f9313){console[_0x44d69c(0x2eb)](_0x44d69c(0x267)+_0x4230bb+':',_0x2f9313),enemiesSpawnedThisWave+=_0x372965['enemies'][_0x44d69c(0x2aa)];}else _0x372965?.[_0x44d69c(0x26d)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x372965[_0x44d69c(0x26d)][_0x44d69c(0x2aa)]);},_0x3f216e);enemySpawnTimeouts['push'](_0x438308);});}else console['warn'](_0x46c57e(0x326)),isWaveTransitioning=!![],setTimeout(()=>{const _0x3f5521=_0x46c57e;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x3f5521(0x260)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave==='function'&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x3c56c8,_0xf27bec,_0x136366){const _0x34d656=_0x973987;let _0x3bc0c2=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x3bc0c2=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x3bc0c2=playerLives>0x0&&!isShipCaptured;if(!_0x3c56c8||isPaused||!isInGameState||!_0x3bc0c2||isChallengingStage||isWaveTransitioning)return;const _0x403f7f=Math[_0x34d656(0x223)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x17d751=0x0;_0x17d751<_0x403f7f;_0x17d751++){const _0x1eeeca=_0x136366+_0x17d751*ENTRANCE_FIRE_BURST_DELAY_MS,_0x4a9ca8=setTimeout(()=>{const _0x51a46e=_0x34d656;try{const _0x3a4726=enemySpawnTimeouts[_0x51a46e(0x27f)](_0x4a9ca8);_0x3a4726>-0x1&&enemySpawnTimeouts['splice'](_0x3a4726,0x1);let _0x2a4f73=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x2a4f73=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x2a4f73=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x2a4f73||isChallengingStage||isWaveTransitioning)return;const _0x59e8f9=enemies[_0x51a46e(0x2df)](_0x257a92=>_0x257a92&&_0x257a92['id']===_0x3c56c8);_0x59e8f9&&_0x59e8f9['state']===_0xf27bec&&(createBulletSimple(_0x59e8f9)&&(_0x17d751===0x0&&playSound(_0x51a46e(0x23a),![],0.4),_0x59e8f9['lastFiredTime']=Date[_0x51a46e(0x1f5)]()));}catch(_0x1f47d3){console['error']('Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20'+(_0x17d751+0x1)+'/'+_0x403f7f+_0x51a46e(0x249)+_0x3c56c8+':',_0x1f47d3);}},_0x1eeeca);enemySpawnTimeouts[_0x34d656(0x1e7)](_0x4a9ca8);}}function fireFixedEnemyBurst(_0x1365e4,_0x42c89b,_0x3d102e,_0x341037){const _0x3fae9a=_0x973987;let _0x547180=![];isTwoPlayerMode&&selectedGameMode===_0x3fae9a(0x260)?_0x547180=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x547180=playerLives>0x0&&!isShipCaptured;if(!_0x1365e4||isPaused||!isInGameState||!_0x547180||isChallengingStage||isWaveTransitioning||_0x341037<=0x0)return;for(let _0x5c325c=0x0;_0x5c325c<_0x341037;_0x5c325c++){const _0x53c3e4=_0x3d102e+_0x5c325c*ENTRANCE_FIRE_BURST_DELAY_MS,_0x142b48=setTimeout(()=>{const _0x917b3=_0x3fae9a;try{const _0x12d8cb=enemySpawnTimeouts['indexOf'](_0x142b48);_0x12d8cb>-0x1&&enemySpawnTimeouts[_0x917b3(0x256)](_0x12d8cb,0x1);let _0x289c36=![];isTwoPlayerMode&&selectedGameMode===_0x917b3(0x260)?_0x289c36=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x289c36=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x289c36||isChallengingStage||isWaveTransitioning)return;const _0x38dd59=enemies[_0x917b3(0x2df)](_0x5821aa=>_0x5821aa&&_0x5821aa['id']===_0x1365e4);if(_0x38dd59)createBulletSimple(_0x38dd59)&&(_0x5c325c===0x0&&playSound(_0x917b3(0x23a),![],0.4),_0x38dd59[_0x917b3(0x275)]=Date['now']());else{}}catch(_0x251374){console['error'](_0x917b3(0x26b)+(_0x5c325c+0x1)+'/'+_0x341037+_0x917b3(0x249)+_0x1365e4+':',_0x251374);}},_0x53c3e4);enemySpawnTimeouts[_0x3fae9a(0x1e7)](_0x142b48);}}function startFullGridWave(){const _0x55f842=_0x973987;if(!currentWaveDefinition||currentWaveDefinition['length']===0x0||!isFullGridWave){console[_0x55f842(0x2eb)](_0x55f842(0x29d)),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(_0x55f842(0x2fd),![],0.4),enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x35756a=0x0;currentWaveDefinition['forEach']((_0x4e3fd5,_0x547b0c)=>{const _0x18108c=_0x55f842;let _0x4e76a8=0x0;_0x4e3fd5&&_0x4e3fd5[_0x18108c(0x26d)]&&Array['isArray'](_0x4e3fd5['enemies'])?(_0x4e76a8=_0x4e3fd5[_0x18108c(0x26d)][_0x18108c(0x2aa)],_0x4e3fd5[_0x18108c(0x26d)][_0x18108c(0x2ac)]((_0x492fb5,_0x59898b)=>{const _0x2b7ac5=_0x18108c;try{if(!_0x492fb5||!_0x492fb5['type']||typeof _0x492fb5[_0x2b7ac5(0x236)]==='undefined'||typeof _0x492fb5[_0x2b7ac5(0x25f)]==='undefined'){console[_0x2b7ac5(0x2eb)](_0x2b7ac5(0x21c)+_0x547b0c+_0x2b7ac5(0x2e2)+_0x59898b+_0x2b7ac5(0x23c));return;}let _0x228ea6=_0x492fb5[_0x2b7ac5(0x243)],_0x45160c=_0x228ea6===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0xc4a3dd,_0xf1ccf5;if(_0x228ea6===ENEMY1_TYPE)_0xc4a3dd=ENEMY1_WIDTH,_0xf1ccf5=ENEMY1_HEIGHT;else _0x228ea6===ENEMY3_TYPE?(_0xc4a3dd=BOSS_WIDTH,_0xf1ccf5=BOSS_HEIGHT):(_0xc4a3dd=ENEMY_WIDTH,_0xf1ccf5=ENEMY_HEIGHT);let _0x579de4,_0x407edb;try{const {x:_0x1add63,y:_0x2ca9a5}=getCurrentGridSlotPosition(_0x492fb5[_0x2b7ac5(0x236)],_0x492fb5['gridCol'],_0xc4a3dd);_0x579de4=_0x1add63,_0x407edb=_0x2ca9a5;}catch(_0x5e4518){console[_0x2b7ac5(0x2eb)](_0x2b7ac5(0x21a)+_0x492fb5[_0x2b7ac5(0x243)]+_0x2b7ac5(0x2ff)+_0x492fb5[_0x2b7ac5(0x236)]+','+_0x492fb5[_0x2b7ac5(0x25f)]+']',_0x5e4518),_0x579de4=gameCanvas?.[_0x2b7ac5(0x254)]/0x2||0xc8,_0x407edb=ENEMY_TOP_MARGIN+_0x492fb5['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x4d9a8a={'x':_0x579de4,'y':_0x407edb,'width':_0xc4a3dd,'height':_0xf1ccf5,'targetGridX':_0x579de4,'targetGridY':_0x407edb,'speed':0x0,'state':_0x2b7ac5(0x311),'gridRow':_0x492fb5[_0x2b7ac5(0x236)],'gridCol':_0x492fb5[_0x2b7ac5(0x25f)],'type':_0x228ea6,'health':_0x45160c,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x547b0c,'squadronEnemyIndex':_0x59898b,'id':_0x2b7ac5(0x25a)+_0x547b0c+'-'+_0x59898b+'-'+Date['now']()+'-'+Math[_0x2b7ac5(0x2d1)]()[_0x2b7ac5(0x248)](0x24)[_0x2b7ac5(0x23b)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x2b7ac5(0x2c3),'hasCapturedShip':_0x228ea6===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x228ea6===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1,'captureDiveInitiationTime':0x0};enemies['push'](_0x4d9a8a),_0x35756a++;}catch(_0x4a2a2b){console[_0x2b7ac5(0x2eb)](_0x2b7ac5(0x1d8)+_0x547b0c+_0x2b7ac5(0x277)+_0x59898b+'):',_0x4a2a2b);}})):console[_0x18108c(0x259)](_0x18108c(0x23e)+_0x547b0c+'\x20has\x20invalid\x20enemy\x20data.'),squadronCompletionStatus[_0x547b0c]={'completed':_0x4e76a8,'total':_0x4e76a8};}),totalEnemiesScheduledForWave=_0x35756a,enemiesSpawnedThisWave=_0x35756a,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0x55f842(0x2a9),!![],0.1)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date[_0x55f842(0x1f5)](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date[_0x55f842(0x1f5)](),firstEnemyLanded=!![];}function renderGame(){const _0x518062=_0x973987;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0x518062(0x1df)](0x0,0x0,gameCanvas[_0x518062(0x254)],gameCanvas[_0x518062(0x334)]);const _0x5b509d=Date[_0x518062(0x1f5)]();gameCtx[_0x518062(0x2d5)]();const _0x313192=_0x518062(0x32f),_0x1acaf5='red',_0x359924=_0x518062(0x29a);let _0xe24c49,_0x3cbee3,_0x8242e2,_0x27b140,_0x166ab7=![],_0x4f46b4=![],_0x18a10c=![];if(isShowingResultsScreen){}else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage){}else{if(isShowingPlayerGameOverMessage){}else{if(!isInGameState){}else{_0x8242e2=highScore||0x0;if(!isManualControl){}else{if(isTwoPlayerMode&&selectedGameMode==='coop'){_0xe24c49=player1Score,_0x3cbee3=player2Score,_0x8242e2=Math[_0x518062(0x269)](highScore,player1Score,player2Score),_0x27b140='1UP',_0x166ab7=!isShowingIntro&&!isPaused&&player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x4f46b4=!isShowingIntro&&!isPaused&&player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if(player1Score>=_0x8242e2&&player1Score>0x0)_0x18a10c=_0x166ab7;if(player2Score>=_0x8242e2&&player2Score>0x0&&player2Score>player1Score)_0x18a10c=_0x4f46b4;}else isTwoPlayerMode&&selectedGameMode===_0x518062(0x2c3)?(_0xe24c49=currentPlayer===0x1?score:player1Score,_0x3cbee3=currentPlayer===0x2?score:player2Score,_0x8242e2=Math['max'](highScore,player1Score,player2Score,score),_0x27b140='1UP',_0x166ab7=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x4f46b4=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x18a10c=!isPaused&&!isShowingIntro&&score>0x0&&_0x8242e2>0x0&&score>=_0x8242e2):(_0xe24c49=score,_0x3cbee3=0x0,_0x27b140=_0x518062(0x2fb));}}}}}let _0x4647ac=![];if(_0x18a10c){}typeof MARGIN_SIDE!==_0x518062(0x245)&&typeof MARGIN_TOP!==_0x518062(0x245)&&typeof SCORE_OFFSET_Y!==_0x518062(0x245)&&(drawTopUiElement(_0x27b140,_0xe24c49,_0x518062(0x26f),MARGIN_SIDE,_0x166ab7),drawTopUiElement(_0x518062(0x2c7),_0x8242e2,_0x518062(0x1e0),gameCanvas[_0x518062(0x254)]/0x2,_0x4647ac),drawTopUiElement(_0x518062(0x227),_0x3cbee3,_0x518062(0x257),gameCanvas[_0x518062(0x254)]-MARGIN_SIDE,_0x4f46b4));if(typeof shipImage!==_0x518062(0x245)&&typeof LIFE_ICON_MARGIN_BOTTOM!==_0x518062(0x245)&&typeof LIFE_ICON_SIZE!=='undefined'&&typeof LIFE_ICON_MARGIN_LEFT!=='undefined'&&typeof LIFE_ICON_SPACING!==_0x518062(0x245)){if(shipImage[_0x518062(0x215)]&&shipImage[_0x518062(0x276)]!==0x0){const _0x3f055b=gameCanvas['height']-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x569076=0x0,_0xf71c17=0x0;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(player1Lives>0x0)_0x569076=Math[_0x518062(0x269)](0x0,player1Lives-0x1);if(player2Lives>0x0)_0xf71c17=Math[_0x518062(0x269)](0x0,player2Lives-0x1);}else{if(playerLives>0x0)_0x569076=Math[_0x518062(0x269)](0x0,playerLives-0x1);}const _0x21b9ed=0x5;for(let _0x1258e5=0x0;_0x1258e5<Math[_0x518062(0x228)](_0x569076,_0x21b9ed);_0x1258e5++){const _0x543157=LIFE_ICON_MARGIN_LEFT+_0x1258e5*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx['drawImage'](shipImage,Math[_0x518062(0x223)](_0x543157),Math[_0x518062(0x223)](_0x3f055b),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}if(isTwoPlayerMode&&selectedGameMode===_0x518062(0x260)){const _0x3ed9fa=gameCanvas[_0x518062(0x254)]-LIFE_ICON_MARGIN_RIGHT-Math[_0x518062(0x228)](_0xf71c17,_0x21b9ed)*(LIFE_ICON_SIZE+LIFE_ICON_SPACING)+LIFE_ICON_SPACING;for(let _0x1a8483=0x0;_0x1a8483<Math['min'](_0xf71c17,_0x21b9ed);_0x1a8483++){const _0x15b590=_0x3ed9fa+_0x1a8483*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x518062(0x2fe)](shipImage,Math[_0x518062(0x223)](_0x15b590),Math[_0x518062(0x223)](_0x3f055b),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}}gameCtx[_0x518062(0x213)](),gameCtx[_0x518062(0x2d5)]();if(isTwoPlayerMode&&selectedGameMode===_0x518062(0x260)){if(ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured){let _0x3390f3=!![];if(isPlayer1Invincible){const _0x1ab2b3=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x5b509d%_0x1ab2b3>=INVINCIBILITY_BLINK_ON_MS)_0x3390f3=![];}if(_0x3390f3){const _0x710f85=ship1['x'],_0x3c16ac=ship1['y'];typeof shipImage!==_0x518062(0x245)&&shipImage[_0x518062(0x215)]?(gameCtx[_0x518062(0x2fe)](shipImage,Math[_0x518062(0x223)](_0x710f85),Math[_0x518062(0x223)](_0x3c16ac),ship1[_0x518062(0x254)],ship1[_0x518062(0x334)]),player1IsDualShipActive&&gameCtx[_0x518062(0x2fe)](shipImage,Math[_0x518062(0x223)](_0x710f85+DUAL_SHIP_OFFSET_X),Math['round'](_0x3c16ac),ship1[_0x518062(0x254)],ship1[_0x518062(0x334)])):(gameCtx['fillStyle']=_0x518062(0x2bf),gameCtx[_0x518062(0x288)](Math[_0x518062(0x223)](_0x710f85),Math[_0x518062(0x223)](_0x3c16ac),ship1[_0x518062(0x254)],ship1[_0x518062(0x334)]));}}if(ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured){let _0x2c93dc=!![];if(isPlayer2Invincible){const _0x127286=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x5b509d%_0x127286>=INVINCIBILITY_BLINK_ON_MS)_0x2c93dc=![];}if(_0x2c93dc){const _0x5932dc=ship2['x'],_0x4970bc=ship2['y'];typeof shipImage!==_0x518062(0x245)&&shipImage[_0x518062(0x215)]?(gameCtx[_0x518062(0x2fe)](shipImage,Math[_0x518062(0x223)](_0x5932dc),Math['round'](_0x4970bc),ship2[_0x518062(0x254)],ship2['height']),player2IsDualShipActive&&gameCtx[_0x518062(0x2fe)](shipImage,Math['round'](_0x5932dc+DUAL_SHIP_OFFSET_X),Math['round'](_0x4970bc),ship2[_0x518062(0x254)],ship2[_0x518062(0x334)])):(gameCtx[_0x518062(0x2b8)]='green',gameCtx[_0x518062(0x288)](Math[_0x518062(0x223)](_0x5932dc),Math[_0x518062(0x223)](_0x4970bc),ship2[_0x518062(0x254)],ship2[_0x518062(0x334)]));}}}else{if(ship&&!isShowingCaptureMessage){let _0x1f1ece=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x5b8c1a=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x5b509d%_0x5b8c1a>=INVINCIBILITY_BLINK_ON_MS)_0x1f1ece=![];}if(_0x1f1ece){let _0x5699de=ship['x'],_0x3aa6a4=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x3aa6a4&&(_0x5699de=Math[_0x518062(0x223)](gameCanvas['width']/0x2-ship['width']/0x2));const _0x49f237=ship['y'];typeof shipImage!==_0x518062(0x245)&&shipImage[_0x518062(0x215)]?(gameCtx[_0x518062(0x2fe)](shipImage,Math[_0x518062(0x223)](_0x5699de),Math[_0x518062(0x223)](_0x49f237),ship[_0x518062(0x254)],ship[_0x518062(0x334)]),isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&gameCtx[_0x518062(0x2fe)](shipImage,Math[_0x518062(0x223)](_0x5699de+DUAL_SHIP_OFFSET_X),Math[_0x518062(0x223)](_0x49f237),ship[_0x518062(0x254)],ship[_0x518062(0x334)])):(gameCtx[_0x518062(0x2b8)]=_0x518062(0x2bf),gameCtx[_0x518062(0x288)](Math[_0x518062(0x223)](_0x5699de),Math['round'](_0x49f237),ship['width'],ship[_0x518062(0x334)]));}}}if(fallingShips[_0x518062(0x2aa)]>0x0&&typeof shipImage!==_0x518062(0x245)&&shipImage[_0x518062(0x215)]){}gameCtx['restore']();if(!isInGameState){if(isShowingScoreScreen){}else{gameCtx[_0x518062(0x2d5)]();const _0x56f934=gameCanvas[_0x518062(0x254)],_0x196183=gameCanvas[_0x518062(0x334)],_0x36f535=_0x56f934/0x2;selectedButtonIndex===-0x1&&(isPlayerSelectMode||isFiringModeSelectMode||isGameModeSelectMode||!isPlayerSelectMode&&!isFiringModeSelectMode&&!isGameModeSelectMode)&&(selectedButtonIndex=0x0);let _0x2e974a=MENU_LOGO_APPROX_HEIGHT,_0x2924d1=_0x2e974a*(logoImage[_0x518062(0x2a6)]/logoImage['naturalHeight']||0x1);typeof logoImage!==_0x518062(0x245)&&logoImage[_0x518062(0x215)]&&logoImage[_0x518062(0x276)]!==0x0&&(_0x2e974a=logoImage[_0x518062(0x276)]*LOGO_SCALE_FACTOR,_0x2924d1=logoImage[_0x518062(0x2a6)]*LOGO_SCALE_FACTOR);const _0x2b2d3d=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0xd10a07=_0x2e974a+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x2b2d3d;let _0x176520=(_0x196183-_0xd10a07)/0x2-0x46;_0x176520+=MENU_GENERAL_Y_OFFSET;const _0x2ea79b=_0x36f535-_0x2924d1/0x2,_0xd1b8a1=_0x176520+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!==_0x518062(0x245)&&logoImage[_0x518062(0x215)]&&logoImage['naturalHeight']!==0x0?gameCtx[_0x518062(0x2fe)](logoImage,Math[_0x518062(0x223)](_0x2ea79b),Math[_0x518062(0x223)](_0xd1b8a1),_0x2924d1,_0x2e974a):drawCanvasText(_0x518062(0x2af),_0x36f535,_0xd1b8a1+_0x2e974a/0x2,'30px\x20Arial',_0x518062(0x2d0));if(isGameModeSelectMode)drawCanvasButton(_0x518062(0x217),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x518062(0x2c2),0x1,selectedButtonIndex===0x1);else{if(isFiringModeSelectMode)drawCanvasButton(_0x518062(0x2de),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x518062(0x1e3),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton('1\x20PLAYER',0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x518062(0x302),0x1,selectedButtonIndex===0x1)):(drawCanvasButton(_0x518062(0x21b),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x518062(0x319),0x1,selectedButtonIndex===0x1));}const _0x22de2e=getMenuButtonRect(0x1);let _0x2cc879;_0x22de2e?_0x2cc879=_0x22de2e['y']+_0x22de2e['height']+MENU_BUTTON_SUBTITLE_V_GAP+_0x2b2d3d/0x2:_0x2cc879=_0x176520+_0x2e974a+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x2b2d3d/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x36f535-0x1,Math[_0x518062(0x223)](_0x2cc879),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0x518062(0x1e0),_0x518062(0x26e),!![]),gameCtx[_0x518062(0x213)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0x518062(0x2d5)]();let _0x5325db=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x5325db&&(bullets[_0x518062(0x2ac)](_0x52a06f=>{}),enemyBullets[_0x518062(0x2ac)](_0x261b7c=>{}));enemies[_0x518062(0x2ac)](_0x36ef7b=>{});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x168cb0=![];const _0x1487f2=gameCanvas[_0x518062(0x334)]/0x2;if(isPaused){}else{if(isShowingCaptureMessage){}}gameCtx[_0x518062(0x213)]();}else{if(isShowingPlayerGameOverMessage){}else{if(gameOverSequenceStartTime>0x0){}}}}}catch(_0x4dc963){console[_0x518062(0x2eb)](_0x518062(0x24b),_0x4dc963,_0x4dc963['stack']);}}function handleEnemyHit(_0x580a12,_0x34e294=null){const _0x244b37=_0x973987;if(!_0x580a12)return{'destroyed':![],'pointsAwarded':0x0};const _0x86c53e=Date[_0x244b37(0x1f5)]();let _0x57e605=0x0,_0x2ada3e=![],_0x241fc7=_0x580a12[_0x244b37(0x2e4)],_0x3ffcf3=null,_0x32ae3d=0x1;const _0x429445=_0x580a12['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x580a12[_0x244b37(0x243)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x1af292=_0x580a12[_0x244b37(0x243)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x580a12[_0x244b37(0x243)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x38d903=_0x580a12['type']===ENEMY3_TYPE&&_0x580a12[_0x244b37(0x301)],_0x72e10d=_0x580a12[_0x244b37(0x243)]===ENEMY3_TYPE&&_0x580a12[_0x244b37(0x2d2)];let _0x1a33df=![],_0x296189=null;if(_0x38d903){if(isTwoPlayerMode&&selectedGameMode===_0x244b37(0x260)){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x580a12['id'])_0x1a33df=!![],_0x296189='player1';else isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x580a12['id']&&(_0x1a33df=!![],_0x296189=_0x244b37(0x24c));}else!isTwoPlayerMode&&isShipCaptured&&capturedBossIdWithMessage===_0x580a12['id']&&(_0x1a33df=!![]);}const _0x6f3073=_0x580a12['x']+_0x429445/0x2,_0x3091fc=_0x580a12['y']+_0x1af292*0.2;createHitSparks(_0x6f3073,_0x3091fc),_0x580a12[_0x244b37(0x2c8)]--;_0x580a12[_0x244b37(0x243)]===ENEMY3_TYPE&&(_0x580a12['isDamaged']=_0x580a12[_0x244b37(0x2c8)]<ENEMY3_MAX_HITS);if(_0x580a12[_0x244b37(0x2c8)]<=0x0){_0x2ada3e=!![];isChallengingStage&&challengingStageEnemiesHit++;if(_0x38d903&&_0x72e10d){let _0x3f122d=null;if(_0x1a33df&&_0x296189)_0x3f122d=_0x296189;else{let _0x56c486=![];if(isCoopAIDemoActive){if(_0x34e294===_0x244b37(0x2a5)&&player1IsDualShipActive)_0x3f122d=_0x244b37(0x24c),_0x56c486=!![];else _0x34e294==='player2'&&player2IsDualShipActive&&(_0x3f122d=_0x244b37(0x2a5),_0x56c486=!![]);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x244b37(0x208)){if(_0x34e294===_0x244b37(0x1ea)&&player2IsDualShipActive)_0x3f122d=_0x244b37(0x2a5),_0x56c486=!![];else _0x34e294==='player1'&&player1IsDualShipActive&&(_0x3f122d=_0x244b37(0x1ea),_0x56c486=!![]);}}!_0x56c486&&(_0x3f122d=_0x34e294);}_0x3f122d===null&&_0x34e294&&(_0x3f122d=_0x34e294);if(_0x580a12[_0x244b37(0x2d2)]){const _0x3323a0=_0x580a12[_0x244b37(0x2d2)][_0x244b37(0x254)],_0x8f5adc=_0x580a12[_0x244b37(0x2d2)]['height'],_0x3f82ab=_0x580a12['x']+(_0x429445-_0x3323a0)/0x2+CAPTURED_SHIP_OFFSET_X,_0x538378=_0x580a12['y']+CAPTURED_SHIP_OFFSET_Y,_0x52bf2f=fallingShips['some'](_0x321f0d=>Math[_0x244b37(0x2a7)](_0x321f0d['x']-_0x3f82ab)<0x1&&Math['abs'](_0x321f0d['y']-_0x538378)<0x1);!_0x52bf2f&&fallingShips[_0x244b37(0x1e7)]({'x':_0x3f82ab,'y':_0x538378,'width':_0x3323a0,'height':_0x8f5adc,'creationTime':_0x86c53e,'tintProgress':0x1,'rotation':0x0,'rotationDirection':Math['random']()<0.5?-0x1:0x1,'totalRotation':0x0,'rotationCompleted':![],'targetPlayerId':_0x3f122d});}else console[_0x244b37(0x2eb)](_0x244b37(0x209));_0x580a12[_0x244b37(0x301)]=![],_0x580a12[_0x244b37(0x2d2)]=null;}else _0x38d903&&!_0x72e10d&&(console[_0x244b37(0x2eb)](_0x244b37(0x2cf)+_0x580a12['id']+'\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.'),_0x580a12[_0x244b37(0x301)]=![],_0x580a12[_0x244b37(0x2d2)]=null);if(isChallengingStage){let _0x565efb=0x64;const _0x504384=csLastHitTime;csLastHitTime=_0x86c53e,csLastChainHitPosition={'x':_0x580a12['x'],'y':_0x580a12['y']},csCurrentChainHits>0x0&&_0x86c53e-_0x504384<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x565efb*=0x2),_0x57e605=_0x565efb,csCurrentChainScore+=_0x57e605,scoreEarnedThisCS+=_0x57e605,_0x3ffcf3=_0x244b37(0x2e6),_0x32ae3d=0.4;}else{if(_0x580a12[_0x244b37(0x251)]===_0x244b37(0x311))_0x57e605=_0x580a12[_0x244b37(0x243)]===ENEMY1_TYPE?0x32:_0x580a12[_0x244b37(0x243)]===ENEMY2_TYPE?0x50:0x0,_0x580a12[_0x244b37(0x243)]===ENEMY3_TYPE&&(_0x57e605=0x96),_0x3ffcf3=_0x244b37(0x2e6),_0x32ae3d=0.4;else{_0x57e605=_0x580a12[_0x244b37(0x243)]===ENEMY1_TYPE?0x64:_0x580a12[_0x244b37(0x243)]===ENEMY2_TYPE?0xa0:0x0;if(_0x580a12[_0x244b37(0x243)]===ENEMY3_TYPE){if(_0x38d903){const _0x5313c2=[0x3e8,0x5dc,0x7d0,0xbb8];_0x57e605=_0x5313c2[Math[_0x244b37(0x291)](Math['random']()*_0x5313c2[_0x244b37(0x2aa)])],_0x3ffcf3=_0x244b37(0x274),_0x32ae3d=0.4;}else _0x241fc7?(_0x57e605=0x190,_0x3ffcf3=_0x244b37(0x274),_0x32ae3d=0.4):(_0x57e605=0x0,console[_0x244b37(0x259)](_0x244b37(0x1e2)+_0x57e605+_0x244b37(0x28a)+(_0x580a12[_0x244b37(0x2c8)]+0x1)),_0x3ffcf3='explosionSound',_0x32ae3d=0.4);}else _0x3ffcf3='explosionSound',_0x32ae3d=0.4;if(_0x2ada3e&&_0x57e605>0x0){const _0x428bc4=normalWaveLastHitTime;normalWaveLastHitTime=_0x86c53e,normalWaveLastChainHitPosition={'x':_0x580a12['x'],'y':_0x580a12['y']};normalWaveLastChainHitPosition&&_0x86c53e-_0x428bc4<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0xbe07a3=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x2a9978=Math['min'](_0xbe07a3['length']-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x149635=_0xbe07a3[_0x2a9978];_0x57e605+=_0x149635,normalWaveCurrentChainScore+=_0x149635;}}}}if(_0x57e605>0x0){let _0x24e238=null,_0x5b62ca=0x0,_0x1f7ff1=_0x34e294,_0x1cb243=highScore,_0x32cdcc=highScoreHolderId,_0x31f3c6=![],_0x1f8da5=![];if(isCoopAIDemoActive){if(_0x34e294===_0x244b37(0x2a5)){player1Score+=_0x57e605,_0x5b62ca=player1Score,_0x24e238=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId='player1',_0x31f3c6=!![],_0x1f8da5=!![];else player1Score===highScore&&highScoreHolderId!=='player1'&&highScore>0x0&&(highScoreHolderId='player1',_0x31f3c6=!![],_0x1f8da5=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x34e294===_0x244b37(0x24c)){player2Score+=_0x57e605,_0x5b62ca=player2Score,_0x24e238=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x244b37(0x24c),_0x31f3c6=!![],_0x1f8da5=!![];else player2Score===highScore&&highScoreHolderId!==_0x244b37(0x24c)&&highScore>0x0&&(highScoreHolderId=_0x244b37(0x24c),_0x31f3c6=!![],_0x1f8da5=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x57e605,_0x5b62ca=player1Score,_0x24e238=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId='player1',_0x1f8da5=!![]),checkAndAwardExtraLife(0x1);}}else{if(!isManualControl){score+=_0x57e605,player1Score=score,_0x5b62ca=score,_0x1f7ff1='player1',_0x24e238=()=>player1EnemiesHit++;if(score>highScore)highScore=score,highScoreHolderId=_0x244b37(0x2a5),_0x31f3c6=!![],_0x1f8da5=!![];else score===highScore&&highScoreHolderId!=='player1'&&highScore>0x0&&(highScoreHolderId=_0x244b37(0x2a5),_0x31f3c6=!![],_0x1f8da5=!![]);checkAndAwardExtraLife(0x1);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x34e294===_0x244b37(0x2a5)){player1Score+=_0x57e605,_0x5b62ca=player1Score,_0x24e238=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x244b37(0x2a5),_0x31f3c6=!![],_0x1f8da5=!![];else player1Score===highScore&&highScoreHolderId!=='player1'&&highScore>0x0&&(highScoreHolderId=_0x244b37(0x2a5),_0x31f3c6=!![],_0x1f8da5=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x34e294===_0x244b37(0x1ea)){player2Score+=_0x57e605,_0x5b62ca=player2Score,_0x1f7ff1=_0x244b37(0x1ea),_0x24e238=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x244b37(0x1ea),_0x31f3c6=!![],_0x1f8da5=!![];else player2Score===highScore&&highScoreHolderId!==_0x244b37(0x1ea)&&highScore>0x0&&(highScoreHolderId='ai_p2',_0x31f3c6=!![],_0x1f8da5=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x57e605,_0x5b62ca=player1Score,_0x24e238=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId=_0x244b37(0x2a5),_0x1f8da5=!![]),checkAndAwardExtraLife(0x1);}}else{if(isTwoPlayerMode&&selectedGameMode===_0x244b37(0x260)){if(_0x34e294==='player1'){player1Score+=_0x57e605,_0x5b62ca=player1Score,_0x24e238=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x244b37(0x2a5),_0x31f3c6=!![],_0x1f8da5=!![];else player1Score===highScore&&highScoreHolderId!==_0x244b37(0x2a5)&&highScore>0x0&&(highScoreHolderId=_0x244b37(0x2a5),_0x31f3c6=!![],_0x1f8da5=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x34e294===_0x244b37(0x24c)){player2Score+=_0x57e605,_0x5b62ca=player2Score,_0x24e238=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId='player2',_0x31f3c6=!![],_0x1f8da5=!![];else player2Score===highScore&&highScoreHolderId!=='player2'&&highScore>0x0&&(highScoreHolderId=_0x244b37(0x24c),_0x31f3c6=!![],_0x1f8da5=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x57e605,_0x5b62ca=player1Score,_0x24e238=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId=_0x244b37(0x2a5),_0x1f8da5=!![]),checkAndAwardExtraLife(0x1);}}else{score+=_0x57e605,_0x5b62ca=score;currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,_0x1f7ff1='player1',_0x24e238=()=>player1EnemiesHit++):(player2Score=score,_0x1f7ff1=isPlayerTwoAI?_0x244b37(0x1ea):_0x244b37(0x24c),_0x24e238=()=>player2EnemiesHit++);if(score>highScore)highScore=score,highScoreHolderId=_0x1f7ff1,_0x31f3c6=!![],_0x1f8da5=!![];else score===highScore&&highScoreHolderId!==_0x1f7ff1&&highScore>0x0&&(highScoreHolderId=_0x1f7ff1,_0x31f3c6=!![],_0x1f8da5=!![]);checkAndAwardExtraLife(currentPlayer);}}}}if(_0x31f3c6||_0x1f8da5&&_0x1cb243>0x0&&highScoreHolderId!==_0x32cdcc){let _0x39b675=![];if(highScoreHolderId===_0x244b37(0x2a5))_0x39b675=player1TriggeredHighScoreSound;else{if(highScoreHolderId===_0x244b37(0x24c)||highScoreHolderId===_0x244b37(0x1ea))_0x39b675=player2TriggeredHighScoreSound;}if(!_0x39b675||highScoreHolderId!==_0x32cdcc&&_0x1cb243>0x0){playSound(_0x244b37(0x2b3),![],0.2);if(highScoreHolderId===_0x244b37(0x2a5))player1TriggeredHighScoreSound=!![];else{if(highScoreHolderId===_0x244b37(0x24c)||highScoreHolderId===_0x244b37(0x1ea))player2TriggeredHighScoreSound=!![];}}}if(_0x1f8da5&&highScoreHolderId!==_0x32cdcc&&_0x1cb243>0x0){if(_0x32cdcc==='player1')player1TriggeredHighScoreSound=![];else{if(_0x32cdcc===_0x244b37(0x24c)||_0x32cdcc===_0x244b37(0x1ea))player2TriggeredHighScoreSound=![];}}_0x24e238&&!isChallengingStage&&_0x24e238();const _0x38999a=_0x580a12['state']===_0x244b37(0x311)||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x244b37(0x1e7)]({'text':_0x57e605[_0x244b37(0x248)](),'x':_0x580a12['x']+_0x429445/0x2,'y':_0x580a12['y'],'color':_0x38999a,'creationTime':_0x86c53e,'displayStartTime':_0x86c53e+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x580a12['x']+_0x429445/0x2,_0x580a12['y']+_0x1af292/0x2);_0x580a12['id']===capturingBossId&&stopSound(_0x244b37(0x282));if(_0x580a12[_0x244b37(0x251)]===_0x244b37(0x2b4)||_0x580a12[_0x244b37(0x251)]===_0x244b37(0x32a)||_0x580a12['state']===_0x244b37(0x2ee)||_0x580a12['state']===_0x244b37(0x23f)||_0x580a12['state']==='returning'||_0x580a12[_0x244b37(0x251)]==='showing_capture_message'){if(_0x580a12[_0x244b37(0x243)]===ENEMY3_TYPE)stopSound(_0x244b37(0x2a4));else stopSound('butterflyDiveSound');}}else{_0x2ada3e=![];if(_0x580a12[_0x244b37(0x243)]===ENEMY3_TYPE)_0x3ffcf3=_0x244b37(0x1f0),_0x32ae3d=0.6,_0x57e605=0x0;else{_0x57e605=0x0;if(_0x580a12[_0x244b37(0x243)]===ENEMY1_TYPE)_0x3ffcf3=_0x244b37(0x22a),_0x32ae3d=0.3;else _0x580a12[_0x244b37(0x243)]===ENEMY2_TYPE&&(_0x3ffcf3=_0x244b37(0x1da),_0x32ae3d=0.3);}}return _0x3ffcf3&&playSound(_0x3ffcf3,![],_0x32ae3d),{'destroyed':_0x2ada3e,'pointsAwarded':_0x57e605};}function _0x1121(_0x55766e,_0x3bd0db){const _0xb0d871=_0xb0d8();return _0x1121=function(_0x1121fc,_0x1fc319){_0x1121fc=_0x1121fc-0x1d6;let _0x4ecd3e=_0xb0d871[_0x1121fc];return _0x4ecd3e;},_0x1121(_0x55766e,_0x3bd0db);}function createHitSparks(_0x47c202,_0x582444){const _0x450c45=_0x973987;if(!gameCtx)return;const _0x5d8c18=Date['now']();for(let _0xe7ae39=0x0;_0xe7ae39<HIT_SPARK_COUNT;_0xe7ae39++){const _0x46e68a=Math[_0x450c45(0x2d1)]()*Math['PI']*0x2,_0x827d23=HIT_SPARK_SPEED*(0.7+Math[_0x450c45(0x2d1)]()*0.6),_0x4b1a0a=HIT_SPARK_LIFETIME*(0.8+Math[_0x450c45(0x2d1)]()*0.4);hitSparks['push']({'x':_0x47c202,'y':_0x582444,'vx':Math[_0x450c45(0x2c6)](_0x46e68a)*_0x827d23,'vy':Math[_0x450c45(0x2b7)](_0x46e68a)*_0x827d23,'creationTime':_0x5d8c18,'lifetime':_0x4b1a0a,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function _0xb0d8(){const _0x14d1e1=['capturedShipDimensions','Error\x20cloning\x20entrance\x20flight\x202\x20wave\x20pattern:','\x20for\x20SHARED\x20path\x20','save','1P_VS_AI_NORMAL','Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20','targetEnemyForAI','NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20','parse','diveStartTime','\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22',')!\x20Returning.','EASY','find','isPreparingForImmediateCapture','particles',',\x20index\x20','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','isDamaged','csPerfectSound','explosionSound','buttons','entrancePathId','capturePrepareTimeout','completed','error','\x20returning\x20without\x20target\x20coords.\x20Recalculating.','\x20in\x20returning','diving_to_capture_position','tripleAttackSound','sqrt','entrance_flight_1','Entrance\x20Wave:\x20No\x20squadrons\x20or\x20enemies\x20scheduled\x20for\x20level\x20','stopAllGameSounds','landedTime','speed','rotationCompleted','stack','1830917lUBvyD','entrance_flight_2','stringify','1UP','CS3_DiveLoopL_Sharp','entranceSound','drawImage','\x20at\x20[','shipObj','hasCapturedShip','2\x20PLAYER','hasFiredPostLanding','targetPlayerId','pathId','chosenDodgeDir',').\x20Skipping.','Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22','25788HOumLo','\x20(state:\x20','Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20','function','\x20invalid!\x20Skipping.','newButtonStates','Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20','playerNum','in_grid','.\x20Removing.','Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20','slice','\x20is\x20empty\x20or\x20invalid.','landed','[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','CS_LoopAttack_BR','GAME\x20EXIT','shouldTryShoot','keys','duration','getGamepads','attackGroupId','resetAllMessages',')\x20during\x20shift:','attackFormationOffsetX','some','targetGridX','\x20in\x20moving_to_grid','\x20after\x20missing\x20path','CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.','\x20(invalid\x20attack\x20segment):','\x20attacking\x20without\x20path!\x20Returning.','getWaveType','following_entrance_path','attackType','captureAnimationRotation','FATAL\x20Error\x20in\x20moveEntities:','rotationDirection','20px\x20\x27Press\x20Start\x202P\x27','\x20attacking,\x20index\x20','Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20','327grDgSL','enemy-entr-','height','\x20after\x20bezier\x20error','\x20for\x20squadron\x20','targetX','resetGame','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','currentLives','butterflyHitSound','\x20after\x20bad\x20next\x20segment','resetWave','CS3_DiveLoopR_Sharp','playerShootSound','clearRect','center','initialCaptureAnimationY','[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20','NORMAL','levelUpSound','CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','push','135022YLmeuQ','Invalid\x20CS\x20Bezier\x20segment\x20','ai_p2','justReturned','\x20not\x20found.','generateAttackPath','moving_to_grid','back','bossHit1Sound','velocityX','returnLogDone','\x20off\x20screen:','add','now','sign','number','Invalid\x20start\x20segment\x20for\x20path\x20','creationTime','full_grid','Error\x20cloning\x20entrance\x20flight\x201\x20wave\x20pattern:','\x22\x20not\x20found!\x20Aborting\x20CS.','Error\x20in\x20triggerImmediateCaptureDive:','2264eQnvxg','CS_HorizontalFlyByR','sort','predictedCollisions','destroyed','[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','\x20after\x20NaN','boss_loop_left','pathSegmentIndex','Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','1P_VS_AI_COOP','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!','thresholdsMet','string','desiredTargetX','Error\x20updating\x20floating\x20scores:','num','Enemy\x20','lifetime','gameOverSound','Invalid\x20next\x20CS\x20Bezier\x20segment\x20','restore','),\x20index\x20','complete','attackPathSegmentIndex','NORMAL\x20GAME','switch_player','[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20','Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20','START\x20GAME','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','CS:\x20Path\x20','totalRotation','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','currentScore','highScoreHolderId','\x20(no\x20attack\x20path):','round','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20','challenging_stage','Error\x20checking/awarding\x20extra\x20life:','2UP','min','19134jSWFLB','beeHitSound','butterflyDiveSound','Error\x20handling\x20player\x20input:','Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20','tintProgress','dir','main','Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20','scheduledStartTime','10QPEOsy','unshift','targetY','gridRow','CS_LoopAttack_BL','unknown','lostLifeSound','enemyShootSound','substring','.\x20Skipping.','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','Full\x20Grid:\x20Squadron\x20','following_bezier_path','\x20out\x20of\x20bounds\x20(','isFromAbove','isArray','type','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','undefined','NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20','\x20at\x20end\x20of\x20normal\x20path\x20','toString',')\x20for\x20','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','Error\x20in\x20renderGame:','player2','every','minDistance','alpha','.\x20Switching\x20to\x20moving_to_grid.','state','resultsMusicSound','csClearSound','width','shoot','splice','right','capturedShipY','warn','enemy-grid-','captureMessageStartTime','isDodging',',\x20Path\x20',',\x20isFullGrid:\x20','gridCol','coop','dualShipSound','\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.','Error\x20in\x20aiControl:','866976mJPpCT','shipCapturedSound','!\x20Returning.','CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20','clear','max','FATAL\x20Error\x20in\x20moveEntities\x20(Restored\x20Conditions):','Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20','CS_HorizontalFlyByL','enemies','middle','left','CS_LoopAttack_TL','\x20after\x20bad\x20segment','Error\x20calculating\x20final\x20bezier\x20point\x20for\x20','367265TGDlqJ','bossHit2Sound','lastFiredTime','naturalHeight',',\x20Idx\x20','playerShip','\x20for\x20path\x20','Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20','pathT','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','CRITICAL:\x20Entrance\x20flight\x201\x20wave\x20pattern\x20(index\x200)\x20is\x20missing\x20or\x20empty.','attackPathSegments','indexOf','object','\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20','captureSound','pressed','\x20after\x20attack:','\x20missing\x20SHARED\x20path\x20',',\x20def\x20length:\x20','startSound','fillRect','pause','\x20points.\x20Health\x20was:\x20','\x20after\x20invalid\x20path\x20index','Invalid\x20next\x20Normal\x20Bezier\x20segment\x20','CRITICAL:\x20Full\x20grid\x20wave\x20pattern\x20(index\x200)\x20is\x20missing\x20or\x20empty.','rotation','captureStartTime','squadronEnemyIndex','floor','has','preparing_capture','includes','targetGridY','.\x20Enemy\x20','Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:','preparing_attack','captureDiveInitiationTime','white','\x20path\x20index\x20','capturing','Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.','waveUpSound','single','Error\x20during\x20post-landing\x20fire\x20for\x20','canFireThisDive','\x20attacking,\x20invalid\x20segment\x20','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20or\x20with\x20no\x20definition.\x20Level\x20','bossGalagaDiveSound','player1','naturalWidth','abs','\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.','gridBackgroundSound','length','Error\x20getting\x20target\x20grid\x20pos\x20for\x20','forEach','total','.\x20Transitioning.','LOGO','returning','Error\x20in\x20triggerGridFiring:','capturedShipX','hiScoreSound','attacking','rapid','CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','sin','fillStyle','453964lSxHDg','dual','originalVy','Unknown\x20wave\x20type\x20for\x20level\x20','squadronId','getBoundingClientRect','blue','collisions','showing_capture_message','CO-OP\x20GAME','normal','Error\x20getting\x20grid\x20pos\x20for\x20','attackPathT','cos','HIGH\x20SCORE','health','velocityY','CRITICAL:\x20Entrance\x20flight\x202\x20wave\x20pattern\x20(index\x201)\x20is\x20missing\x20or\x20empty.',',\x20isCS:\x20','72PbuZgU','filter','show_results','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20','grey','random'];_0xb0d8=function(){return _0x14d1e1;};return _0xb0d8();}function updateHitSparks(){const _0x48f1d0=_0x973987,_0x561f09=Date[_0x48f1d0(0x1f5)]();for(let _0x23dce5=hitSparks[_0x48f1d0(0x2aa)]-0x1;_0x23dce5>=0x0;_0x23dce5--){const _0x5d4a9d=hitSparks[_0x23dce5],_0x114d45=_0x561f09-_0x5d4a9d[_0x48f1d0(0x1f9)];_0x114d45>=_0x5d4a9d[_0x48f1d0(0x210)]?hitSparks[_0x48f1d0(0x256)](_0x23dce5,0x1):(_0x5d4a9d['vy']+=HIT_SPARK_GRAVITY,_0x5d4a9d['x']+=_0x5d4a9d['vx'],_0x5d4a9d['y']+=_0x5d4a9d['vy'],_0x5d4a9d['alpha']=Math[_0x48f1d0(0x269)](0x0,0x1-_0x114d45*HIT_SPARK_FADE_SPEED));}}function moveEntities(){const _0x48893c=_0x973987;try{if(isPaused)return;const _0x1eacf0=Date[_0x48893c(0x1f5)]();}catch(_0x2b8465){console[_0x48893c(0x2eb)](_0x48893c(0x26a),_0x2b8465,_0x2b8465[_0x48893c(0x2f7)]),isGridSoundPlaying=![],stopSound(_0x48893c(0x2a9)),isEntrancePhaseActive=![],stopSound(_0x48893c(0x2fd)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x48893c(0x282)),stopSound('shipCapturedSound'),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x48893c(0x30c))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x48893c(0x2e3));}}function switchPlayerTurn(){const _0x322e04=_0x973987;if(!isTwoPlayerMode||selectedGameMode===_0x322e04(0x260))return![];currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive,player1MaxLevelReached=Math['max'](player1MaxLevelReached,level)):(player2Score=score,player2IsDualShipActive=isDualShipActive,player2MaxLevelReached=Math[_0x322e04(0x269)](player2MaxLevelReached,level));const _0x2530b4=currentPlayer===0x1?0x2:0x1,_0x2b4e62=_0x2530b4===0x1?player1Lives:player2Lives;if(_0x2b4e62<=0x0){const _0x445d3c=currentPlayer===0x1?player1Lives:player2Lives;return _0x445d3c<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x2530b4,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0x51edb4=null,_0x1915d0=![]){const _0x3a33b6=_0x973987,_0x186ed9=Date[_0x3a33b6(0x1f5)](),_0x4b77ff=isTwoPlayerMode&&selectedGameMode===_0x3a33b6(0x260)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x186ed9<coopPlayersReadyStartTime+0x1f40;if(_0x4b77ff){if(_0x51edb4==='player1'&&!_0x1915d0)return![];if(_0x51edb4===_0x3a33b6(0x1ea)&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a33b6(0x208))return![];}let _0x5b63a2=![],_0x291859=null,_0x3bd18c=![],_0x864396=0x0,_0x3358d6=_0x42078f=>{},_0x182f2a=_0x2da65f=>{},_0x56d254=![],_0x58e39b=()=>![],_0x3a11fb=_0x5a9905=>{},_0x42dc39=_0x51edb4;const _0x5b1e42=!isPaused&&isInGameState&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!showReadyMessage&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x3a33b6(0x260)&&(_0x51edb4===_0x3a33b6(0x2a5)&&isPlayer1ShowingGameOverMessage||_0x51edb4===_0x3a33b6(0x24c)&&isPlayer2ShowingGameOverMessage||_0x51edb4===_0x3a33b6(0x1ea)&&isPlayer2ShowingGameOverMessage));if(!_0x5b1e42)return![];if(_0x42dc39){let _0x1b2a76=![];if(_0x42dc39==='ai'&&isShipCaptured)_0x1b2a76=!![];else{if(_0x42dc39===_0x3a33b6(0x1ea)&&isTwoPlayerMode&&selectedGameMode==='normal'&&isShipCaptured)_0x1b2a76=!![];else{if(_0x42dc39===_0x3a33b6(0x2a5)&&isCoopAIDemoActive&&isPlayer1ShipCaptured)_0x1b2a76=!![];else{if(_0x42dc39==='player2'&&isCoopAIDemoActive&&isPlayer2ShipCaptured)_0x1b2a76=!![];else{if(_0x42dc39===_0x3a33b6(0x1ea)&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a33b6(0x208)&&isPlayer2ShipCaptured)_0x1b2a76=!![];}}}}if(_0x1b2a76)return![];}if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x51edb4===_0x3a33b6(0x2a5)&&ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1NeedsRespawnAfterCapture)(!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer1ShipCaptured)&&(_0x291859=ship1,_0x3bd18c=player1IsDualShipActive,_0x864396=player1LastShotTime,_0x3358d6=_0x2f80ff=>{player1LastShotTime=_0x2f80ff;},_0x182f2a=_0x53c2d6=>{player1ShotsFired+=_0x53c2d6;},_0x56d254=selectedFiringMode==='single',_0x58e39b=()=>p1JustFiredSingle,_0x3a11fb=_0x38bcd5=>{p1JustFiredSingle=_0x38bcd5;},_0x5b63a2=!![]);else(_0x51edb4===_0x3a33b6(0x24c)||_0x51edb4===_0x3a33b6(0x1ea))&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2NeedsRespawnAfterCapture&&((!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer2ShipCaptured)&&(_0x291859=ship2,_0x3bd18c=player2IsDualShipActive,_0x51edb4==='ai_p2'&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a33b6(0x208)?(_0x864396=aiShip2LastShotTime,_0x3358d6=_0x3add53=>{aiShip2LastShotTime=_0x3add53,player2LastShotTime=_0x3add53;}):(_0x864396=player2LastShotTime,_0x3358d6=_0x57113c=>{player2LastShotTime=_0x57113c;}),_0x182f2a=_0xdec718=>{player2ShotsFired+=_0xdec718;},isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3a33b6(0x208)?_0x56d254=![]:(_0x56d254=selectedFiringMode==='single',_0x58e39b=()=>p2JustFiredSingle,_0x3a11fb=_0x140a6e=>{p2JustFiredSingle=_0x140a6e;}),_0x5b63a2=!![]));}else{if(ship&&playerLives>0x0&&!isShipCaptured){_0x291859=ship,_0x3bd18c=isDualShipActive;if(isTwoPlayerMode&&selectedGameMode===_0x3a33b6(0x2c3)){if(currentPlayer===0x1){_0x864396=player1LastShotTime,_0x3358d6=_0x1f3686=>{player1LastShotTime=_0x1f3686;},_0x182f2a=_0x56e85f=>{player1ShotsFired+=_0x56e85f;},_0x56d254=selectedFiringMode===_0x3a33b6(0x29f),_0x58e39b=()=>p1JustFiredSingle,_0x3a11fb=_0x57f723=>{p1JustFiredSingle=_0x57f723;};if(!_0x42dc39)_0x42dc39=_0x3a33b6(0x2a5);}else{isPlayerTwoAI?(_0x864396=aiLastShotTime,_0x3358d6=_0x32e84a=>{aiLastShotTime=_0x32e84a,player2LastShotTime=_0x32e84a;}):(_0x864396=player2LastShotTime,_0x3358d6=_0x22b77c=>{player2LastShotTime=_0x22b77c;});_0x182f2a=_0x5bca94=>{player2ShotsFired+=_0x5bca94;};if(isPlayerTwoAI){_0x56d254=![];if(!_0x42dc39)_0x42dc39='ai_p2';}else{_0x56d254=selectedFiringMode==='single';connectedGamepadIndexP2===null&&connectedGamepadIndex!==null?(_0x58e39b=()=>p1JustFiredSingle,_0x3a11fb=_0x16edc1=>{p1JustFiredSingle=_0x16edc1;}):(_0x58e39b=()=>p2JustFiredSingle,_0x3a11fb=_0x2fa21f=>{p2JustFiredSingle=_0x2fa21f;});if(!_0x42dc39)_0x42dc39='player2';}}}else{_0x864396=player1LastShotTime,_0x3358d6=_0x1e8081=>{player1LastShotTime=_0x1e8081;},_0x182f2a=_0x5ae6f7=>{player1ShotsFired+=_0x5ae6f7;},_0x56d254=selectedFiringMode===_0x3a33b6(0x29f),_0x58e39b=()=>p1JustFiredSingle,_0x3a11fb=_0x3f3169=>{p1JustFiredSingle=_0x3f3169;};if(!_0x42dc39)_0x42dc39=_0x3a33b6(0x2a5);}_0x5b63a2=!![];}}_0x51edb4===null&&!isManualControl&&ship&&playerLives>0x0&&!isShipCaptured&&!isShowingCaptureMessage&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x3a33b6(0x260))&&(_0x291859=ship,_0x3bd18c=isDualShipActive,_0x864396=aiLastShotTime,_0x3358d6=_0x55d7be=>{aiLastShotTime=_0x55d7be;},_0x182f2a=_0x33e191=>{player1ShotsFired+=_0x33e191;},_0x56d254=![],_0x5b63a2=!![],_0x42dc39='ai');if(!_0x5b63a2||!_0x291859)return![];if(_0x56d254){if(_0x1915d0){if(_0x186ed9-_0x864396<SHOOT_COOLDOWN)return![];}else{let _0x587c85=![];if(_0x42dc39===_0x3a33b6(0x2a5)||!isTwoPlayerMode&&_0x42dc39===_0x3a33b6(0x2a5))_0x587c85=keyboardP1ShootDown||connectedGamepadIndex!==null&&navigator[_0x3a33b6(0x31d)]()?.[connectedGamepadIndex]?.[_0x3a33b6(0x2e7)][PS5_BUTTON_CROSS]?.[_0x3a33b6(0x283)];else{if(_0x42dc39===_0x3a33b6(0x24c)&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)_0x587c85=keyboardP2ShootDown||connectedGamepadIndexP2!==null&&navigator[_0x3a33b6(0x31d)]()?.[connectedGamepadIndexP2]?.[_0x3a33b6(0x2e7)][PS5_BUTTON_CROSS]?.['pressed'];else connectedGamepadIndex!==null?_0x587c85=keyboardP2ShootDown||connectedGamepadIndex!==null&&navigator[_0x3a33b6(0x31d)]()?.[connectedGamepadIndex]?.[_0x3a33b6(0x2e7)][PS5_BUTTON_CROSS]?.[_0x3a33b6(0x283)]:_0x587c85=keyboardP2ShootDown;}}if(_0x58e39b()){if(_0x587c85)return![];else _0x3a11fb(![]);}if(_0x186ed9-_0x864396<SHOOT_COOLDOWN)return![];}}else{if(_0x186ed9-_0x864396<SHOOT_COOLDOWN)return![];}try{const _0x14fbb2=_0x291859['y'];let _0x3096d6=0x0;if(_0x3bd18c){const _0xfc99c0=_0x291859['x']+_0x291859['width']/0x2,_0x69ad57=_0x291859['x']+DUAL_SHIP_OFFSET_X+_0x291859[_0x3a33b6(0x254)]/0x2,_0x34e47e=_0xfc99c0-PLAYER_BULLET_WIDTH/0x2,_0x114b7b=_0x69ad57-PLAYER_BULLET_WIDTH/0x2;bullets[_0x3a33b6(0x1e7)]({'x':_0x34e47e,'y':_0x14fbb2,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x42dc39}),bullets[_0x3a33b6(0x1e7)]({'x':_0x114b7b,'y':_0x14fbb2,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x42dc39}),_0x3096d6=0x2;}else{const _0x2a8baa=_0x291859['x']+_0x291859[_0x3a33b6(0x254)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x3a33b6(0x1e7)]({'x':_0x2a8baa,'y':_0x14fbb2,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x42dc39}),_0x3096d6=0x1;}if(_0x56d254&&!_0x1915d0)_0x3a11fb(!![]);return playSound(_0x3a33b6(0x1de),![],0.4),_0x182f2a(_0x3096d6),_0x3358d6(_0x186ed9),!![];}catch(_0x5d2b1c){return console['error']('Error\x20creating\x20player\x20bullet(s):',_0x5d2b1c),![];}}function handlePlayerInput(){const _0x53efe1=_0x973987;try{const _0x5e8ca3=Date[_0x53efe1(0x1f5)]();let _0x3bfdf7=![],_0x2c9c51=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedGameMode===_0x53efe1(0x2c3)&&currentPlayer===0x2&&!isManualControl||!isManualControl&&!isPlayerTwoAI&&!isCoopAIDemoActive){(isCoopAIDemoActive||!isManualControl&&!isPlayerTwoAI&&!isCoopAIDemoActive)&&(leftPressed=![],rightPressed=![]);shootPressed=![],p2ShootPressed=![];return;}let _0x391b85=isPaused||!isManualControl||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isTwoPlayerMode&&selectedGameMode===_0x53efe1(0x260)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage)||isShowingCaptureMessage||showCsBonusScoreMessage||showPerfectMessage||showCsHitsMessage||showCSClearMessage||isCsCompletionDelayActive;const _0x8368d0=isTwoPlayerMode&&selectedGameMode===_0x53efe1(0x260)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x5e8ca3<coopPlayersReadyStartTime+0x1f40;let _0x134ff2=(_0x8368d0||showReadyMessage)&&isTwoPlayerMode&&selectedGameMode==='coop'&&ship1&&player1Lives>0x0;if(_0x391b85&&!_0x134ff2){keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],leftPressed=![],rightPressed=![],p2LeftPressed=![],p2RightPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],shootPressed=![],p2ShootPressed=![];return;}let _0x37945b=0x0;if(isTouchActiveGame&&gameCanvas&&gameCanvas[_0x53efe1(0x254)]>0x0){const _0x5eff87=gameCanvas[_0x53efe1(0x2be)](),_0x289f8f=gameCanvas[_0x53efe1(0x254)]/_0x5eff87[_0x53efe1(0x254)];_0x37945b=(touchCurrentX-_0x5eff87[_0x53efe1(0x26f)])*_0x289f8f;}let _0x1c6ff2=![],_0x1eba53=![],_0x181220=![],_0x191bc5=![],_0x4c7fe4=![],_0x47cdf0=![];if(!_0x391b85||_0x134ff2){if(connectedGamepadIndex!==null){const _0x8f0135=navigator[_0x53efe1(0x31d)]();if(_0x8f0135?.[connectedGamepadIndex]){const _0x1c4e0e=_0x8f0135[connectedGamepadIndex],_0x3f79e5=processSingleController(_0x1c4e0e,previousGameButtonStates);_0x1c6ff2=_0x3f79e5['left'],_0x1eba53=_0x3f79e5[_0x53efe1(0x257)],_0x181220=_0x3f79e5[_0x53efe1(0x255)],previousGameButtonStates=_0x3f79e5['newButtonStates'][_0x53efe1(0x314)]();if(_0x3f79e5[_0x53efe1(0x289)]&&!isShowingCaptureMessage&&!generalMessageBlockingInput){togglePause();return;}if(_0x3f79e5['back']&&!isShowingCaptureMessage&&!generalMessageBlockingInput){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x53efe1(0x2aa)]>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates[_0x53efe1(0x2aa)]>0x0)previousGameButtonStates=[];}if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x53efe1(0x208))){if(isTwoPlayerMode&&connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex){const _0x29fb9b=navigator[_0x53efe1(0x31d)]();if(_0x29fb9b?.[connectedGamepadIndexP2]){const _0x495a29=_0x29fb9b[connectedGamepadIndexP2],_0x201af6=processSingleController(_0x495a29,previousGameButtonStatesP2);_0x191bc5=_0x201af6[_0x53efe1(0x26f)],_0x4c7fe4=_0x201af6['right'],_0x47cdf0=_0x201af6[_0x53efe1(0x255)],previousGameButtonStatesP2=_0x201af6['newButtonStates'][_0x53efe1(0x314)]();}else{if(previousGameButtonStatesP2[_0x53efe1(0x2aa)]>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2[_0x53efe1(0x2aa)]>0x0)previousGameButtonStatesP2=[];}}}const _0x344520=p1FireInputWasDown;!_0x391b85||_0x134ff2?p1FireInputWasDown=keyboardP1ShootDown||_0x181220:p1FireInputWasDown=![];let _0x140f52=![];if(!_0x391b85||_0x134ff2){if(!(isPlayerTwoAI&&(selectedOnePlayerGameVariant===_0x53efe1(0x208)||selectedGameMode===_0x53efe1(0x2c3)))){_0x140f52=p2FireInputWasDown;if(isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x2&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)p2FireInputWasDown=keyboardP2ShootDown||_0x47cdf0;else connectedGamepadIndex!==null?p2FireInputWasDown=keyboardP2ShootDown||_0x181220:p2FireInputWasDown=keyboardP2ShootDown;}else isTwoPlayerMode&&selectedGameMode===_0x53efe1(0x260)&&!isPlayerTwoAI&&(p2FireInputWasDown=keyboardP2ShootDown||_0x47cdf0);}else p2FireInputWasDown=![];}else p2FireInputWasDown=![];if(selectedFiringMode===_0x53efe1(0x29f)&&!isTouchActiveGame){if(isTwoPlayerMode&&selectedGameMode===_0x53efe1(0x260)){if(_0x344520&&!p1FireInputWasDown)p1JustFiredSingle=![];if(!isPlayerTwoAI&&_0x140f52&&!p2FireInputWasDown)p2JustFiredSingle=![];}else{if(isTwoPlayerMode&&selectedGameMode===_0x53efe1(0x2c3)){if(currentPlayer===0x1&&_0x344520&&!p1FireInputWasDown)p1JustFiredSingle=![];else{if(currentPlayer===0x2&&!isPlayerTwoAI){let _0x168fea=_0x140f52,_0x383212=p2FireInputWasDown;connectedGamepadIndexP2===null&&connectedGamepadIndex!==null&&(_0x168fea=_0x344520,_0x383212=p1FireInputWasDown);if(_0x168fea&&!_0x383212){if(connectedGamepadIndexP2===null&&connectedGamepadIndex!==null)p1JustFiredSingle=![];else p2JustFiredSingle=![];}}}}else{if(_0x344520&&!p1FireInputWasDown)p1JustFiredSingle=![];}}}leftPressed=![],rightPressed=![],p2LeftPressed=![],p2RightPressed=![];let _0x4d76cd=![];if(!_0x391b85||_0x134ff2){if(isTouchActiveGame&&gameCanvas){if(isTwoPlayerMode&&selectedGameMode===_0x53efe1(0x260)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x21b0d1=ship1[_0x53efe1(0x254)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x7a4b65=_0x37945b-_0x21b0d1/0x2;_0x7a4b65=Math[_0x53efe1(0x269)](0x0,Math[_0x53efe1(0x228)](gameCanvas[_0x53efe1(0x254)]-_0x21b0d1,_0x7a4b65)),ship1['x']=_0x7a4b65,ship1[_0x53efe1(0x1d6)]=_0x7a4b65,_0x4d76cd=!![];}}else{const _0x5105da=ship,_0x195484=playerLives,_0x5bd0f0=isShipCaptured,_0x4edc58=isDualShipActive,_0x3b590b=!isPlayerTwoAI||isPlayerTwoAI&&selectedGameMode===_0x53efe1(0x2c3)&&currentPlayer===0x1;if(_0x5105da&&_0x195484>0x0&&!_0x5bd0f0&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&_0x3b590b){const _0x250b78=_0x5105da[_0x53efe1(0x254)]+(_0x4edc58?DUAL_SHIP_OFFSET_X:0x0);let _0x46f37f=_0x37945b-_0x250b78/0x2;_0x46f37f=Math[_0x53efe1(0x269)](0x0,Math['min'](gameCanvas[_0x53efe1(0x254)]-_0x250b78,_0x46f37f)),_0x5105da['x']=_0x46f37f,_0x5105da[_0x53efe1(0x1d6)]=_0x46f37f,_0x4d76cd=!![];}}}if(!_0x4d76cd){if(isTwoPlayerMode&&selectedGameMode==='coop'){const _0x2c8dec=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;_0x2c8dec&&(leftPressed=keyboardP1LeftDown||_0x1c6ff2,rightPressed=keyboardP1RightDown||_0x1eba53);if(!isPlayerTwoAI){const _0x383da3=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;_0x383da3&&(p2LeftPressed=keyboardP2LeftDown||_0x191bc5,p2RightPressed=keyboardP2RightDown||_0x4c7fe4);}}else{const _0x1c6ad0=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0x1c6ad0){if(currentPlayer===0x1||!isTwoPlayerMode)leftPressed=keyboardP1LeftDown||_0x1c6ff2,rightPressed=keyboardP1RightDown||_0x1eba53;else{if(currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0x53efe1(0x2c3)){if(connectedGamepadIndexP2!==null)leftPressed=keyboardP2LeftDown||_0x191bc5,rightPressed=keyboardP2RightDown||_0x4c7fe4;else connectedGamepadIndex!==null?(leftPressed=keyboardP2LeftDown||_0x1c6ff2,rightPressed=keyboardP2RightDown||_0x1eba53):(leftPressed=keyboardP2LeftDown,rightPressed=keyboardP2RightDown);}}}}}}if(!_0x391b85){if(isTwoPlayerMode&&selectedGameMode===_0x53efe1(0x260)){const _0x2e7117=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;if(_0x2e7117){(isTouchActiveGame&&selectedFiringMode===_0x53efe1(0x2b5)||p1FireInputWasDown)&&(_0x3bfdf7=!![]);if(isShowingCaptureMessage&&isPlayer1ShipCaptured)_0x3bfdf7=![];}if(!isPlayerTwoAI){const _0x326c20=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;if(_0x326c20){p2FireInputWasDown&&(_0x2c9c51=!![]);if(isShowingCaptureMessage&&isPlayer2ShipCaptured)_0x2c9c51=![];}}}else{const _0x281c70=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isShowingIntro;if(_0x281c70){let _0x56b8fd=![];if(currentPlayer===0x1||!isTwoPlayerMode)_0x56b8fd=p1FireInputWasDown;else currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0x53efe1(0x2c3)&&(_0x56b8fd=p2FireInputWasDown);(isTouchActiveGame&&selectedFiringMode===_0x53efe1(0x2b5)||_0x56b8fd)&&(_0x3bfdf7=!![]);(gameJustStarted||isShowingIntro&&level===0x1)&&(!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode===_0x53efe1(0x2c3)&&currentPlayer===0x1)&&(!(keyboardP1ShootDown||_0x181220)&&!(isTouchActiveGame&&selectedFiringMode===_0x53efe1(0x29f))&&(_0x3bfdf7=![]));if(isShowingCaptureMessage&&isShipCaptured)_0x3bfdf7=![];}}}shootPressed=_0x3bfdf7,p2ShootPressed=_0x2c9c51,isManualControl&&(isTwoPlayerMode&&selectedGameMode===_0x53efe1(0x260)?(shootPressed&&firePlayerBullet(_0x53efe1(0x2a5),isTouchActiveGame&&selectedFiringMode===_0x53efe1(0x29f)),!isPlayerTwoAI&&p2ShootPressed&&firePlayerBullet(_0x53efe1(0x24c),![])):shootPressed&&(!(isPlayerTwoAI&&selectedGameMode===_0x53efe1(0x2c3)&&currentPlayer===0x2)&&firePlayerBullet(currentPlayer===0x1||!isTwoPlayerMode?_0x53efe1(0x2a5):_0x53efe1(0x24c),isTouchActiveGame&&selectedFiringMode===_0x53efe1(0x29f))));}catch(_0x4bd951){console[_0x53efe1(0x2eb)](_0x53efe1(0x22c),_0x4bd951),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![];}}let aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;const AI_DODGE_COMMIT_DURATION=0xa0,AI_DODGE_MOVEMENT_SMOOTHING_FACTOR=0.015,AI_NORMAL_MOVEMENT_SMOOTHING_FACTOR=0.04,AI_CAPTURE_DIVE_SHOOT_STOP_DURATION_MS=0xbb8;function aiControl(){const _0x39f104=_0x973987;try{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')return;let _0x10107c=null,_0x143786=null,_0x19fe09=![],_0x299d03=![],_0x3d49b5=![],_0x32489b=0x0,_0x24e3c4='ai',_0x2321ea=![];if(isPlayerTwoAI&&selectedGameMode===_0x39f104(0x2c3)&&currentPlayer===0x2){if(!ship||playerLives<=0x0||isShipCaptured||isShowingPlayerGameOverMessage){if(ship)ship[_0x39f104(0x1d6)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas['width']/0x2:0x0;return;}_0x10107c=ship,_0x143786=smoothedShipX,_0x19fe09=isDualShipActive,_0x299d03=isShipCaptured,_0x3d49b5=isInvincible,_0x32489b=playerLives,_0x24e3c4='ai_p2',_0x2321ea=!![];}else{if(!isManualControl&&!isPlayerTwoAI){if(playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage){if(ship)ship['targetX']=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x39f104(0x254)]/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}if(isShipCaptured||isShowingCaptureMessage){if(ship)ship[_0x39f104(0x1d6)]=ship['x'];if(smoothedShipX!==undefined&&ship)smoothedShipX=ship['x'];aiIsCurrentlyTargetingCaptureBoss=![];return;}_0x10107c=ship,_0x143786=smoothedShipX,_0x19fe09=isDualShipActive,_0x299d03=isShipCaptured,_0x3d49b5=isInvincible,_0x32489b=playerLives,_0x24e3c4='ai';}else{if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}if(_0x143786===undefined&&_0x10107c){_0x143786=_0x10107c['x'];if(_0x2321ea||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0x143786;}else{if(_0x143786===undefined&&!_0x10107c){_0x143786=gameCanvas?gameCanvas[_0x39f104(0x254)]/0x2:0x0;if(_0x2321ea||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0x143786;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}const _0x7259ee=Date[_0x39f104(0x1f5)](),_0x123f45=gameCanvas[_0x39f104(0x254)],_0x449945=gameCanvas[_0x39f104(0x334)];let _0xf29f95=_0x10107c[_0x39f104(0x254)];if(_0x19fe09)_0xf29f95=DUAL_SHIP_OFFSET_X+_0x10107c['width'];const _0x128779=_0x10107c['x']+_0xf29f95/0x2,_0x43d4cc=_0x10107c['y'],_0x277504=_0x123f45/0x2,_0x384e5f=_0x277504-_0xf29f95/0x2,_0x36f4a4=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive||isShowingCaptureMessage||isShowingIntro;let _0x16570d=_0x143786,_0x2f41ff=![],_0x55be4e=![],_0x4566c3=_0x143786,_0x3ac66a=null,_0x6226e6=![];aiIsCurrentlyTargetingCaptureBoss=![];let _0x4a1009=![],_0x1b84ae=![];if(aiNeedsStabilization&&!_0x36f4a4){aiStabilizationEndTime=_0x7259ee+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],_0x143786=_0x10107c['x'];if(_0x2321ea||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0x143786;}_0x7259ee>aiDodgeCommitEndTime&&(aiPreviousDodgeDirection=0x0);if(isChallengingStage&&_0x10107c){_0x55be4e=![],_0x6226e6=![],aiIsCurrentlyTargetingCaptureBoss=![],_0x4a1009=![],_0x1b84ae=![];let _0x4cd7fb=null,_0x2326e9=-Infinity;for(const _0x2866ad of enemies){if(!_0x2866ad||_0x2866ad['y']<-_0x2866ad[_0x39f104(0x334)]||_0x2866ad['y']>_0x449945+_0x2866ad[_0x39f104(0x334)]||_0x2866ad['x']<-_0x2866ad[_0x39f104(0x254)]||_0x2866ad['x']>_0x123f45+_0x2866ad['width'])continue;const _0x42c329=_0x2866ad['x']+_0x2866ad[_0x39f104(0x254)]/0x2,_0x3e8cc3=_0x2866ad['y']+_0x2866ad[_0x39f104(0x334)]/0x2,_0x2e41e9=Math[_0x39f104(0x269)](0x0,(_0x10107c['y']-_0x3e8cc3)/PLAYER_BULLET_SPEED),_0x49e9a9=_0x42c329+(_0x2866ad['velocityX']||0x0)*_0x2e41e9;let _0x391df2=_0x49e9a9-_0xf29f95/0x2;_0x391df2=Math['max'](AI_EDGE_BUFFER,Math[_0x39f104(0x228)](_0x123f45-_0xf29f95-AI_EDGE_BUFFER,_0x391df2));let _0x29e14d=(_0x449945-_0x3e8cc3)*0x2;_0x29e14d-=Math['abs'](_0x128779-_0x49e9a9)*0.5,_0x29e14d>_0x2326e9&&(_0x2326e9=_0x29e14d,_0x4cd7fb=_0x2866ad,_0x16570d=_0x391df2);}_0x3ac66a=_0x4cd7fb,_0x3ac66a?_0x2f41ff=!![]:(_0x16570d=_0x384e5f,_0x2f41ff=![]),aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;}else{if(!_0x3d49b5&&!_0x36f4a4){const _0x5273ee=Math['min'](0x1,level/0xa),_0x108639=SHIP_HEIGHT*(8.5+3.5*_0x5273ee),_0x1ca6af=0x1f4+0x12c*_0x5273ee,_0x5a7333=0x12c+0x96*_0x5273ee,_0x3cb98d=_0xf29f95*(0.9+0.5*_0x5273ee),_0x1e30bc=SHIP_HEIGHT*(0.7+0.4*_0x5273ee),_0x378a76=_0xf29f95*(1.8+0.8*_0x5273ee);let _0x32eebe=[];for(const _0x45906b of enemyBullets){if(_0x45906b['y']<_0x10107c['y']+_0x108639&&_0x45906b['y']+_0x45906b[_0x39f104(0x334)]>_0x10107c['y']-SHIP_HEIGHT*0x2){const _0x3c12c6=(_0x10107c['y']-_0x45906b['y'])/(_0x45906b['vy']||0.01),_0x3f6bb6=Math[_0x39f104(0x228)](_0x1ca6af/16.67,Math[_0x39f104(0x269)](0x0,_0x3c12c6/16.67*1.25));let _0x6a9a17=_0x45906b['x']+_0x45906b['vx']*_0x3f6bb6,_0x58578c=_0x45906b['y']+_0x45906b['vy']*_0x3f6bb6,_0x1bf3cf=![],_0x2a9793=_0x1e30bc,_0x3d7e74=_0x3cb98d;const _0x176ad4=Math[_0x39f104(0x2f0)](_0x45906b['vx']*_0x45906b['vx']+_0x45906b['vy']*_0x45906b['vy'])||BASE_ENEMY_BULLET_SPEED;_0x45906b['vy']>_0x176ad4*0.35&&Math[_0x39f104(0x2a7)](_0x45906b['x']+_0x45906b[_0x39f104(0x254)]/0x2-(_0x10107c['x']+_0xf29f95/0x2))<_0xf29f95*1.1&&(_0x1bf3cf=!![],_0x2a9793=_0x1e30bc*2.6,_0x3d7e74*=1.5),_0x32eebe[_0x39f104(0x1e7)]({'x':_0x6a9a17-_0x45906b['width']/0x2-_0x3d7e74,'y':_0x58578c-_0x45906b[_0x39f104(0x334)]/0x2-_0x2a9793,'width':_0x45906b[_0x39f104(0x254)]+0x2*_0x3d7e74,'height':_0x45906b['height']+0x2*_0x2a9793,'isCritical':!![],'isFromAbove':_0x1bf3cf,'originalVy':_0x45906b['vy']});}}for(const _0x3fdcc6 of enemies){if(_0x3fdcc6&&(_0x3fdcc6['state']==='attacking'||_0x3fdcc6[_0x39f104(0x251)]===_0x39f104(0x2ee))&&_0x3fdcc6['y']<_0x10107c['y']+_0x108639*0.9&&_0x3fdcc6['y']+_0x3fdcc6[_0x39f104(0x334)]>_0x10107c['y']-SHIP_HEIGHT*3.5){const _0x5c664f=_0x5a7333/16.67;let _0x456025=_0x3fdcc6['x']+_0x3fdcc6[_0x39f104(0x1f1)]*_0x5c664f,_0xbc5965=_0x3fdcc6['y']+_0x3fdcc6[_0x39f104(0x2c9)]*_0x5c664f;_0x32eebe[_0x39f104(0x1e7)]({'x':_0x456025-_0x3cb98d*0.95,'y':_0xbc5965-_0x1e30bc*0.95,'width':_0x3fdcc6[_0x39f104(0x254)]+0x2*_0x3cb98d*0.95,'height':_0x3fdcc6['height']+0x2*_0x1e30bc*0.95,'isCritical':!![],'isFromAbove':![],'originalVy':_0x3fdcc6[_0x39f104(0x2c9)]});}}_0x32eebe['sort']((_0x58ea33,_0x7e300b)=>(_0x7e300b[_0x39f104(0x241)]?0x1:-0x1)-(_0x58ea33[_0x39f104(0x241)]?0x1:-0x1)||(_0x7e300b['originalVy']||0x0)-(_0x58ea33[_0x39f104(0x2bb)]||0x0));if(_0x32eebe[_0x39f104(0x2aa)]>0x0){_0x55be4e=!![];let _0x2a68b6={'x':_0x143786,'score':-Infinity,'dir':0x0,'minDistance':Infinity,'collisions':Infinity};const _0x98302c={'x':_0x143786,'y':_0x10107c['y'],'width':_0xf29f95,'height':_0x10107c[_0x39f104(0x334)]};let _0x18f83d=0x0,_0x3d163b=0x0,_0x402154=Infinity;for(const _0x2b2bf3 of _0x32eebe){checkCollision(_0x98302c,_0x2b2bf3)&&(_0x18f83d++,_0x3d163b-=level===0x1?0xdac:0xbb8,_0x2b2bf3[_0x39f104(0x241)]&&(_0x3d163b-=level===0x1?0x3a98:0x32c8));const _0x2b18f7=_0x2b2bf3['x']+_0x2b2bf3[_0x39f104(0x254)]/0x2,_0x5ab178=_0x98302c['x']+_0x98302c[_0x39f104(0x254)]/0x2,_0x54d007=Math['abs'](_0x5ab178-_0x2b18f7)-(_0x98302c[_0x39f104(0x254)]/0x2+_0x2b2bf3[_0x39f104(0x254)]/0x2);_0x54d007<_0x402154&&(_0x402154=_0x54d007);}_0x2a68b6={'x':_0x143786,'score':_0x3d163b,'dir':0x0,'minDistance':_0x402154,'collisions':_0x18f83d};const _0xfc7be4=_0x378a76,_0x14353f=0x3;for(let _0x1bb62e=0x0;_0x1bb62e<_0x14353f;_0x1bb62e++){for(const _0xf7e6ad of[-0x1,0x1]){let _0x3249a2=_0x143786+_0xf7e6ad*_0xfc7be4*(_0x1bb62e+0x1);_0x3249a2=Math[_0x39f104(0x269)](AI_EDGE_BUFFER*1.2,Math[_0x39f104(0x228)](_0x123f45-_0xf29f95-AI_EDGE_BUFFER*1.2,_0x3249a2));const _0x99dd3d={'x':_0x3249a2,'y':_0x10107c['y'],'width':_0xf29f95,'height':_0x10107c[_0x39f104(0x334)]};let _0x2bc141=0x0,_0x74034a=0x0,_0x279c15=Infinity;for(const _0x24dcc9 of _0x32eebe){checkCollision(_0x99dd3d,_0x24dcc9)&&(_0x2bc141++,_0x74034a-=level===0x1?0xdac:0xbb8,_0x24dcc9[_0x39f104(0x241)]&&(_0x74034a-=level===0x1?0x3a98:0x32c8));const _0x12aea5=_0x24dcc9['x']+_0x24dcc9[_0x39f104(0x254)]/0x2,_0x3ac3c7=_0x99dd3d['x']+_0x99dd3d[_0x39f104(0x254)]/0x2,_0xee0e18=Math['abs'](_0x3ac3c7-_0x12aea5)-(_0x99dd3d[_0x39f104(0x254)]/0x2+_0x24dcc9[_0x39f104(0x254)]/0x2);_0xee0e18<_0x279c15&&(_0x279c15=_0xee0e18);}_0x74034a-=Math[_0x39f104(0x2a7)](_0x3249a2-_0x384e5f)*0.05,_0x74034a-=_0x1bb62e*0x2;_0x2bc141===0x0&&_0xf7e6ad===aiPreviousDodgeDirection&&aiPreviousDodgeDirection!==0x0&&(_0x74034a+=0x64);if(_0x2bc141<_0x2a68b6[_0x39f104(0x2c0)])_0x2a68b6={'x':_0x3249a2,'score':_0x74034a,'dir':_0xf7e6ad,'minDistance':_0x279c15,'collisions':_0x2bc141};else{if(_0x2bc141===_0x2a68b6['collisions']){if(_0x279c15>_0x2a68b6[_0x39f104(0x24e)])_0x2a68b6={'x':_0x3249a2,'score':_0x74034a,'dir':_0xf7e6ad,'minDistance':_0x279c15,'collisions':_0x2bc141};else _0x279c15===_0x2a68b6[_0x39f104(0x24e)]&&Math['abs'](_0x3249a2-_0x384e5f)<Math[_0x39f104(0x2a7)](_0x2a68b6['x']-_0x384e5f)&&(_0x2a68b6={'x':_0x3249a2,'score':_0x74034a,'dir':_0xf7e6ad,'minDistance':_0x279c15,'collisions':_0x2bc141});}}}}_0x4566c3=_0x2a68b6['x'],_0x16570d=_0x4566c3;if(_0x2a68b6['dir']!==0x0&&_0x2a68b6[_0x39f104(0x2c0)]===0x0)(aiPreviousDodgeDirection!==_0x2a68b6['dir']||_0x2a68b6['minDistance']<_0xf29f95*0.5)&&(aiPreviousDodgeDirection=_0x2a68b6['dir'],aiDodgeCommitEndTime=_0x7259ee+AI_DODGE_COMMIT_DURATION+(level===0x1?0x3c:0x0));else _0x2a68b6['collisions']>0x0?(aiPreviousDodgeDirection=_0x2a68b6[_0x39f104(0x22f)],aiDodgeCommitEndTime=_0x7259ee+AI_DODGE_COMMIT_DURATION/0x2):(aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0);}else aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;}else aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;}if(_0x55be4e&&!isChallengingStage){_0x6226e6=![],aiIsCurrentlyTargetingCaptureBoss=![],_0x4a1009=![],_0x1b84ae=![],_0x3ac66a=null;const _0x532016=_0x16570d<AI_EDGE_BUFFER*2.5||_0x16570d>_0x123f45-_0xf29f95-AI_EDGE_BUFFER*2.5;if(Math['abs'](_0x16570d-_0x143786)>_0xf29f95*0.1&&!_0x532016){let _0x1e43a1=null,_0x3407be=-Infinity;for(const _0x685b0c of enemies){if(!_0x685b0c)continue;let _0x4c908a=(_0x449945-_0x685b0c['y'])*1.5-Math[_0x39f104(0x2a7)](_0x685b0c['x']+_0x685b0c[_0x39f104(0x254)]/0x2-_0x128779)*0x2;if(_0x685b0c[_0x39f104(0x251)]===_0x39f104(0x2b4)||_0x685b0c['state']===_0x39f104(0x2ee))_0x4c908a+=0x258;if(_0x685b0c['type']===ENEMY3_TYPE&&_0x685b0c['hasCapturedShip'])_0x4c908a+=0x4b0;else{if(_0x685b0c[_0x39f104(0x243)]===ENEMY3_TYPE&&_0x685b0c[_0x39f104(0x2e4)])_0x4c908a+=0x190;else{if(_0x685b0c[_0x39f104(0x243)]===ENEMY3_TYPE)_0x4c908a-=0xc8;}}_0x4c908a>_0x3407be&&(_0x3407be=_0x4c908a,_0x1e43a1=_0x685b0c);}_0x3ac66a=_0x1e43a1;}_0x2f41ff=_0x3ac66a!==null;}else{if(!isChallengingStage){if(fallingShips['length']>0x0&&!_0x299d03&&!isWaitingForRespawn&&!_0x19fe09){let _0x3b212b=null,_0x2b499c=Infinity;for(const _0x59f933 of fallingShips){let _0x1c99c3=!isManualControl&&!isPlayerTwoAI&&_0x59f933[_0x39f104(0x304)]===_0x39f104(0x2a5)||_0x2321ea&&_0x59f933[_0x39f104(0x304)]===String(currentPlayer);if(!_0x3b212b&&!_0x1c99c3&&_0x59f933['targetPlayerId']===null)_0x1c99c3=!![];if(_0x59f933&&!_0x59f933['landed']&&_0x1c99c3){const _0x347d7c=Math['abs'](_0x59f933['x']+_0x59f933[_0x39f104(0x254)]/0x2-_0x128779)+Math[_0x39f104(0x2a7)](_0x59f933['y']-_0x10107c['y']);_0x347d7c<_0x2b499c&&(_0x2b499c=_0x347d7c,_0x3b212b=_0x59f933);}}_0x3b212b&&(_0x1b84ae=!![],_0x16570d=_0x3b212b['x']+_0x3b212b[_0x39f104(0x254)]/0x2-_0xf29f95/0x2,_0x2f41ff=![],_0x3ac66a=null);}if(!_0x1b84ae){const _0x381d11=enemies[_0x39f104(0x2df)](_0x3c7ce2=>_0x3c7ce2['id']===capturingBossId&&_0x3c7ce2[_0x39f104(0x243)]===ENEMY3_TYPE),_0x3b38d3=captureBeamActive&&_0x381d11&&_0x381d11[_0x39f104(0x251)]==='capturing'&&!_0x299d03;if(_0x3b38d3){const _0x596948=_0x32489b>0x1&&!_0x19fe09;if(_0x596948){aiIsCurrentlyTargetingCaptureBoss=!![],_0x6226e6=!![];const _0x3fd719=_0x381d11['x']+_0x381d11['width']/0x2;_0x16570d=_0x3fd719-_0xf29f95/0x2,_0x2f41ff=![],_0x3ac66a=null;}}}if(!_0x1b84ae&&!_0x6226e6&&!aiIsCurrentlyTargetingCaptureBoss){const _0x54daf7=enemies[_0x39f104(0x2df)](_0x222dec=>_0x222dec[_0x39f104(0x243)]===ENEMY3_TYPE&&_0x222dec[_0x39f104(0x301)]&&_0x222dec[_0x39f104(0x25b)]>0x0&&_0x7259ee-_0x222dec[_0x39f104(0x25b)]>0xbb8);if(_0x54daf7)_0x4a1009=!![],_0x3ac66a=_0x54daf7,_0x16570d=_0x54daf7['x']+_0x54daf7[_0x39f104(0x254)]/0x2-_0xf29f95/0x2,_0x2f41ff=!![];else{_0x3ac66a=null;let _0x5965a7=-Infinity;for(const _0x5a4e40 of enemies){if(!_0x5a4e40)continue;let _0x4dda64=0x0;const _0x2edb18=_0x5a4e40['x']+_0x5a4e40[_0x39f104(0x254)]/0x2,_0x5303dc=_0x2edb18-_0x128779,_0x54c733=_0x43d4cc-(_0x5a4e40['y']+_0x5a4e40['height']);if(_0x54c733<0x0&&_0x5a4e40[_0x39f104(0x251)]!=='attacking'&&_0x5a4e40[_0x39f104(0x251)]!==_0x39f104(0x2ee)&&_0x5a4e40[_0x39f104(0x251)]!==_0x39f104(0x23f))continue;_0x4dda64=(_0x449945-_0x5a4e40['y'])*0x2-Math[_0x39f104(0x2a7)](_0x5303dc)*0x3-_0x54c733;if(_0x5a4e40[_0x39f104(0x251)]==='attacking'||_0x5a4e40[_0x39f104(0x251)]==='diving_to_capture_position')_0x4dda64+=0xbb8;if(_0x5a4e40[_0x39f104(0x243)]===ENEMY3_TYPE&&!_0x5a4e40[_0x39f104(0x2e4)]&&!_0x5a4e40[_0x39f104(0x301)])_0x4dda64-=0x5dc;if(_0x5a4e40[_0x39f104(0x243)]===ENEMY3_TYPE&&_0x5a4e40['isDamaged']&&!_0x5a4e40[_0x39f104(0x301)])_0x4dda64+=0x3e8;if(_0x5a4e40['type']===ENEMY3_TYPE&&_0x5a4e40['hasCapturedShip'])_0x4dda64+=0x1388;_0x4dda64>_0x5965a7&&(_0x5965a7=_0x4dda64,_0x3ac66a=_0x5a4e40);}if(_0x3ac66a){const _0x278378=_0x3ac66a['x']+_0x3ac66a[_0x39f104(0x254)]/0x2;_0x16570d=_0x278378-_0xf29f95/0x2;const _0x384384=1.8;let _0x56c8cb=_0x3ac66a[_0x39f104(0x251)]===_0x39f104(0x311)||_0x3ac66a[_0x39f104(0x251)]===_0x39f104(0x293)?_0xf29f95*(GRID_SHOOT_ALIGNMENT_FACTOR*_0x384384):_0xf29f95*(FINAL_SHOOT_ALIGNMENT_THRESHOLD*_0x384384);Math[_0x39f104(0x2a7)](_0x128779-_0x278378)<_0x56c8cb&&(_0x2f41ff=!![]);}else _0x16570d=_0x384e5f,_0x2f41ff=![];}}}}let _0x18d4a5;isChallengingStage?_0x18d4a5=CS_SHOOTING_MOVE_FRACTION:_0x18d4a5=_0x55be4e?AI_DODGE_MOVEMENT_SMOOTHING_FACTOR:AI_NORMAL_MOVEMENT_SMOOTHING_FACTOR;if(_0x10107c){_0x143786+=(_0x16570d-_0x143786)*_0x18d4a5,_0x10107c[_0x39f104(0x1d6)]=_0x143786;if(_0x2321ea||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0x143786;}if(_0x2f41ff&&!isShowingIntro){let _0x49d9e1=!![];if(!isChallengingStage){(_0x6226e6||_0x1b84ae)&&(_0x49d9e1=![]);if(_0x3ac66a){if(_0x3ac66a['type']===ENEMY3_TYPE&&!_0x3ac66a['hasCapturedShip']){const _0x58ad7a=isEntrancePhaseActive||[_0x39f104(0x311),_0x39f104(0x293),'diving_to_capture_position',_0x39f104(0x29c)][_0x39f104(0x294)](_0x3ac66a['state']),_0x21917b=_0x3ac66a['id']===capturingBossId&&aiIsCurrentlyTargetingCaptureBoss;_0x58ad7a&&!_0x21917b&&!_0x4a1009&&(_0x49d9e1=![]);}_0x3ac66a[_0x39f104(0x243)]===ENEMY3_TYPE&&_0x3ac66a[_0x39f104(0x299)]&&_0x3ac66a[_0x39f104(0x299)]>0x0&&_0x7259ee-_0x3ac66a['captureDiveInitiationTime']<AI_CAPTURE_DIVE_SHOOT_STOP_DURATION_MS&&(_0x49d9e1=![]);}else _0x49d9e1=![];}if(_0x49d9e1){if(firePlayerBullet(_0x24e3c4,![])){}}}}catch(_0x4a5958){console['error'](_0x39f104(0x263),_0x4a5958,_0x4a5958[_0x39f104(0x2f7)]);if(ship)ship[_0x39f104(0x1d6)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x39f104(0x254)]/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];}}let aiCoopP1_PreviousDodgeDirection=0x0,aiCoopP1_DodgeCommitEndTime=0x0,aiCoopP2_PreviousDodgeDirection=0x0,aiCoopP2_DodgeCommitEndTime=0x0;const AI_COOP_DODGE_MOVEMENT_SMOOTHING_FACTOR=0.022;function aiControlCoop(){const _0x30d147=_0x973987;if(!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x30d147(0x208))||isPaused||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0){if(ship1)ship1[_0x30d147(0x1d6)]=ship1['x'];if(ship2)ship2['targetX']=ship2['x'];return;}const _0x42459b=Date[_0x30d147(0x1f5)](),_0x5b5dee=gameCanvas['width'],_0x3167a0=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture,_0x284817=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture,_0xf208b0=_0x6d7384=>{const _0xabd42a=_0x6d7384==='p1'&&isPlayer1ShowingGameOverMessage||_0x6d7384==='p2'&&isPlayer2ShowingGameOverMessage;return _0xabd42a||showReadyMessage||isCsCompletionDelayActive||isShowingIntro&&!(level===0x1&&coopPlayersReadyStartTime>0x0&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'));};if(_0x3167a0&&ship1&&isCoopAIDemoActive){if(smoothedShip1X===undefined)smoothedShip1X=ship1['x'];if(_0x42459b>aiCoopP1_DodgeCommitEndTime)aiCoopP1_PreviousDodgeDirection=0x0;const _0x3a4bcf=_0xf208b0('p1');let _0x5093b4,_0x32c2ef=null;if(isCoopAIDemoActive){if(isPlayer2ShipCaptured&&capturedBossIdWithMessage)_0x32c2ef=capturedBossIdWithMessage;else{if(aiPlayerActivelySeekingCaptureById==='player2'||aiPlayerActivelySeekingCaptureById===_0x30d147(0x1ea))_0x32c2ef=capturingBossId;}}_0x5093b4=calculateAIDesiredState(ship1,smoothedShip1X,player1IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer1Invincible,isPlayer1ShipCaptured,isPlayer1WaitingForRespawn,_0x42459b,_0x5b5dee,_0x3a4bcf,'p1',_0x32c2ef,aiCoopP1_PreviousDodgeDirection),aiShip1TargetEnemy=_0x5093b4[_0x30d147(0x2d8)];let _0x112909=_0x5093b4['isDodging']?AI_COOP_DODGE_MOVEMENT_SMOOTHING_FACTOR:AI_SMOOTHING_FACTOR_MOVE;smoothedShip1X+=(_0x5093b4[_0x30d147(0x20c)]-smoothedShip1X)*_0x112909,ship1[_0x30d147(0x1d6)]=smoothedShip1X;if(_0x5093b4[_0x30d147(0x306)]!==undefined&&_0x5093b4[_0x30d147(0x201)]===0x0){if(_0x5093b4[_0x30d147(0x306)]!==0x0&&_0x5093b4[_0x30d147(0x306)]!==aiCoopP1_PreviousDodgeDirection)aiCoopP1_PreviousDodgeDirection=_0x5093b4[_0x30d147(0x306)],aiCoopP1_DodgeCommitEndTime=_0x42459b+AI_DODGE_COMMIT_DURATION;else _0x5093b4[_0x30d147(0x306)]===0x0&&(aiCoopP1_PreviousDodgeDirection=0x0);}else _0x5093b4[_0x30d147(0x201)]>0x0&&(aiCoopP1_PreviousDodgeDirection=0x0);_0x5093b4[_0x30d147(0x31a)]&&!(isShowingCaptureMessage&&isPlayer1ShipCaptured)&&fireCoopAIBullet(ship1,player1IsDualShipActive,_0x30d147(0x2a5));}if(_0x284817&&ship2&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x30d147(0x208))){if(smoothedShip2X===undefined)smoothedShip2X=ship2['x'];if(_0x42459b>aiCoopP2_DodgeCommitEndTime)aiCoopP2_PreviousDodgeDirection=0x0;const _0x41d009=_0xf208b0('p2'),_0x1600cb=isCoopAIDemoActive?_0x30d147(0x24c):_0x30d147(0x1ea);let _0x1c236c,_0x20303e=null;if(isCoopAIDemoActive){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage)_0x20303e=capturedBossIdWithMessage;else{if(aiPlayerActivelySeekingCaptureById===_0x30d147(0x2a5))_0x20303e=capturingBossId;}}_0x1c236c=calculateAIDesiredState(ship2,smoothedShip2X,player2IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer2Invincible,isPlayer2ShipCaptured,isPlayer2WaitingForRespawn,_0x42459b,_0x5b5dee,_0x41d009,_0x1600cb,_0x20303e,aiCoopP2_PreviousDodgeDirection),aiShip2TargetEnemy=_0x1c236c[_0x30d147(0x2d8)];let _0x219d53=_0x1c236c[_0x30d147(0x25c)]?AI_COOP_DODGE_MOVEMENT_SMOOTHING_FACTOR:AI_SMOOTHING_FACTOR_MOVE;smoothedShip2X+=(_0x1c236c[_0x30d147(0x20c)]-smoothedShip2X)*_0x219d53,ship2[_0x30d147(0x1d6)]=smoothedShip2X;if(_0x1c236c['chosenDodgeDir']!==undefined&&_0x1c236c[_0x30d147(0x201)]===0x0){if(_0x1c236c['chosenDodgeDir']!==0x0&&_0x1c236c[_0x30d147(0x306)]!==aiCoopP2_PreviousDodgeDirection)aiCoopP2_PreviousDodgeDirection=_0x1c236c[_0x30d147(0x306)],aiCoopP2_DodgeCommitEndTime=_0x42459b+AI_DODGE_COMMIT_DURATION;else _0x1c236c[_0x30d147(0x306)]===0x0&&(aiCoopP2_PreviousDodgeDirection=0x0);}else _0x1c236c[_0x30d147(0x201)]>0x0&&(aiCoopP2_PreviousDodgeDirection=0x0);_0x1c236c[_0x30d147(0x31a)]&&!(isShowingCaptureMessage&&isPlayer2ShipCaptured)&&fireCoopAIBullet(ship2,player2IsDualShipActive,_0x1600cb);}}function fireCoopAIBullet(_0x38aa50,_0x4a9af8,_0x57a699){if(!_0x38aa50)return![];return firePlayerBullet(_0x57a699,![]);}function calculateAIDesiredState(_0x2f9806,_0x533797,_0x557056,_0x2e387c,_0x8f92e0,_0x5eb19d,_0x409fa5,_0x591ce1,_0x9f6261,_0x1880cb,_0x562ef1,_0x27d516,_0x462fd1,_0x38d245=null,_0x4fd63e=0x0){const _0x5e3a0b=_0x973987;let _0x51eae2=_0x533797,_0x230243=![],_0x2a2530=null,_0x2c65c6=![],_0x5b2a4e=![],_0x4653e3=![],_0x55b8a6=![],_0x4f33ba=![],_0x4eba99=0x0,_0x15af3d=0x0;const _0x5e7de0=0xbb8;isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&_0x1880cb<coopAICaptureDiveAnticipationEndTime&&(_0x230243=![]);isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&_0x1880cb>=coopAICaptureDiveAnticipationEndTime&&(coopAICaptureDiveAnticipationActive=![]);const _0x556635=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e3a0b(0x208),_0x27baba=gameCanvas[_0x5e3a0b(0x334)],_0x3ddd37=_0x2f9806[_0x5e3a0b(0x254)]+(_0x557056?DUAL_SHIP_OFFSET_X:0x0),_0x43872c=_0x2f9806['x']+_0x3ddd37/0x2,_0x50e518=_0x2f9806['y'],_0x5a23ff=_0x462fd1==='p1'?player1Lives:_0x462fd1===_0x5e3a0b(0x1ea)||_0x462fd1===_0x5e3a0b(0x24c)?player2Lives:0x0,_0xbea46=_0x5a23ff>0x1&&!_0x557056&&!_0x591ce1;let _0x3e3fe4=gameCanvas[_0x5e3a0b(0x254)]/0x2;const _0x333a47=isShowingIntro||isShowingCoopPlayersReady,_0x5a6cb2=_0x556635&&_0x333a47&&!(isChallengingStage&&isEntrancePhaseActive),_0x53d536=_0x556635&&(_0x462fd1==='p1'&&player1Lives>0x0&&player2Lives<=0x0||(_0x462fd1===_0x5e3a0b(0x1ea)||_0x462fd1===_0x5e3a0b(0x24c))&&player2Lives>0x0&&player1Lives<=0x0);if(_0x5a6cb2&&_0x53d536)_0x3e3fe4=gameCanvas[_0x5e3a0b(0x254)]/0x2;else{if(_0x462fd1==='p1')_0x3e3fe4=gameCanvas[_0x5e3a0b(0x254)]*0.25+Math[_0x5e3a0b(0x2b7)](_0x1880cb/(AI_WIGGLE_PERIOD*1.1))*(AI_WIGGLE_AMPLITUDE*0.8);else(_0x462fd1===_0x5e3a0b(0x1ea)||_0x462fd1===_0x5e3a0b(0x24c))&&(_0x3e3fe4=gameCanvas[_0x5e3a0b(0x254)]*0.75+Math[_0x5e3a0b(0x2c6)](_0x1880cb/(AI_WIGGLE_PERIOD*0.9))*(AI_WIGGLE_AMPLITUDE*0.8));}let _0x5c5d77=_0x3e3fe4-_0x3ddd37/0x2;if(_0x27d516||_0x591ce1||_0x9f6261||_0x462fd1==='p1'&&player1NeedsRespawnAfterCapture||(_0x462fd1===_0x5e3a0b(0x1ea)||_0x462fd1===_0x5e3a0b(0x24c))&&player2NeedsRespawnAfterCapture)return _0x51eae2=_0x5a6cb2&&_0x53d536?_0x5c5d77:_0x2f9806['x'],{'desiredTargetX':_0x51eae2,'shouldTryShoot':![],'targetEnemyForAI':null,'chosenDodgeDir':0x0,'isDodging':![],'predictedCollisions':0x0};const _0x42d1e5=_0x2e387c[_0x5e3a0b(0x2df)](_0x2e11cc=>_0x2e11cc['id']===capturingBossId&&_0x2e11cc[_0x5e3a0b(0x243)]===ENEMY3_TYPE);let _0x423b6b=_0x533797;if(!isChallengingStage&&!_0x409fa5){const _0x58d975=SHIP_HEIGHT*0x9,_0x3e7896=0x226,_0x5311d1=0x15e,_0x285d95=_0x3ddd37*0.6,_0x9ececa=SHIP_HEIGHT*0.4,_0x2e4e25=_0x3ddd37*0.6,_0x7b8a30=SHIP_HEIGHT*0.6;let _0x464d06=[];for(const _0x5abbce of _0x8f92e0){if(_0x5abbce['y']<_0x2f9806['y']+_0x58d975&&_0x5abbce['y']+_0x5abbce[_0x5e3a0b(0x334)]>_0x2f9806['y']-SHIP_HEIGHT*0x3){const _0x4f30de=_0x3e7896/16.67;let _0x1b85a5=_0x5abbce['x']+_0x5abbce['vx']*_0x4f30de,_0x346f46=_0x5abbce['y']+_0x5abbce['vy']*_0x4f30de,_0x4ef8b3=![],_0x28e0fb=_0x9ececa,_0x20acf1=_0x285d95;const _0x866ad2=Math[_0x5e3a0b(0x2f0)](_0x5abbce['vx']*_0x5abbce['vx']+_0x5abbce['vy']*_0x5abbce['vy'])||BASE_ENEMY_BULLET_SPEED;_0x5abbce['vy']>_0x866ad2*0.6&&Math[_0x5e3a0b(0x2a7)](_0x5abbce['x']+_0x5abbce[_0x5e3a0b(0x254)]/0x2-(_0x2f9806['x']+_0x3ddd37/0x2))<_0x3ddd37*0.9&&(_0x4ef8b3=!![],_0x28e0fb=_0x9ececa*1.85),_0x464d06[_0x5e3a0b(0x1e7)]({'x':_0x1b85a5-_0x5abbce['width']/0x2-_0x20acf1,'y':_0x346f46-_0x5abbce['height']/0x2-_0x28e0fb,'width':_0x5abbce['width']+0x2*_0x20acf1,'height':_0x5abbce['height']+0x2*_0x28e0fb,'isCritical':!![],'isFromAbove':_0x4ef8b3});}}for(const _0x2154f4 of _0x2e387c){if(_0x2154f4&&(_0x2154f4['state']===_0x5e3a0b(0x2b4)||_0x2154f4[_0x5e3a0b(0x251)]===_0x5e3a0b(0x2ee))&&_0x2154f4['y']<_0x2f9806['y']+_0x58d975*0.8&&_0x2154f4['y']+_0x2154f4[_0x5e3a0b(0x334)]>_0x2f9806['y']-SHIP_HEIGHT*3.5){const _0x3b2d02=_0x5311d1/16.67;let _0x1c6b83=_0x2154f4['x']+_0x2154f4[_0x5e3a0b(0x1f1)]*_0x3b2d02,_0x305ba0=_0x2154f4['y']+_0x2154f4[_0x5e3a0b(0x2c9)]*_0x3b2d02;_0x464d06[_0x5e3a0b(0x1e7)]({'x':_0x1c6b83-_0x2e4e25/0x2,'y':_0x305ba0-_0x7b8a30/0x2,'width':_0x2154f4[_0x5e3a0b(0x254)]+_0x2e4e25,'height':_0x2154f4['height']+_0x7b8a30,'isCritical':!![],'isFromAbove':![]});}}if(_0x464d06[_0x5e3a0b(0x2aa)]>0x0){_0x2c65c6=!![];let _0x2350cb=_0x533797,_0x52afbf=Infinity,_0x3eccac=-0x1;const _0x32b043=[-0x1,0x1];if(_0x4fd63e!==0x0){_0x32b043[_0x5e3a0b(0x234)](_0x4fd63e);const _0x28f127=-_0x4fd63e;if(!_0x32b043['includes'](_0x28f127))_0x32b043['push'](_0x28f127);}const _0x2f9bf9=[...new Set(_0x32b043),0x0];for(const _0x5c42ae of _0x2f9bf9){const _0x440337=_0x5c42ae===0x0?0x0:_0x3ddd37*1.8+Math[_0x5e3a0b(0x2d1)]()*_0x3ddd37*0.8;let _0x4c9d6a=_0x533797+_0x5c42ae*_0x440337;_0x4c9d6a=Math[_0x5e3a0b(0x269)](AI_EDGE_BUFFER*2.5,Math[_0x5e3a0b(0x228)](_0x562ef1-_0x3ddd37-AI_EDGE_BUFFER*2.5,_0x4c9d6a));const _0x1b2652={'x':_0x4c9d6a,'y':_0x2f9806['y'],'width':_0x3ddd37,'height':_0x2f9806[_0x5e3a0b(0x334)]};let _0x57d158=0x0,_0x591f33=Infinity;for(const _0x4099d7 of _0x464d06){checkCollision(_0x1b2652,_0x4099d7)&&(_0x57d158++,_0x4099d7[_0x5e3a0b(0x241)]&&(_0x57d158+=0x5));const _0x280596=_0x4099d7['x']+_0x4099d7[_0x5e3a0b(0x254)]/0x2,_0xf9acfd=_0x1b2652['x']+_0x1b2652[_0x5e3a0b(0x254)]/0x2,_0xc000e9=Math[_0x5e3a0b(0x2a7)](_0xf9acfd-_0x280596)-(_0x1b2652['width']/0x2+_0x4099d7[_0x5e3a0b(0x254)]/0x2);_0xc000e9<_0x591f33&&(_0x591f33=_0xc000e9);}if(_0x57d158<_0x52afbf)_0x52afbf=_0x57d158,_0x3eccac=_0x591f33,_0x2350cb=_0x4c9d6a,_0x4eba99=_0x5c42ae;else{if(_0x57d158===_0x52afbf){if(_0x591f33>_0x3eccac)_0x3eccac=_0x591f33,_0x2350cb=_0x4c9d6a,_0x4eba99=_0x5c42ae;else _0x591f33===_0x3eccac&&Math[_0x5e3a0b(0x2a7)](_0x4c9d6a-_0x5c5d77)<Math['abs'](_0x2350cb-_0x5c5d77)&&(_0x2350cb=_0x4c9d6a,_0x4eba99=_0x5c42ae);}}}_0x423b6b=_0x2350cb,_0x15af3d=_0x52afbf;}else _0x4fd63e!==0x0&&_0x1880cb<(_0x462fd1==='p1'?aiCoopP1_DodgeCommitEndTime:aiCoopP2_DodgeCommitEndTime)?(_0x2c65c6=!![],_0x423b6b=_0x533797+_0x4fd63e*(_0x3ddd37*0.05),_0x4eba99=_0x4fd63e):_0x4eba99=0x0;}else _0x4eba99=0x0;if(_0x2c65c6){_0x51eae2=Math[_0x5e3a0b(0x269)](AI_EDGE_BUFFER,Math['min'](gameCanvas[_0x5e3a0b(0x254)]-_0x3ddd37-AI_EDGE_BUFFER,_0x423b6b)),_0x5b2a4e=![],_0x4653e3=![],_0x55b8a6=![],_0x4f33ba=![],_0x2a2530=null;const _0x452eef=_0x51eae2<AI_EDGE_BUFFER*0x2||_0x51eae2>_0x562ef1-_0x3ddd37-AI_EDGE_BUFFER*0x2;if(Math[_0x5e3a0b(0x2a7)](_0x51eae2-_0x533797)>_0x3ddd37*0.1&&!_0x452eef){let _0xc66b3e=null,_0x1b0e5a=-Infinity;for(const _0x508a65 of _0x2e387c){if(!_0x508a65)continue;if(_0x38d245&&_0x508a65['id']===_0x38d245)continue;let _0x14a77c=0x0;const _0x5d569d=_0x508a65['x']+_0x508a65[_0x5e3a0b(0x254)]/0x2,_0x27f633=_0x5d569d-_0x43872c,_0x5159ca=_0x50e518-(_0x508a65['y']+_0x508a65[_0x5e3a0b(0x334)]);if(_0x5159ca<0x0&&_0x508a65[_0x5e3a0b(0x251)]!==_0x5e3a0b(0x2b4)&&_0x508a65[_0x5e3a0b(0x251)]!==_0x5e3a0b(0x2ee)&&_0x508a65[_0x5e3a0b(0x251)]!=='following_bezier_path')continue;_0x14a77c=(_0x27baba-_0x508a65['y'])*1.2-Math[_0x5e3a0b(0x2a7)](_0x27f633)*2.2-_0x5159ca*0.7;if(_0x508a65[_0x5e3a0b(0x251)]===_0x5e3a0b(0x2b4)||_0x508a65['state']==='diving_to_capture_position')_0x14a77c+=0x15e;if(_0x508a65[_0x5e3a0b(0x243)]===ENEMY3_TYPE&&_0x508a65[_0x5e3a0b(0x301)])_0x14a77c+=0x2bc;else{if(_0x508a65[_0x5e3a0b(0x243)]===ENEMY3_TYPE&&_0x508a65[_0x5e3a0b(0x2e4)])_0x14a77c+=0x12c;else{if(_0x508a65[_0x5e3a0b(0x243)]===ENEMY3_TYPE)_0x14a77c-=0x96;}}_0x14a77c>_0x1b0e5a&&(_0x1b0e5a=_0x14a77c,_0xc66b3e=_0x508a65);}_0x2a2530=_0xc66b3e;}_0x230243=_0x2a2530!==null;}else{_0x5b2a4e=![],_0x4653e3=![],_0x55b8a6=![],_0x4f33ba=![],_0x2a2530=null;if(!_0x557056){const _0xad4b01=_0x5eb19d[_0x5e3a0b(0x2df)](_0x534659=>_0x534659[_0x5e3a0b(0x304)]===_0x462fd1&&!_0x534659[_0x5e3a0b(0x316)]);_0xad4b01&&(_0x5b2a4e=!![],_0x51eae2=_0xad4b01['x']+_0xad4b01['width']/0x2-_0x3ddd37/0x2,_0x230243=![]);}if(!_0x5b2a4e){const _0x36bfe5=captureBeamActive&&_0x42d1e5&&_0x42d1e5[_0x5e3a0b(0x251)]===_0x5e3a0b(0x29c)&&!_0x591ce1;if(_0xbea46&&_0x36bfe5){let _0x1f0928=![];if(_0x556635){if(aiPlayerActivelySeekingCaptureById===null||aiPlayerActivelySeekingCaptureById===_0x462fd1){if(aiPlayerActivelySeekingCaptureById===null)aiPlayerActivelySeekingCaptureById=_0x462fd1;_0x1f0928=!![];}}if(_0x1f0928){_0x4653e3=!![];const _0x15f200=_0x42d1e5['x']+_0x42d1e5['width']/0x2;_0x51eae2=_0x15f200-_0x3ddd37/0x2,_0x230243=![],_0x2a2530=_0x42d1e5;}}aiPlayerActivelySeekingCaptureById===_0x462fd1&&!_0x4653e3&&(aiPlayerActivelySeekingCaptureById=null);}if(!_0x5b2a4e&&!_0x4653e3){const _0x1abe4c=_0x462fd1==='p1'&&isPlayer2ShipCaptured||(_0x462fd1===_0x5e3a0b(0x24c)||_0x462fd1===_0x5e3a0b(0x1ea))&&isPlayer1ShipCaptured;if(!isCoopAIDemoActive&&_0x556635&&_0x1abe4c&&capturedBossIdWithMessage){let _0x4bb9e1=_0x462fd1==='p1'?coopPartner2CapturedTime:coopPartner1CapturedTime;if(_0x1880cb-_0x4bb9e1>=COOP_AI_SAVE_PARTNER_DELAY_MS||_0x5a23ff===0x1){const _0xb9b04d=_0x2e387c[_0x5e3a0b(0x2df)](_0x150d1b=>_0x150d1b['id']===capturedBossIdWithMessage&&_0x150d1b[_0x5e3a0b(0x243)]===ENEMY3_TYPE&&_0x150d1b[_0x5e3a0b(0x301)]);_0xb9b04d&&(!_0x38d245||_0xb9b04d['id']!==_0x38d245)&&(_0x55b8a6=!![],_0x2a2530=_0xb9b04d,_0x51eae2=_0xb9b04d['x']+_0xb9b04d['width']/0x2-_0x3ddd37/0x2,_0x230243=!![]);}}}if(!_0x5b2a4e&&!_0x4653e3&&!_0x55b8a6){const _0x545f69=_0x2e387c[_0x5e3a0b(0x2df)](_0x4398dc=>_0x4398dc[_0x5e3a0b(0x243)]===ENEMY3_TYPE&&_0x4398dc['hasCapturedShip']&&_0x4398dc[_0x5e3a0b(0x25b)]>0x0&&_0x1880cb-_0x4398dc[_0x5e3a0b(0x25b)]>0xbb8&&(!_0x556635||_0x556635&&_0x4398dc['id']!==capturedBossIdWithMessage)&&(!_0x42d1e5||_0x4398dc['id']!==_0x42d1e5['id'])&&(!_0x38d245||_0x4398dc['id']!==_0x38d245));if(_0x545f69&&!(isCoopAIDemoActive&&_0x545f69['id']===capturedBossIdWithMessage)&&!(isCoopAIDemoActive&&_0x38d245&&_0x545f69['id']===_0x38d245))_0x4f33ba=!![],_0x2a2530=_0x545f69,_0x51eae2=_0x545f69['x']+_0x545f69['width']/0x2-_0x3ddd37/0x2,_0x230243=!(isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&_0x1880cb<coopAICaptureDiveAnticipationEndTime);else{let _0x1cde61=-Infinity;for(const _0xe63882 of _0x2e387c){if(!_0xe63882)continue;if(_0x38d245&&_0xe63882['id']===_0x38d245)continue;if(_0x42d1e5&&_0xe63882['id']===_0x42d1e5['id']&&(_0x42d1e5[_0x5e3a0b(0x251)]==='preparing_capture'||_0x42d1e5[_0x5e3a0b(0x251)]===_0x5e3a0b(0x2ee)||_0x42d1e5[_0x5e3a0b(0x251)]==='capturing'))continue;if(isCoopAIDemoActive&&aiPlayerActivelySeekingCaptureById&&aiPlayerActivelySeekingCaptureById!==_0x462fd1&&_0x42d1e5&&_0xe63882['id']===_0x42d1e5['id'])continue;if(isCoopAIDemoActive&&capturedBossIdWithMessage&&_0xe63882['id']===capturedBossIdWithMessage)continue;if(isCoopAIDemoActive&&capturingBossId&&_0xe63882['id']===capturingBossId&&(_0xe63882['state']===_0x5e3a0b(0x293)||_0xe63882[_0x5e3a0b(0x251)]==='diving_to_capture_position'||_0xe63882[_0x5e3a0b(0x251)]==='capturing'))continue;let _0x558f60=_0xe63882[_0x5e3a0b(0x243)]===ENEMY3_TYPE&&_0xe63882[_0x5e3a0b(0x301)]&&_0x5a23ff<=0x1&&(!_0x556635||_0x556635&&_0xe63882['id']!==capturedBossIdWithMessage),_0x1ab4c2=0x0;const _0x11218a=_0xe63882['x']+_0xe63882[_0x5e3a0b(0x254)]/0x2,_0x50b146=_0x11218a-_0x43872c,_0x112998=_0x50e518-(_0xe63882['y']+_0xe63882['height']);if(_0x112998<0x0&&_0xe63882[_0x5e3a0b(0x251)]!==_0x5e3a0b(0x2b4)&&_0xe63882['state']!==_0x5e3a0b(0x2ee)&&_0xe63882['state']!=='following_bezier_path')continue;let _0x158960=0x0;if(_0x556635&&!(isCoopAIDemoActive&&aiPlayerActivelySeekingCaptureById&&aiPlayerActivelySeekingCaptureById!==_0x462fd1)){if(_0x462fd1==='p1'&&_0x11218a<gameCanvas['width']/0x2)_0x158960=0x1388;else{if((_0x462fd1===_0x5e3a0b(0x1ea)||_0x462fd1===_0x5e3a0b(0x24c))&&_0x11218a>=gameCanvas[_0x5e3a0b(0x254)]/0x2)_0x158960=0x1388;}}_0x1ab4c2=_0x158960+(_0x27baba-_0xe63882['y'])*0x2-Math[_0x5e3a0b(0x2a7)](_0x50b146)*0x3-_0x112998;if(_0xe63882[_0x5e3a0b(0x251)]===_0x5e3a0b(0x2b4)||_0xe63882[_0x5e3a0b(0x251)]===_0x5e3a0b(0x2ee))_0x1ab4c2+=0xbb8;if(_0xe63882[_0x5e3a0b(0x243)]===ENEMY3_TYPE&&!_0xe63882['isDamaged']&&!_0xe63882[_0x5e3a0b(0x301)])_0x1ab4c2-=0x5dc;if(_0xe63882[_0x5e3a0b(0x243)]===ENEMY3_TYPE&&_0xe63882[_0x5e3a0b(0x2e4)]&&!_0xe63882[_0x5e3a0b(0x301)])_0x1ab4c2+=0x3e8;if(_0xe63882[_0x5e3a0b(0x243)]===ENEMY3_TYPE&&_0xe63882[_0x5e3a0b(0x301)]){if(!_0x558f60)_0x1ab4c2+=0x1388;else _0x1ab4c2-=0x2710;}_0x1ab4c2>_0x1cde61&&(_0x1cde61=_0x1ab4c2,_0x2a2530=_0xe63882);}if(_0x2a2530){_0x51eae2=_0x2a2530['x']+_0x2a2530[_0x5e3a0b(0x254)]/0x2-_0x3ddd37/0x2;const _0xb51060=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e3a0b(0x208)?1.2:0.9;Math['abs'](_0x43872c-(_0x2a2530['x']+_0x2a2530[_0x5e3a0b(0x254)]/0x2))<_0x3ddd37*_0xb51060&&(_0x230243=!(isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&_0x1880cb<coopAICaptureDiveAnticipationEndTime));}else _0x51eae2=_0x5c5d77,_0x230243=![];}}}if(_0x230243){(_0x4653e3||_0x5b2a4e)&&(_0x230243=![]);if(_0x2a2530){if(_0x2a2530['id']===capturingBossId){const _0x36a29b=_0x2a2530[_0x5e3a0b(0x251)]===_0x5e3a0b(0x293)||_0x2a2530[_0x5e3a0b(0x251)]==='diving_to_capture_position'||_0x2a2530[_0x5e3a0b(0x251)]===_0x5e3a0b(0x29c);if(_0x36a29b)_0x230243=![];}if(_0x2a2530[_0x5e3a0b(0x243)]===ENEMY3_TYPE&&!_0x2a2530['hasCapturedShip']){const _0x120db5=['in_grid',_0x5e3a0b(0x293),_0x5e3a0b(0x2ee),_0x5e3a0b(0x29c)][_0x5e3a0b(0x294)](_0x2a2530[_0x5e3a0b(0x251)])||isEntrancePhaseActive,_0x4f28fc=_0x42d1e5&&_0x2a2530['id']===_0x42d1e5['id']&&aiPlayerActivelySeekingCaptureById===_0x462fd1;_0x120db5&&!_0x4f33ba&&!_0x55b8a6&&!_0x4f28fc&&(_0x230243=![]);}if(_0x557056&&_0x556635&&_0x2a2530[_0x5e3a0b(0x243)]===ENEMY3_TYPE&&!_0x2a2530[_0x5e3a0b(0x301)]){const _0xa97fa6=_0x462fd1==='p1'?isCoopAIDemoActive?_0x5e3a0b(0x24c):_0x5e3a0b(0x1ea):'p1';let _0x159233=![];_0xa97fa6==='p1'?_0x159233=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1IsDualShipActive:_0x159233=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2IsDualShipActive;if(_0x159233)_0x230243=![];}if(_0x2a2530[_0x5e3a0b(0x243)]===ENEMY3_TYPE&&_0x2a2530[_0x5e3a0b(0x301)]&&_0x5a23ff<=0x1){const _0xdf8193=_0x556635&&_0x2a2530['id']===capturedBossIdWithMessage&&partnerIsCaptured;if(!_0xdf8193&&!_0x4f33ba&&!_0x55b8a6)_0x230243=![];}isCoopAIDemoActive&&_0x38d245&&_0x2a2530['id']===_0x38d245&&(_0x230243=![]);}else _0x230243=![];isCoopAIDemoActive&&aiPlayerActivelySeekingCaptureById&&aiPlayerActivelySeekingCaptureById!==_0x462fd1&&_0x42d1e5&&_0x2a2530&&_0x2a2530['id']===_0x42d1e5['id']&&(_0x230243=![]);if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e3a0b(0x208)&&_0x462fd1==='ai_p2'){const _0x769126=isShowingIntro&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x1880cb<coopPlayersReadyStartTime+0x1f40;(_0x769126||isShowingIntro)&&(_0x230243=![]);}}return _0x51eae2=Math[_0x5e3a0b(0x269)](AI_EDGE_BUFFER,Math[_0x5e3a0b(0x228)](gameCanvas['width']-_0x3ddd37-AI_EDGE_BUFFER,_0x51eae2)),{'desiredTargetX':_0x51eae2,'shouldTryShoot':_0x230243,'targetEnemyForAI':_0x2a2530,'chosenDodgeDir':_0x4eba99,'isDodging':_0x2c65c6,'predictedCollisions':_0x15af3d};}function findAndDetachEnemy(){const _0x37c66d=_0x973987;try{let _0x3b3d96=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x3b3d96=isPlayer1ShipCaptured||isPlayer2ShipCaptured:_0x3b3d96=isShipCaptured;if(!isFullGridWave&&_0x3b3d96){const _0x16f8b0=enemies[_0x37c66d(0x2df)](_0x137129=>_0x137129&&_0x137129[_0x37c66d(0x243)]===ENEMY3_TYPE&&_0x137129[_0x37c66d(0x301)]&&_0x137129[_0x37c66d(0x251)]===_0x37c66d(0x311));if(_0x16f8b0){_0x16f8b0[_0x37c66d(0x1eb)]=!![],_0x16f8b0[_0x37c66d(0x32b)]='normal';const _0x505eac=new Set([_0x16f8b0['id']]);return resetJustReturnedFlags(_0x505eac),[_0x16f8b0];}}if(isEntrancePhaseActive)return null;let _0x89426d=enemies[_0x37c66d(0x2cd)](_0x1860e3=>_0x1860e3&&_0x1860e3[_0x37c66d(0x251)]===_0x37c66d(0x311)&&!_0x1860e3['justReturned']);if(_0x89426d[_0x37c66d(0x2aa)]===0x0){_0x89426d=enemies[_0x37c66d(0x2cd)](_0x4b8d08=>_0x4b8d08&&_0x4b8d08[_0x37c66d(0x251)]===_0x37c66d(0x311));if(_0x89426d[_0x37c66d(0x2aa)]===0x0)return null;}if(_0x89426d[_0x37c66d(0x2aa)]===0x0)return null;_0x89426d[_0x37c66d(0x200)]((_0x503dd9,_0x29629a)=>(_0x29629a['gridRow']||0x0)-(_0x503dd9[_0x37c66d(0x236)]||0x0));const _0x434d06=_0x89426d[_0x37c66d(0x2aa)]<=0x3;let _0x2d3924=[];const _0x51883e='normal';gridJustCompleted&&(gridJustCompleted=![]);let _0x27d034=![];if(level>0x1&&!_0x434d06&&_0x89426d[_0x37c66d(0x2aa)]>=0x3){const _0x11b9de=_0x89426d[_0x37c66d(0x2cd)](_0x338d42=>_0x338d42['type']===ENEMY3_TYPE&&!_0x338d42[_0x37c66d(0x301)]);for(const _0x2f82d9 of _0x11b9de){const _0x5ba362=_0x89426d[_0x37c66d(0x2df)](_0x13dd15=>_0x13dd15[_0x37c66d(0x243)]===ENEMY2_TYPE&&_0x13dd15[_0x37c66d(0x236)]===_0x2f82d9[_0x37c66d(0x236)]&&_0x13dd15[_0x37c66d(0x25f)]===_0x2f82d9['gridCol']-0x1),_0xfed6e5=_0x89426d['find'](_0x2b757a=>_0x2b757a['type']===ENEMY2_TYPE&&_0x2b757a[_0x37c66d(0x236)]===_0x2f82d9['gridRow']&&_0x2b757a['gridCol']===_0x2f82d9[_0x37c66d(0x25f)]+0x1);if(_0x5ba362&&_0xfed6e5){_0x2d3924=[_0x2f82d9,_0x5ba362,_0xfed6e5],_0x27d034=!![];break;}}}if(!_0x27d034&&!_0x434d06){const _0x418a4e=_0x89426d[_0x37c66d(0x2cd)](_0x45b1f3=>_0x45b1f3['type']===ENEMY1_TYPE),_0x54bf5b=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x418a4e[_0x37c66d(0x2aa)]>=0x2&&Math[_0x37c66d(0x2d1)]()<_0x54bf5b){const _0x55b196=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x539db7=_0x418a4e[_0x37c66d(0x2aa)]>=0x3&&Math[_0x37c66d(0x2d1)]()<_0x55b196?0x3:0x2;let _0x14fc3b=![];_0x418a4e[_0x37c66d(0x200)](()=>Math[_0x37c66d(0x2d1)]()-0.5);for(let _0x14ef00=0x0;_0x14ef00<_0x418a4e[_0x37c66d(0x2aa)];_0x14ef00++){const _0x121e16=_0x418a4e[_0x14ef00];let _0x6c4d1=[_0x121e16];const _0x3efc5a=_0x418a4e[_0x37c66d(0x2cd)](_0x3cd76b=>_0x3cd76b['id']!==_0x121e16['id']&&_0x3cd76b[_0x37c66d(0x236)]===_0x121e16[_0x37c66d(0x236)]);_0x3efc5a['sort']((_0x55ecbd,_0x425756)=>Math['abs'](_0x55ecbd[_0x37c66d(0x25f)]-_0x121e16[_0x37c66d(0x25f)])-Math[_0x37c66d(0x2a7)](_0x425756['gridCol']-_0x121e16[_0x37c66d(0x25f)]));for(let _0x14021d=0x0;_0x14021d<_0x3efc5a[_0x37c66d(0x2aa)]&&_0x6c4d1[_0x37c66d(0x2aa)]<_0x539db7;_0x14021d++){_0x6c4d1['push'](_0x3efc5a[_0x14021d]);}if(_0x6c4d1['length']===_0x539db7){_0x2d3924=_0x6c4d1,_0x27d034=!![],_0x14fc3b=!![];break;}}!_0x14fc3b&&_0x418a4e[_0x37c66d(0x2aa)]>=_0x539db7&&(_0x2d3924=_0x418a4e[_0x37c66d(0x314)](0x0,_0x539db7),_0x27d034=!![]);}}if(!_0x27d034&&!_0x434d06){const _0x554709=_0x89426d[_0x37c66d(0x2cd)](_0x3caeaf=>_0x3caeaf[_0x37c66d(0x243)]===ENEMY2_TYPE),_0x1a842c=0.2;if(_0x554709[_0x37c66d(0x2aa)]>=0x2&&Math['random']()<_0x1a842c){const _0x5ddc9b=0x2;let _0x3ef18c=![];_0x554709[_0x37c66d(0x200)](()=>Math[_0x37c66d(0x2d1)]()-0.5);for(let _0x2c3aa4=0x0;_0x2c3aa4<_0x554709[_0x37c66d(0x2aa)];_0x2c3aa4++){const _0xdc2441=_0x554709[_0x2c3aa4];let _0x4f32b9=[_0xdc2441];const _0x41c26d=_0x554709[_0x37c66d(0x2cd)](_0x2bb0ab=>_0x2bb0ab['id']!==_0xdc2441['id']&&_0x2bb0ab[_0x37c66d(0x236)]===_0xdc2441['gridRow']);_0x41c26d[_0x37c66d(0x200)]((_0x2bfff2,_0x533ff2)=>Math[_0x37c66d(0x2a7)](_0x2bfff2[_0x37c66d(0x25f)]-_0xdc2441['gridCol'])-Math['abs'](_0x533ff2[_0x37c66d(0x25f)]-_0xdc2441[_0x37c66d(0x25f)]));for(let _0x72901a=0x0;_0x72901a<_0x41c26d[_0x37c66d(0x2aa)]&&_0x4f32b9['length']<_0x5ddc9b;_0x72901a++){_0x4f32b9[_0x37c66d(0x1e7)](_0x41c26d[_0x72901a]);}if(_0x4f32b9[_0x37c66d(0x2aa)]===_0x5ddc9b){_0x2d3924=_0x4f32b9,_0x27d034=!![],_0x3ef18c=!![];break;}}!_0x3ef18c&&_0x554709[_0x37c66d(0x2aa)]>=_0x5ddc9b&&(_0x2d3924=_0x554709[_0x37c66d(0x314)](0x0,_0x5ddc9b),_0x27d034=!![]);}}if(!_0x27d034&&_0x89426d['length']>0x0){const _0x260013=_0x89426d[0x0];_0x2d3924[_0x37c66d(0x1e7)](_0x260013);if(_0x89426d['length']>0x1&&!_0x434d06&&Math[_0x37c66d(0x2d1)]()<0.2){const _0x1e22b6=_0x89426d[_0x37c66d(0x2df)](_0x567610=>_0x567610['id']!==_0x260013['id']&&_0x567610['gridRow']===_0x260013[_0x37c66d(0x236)]&&_0x567610[_0x37c66d(0x25f)]===_0x260013[_0x37c66d(0x25f)]-0x1),_0x39fd12=_0x89426d['find'](_0xc364c5=>_0xc364c5['id']!==_0x260013['id']&&_0xc364c5[_0x37c66d(0x236)]===_0x260013[_0x37c66d(0x236)]&&_0xc364c5[_0x37c66d(0x25f)]===_0x260013[_0x37c66d(0x25f)]+0x1),_0x279aa2=_0x1e22b6||_0x39fd12;if(_0x279aa2){const _0x47491e=_0x260013[_0x37c66d(0x243)]===ENEMY3_TYPE&&_0x279aa2['type']===ENEMY3_TYPE;!_0x47491e&&_0x2d3924[_0x37c66d(0x1e7)](_0x279aa2);}}_0x27d034=!![];}if(_0x2d3924[_0x37c66d(0x2aa)]>0x0){_0x2d3924=_0x2d3924[_0x37c66d(0x2cd)](_0x3c98ae=>_0x3c98ae);if(_0x2d3924[_0x37c66d(0x2aa)]===0x0)return null;_0x2d3924[_0x37c66d(0x2ac)](_0x43e0ca=>{const _0x316a4b=_0x37c66d;_0x43e0ca&&(_0x43e0ca['justReturned']=!![],_0x43e0ca[_0x316a4b(0x32b)]=_0x51883e);});const _0x4a5421=new Set(_0x2d3924['map'](_0x480837=>_0x480837['id']));return resetJustReturnedFlags(_0x4a5421),_0x2d3924;}return null;}catch(_0x3e6259){return console[_0x37c66d(0x2eb)]('Error\x20in\x20findAndDetachEnemy:',_0x3e6259),null;}}function triggerImmediateCaptureDive(){const _0x5bbcbb=_0x973987;try{if(isChallengingStage||captureAttemptMadeThisLevel)return;let _0x5c0634=[];isTwoPlayerMode&&selectedGameMode===_0x5bbcbb(0x260)?(ship1&&player1Lives>0x1&&!player1IsDualShipActive&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!player1NeedsRespawnAfterCapture&&_0x5c0634[_0x5bbcbb(0x1e7)]({'playerShip':ship1,'playerNum':0x1}),ship2&&player2Lives>0x1&&!player2IsDualShipActive&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!player2NeedsRespawnAfterCapture&&_0x5c0634['push']({'playerShip':ship2,'playerNum':0x2})):ship&&playerLives>0x1&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0x5c0634[_0x5bbcbb(0x1e7)]({'playerShip':ship,'playerNum':currentPlayer});if(_0x5c0634[_0x5bbcbb(0x2aa)]===0x0)return;const _0xd8af94=_0x5c0634[Math[_0x5bbcbb(0x291)](Math[_0x5bbcbb(0x2d1)]()*_0x5c0634[_0x5bbcbb(0x2aa)])],_0x296880=_0xd8af94[_0x5bbcbb(0x278)],_0x40f1ff=enemies[_0x5bbcbb(0x2cd)](_0x53183d=>_0x53183d&&_0x53183d['state']===_0x5bbcbb(0x311)&&_0x53183d[_0x5bbcbb(0x243)]===ENEMY3_TYPE&&!_0x53183d[_0x5bbcbb(0x301)]&&!_0x53183d[_0x5bbcbb(0x2e0)]);if(_0x40f1ff['length']>0x0){const _0x4256be=_0x40f1ff[Math[_0x5bbcbb(0x291)](Math[_0x5bbcbb(0x2d1)]()*_0x40f1ff['length'])],_0x2f34e7=Date[_0x5bbcbb(0x1f5)]();_0x4256be['isPreparingForImmediateCapture']=!![],_0x4256be[_0x5bbcbb(0x1eb)]=!![],_0x4256be[_0x5bbcbb(0x299)]=_0x2f34e7;const _0x2c77f=new Set([_0x4256be['id']]);resetJustReturnedFlags(_0x2c77f);const _0x3890d9=_0x296880['x']+_0x296880[_0x5bbcbb(0x254)]/0x2,_0x3f6ab8=_0x3890d9<gameCanvas[_0x5bbcbb(0x254)]/0x2?_0x5bbcbb(0x26f):_0x5bbcbb(0x257);let _0x294386,_0x1b6357;_0x3f6ab8===_0x5bbcbb(0x26f)?_0x294386=gameCanvas[_0x5bbcbb(0x254)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:_0x294386=gameCanvas[_0x5bbcbb(0x254)]*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH;_0x1b6357=gameCanvas['height']*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR,_0x4256be['state']='preparing_capture',_0x4256be[_0x5bbcbb(0x1d6)]=_0x294386,_0x4256be[_0x5bbcbb(0x235)]=_0x1b6357,_0x4256be[_0x5bbcbb(0x2db)]=_0x2f34e7,playSound(_0x5bbcbb(0x2a4),![],0.2);const _0x1d6700=_0x4256be['id'],_0x14560c=setTimeout(()=>{const _0x366c0c=_0x5bbcbb,_0x488237=enemies[_0x366c0c(0x2df)](_0x36632c=>_0x36632c?.['id']===_0x1d6700);_0x488237&&_0x488237[_0x366c0c(0x251)]===_0x366c0c(0x293)&&(_0x488237['state']=_0x366c0c(0x2ee),captureAttemptMadeThisLevel=!![]);if(_0x488237)_0x488237[_0x366c0c(0x2e9)]=null;const _0xdb579a=enemySpawnTimeouts[_0x366c0c(0x27f)](_0x14560c);if(_0xdb579a>-0x1)enemySpawnTimeouts['splice'](_0xdb579a,0x1);},0x12c);_0x4256be[_0x5bbcbb(0x2e9)]=_0x14560c,enemySpawnTimeouts['push'](_0x14560c);}}catch(_0x81f46c){console['error'](_0x5bbcbb(0x1fd),_0x81f46c);}}function resetJustReturnedFlags(_0x3f1f8a){const _0x344c59=_0x973987;enemies[_0x344c59(0x2ac)](_0x3e1b77=>{const _0x4ae264=_0x344c59;let _0x5504a9=![];if(_0x3f1f8a instanceof Set)_0x5504a9=_0x3f1f8a[_0x4ae264(0x292)](_0x3e1b77['id']);else typeof _0x3f1f8a===_0x4ae264(0x20b)&&(_0x5504a9=_0x3e1b77['id']===_0x3f1f8a);_0x3e1b77&&_0x3e1b77[_0x4ae264(0x251)]===_0x4ae264(0x311)&&_0x3e1b77[_0x4ae264(0x1eb)]&&!_0x5504a9&&(_0x3e1b77[_0x4ae264(0x1eb)]=![]);});}function updateFloatingScores(){const _0x5ead0e=_0x973987;if(isPaused)return;try{const _0x3a29d0=Date[_0x5ead0e(0x1f5)]();floatingScores=floatingScores[_0x5ead0e(0x2cd)](_0x2914d5=>_0x3a29d0-_0x2914d5[_0x5ead0e(0x1f9)]<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0xc59bf2){console[_0x5ead0e(0x2eb)](_0x5ead0e(0x20d),_0xc59bf2),floatingScores=[];}}function updateExplosions(){const _0x176d01=_0x973987;if(isPaused)return;try{const _0x18af3c=Date[_0x176d01(0x1f5)]();for(let _0x5edcf0=explosions[_0x176d01(0x2aa)]-0x1;_0x5edcf0>=0x0;_0x5edcf0--){const _0x470c26=explosions[_0x5edcf0],_0x4382bd=_0x18af3c-_0x470c26[_0x176d01(0x1f9)];if(_0x4382bd>_0x470c26[_0x176d01(0x31c)]){explosions[_0x176d01(0x256)](_0x5edcf0,0x1);continue;}_0x470c26[_0x176d01(0x2e1)][_0x176d01(0x2ac)](_0x1f47e7=>{const _0x32ca38=_0x176d01;_0x1f47e7['x']+=_0x1f47e7['vx'],_0x1f47e7['y']+=_0x1f47e7['vy'],_0x1f47e7[_0x32ca38(0x24f)]=Math[_0x32ca38(0x269)](0x0,0x1-_0x4382bd/_0x470c26[_0x32ca38(0x31c)]*EXPLOSION_FADE_SPEED);});}}catch(_0x45897b){console[_0x176d01(0x2eb)]('Error\x20updating\x20explosions:',_0x45897b),explosions=[];}}function moveEntities(_0x4d3bf2=null,_0x18fd56=null){const _0x201bd0=_0x973987;if(isPaused)return;try{const _0xb25027=Date[_0x201bd0(0x1f5)](),_0x4d70a2=gameCanvas?gameCanvas[_0x201bd0(0x334)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x1cd324=0xbb8;if(gameCanvas&&!isTouchActiveGame){if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x201bd0(0x260)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x10134a=ship1['width']+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(leftPressed)ship1['x']-=ship1[_0x201bd0(0x2f5)];if(rightPressed)ship1['x']+=ship1[_0x201bd0(0x2f5)];ship1['x']=Math[_0x201bd0(0x269)](0x0,Math[_0x201bd0(0x228)](gameCanvas[_0x201bd0(0x254)]-_0x10134a,ship1['x'])),ship1[_0x201bd0(0x1d6)]=ship1['x'];}if(!isPlayerTwoAI&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x2e6d3c=ship2[_0x201bd0(0x254)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(p2LeftPressed)ship2['x']-=ship2[_0x201bd0(0x2f5)];if(p2RightPressed)ship2['x']+=ship2[_0x201bd0(0x2f5)];ship2['x']=Math['max'](0x0,Math[_0x201bd0(0x228)](gameCanvas[_0x201bd0(0x254)]-_0x2e6d3c,ship2['x'])),ship2[_0x201bd0(0x1d6)]=ship2['x'];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1){const _0x128cf1=ship['width']+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x246bf2=![],_0x467dc8=![];if(isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL'&&currentPlayer===0x1&&isShowingIntro){if(_0x4d3bf2!==null)_0x246bf2=_0x4d3bf2;if(_0x18fd56!==null)_0x467dc8=_0x18fd56;}if(_0x246bf2||leftPressed)ship['x']-=ship[_0x201bd0(0x2f5)];if(_0x467dc8||rightPressed)ship['x']+=ship[_0x201bd0(0x2f5)];ship['x']=Math['max'](0x0,Math['min'](gameCanvas[_0x201bd0(0x254)]-_0x128cf1,ship['x'])),ship[_0x201bd0(0x1d6)]=ship['x'];}}}}}if(!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x201bd0(0x2c3)&&currentPlayer===0x2||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x201bd0(0x208)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x201bd0(0x208)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x35bd6a=ship1['targetX']-ship1['x'];let _0x5cda95=ship1[_0x201bd0(0x2f5)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x201bd0(0x2a7)](_0x35bd6a)>AI_MOVEMENT_DEADZONE)ship1['x']+=Math['sign'](_0x35bd6a)*Math['min'](Math[_0x201bd0(0x2a7)](_0x35bd6a),_0x5cda95);const _0x472713=ship1[_0x201bd0(0x254)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship1['x']=Math[_0x201bd0(0x269)](0x0,Math['min'](gameCanvas[_0x201bd0(0x254)]-_0x472713,ship1['x']));}if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x86787c=ship2[_0x201bd0(0x1d6)]-ship2['x'];let _0x44994c=ship2[_0x201bd0(0x2f5)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x201bd0(0x2a7)](_0x86787c)>AI_MOVEMENT_DEADZONE)ship2['x']+=Math[_0x201bd0(0x1f6)](_0x86787c)*Math[_0x201bd0(0x228)](Math['abs'](_0x86787c),_0x44994c);const _0x44e6ab=ship2[_0x201bd0(0x254)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship2['x']=Math['max'](0x0,Math['min'](gameCanvas['width']-_0x44e6ab,ship2['x']));}}else{if(ship){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){const _0x1e363c=ship['targetX']-ship['x'];let _0xbe34ed=ship[_0x201bd0(0x2f5)]*AI_POSITION_MOVE_SPEED_FACTOR;isPlayerTwoAI&&selectedGameMode===_0x201bd0(0x2c3)&&currentPlayer===0x2&&(_0xbe34ed=ship[_0x201bd0(0x2f5)]*(AI_POSITION_MOVE_SPEED_FACTOR*1.15));Math['abs'](_0x1e363c)>AI_MOVEMENT_DEADZONE&&(ship['x']+=Math[_0x201bd0(0x1f6)](_0x1e363c)*Math['min'](Math[_0x201bd0(0x2a7)](_0x1e363c),_0xbe34ed));const _0x1cc844=ship[_0x201bd0(0x254)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship['x']=Math[_0x201bd0(0x269)](0x0,Math[_0x201bd0(0x228)](gameCanvas[_0x201bd0(0x254)]-_0x1cc844,ship['x']));}}}}if(isTwoPlayerMode&&selectedGameMode===_0x201bd0(0x260)){if(isPlayer1WaitingForRespawn&&_0xb25027>=player1RespawnTime)isPlayer1WaitingForRespawn=![];if(isPlayer1Invincible&&_0xb25027>=player1InvincibilityEndTime)isPlayer1Invincible=![];if(isPlayer2WaitingForRespawn&&_0xb25027>=player2RespawnTime)isPlayer2WaitingForRespawn=![];if(isPlayer2Invincible&&_0xb25027>=player2InvincibilityEndTime)isPlayer2Invincible=![];}else{if(isWaitingForRespawn&&_0xb25027>=respawnTime)isWaitingForRespawn=![];if(isInvincible&&_0xb25027>=invincibilityEndTime)isInvincible=![];}for(let _0x49846d=bullets[_0x201bd0(0x2aa)]-0x1;_0x49846d>=0x0;_0x49846d--){const _0x7b0b87=bullets[_0x49846d];if(!_0x7b0b87){bullets['splice'](_0x49846d,0x1);continue;}_0x7b0b87['y']-=_0x7b0b87[_0x201bd0(0x2f5)];if(_0x7b0b87['y']+PLAYER_BULLET_HEIGHT<0x0){bullets['splice'](_0x49846d,0x1);continue;}for(let _0x362969=enemies[_0x201bd0(0x2aa)]-0x1;_0x362969>=0x0;_0x362969--){const _0x5035f7=enemies[_0x362969];if(!_0x5035f7){enemies[_0x201bd0(0x256)](_0x362969,0x1);continue;}const _0x38dc35={'x':_0x5035f7['x'],'y':_0x5035f7['y'],'width':_0x5035f7[_0x201bd0(0x243)]===ENEMY3_TYPE?BOSS_WIDTH:_0x5035f7[_0x201bd0(0x243)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,'height':_0x5035f7[_0x201bd0(0x243)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x5035f7['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT},_0x30d1df={'x':_0x7b0b87['x'],'y':_0x7b0b87['y'],'width':_0x7b0b87['width'],'height':_0x7b0b87[_0x201bd0(0x334)]};if(checkCollision(_0x30d1df,_0x38dc35)){bullets[_0x201bd0(0x256)](_0x49846d,0x1);const _0xfb641b=handleEnemyHit(_0x5035f7,_0x7b0b87['playerId']);if(_0xfb641b[_0x201bd0(0x202)])enemies[_0x201bd0(0x256)](_0x362969,0x1);break;}}}for(let _0x52dd43=enemyBullets[_0x201bd0(0x2aa)]-0x1;_0x52dd43>=0x0;_0x52dd43--){const _0xecbecc=enemyBullets[_0x52dd43];if(!_0xecbecc){enemyBullets['splice'](_0x52dd43,0x1);continue;}_0xecbecc['x']+=_0xecbecc['vx'],_0xecbecc['y']+=_0xecbecc['vy'],(_0xecbecc['y']>gameCanvas['height']||_0xecbecc['y']<-ENEMY_BULLET_HEIGHT||_0xecbecc['x']<-ENEMY_BULLET_WIDTH||_0xecbecc['x']>gameCanvas['width'])&&enemyBullets['splice'](_0x52dd43,0x1);}const _0x47a406=gameCanvas?gameCanvas[_0x201bd0(0x334)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x46144f=0x2;for(let _0x5690d3=fallingShips[_0x201bd0(0x2aa)]-0x1;_0x5690d3>=0x0;_0x5690d3--){const _0x193564=fallingShips[_0x5690d3];if(!_0x193564){fallingShips['splice'](_0x5690d3,0x1);continue;}let _0x2c1a0c=![];if(!_0x193564[_0x201bd0(0x316)]){_0x193564['y']+=FALLING_SHIP_SPEED;if(_0x193564['y']>=_0x47a406){_0x193564['y']=_0x47a406,_0x193564[_0x201bd0(0x316)]=!![],_0x193564[_0x201bd0(0x2f4)]=_0xb25027;!_0x193564[_0x201bd0(0x2f6)]&&(_0x193564[_0x201bd0(0x28e)]=0x0,_0x193564[_0x201bd0(0x2f6)]=!![]);let _0x2355ff=null,_0x5e91b9=()=>{},_0x3b7bb8=![],_0x41fc94=![],_0x375b97=![],_0x531664=null;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x201bd0(0x208)){if(_0x193564[_0x201bd0(0x304)]==='player1'&&ship1&&player1Lives>0x0)_0x2355ff=ship1,_0x3b7bb8=player1IsDualShipActive,_0x5e91b9=()=>{player1IsDualShipActive=!![];},_0x375b97=!![],_0x531664=_0x201bd0(0x2a5);else(_0x193564[_0x201bd0(0x304)]===_0x201bd0(0x24c)||_0x193564[_0x201bd0(0x304)]===_0x201bd0(0x1ea))&&ship2&&player2Lives>0x0&&(_0x2355ff=ship2,_0x3b7bb8=player2IsDualShipActive,_0x5e91b9=()=>{player2IsDualShipActive=!![];},_0x375b97=!![],_0x531664=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x201bd0(0x208)?_0x201bd0(0x1ea):'player2');}else{if(isTwoPlayerMode&&selectedGameMode===_0x201bd0(0x260)){if(_0x193564[_0x201bd0(0x304)]===_0x201bd0(0x2a5)&&ship1&&player1Lives>0x0)_0x2355ff=ship1,_0x3b7bb8=player1IsDualShipActive,_0x41fc94=isPlayer1ShipCaptured,_0x5e91b9=()=>{player1IsDualShipActive=!![],isPlayer1ShipCaptured=![];},_0x375b97=!![],_0x531664=_0x201bd0(0x2a5);else _0x193564[_0x201bd0(0x304)]===_0x201bd0(0x24c)&&ship2&&player2Lives>0x0&&(_0x2355ff=ship2,_0x3b7bb8=player2IsDualShipActive,_0x41fc94=isPlayer2ShipCaptured,_0x5e91b9=()=>{player2IsDualShipActive=!![],isPlayer2ShipCaptured=![];},_0x375b97=!![],_0x531664=_0x201bd0(0x24c));}else ship&&playerLives>0x0&&(_0x2355ff=ship,_0x3b7bb8=isDualShipActive,_0x41fc94=isShipCaptured,_0x5e91b9=()=>{const _0x1d3e26=_0x201bd0;isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x1d3e26(0x2c3)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}isShipCaptured=![];},_0x375b97=!![],_0x531664=isTwoPlayerMode&&selectedGameMode===_0x201bd0(0x2c3)?String(currentPlayer):'player1');}if(_0x375b97&&!_0x3b7bb8){_0x5e91b9(),playSound(_0x201bd0(0x261),![],0.4);if(_0x41fc94&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x201bd0(0x208))){if(_0x531664===_0x201bd0(0x2a5)&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0xb25027+INVINCIBILITY_DURATION_MS;else{if(_0x531664===_0x201bd0(0x24c)&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0xb25027+INVINCIBILITY_DURATION_MS;else playerNumForDocking!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0xb25027+INVINCIBILITY_DURATION_MS);}}fallingShips['splice'](_0x5690d3,0x1),_0x2c1a0c=!![];continue;}else{if(_0x375b97&&_0x3b7bb8){fallingShips[_0x201bd0(0x256)](_0x5690d3,0x1),_0x2c1a0c=!![];continue;}else{fallingShips['splice'](_0x5690d3,0x1),_0x2c1a0c=!![];continue;}}}}if(_0x2c1a0c)continue;const _0x19856c=_0xb25027-_0x193564['creationTime'];if(_0x19856c<FALLING_SHIP_FADE_DURATION_MS)_0x193564[_0x201bd0(0x22e)]=Math[_0x201bd0(0x269)](0x0,0x1-_0x19856c/FALLING_SHIP_FADE_DURATION_MS);else _0x193564[_0x201bd0(0x22e)]=0x0;if(_0x193564[_0x201bd0(0x2f6)])_0x193564['rotation']=0x0;else{if(!_0x193564[_0x201bd0(0x316)]&&typeof _0x193564[_0x201bd0(0x32e)]===_0x201bd0(0x1f7)&&typeof FALLING_SHIP_ROTATION_SPEED===_0x201bd0(0x1f7)&&FALLING_SHIP_ROTATION_SPEED>0x0){const _0x2d5309=FALLING_SHIP_ROTATION_SPEED*_0x193564[_0x201bd0(0x32e)];_0x193564[_0x201bd0(0x28e)]+=_0x2d5309,_0x193564[_0x201bd0(0x21e)]+=Math[_0x201bd0(0x2a7)](_0x2d5309);if(_0x193564['totalRotation']>=_0x46144f*0x2*Math['PI'])_0x193564['rotation']=0x0,_0x193564['rotationCompleted']=!![];else{if(_0x193564[_0x201bd0(0x28e)]>Math['PI']*0x2)_0x193564[_0x201bd0(0x28e)]-=Math['PI']*0x2;if(_0x193564['rotation']<0x0)_0x193564['rotation']+=Math['PI']*0x2;}}else _0x193564[_0x201bd0(0x28e)]=_0x193564[_0x201bd0(0x28e)]||0x0;}if(!_0x193564[_0x201bd0(0x316)]){let _0x2aed6e=null,_0x5a6d73=()=>{},_0x5d448a=0x0,_0x2da5e3=![],_0x22470f=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x193564[_0x201bd0(0x304)]==='player1'&&ship1&&player1Lives>0x0)_0x2aed6e=ship1,_0x22470f=player1IsDualShipActive,_0x5a6d73=()=>{if(!_0x22470f)player1IsDualShipActive=!![];},_0x5d448a=0x1;else(_0x193564[_0x201bd0(0x304)]===_0x201bd0(0x24c)||_0x193564[_0x201bd0(0x304)]===_0x201bd0(0x1ea))&&ship2&&player2Lives>0x0&&(_0x2aed6e=ship2,_0x22470f=player2IsDualShipActive,_0x5a6d73=()=>{if(!_0x22470f)player2IsDualShipActive=!![];},_0x5d448a=0x2);}else{if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x193564[_0x201bd0(0x304)]===_0x201bd0(0x2a5)&&ship1&&player1Lives>0x0)_0x2aed6e=ship1,_0x2da5e3=isPlayer1ShipCaptured,_0x22470f=player1IsDualShipActive,_0x5a6d73=()=>{if(!_0x22470f)player1IsDualShipActive=!![];isPlayer1ShipCaptured=![];},_0x5d448a=0x1;else _0x193564[_0x201bd0(0x304)]===_0x201bd0(0x24c)&&ship2&&player2Lives>0x0&&(_0x2aed6e=ship2,_0x2da5e3=isPlayer2ShipCaptured,_0x22470f=player2IsDualShipActive,_0x5a6d73=()=>{if(!_0x22470f)player2IsDualShipActive=!![];isPlayer2ShipCaptured=![];},_0x5d448a=0x2);}else ship&&playerLives>0x0&&(_0x2aed6e=ship,_0x2da5e3=isShipCaptured,_0x22470f=isDualShipActive,_0x5a6d73=()=>{const _0x847bd7=_0x201bd0;if(!_0x22470f){isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x847bd7(0x2c3)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}}isShipCaptured=![];},_0x5d448a=isTwoPlayerMode&&selectedGameMode===_0x201bd0(0x2c3)?currentPlayer:0x1);}if(_0x2aed6e&&!_0x22470f){const _0x46fa08={'x':_0x193564['x'],'y':_0x193564['y'],'width':_0x193564[_0x201bd0(0x254)],'height':_0x193564[_0x201bd0(0x334)]},_0xb8111c={'x':_0x2aed6e['x'],'y':_0x2aed6e['y'],'width':_0x2aed6e[_0x201bd0(0x254)],'height':_0x2aed6e[_0x201bd0(0x334)]};if(checkCollision(_0x46fa08,_0xb8111c)){_0x5a6d73();if(_0x2da5e3&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x201bd0(0x208))){playSound(_0x201bd0(0x261),![],0.4);if(_0x5d448a===0x1&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0xb25027+INVINCIBILITY_DURATION_MS;else{if(_0x5d448a===0x2&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0xb25027+INVINCIBILITY_DURATION_MS;else _0x5d448a!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0xb25027+INVINCIBILITY_DURATION_MS);}}else playSound(_0x201bd0(0x261),![],0.4);fallingShips[_0x201bd0(0x256)](_0x5690d3,0x1);continue;}}}if(!_0x193564[_0x201bd0(0x316)]&&_0x193564['y']>=gameCanvas[_0x201bd0(0x334)])fallingShips[_0x201bd0(0x256)](_0x5690d3,0x1);}let _0xc65936=0x0;const _0x2e8c37=enemies[_0x201bd0(0x322)](_0x47ce4d=>_0x47ce4d?.[_0x201bd0(0x251)]==='in_grid'),_0x5f2ab8=!isChallengingStage&&!isWaveTransitioning&&_0x2e8c37&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x201bd0(0x260)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage));if(_0x5f2ab8){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0x201bd0(0x2a9),!![],0.1));const _0x1e404f=enemies[_0x201bd0(0x2cd)](_0x3f0932=>_0x3f0932?.['state']===_0x201bd0(0x311));if(_0x1e404f['length']>0x0){let _0x7988c=gameCanvas[_0x201bd0(0x254)],_0x587a5d=0x0;_0x1e404f[_0x201bd0(0x2ac)](_0x2dd6bf=>{const _0x504de6=_0x201bd0;_0x2dd6bf&&(_0x7988c=Math['min'](_0x7988c,_0x2dd6bf['x']),_0x587a5d=Math[_0x504de6(0x269)](_0x587a5d,_0x2dd6bf['x']+_0x2dd6bf[_0x504de6(0x254)]));});const _0x4c7ae9=gameCanvas[_0x201bd0(0x254)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x14bd51=gameCanvas['width']*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x587a5d>=_0x14bd51)gridMoveDirection=-0x1;else{if(gridMoveDirection===-0x1&&_0x7988c<=_0x4c7ae9)gridMoveDirection=0x1;}const _0x52f43f=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0xc65936=_0x52f43f*gridMoveDirection,currentGridOffsetX+=_0xc65936,enemies[_0x201bd0(0x2ac)](_0x1a8a9=>{const _0x1faec6=_0x201bd0;if(_0x1a8a9&&(_0x1a8a9[_0x1faec6(0x251)]==='returning'||_0x1a8a9[_0x1faec6(0x251)]===_0x1faec6(0x311)||_0x1a8a9['state']===_0x1faec6(0x1ee)))try{const _0x244b72=_0x1a8a9['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x1a8a9[_0x1faec6(0x243)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x40c5aa,y:_0x2a4df5}=getCurrentGridSlotPosition(_0x1a8a9[_0x1faec6(0x236)],_0x1a8a9[_0x1faec6(0x25f)],_0x244b72);_0x1a8a9[_0x1faec6(0x323)]=_0x40c5aa,_0x1a8a9[_0x1faec6(0x295)]=_0x2a4df5;}catch(_0x18bd27){console['error']('Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20'+_0x1a8a9?.['id']+_0x1faec6(0x30a)+_0x1a8a9?.[_0x1faec6(0x251)]+_0x1faec6(0x320),_0x18bd27);}});}}else isGridSoundPlaying&&(stopSound('gridBackgroundSound'),isGridSoundPlaying=![]),_0xc65936=0x0;for(let _0xfdab2d=enemies[_0x201bd0(0x2aa)]-0x1;_0xfdab2d>=0x0;_0xfdab2d--){let _0x518765=enemies[_0xfdab2d];if(!_0x518765){enemies['splice'](_0xfdab2d,0x1);continue;}const _0x125c82=_0x518765['id'];if(_0x518765['capturePrepareTimeout']&&_0x518765[_0x201bd0(0x251)]!==_0x201bd0(0x293)){clearTimeout(_0x518765[_0x201bd0(0x2e9)]);const _0x5a9462=enemySpawnTimeouts[_0x201bd0(0x27f)](_0x518765[_0x201bd0(0x2e9)]);if(_0x5a9462>-0x1)enemySpawnTimeouts[_0x201bd0(0x256)](_0x5a9462,0x1);_0x518765[_0x201bd0(0x2e9)]=null;}const _0xb76da6=_0x518765[_0x201bd0(0x243)]===ENEMY3_TYPE?BOSS_WIDTH:_0x518765[_0x201bd0(0x243)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x5a6ab4=_0x518765[_0x201bd0(0x243)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x518765[_0x201bd0(0x243)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x5ee24f=_0x518765[_0x201bd0(0x251)];switch(_0x518765[_0x201bd0(0x251)]){case _0x201bd0(0x23f):{let _0x7c8f7f=CS_ENTRANCE_PATH_SPEED;const _0x17ef46=_0x518765['pathSpeedMultiplier']||0x1;_0x7c8f7f*=_0x17ef46;if(!isChallengingStage){enemies[_0x201bd0(0x256)](_0xfdab2d,0x1),_0x518765=null;break;}let _0x25cab5=challengingStagePaths,_0x2f1b7e=_0x25cab5[_0x518765[_0x201bd0(0x2e8)]];if(!_0x2f1b7e||_0x518765[_0x201bd0(0x206)]>=_0x2f1b7e[_0x201bd0(0x2aa)]){enemies['splice'](_0xfdab2d,0x1),_0x518765=null;break;}const _0x43431e=_0x2f1b7e[_0x518765[_0x201bd0(0x206)]];if(!_0x43431e||!_0x43431e['p0']||!_0x43431e['p1']||!_0x43431e['p2']||!_0x43431e['p3']){console[_0x201bd0(0x2eb)](_0x201bd0(0x1e9)+_0x518765[_0x201bd0(0x206)]+'\x20for\x20path\x20'+_0x518765['entrancePathId']+_0x201bd0(0x296)+_0x518765['id']),enemies['splice'](_0xfdab2d,0x1),_0x518765=null;break;}_0x518765[_0x201bd0(0x27b)]+=_0x7c8f7f;let _0xc6205e,_0x4fb6f3,_0xc39fa9=_0x518765['x'],_0x281293=_0x518765['y'];if(_0x518765[_0x201bd0(0x27b)]>=0x1){_0x518765[_0x201bd0(0x27b)]=0x0,_0x518765[_0x201bd0(0x206)]++;if(_0x518765['pathSegmentIndex']>=_0x2f1b7e['length'])enemies[_0x201bd0(0x256)](_0xfdab2d,0x1),_0x518765=null;else{const _0x48b9f7=_0x2f1b7e[_0x518765['pathSegmentIndex']];_0x48b9f7?.['p0']?(_0xc6205e=_0x48b9f7['p0']['x'],_0x4fb6f3=_0x48b9f7['p0']['y']):(console[_0x201bd0(0x2eb)](_0x201bd0(0x212)+_0x518765[_0x201bd0(0x206)]+_0x201bd0(0x279)+_0x518765[_0x201bd0(0x2e8)]+_0x201bd0(0x296)+_0x125c82),enemies[_0x201bd0(0x256)](_0xfdab2d,0x1),_0x518765=null);}}else try{_0xc6205e=calculateBezierPoint(_0x518765[_0x201bd0(0x27b)],_0x43431e['p0']['x'],_0x43431e['p1']['x'],_0x43431e['p2']['x'],_0x43431e['p3']['x']),_0x4fb6f3=calculateBezierPoint(_0x518765[_0x201bd0(0x27b)],_0x43431e['p0']['y'],_0x43431e['p1']['y'],_0x43431e['p2']['y'],_0x43431e['p3']['y']);}catch(_0x59060f){console[_0x201bd0(0x2eb)](_0x201bd0(0x22d)+_0x125c82+':',_0x59060f),enemies[_0x201bd0(0x256)](_0xfdab2d,0x1),_0x518765=null;}_0x518765&&(isNaN(_0xc6205e)||isNaN(_0x4fb6f3)?(console[_0x201bd0(0x2eb)](_0x201bd0(0x246)+_0x125c82+_0x201bd0(0x312)),enemies[_0x201bd0(0x256)](_0xfdab2d,0x1),_0x518765=null):(_0x518765['velocityX']=_0xc6205e-_0xc39fa9,_0x518765['velocityY']=_0x4fb6f3-_0x281293,_0x518765['x']=_0xc6205e,_0x518765['y']=_0x4fb6f3));break;}case _0x201bd0(0x32a):{if(isChallengingStage){enemies[_0x201bd0(0x256)](_0xfdab2d,0x1),_0x518765=null;break;}let _0x1cb08a=normalWaveEntrancePaths,_0x3b29fb=_0x1cb08a[_0x518765['entrancePathId']],_0x384729;_0x518765['entrancePathId']===_0x201bd0(0x205)||_0x518765[_0x201bd0(0x2e8)]==='boss_loop_right'?_0x384729=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x384729=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x3b29fb){console['warn'](_0x201bd0(0x20f)+_0x125c82+_0x201bd0(0x285)+_0x518765[_0x201bd0(0x2e8)]+_0x201bd0(0x250));try{_0x518765[_0x201bd0(0x323)]=_0x518765['targetGridX']??gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765['targetGridY']=_0x518765[_0x201bd0(0x295)]??ENEMY_TOP_MARGIN;}catch(_0x303aea){console[_0x201bd0(0x2eb)](_0x201bd0(0x2c4)+_0x125c82+_0x201bd0(0x325),_0x303aea),_0x518765['targetGridX']=gameCanvas['width']/0x2,_0x518765[_0x201bd0(0x295)]=ENEMY_TOP_MARGIN;}_0x518765[_0x201bd0(0x251)]=_0x201bd0(0x1ee),_0x518765[_0x201bd0(0x27b)]=0x0,_0x518765[_0x201bd0(0x206)]=0x0,_0x518765['velocityX']=0x0,_0x518765[_0x201bd0(0x2c9)]=0x0;_0x518765['squadronId']!==undefined&&squadronCompletionStatus[_0x518765[_0x201bd0(0x2bd)]]&&squadronCompletionStatus[_0x518765[_0x201bd0(0x2bd)]][_0x201bd0(0x2ea)]++;break;}if(_0x518765[_0x201bd0(0x206)]>=_0x3b29fb[_0x201bd0(0x2aa)]){console[_0x201bd0(0x259)](_0x201bd0(0x20f)+_0x125c82+_0x201bd0(0x29b)+_0x518765[_0x201bd0(0x206)]+_0x201bd0(0x281)+_0x518765['entrancePathId']+_0x201bd0(0x250));try{_0x518765[_0x201bd0(0x323)]=_0x518765[_0x201bd0(0x323)]??gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=_0x518765[_0x201bd0(0x295)]??ENEMY_TOP_MARGIN;}catch(_0x2d0ba1){console[_0x201bd0(0x2eb)](_0x201bd0(0x2c4)+_0x125c82+_0x201bd0(0x28b),_0x2d0ba1),_0x518765['targetGridX']=gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=ENEMY_TOP_MARGIN;}_0x518765[_0x201bd0(0x251)]=_0x201bd0(0x1ee),_0x518765[_0x201bd0(0x27b)]=0x0,_0x518765[_0x201bd0(0x206)]=0x0,_0x518765[_0x201bd0(0x1f1)]=0x0,_0x518765[_0x201bd0(0x2c9)]=0x0;_0x518765[_0x201bd0(0x2bd)]!==undefined&&squadronCompletionStatus[_0x518765[_0x201bd0(0x2bd)]]&&squadronCompletionStatus[_0x518765['squadronId']][_0x201bd0(0x2ea)]++;break;}const _0x25ff77=_0x3b29fb[_0x518765['pathSegmentIndex']];if(!_0x25ff77||!_0x25ff77['p0']||!_0x25ff77['p1']||!_0x25ff77['p2']||!_0x25ff77['p3']){console[_0x201bd0(0x2eb)]('Invalid\x20Normal\x20Bezier\x20segment\x20'+_0x518765['pathSegmentIndex']+_0x201bd0(0x2d4)+_0x518765[_0x201bd0(0x2e8)]+_0x201bd0(0x296)+_0x125c82+_0x201bd0(0x250));try{_0x518765[_0x201bd0(0x323)]=_0x518765[_0x201bd0(0x323)]??gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=_0x518765[_0x201bd0(0x295)]??ENEMY_TOP_MARGIN+_0x518765[_0x201bd0(0x236)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x54ece1){console[_0x201bd0(0x2eb)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x125c82+_0x201bd0(0x271),_0x54ece1),_0x518765['targetGridX']=gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=ENEMY_TOP_MARGIN;}_0x518765[_0x201bd0(0x251)]='moving_to_grid',_0x518765[_0x201bd0(0x27b)]=0x0,_0x518765[_0x201bd0(0x206)]=0x0,_0x518765[_0x201bd0(0x1f1)]=0x0,_0x518765['velocityY']=0x0;_0x518765[_0x201bd0(0x2bd)]!==undefined&&squadronCompletionStatus[_0x518765['squadronId']]&&squadronCompletionStatus[_0x518765['squadronId']][_0x201bd0(0x2ea)]++;break;}_0x518765[_0x201bd0(0x27b)]+=_0x384729;let _0x47687e,_0x3a8832,_0x434669=_0x518765['x'],_0x12258a=_0x518765['y'];if(_0x518765['pathT']>=0x1){_0x518765[_0x201bd0(0x27b)]=0x0,_0x518765['pathSegmentIndex']++;if(_0x518765[_0x201bd0(0x206)]>=_0x3b29fb[_0x201bd0(0x2aa)]){let _0x54b2df,_0x2e850c;try{_0x54b2df=calculateBezierPoint(0x1,_0x25ff77['p0']['x'],_0x25ff77['p1']['x'],_0x25ff77['p2']['x'],_0x25ff77['p3']['x']),_0x2e850c=calculateBezierPoint(0x1,_0x25ff77['p0']['y'],_0x25ff77['p1']['y'],_0x25ff77['p2']['y'],_0x25ff77['p3']['y']);}catch(_0x23e4bb){console[_0x201bd0(0x2eb)](_0x201bd0(0x272)+_0x125c82+_0x201bd0(0x247)+_0x518765[_0x201bd0(0x2e8)],_0x23e4bb),_0x54b2df=_0x25ff77['p3']['x'],_0x2e850c=_0x25ff77['p3']['y'];}_0x518765['x']=_0x54b2df,_0x518765['y']=_0x2e850c;try{_0x518765[_0x201bd0(0x323)]=_0x518765[_0x201bd0(0x323)]??gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=_0x518765[_0x201bd0(0x295)]??ENEMY_TOP_MARGIN;}catch(_0x44fb48){console[_0x201bd0(0x2eb)](_0x201bd0(0x2ab)+_0x125c82+_0x201bd0(0x247)+_0x518765[_0x201bd0(0x2e8)],_0x44fb48),_0x518765[_0x201bd0(0x323)]=_0x518765['x'],_0x518765[_0x201bd0(0x295)]=ENEMY_TOP_MARGIN+_0x518765[_0x201bd0(0x236)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x3742e2=_0x518765[_0x201bd0(0x251)];_0x518765['state']=_0x201bd0(0x1ee),_0x518765['velocityX']=0x0,_0x518765[_0x201bd0(0x2c9)]=0x0,_0x518765[_0x201bd0(0x206)]=0x0;_0x3742e2===_0x201bd0(0x32a)&&_0x518765[_0x201bd0(0x2bd)]!==undefined&&squadronCompletionStatus[_0x518765['squadronId']]&&squadronCompletionStatus[_0x518765['squadronId']][_0x201bd0(0x2ea)]++;break;}else{const _0x59bfe1=_0x3b29fb[_0x518765[_0x201bd0(0x206)]];if(_0x59bfe1?.['p0'])_0x47687e=_0x59bfe1['p0']['x'],_0x3a8832=_0x59bfe1['p0']['y'];else{console['error'](_0x201bd0(0x28c)+_0x518765[_0x201bd0(0x206)]+'\x20for\x20SHARED\x20path\x20'+_0x518765[_0x201bd0(0x2e8)]+_0x201bd0(0x296)+_0x125c82+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x518765[_0x201bd0(0x323)]=_0x518765['targetGridX']??gameCanvas['width']/0x2,_0x518765['targetGridY']=_0x518765['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x581974){console[_0x201bd0(0x2eb)](_0x201bd0(0x2c4)+_0x125c82+_0x201bd0(0x1db),_0x581974),_0x518765[_0x201bd0(0x323)]=gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=ENEMY_TOP_MARGIN;}_0x518765[_0x201bd0(0x251)]=_0x201bd0(0x1ee),_0x518765[_0x201bd0(0x27b)]=0x0,_0x518765[_0x201bd0(0x206)]=0x0,_0x518765['velocityX']=0x0,_0x518765['velocityY']=0x0;_0x518765[_0x201bd0(0x2bd)]!==undefined&&squadronCompletionStatus[_0x518765[_0x201bd0(0x2bd)]]&&squadronCompletionStatus[_0x518765['squadronId']][_0x201bd0(0x2ea)]++;break;}}}else try{_0x47687e=calculateBezierPoint(_0x518765[_0x201bd0(0x27b)],_0x25ff77['p0']['x'],_0x25ff77['p1']['x'],_0x25ff77['p2']['x'],_0x25ff77['p3']['x']),_0x3a8832=calculateBezierPoint(_0x518765[_0x201bd0(0x27b)],_0x25ff77['p0']['y'],_0x25ff77['p1']['y'],_0x25ff77['p2']['y'],_0x25ff77['p3']['y']);}catch(_0x1797d7){console['error'](_0x201bd0(0x313)+_0x125c82+':',_0x1797d7);try{_0x518765[_0x201bd0(0x323)]=_0x518765[_0x201bd0(0x323)]??gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=_0x518765[_0x201bd0(0x295)]??ENEMY_TOP_MARGIN;}catch(_0x212f10){console['error'](_0x201bd0(0x2c4)+_0x125c82+_0x201bd0(0x335),_0x212f10),_0x518765[_0x201bd0(0x323)]=gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=ENEMY_TOP_MARGIN;}_0x518765[_0x201bd0(0x251)]=_0x201bd0(0x1ee),_0x518765[_0x201bd0(0x27b)]=0x0,_0x518765[_0x201bd0(0x206)]=0x0,_0x518765[_0x201bd0(0x1f1)]=0x0,_0x518765[_0x201bd0(0x2c9)]=0x0;_0x518765[_0x201bd0(0x2bd)]!==undefined&&squadronCompletionStatus[_0x518765[_0x201bd0(0x2bd)]]&&squadronCompletionStatus[_0x518765['squadronId']][_0x201bd0(0x2ea)]++;break;}if(_0x518765&&_0x518765[_0x201bd0(0x251)]==='following_entrance_path'){if(isNaN(_0x47687e)||isNaN(_0x3a8832)){console[_0x201bd0(0x2eb)](_0x201bd0(0x2d9)+_0x125c82+_0x201bd0(0x250));try{_0x518765[_0x201bd0(0x323)]=_0x518765[_0x201bd0(0x323)]??gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=_0x518765[_0x201bd0(0x295)]??ENEMY_TOP_MARGIN;}catch(_0x6994c1){console[_0x201bd0(0x2eb)](_0x201bd0(0x2c4)+_0x125c82+_0x201bd0(0x204),_0x6994c1),_0x518765[_0x201bd0(0x323)]=gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=ENEMY_TOP_MARGIN;}_0x518765['state']=_0x201bd0(0x1ee),_0x518765[_0x201bd0(0x27b)]=0x0,_0x518765[_0x201bd0(0x206)]=0x0,_0x518765[_0x201bd0(0x1f1)]=0x0,_0x518765['velocityY']=0x0,_0x518765[_0x201bd0(0x2bd)]!==undefined&&squadronCompletionStatus[_0x518765['squadronId']]&&squadronCompletionStatus[_0x518765[_0x201bd0(0x2bd)]]['completed']++;}else{let _0x2d5778=_0x47687e;const _0xd08bca=currentWavePatternIndex===0x1&&(_0x518765[_0x201bd0(0x2bd)]===0x2||_0x518765[_0x201bd0(0x2bd)]===0x3),_0xcdb2ac=typeof _0x518765['squadronEnemyIndex']===_0x201bd0(0x1f7)&&_0x518765[_0x201bd0(0x290)]%0x2!==0x0;if(_0xd08bca&&_0xcdb2ac){const _0x759760=_0xb76da6+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x2d5778=_0x47687e+_0x759760;}_0x518765['velocityX']=_0x2d5778-_0x434669,_0x518765['velocityY']=_0x3a8832-_0x12258a,_0x518765['x']=_0x2d5778,_0x518765['y']=_0x3a8832;}}break;}case _0x201bd0(0x1ee):{if(_0x518765[_0x201bd0(0x323)]==null||_0x518765['targetGridY']==null){console[_0x201bd0(0x259)](_0x201bd0(0x20f)+_0x125c82+_0x201bd0(0x262));try{const {x:_0x1831c9,y:_0x5b81ba}=getCurrentGridSlotPosition(_0x518765[_0x201bd0(0x236)],_0x518765[_0x201bd0(0x25f)],_0xb76da6);_0x518765[_0x201bd0(0x323)]=_0x1831c9,_0x518765[_0x201bd0(0x295)]=_0x5b81ba;}catch(_0x145d36){console[_0x201bd0(0x2eb)](_0x201bd0(0x2c4)+_0x125c82+_0x201bd0(0x324),_0x145d36),_0x518765[_0x201bd0(0x251)]=_0x201bd0(0x311),_0x518765['x']=gameCanvas['width']/0x2,_0x518765['y']=ENEMY_TOP_MARGIN;break;}}const _0x4d9626=_0x518765[_0x201bd0(0x323)],_0x15ef46=_0x518765['targetGridY'],_0xa85be7=_0x4d9626-_0x518765['x'],_0x203e90=_0x15ef46-_0x518765['y'],_0x3b87b6=Math['sqrt'](_0xa85be7*_0xa85be7+_0x203e90*_0x203e90),_0x8d5c1d=ENTRANCE_SPEED*1.2,_0x18ccac=_0x8d5c1d*0.5;if(_0x3b87b6>_0x18ccac)_0x518765['velocityX']=_0xa85be7/_0x3b87b6*_0x8d5c1d,_0x518765[_0x201bd0(0x2c9)]=_0x203e90/_0x3b87b6*_0x8d5c1d,_0x518765['x']+=_0x518765[_0x201bd0(0x1f1)],_0x518765['y']+=_0x518765[_0x201bd0(0x2c9)];else{_0x518765['x']=_0x4d9626,_0x518765['y']=_0x15ef46,_0x518765[_0x201bd0(0x1f1)]=0x0,_0x518765[_0x201bd0(0x2c9)]=0x0;const _0x900abd=_0x518765['state'];_0x518765[_0x201bd0(0x251)]=_0x201bd0(0x311),_0x518765[_0x201bd0(0x1eb)]=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(_0x201bd0(0x2a9),!![],0.1));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0xb25027,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date['now'](),firstEnemyLanded=!![]);if(_0x900abd===_0x201bd0(0x1ee)&&!isChallengingStage&&!isFullGridWave&&_0x518765['squadronId']!==undefined){const _0x20fc39=_0x518765[_0x201bd0(0x2bd)],_0x52fcc9=squadronCompletionStatus[_0x20fc39];if(_0x52fcc9&&!_0x52fcc9[_0x201bd0(0x303)]){const _0x5ee18b=enemies[_0x201bd0(0x24d)](_0x612131=>{const _0x10c0b9=_0x201bd0;if(_0x612131&&_0x612131['squadronId']===_0x20fc39)return _0x612131[_0x10c0b9(0x251)]===_0x10c0b9(0x311)||!enemies[_0x10c0b9(0x322)](_0x153506=>_0x153506['id']===_0x612131['id']);return!![];});if(_0x5ee18b){_0x52fcc9[_0x201bd0(0x303)]=!![];const _0x241e13=enemies[_0x201bd0(0x2cd)](_0x4f86c0=>_0x4f86c0&&_0x4f86c0['squadronId']===_0x20fc39&&_0x4f86c0[_0x201bd0(0x251)]===_0x201bd0(0x311)&&(_0x4f86c0[_0x201bd0(0x243)]===ENEMY2_TYPE||_0x4f86c0[_0x201bd0(0x243)]===ENEMY3_TYPE)&&!(_0x4f86c0[_0x201bd0(0x243)]===ENEMY3_TYPE&&_0x4f86c0[_0x201bd0(0x301)]));if(_0x241e13[_0x201bd0(0x2aa)]>0x0){const _0x1f864e=_0x241e13[Math[_0x201bd0(0x291)](Math['random']()*_0x241e13['length'])],_0x50d0ab=_0x1f864e['id'],_0x42c432=0xc8+Math[_0x201bd0(0x2d1)]()*0x190,_0x245fc9=setTimeout(()=>{const _0x3b1012=_0x201bd0;try{const _0x17b47a=enemySpawnTimeouts[_0x3b1012(0x27f)](_0x245fc9);if(_0x17b47a>-0x1)enemySpawnTimeouts[_0x3b1012(0x256)](_0x17b47a,0x1);if(isPaused||!isInGameState||playerLives<=0x0&&(!isTwoPlayerMode||player1Lives<=0x0&&player2Lives<=0x0)||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x2e8738=enemies['find'](_0x2a3ab4=>_0x2a3ab4&&_0x2a3ab4['id']===_0x50d0ab);_0x2e8738&&_0x2e8738[_0x3b1012(0x251)]===_0x3b1012(0x311)&&(createBulletSimple(_0x2e8738)&&(playSound(_0x3b1012(0x23a),![],0.4),_0x2e8738[_0x3b1012(0x275)]=Date[_0x3b1012(0x1f5)]()));}catch(_0x235cea){console[_0x3b1012(0x2eb)](_0x3b1012(0x2a0)+_0x50d0ab+':',_0x235cea);}},_0x42c432);enemySpawnTimeouts[_0x201bd0(0x1e7)](_0x245fc9);}}}}}break;}case _0x201bd0(0x311):{try{const _0xe2e39a=_0x518765['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x518765[_0x201bd0(0x243)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0xcc63ec,y:_0x487d2c}=getCurrentGridSlotPosition(_0x518765['gridRow'],_0x518765[_0x201bd0(0x25f)],_0xe2e39a);typeof _0xcc63ec===_0x201bd0(0x1f7)&&!isNaN(_0xcc63ec)&&(_0x518765['x']=_0xcc63ec),typeof _0x487d2c==='number'&&!isNaN(_0x487d2c)&&(_0x518765['y']=_0x487d2c),_0x518765['targetGridX']=_0xcc63ec,_0x518765[_0x201bd0(0x295)]=_0x487d2c;}catch(_0x14777d){console['error'](_0x201bd0(0x231)+_0x518765['id']+':',_0x14777d);}_0x518765[_0x201bd0(0x1f1)]=_0x5f2ab8?_0xc65936:0x0,_0x518765[_0x201bd0(0x2c9)]=0x0;_0x518765['type']===ENEMY3_TYPE&&_0x518765[_0x201bd0(0x301)]&&_0x518765['capturedShipDimensions']&&(_0x518765[_0x201bd0(0x2b2)]=_0x518765['x']+CAPTURED_SHIP_OFFSET_X,_0x518765[_0x201bd0(0x258)]=_0x518765['y']+CAPTURED_SHIP_OFFSET_Y);break;}case _0x201bd0(0x298):{_0x518765[_0x201bd0(0x1f1)]=0x0,_0x518765[_0x201bd0(0x2c9)]=0x0;break;}case _0x201bd0(0x293):{_0x518765[_0x201bd0(0x1f1)]=0x0,_0x518765[_0x201bd0(0x2c9)]=0x0;isCoopAIDemoActive&&_0x518765['type']===ENEMY3_TYPE&&_0x5ee24f!==_0x201bd0(0x293)&&((!coopAICaptureDiveAnticipationActive||_0xb25027>coopAICaptureDiveAnticipationEndTime)&&(coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=_0xb25027+_0x1cd324));break;}case _0x201bd0(0x2ee):{isCoopAIDemoActive&&_0x518765['type']===ENEMY3_TYPE&&_0x5ee24f!=='diving_to_capture_position'&&((!coopAICaptureDiveAnticipationActive||_0xb25027>coopAICaptureDiveAnticipationEndTime)&&(coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=_0xb25027+_0x1cd324));let _0x15dfd8=isTwoPlayerMode&&selectedGameMode==='coop'?isPlayer1ShipCaptured||isPlayer2ShipCaptured:isShipCaptured;if(_0x15dfd8){_0x518765['state']=_0x201bd0(0x2b0);try{const {x:_0x5e07d7,y:_0x4076bf}=getCurrentGridSlotPosition(_0x518765['gridRow'],_0x518765[_0x201bd0(0x25f)],_0xb76da6);_0x518765['targetGridX']=_0x5e07d7,_0x518765[_0x201bd0(0x295)]=_0x4076bf;}catch(_0x3c9ca9){console[_0x201bd0(0x2eb)](_0x201bd0(0x244)+_0x518765['id']+':',_0x3c9ca9),_0x518765[_0x201bd0(0x323)]=gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x273801=_0x518765[_0x201bd0(0x1d6)],_0x4a0443=_0x518765[_0x201bd0(0x235)];if(_0x273801==null||_0x4a0443==null){console[_0x201bd0(0x2eb)]('Boss\x20'+_0x518765['id']+_0x201bd0(0x2a8)),_0x518765[_0x201bd0(0x251)]='returning';try{const {x:_0x57d38a,y:_0x1d5cff}=getCurrentGridSlotPosition(_0x518765[_0x201bd0(0x236)],_0x518765[_0x201bd0(0x25f)],_0xb76da6);_0x518765[_0x201bd0(0x323)]=_0x57d38a,_0x518765[_0x201bd0(0x295)]=_0x1d5cff;}catch(_0x4b999a){console[_0x201bd0(0x2eb)](_0x201bd0(0x244)+_0x518765['id']+':',_0x4b999a),_0x518765[_0x201bd0(0x323)]=gameCanvas['width']/0x2,_0x518765[_0x201bd0(0x295)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x2c7daf=_0x273801-_0x518765['x'],_0x30caa3=_0x4a0443-_0x518765['y'],_0xf6c62b=Math[_0x201bd0(0x2f0)](_0x2c7daf*_0x2c7daf+_0x30caa3*_0x30caa3),_0x1a684e=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x472b67=_0x1a684e*0.6;_0xf6c62b>_0x472b67?(_0x518765[_0x201bd0(0x1f1)]=_0x2c7daf/_0xf6c62b*_0x1a684e,_0x518765[_0x201bd0(0x2c9)]=_0x30caa3/_0xf6c62b*_0x1a684e,_0x518765['x']+=_0x518765['velocityX'],_0x518765['y']+=_0x518765[_0x201bd0(0x2c9)]):(_0x518765['x']=_0x273801,_0x518765['y']=_0x4a0443,_0x518765[_0x201bd0(0x1f1)]=0x0,_0x518765[_0x201bd0(0x2c9)]=0x0,_0x518765['state']='capturing',_0x518765[_0x201bd0(0x28f)]=_0xb25027,capturingBossId=_0x518765['id'],captureBeamActive=!![],captureBeamSource={'x':_0x518765['x']+_0xb76da6/0x2,'y':_0x518765['y']+_0x5a6ab4},captureBeamTargetY=_0x518765['y'],captureBeamProgress=0x0,playSound(_0x201bd0(0x282),![],0.6),_0x518765[_0x201bd0(0x2e0)]&&(captureAttemptMadeThisLevel=!![],delete _0x518765[_0x201bd0(0x2e0)]));break;}case _0x201bd0(0x29c):{_0x518765['velocityX']=0x0,_0x518765['velocityY']=0x0;_0x518765[_0x201bd0(0x2e0)]&&!captureAttemptMadeThisLevel&&(captureAttemptMadeThisLevel=!![],delete _0x518765[_0x201bd0(0x2e0)]);let _0x119583=![];isTwoPlayerMode&&selectedGameMode===_0x201bd0(0x260)?_0x119583=isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x518765['id']||isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x518765['id']:_0x119583=isShipCaptured&&capturedBossIdWithMessage===_0x518765['id'];if(_0x119583){captureBeamActive=![];if(capturingBossId===_0x518765['id'])capturingBossId=null;_0x518765[_0x201bd0(0x251)]=_0x201bd0(0x2b0),stopSound(_0x201bd0(0x282));if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x485817=_0xb25027-_0x518765['captureStartTime'],_0x1e6e5b=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x3ce142=CAPTURE_BEAM_DURATION_MS;if(_0x485817<_0x1e6e5b)captureBeamProgress=_0x485817/_0x1e6e5b;else{if(_0x485817<_0x3ce142-_0x1e6e5b)captureBeamProgress=0x1;else{if(_0x485817<_0x3ce142)captureBeamProgress=0x1-(_0x485817-(_0x3ce142-_0x1e6e5b))/_0x1e6e5b;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(_0x201bd0(0x282)),_0x518765[_0x201bd0(0x251)]=_0x201bd0(0x2b4),_0x518765[_0x201bd0(0x27e)]=generateAttackPathInternal(_0x518765),_0x518765[_0x201bd0(0x216)]=0x0,_0x518765[_0x201bd0(0x2c5)]=0x0,_0x518765['speed']=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x518765['lastFiredTime']=0x0,_0x518765[_0x201bd0(0x2a1)]=!![],_0x518765['attackFormationOffsetX']=0x0,_0x518765[_0x201bd0(0x31e)]=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}}}captureBeamProgress=Math[_0x201bd0(0x269)](0x0,Math[_0x201bd0(0x228)](0x1,captureBeamProgress));if(captureBeamActive&&captureBeamProgress>=0.95){const _0x4e28ea=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x1b7d83=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x10db0e=_0x518765['x']+_0xb76da6/0x2,_0x1da614=_0x518765['y']+_0x5a6ab4,_0x270520=gameCanvas['height']-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x1b46b5=Math['max'](_0x4e28ea,_0x1b7d83),_0x1febbd=_0x10db0e-_0x1b46b5/0x2,_0x3bb0b6=_0x1da614,_0x4f3a18=_0x270520-_0x1da614;if(_0x4f3a18>0x0){const _0x85ee9={'x':_0x1febbd,'y':_0x3bb0b6,'width':_0x1b46b5,'height':_0x4f3a18};let _0xdb4d74=null,_0xb005b3=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x201bd0(0x260)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&checkCollision(ship1,_0x85ee9))_0xdb4d74=ship1,_0xb005b3=0x1;else ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&checkCollision(ship2,_0x85ee9)&&(_0xdb4d74=ship2,_0xb005b3=0x2);}else ship&&playerLives>0x0&&!isShipCaptured&&checkCollision(ship,_0x85ee9)&&(_0xdb4d74=ship,_0xb005b3=currentPlayer);if(_0xdb4d74){_0x518765[_0x201bd0(0x2d2)]={'width':_0xdb4d74['width'],'height':_0xdb4d74[_0x201bd0(0x334)]},_0x518765[_0x201bd0(0x301)]=!![],stopSound(_0x201bd0(0x282)),_0x518765[_0x201bd0(0x251)]=_0x201bd0(0x2c1),_0x518765[_0x201bd0(0x323)]=null,_0x518765[_0x201bd0(0x295)]=null,_0x518765[_0x201bd0(0x1e1)]=_0xdb4d74['y'],_0x518765['captureAnimationRotation']=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0xb25027,capturedBossIdWithMessage=_0x518765['id'],playSound(_0x201bd0(0x265),![],0.3),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,handlePlayerShipCollision(_0xb005b3,![],_0xb25027,!![]);isCoopAIDemoActive&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![]);break;}}}break;}case _0x201bd0(0x2c1):{_0x518765[_0x201bd0(0x1f1)]=0x0,_0x518765[_0x201bd0(0x2c9)]=0x0;if(_0x518765[_0x201bd0(0x301)]&&_0x518765[_0x201bd0(0x2d2)]&&typeof _0x518765[_0x201bd0(0x1e1)]==='number'){const _0xafbdc1=_0xb25027-captureMessageStartTime,_0x65bed0=Math[_0x201bd0(0x228)](0x1,_0xafbdc1/CAPTURE_MESSAGE_DURATION),_0x42a78c=_0x518765['y']+CAPTURED_SHIP_OFFSET_Y,_0x40a08a=_0x518765[_0x201bd0(0x1e1)];_0x518765[_0x201bd0(0x258)]=_0x40a08a+(_0x42a78c-_0x40a08a)*_0x65bed0,_0x518765[_0x201bd0(0x2b2)]=_0x518765['x']+CAPTURED_SHIP_OFFSET_X;}else _0x518765['capturedShipX']=_0x518765['x']+CAPTURED_SHIP_OFFSET_X,_0x518765['capturedShipY']=_0x518765['y']+CAPTURED_SHIP_OFFSET_Y;break;}case'attacking':{if(isEntrancePhaseActive)break;const _0x4fdf70=_0x518765[_0x201bd0(0x27e)],_0x32cdc9=3.8;if(!_0x4fdf70||_0x4fdf70['length']===0x0){console['error'](_0x201bd0(0x20f)+_0x125c82+_0x201bd0(0x328)),_0x518765[_0x201bd0(0x251)]='returning';try{const {x:_0x4a4f94,y:_0x4247f9}=getCurrentGridSlotPosition(_0x518765[_0x201bd0(0x236)],_0x518765['gridCol'],_0xb76da6);_0x518765[_0x201bd0(0x323)]=_0x4a4f94,_0x518765[_0x201bd0(0x295)]=_0x4247f9;}catch(_0x526b9d){console['error'](_0x201bd0(0x21f)+_0x125c82+_0x201bd0(0x222),_0x526b9d),_0x518765['targetGridX']=gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}if(_0x518765[_0x201bd0(0x216)]>=_0x4fdf70[_0x201bd0(0x2aa)]){console['warn'](_0x201bd0(0x20f)+_0x125c82+_0x201bd0(0x330)+_0x518765[_0x201bd0(0x216)]+_0x201bd0(0x240)+_0x4fdf70[_0x201bd0(0x2aa)]+_0x201bd0(0x2dd)),_0x518765[_0x201bd0(0x251)]='returning';try{const {x:_0x2b359c,y:_0x39aef2}=getCurrentGridSlotPosition(_0x518765[_0x201bd0(0x236)],_0x518765[_0x201bd0(0x25f)],_0xb76da6);_0x518765[_0x201bd0(0x323)]=_0x2b359c,_0x518765['targetGridY']=_0x39aef2;}catch(_0x4e2034){console[_0x201bd0(0x2eb)](_0x201bd0(0x21f)+_0x125c82+'\x20(invalid\x20attack\x20index):',_0x4e2034),_0x518765['targetGridX']=gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x3d6929=_0x4fdf70[_0x518765[_0x201bd0(0x216)]];if(!_0x3d6929||!_0x3d6929['p0']||!_0x3d6929['p1']||!_0x3d6929['p2']||!_0x3d6929['p3']){console[_0x201bd0(0x2eb)]('Enemy\x20'+_0x125c82+_0x201bd0(0x2a2)+_0x518765[_0x201bd0(0x216)]+_0x201bd0(0x266)),_0x518765['state']=_0x201bd0(0x2b0);try{const {x:_0x4a555f,y:_0x52c672}=getCurrentGridSlotPosition(_0x518765[_0x201bd0(0x236)],_0x518765[_0x201bd0(0x25f)],_0xb76da6);_0x518765[_0x201bd0(0x323)]=_0x4a555f,_0x518765[_0x201bd0(0x295)]=_0x52c672;}catch(_0x322884){console[_0x201bd0(0x2eb)](_0x201bd0(0x21f)+_0x125c82+_0x201bd0(0x327),_0x322884),_0x518765[_0x201bd0(0x323)]=gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765['targetGridY']=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x46b487=_0x518765['speed']/0x3e8*_0x32cdc9;_0x518765[_0x201bd0(0x2c5)]+=_0x46b487;let _0x2d2b15,_0x36e6d8;const _0x524043=_0x518765['x'],_0x17d353=_0x518765['y'];if(_0x518765[_0x201bd0(0x2c5)]>=0x1){try{_0x2d2b15=calculateBezierPoint(0x1,_0x3d6929['p0']['x'],_0x3d6929['p1']['x'],_0x3d6929['p2']['x'],_0x3d6929['p3']['x']),_0x36e6d8=calculateBezierPoint(0x1,_0x3d6929['p0']['y'],_0x3d6929['p1']['y'],_0x3d6929['p2']['y'],_0x3d6929['p3']['y']);}catch(_0x573d92){console['error'](_0x201bd0(0x30f)+_0x518765['id']+':',_0x573d92),_0x2d2b15=_0x518765['x'],_0x36e6d8=_0x518765['y'],_0x518765[_0x201bd0(0x251)]=_0x201bd0(0x2b0);try{const {x:_0x2d5d79,y:_0x5d5163}=getCurrentGridSlotPosition(_0x518765[_0x201bd0(0x236)],_0x518765[_0x201bd0(0x25f)],_0xb76da6);_0x518765[_0x201bd0(0x323)]=_0x2d5d79,_0x518765['targetGridY']=_0x5d5163;}catch(_0x3641a8){console['error'](_0x201bd0(0x1e6)+_0x518765['id']+':',_0x3641a8),_0x518765[_0x201bd0(0x323)]=gameCanvas['width']/0x2,_0x518765['targetGridY']=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}_0x518765[_0x201bd0(0x2c5)]=0x0,_0x518765['attackPathSegmentIndex']++;if(_0x518765[_0x201bd0(0x216)]>=_0x4fdf70['length']){_0x518765['state']=_0x201bd0(0x2b0),_0x518765[_0x201bd0(0x275)]=0x0,_0x518765['attackFormationOffsetX']=0x0,_0x518765[_0x201bd0(0x31e)]=null;try{const {x:_0x1b5b9e,y:_0x52ead5}=getCurrentGridSlotPosition(_0x518765[_0x201bd0(0x236)],_0x518765[_0x201bd0(0x25f)],_0xb76da6);_0x518765[_0x201bd0(0x323)]=_0x1b5b9e,_0x518765[_0x201bd0(0x295)]=_0x52ead5;}catch(_0x2b0541){console[_0x201bd0(0x2eb)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x125c82+_0x201bd0(0x284),_0x2b0541),_0x518765[_0x201bd0(0x323)]=gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}else{const _0x352ffc=_0x4fdf70[_0x518765['attackPathSegmentIndex']];if(!_0x352ffc?.['p0']){console['error'](_0x201bd0(0x20f)+_0x125c82+'\x20attacking,\x20invalid\x20NEXT\x20segment\x20'+_0x518765['attackPathSegmentIndex']+'!\x20Returning.'),_0x2d2b15=_0x518765['x'],_0x36e6d8=_0x518765['y'],_0x518765[_0x201bd0(0x251)]='returning';try{const {x:_0x287724,y:_0x357100}=getCurrentGridSlotPosition(_0x518765['gridRow'],_0x518765[_0x201bd0(0x25f)],_0xb76da6);_0x518765['targetGridX']=_0x287724,_0x518765['targetGridY']=_0x357100;}catch(_0x25714b){console[_0x201bd0(0x2eb)]('Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20'+_0x518765['id']+':',_0x25714b),_0x518765[_0x201bd0(0x323)]=gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}}}else try{_0x2d2b15=calculateBezierPoint(_0x518765['attackPathT'],_0x3d6929['p0']['x'],_0x3d6929['p1']['x'],_0x3d6929['p2']['x'],_0x3d6929['p3']['x']),_0x36e6d8=calculateBezierPoint(_0x518765[_0x201bd0(0x2c5)],_0x3d6929['p0']['y'],_0x3d6929['p1']['y'],_0x3d6929['p2']['y'],_0x3d6929['p3']['y']);}catch(_0x23c36e){console['error'](_0x201bd0(0x331)+_0x518765['id']+':',_0x23c36e),_0x2d2b15=_0x518765['x'],_0x36e6d8=_0x518765['y'],_0x518765['state']=_0x201bd0(0x2b0);try{const {x:_0x48e170,y:_0x224a71}=getCurrentGridSlotPosition(_0x518765[_0x201bd0(0x236)],_0x518765[_0x201bd0(0x25f)],_0xb76da6);_0x518765[_0x201bd0(0x323)]=_0x48e170,_0x518765[_0x201bd0(0x295)]=_0x224a71;}catch(_0x192541){console[_0x201bd0(0x2eb)](_0x201bd0(0x30b)+_0x518765['id']+':',_0x192541),_0x518765[_0x201bd0(0x323)]=gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}if(_0x518765&&_0x518765['state']==='attacking'){const _0x4978ff=_0x518765[_0x201bd0(0x321)]||0x0,_0x59ae5f=_0x2d2b15+_0x4978ff,_0x29470d=_0x36e6d8;_0x518765['velocityX']=_0x59ae5f-_0x524043,_0x518765['velocityY']=_0x29470d-_0x17d353,_0x518765['x']=_0x59ae5f,_0x518765['y']=_0x29470d;if(_0x518765['y']>gameCanvas[_0x201bd0(0x334)]+_0x5a6ab4*1.5){_0x518765[_0x201bd0(0x251)]=_0x201bd0(0x2b0),_0x518765[_0x201bd0(0x216)]=0x0,_0x518765[_0x201bd0(0x2c5)]=0x0,_0x518765['lastFiredTime']=0x0,_0x518765[_0x201bd0(0x321)]=0x0,_0x518765[_0x201bd0(0x31e)]=null,_0x518765['y']=-_0x5a6ab4*(1.1+Math[_0x201bd0(0x2d1)]()*0.4),_0x518765['x']=Math[_0x201bd0(0x2d1)]()*(gameCanvas[_0x201bd0(0x254)]-_0xb76da6),_0x518765['velocityX']=0x0,_0x518765['velocityY']=0x0;try{const {x:_0x16a175,y:_0x2284d8}=getCurrentGridSlotPosition(_0x518765[_0x201bd0(0x236)],_0x518765['gridCol'],_0xb76da6);_0x518765[_0x201bd0(0x323)]=_0x16a175,_0x518765[_0x201bd0(0x295)]=_0x2284d8;}catch(_0x563abb){console['error'](_0x201bd0(0x21f)+_0x125c82+_0x201bd0(0x1f3),_0x563abb),_0x518765[_0x201bd0(0x323)]=gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765[_0x201bd0(0x295)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}}break;}case _0x201bd0(0x2b0):{if(isEntrancePhaseActive)break;if(_0x518765[_0x201bd0(0x323)]==null||_0x518765[_0x201bd0(0x295)]==null){console['warn'](_0x201bd0(0x20f)+_0x125c82+_0x201bd0(0x2ec));try{const {x:_0x403f35,y:_0x21753a}=getCurrentGridSlotPosition(_0x518765['gridRow'],_0x518765['gridCol'],_0xb76da6);_0x518765[_0x201bd0(0x323)]=_0x403f35,_0x518765[_0x201bd0(0x295)]=_0x21753a;}catch(_0x573555){console[_0x201bd0(0x2eb)](_0x201bd0(0x2c4)+_0x125c82+_0x201bd0(0x2ed),_0x573555),_0x518765[_0x201bd0(0x251)]=_0x201bd0(0x311),_0x518765['x']=gameCanvas[_0x201bd0(0x254)]/0x2,_0x518765['y']=ENEMY_TOP_MARGIN;break;}}const _0x58df7d=_0x518765['targetGridX'],_0x1d314d=_0x518765['targetGridY'],_0x5e07f6=_0x58df7d-_0x518765['x'],_0x268061=_0x1d314d-_0x518765['y'],_0x45d6a6=Math[_0x201bd0(0x2f0)](_0x5e07f6*_0x5e07f6+_0x268061*_0x268061),_0x2af0d5=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0xc456ac=BASE_RETURN_SPEED*_0x2af0d5,_0x216f2c=_0xc456ac*0.5;if(_0x45d6a6>_0x216f2c)_0x518765['velocityX']=_0x5e07f6/_0x45d6a6*_0xc456ac,_0x518765['velocityY']=_0x268061/_0x45d6a6*_0xc456ac,_0x518765['x']+=_0x518765['velocityX'],_0x518765['y']+=_0x518765['velocityY'];else{_0x518765['x']=_0x58df7d,_0x518765['y']=_0x1d314d,_0x518765[_0x201bd0(0x1f1)]=0x0,_0x518765[_0x201bd0(0x2c9)]=0x0,_0x518765[_0x201bd0(0x251)]=_0x201bd0(0x311),_0x518765[_0x201bd0(0x1eb)]=!![],_0x518765[_0x201bd0(0x321)]=0x0,_0x518765[_0x201bd0(0x31e)]=null;_0x518765['hasOwnProperty']('returnLogDone')&&delete _0x518765[_0x201bd0(0x1f2)];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(_0x201bd0(0x2a9),!![],0.1));if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}break;}}if(_0x518765&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){const _0x1f6838=[_0x201bd0(0x2b4),_0x201bd0(0x32a),_0x201bd0(0x23f),_0x201bd0(0x2ee)];if(_0x1f6838['includes'](_0x518765[_0x201bd0(0x251)])){let _0x3b1851=[];if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x3b1851[_0x201bd0(0x1e7)]({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x3b1851[_0x201bd0(0x1e7)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x3b1851[_0x201bd0(0x1e7)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(const _0x4db9de of _0x3b1851){const _0x3bf80e=_0x4db9de['shipObj'],_0x41fa67={'x':_0x518765['x'],'y':_0x518765['y'],'width':_0xb76da6,'height':_0x5a6ab4},_0x3dfcd4={'x':_0x3bf80e['x'],'y':_0x3bf80e['y'],'width':_0x3bf80e['width'],'height':_0x3bf80e[_0x201bd0(0x334)]},_0x3087dc=_0x4db9de[_0x201bd0(0x2ba)]?{'x':_0x3bf80e['x']+DUAL_SHIP_OFFSET_X,'y':_0x3bf80e['y'],'width':_0x3bf80e['width'],'height':_0x3bf80e[_0x201bd0(0x334)]}:null;let _0x3f2308=![],_0x2c5070=![];if(checkCollision(_0x41fa67,_0x3dfcd4))_0x3f2308=!![];else _0x4db9de[_0x201bd0(0x2ba)]&&_0x3087dc&&checkCollision(_0x41fa67,_0x3087dc)&&(_0x3f2308=!![],_0x2c5070=!![]);if(_0x3f2308){createExplosion(_0x518765['x']+_0xb76da6/0x2,_0x518765['y']+_0x5a6ab4/0x2),playSound(_0x201bd0(0x239),![],0.6),enemies[_0x201bd0(0x256)](_0xfdab2d,0x1),_0x518765=null,handlePlayerShipCollision(_0x4db9de[_0x201bd0(0x310)],_0x2c5070,_0xb25027,![]);if(_0x518765===null)break;}}}}if(!_0x518765)continue;}if(!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){let _0x183e7e=[];if(isTwoPlayerMode&&selectedGameMode===_0x201bd0(0x260)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x183e7e['push']({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x183e7e[_0x201bd0(0x1e7)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x183e7e[_0x201bd0(0x1e7)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(let _0x33c342=enemyBullets[_0x201bd0(0x2aa)]-0x1;_0x33c342>=0x0;_0x33c342--){const _0x4ab163=enemyBullets[_0x33c342];if(!_0x4ab163){enemyBullets['splice'](_0x33c342,0x1);continue;}const _0x2c8236={'x':_0x4ab163['x'],'y':_0x4ab163['y'],'width':_0x4ab163[_0x201bd0(0x254)],'height':_0x4ab163[_0x201bd0(0x334)]};let _0x195eee=![];for(const _0x2c2b79 of _0x183e7e){const _0xb7c3f3=_0x2c2b79[_0x201bd0(0x300)],_0x243970={'x':_0xb7c3f3['x'],'y':_0xb7c3f3['y'],'width':_0xb7c3f3['width'],'height':_0xb7c3f3[_0x201bd0(0x334)]},_0x128f09=_0x2c2b79[_0x201bd0(0x2ba)]?{'x':_0xb7c3f3['x']+DUAL_SHIP_OFFSET_X,'y':_0xb7c3f3['y'],'width':_0xb7c3f3['width'],'height':_0xb7c3f3[_0x201bd0(0x334)]}:null;let _0x412e13=![],_0x38b432=![];if(checkCollision(_0x2c8236,_0x243970))_0x412e13=!![];else _0x2c2b79[_0x201bd0(0x2ba)]&&_0x128f09&&checkCollision(_0x2c8236,_0x128f09)&&(_0x412e13=!![],_0x38b432=!![]);if(_0x412e13){playSound(_0x201bd0(0x239),![],0.6),handlePlayerShipCollision(_0x2c2b79['playerNum'],_0x38b432,_0xb25027,![]),enemyBullets[_0x201bd0(0x256)](_0x33c342,0x1),_0x195eee=!![];break;}}if(_0x195eee)continue;}}updateHitSparks();}catch(_0x29f751){console[_0x201bd0(0x2eb)](_0x201bd0(0x32d),_0x29f751,_0x29f751[_0x201bd0(0x2f7)]),isGridSoundPlaying=![],stopSound(_0x201bd0(0x2a9)),isEntrancePhaseActive=![],stopSound('entranceSound'),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound('captureSound'),stopSound('shipCapturedSound'),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x201bd0(0x30c))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert('Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.');}}function handlePlayerShipCollision(_0x3ea976,_0x395068,_0x1494b6,_0x10bfe7=![]){const _0x128ac2=_0x973987,_0x310f76=_0x1494b6,_0x5b9059=gameCanvas?gameCanvas[_0x128ac2(0x334)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;let _0x137ea9=0x0,_0xf76076=null;if(isTwoPlayerMode&&selectedGameMode===_0x128ac2(0x260)){_0xf76076=_0x3ea976===0x1?ship1:ship2;if(_0xf76076){_0x137ea9=_0xf76076['x'];if(_0x10bfe7){if(_0x3ea976===0x1)player1CaptureRespawnX=_0xf76076['x'];else{if(_0x3ea976===0x2)player2CaptureRespawnX=_0xf76076['x'];}}}else{if(_0x3ea976===0x1&&typeof player1CaptureRespawnX===_0x128ac2(0x1f7)&&player1CaptureRespawnX!==0x0)_0x137ea9=player1CaptureRespawnX;else{if(_0x3ea976===0x2&&typeof player2CaptureRespawnX===_0x128ac2(0x1f7)&&player2CaptureRespawnX!==0x0)_0x137ea9=player2CaptureRespawnX;else{if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&gameCanvas)_0x137ea9=_0x3ea976===0x1?gameCanvas[_0x128ac2(0x254)]/0x2-gameCanvas[_0x128ac2(0x254)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2:gameCanvas['width']/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;else gameCanvas?_0x137ea9=gameCanvas[_0x128ac2(0x254)]/0x2-SHIP_WIDTH/0x2:_0x137ea9=0xc8;}}}}else{_0xf76076=ship;if(_0xf76076)_0x137ea9=_0xf76076['x'],_0x10bfe7&&(capturedShipRespawnX_NormalMode=ship['x']);else _0x10bfe7&&capturedShipRespawnX_NormalMode!==0x0?_0x137ea9=capturedShipRespawnX_NormalMode:_0x137ea9=gameCanvas?gameCanvas['width']/0x2-SHIP_WIDTH/0x2:0xc8;}if(isTwoPlayerMode&&selectedGameMode===_0x128ac2(0x260)){if(_0x3ea976===0x1){if(_0x10bfe7){isPlayer1ShipCaptured=!![],player1IsDualShipActive=![],player1Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x128ac2(0x208))coopPartner1CapturedTime=_0x310f76;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x310f76,playSound(_0x128ac2(0x211),![],0.4),ship1=null,player1NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];if(capturedBossIdWithMessage&&enemies['find'](_0x3a3997=>_0x3a3997['id']===capturedBossIdWithMessage)){const _0x2863c=enemies[_0x128ac2(0x2df)](_0x44cfd7=>_0x44cfd7['id']===capturedBossIdWithMessage);_0x2863c&&(_0x2863c[_0x128ac2(0x301)]=![],_0x2863c[_0x128ac2(0x2d2)]=null);}}else player1NeedsRespawnAfterCapture=!![],ship1=null;}else{if(player1IsDualShipActive&&ship1){player1IsDualShipActive=![];const _0x5db817=_0x395068?ship1['x']+DUAL_SHIP_OFFSET_X+ship1['width']/0x2:ship1['x']+ship1[_0x128ac2(0x254)]/0x2;createExplosion(_0x5db817,ship1['y']+ship1['height']/0x2),ship1['x']=_0x137ea9,ship1['y']=_0x5b9059,ship1['targetX']=ship1['x'],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x310f76+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x310f76+RESPAWN_DELAY_MS;}else{if(ship1)createExplosion(ship1['x']+ship1[_0x128ac2(0x254)]/0x2,ship1['y']+ship1[_0x128ac2(0x334)]/0x2);player1Lives--;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x310f76,playSound('gameOverSound',![],0.4),ship1=null;if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}else isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x310f76+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x310f76+RESPAWN_DELAY_MS,ship1?(ship1['x']=_0x137ea9,ship1['y']=_0x5b9059,ship1['targetX']=ship1['x']):ship1={'x':_0x137ea9,'y':_0x5b9059,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x137ea9,'id':'p1'};}}}else{if(_0x3ea976===0x2){if(_0x10bfe7){isPlayer2ShipCaptured=!![],player2IsDualShipActive=![],player2Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x128ac2(0x208))coopPartner2CapturedTime=_0x310f76;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x310f76,playSound(_0x128ac2(0x211),![],0.4),ship2=null,player2NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById==='ai_p2')aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];if(capturedBossIdWithMessage&&enemies['find'](_0x19b8bd=>_0x19b8bd['id']===capturedBossIdWithMessage)){const _0x2eb1fd=enemies[_0x128ac2(0x2df)](_0x4c0283=>_0x4c0283['id']===capturedBossIdWithMessage);_0x2eb1fd&&(_0x2eb1fd[_0x128ac2(0x301)]=![],_0x2eb1fd[_0x128ac2(0x2d2)]=null);}}else player2NeedsRespawnAfterCapture=!![],ship2=null;}else{if(player2IsDualShipActive&&ship2){player2IsDualShipActive=![];const _0x4c2229=_0x395068?ship2['x']+DUAL_SHIP_OFFSET_X+ship2[_0x128ac2(0x254)]/0x2:ship2['x']+ship2['width']/0x2;createExplosion(_0x4c2229,ship2['y']+ship2['height']/0x2),ship2['x']=_0x137ea9,ship2['y']=_0x5b9059,ship2['targetX']=ship2['x'],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x310f76+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x310f76+RESPAWN_DELAY_MS;}else{if(ship2)createExplosion(ship2['x']+ship2[_0x128ac2(0x254)]/0x2,ship2['y']+ship2[_0x128ac2(0x334)]/0x2);player2Lives--;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x310f76,playSound(_0x128ac2(0x211),![],0.4),ship2=null;if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById==='ai_p2')aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}else isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x310f76+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x310f76+RESPAWN_DELAY_MS,ship2?(ship2['x']=_0x137ea9,ship2['y']=_0x5b9059,ship2['targetX']=_0x137ea9):ship2={'x':_0x137ea9,'y':_0x5b9059,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x137ea9,'id':'p2'};}}}}player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isDualShipActive&&!_0x10bfe7&&_0xf76076){isDualShipActive=![];if(isTwoPlayerMode&&selectedGameMode==='normal'){if(_0x3ea976===0x1)player1IsDualShipActive=![];else{if(_0x3ea976===0x2)player2IsDualShipActive=![];}}else{if(!isTwoPlayerMode)player1IsDualShipActive=![];}const _0x5f0bd8=_0x395068?_0x137ea9+DUAL_SHIP_OFFSET_X+SHIP_WIDTH/0x2:_0x137ea9+SHIP_WIDTH/0x2;createExplosion(_0x5f0bd8,_0x5b9059+SHIP_HEIGHT/0x2);ship&&(ship['x']=_0x137ea9,ship['y']=_0x5b9059,ship['targetX']=ship['x']);isInvincible=!![],invincibilityEndTime=_0x310f76+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x310f76+RESPAWN_DELAY_MS;if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x128ac2(0x2c3)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}else{if(!_0x10bfe7&&_0xf76076)createExplosion(_0x137ea9+SHIP_WIDTH/0x2,_0x5b9059+SHIP_HEIGHT/0x2);if(_0x10bfe7){isShipCaptured=!![];if(ship)ship=null;}playerLives--;if(playerLives<=0x0){playerLives=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x128ac2(0x2c3)){if(_0x3ea976===0x1)player1Lives=0x0;else{if(_0x3ea976===0x2)player2Lives=0x0;}isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x310f76,playerWhoIsGameOver=_0x3ea976,playSound(_0x128ac2(0x211),![],0.4);const _0x7cf999=_0x3ea976===0x1?0x2:0x1,_0x21b2f3=_0x7cf999===0x1?player1Lives:player2Lives;_0x21b2f3>0x0?nextActionAfterPlayerGameOver=_0x128ac2(0x218):nextActionAfterPlayerGameOver=_0x128ac2(0x2ce);bullets=[],enemyBullets=[],explosions=[];if(!(_0x21b2f3>0x0))ship=null;}else player1Lives=0x0,ship=null,playSound(_0x128ac2(0x211),![],0.4),triggerFinalGameOverSequence();}else{if(isTwoPlayerMode&&selectedGameMode==='normal'){if(_0x3ea976===0x1)player1Lives=playerLives;else player2Lives=playerLives;}if(!_0x10bfe7){isInvincible=!![],invincibilityEndTime=_0x310f76+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x310f76+RESPAWN_DELAY_MS;if(ship&&gameCanvas){ship['x']=_0x137ea9,ship['y']=_0x5b9059,ship[_0x128ac2(0x1d6)]=ship['x'];if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x128ac2(0x2c3)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}}if(_0x10bfe7)isDualShipActive=![];}}}if(!_0x10bfe7)fallingShips=[];}function switchPlayerTurn(){const _0x84bc6c=_0x973987;if(!isTwoPlayerMode||selectedGameMode===_0x84bc6c(0x260))return![];stopSound('hiScoreSound');if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive;if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive;if(player2Score>highScore)highScore=player2Score;}const _0x20c9de=currentPlayer===0x1?0x2:0x1,_0x160b20=_0x20c9de===0x1?player1Lives:player2Lives;if(_0x160b20<=0x0){const _0x4c5e64=currentPlayer===0x1?player1Lives:player2Lives;return _0x4c5e64<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x20c9de,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x205248=_0x973987;try{if(isPaused||!isInGameState||isChallengingStage||isWaveTransitioning)return;let _0x200976=![];isTwoPlayerMode&&selectedGameMode===_0x205248(0x260)?(player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)&&(_0x200976=!![]):playerLives>0x0&&ship&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(_0x200976=!![]);if(!_0x200976)return;if(isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&Date[_0x205248(0x1f5)]()<coopAICaptureDiveAnticipationEndTime)return;const _0x4d6788=enemies[_0x205248(0x2cd)](_0x5d2004=>_0x5d2004&&_0x5d2004[_0x205248(0x251)]===_0x205248(0x311));if(_0x4d6788[_0x205248(0x2aa)]===0x0)return;const _0x3a15e8=Date[_0x205248(0x1f5)](),_0x8e1b5d=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x3a15e8-lastGridFireCheckTime<_0x8e1b5d)return;lastGridFireCheckTime=_0x3a15e8;const _0x656916=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0xf6845c=Math['round'](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x3cb770=0x0;_0x4d6788[_0x205248(0x200)](()=>Math[_0x205248(0x2d1)]()-0.5);for(const _0x508799 of _0x4d6788){if(_0x3cb770>=_0xf6845c)break;if(_0x508799['type']===ENEMY2_TYPE||_0x508799[_0x205248(0x243)]===ENEMY3_TYPE){if(_0x508799['type']===ENEMY3_TYPE&&_0x508799['hasCapturedShip'])continue;Math[_0x205248(0x2d1)]()<_0x656916&&(createBulletSimple(_0x508799)&&(playSound(_0x205248(0x23a),![],0.4),_0x508799[_0x205248(0x275)]=_0x3a15e8,_0x3cb770++));}}}catch(_0x2dbac0){console[_0x205248(0x2eb)](_0x205248(0x2b1),_0x2dbac0);}}function runSingleGameUpdate(_0x173599){const _0x40f0bd=_0x973987;try{const _0x1793b6=Date['now']();let _0x47c0a8=![];isTwoPlayerMode&&selectedGameMode===_0x40f0bd(0x260)?_0x47c0a8=player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture:_0x47c0a8=playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;let _0x26b9b8=![];if(isManualControl&&connectedGamepadIndex!==null){if(isTwoPlayerMode&&selectedGameMode===_0x40f0bd(0x260)){if(player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage)_0x26b9b8=!![];}else{if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1))_0x26b9b8=!![];}}if(_0x26b9b8&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x49bee3=navigator[_0x40f0bd(0x31d)]();if(_0x49bee3?.[connectedGamepadIndex]){const _0x94f5ce=_0x49bee3[connectedGamepadIndex],_0x9ac7c9=processSingleController(_0x94f5ce,previousGameButtonStates);previousGameButtonStates=_0x9ac7c9[_0x40f0bd(0x30e)]['slice']();if(_0x9ac7c9[_0x40f0bd(0x1ef)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates['length']>0x0)previousGameButtonStates=[];}}else connectedGamepadIndex===null&&previousGameButtonStates[_0x40f0bd(0x2aa)]>0x0&&(previousGameButtonStates=[]);let _0x3d002d=![];if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x40f0bd(0x260)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage)_0x3d002d=!![];}else{if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x40f0bd(0x2c3)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&currentPlayer===0x2)_0x3d002d=!![];}}if(_0x3d002d&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x40a04e=navigator[_0x40f0bd(0x31d)]();if(_0x40a04e?.[connectedGamepadIndexP2]){const _0x1a7e30=_0x40a04e[connectedGamepadIndexP2],_0x5a8b42=processSingleController(_0x1a7e30,previousGameButtonStatesP2);previousGameButtonStatesP2=_0x5a8b42[_0x40f0bd(0x30e)][_0x40f0bd(0x314)]();if(_0x5a8b42[_0x40f0bd(0x1ef)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}}else connectedGamepadIndexP2===null&&previousGameButtonStatesP2[_0x40f0bd(0x2aa)]>0x0&&(previousGameButtonStatesP2=[]);if(isPaused){renderGame();return;}const _0x1ee51a=showCsBonusScoreMessage||showPerfectMessage;if(isCoopAIDemoActive&&_0x1ee51a&&gameCanvas?.[_0x40f0bd(0x254)]>0x0){const _0xb64e0d=ship1&&player1Lives>0x0&&player2Lives<=0x0,_0x3a9ddd=ship2&&player2Lives>0x0&&player1Lives<=0x0;if(_0xb64e0d){const _0x155c4b=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x2223b6=Math[_0x40f0bd(0x223)](gameCanvas[_0x40f0bd(0x254)]/0x2-_0x155c4b/0x2);ship1['x']=_0x2223b6,ship1['targetX']=_0x2223b6,smoothedShip1X=_0x2223b6,ship2&&(ship2[_0x40f0bd(0x1d6)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x3a9ddd){const _0xd37561=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x363ce0=Math[_0x40f0bd(0x223)](gameCanvas[_0x40f0bd(0x254)]/0x2-_0xd37561/0x2);ship2['x']=_0x363ce0,ship2['targetX']=_0x363ce0,smoothedShip2X=_0x363ce0,ship1&&(ship1[_0x40f0bd(0x1d6)]=ship1['x'],smoothedShip1X=ship1['x']);}else{if(ship1&&player1Lives>0x0&&ship2&&player2Lives>0x0){const _0x39f946=gameCanvas[_0x40f0bd(0x254)]/0x2-gameCanvas[_0x40f0bd(0x254)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1['x']=_0x39f946,ship1[_0x40f0bd(0x1d6)]=_0x39f946,smoothedShip1X=_0x39f946;const _0xa081eb=gameCanvas[_0x40f0bd(0x254)]/0x2+gameCanvas[_0x40f0bd(0x254)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2['x']=_0xa081eb,ship2[_0x40f0bd(0x1d6)]=_0xa081eb,smoothedShip2X=_0xa081eb;}}}}else{if(_0x1ee51a&&gameCanvas?.[_0x40f0bd(0x254)]>0x0){if(isTwoPlayerMode&&selectedGameMode===_0x40f0bd(0x260)){const _0x4e8237=ship1&&player1Lives>0x0,_0x2b4ce2=ship2&&player2Lives>0x0;if(_0x4e8237&&_0x2b4ce2){if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208)){const _0x203ab0=gameCanvas[_0x40f0bd(0x254)]/0x2-gameCanvas[_0x40f0bd(0x254)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x119674=gameCanvas[_0x40f0bd(0x254)]/0x2+gameCanvas[_0x40f0bd(0x254)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['x']=_0x119674,ship2[_0x40f0bd(0x1d6)]=_0x119674,smoothedShip2X=_0x119674);}}else{if(_0x4e8237&&ship1){const _0x2d23cb=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x57720=Math[_0x40f0bd(0x223)](gameCanvas[_0x40f0bd(0x254)]/0x2-_0x2d23cb/0x2);ship1['x']=_0x57720,ship1['targetX']=_0x57720,ship2&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208)&&(ship2[_0x40f0bd(0x1d6)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x2b4ce2&&ship2){const _0x46208c=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x28bef6=Math[_0x40f0bd(0x223)](gameCanvas[_0x40f0bd(0x254)]/0x2-_0x46208c/0x2);ship2['x']=_0x28bef6,ship2[_0x40f0bd(0x1d6)]=_0x28bef6;if(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')smoothedShip2X=_0x28bef6;ship1&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208)&&(ship1[_0x40f0bd(0x1d6)]=ship1['x']);}}}}else{if((!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x40f0bd(0x2c3)&&currentPlayer===0x2)&&ship){const _0xaf80bc=isDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH;ship['x']=Math[_0x40f0bd(0x223)](gameCanvas['width']/0x2-_0xaf80bc/0x2),ship[_0x40f0bd(0x1d6)]=ship['x'];if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)smoothedShipX=ship['x'];else{if(!isManualControl)smoothedShipX=ship['x'];}}}}}let _0xdd2d4c=![];if(selectedGameMode===_0x40f0bd(0x260)&&level===0x1&&coopPlayersReadyStartTime>0x0){_0xdd2d4c=!![];if(isShowingCoopPlayersReady){if(_0x1793b6-coopPlayersReadyStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}if(_0x1793b6>=coopPlayersReadyStartTime+0xbb8){isShowingCoopPlayersReady=![],explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?(isShowingIntro=!![],introStep=0x2,introDisplayStartTime=_0x1793b6):(isShowingIntro=!![],introStep=0x1,introDisplayStartTime=_0x1793b6);}}else{if(isShowingIntro){if(_0x1793b6-introDisplayStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}let _0x184fcc=INTRO_DURATION_PER_STEP;introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208))&&(_0x184fcc=TWO_PLAYER_STAGE_INTRO_DURATION);if(_0x1793b6>=introDisplayStartTime+_0x184fcc){if(introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208))){introStep=0x2,introDisplayStartTime=_0x1793b6,explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}else{isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();_0xdd2d4c=![],coopPlayersReadyStartTime=0x0;}}}else _0xdd2d4c=![],coopPlayersReadyStartTime=0x0;}if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208))handlePlayerInput();if(typeof moveEntities==='function')moveEntities();renderGame();if(_0xdd2d4c)return;}if(selectedGameMode===_0x40f0bd(0x260)&&level===0x1&&!gameJustStartedAndWaveLaunched&&coopPlayersReadyStartTime===0x0&&gameJustStarted){if(isFullGridWave)startFullGridWave();else{if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x40f0bd(0x2aa)]>0x0)scheduleEntranceFlightWave();else isWaveTransitioning=!![],readyForNextWaveReset=!![];}}gameJustStartedAndWaveLaunched=!![],gameJustStarted=![];}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode&&selectedGameMode===_0x40f0bd(0x2c3)){if(_0x1793b6-playerGameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}if(_0x1793b6-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![],explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();const _0x5e5d04=playerWhoIsGameOver;playerWhoIsGameOver=0x0;if(nextActionAfterPlayerGameOver===_0x40f0bd(0x218))switchPlayerTurn()?(_0x5e5d04===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,player1MaxLevelReached=Math['max'](player1MaxLevelReached,level)),resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();else nextActionAfterPlayerGameOver===_0x40f0bd(0x2ce)?triggerFinalGameOverSequence():triggerFinalGameOverSequence();renderGame();return;}else{renderGame();return;}}if(isTwoPlayerMode&&selectedGameMode==='coop'){let _0x16c6bb=![],_0x3bc9ab=![];if(isPlayer1ShowingGameOverMessage){if(_0x1793b6-player1GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(_0x1793b6-player1GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer1ShowingGameOverMessage=![],_0x16c6bb=!![],explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}}if(isPlayer2ShowingGameOverMessage){if(_0x1793b6-player2GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}if(_0x1793b6-player2GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer2ShowingGameOverMessage=![],_0x3bc9ab=!![],explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}}if(_0x16c6bb||_0x3bc9ab){player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208))handlePlayerInput();if(typeof moveEntities===_0x40f0bd(0x30c))moveEntities();renderGame();if(gameOverSequenceStartTime>0x0||player1Lives>0x0||player2Lives>0x0)return;}else{if(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208))handlePlayerInput();if(typeof moveEntities==='function')moveEntities();renderGame();return;}}}if(isShowingCaptureMessage){if(_0x1793b6-captureMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}const _0x301401=enemies['find'](_0x533bcb=>_0x533bcb['id']===capturedBossIdWithMessage);if(_0x301401&&_0x301401['state']===_0x40f0bd(0x2c1)){const _0x449023=_0x1793b6-captureMessageStartTime,_0x537a88=Math[_0x40f0bd(0x228)](0x1,_0x449023/CAPTURE_MESSAGE_DURATION);_0x301401['captureAnimationRotation']=_0x537a88*0x2*(0x2*Math['PI']);}else _0x301401&&(_0x301401[_0x40f0bd(0x32c)]=0x0);if(isInGameState&&!isShowingPlayerGameOverMessage&&!isPlayer1ShowingGameOverMessage&&!isPlayer2ShowingGameOverMessage&&gameOverSequenceStartTime===0x0){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208))handlePlayerInput();if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else isPlayerTwoAI&&selectedGameMode===_0x40f0bd(0x2c3)&&currentPlayer===0x2&&aiControl();if(typeof moveEntities==='function')moveEntities();updateExplosions(),updateFloatingScores();}if(_0x1793b6-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();stopSound(_0x40f0bd(0x265)),captureBeamActive=![];if(_0x301401&&_0x301401[_0x40f0bd(0x251)]===_0x40f0bd(0x2c1)){_0x301401[_0x40f0bd(0x251)]='returning',_0x301401[_0x40f0bd(0x32c)]=0x0;try{const _0x20dc64=_0x301401[_0x40f0bd(0x243)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x3f96d7,y:_0x52b603}=getCurrentGridSlotPosition(_0x301401[_0x40f0bd(0x236)],_0x301401[_0x40f0bd(0x25f)],_0x20dc64);_0x301401['targetGridX']=_0x3f96d7,_0x301401[_0x40f0bd(0x295)]=_0x52b603;}catch(_0x196f42){console[_0x40f0bd(0x2eb)](_0x40f0bd(0x317)+_0x301401['id']+':',_0x196f42),_0x301401[_0x40f0bd(0x323)]=gameCanvas['width']/0x2,_0x301401['targetGridY']=ENEMY_TOP_MARGIN;}}else _0x301401&&(_0x301401['captureAnimationRotation']=0x0);capturedBossIdWithMessage=null;const _0x5891ca=gameCanvas?gameCanvas[_0x40f0bd(0x334)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(isTwoPlayerMode&&selectedGameMode===_0x40f0bd(0x260)){if(player1NeedsRespawnAfterCapture&&player1Lives>0x0){ship1={'x':player1CaptureRespawnX,'y':_0x5891ca,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player1CaptureRespawnX,'id':'p1'},isPlayer1ShipCaptured=![],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x1793b6+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=![],player1NeedsRespawnAfterCapture=![],player1CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208))smoothedShip1X=ship1['x'];}if(player2NeedsRespawnAfterCapture&&player2Lives>0x0){ship2={'x':player2CaptureRespawnX,'y':_0x5891ca,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player2CaptureRespawnX,'id':'p2'},isPlayer2ShipCaptured=![],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x1793b6+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=![],player2NeedsRespawnAfterCapture=![],player2CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208))smoothedShip2X=ship2['x'];}if(player1Lives<=0x0&&player2Lives<=0x0){if(gameOverSequenceStartTime===0x0)triggerFinalGameOverSequence();}}else{if(!isManualControl&&!isPlayerTwoAI){if(isShipCaptured&&playerLives>0x0){let _0x43a4ac=gameCanvas?gameCanvas[_0x40f0bd(0x254)]/0x2-SHIP_WIDTH/0x2:0xc8;if(typeof smoothedShipX===_0x40f0bd(0x1f7))_0x43a4ac=smoothedShipX;ship={'x':_0x43a4ac,'y':_0x5891ca,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x43a4ac,'id':_0x40f0bd(0x230)},isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x1793b6+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=![],aiNeedsStabilization=!![];if(smoothedShipX===undefined&&ship)smoothedShipX=ship['x'];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isManualControl){if(isShipCaptured&&playerLives>0x0){let _0x5c9abc=capturedShipRespawnX_NormalMode!==0x0?capturedShipRespawnX_NormalMode:gameCanvas?gameCanvas[_0x40f0bd(0x254)]/0x2-SHIP_WIDTH/0x2:0xc8;ship={'x':_0x5c9abc,'y':_0x5891ca,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x5c9abc,'id':'main'},isShipCaptured=![],capturedShipRespawnX_NormalMode=0x0,isInvincible=!![],invincibilityEndTime=_0x1793b6+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x1793b6+RESPAWN_DELAY_MS;if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)aiNeedsStabilization=!![];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&((!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode===_0x40f0bd(0x2c3)&&(currentPlayer===0x1&&player2Lives<=0x0||currentPlayer===0x2&&player1Lives<=0x0))&&triggerFinalGameOverSequence());}}}}renderGame();return;}const _0x5b13c2=!(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage||isShowingPlayerGameOverMessage),_0x134e83=isShowingIntro&&!_0xdd2d4c&&!(selectedGameMode==='coop'&&level===0x1);if(!_0xdd2d4c&&gameOverSequenceStartTime===0x0&&_0x47c0a8&&!isShowingCaptureMessage&&_0x5b13c2){if(isInGameState&&!_0x134e83){if(!(_0x1ee51a&&!isManualControl)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x40f0bd(0x2c3)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}}isManualControl&&handlePlayerInput();}}isTwoPlayerMode&&selectedGameMode===_0x40f0bd(0x260)?(isPlayer1Invincible&&_0x1793b6>=player1InvincibilityEndTime&&(isPlayer1Invincible=![],player1InvincibilityEndTime=0x0),isPlayer2Invincible&&_0x1793b6>=player2InvincibilityEndTime&&(isPlayer2Invincible=![],player2InvincibilityEndTime=0x0)):(isInvincible&&_0x1793b6>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0),isWaitingForRespawn&&_0x1793b6>=respawnTime&&(isWaitingForRespawn=![]));const _0x2c215e=showExtraLifeMessage&&_0x1793b6-extraLifeMessageStartTime<0x64;if(_0x2c215e&&(isWaveTransitioning||isChallengingStage&&enemies[_0x40f0bd(0x2aa)]===0x0)){}if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208))&&isChallengingStage&&enemies['length']===0x0&&!isCsCompletionDelayActive&&!showCsBonusScoreMessage&&!showPerfectMessage&&gameCanvas&&gameCanvas['width']>0x0){const _0x33f23c=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage,_0x136c01=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage;if(_0x33f23c&&!_0x136c01){const _0x51047a=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x327e78=Math[_0x40f0bd(0x223)](gameCanvas[_0x40f0bd(0x254)]/0x2-_0x51047a/0x2);ship1['x']=_0x327e78,ship1[_0x40f0bd(0x1d6)]=_0x327e78,smoothedShip1X=_0x327e78;}else{if(_0x136c01&&!_0x33f23c){const _0x1e338d=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x2ddf77=Math[_0x40f0bd(0x223)](gameCanvas[_0x40f0bd(0x254)]/0x2-_0x1e338d/0x2);ship2['x']=_0x2ddf77,ship2[_0x40f0bd(0x1d6)]=_0x2ddf77,smoothedShip2X=_0x2ddf77;}}}if(isCsCompletionDelayActive&&_0x5b13c2&&gameOverSequenceStartTime===0x0){if(_0x1793b6-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY+EXPLOSION_DURATION){isCsCompletionDelayActive=![],csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies;csCompletionResultIsPerfect?(playSound(_0x40f0bd(0x2e5),![],0.6),showCsHitsMessage=!![],csHitsMessageStartTime=_0x1793b6):(playSound(_0x40f0bd(0x253),![],0.6),showCSClearMessage=!![],csClearMessageStartTime=_0x1793b6);bullets=[],enemyBullets=[],renderGame();return;}else{if(_0x1793b6-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY&&explosions[_0x40f0bd(0x2aa)]>0x0){updateExplosions(),renderGame();return;}else{if(_0x1793b6-csCompletionDelayStartTime<CS_COMPLETION_MESSAGE_DELAY){renderGame();return;}}}}let _0x5a6f28=![],_0xc2c17b=![];if(_0x5b13c2&&gameOverSequenceStartTime===0x0&&!isShowingCoopPlayersReady&&!_0xdd2d4c){if(showCsHitsMessage){if(_0x1793b6-csHitsMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}if(Date['now']()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION){showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x1793b6,explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}_0xc2c17b=!![];}else{if(showPerfectMessage){if(_0x1793b6-perfectMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}if(Date['now']()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION){showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x1793b6,explosions=[];if(typeof updateExplosions==='function')updateExplosions();}_0xc2c17b=!![];}else{if(showCsBonusScoreMessage){if(_0x1793b6-csBonusScoreMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}if(Date['now']()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION){showCsBonusScoreMessage=![],_0x5a6f28=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}_0xc2c17b=!![];}else{if(showCSClearMessage){if(_0x1793b6-csClearMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}Date[_0x40f0bd(0x1f5)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]);Date['now']()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]);if(Date['now']()-csClearMessageStartTime>=CS_CLEAR_DELAY){showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x5a6f28=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}_0xc2c17b=!![];}else{if(showExtraLifeMessage)Date['now']()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![]),_0xc2c17b=!![];else{if(showReadyMessage){if(_0x1793b6-readyMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}if(Date['now']()-readyMessageStartTime>READY_MESSAGE_DURATION){showReadyMessage=![],_0x5a6f28=!![],explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}_0xc2c17b=!![];}}}}}}}if(_0xc2c17b&&!_0x5a6f28&&!isShowingCoopPlayersReady&&!_0xdd2d4c&&!isShowingCaptureMessage&&_0x5b13c2){if(!((_0x1ee51a||showCsHitsMessage||showCSClearMessage)&&isManualControl)&&!showExtraLifeMessage){renderGame();return;}}if(_0x134e83&&_0x5b13c2&&gameOverSequenceStartTime===0x0){let _0x4a382e=![];const _0x166352=_0x1793b6-introDisplayStartTime;let _0x1319b8=INTRO_DURATION_PER_STEP;const _0x777776=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x2d6),_0x13f249=isTwoPlayerMode&&selectedGameMode==='normal'&&!isPlayerTwoAI;(_0x13f249||_0x777776)&&(_0x1319b8=TWO_PLAYER_STAGE_INTRO_DURATION);if(introStep===0x1){if(_0x166352<0x64){explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}let _0x46471d=null,_0x306eba=0x1;if(!playerIntroSoundPlayed){const _0x4f7270=_0x777776||_0x13f249,_0x365382=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208)&&level>0x1;if(_0x4f7270){if(currentPlayer===0x1&&level===0x1&&!initialGameStartSoundPlayedThisSession)_0x46471d=_0x40f0bd(0x287),_0x306eba=0.4;else(currentPlayer===0x2||level>0x1)&&(_0x46471d=_0x40f0bd(0x1e4),_0x306eba=0.2);}else{if(_0x365382)_0x46471d=_0x40f0bd(0x1e4),_0x306eba=0.2;else{if(!isTwoPlayerMode){if(level===0x1&&!initialGameStartSoundPlayedThisSession)_0x46471d=_0x40f0bd(0x287),_0x306eba=0.4;else level>0x1&&(_0x46471d=_0x40f0bd(0x1e4),_0x306eba=0.2);}}}}_0x46471d&&(playSound(_0x46471d,![],_0x306eba),playerIntroSoundPlayed=!![],_0x46471d===_0x40f0bd(0x287)&&(initialGameStartSoundPlayedThisSession=!![]));if(_0x166352>=_0x1319b8){if(isChallengingStage)introStep=0x3;else introStep=0x2;introDisplayStartTime=_0x1793b6,explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}}else{if(introStep===0x2){if(_0x166352<0x64){explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}if(!stageIntroSoundPlayed){if(playLevelUpAfterCSBonus&&(isTwoPlayerMode&&selectedGameMode===_0x40f0bd(0x260)))playSound(_0x40f0bd(0x1e4),![],0.2),playLevelUpAfterCSBonus=![],stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x40f0bd(0x260)&&!isPlayerTwoAI&&!isCoopAIDemoActive&&level===0x1)playSound(_0x40f0bd(0x1e4),![],0.2),stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x40f0bd(0x260)&&!isPlayerTwoAI&&!isCoopAIDemoActive&&level>0x1)playSound('levelUpSound',![],0.2),stageIntroSoundPlayed=!![];else{if(selectedGameMode===_0x40f0bd(0x260)){if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208))&&level>0x1)playSound(_0x40f0bd(0x1e4),![],0.2),stageIntroSoundPlayed=!![];else(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208))&&level===0x1&&(stageIntroSoundPlayed=!![]);}else{if(!isTwoPlayerMode&&level>0x1)playSound(_0x40f0bd(0x1e4),![],0.2),stageIntroSoundPlayed=!![];else{if(level>0x1&&!playerIntroSoundPlayed&&!(isPlayerTwoAI&&selectedGameMode===_0x40f0bd(0x2c3))&&!initialGameStartSoundPlayedThisSession)playSound(_0x40f0bd(0x1e4),![],0.2),stageIntroSoundPlayed=!![];else level===0x1&&!isManualControl&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode==='coop')&&!initialGameStartSoundPlayedThisSession&&(playSound(_0x40f0bd(0x287),![],0.4),initialGameStartSoundPlayedThisSession=!![],stageIntroSoundPlayed=!![]);}}}}}}if(_0x166352>=_0x1319b8){_0x4a382e=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}else{if(introStep===0x3){if(_0x166352<0x64){explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}!csIntroSoundPlayed&&(playSound(_0x40f0bd(0x2fd),![],0.4),csIntroSoundPlayed=!![],stageIntroSoundPlayed=!![]);if(_0x166352>=_0x1319b8){_0x4a382e=!![],explosions=[];if(typeof updateExplosions===_0x40f0bd(0x30c))updateExplosions();}}}}if(isInGameState&&_0x5b13c2&&gameOverSequenceStartTime===0x0&&gameCanvas){let _0x1d5b90=null,_0x11a21b=null;const _0x578e50=isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x2d6)&&currentPlayer===0x1&&isShowingIntro;if(_0x578e50){let _0x5cfdf1=![],_0x139165=![];const _0x2ca2fd=navigator[_0x40f0bd(0x31d)]();if(connectedGamepadIndex!==null&&_0x2ca2fd?.[connectedGamepadIndex]){const _0x3e55a8=_0x2ca2fd[connectedGamepadIndex],_0x41c991=processSingleController(_0x3e55a8,previousGameButtonStates);_0x5cfdf1=_0x41c991[_0x40f0bd(0x26f)],_0x139165=_0x41c991['right'];}_0x1d5b90=keyboardP1LeftDown||_0x5cfdf1,_0x11a21b=keyboardP1RightDown||_0x139165;}if(_0x777776&&currentPlayer===0x2)aiControl();else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208))aiControlCoop();else!isManualControl&&!isPlayerTwoAI&&aiControl();}typeof moveEntities===_0x40f0bd(0x30c)&&moveEntities(_0x1d5b90,_0x11a21b),updateExplosions(),updateFloatingScores();}if(_0x4a382e){isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![];isManualControl&&(isShowingDemoText=![]);if(!isChallengingStage)isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208)?(aiShip1CanShootTime=Date[_0x40f0bd(0x1f5)]()+0x3e8,aiShip2CanShootTime=Date[_0x40f0bd(0x1f5)]()+0x4b0):aiCanShootTime=Date[_0x40f0bd(0x1f5)]()+(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x2d6)?0x3e8:0x3e8);else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208))aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0;else aiCanShootTime=0x0;}const _0x596efd=level===0x1&&selectedGameMode!=='coop',_0x40e3e1=level===0x1&&selectedGameMode===_0x40f0bd(0x260),_0x4270d3=_0x596efd&&!gameJustStartedAndWaveLaunched||level>0x1||isChallengingStage||_0x40e3e1&&!gameJustStartedAndWaveLaunched;if(_0x4270d3){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x40f0bd(0x2aa)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound('entranceSound',![],0.4);}else isEntrancePhaseActive=![],stopSound(_0x40f0bd(0x2fd)),isWaveTransitioning=!![],readyForNextWaveReset=!![],bullets=[],enemyBullets=[],explosions=[],setTimeout(()=>{const _0x103f2c=_0x40f0bd,_0x4b1eef=isTwoPlayerMode&&selectedGameMode===_0x103f2c(0x260)?player1Lives>0x0||player2Lives>0x0:playerLives>0x0;if((isInGameState||!isInGameState&&_0x4b1eef)&&typeof resetWaveInternal===_0x103f2c(0x30c)){if(_0x4b1eef)resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![];else triggerFinalGameOverSequence();}},0x64);}if(_0x596efd||level>0x1||isChallengingStage||_0x40e3e1)gameJustStartedAndWaveLaunched=!![];}}isManualControl&&_0x134e83&&_0x5b13c2&&gameOverSequenceStartTime===0x0&&handlePlayerInput();renderGame();return;}const _0x20816e=!_0xdd2d4c&&!_0x134e83&&!_0x5a6f28&&!isShowingCaptureMessage;if(gameJustStarted&&_0x20816e){if(!gameJustStartedAndWaveLaunched){const _0x4046e3=selectedGameMode===_0x40f0bd(0x260)&&level===0x1&&coopPlayersReadyStartTime!==0x0;if(!_0x4046e3){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x40f0bd(0x2aa)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound('entranceSound',![],0.4);}else isWaveTransitioning=!![],readyForNextWaveReset=!![];}gameJustStartedAndWaveLaunched=!![];}}gameJustStarted=![];}if(_0x20816e&&isInGameState&&_0x5b13c2&&gameOverSequenceStartTime===0x0){if(!_0x1ee51a||_0x1ee51a&&isManualControl){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x40f0bd(0x2c3)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}isManualControl&&handlePlayerInput();if(typeof moveEntities===_0x40f0bd(0x30c))moveEntities();updateExplosions(),updateFloatingScores();}else _0x1ee51a&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208))&&(updateExplosions(),updateFloatingScores());}if(_0x20816e&&_0x5b13c2&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&_0x47c0a8){const _0x385356=enemies['some'](_0x2cd7f6=>_0x2cd7f6?.['state']==='in_grid');if(_0x385356&&isGridBreathingActive){const _0xffd307=_0x1793b6-gridBreathStartTime,_0x5cc433=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x1ff873=_0xffd307%_0x5cc433;currentGridBreathFactor=(Math[_0x40f0bd(0x2b7)](_0x1ff873/_0x5cc433*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x385356&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x385356&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x1793b6,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0xbdf42=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x3a63a7=enemies[_0x40f0bd(0x322)](_0xa74960=>_0xa74960?.['state']==='following_entrance_path'||_0xa74960?.[_0x40f0bd(0x251)]===_0x40f0bd(0x1ee)||_0xa74960?.[_0x40f0bd(0x251)]==='following_bezier_path');if(totalEnemiesScheduledForWave>0x0&&_0xbdf42&&!_0x3a63a7){const _0x2cbe23=isEntrancePhaseActive;isEntrancePhaseActive=![];if(_0x2cbe23){stopSound(_0x40f0bd(0x2fd)),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts[_0x40f0bd(0x2ac)](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![];if(!isChallengingStage&&!isFullGridWave){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208))coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=Date[_0x40f0bd(0x1f5)]()+COOP_AI_CAPTURE_DIVE_ANTICIPATION_DURATION_MS,typeof triggerImmediateCaptureDive===_0x40f0bd(0x30c)&&triggerImmediateCaptureDive();else typeof triggerImmediateCaptureDive===_0x40f0bd(0x30c)&&triggerImmediateCaptureDive();}}}}if(!isChallengingStage&&!_0x134e83&&!isPaused&&!isWaveTransitioning)triggerGridFiring();if(!isWaveTransitioning&&_0x47c0a8&&!_0x134e83&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x37f5f3=enemies[_0x40f0bd(0x2aa)]===0x0,_0x4558f9=fallingShips['length']===0x0,_0x280519=![];if(isChallengingStage){if(_0x37f5f3&&!isEntrancePhaseActive)_0x280519=!![];}else{if(_0x37f5f3&&!isEntrancePhaseActive&&_0x4558f9)_0x280519=!![];}if(_0x280519){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40f0bd(0x208))&&gameCanvas&&gameCanvas[_0x40f0bd(0x254)]>0x0){const _0x5b3bd8=player1Lives,_0x4374a7=player2Lives,_0x3c6f03=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(_0x5b3bd8>0x0&&_0x4374a7<=0x0&&ship1){const _0x4554aa=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x30770c=Math['round'](gameCanvas['width']/0x2-_0x4554aa/0x2);ship1['x']=_0x30770c,ship1[_0x40f0bd(0x1d6)]=_0x30770c,smoothedShip1X=_0x30770c,ship1['y']=_0x3c6f03;}else{if(_0x4374a7>0x0&&_0x5b3bd8<=0x0&&ship2){const _0x4a75b4=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x340cfb=Math[_0x40f0bd(0x223)](gameCanvas[_0x40f0bd(0x254)]/0x2-_0x4a75b4/0x2);ship2['x']=_0x340cfb,ship2[_0x40f0bd(0x1d6)]=_0x340cfb,smoothedShip2X=_0x340cfb,ship2['y']=_0x3c6f03;}}}isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(_0x40f0bd(0x2a9)),isGridSoundPlaying=![]);!isChallengingStage&&(bullets=[],enemyBullets=[]);floatingScores=[],enemySpawnTimeouts[_0x40f0bd(0x2ac)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;let _0x558f5c;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,setTimeout(()=>{const _0x3b759e=_0x40f0bd;if(isWaveTransitioning){explosions=[];if(typeof updateExplosions==='function')updateExplosions();isCsCompletionDelayActive=!![],csCompletionDelayStartTime=Date[_0x3b759e(0x1f5)]();}},EXPLOSION_DURATION);if(csCompletionResultIsPerfect){let _0x5e9f6c=0x2710;if(isTwoPlayerMode&&selectedGameMode===_0x40f0bd(0x260)){if(player1Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&ship1){player1Score+=_0x5e9f6c;if(player1Score>highScore)highScore=player1Score,highScoreHolderId='player1',!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x40f0bd(0x2b3),![],0.2));else player1Score===highScore&&highScoreHolderId!==_0x40f0bd(0x2a5)&&highScore>0x0&&(highScoreHolderId=_0x40f0bd(0x2a5),!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x40f0bd(0x2b3),![],0.2)));}if(player2Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&ship2){player2Score+=_0x5e9f6c;const _0x333484=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?isCoopAIDemoActive?_0x40f0bd(0x24c):_0x40f0bd(0x1ea):_0x40f0bd(0x24c);if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x333484,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x40f0bd(0x2b3),![],0.2));else player2Score===highScore&&highScoreHolderId!==_0x333484&&highScore>0x0&&(highScoreHolderId=_0x333484,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2)));}checkAndAwardExtraLife(null);}else{score+=_0x5e9f6c;if(!isTwoPlayerMode)player1Score=score;else{if(isTwoPlayerMode&&selectedGameMode===_0x40f0bd(0x2c3)){if(currentPlayer===0x1)player1Score=score;else player2Score=score;}}let _0xe02dac=!isTwoPlayerMode?_0x40f0bd(0x2a5):currentPlayer===0x1?_0x40f0bd(0x2a5):isPlayerTwoAI?_0x40f0bd(0x1ea):_0x40f0bd(0x24c),_0x57f8b6=!isTwoPlayerMode?player1TriggeredHighScoreSound:currentPlayer===0x1?player1TriggeredHighScoreSound:player2TriggeredHighScoreSound,_0x59bef8=!isTwoPlayerMode?()=>player1TriggeredHighScoreSound=!![]:currentPlayer===0x1?()=>player1TriggeredHighScoreSound=!![]:()=>player2TriggeredHighScoreSound=!![];if(score>highScore)highScore=score,highScoreHolderId=_0xe02dac,!_0x57f8b6&&(_0x59bef8(),playSound('hiScoreSound',![],0.2));else score===highScore&&highScoreHolderId!==_0xe02dac&&highScore>0x0&&(highScoreHolderId=_0xe02dac,!_0x57f8b6&&(_0x59bef8(),playSound('hiScoreSound',![],0.2)));checkAndAwardExtraLife(currentPlayer);}_0x558f5c=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else isTwoPlayerMode&&selectedGameMode===_0x40f0bd(0x260)?checkAndAwardExtraLife(null):checkAndAwardExtraLife(currentPlayer),_0x558f5c=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x558f5c+=0x64;}else playSound(_0x40f0bd(0x29e),![],0.8),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,_0x558f5c=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x4c6c4c=_0x40f0bd;let _0x4c3096=![],_0x43aceb=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x4c6c4c(0x2c3)){_0x43aceb=currentPlayer;_0x43aceb===0x1?player1MaxLevelReached=Math[_0x4c6c4c(0x269)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x4c6c4c(0x269)](player2MaxLevelReached,level);const _0x702e18=switchPlayerTurn();if(_0x702e18){if(_0x43aceb===0x2&&currentPlayer===0x1&&player1CompletedLevel===level)_0x4c3096=!![],player1CompletedLevel=-0x1;else _0x43aceb===0x1?(player1CompletedLevel=level,_0x4c3096=![]):_0x4c3096=![];}else _0x4c3096=!![],player1CompletedLevel=-0x1;}else{_0x4c3096=!![];if(!isTwoPlayerMode)player1MaxLevelReached=Math[_0x4c6c4c(0x269)](player1MaxLevelReached,level);else{if(isTwoPlayerMode&&selectedGameMode===_0x4c6c4c(0x260)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x4c6c4c(0x269)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math['max'](player2MaxLevelReached,level);}}}if(_0x4c3096){level++;if(isTwoPlayerMode&&selectedGameMode===_0x4c6c4c(0x260)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x4c6c4c(0x269)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x4c6c4c(0x269)](player2MaxLevelReached,level);}else{if(isTwoPlayerMode&&selectedGameMode===_0x4c6c4c(0x2c3)){if(currentPlayer===0x1&&player1Lives>0x0)player1MaxLevelReached=Math[_0x4c6c4c(0x269)](player1MaxLevelReached,level);else{if(currentPlayer===0x2&&player2Lives>0x0)player2MaxLevelReached=Math[_0x4c6c4c(0x269)](player2MaxLevelReached,level);}}else{if(playerLives>0x0)player1MaxLevelReached=Math[_0x4c6c4c(0x269)](player1MaxLevelReached,level);}}}let _0x1d411f=![];if(isTwoPlayerMode&&selectedGameMode===_0x4c6c4c(0x260))_0x1d411f=player1Lives>0x0||player2Lives>0x0;else{if(isTwoPlayerMode&&selectedGameMode===_0x4c6c4c(0x2c3))_0x1d411f=(currentPlayer===0x1?player1Lives:player2Lives)>0x0;else _0x1d411f=playerLives>0x0;}_0x1d411f?(resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();},_0x558f5c),renderGame();return;}if(!isChallengingStage){if(enemies['length']>0x0){let _0xa1bb8b=null;const _0x8b3460=enemies[_0x40f0bd(0x2cd)](_0x32326b=>_0x32326b?.[_0x40f0bd(0x251)]===_0x40f0bd(0x311)),_0x5b40a8=_0x8b3460[_0x40f0bd(0x2aa)]<=0x3,_0x35ab76=Math[_0x40f0bd(0x269)](0x1,Math[_0x40f0bd(0x228)](level,LEVEL_CAP_FOR_SCALING)),_0x233e10=0x1068,_0x21aabc=0x320,_0x5cc1f3=(_0x35ab76-0x1)*((_0x233e10-_0x21aabc)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x43b257=Math[_0x40f0bd(0x269)](_0x21aabc,_0x233e10-_0x5cc1f3),_0x5315ad=Math['round'](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x59027d=enemies[_0x40f0bd(0x2cd)](_0x5b34ae=>_0x5b34ae?.[_0x40f0bd(0x251)]==='attacking'||_0x5b34ae?.[_0x40f0bd(0x251)]===_0x40f0bd(0x298))[_0x40f0bd(0x2aa)];if(_0x5b40a8||_0x1793b6-lastEnemyDetachTime>_0x43b257&&_0x8b3460['length']>0x0&&_0x59027d<_0x5315ad){_0xa1bb8b=findAndDetachEnemy();if(_0xa1bb8b&&_0xa1bb8b[_0x40f0bd(0x2aa)]>0x0){const _0x293805=_0xa1bb8b['map'](_0x53d32c=>enemies[_0x40f0bd(0x2df)](_0x5a0798=>_0x5a0798?.['id']===_0x53d32c['id']))[_0x40f0bd(0x2cd)](_0x424e8b=>_0x424e8b&&_0x424e8b['state']===_0x40f0bd(0x311));if(_0x293805[_0x40f0bd(0x2aa)]>0x0){const _0x1c4956=_0x293805[0x0],_0x5a06f6=_0x1c4956[_0x40f0bd(0x32b)];if(!_0x5b40a8)lastEnemyDetachTime=_0x1793b6;if(_0x5a06f6===_0x40f0bd(0x2c3)){const _0x3a7a7f=generateAttackPathInternal(_0x1c4956);if(_0x3a7a7f&&_0x3a7a7f[_0x40f0bd(0x2aa)]>0x0){if(_0x293805[_0x40f0bd(0x2aa)]===0x3&&_0x1c4956[_0x40f0bd(0x243)]===ENEMY3_TYPE&&level!==0x1)playSound(_0x40f0bd(0x2ef),![],0.3);let _0x210c6e=[..._0x293805];const _0x401947=_0x210c6e[_0x40f0bd(0x2aa)];if(_0x401947>0x1){let _0x12ff9a=null,_0x4459a8=[];_0x210c6e[_0x40f0bd(0x2ac)](_0x5bc181=>{const _0x52a926=_0x40f0bd;if(_0x5bc181[_0x52a926(0x243)]===ENEMY3_TYPE)_0x12ff9a=_0x5bc181;else _0x4459a8['push'](_0x5bc181);});if(_0x12ff9a&&level!==0x1&&_0x401947===0x3&&_0x4459a8[_0x40f0bd(0x2aa)]===0x2)_0x210c6e=[_0x4459a8[0x0],_0x12ff9a,_0x4459a8[0x1]];else _0x210c6e[_0x40f0bd(0x200)]((_0x351687,_0x4f2963)=>(_0x351687?.[_0x40f0bd(0x25f)]??0x0)-(_0x4f2963?.['gridCol']??0x0));const _0x20dc95=0x5;let _0x3cf186=0x0;_0x210c6e=_0x210c6e[_0x40f0bd(0x2cd)](_0x14f6bc=>_0x14f6bc&&typeof _0x14f6bc['width']===_0x40f0bd(0x1f7));const _0x1aa6df=_0x210c6e['length'];for(let _0x1f25cb=0x0;_0x1f25cb<_0x1aa6df;_0x1f25cb++){_0x3cf186+=_0x210c6e[_0x1f25cb]['width'];if(_0x1f25cb<_0x1aa6df-0x1)_0x3cf186+=_0x20dc95;}const _0x4fd9ca=-_0x3cf186/0x2;let _0x34100d=_0x4fd9ca;for(let _0x55cad3=0x0;_0x55cad3<_0x1aa6df;_0x55cad3++){const _0x4eca8c=_0x210c6e[_0x55cad3];_0x4eca8c['attackFormationOffsetX']=_0x34100d+_0x4eca8c[_0x40f0bd(0x254)]/0x2,_0x34100d+=_0x4eca8c['width']+_0x20dc95;}}else _0x210c6e['forEach'](_0x37e965=>_0x37e965[_0x40f0bd(0x321)]=0x0);const _0x68a1bd='attack-'+_0x1c4956['id']+'-'+_0x1793b6;_0x210c6e[_0x40f0bd(0x2ac)](_0x459f0e=>{const _0x4ba41=_0x40f0bd;if(_0x459f0e)_0x459f0e[_0x4ba41(0x31e)]=_0x68a1bd;});let _0x444ee7=![],_0x17fb5b=GROUP_FIRE_BURST_DELAY;if(_0x1c4956['type']===ENEMY2_TYPE||_0x1c4956['type']===ENEMY3_TYPE){_0x444ee7=!![];if(_0x1c4956[_0x40f0bd(0x243)]===ENEMY2_TYPE&&_0x401947===0x1)_0x17fb5b=SOLO_BUTTERFLY_FIRE_DELAY;}else{if(_0x1c4956[_0x40f0bd(0x243)]===ENEMY1_TYPE)_0x444ee7=!![];}if(_0x5b40a8&&level>0x1)_0x444ee7=![];_0x444ee7&&_0x210c6e[_0x40f0bd(0x2ac)](_0x51ee26=>{const _0x5e4625=_0x40f0bd,_0x4af7fd=_0x51ee26&&!(_0x51ee26[_0x5e4625(0x243)]===ENEMY3_TYPE&&_0x51ee26[_0x5e4625(0x301)]);if(_0x4af7fd)fireEnemyBurst(_0x51ee26['id'],_0x5e4625(0x2b4),_0x17fb5b);}),_0x210c6e[_0x40f0bd(0x2ac)]((_0x24a6bc,_0x359194)=>{const _0x3a4400=_0x40f0bd;_0x24a6bc&&_0x24a6bc[_0x3a4400(0x251)]==='in_grid'&&(_0x24a6bc[_0x3a4400(0x251)]=_0x3a4400(0x298),_0x24a6bc[_0x3a4400(0x1eb)]=![],_0x24a6bc[_0x3a4400(0x1f1)]=0x0,_0x24a6bc['velocityY']=0x0,_0x24a6bc[_0x3a4400(0x2a1)]=![],setTimeout(()=>{const _0x2a05de=_0x3a4400;if(isPaused)return;const _0x5006ca=enemies['find'](_0x1f7cc8=>_0x1f7cc8?.['id']===_0x24a6bc['id']);if(_0x5006ca&&_0x5006ca[_0x2a05de(0x251)]==='preparing_attack')try{const _0x217d75=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x6c74a7=0x1;if(_0x5006ca['type']===ENEMY1_TYPE)_0x6c74a7=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x5006ca['type']===ENEMY2_TYPE)_0x6c74a7=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x5006ca['type']===ENEMY3_TYPE)_0x6c74a7=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x24a6bc[_0x2a05de(0x243)]===ENEMY3_TYPE)playSound('bossGalagaDiveSound',![],0.2);else playSound(_0x2a05de(0x22b),![],0.2);_0x5006ca[_0x2a05de(0x251)]=_0x2a05de(0x2b4),_0x5006ca[_0x2a05de(0x27e)]=_0x3a7a7f,_0x5006ca[_0x2a05de(0x216)]=0x0,_0x5006ca[_0x2a05de(0x2c5)]=0x0,_0x5006ca[_0x2a05de(0x2f5)]=_0x217d75*_0x6c74a7,_0x5006ca[_0x2a05de(0x275)]=0x0,_0x5006ca['canFireThisDive']=!![];}catch(_0xaacbce){console[_0x2a05de(0x2eb)]('Error\x20starting\x20attack\x20for\x20'+_0x24a6bc['id']+':',_0xaacbce);}},_0x359194*GROUP_DETACH_DELAY_MS));});}else _0xa1bb8b[_0x40f0bd(0x2ac)](_0x31fe8c=>{const _0x4b2b7a=_0x40f0bd;if(_0x31fe8c)_0x31fe8c[_0x4b2b7a(0x1eb)]=![];});}}}}}}enemies[_0x40f0bd(0x2ac)](_0x52d5d1=>{const _0x1d8746=_0x40f0bd;if(_0x52d5d1&&_0x52d5d1[_0x1d8746(0x243)]===ENEMY3_TYPE&&_0x52d5d1['hasCapturedShip']&&_0x52d5d1['state']===_0x1d8746(0x2b4)&&_0x52d5d1[_0x1d8746(0x2d2)]&&typeof _0x52d5d1['capturedShipLastFiredTime']===_0x1d8746(0x1f7)){if(_0x1793b6-_0x52d5d1['capturedShipLastFiredTime']>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x4e4f47=_0x52d5d1['x']+_0x52d5d1['width']/0x2,_0x37cfd6=_0x52d5d1['y']+_0x52d5d1['height']+_0x52d5d1[_0x1d8746(0x2d2)][_0x1d8746(0x334)]*0.5,_0x47e058={'x':_0x4e4f47,'y':_0x37cfd6};createBulletSimple(_0x52d5d1,_0x47e058)&&(_0x52d5d1['capturedShipLastFiredTime']=_0x1793b6,playSound(_0x1d8746(0x1de),![],0.4));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0xeb1315=_0x1793b6-gameOverSequenceStartTime,_0x256dc2=_0xeb1315>=GAME_OVER_DURATION;if(_0x256dc2&&!isShowingResultsScreen){isShowingResultsScreen=!![],stopSound(_0x40f0bd(0x211)),playSound(_0x40f0bd(0x252),!![],0.2),explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}}!_0xdd2d4c&&renderGame();}catch(_0x58e8c3){console[_0x40f0bd(0x2eb)]('!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!',_0x58e8c3,_0x58e8c3[_0x40f0bd(0x2f7)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0x40f0bd(0x24a)),stopAllGameSoundsInternal(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState==='function'&&showMenuState();}catch(_0x49bee0){console[_0x40f0bd(0x2eb)](_0x40f0bd(0x297),_0x49bee0);}}}function checkAndAwardExtraLife(_0x2b0ad8=null){const _0xed3422=_0x973987;try{const _0x278a39=[];if(_0x2b0ad8===0x1){const _0x20c068=isTwoPlayerMode&&selectedGameMode===_0xed3422(0x260)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0xed3422(0x2c3)&&currentPlayer===0x1?playerLives:player1Lives,_0x58d1c8=isTwoPlayerMode&&selectedGameMode==='coop'?player1Score:isTwoPlayerMode&&selectedGameMode===_0xed3422(0x2c3)&&currentPlayer===0x1?score:player1Score;_0x278a39[_0xed3422(0x1e7)]({'num':0x1,'currentLives':_0x20c068,'currentScore':_0x58d1c8,'thresholdsMet':player1LifeThresholdsMet});}else{if(_0x2b0ad8===0x2&&isTwoPlayerMode){const _0x162a37=selectedGameMode===_0xed3422(0x260)?player2Lives:selectedGameMode==='normal'&&currentPlayer===0x2?playerLives:player2Lives,_0x254a43=selectedGameMode==='coop'?player2Score:selectedGameMode===_0xed3422(0x2c3)&&currentPlayer===0x2?score:player2Score;_0x278a39[_0xed3422(0x1e7)]({'num':0x2,'currentLives':_0x162a37,'currentScore':_0x254a43,'thresholdsMet':player2LifeThresholdsMet});}else{if(isTwoPlayerMode&&selectedGameMode===_0xed3422(0x260)&&_0x2b0ad8===null)_0x278a39[_0xed3422(0x1e7)]({'num':0x1,'currentLives':player1Lives,'currentScore':player1Score,'thresholdsMet':player1LifeThresholdsMet}),_0x278a39[_0xed3422(0x1e7)]({'num':0x2,'currentLives':player2Lives,'currentScore':player2Score,'thresholdsMet':player2LifeThresholdsMet});else{if(!isTwoPlayerMode&&(_0x2b0ad8===null||_0x2b0ad8===0x1))_0x278a39[_0xed3422(0x1e7)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet});else isTwoPlayerMode&&selectedGameMode==='normal'&&_0x2b0ad8===currentPlayer&&(currentPlayer===0x1?_0x278a39[_0xed3422(0x1e7)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet}):_0x278a39[_0xed3422(0x1e7)]({'num':0x2,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player2LifeThresholdsMet}));}}}_0x278a39['forEach'](_0x3c894a=>{const _0x14954a=_0xed3422;let _0x3c1049=![];while(!![]){let _0x372f09=![],_0x968c06=-0x1;const _0x42a521=_0x3c894a[_0x14954a(0x20a)]['size'];if(_0x42a521===0x0)_0x968c06=EXTRA_LIFE_THRESHOLD_1;else{if(_0x42a521===0x1&&!_0x3c894a['thresholdsMet'][_0x14954a(0x292)](EXTRA_LIFE_THRESHOLD_2))_0x968c06=EXTRA_LIFE_THRESHOLD_2;else{if(_0x42a521>=0x1&&_0x3c894a[_0x14954a(0x20a)]['has'](EXTRA_LIFE_THRESHOLD_1)&&_0x3c894a[_0x14954a(0x20a)]['has'](EXTRA_LIFE_THRESHOLD_2)){let _0x132111=0x0;_0x3c894a[_0x14954a(0x20a)][_0x14954a(0x2ac)](_0x1d3c90=>{_0x1d3c90>=EXTRA_LIFE_THRESHOLD_2&&(_0x1d3c90-EXTRA_LIFE_THRESHOLD_2)%RECURRING_EXTRA_LIFE_INTERVAL===0x0&&_0x132111++;}),_0x968c06=EXTRA_LIFE_THRESHOLD_2+_0x132111*RECURRING_EXTRA_LIFE_INTERVAL;}else{if(_0x42a521===0x1&&_0x3c894a['thresholdsMet']['has'](EXTRA_LIFE_THRESHOLD_1)&&!_0x3c894a['thresholdsMet']['has'](EXTRA_LIFE_THRESHOLD_2))_0x968c06=EXTRA_LIFE_THRESHOLD_2;else _0x42a521===0x1&&_0x3c894a['thresholdsMet'][_0x14954a(0x292)](EXTRA_LIFE_THRESHOLD_2)&&!_0x3c894a[_0x14954a(0x20a)][_0x14954a(0x292)](EXTRA_LIFE_THRESHOLD_1)&&(_0x968c06=EXTRA_LIFE_THRESHOLD_1);}}}if(_0x968c06!==-0x1&&_0x3c894a[_0x14954a(0x220)]>=_0x968c06&&!_0x3c894a[_0x14954a(0x20a)][_0x14954a(0x292)](_0x968c06)){if(_0x3c894a[_0x14954a(0x20e)]===0x1){if(isTwoPlayerMode&&selectedGameMode===_0x14954a(0x260))player1Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x14954a(0x2c3)&&currentPlayer===0x1)playerLives++;else{if(!isTwoPlayerMode)playerLives++;}}player1Lives=isTwoPlayerMode&&selectedGameMode===_0x14954a(0x260)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x14954a(0x2c3)&&currentPlayer===0x1?playerLives:player1Lives,_0x3c894a[_0x14954a(0x1d9)]=player1Lives;}else{if(_0x3c894a[_0x14954a(0x20e)]===0x2){if(isTwoPlayerMode&&selectedGameMode===_0x14954a(0x260))player2Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x14954a(0x2c3)&&currentPlayer===0x2)playerLives++;}player2Lives=isTwoPlayerMode&&selectedGameMode===_0x14954a(0x260)?player2Lives:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x2?playerLives:player2Lives,_0x3c894a['currentLives']=player2Lives;}}_0x3c894a[_0x14954a(0x20a)][_0x14954a(0x1f4)](_0x968c06),_0x3c1049=!![],_0x372f09=!![];}if(!_0x372f09)break;}_0x3c1049&&!showExtraLifeMessage&&!showCsBonusScoreMessage&&!showPerfectMessage&&!showCsHitsMessage&&!showCSClearMessage&&!showReadyMessage&&setTimeout(()=>{const _0x3aafa4=_0x14954a;if(isInGameState){explosions=[];if(typeof updateExplosions==='function')updateExplosions();showExtraLifeMessage=!![],extraLifeMessageStartTime=Date[_0x3aafa4(0x1f5)](),playSound('extraLifeSound',![],0.5);}},EXPLOSION_DURATION);});}catch(_0x5b96da){console[_0xed3422(0x2eb)](_0xed3422(0x226),_0x5b96da);}}