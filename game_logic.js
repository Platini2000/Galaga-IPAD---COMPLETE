const _0x502888=_0x45b9;(function(_0x4918aa,_0x402e67){const _0x270927=_0x45b9,_0x5e1388=_0x4918aa();while(!![]){try{const _0x5a0026=-parseInt(_0x270927(0x1ae))/0x1+parseInt(_0x270927(0x2b7))/0x2+parseInt(_0x270927(0x2ae))/0x3+-parseInt(_0x270927(0x1b3))/0x4+parseInt(_0x270927(0x234))/0x5*(-parseInt(_0x270927(0x16c))/0x6)+parseInt(_0x270927(0x235))/0x7+-parseInt(_0x270927(0x291))/0x8*(parseInt(_0x270927(0x239))/0x9);if(_0x5a0026===_0x402e67)break;else _0x5e1388['push'](_0x5e1388['shift']());}catch(_0x5d9810){_0x5e1388['push'](_0x5e1388['shift']());}}}(_0xc312,0xc726c));function generateAttackPathInternal(_0x56f6ef){const _0x31467e=_0x45b9;try{if(!_0x56f6ef||!gameCanvas)return[];const _0x321ae2=_0x56f6ef['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x56f6ef['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x38d99e=_0x56f6ef[_0x31467e(0x207)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x56f6ef[_0x31467e(0x207)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x5c9dfd=_0x321ae2*0.5,_0x26ed1f=gameCanvas[_0x31467e(0x294)],_0xb4ab76=gameCanvas['height'];let _0x6349cc=[];const _0x4d5721={'x':_0x56f6ef['x'],'y':_0x56f6ef['y']},_0x5b1e49=Math['min'](_0xb4ab76*0.06,_0x38d99e*1.8),_0x29caf0=Math[_0x31467e(0x287)](_0x26ed1f*0.04,_0x321ae2*1.2),_0x484909=_0x56f6ef['x']+_0x321ae2/0x2<_0x26ed1f/0x2?0x1:-0x1,_0x463156={'x':_0x4d5721['x']-_0x484909*_0x29caf0*0.6,'y':_0x4d5721['y']-_0x5b1e49};_0x463156['x']=Math[_0x31467e(0x253)](_0x5c9dfd,Math[_0x31467e(0x287)](_0x26ed1f-_0x5c9dfd-_0x321ae2,_0x463156['x'])),_0x463156['y']=Math[_0x31467e(0x253)](_0x5c9dfd,_0x463156['y']);const _0x31c9e3={'x':_0x4d5721['x']+_0x484909*_0x29caf0*0.1,'y':_0x4d5721['y']-_0x5b1e49*1.4},_0xd83c={'x':_0x463156['x']+_0x484909*_0x29caf0*0.3,'y':_0x4d5721['y']-_0x5b1e49*1.5},_0x166d6a={'p0':_0x4d5721,'p1':_0x31c9e3,'p2':_0xd83c,'p3':_0x463156};_0x6349cc[_0x31467e(0x26b)](_0x166d6a);const _0x270247=_0x463156,_0x4ca273=_0xb4ab76*0.45,_0x3ec867=_0x26ed1f*0.22,_0x333441=_0xb4ab76*0.28,_0x8bd274=0.5,_0x43ddad=0.6,_0x16d99b=_0xb4ab76*0.85,_0x522311=Math[_0x31467e(0x268)](Math[_0x31467e(0x16b)]()*0x3);let _0x3a700b=[];if(_0x522311===0x0){const _0x49314c=_0x4ca273+Math['random']()*_0xb4ab76*0.1,_0x147bd0=_0x3ec867+Math[_0x31467e(0x16b)]()*_0x26ed1f*0.08,_0x1708a4=_0x333441+Math['random']()*_0xb4ab76*0.08,_0x1262f2=_0x270247['x']+_0x484909*_0x147bd0*0.5,_0x5e8ec7=Math[_0x31467e(0x287)](_0x16d99b,_0x270247['y']+_0x49314c),_0x578c45=_0x1262f2+_0x484909*_0x147bd0*0.5,_0x38be55=Math[_0x31467e(0x253)](_0x270247['y']+0x14,_0x5e8ec7-_0x1708a4),_0x185201=_0x578c45-_0x484909*_0x147bd0*0.9,_0x31d5c3=Math[_0x31467e(0x253)](_0x270247['y']+0x28,_0x38be55+_0x1708a4*0.6),_0x2b909d=_0x185201-_0x484909*_0x147bd0*0.3,_0x4edcd9=_0xb4ab76+_0x38d99e*0x2,_0x427f4e=Math[_0x31467e(0x253)](_0x5c9dfd,Math[_0x31467e(0x287)](_0x26ed1f-_0x5c9dfd-_0x321ae2,_0x1262f2)),_0x2e0038=Math['max'](_0x5c9dfd,Math[_0x31467e(0x287)](_0x26ed1f-_0x5c9dfd-_0x321ae2,_0x578c45)),_0x5241b4=Math['max'](_0x5c9dfd,Math[_0x31467e(0x287)](_0x26ed1f-_0x5c9dfd-_0x321ae2,_0x185201)),_0x92fc3c={'x':_0x270247['x'],'y':_0x270247['y']+_0x49314c*_0x43ddad*0.5},_0x48e50a={'x':_0x427f4e-_0x484909*_0x147bd0*_0x8bd274,'y':_0x5e8ec7},_0x211891={'x':_0x427f4e,'y':_0x5e8ec7},_0x44a514={'x':_0x427f4e+_0x484909*_0x147bd0*_0x8bd274,'y':_0x5e8ec7},_0x19be0c={'x':_0x2e0038,'y':_0x38be55+_0x1708a4*_0x43ddad},_0x4ac3f7={'x':_0x2e0038,'y':_0x38be55},_0x2168bd={'x':_0x2e0038,'y':_0x38be55-_0x1708a4*_0x43ddad*0.5},_0x31179a={'x':_0x5241b4+_0x484909*_0x147bd0*_0x8bd274,'y':_0x31d5c3},_0x4950={'x':_0x5241b4,'y':_0x31d5c3},_0x1c94b0={'x':_0x4950['x'],'y':_0x4950['y']+_0xb4ab76*0.1},_0x3833c6={'x':_0x2b909d,'y':_0x4edcd9-_0xb4ab76*0.2},_0x4d4e7d={'x':_0x2b909d,'y':_0x4edcd9};_0x3a700b=[{'p0':_0x270247,'p1':_0x92fc3c,'p2':_0x48e50a,'p3':_0x211891},{'p0':_0x211891,'p1':_0x44a514,'p2':_0x19be0c,'p3':_0x4ac3f7},{'p0':_0x4ac3f7,'p1':_0x2168bd,'p2':_0x31179a,'p3':_0x4950},{'p0':_0x4950,'p1':_0x1c94b0,'p2':_0x3833c6,'p3':_0x4d4e7d}];}else{if(_0x522311===0x1){const _0x3b0165=_0x4ca273*0.8+Math[_0x31467e(0x16b)]()*_0xb4ab76*0.1,_0x4048c3=_0x3ec867*1.2+Math[_0x31467e(0x16b)]()*_0x26ed1f*0.1,_0x102d24=_0x333441*0.7+Math[_0x31467e(0x16b)]()*_0xb4ab76*0.1,_0x179d9d=_0x270247['x']+_0x484909*_0x4048c3*0.4,_0x57498f=Math[_0x31467e(0x287)](_0x16d99b-_0x102d24*0.5,_0x270247['y']+_0x3b0165*0.6),_0x4a8c22=_0x179d9d+_0x484909*_0x4048c3*0.6,_0x54acc5=Math['min'](_0x16d99b,_0x57498f+_0x102d24),_0x5bbfdb=_0x4a8c22-_0x484909*_0x4048c3*0.5,_0x430ace=_0xb4ab76+_0x38d99e*0x2,_0x35dcdc=Math[_0x31467e(0x253)](_0x5c9dfd,Math[_0x31467e(0x287)](_0x26ed1f-_0x5c9dfd-_0x321ae2,_0x179d9d)),_0x3d8356=Math[_0x31467e(0x253)](_0x5c9dfd,Math[_0x31467e(0x287)](_0x26ed1f-_0x5c9dfd-_0x321ae2,_0x4a8c22)),_0x5924cf={'x':_0x270247['x']-_0x484909*_0x4048c3*0.1,'y':_0x270247['y']+_0x3b0165*0.3},_0x1e70b7={'x':_0x35dcdc-_0x484909*_0x4048c3*_0x8bd274*0.8,'y':_0x57498f+_0x102d24*_0x43ddad*0.4},_0x84df6f={'x':_0x35dcdc,'y':_0x57498f},_0x3e5ae5={'x':_0x35dcdc+_0x484909*_0x4048c3*_0x8bd274*0.8,'y':_0x57498f-_0x102d24*_0x43ddad*0.4},_0x3626cb={'x':_0x3d8356+_0x484909*_0x4048c3*_0x8bd274*0.6,'y':_0x54acc5+_0x102d24*_0x43ddad*0.5},_0x155a7e={'x':_0x3d8356,'y':_0x54acc5},_0x2bebc1={'x':_0x3d8356-_0x484909*_0x4048c3*0.2,'y':_0x54acc5+_0xb4ab76*0.1},_0x138063={'x':_0x5bbfdb,'y':_0x430ace-_0xb4ab76*0.3},_0x15e33d={'x':_0x5bbfdb,'y':_0x430ace};_0x3a700b=[{'p0':_0x270247,'p1':_0x5924cf,'p2':_0x1e70b7,'p3':_0x84df6f},{'p0':_0x84df6f,'p1':_0x3e5ae5,'p2':_0x3626cb,'p3':_0x155a7e},{'p0':_0x155a7e,'p1':_0x2bebc1,'p2':_0x138063,'p3':_0x15e33d}];}else{const _0x45c0f2=_0x4ca273*0.6+Math[_0x31467e(0x16b)]()*_0xb4ab76*0.05,_0x4a1aad=_0x3ec867*0.7+Math[_0x31467e(0x16b)]()*_0x26ed1f*0.05,_0x3940ac=_0x333441*0.6+Math[_0x31467e(0x16b)]()*_0xb4ab76*0.05,_0x2b4f3a=_0x3940ac*1.5,_0x4bdaae=_0x270247['x']+_0x484909*_0x4a1aad*0.5,_0x3a816a=Math[_0x31467e(0x287)](_0x16d99b-_0x2b4f3a,_0x270247['y']+_0x45c0f2),_0x323a3d=_0x4bdaae+_0x484909*_0x4a1aad*0.5,_0x238941=_0x3a816a+_0x3940ac,_0x3e779a=_0x323a3d-_0x484909*_0x4a1aad*0.8,_0x4549ee=Math[_0x31467e(0x287)](_0x16d99b,_0x238941+_0x2b4f3a*0.7),_0x1f41f2=_0x3e779a+_0x484909*_0x4a1aad*0.4,_0x58228d=_0x4549ee+_0x3940ac*0.8,_0x3caec8=_0x1f41f2,_0x50446f=_0xb4ab76+_0x38d99e*0x2,_0x5f0a1c=Math[_0x31467e(0x253)](_0x5c9dfd,Math[_0x31467e(0x287)](_0x26ed1f-_0x5c9dfd-_0x321ae2,_0x4bdaae)),_0x4b9ed9=Math[_0x31467e(0x253)](_0x5c9dfd,Math[_0x31467e(0x287)](_0x26ed1f-_0x5c9dfd-_0x321ae2,_0x323a3d)),_0x2cb784=Math[_0x31467e(0x253)](_0x5c9dfd,Math['min'](_0x26ed1f-_0x5c9dfd-_0x321ae2,_0x3e779a)),_0x51cf6b=Math[_0x31467e(0x253)](_0x5c9dfd,Math[_0x31467e(0x287)](_0x26ed1f-_0x5c9dfd-_0x321ae2,_0x1f41f2)),_0xb65658={'x':_0x270247['x'],'y':_0x270247['y']+_0x45c0f2*0.5},_0xfd26df={'x':_0x5f0a1c-_0x484909*_0x4a1aad*_0x8bd274,'y':_0x3a816a+_0x3940ac*_0x43ddad*0.3},_0x24b5f9={'x':_0x5f0a1c,'y':_0x3a816a},_0x47cd83={'x':_0x5f0a1c+_0x484909*_0x4a1aad*_0x8bd274,'y':_0x3a816a-_0x3940ac*_0x43ddad*0.3},_0x18c15a={'x':_0x4b9ed9+_0x484909*_0x4a1aad*_0x8bd274,'y':_0x238941+_0x3940ac*_0x43ddad*0.5},_0x59c37a={'x':_0x4b9ed9,'y':_0x238941},_0x78134d={'x':_0x4b9ed9-_0x484909*_0x4a1aad*_0x8bd274,'y':_0x238941-_0x3940ac*_0x43ddad*0.5},_0x38ac2c={'x':_0x2cb784-_0x484909*_0x4a1aad*_0x8bd274,'y':_0x4549ee+_0x3940ac*_0x43ddad*0.4},_0x2679a9={'x':_0x2cb784,'y':_0x4549ee},_0x40c049={'x':_0x2cb784+_0x484909*_0x4a1aad*_0x8bd274,'y':_0x4549ee-_0x3940ac*_0x43ddad*0.4},_0x4eb3fb={'x':_0x51cf6b+_0x484909*_0x4a1aad*_0x8bd274,'y':_0x58228d+_0x3940ac*_0x43ddad*0.6},_0x322b31={'x':_0x51cf6b,'y':_0x58228d},_0x2d483e={'x':_0x51cf6b-_0x484909*_0x4a1aad*0.1,'y':_0x58228d+_0xb4ab76*0.05},_0x21af8e={'x':_0x3caec8,'y':_0x50446f-_0xb4ab76*0.2},_0x32bf83={'x':_0x3caec8,'y':_0x50446f};_0x3a700b=[{'p0':_0x270247,'p1':_0xb65658,'p2':_0xfd26df,'p3':_0x24b5f9},{'p0':_0x24b5f9,'p1':_0x47cd83,'p2':_0x18c15a,'p3':_0x59c37a},{'p0':_0x59c37a,'p1':_0x78134d,'p2':_0x38ac2c,'p3':_0x2679a9},{'p0':_0x2679a9,'p1':_0x40c049,'p2':_0x4eb3fb,'p3':_0x322b31},{'p0':_0x322b31,'p1':_0x2d483e,'p2':_0x21af8e,'p3':_0x32bf83}];}}return _0x6349cc[_0x31467e(0x26b)](..._0x3a700b),_0x6349cc;}catch(_0x547a73){return console['error'](_0x31467e(0x1bf)+_0x56f6ef?.['id']+':',_0x547a73),[];}}window[_0x502888(0x264)]=generateAttackPathInternal;function resetAllMessagesInternal(){showReadyMessage=![],isShowingIntro=![],showCsHitsMessage=![],showPerfectMessage=![],showCsBonusScoreMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],isShowingCaptureMessage=![],isShowingPlayerGameOverMessage=![],isShowingCoopPlayersReady=![],csHitsMessageStartTime=0x0,perfectMessageStartTime=0x0,csBonusScoreMessageStartTime=0x0,csClearMessageStartTime=0x0,extraLifeMessageStartTime=0x0,readyMessageStartTime=0x0,captureMessageStartTime=0x0,playerGameOverMessageStartTime=0x0,csCompletionDelayStartTime=0x0,introDisplayStartTime=0x0,coopPlayersReadyStartTime=0x0;}window[_0x502888(0x1cb)]=resetAllMessagesInternal;function stopAllGameSoundsInternal(){const _0x33503f=_0x502888;if(typeof soundPaths==='object'&&soundPaths!==null&&typeof stopSound===_0x33503f(0x250))for(const _0x187c66 in soundPaths){stopSound(_0x187c66);}isGridSoundPlaying=![];}window[_0x502888(0x16a)]=stopAllGameSoundsInternal;function resetGameInternal(){const _0x1ff031=_0x502888;score=0x0,level=0x1,playerLives=0x3,window[_0x1ff031(0x293)]=null;if(isTwoPlayerMode){player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,currentPlayer=0x1,player1CompletedLevel=-0x1,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet['clear']();else player1LifeThresholdsMet=new Set();if(player2LifeThresholdsMet instanceof Set)player2LifeThresholdsMet[_0x1ff031(0x269)]();else player2LifeThresholdsMet=new Set();player1IsDualShipActive=![],player2IsDualShipActive=![],isPlayer1ShipCaptured=![],isPlayer2ShipCaptured=![],isPlayer1WaitingForRespawn=![],isPlayer2WaitingForRespawn=![],isPlayer1Invincible=![],isPlayer2Invincible=![],player1RespawnTime=0x0,player2RespawnTime=0x0,player1InvincibilityEndTime=0x0,player2InvincibilityEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![];if(selectedGameMode===_0x1ff031(0x279)){playerLives=0x0;if(gameCanvas&&gameCanvas[_0x1ff031(0x294)]>0x0&&gameCanvas[_0x1ff031(0x245)]>0x0){const _0x291e05=gameCanvas[_0x1ff031(0x294)]/0x2-gameCanvas[_0x1ff031(0x294)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x237c83=gameCanvas['width']/0x2+gameCanvas[_0x1ff031(0x294)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x304fc5=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;ship1={'x':_0x291e05,'y':_0x304fc5,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x291e05,'id':'p1'},ship2={'x':_0x237c83,'y':_0x304fc5,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x237c83,'id':'p2'},(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&(smoothedShip1X=_0x291e05,smoothedShip2X=_0x237c83,aiShip1TargetEnemy=null,aiShip2TargetEnemy=null,aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0,aiShip1LastShotTime=0x0,aiShip2LastShotTime=0x0,aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);}ship=null;}else{if(!ship&&gameCanvas&&gameCanvas[_0x1ff031(0x294)]>0x0&&gameCanvas[_0x1ff031(0x245)]>0x0)ship={'x':Math[_0x1ff031(0x200)](gameCanvas[_0x1ff031(0x294)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x1ff031(0x245)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x1ff031(0x276)},ship[_0x1ff031(0x290)]=ship['x'];else ship&&gameCanvas&&gameCanvas[_0x1ff031(0x294)]>0x0&&gameCanvas['height']>0x0&&(ship['x']=Math[_0x1ff031(0x200)](gameCanvas[_0x1ff031(0x294)]/0x2-SHIP_WIDTH/0x2),ship[_0x1ff031(0x290)]=ship['x'],ship['y']=gameCanvas[_0x1ff031(0x245)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}}else{player1Lives=0x3,player1Score=0x0,player1MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x1ff031(0x269)]();else player1LifeThresholdsMet=new Set();if(!ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x1ff031(0x245)]>0x0)ship={'x':Math[_0x1ff031(0x200)](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x1ff031(0x245)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x1ff031(0x276)},ship[_0x1ff031(0x290)]=ship['x'];else ship&&gameCanvas&&gameCanvas[_0x1ff031(0x294)]>0x0&&gameCanvas[_0x1ff031(0x245)]>0x0&&(ship['x']=Math[_0x1ff031(0x200)](gameCanvas[_0x1ff031(0x294)]/0x2-SHIP_WIDTH/0x2),ship[_0x1ff031(0x290)]=ship['x'],ship['y']=gameCanvas[_0x1ff031(0x245)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isDualShipActive=![];if(!isTwoPlayerMode)player1IsDualShipActive=![];fallingShips=[],visualOffsetX=-0x14,gameOverSequenceStartTime=0x0,isShowingResultsScreen=![],gameStartTime=Date[_0x1ff031(0x1f5)](),gameJustStarted=!![],gameJustStartedAndWaveLaunched=![],currentGridOffsetX=0x0,gridMoveDirection=0x1,gridJustCompleted=![],isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,lastGridFireCheckTime=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,scoreEarnedThisCS=0x0,challengingStageEnemiesHit=0x0,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined,aiCanShootTime=0x0,aiLastShotTime=0x0,!(selectedGameMode===_0x1ff031(0x279)&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'))&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0),playerLastShotTime=0x0,player1LastShotTime=0x0,player2LastShotTime=0x0,p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isShowingCoopPlayersReady=![],coopPlayersReadyStartTime=0x0,resetWaveInternal();}window['resetGame']=resetGameInternal;function resetWaveInternal(){const _0x2203fe=_0x502888;isWaveTransitioning=![],readyForNextWave=![],readyForNextWaveReset=![],isEntrancePhaseActive=!![],firstEnemyLanded=![],captureAttemptMadeThisLevel=![],gameJustStartedAndWaveLaunched=![],aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![],enemies=[],bullets=[],enemyBullets=[],explosions=[],floatingScores=[],hitSparks=[];Array['isArray'](enemySpawnTimeouts)&&enemySpawnTimeouts['forEach'](clearTimeout);enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;const _0x15de5d=getWaveTypeInternal(level);isChallengingStage=_0x15de5d===_0x2203fe(0x177),isFullGridWave=_0x15de5d==='full_grid',challengingStageEnemiesHit=0x0,scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null;(isFullGridWave||isChallengingStage)&&(isEntrancePhaseActive=![]);const _0x3b307f=isShowingDemoText;resetAllMessagesInternal();_0x3b307f&&(isShowingDemoText=!![]);if(selectedGameMode==='coop'&&level===0x1)isShowingIntro=![],introStep=0x2;else{if(isTwoPlayerMode&&selectedGameMode===_0x2203fe(0x29a)||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2203fe(0x27c)){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(isChallengingStage){introStep=0x3,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(level===0x1&&!isTwoPlayerMode){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{introStep=0x2,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}}}}isShowingIntro&&!(selectedGameMode===_0x2203fe(0x279)&&level===0x1)&&(introDisplayStartTime=Date['now']());playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],currentWaveDefinition=generateWaveDefinitionInternal(level);if(selectedGameMode===_0x2203fe(0x279)){if(gameCanvas&&gameCanvas[_0x2203fe(0x294)]>0x0&&gameCanvas['height']>0x0){const _0xe6a797=ship1&&player1Lives>0x0,_0x5d0613=ship2&&player2Lives>0x0,_0x10271c=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2203fe(0x1ab)){if(_0xe6a797&&_0x5d0613){const _0x1b11d7=gameCanvas[_0x2203fe(0x294)]/0x2-gameCanvas[_0x2203fe(0x294)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1&&(ship1[_0x2203fe(0x290)]=_0x1b11d7,ship1['x']=_0x1b11d7,smoothedShip1X=_0x1b11d7,ship1['y']=_0x10271c);const _0x1f9e39=gameCanvas[_0x2203fe(0x294)]/0x2+gameCanvas[_0x2203fe(0x294)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2[_0x2203fe(0x290)]=_0x1f9e39,ship2['x']=_0x1f9e39,smoothedShip2X=_0x1f9e39,ship2['y']=_0x10271c);}else{if(_0xe6a797&&ship1){const _0x4f9e20=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x55da06=Math[_0x2203fe(0x200)](gameCanvas[_0x2203fe(0x294)]/0x2-_0x4f9e20/0x2);ship1['targetX']=_0x55da06,ship1['x']=_0x55da06,smoothedShip1X=_0x55da06,ship1['y']=_0x10271c;}else{if(_0x5d0613&&ship2){const _0x55185a=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x2e4297=Math[_0x2203fe(0x200)](gameCanvas['width']/0x2-_0x55185a/0x2);ship2[_0x2203fe(0x290)]=_0x2e4297,ship2['x']=_0x2e4297,smoothedShip2X=_0x2e4297,ship2['y']=_0x10271c;}}}}else{if(_0xe6a797&&ship1)ship1['y']=_0x10271c;if(_0x5d0613&&ship2)ship2['y']=_0x10271c;}}}else{if(ship&&gameCanvas&&gameCanvas[_0x2203fe(0x294)]>0x0&&gameCanvas['height']>0x0&&(forceCenterShipNextReset||!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x2203fe(0x29a)&&currentPlayer===0x2)){let _0x23fe6c=ship[_0x2203fe(0x294)];if(isDualShipActive)_0x23fe6c=DUAL_SHIP_OFFSET_X+SHIP_WIDTH;ship['x']=Math[_0x2203fe(0x200)](gameCanvas[_0x2203fe(0x294)]/0x2-_0x23fe6c/0x2),ship[_0x2203fe(0x290)]=ship['x'],ship['y']=gameCanvas[_0x2203fe(0x245)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isPlayerTwoAI&&selectedGameMode===_0x2203fe(0x29a)&&currentPlayer===0x2)smoothedShipX=ship['x'];}else ship&&gameCanvas&&gameCanvas['width']>0x0&&(ship['y']=gameCanvas[_0x2203fe(0x245)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);}forceCenterShipNextReset=![];if(!isManualControl&&aiNeedsStabilization&&selectedGameMode!==_0x2203fe(0x279)&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x2203fe(0x29a)&&currentPlayer===0x2)){aiStabilizationEndTime=Date[_0x2203fe(0x1f5)]()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}else{if(isPlayerTwoAI&&selectedGameMode===_0x2203fe(0x29a)&&currentPlayer===0x2&&aiNeedsStabilization){aiStabilizationEndTime=Date[_0x2203fe(0x1f5)]()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}}}window[_0x502888(0x2aa)]=resetWaveInternal;function getWaveTypeInternal(_0x2568e6){const _0x2f430f=_0x502888,_0x21159e=(_0x2568e6-0x1)%0x4;switch(_0x21159e){case 0x0:return _0x2f430f(0x23e);case 0x1:return _0x2f430f(0x25d);case 0x2:return _0x2f430f(0x177);case 0x3:return _0x2f430f(0x270);default:return'unknown';}}window['getWaveType']=getWaveTypeInternal;function generateWaveDefinitionInternal(_0x1c6fb2){const _0x29a585=_0x502888;let _0x437f01=[];currentWavePatternIndex=-0x1;const _0x48d14d=getWaveTypeInternal(_0x1c6fb2);if(typeof waveEntrancePatterns==='undefined'||!Array['isArray'](waveEntrancePatterns)||waveEntrancePatterns[_0x29a585(0x254)]<0x2)return console[_0x29a585(0x25a)](_0x29a585(0x238)),[];if(_0x48d14d===_0x29a585(0x177))_0x437f01=[];else{if(_0x48d14d==='full_grid'){currentWavePatternIndex=0x0;const _0x3b6d9e=waveEntrancePatterns[0x0];if(!_0x3b6d9e||_0x3b6d9e[_0x29a585(0x254)]===0x0)console['error'](_0x29a585(0x1c3)),_0x437f01=[];else try{_0x437f01=JSON[_0x29a585(0x2b0)](JSON['stringify'](_0x3b6d9e),(_0x48dafb,_0x59b3fd)=>{const _0x2bc483=_0x29a585;return _0x59b3fd&&typeof _0x59b3fd===_0x2bc483(0x17e)&&_0x59b3fd[_0x2bc483(0x207)]===ENEMY3_TYPE&&typeof _0x59b3fd[_0x2bc483(0x1a0)]===_0x2bc483(0x193)&&(_0x59b3fd[_0x2bc483(0x1a0)]=![]),_0x59b3fd;});}catch(_0x3fc0a6){console[_0x29a585(0x25a)](_0x29a585(0x210),_0x3fc0a6),_0x437f01=[];}}else{if(_0x48d14d===_0x29a585(0x25d)){currentWavePatternIndex=0x0;const _0x3e57de=waveEntrancePatterns[0x0];if(!_0x3e57de||_0x3e57de[_0x29a585(0x254)]===0x0)console['error'](_0x29a585(0x2ad)),_0x437f01=[];else try{_0x437f01=JSON[_0x29a585(0x2b0)](JSON[_0x29a585(0x2a5)](_0x3e57de),(_0x24d2e7,_0xf758fb)=>{const _0x108cfe=_0x29a585;return _0xf758fb&&typeof _0xf758fb===_0x108cfe(0x17e)&&_0xf758fb['type']===ENEMY3_TYPE&&typeof _0xf758fb[_0x108cfe(0x1a0)]==='undefined'&&(_0xf758fb[_0x108cfe(0x1a0)]=![]),_0xf758fb;});}catch(_0x3382a9){console['error'](_0x29a585(0x1b6),_0x3382a9),_0x437f01=[];}}else{if(_0x48d14d==='entrance_flight_2'){currentWavePatternIndex=0x1;const _0x57abdf=waveEntrancePatterns[0x1];if(!_0x57abdf||_0x57abdf['length']===0x0)console['error'](_0x29a585(0x1c7)),_0x437f01=[];else try{_0x437f01=JSON[_0x29a585(0x2b0)](JSON['stringify'](_0x57abdf),(_0x3dd7fa,_0x460952)=>{const _0x3f3a94=_0x29a585;return _0x460952&&typeof _0x460952===_0x3f3a94(0x17e)&&_0x460952['type']===ENEMY3_TYPE&&typeof _0x460952['hasCapturedShip']==='undefined'&&(_0x460952['hasCapturedShip']=![]),_0x460952;});}catch(_0x2ca6f9){console['error'](_0x29a585(0x281),_0x2ca6f9),_0x437f01=[];}}else console[_0x29a585(0x29d)]('Unknown\x20wave\x20type\x20for\x20level\x20'+_0x1c6fb2+':\x20'+_0x48d14d),_0x437f01=[];}}}if(_0x48d14d!==_0x29a585(0x177)){if(typeof normalWaveEntrancePaths==='undefined'||Object[_0x29a585(0x23c)](normalWaveEntrancePaths)[_0x29a585(0x254)]===0x0)return console[_0x29a585(0x25a)]('CRITICAL:\x20normalWaveEntrancePaths\x20not\x20defined\x20or\x20empty.\x20Cannot\x20assign\x20paths\x20to\x20squadrons.'),_0x437f01;for(let _0x482d5a=_0x437f01[_0x29a585(0x254)]-0x1;_0x482d5a>=0x0;_0x482d5a--){const _0x5aafa9=_0x437f01[_0x482d5a];if(!normalWaveEntrancePaths?.[_0x5aafa9[_0x29a585(0x2b2)]]){_0x437f01[_0x29a585(0x1fc)](_0x482d5a,0x1);continue;}if(_0x5aafa9[_0x29a585(0x1ca)]&&Array[_0x29a585(0x2bc)](_0x5aafa9[_0x29a585(0x1ca)])){for(let _0x7cbc7=_0x5aafa9[_0x29a585(0x1ca)][_0x29a585(0x254)]-0x1;_0x7cbc7>=0x0;_0x7cbc7--){const _0x1a73f8=_0x5aafa9[_0x29a585(0x1ca)][_0x7cbc7];(!_0x1a73f8||!normalWaveEntrancePaths?.[_0x1a73f8[_0x29a585(0x228)]])&&_0x5aafa9[_0x29a585(0x1ca)][_0x29a585(0x1fc)](_0x7cbc7,0x1),_0x1a73f8&&_0x1a73f8[_0x29a585(0x207)]===ENEMY3_TYPE&&typeof _0x1a73f8[_0x29a585(0x1a0)]===_0x29a585(0x193)&&(_0x1a73f8[_0x29a585(0x1a0)]=![]);}_0x5aafa9[_0x29a585(0x1ca)]['length']===0x0&&_0x437f01[_0x29a585(0x1fc)](_0x482d5a,0x1);}else _0x437f01[_0x29a585(0x1fc)](_0x482d5a,0x1);}}return _0x437f01;}window[_0x502888(0x240)]=generateWaveDefinitionInternal;const createBulletSimple=(_0x535353,_0x566a08=null)=>{const _0x1f6c95=_0x502888;let _0x22d138=null,_0x1afa71=![];if(isTwoPlayerMode&&selectedGameMode==='coop'){const _0x2e937b=ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured,_0x312fa0=ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured;if(_0x2e937b&&_0x312fa0)_0x22d138=Math[_0x1f6c95(0x16b)]()<0.5?ship1:ship2,_0x1afa71=!![];else{if(_0x2e937b)_0x22d138=ship1,_0x1afa71=!![];else _0x312fa0&&(_0x22d138=ship2,_0x1afa71=!![]);}}else ship&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn&&(_0x22d138=ship,_0x1afa71=!![]);if(!_0x535353||!isInGameState||!_0x1afa71||!_0x22d138)return![];const _0x3e9751=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0xf9e35d=_0x566a08?_0x566a08['x']:_0x535353['x']+_0x535353[_0x1f6c95(0x294)]/0x2,_0xf75bff=_0x566a08?_0x566a08['y']:_0x535353['y']+_0x535353[_0x1f6c95(0x245)]/0x2;let _0x253cce=0x0,_0x5d1730=_0x3e9751;const _0x1f0c6d=_0x22d138['x']+_0x22d138[_0x1f6c95(0x294)]/0x2-_0xf9e35d,_0x745aeb=_0x22d138['y']+_0x22d138['height']/0x2-_0xf75bff,_0x136aeb=Math['sqrt'](_0x1f0c6d*_0x1f0c6d+_0x745aeb*_0x745aeb);if(_0x136aeb>0x0){let _0x98d40c=0x0;!isChallengingStage&&(_0x98d40c=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x219555=Math[_0x1f6c95(0x1ba)](_0x745aeb,_0x1f0c6d);_0x253cce=Math[_0x1f6c95(0x18e)](_0x219555)*_0x3e9751*_0x98d40c,_0x5d1730=Math[_0x1f6c95(0x20d)](_0x3e9751**0x2-_0x253cce**0x2),_0x5d1730=Math[_0x1f6c95(0x253)](_0x3e9751*(0x1-_0x98d40c)*0.5,_0x5d1730);if(_0x745aeb<0x0&&_0x5d1730>0x0){}if(_0x745aeb<0x0)_0x5d1730=Math['abs'](_0x5d1730);return enemyBullets['push']({'x':_0xf9e35d-ENEMY_BULLET_WIDTH/0x2,'y':_0xf75bff,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x253cce,'vy':_0x5d1730,'type':_0x535353[_0x1f6c95(0x207)]}),!![];}return![];};function scheduleSingleEntranceSquadron(_0x265a25,_0x3be8ff,_0x5d59d4){const _0x383ad2=_0x502888;if(isFullGridWave||isChallengingStage)return console[_0x383ad2(0x29d)](_0x383ad2(0x2b9)+level+_0x383ad2(0x1a5)+isFullGridWave+_0x383ad2(0x1cf)+isChallengingStage+_0x383ad2(0x1a6)),_0x265a25?.['enemies']?.[_0x383ad2(0x254)]>0x0&&(enemiesSpawnedThisWave+=_0x265a25['enemies']['length'],squadronCompletionStatus[_0x3be8ff]&&(squadronCompletionStatus[_0x3be8ff][_0x383ad2(0x188)]=squadronCompletionStatus[_0x3be8ff][_0x383ad2(0x298)])),![];const _0x5115df=normalWaveEntrancePaths,_0x2a48bd=_0x265a25['pathId'],_0x9f3ec9=_0x5115df[_0x2a48bd];if(!_0x9f3ec9||_0x9f3ec9[_0x383ad2(0x254)]===0x0)return console['error'](_0x383ad2(0x1fd)+_0x2a48bd+'\x20for\x20squadron\x20'+_0x3be8ff+_0x383ad2(0x23d)),_0x265a25?.[_0x383ad2(0x1ca)]?.[_0x383ad2(0x254)]>0x0&&(enemiesSpawnedThisWave+=_0x265a25[_0x383ad2(0x1ca)]['length'],squadronCompletionStatus[_0x3be8ff]&&(squadronCompletionStatus[_0x3be8ff][_0x383ad2(0x188)]=squadronCompletionStatus[_0x3be8ff][_0x383ad2(0x298)])),![];const _0x22579a=setTimeout(()=>{const _0x2f5d88=_0x383ad2,_0x560f9c=enemySpawnTimeouts[_0x2f5d88(0x182)](_0x22579a);if(_0x560f9c>-0x1)enemySpawnTimeouts[_0x2f5d88(0x1fc)](_0x560f9c,0x1);let _0xf5cb7d=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0xf5cb7d=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0xf5cb7d=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0xf5cb7d||isFullGridWave){_0x265a25?.[_0x2f5d88(0x1ca)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x265a25['enemies']['length'],squadronCompletionStatus[_0x3be8ff]&&(squadronCompletionStatus[_0x3be8ff][_0x2f5d88(0x188)]=squadronCompletionStatus[_0x3be8ff][_0x2f5d88(0x298)]));return;}try{squadronEntranceFiringStatus[_0x3be8ff]?(squadronEntranceFiringStatus[_0x3be8ff][_0x2f5d88(0x1a8)]=Date[_0x2f5d88(0x1f5)]()+_0x5d59d4,squadronEntranceFiringStatus[_0x3be8ff][_0x2f5d88(0x1d8)]=![]):(console[_0x2f5d88(0x29d)]('[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20'+_0x3be8ff+_0x2f5d88(0x1fa)),squadronEntranceFiringStatus[_0x3be8ff]={'hasFired':![],'scheduledStartTime':Date[_0x2f5d88(0x1f5)]()+_0x5d59d4});const _0x556703=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x4ee0ce=_0x556703*0x2,_0x2366b7=0x1;_0x265a25[_0x2f5d88(0x1ca)][_0x2f5d88(0x18b)]((_0x1e9869,_0x13f3ff)=>{const _0x538a9a=_0x2f5d88;if(!_0x1e9869||!_0x1e9869[_0x538a9a(0x207)]||typeof _0x1e9869[_0x538a9a(0x289)]==='undefined'||typeof _0x1e9869[_0x538a9a(0x27f)]==='undefined'||!_0x1e9869[_0x538a9a(0x228)]){console[_0x538a9a(0x25a)](_0x538a9a(0x244)+_0x3be8ff+'\x20(Path\x20'+_0x2a48bd+_0x538a9a(0x19f)+_0x13f3ff+_0x538a9a(0x2a8)),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x3be8ff]&&squadronCompletionStatus[_0x3be8ff][_0x538a9a(0x188)]++;return;}const _0x453454=_0x5115df[_0x1e9869[_0x538a9a(0x228)]];(!_0x453454||_0x453454['length']===0x0)&&console['warn'](_0x538a9a(0x174)+_0x1e9869[_0x538a9a(0x228)]+_0x538a9a(0x171)+_0x3be8ff+_0x538a9a(0x1ad)+_0x13f3ff+_0x538a9a(0x230)+_0x2a48bd+'\x22.');let _0x375abe=0x0;const _0x199072=getWaveType(level),_0xb53858=_0x199072===_0x538a9a(0x270)&&(_0x3be8ff===0x2||_0x3be8ff===0x3);if(_0xb53858){const _0x97febe=Math[_0x538a9a(0x268)](_0x13f3ff/0x2);_0x13f3ff%0x2===0x0?_0x375abe=_0x97febe*_0x4ee0ce:_0x375abe=_0x97febe*_0x4ee0ce+_0x2366b7;}else _0x375abe=_0x13f3ff*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x5ac6db=setTimeout(()=>{const _0x78ccb2=_0x538a9a,_0x548f9f=enemySpawnTimeouts[_0x78ccb2(0x182)](_0x5ac6db);if(_0x548f9f>-0x1)enemySpawnTimeouts[_0x78ccb2(0x1fc)](_0x548f9f,0x1);let _0xc8f651=![];isTwoPlayerMode&&selectedGameMode===_0x78ccb2(0x279)?_0xc8f651=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0xc8f651=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0xc8f651||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x3be8ff]&&squadronCompletionStatus[_0x3be8ff]['completed']++;return;}try{let _0x41dc3c=_0x1e9869[_0x78ccb2(0x207)],_0x290e94=_0x41dc3c===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x3669aa,_0x595d83;if(_0x41dc3c===ENEMY1_TYPE)_0x3669aa=ENEMY1_WIDTH,_0x595d83=ENEMY1_HEIGHT;else _0x41dc3c===ENEMY3_TYPE?(_0x3669aa=BOSS_WIDTH,_0x595d83=BOSS_HEIGHT):(_0x3669aa=ENEMY_WIDTH,_0x595d83=ENEMY_HEIGHT);let _0x4e6799=0x0,_0x42eb42=0x0;if(_0x9f3ec9&&_0x9f3ec9[0x0]?.['p0'])_0x4e6799=_0x9f3ec9[0x0]['p0']['x'],_0x42eb42=_0x9f3ec9[0x0]['p0']['y'];else throw new Error('Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20'+_0x2a48bd);let _0x3efcec,_0x5a6847;try{const {x:_0x2fb947,y:_0x591af8}=getCurrentGridSlotPosition(_0x1e9869['gridRow'],_0x1e9869['gridCol'],_0x3669aa);_0x3efcec=_0x2fb947,_0x5a6847=_0x591af8;}catch(_0x2d1723){console[_0x78ccb2(0x25a)]('Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20'+_0x1e9869[_0x78ccb2(0x207)]+_0x78ccb2(0x272)+_0x1e9869[_0x78ccb2(0x289)]+','+_0x1e9869[_0x78ccb2(0x27f)]+']',_0x2d1723),_0x3efcec=gameCanvas?.['width']/0x2||0xc8,_0x5a6847=ENEMY_TOP_MARGIN+_0x1e9869[_0x78ccb2(0x289)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x18d3bb=0x0;const _0x23161d=_0xb53858,_0x3e9885=_0x23161d&&_0x13f3ff%0x2!==0x0;_0x3e9885?_0x18d3bb=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x18d3bb=-_0x13f3ff*PATH_T_OFFSET_PER_ENEMY;const _0x2f5ba5={'x':_0x4e6799,'y':_0x42eb42,'width':_0x3669aa,'height':_0x595d83,'targetGridX':_0x3efcec,'targetGridY':_0x5a6847,'speed':0x0,'state':_0x78ccb2(0x2af),'gridRow':_0x1e9869[_0x78ccb2(0x289)],'gridCol':_0x1e9869[_0x78ccb2(0x27f)],'type':_0x41dc3c,'health':_0x290e94,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x2a48bd,'pathSegmentIndex':0x0,'pathT':_0x18d3bb,'squadronId':_0x3be8ff,'squadronEnemyIndex':_0x13f3ff,'id':'enemy-entr-'+_0x3be8ff+'-'+_0x13f3ff+'-'+Date['now']()+'-'+Math[_0x78ccb2(0x16b)]()[_0x78ccb2(0x1bb)](0x24)[_0x78ccb2(0x21a)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x41dc3c===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x41dc3c===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1,'captureDiveInitiationTime':0x0};enemies[_0x78ccb2(0x26b)](_0x2f5ba5),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x3be8ff]&&squadronCompletionStatus[_0x3be8ff][_0x78ccb2(0x188)]++;if(_0x13f3ff===0x0){let _0x6649de=0x5dc;(_0x3be8ff===0x0||_0x3be8ff===0x1)&&(_0x6649de=0xfa);const _0x3e0ed2=_0x2f5ba5['id'],_0x473480=setTimeout(()=>{const _0x5ef07a=_0x78ccb2,_0x20aa86=enemySpawnTimeouts[_0x5ef07a(0x182)](_0x473480);if(_0x20aa86>-0x1)enemySpawnTimeouts[_0x5ef07a(0x1fc)](_0x20aa86,0x1);let _0x31cb1f=![];isTwoPlayerMode&&selectedGameMode===_0x5ef07a(0x279)?_0x31cb1f=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x31cb1f=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x31cb1f||isChallengingStage||isWaveTransitioning||isFullGridWave)return;fireFixedEnemyBurst(_0x3e0ed2,null,0x0,0x3);},_0x6649de);enemySpawnTimeouts[_0x78ccb2(0x26b)](_0x473480);}}catch(_0x3eb2d6){console[_0x78ccb2(0x25a)](_0x78ccb2(0x1ee)+_0x3be8ff+_0x78ccb2(0x1ed)+_0x13f3ff+',\x20Path\x20'+_0x2a48bd+'):',_0x3eb2d6),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x3be8ff]&&squadronCompletionStatus[_0x3be8ff]['completed']++;}},_0x375abe);enemySpawnTimeouts[_0x538a9a(0x26b)](_0x5ac6db);});}catch(_0x2ab444){console[_0x2f5d88(0x25a)](_0x2f5d88(0x19e)+_0x3be8ff+_0x2f5d88(0x1da)+_0x2a48bd+'):',_0x2ab444),_0x265a25?.[_0x2f5d88(0x1ca)]?.[_0x2f5d88(0x254)]>0x0&&(enemiesSpawnedThisWave+=_0x265a25[_0x2f5d88(0x1ca)][_0x2f5d88(0x254)],squadronCompletionStatus[_0x3be8ff]&&(squadronCompletionStatus[_0x3be8ff][_0x2f5d88(0x188)]=squadronCompletionStatus[_0x3be8ff][_0x2f5d88(0x298)]));}},_0x5d59d4);return enemySpawnTimeouts[_0x383ad2(0x26b)](_0x22579a),!![];};function scheduleEntranceFlightWave(){const _0x2988cb=_0x502888;if(isFullGridWave||isChallengingStage||!currentWaveDefinition||currentWaveDefinition[_0x2988cb(0x254)]===0x0){console['warn'](_0x2988cb(0x21c)+level+',\x20isFullGrid:\x20'+isFullGridWave+_0x2988cb(0x1cf)+isChallengingStage+_0x2988cb(0x23b)+currentWaveDefinition?.[_0x2988cb(0x254)]),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x198ade=0x0,_0x13f948=0x0;currentWaveDefinition[_0x2988cb(0x18b)]((_0x21a3d6,_0x2754bb)=>{const _0x57ac1e=_0x2988cb;_0x21a3d6&&_0x21a3d6[_0x57ac1e(0x1ca)]&&Array[_0x57ac1e(0x2bc)](_0x21a3d6[_0x57ac1e(0x1ca)])&&_0x21a3d6['enemies'][_0x57ac1e(0x254)]>0x0?(totalEnemiesScheduledForWave+=_0x21a3d6['enemies'][_0x57ac1e(0x254)],squadronCompletionStatus[_0x2754bb]={'completed':0x0,'total':_0x21a3d6[_0x57ac1e(0x1ca)][_0x57ac1e(0x254)],'hasFiredPostLanding':![]},squadronEntranceFiringStatus[_0x2754bb]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x21a3d6,_0x2754bb,_0x198ade)&&_0x13f948++,_0x198ade+=NORMAL_WAVE_SQUADRON_INTERVAL):console[_0x57ac1e(0x29d)](_0x57ac1e(0x27a)+_0x2754bb+_0x57ac1e(0x20a));}),_0x13f948===0x0&&totalEnemiesScheduledForWave===0x0?(console[_0x2988cb(0x29d)]('Entrance\x20Wave:\x20No\x20squadrons\x20or\x20enemies\x20scheduled\x20for\x20level\x20'+level+_0x2988cb(0x292)),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![]):isEntrancePhaseActive=!![];}function startChallengingStageSequence(){const _0xe4c410=_0x502888;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object[_0xe4c410(0x23c)](challengingStagePaths)[_0xe4c410(0x254)]===0x0&&defineChallengingStagePaths();if(Object['keys'](challengingStagePaths)[_0xe4c410(0x254)]===0x0){console[_0xe4c410(0x25a)](_0xe4c410(0x1f9)),isWaveTransitioning=!![],setTimeout(()=>{const _0xfaaf1c=_0xe4c410;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0xfaaf1c(0x279)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0xfaaf1c(0x250)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x1b1f69=[_0xe4c410(0x258),'CS3_DiveLoopR_Sharp',_0xe4c410(0x1f2),_0xe4c410(0x2bf)],_0x242232=[_0xe4c410(0x2a9),'CS_LoopAttack_TR',_0xe4c410(0x247),_0xe4c410(0x1e6)],_0xdeabb3=[..._0x1b1f69,..._0x242232];for(const _0x41683f of _0xdeabb3){if(!challengingStagePaths[_0xe4c410(0x28a)](_0x41683f)){console[_0xe4c410(0x25a)](_0xe4c410(0x17c)+_0x41683f+_0xe4c410(0x1dd)),isWaveTransitioning=!![],setTimeout(()=>{const _0x3b62c4=_0xe4c410;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x3b62c4(0x279)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x3b62c4(0x250)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x3bb8e5=[..._0x1b1f69],_0x548d37=[..._0x242232]['sort'](()=>Math['random']()-0.5);_0x3bb8e5[_0xe4c410(0x26b)](..._0x548d37),currentWaveDefinition=[];for(let _0x141cee=0x0;_0x141cee<CHALLENGING_STAGE_SQUADRON_COUNT;_0x141cee++){const _0xb48e1f=_0x3bb8e5[_0x141cee],_0x433bdc={'pathId':_0xb48e1f,'enemies':[]};for(let _0x2e6e5f=0x0;_0x2e6e5f<CHALLENGING_STAGE_SQUADRON_SIZE;_0x2e6e5f++){let _0x5266f8=_0x2e6e5f<Math[_0xe4c410(0x268)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x433bdc[_0xe4c410(0x1ca)][_0xe4c410(0x26b)]({'type':_0x5266f8,'entrancePathId':_0xb48e1f});}currentWaveDefinition[_0xe4c410(0x26b)](_0x433bdc);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0xe4c410(0x254)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x412bfe=0x0;const _0x334525=-0x1c,_0xa59ab6=Math[_0xe4c410(0x268)](Math[_0xe4c410(0x253)](0x0,level-0x3)/0x4)+0x1,_0x50af11=scaleValue(_0xa59ab6,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition[_0xe4c410(0x18b)]((_0xf98f24,_0x18d6c7)=>{const _0x3d9513=_0xe4c410;let _0xa569d=0x0;if(_0x18d6c7<=0x1)_0xa569d=0x0;else _0x18d6c7<=0x3?_0xa569d=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0xa569d=(_0x18d6c7-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x33e75e=_0x50af11;(_0x18d6c7===0x2||_0x18d6c7===0x3)&&(_0x33e75e*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x19b21c=setTimeout(()=>{const _0x388e20=_0x45b9,_0x518cb4=enemySpawnTimeouts[_0x388e20(0x182)](_0x19b21c);if(_0x518cb4>-0x1)enemySpawnTimeouts[_0x388e20(0x1fc)](_0x518cb4,0x1);let _0x187b32=![];isTwoPlayerMode&&selectedGameMode===_0x388e20(0x279)?_0x187b32=player1Lives>0x0||player2Lives>0x0:_0x187b32=playerLives>0x0;if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&_0x187b32)try{const _0x3a0cd1=_0xf98f24[_0x388e20(0x2b2)],_0x154572=challengingStagePaths,_0x4ef00c=_0x154572[_0x3a0cd1];if(!_0x4ef00c||_0x4ef00c['length']===0x0){console[_0x388e20(0x25a)]('CS:\x20Path\x20'+_0x3a0cd1+_0x388e20(0x28e)+_0x18d6c7+_0x388e20(0x1e1)),enemiesSpawnedThisWave+=_0xf98f24['enemies'][_0x388e20(0x254)];return;}let _0xde3036=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x18d6c7>=0x2&&_0x18d6c7<=0x3)_0xde3036=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x18d6c7>=0x4&&(_0xde3036=CS_LOOP_ATTACK_SPAWN_DELAY);_0xf98f24[_0x388e20(0x1ca)][_0x388e20(0x18b)]((_0x5a76b4,_0x2bcf56)=>{const _0x3efeac=_0x388e20;if(!_0x5a76b4||!_0x5a76b4['type']){console[_0x3efeac(0x25a)](_0x3efeac(0x24b)+_0x18d6c7+_0x3efeac(0x1ad)+_0x2bcf56+'.\x20Skipping.'),enemiesSpawnedThisWave++;return;}const _0x100e17=_0x2bcf56*_0xde3036,_0x3a2e47=setTimeout(()=>{const _0x3e100c=_0x3efeac,_0x1f4571=enemySpawnTimeouts[_0x3e100c(0x182)](_0x3a2e47);if(_0x1f4571>-0x1)enemySpawnTimeouts[_0x3e100c(0x1fc)](_0x1f4571,0x1);let _0xa8af3f=![];isTwoPlayerMode&&selectedGameMode===_0x3e100c(0x279)?_0xa8af3f=player1Lives>0x0||player2Lives>0x0:_0xa8af3f=playerLives>0x0;if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||!_0xa8af3f){enemiesSpawnedThisWave++;return;}try{let _0x15f386=_0x5a76b4[_0x3e100c(0x207)],_0x973526=_0x15f386===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x318992,_0x21d97e;if(_0x15f386===ENEMY1_TYPE)_0x318992=ENEMY1_WIDTH,_0x21d97e=ENEMY1_HEIGHT;else _0x15f386===ENEMY3_TYPE?(_0x318992=BOSS_WIDTH,_0x21d97e=BOSS_HEIGHT):(_0x318992=ENEMY_WIDTH,_0x21d97e=ENEMY_HEIGHT);let _0xa01f96=0x0,_0x1422c6=0x0;if(_0x4ef00c[0x0]?.['p0'])_0xa01f96=_0x4ef00c[0x0]['p0']['x'],_0x1422c6=_0x4ef00c[0x0]['p0']['y'];else throw new Error(_0x3e100c(0x26f)+_0x3a0cd1);(_0x18d6c7===0x0||_0x18d6c7===0x1)&&(_0xa01f96+=_0x334525);const _0xd7c87b=-_0x2bcf56*PATH_T_OFFSET_PER_ENEMY,_0x558611={'x':_0xa01f96,'y':_0x1422c6,'width':_0x318992,'height':_0x21d97e,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x3e100c(0x1eb),'gridRow':-0x1,'gridCol':-0x1,'type':_0x15f386,'health':_0x973526,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x3a0cd1,'pathSegmentIndex':0x0,'pathT':_0xd7c87b,'squadronId':_0x18d6c7,'id':_0x3e100c(0x2a7)+_0x18d6c7+'-'+_0x2bcf56+'-'+Date[_0x3e100c(0x1f5)]()+'-'+Math[_0x3e100c(0x16b)]()['toString'](0x24)['substring'](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x3e100c(0x29a),'hasCapturedShip':_0x15f386===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x15f386===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x33e75e,'captureDiveInitiationTime':0x0};enemies[_0x3e100c(0x26b)](_0x558611),enemiesSpawnedThisWave++;}catch(_0x40d4a3){console['error']('CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20'+_0x18d6c7+_0x3e100c(0x1ed)+_0x2bcf56+',\x20Path\x20'+_0x3a0cd1+'):',_0x40d4a3),enemiesSpawnedThisWave++;}},_0x100e17);enemySpawnTimeouts[_0x3efeac(0x26b)](_0x3a2e47),_0x412bfe++;});}catch(_0x19972c){console[_0x388e20(0x25a)](_0x388e20(0x23a)+_0x18d6c7+':',_0x19972c),enemiesSpawnedThisWave+=_0xf98f24['enemies'][_0x388e20(0x254)];}else _0xf98f24?.[_0x388e20(0x1ca)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0xf98f24[_0x388e20(0x1ca)]['length']);},_0xa569d);enemySpawnTimeouts[_0x3d9513(0x26b)](_0x19b21c);});}else console[_0xe4c410(0x29d)](_0xe4c410(0x22b)),isWaveTransitioning=!![],setTimeout(()=>{const _0x33ea47=_0xe4c410;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x33ea47(0x279)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x33ea47(0x250)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x45e75e,_0x243e45,_0x38a28c){const _0x3bbc6c=_0x502888;let _0x379c65=![];isTwoPlayerMode&&selectedGameMode===_0x3bbc6c(0x279)?_0x379c65=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x379c65=playerLives>0x0&&!isShipCaptured;if(!_0x45e75e||isPaused||!isInGameState||!_0x379c65||isChallengingStage||isWaveTransitioning)return;const _0x1facc4=Math[_0x3bbc6c(0x200)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x357cb5=0x0;_0x357cb5<_0x1facc4;_0x357cb5++){const _0x2fe1dd=_0x38a28c+_0x357cb5*ENTRANCE_FIRE_BURST_DELAY_MS,_0x1209d0=setTimeout(()=>{const _0x11dc33=_0x3bbc6c;try{const _0x2a9ace=enemySpawnTimeouts[_0x11dc33(0x182)](_0x1209d0);_0x2a9ace>-0x1&&enemySpawnTimeouts[_0x11dc33(0x1fc)](_0x2a9ace,0x1);let _0x474fca=![];isTwoPlayerMode&&selectedGameMode===_0x11dc33(0x279)?_0x474fca=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x474fca=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x474fca||isChallengingStage||isWaveTransitioning)return;const _0x3f00cc=enemies['find'](_0x280e0e=>_0x280e0e&&_0x280e0e['id']===_0x45e75e);_0x3f00cc&&_0x3f00cc[_0x11dc33(0x1d3)]===_0x243e45&&(createBulletSimple(_0x3f00cc)&&(_0x357cb5===0x0&&playSound('enemyShootSound',![],0.4),_0x3f00cc[_0x11dc33(0x242)]=Date[_0x11dc33(0x1f5)]()));}catch(_0x52602a){console[_0x11dc33(0x25a)]('Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20'+(_0x357cb5+0x1)+'/'+_0x1facc4+_0x11dc33(0x198)+_0x45e75e+':',_0x52602a);}},_0x2fe1dd);enemySpawnTimeouts['push'](_0x1209d0);}}function fireFixedEnemyBurst(_0x34d270,_0x43011a,_0x3bc91e,_0x3be8e6){const _0x3c57fd=_0x502888;let _0x47d57f=![];isTwoPlayerMode&&selectedGameMode===_0x3c57fd(0x279)?_0x47d57f=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x47d57f=playerLives>0x0&&!isShipCaptured;if(!_0x34d270||isPaused||!isInGameState||!_0x47d57f||isChallengingStage||isWaveTransitioning||_0x3be8e6<=0x0)return;for(let _0x5639a6=0x0;_0x5639a6<_0x3be8e6;_0x5639a6++){const _0x585001=_0x3bc91e+_0x5639a6*ENTRANCE_FIRE_BURST_DELAY_MS,_0x4adf2e=setTimeout(()=>{const _0x95aaf3=_0x3c57fd;try{const _0x1b5ac7=enemySpawnTimeouts[_0x95aaf3(0x182)](_0x4adf2e);_0x1b5ac7>-0x1&&enemySpawnTimeouts[_0x95aaf3(0x1fc)](_0x1b5ac7,0x1);let _0x35730e=![];isTwoPlayerMode&&selectedGameMode===_0x95aaf3(0x279)?_0x35730e=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x35730e=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x35730e||isChallengingStage||isWaveTransitioning)return;const _0x3b4b16=enemies[_0x95aaf3(0x2bd)](_0x584372=>_0x584372&&_0x584372['id']===_0x34d270);if(_0x3b4b16)createBulletSimple(_0x3b4b16)&&(_0x5639a6===0x0&&playSound('enemyShootSound',![],0.4),_0x3b4b16['lastFiredTime']=Date['now']());else{}}catch(_0x1742f2){console[_0x95aaf3(0x25a)]('Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20'+(_0x5639a6+0x1)+'/'+_0x3be8e6+_0x95aaf3(0x198)+_0x34d270+':',_0x1742f2);}},_0x585001);enemySpawnTimeouts[_0x3c57fd(0x26b)](_0x4adf2e);}}function startFullGridWave(){const _0x13444a=_0x502888;if(!currentWaveDefinition||currentWaveDefinition[_0x13444a(0x254)]===0x0||!isFullGridWave){console['error']('Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.'),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound('entranceSound',![],0.4),enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x254218=0x0;currentWaveDefinition['forEach']((_0x107667,_0x1a46ea)=>{const _0x25c6db=_0x13444a;let _0x580242=0x0;_0x107667&&_0x107667['enemies']&&Array['isArray'](_0x107667[_0x25c6db(0x1ca)])?(_0x580242=_0x107667[_0x25c6db(0x1ca)][_0x25c6db(0x254)],_0x107667[_0x25c6db(0x1ca)]['forEach']((_0x55f3be,_0x4fef1c)=>{const _0x500044=_0x25c6db;try{if(!_0x55f3be||!_0x55f3be[_0x500044(0x207)]||typeof _0x55f3be['gridRow']===_0x500044(0x193)||typeof _0x55f3be[_0x500044(0x27f)]===_0x500044(0x193)){console[_0x500044(0x25a)](_0x500044(0x179)+_0x1a46ea+_0x500044(0x1ad)+_0x4fef1c+_0x500044(0x2a8));return;}let _0x52a240=_0x55f3be['type'],_0xae80bb=_0x52a240===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x252e88,_0x3886e1;if(_0x52a240===ENEMY1_TYPE)_0x252e88=ENEMY1_WIDTH,_0x3886e1=ENEMY1_HEIGHT;else _0x52a240===ENEMY3_TYPE?(_0x252e88=BOSS_WIDTH,_0x3886e1=BOSS_HEIGHT):(_0x252e88=ENEMY_WIDTH,_0x3886e1=ENEMY_HEIGHT);let _0x5b97fe,_0x11dabc;try{const {x:_0x70cc99,y:_0x56e14e}=getCurrentGridSlotPosition(_0x55f3be[_0x500044(0x289)],_0x55f3be[_0x500044(0x27f)],_0x252e88);_0x5b97fe=_0x70cc99,_0x11dabc=_0x56e14e;}catch(_0x3f7dd6){console[_0x500044(0x25a)]('Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20'+_0x55f3be['type']+_0x500044(0x272)+_0x55f3be[_0x500044(0x289)]+','+_0x55f3be[_0x500044(0x27f)]+']',_0x3f7dd6),_0x5b97fe=gameCanvas?.['width']/0x2||0xc8,_0x11dabc=ENEMY_TOP_MARGIN+_0x55f3be[_0x500044(0x289)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x576674={'x':_0x5b97fe,'y':_0x11dabc,'width':_0x252e88,'height':_0x3886e1,'targetGridX':_0x5b97fe,'targetGridY':_0x11dabc,'speed':0x0,'state':_0x500044(0x1e3),'gridRow':_0x55f3be['gridRow'],'gridCol':_0x55f3be[_0x500044(0x27f)],'type':_0x52a240,'health':_0xae80bb,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x1a46ea,'squadronEnemyIndex':_0x4fef1c,'id':_0x500044(0x183)+_0x1a46ea+'-'+_0x4fef1c+'-'+Date[_0x500044(0x1f5)]()+'-'+Math[_0x500044(0x16b)]()['toString'](0x24)[_0x500044(0x21a)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x52a240===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x52a240===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1,'captureDiveInitiationTime':0x0};enemies[_0x500044(0x26b)](_0x576674),_0x254218++;}catch(_0x4b2cd6){console[_0x500044(0x25a)](_0x500044(0x24e)+_0x1a46ea+_0x500044(0x1ed)+_0x4fef1c+'):',_0x4b2cd6);}})):console[_0x25c6db(0x29d)](_0x25c6db(0x1c6)+_0x1a46ea+_0x25c6db(0x1f3)),squadronCompletionStatus[_0x1a46ea]={'completed':_0x580242,'total':_0x580242};}),totalEnemiesScheduledForWave=_0x254218,enemiesSpawnedThisWave=_0x254218,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0x13444a(0x20c),!![],0.1)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date[_0x13444a(0x1f5)](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date[_0x13444a(0x1f5)](),firstEnemyLanded=!![];}function renderGame(){const _0x4d7a4f=_0x502888;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0x4d7a4f(0x1a9)](0x0,0x0,gameCanvas['width'],gameCanvas[_0x4d7a4f(0x245)]);const _0x21baf6=Date[_0x4d7a4f(0x1f5)]();gameCtx[_0x4d7a4f(0x2ab)]();const _0x169945=_0x4d7a4f(0x169),_0x18ea73=_0x4d7a4f(0x21e),_0x5bf408='white';let _0x355a28,_0x463adc,_0x4621b2,_0xce9365,_0x18b2f5=![],_0x4fef59=![],_0x1655af=![];if(isShowingResultsScreen){}else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage){}else{if(isShowingPlayerGameOverMessage){}else{if(!isInGameState){}else{_0x4621b2=highScore||0x0;if(!isManualControl){}else{if(isTwoPlayerMode&&selectedGameMode===_0x4d7a4f(0x279)){_0x355a28=player1Score,_0x463adc=player2Score,_0x4621b2=Math[_0x4d7a4f(0x253)](highScore,player1Score,player2Score),_0xce9365='1UP',_0x18b2f5=!isShowingIntro&&!isPaused&&player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x4fef59=!isShowingIntro&&!isPaused&&player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if(player1Score>=_0x4621b2&&player1Score>0x0)_0x1655af=_0x18b2f5;if(player2Score>=_0x4621b2&&player2Score>0x0&&player2Score>player1Score)_0x1655af=_0x4fef59;}else isTwoPlayerMode&&selectedGameMode===_0x4d7a4f(0x29a)?(_0x355a28=currentPlayer===0x1?score:player1Score,_0x463adc=currentPlayer===0x2?score:player2Score,_0x4621b2=Math[_0x4d7a4f(0x253)](highScore,player1Score,player2Score,score),_0xce9365=_0x4d7a4f(0x17d),_0x18b2f5=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x4fef59=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x1655af=!isPaused&&!isShowingIntro&&score>0x0&&_0x4621b2>0x0&&score>=_0x4621b2):(_0x355a28=score,_0x463adc=0x0,_0xce9365=_0x4d7a4f(0x17d));}}}}}let _0x5c99be=![];if(_0x1655af){}typeof MARGIN_SIDE!==_0x4d7a4f(0x193)&&typeof MARGIN_TOP!==_0x4d7a4f(0x193)&&typeof SCORE_OFFSET_Y!==_0x4d7a4f(0x193)&&(drawTopUiElement(_0xce9365,_0x355a28,_0x4d7a4f(0x196),MARGIN_SIDE,_0x18b2f5),drawTopUiElement(_0x4d7a4f(0x297),_0x4621b2,_0x4d7a4f(0x1c1),gameCanvas[_0x4d7a4f(0x294)]/0x2,_0x5c99be),drawTopUiElement(_0x4d7a4f(0x2be),_0x463adc,_0x4d7a4f(0x1bc),gameCanvas[_0x4d7a4f(0x294)]-MARGIN_SIDE,_0x4fef59));if(typeof shipImage!=='undefined'&&typeof LIFE_ICON_MARGIN_BOTTOM!==_0x4d7a4f(0x193)&&typeof LIFE_ICON_SIZE!==_0x4d7a4f(0x193)&&typeof LIFE_ICON_MARGIN_LEFT!==_0x4d7a4f(0x193)&&typeof LIFE_ICON_SPACING!==_0x4d7a4f(0x193)){if(shipImage[_0x4d7a4f(0x1c5)]&&shipImage['naturalHeight']!==0x0){const _0x4d6b43=gameCanvas[_0x4d7a4f(0x245)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x1f65d8=0x0,_0x1159f7=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x4d7a4f(0x279)){if(player1Lives>0x0)_0x1f65d8=Math[_0x4d7a4f(0x253)](0x0,player1Lives-0x1);if(player2Lives>0x0)_0x1159f7=Math['max'](0x0,player2Lives-0x1);}else{if(playerLives>0x0)_0x1f65d8=Math[_0x4d7a4f(0x253)](0x0,playerLives-0x1);}const _0x2b892e=0x5;for(let _0x553def=0x0;_0x553def<Math[_0x4d7a4f(0x287)](_0x1f65d8,_0x2b892e);_0x553def++){const _0x349c9d=LIFE_ICON_MARGIN_LEFT+_0x553def*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx['drawImage'](shipImage,Math['round'](_0x349c9d),Math['round'](_0x4d6b43),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}if(isTwoPlayerMode&&selectedGameMode===_0x4d7a4f(0x279)){const _0x129fbf=gameCanvas['width']-LIFE_ICON_MARGIN_RIGHT-Math[_0x4d7a4f(0x287)](_0x1159f7,_0x2b892e)*(LIFE_ICON_SIZE+LIFE_ICON_SPACING)+LIFE_ICON_SPACING;for(let _0x2c2adb=0x0;_0x2c2adb<Math[_0x4d7a4f(0x287)](_0x1159f7,_0x2b892e);_0x2c2adb++){const _0x32e398=_0x129fbf+_0x2c2adb*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx['drawImage'](shipImage,Math['round'](_0x32e398),Math['round'](_0x4d6b43),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}}gameCtx[_0x4d7a4f(0x1b2)](),gameCtx[_0x4d7a4f(0x2ab)]();if(isTwoPlayerMode&&selectedGameMode===_0x4d7a4f(0x279)){if(ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured){let _0x29e9e4=!![];if(isPlayer1Invincible){const _0x57c7fb=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x21baf6%_0x57c7fb>=INVINCIBILITY_BLINK_ON_MS)_0x29e9e4=![];}if(_0x29e9e4){const _0xed86dd=ship1['x'],_0x3b9133=ship1['y'];typeof shipImage!==_0x4d7a4f(0x193)&&shipImage['complete']?(gameCtx[_0x4d7a4f(0x1a2)](shipImage,Math['round'](_0xed86dd),Math[_0x4d7a4f(0x200)](_0x3b9133),ship1[_0x4d7a4f(0x294)],ship1[_0x4d7a4f(0x245)]),player1IsDualShipActive&&gameCtx[_0x4d7a4f(0x1a2)](shipImage,Math['round'](_0xed86dd+DUAL_SHIP_OFFSET_X),Math[_0x4d7a4f(0x200)](_0x3b9133),ship1[_0x4d7a4f(0x294)],ship1[_0x4d7a4f(0x245)])):(gameCtx[_0x4d7a4f(0x24c)]=_0x4d7a4f(0x252),gameCtx[_0x4d7a4f(0x1db)](Math[_0x4d7a4f(0x200)](_0xed86dd),Math[_0x4d7a4f(0x200)](_0x3b9133),ship1[_0x4d7a4f(0x294)],ship1[_0x4d7a4f(0x245)]));}}if(ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured){let _0x1a3280=!![];if(isPlayer2Invincible){const _0x44c639=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x21baf6%_0x44c639>=INVINCIBILITY_BLINK_ON_MS)_0x1a3280=![];}if(_0x1a3280){const _0x265f45=ship2['x'],_0x1dd2d0=ship2['y'];typeof shipImage!==_0x4d7a4f(0x193)&&shipImage[_0x4d7a4f(0x1c5)]?(gameCtx[_0x4d7a4f(0x1a2)](shipImage,Math[_0x4d7a4f(0x200)](_0x265f45),Math[_0x4d7a4f(0x200)](_0x1dd2d0),ship2[_0x4d7a4f(0x294)],ship2['height']),player2IsDualShipActive&&gameCtx['drawImage'](shipImage,Math[_0x4d7a4f(0x200)](_0x265f45+DUAL_SHIP_OFFSET_X),Math['round'](_0x1dd2d0),ship2[_0x4d7a4f(0x294)],ship2[_0x4d7a4f(0x245)])):(gameCtx[_0x4d7a4f(0x24c)]=_0x4d7a4f(0x1c8),gameCtx[_0x4d7a4f(0x1db)](Math[_0x4d7a4f(0x200)](_0x265f45),Math[_0x4d7a4f(0x200)](_0x1dd2d0),ship2[_0x4d7a4f(0x294)],ship2[_0x4d7a4f(0x245)]));}}}else{if(ship&&!isShowingCaptureMessage){let _0x59b7ba=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x141cd5=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x21baf6%_0x141cd5>=INVINCIBILITY_BLINK_ON_MS)_0x59b7ba=![];}if(_0x59b7ba){let _0x44c196=ship['x'],_0x399fb8=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x399fb8&&(_0x44c196=Math[_0x4d7a4f(0x200)](gameCanvas[_0x4d7a4f(0x294)]/0x2-ship[_0x4d7a4f(0x294)]/0x2));const _0x238a90=ship['y'];typeof shipImage!==_0x4d7a4f(0x193)&&shipImage[_0x4d7a4f(0x1c5)]?(gameCtx[_0x4d7a4f(0x1a2)](shipImage,Math['round'](_0x44c196),Math[_0x4d7a4f(0x200)](_0x238a90),ship[_0x4d7a4f(0x294)],ship[_0x4d7a4f(0x245)]),isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&gameCtx[_0x4d7a4f(0x1a2)](shipImage,Math[_0x4d7a4f(0x200)](_0x44c196+DUAL_SHIP_OFFSET_X),Math[_0x4d7a4f(0x200)](_0x238a90),ship['width'],ship['height'])):(gameCtx['fillStyle']='blue',gameCtx[_0x4d7a4f(0x1db)](Math['round'](_0x44c196),Math[_0x4d7a4f(0x200)](_0x238a90),ship['width'],ship['height']));}}}if(fallingShips['length']>0x0&&typeof shipImage!=='undefined'&&shipImage[_0x4d7a4f(0x1c5)]){}gameCtx[_0x4d7a4f(0x1b2)]();if(!isInGameState){if(isShowingScoreScreen){}else{gameCtx[_0x4d7a4f(0x2ab)]();const _0x1eaf76=gameCanvas['width'],_0x1f57e9=gameCanvas['height'],_0x110995=_0x1eaf76/0x2;selectedButtonIndex===-0x1&&(isPlayerSelectMode||isFiringModeSelectMode||isGameModeSelectMode||!isPlayerSelectMode&&!isFiringModeSelectMode&&!isGameModeSelectMode)&&(selectedButtonIndex=0x0);let _0x256ba9=MENU_LOGO_APPROX_HEIGHT,_0x285e86=_0x256ba9*(logoImage[_0x4d7a4f(0x1af)]/logoImage[_0x4d7a4f(0x1d9)]||0x1);typeof logoImage!=='undefined'&&logoImage[_0x4d7a4f(0x1c5)]&&logoImage[_0x4d7a4f(0x1d9)]!==0x0&&(_0x256ba9=logoImage['naturalHeight']*LOGO_SCALE_FACTOR,_0x285e86=logoImage[_0x4d7a4f(0x1af)]*LOGO_SCALE_FACTOR);const _0x459891=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x278b85=_0x256ba9+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x459891;let _0x3dc031=(_0x1f57e9-_0x278b85)/0x2-0x46;_0x3dc031+=MENU_GENERAL_Y_OFFSET;const _0x74db78=_0x110995-_0x285e86/0x2,_0x6f4a2=_0x3dc031+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!==_0x4d7a4f(0x193)&&logoImage['complete']&&logoImage[_0x4d7a4f(0x1d9)]!==0x0?gameCtx[_0x4d7a4f(0x1a2)](logoImage,Math[_0x4d7a4f(0x200)](_0x74db78),Math[_0x4d7a4f(0x200)](_0x6f4a2),_0x285e86,_0x256ba9):drawCanvasText(_0x4d7a4f(0x213),_0x110995,_0x6f4a2+_0x256ba9/0x2,_0x4d7a4f(0x2b5),_0x4d7a4f(0x215));if(isGameModeSelectMode)drawCanvasButton('NORMAL\x20GAME',0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x4d7a4f(0x295),0x1,selectedButtonIndex===0x1);else{if(isFiringModeSelectMode)drawCanvasButton(_0x4d7a4f(0x246),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x4d7a4f(0x2ac),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0x4d7a4f(0x2b3),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x4d7a4f(0x189),0x1,selectedButtonIndex===0x1)):(drawCanvasButton(_0x4d7a4f(0x19b),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x4d7a4f(0x1ff),0x1,selectedButtonIndex===0x1));}const _0x1b62d1=getMenuButtonRect(0x1);let _0x4fa916;_0x1b62d1?_0x4fa916=_0x1b62d1['y']+_0x1b62d1[_0x4d7a4f(0x245)]+MENU_BUTTON_SUBTITLE_V_GAP+_0x459891/0x2:_0x4fa916=_0x3dc031+_0x256ba9+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x459891/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x110995-0x1,Math[_0x4d7a4f(0x200)](_0x4fa916),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0x4d7a4f(0x1c1),'middle',!![]),gameCtx[_0x4d7a4f(0x1b2)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0x4d7a4f(0x2ab)]();let _0x1f4308=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x1f4308&&(bullets[_0x4d7a4f(0x18b)](_0x3406ab=>{}),enemyBullets[_0x4d7a4f(0x18b)](_0x25f627=>{}));enemies['forEach'](_0x24f320=>{});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x58e43c=![];const _0x49ae79=gameCanvas['height']/0x2;if(isPaused){}else{if(isShowingCaptureMessage){}}gameCtx[_0x4d7a4f(0x1b2)]();}else{if(isShowingPlayerGameOverMessage){}else{if(gameOverSequenceStartTime>0x0){}}}}}catch(_0x31bcaf){console[_0x4d7a4f(0x25a)](_0x4d7a4f(0x262),_0x31bcaf,_0x31bcaf['stack']);}}function handleEnemyHit(_0x26e4b2,_0x2386f5=null){const _0x36cb0b=_0x502888;if(!_0x26e4b2)return{'destroyed':![],'pointsAwarded':0x0};const _0x2e4e61=Date[_0x36cb0b(0x1f5)]();let _0x4dae38=0x0,_0x21945c=![],_0x529e85=_0x26e4b2[_0x36cb0b(0x286)],_0x508310=null,_0x3fdfe8=0x1;const _0x2e21de=_0x26e4b2[_0x36cb0b(0x207)]===ENEMY3_TYPE?BOSS_WIDTH:_0x26e4b2[_0x36cb0b(0x207)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x5729c8=_0x26e4b2[_0x36cb0b(0x207)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x26e4b2['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x2910db=_0x26e4b2[_0x36cb0b(0x207)]===ENEMY3_TYPE&&_0x26e4b2[_0x36cb0b(0x1a0)],_0x45e855=_0x26e4b2[_0x36cb0b(0x207)]===ENEMY3_TYPE&&_0x26e4b2[_0x36cb0b(0x28f)];let _0x326af2=![],_0x50af41=null;if(_0x2910db){if(isTwoPlayerMode&&selectedGameMode===_0x36cb0b(0x279)){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x26e4b2['id'])_0x326af2=!![],_0x50af41='player1';else isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x26e4b2['id']&&(_0x326af2=!![],_0x50af41='player2');}else!isTwoPlayerMode&&isShipCaptured&&capturedBossIdWithMessage===_0x26e4b2['id']&&(_0x326af2=!![]);}const _0x1b75bd=_0x26e4b2['x']+_0x2e21de/0x2,_0x493131=_0x26e4b2['y']+_0x5729c8*0.2;createHitSparks(_0x1b75bd,_0x493131),_0x26e4b2['health']--;_0x26e4b2[_0x36cb0b(0x207)]===ENEMY3_TYPE&&(_0x26e4b2['isDamaged']=_0x26e4b2[_0x36cb0b(0x197)]<ENEMY3_MAX_HITS);if(_0x26e4b2[_0x36cb0b(0x197)]<=0x0){_0x21945c=!![];isChallengingStage&&challengingStageEnemiesHit++;if(_0x2910db&&_0x45e855){let _0xdb50a9=null;if(_0x326af2&&_0x50af41)_0xdb50a9=_0x50af41;else{let _0x58824b=![];if(isCoopAIDemoActive){if(_0x2386f5===_0x36cb0b(0x194)&&player1IsDualShipActive)_0xdb50a9='player2',_0x58824b=!![];else _0x2386f5==='player2'&&player2IsDualShipActive&&(_0xdb50a9=_0x36cb0b(0x194),_0x58824b=!![]);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x2386f5===_0x36cb0b(0x29f)&&player2IsDualShipActive)_0xdb50a9=_0x36cb0b(0x194),_0x58824b=!![];else _0x2386f5===_0x36cb0b(0x194)&&player1IsDualShipActive&&(_0xdb50a9=_0x36cb0b(0x29f),_0x58824b=!![]);}}!_0x58824b&&(_0xdb50a9=_0x2386f5);}_0xdb50a9===null&&_0x2386f5&&(_0xdb50a9=_0x2386f5);if(_0x26e4b2[_0x36cb0b(0x28f)]){const _0x1cd764=_0x26e4b2[_0x36cb0b(0x28f)][_0x36cb0b(0x294)],_0x293a20=_0x26e4b2[_0x36cb0b(0x28f)]['height'],_0x2a28b0=_0x26e4b2['x']+(_0x2e21de-_0x1cd764)/0x2+CAPTURED_SHIP_OFFSET_X,_0x310202=_0x26e4b2['y']+CAPTURED_SHIP_OFFSET_Y,_0x4efe5c=fallingShips[_0x36cb0b(0x29e)](_0x1e2e6a=>Math[_0x36cb0b(0x2c0)](_0x1e2e6a['x']-_0x2a28b0)<0x1&&Math[_0x36cb0b(0x2c0)](_0x1e2e6a['y']-_0x310202)<0x1);!_0x4efe5c&&fallingShips[_0x36cb0b(0x26b)]({'x':_0x2a28b0,'y':_0x310202,'width':_0x1cd764,'height':_0x293a20,'creationTime':_0x2e4e61,'tintProgress':0x1,'rotation':0x0,'rotationDirection':Math[_0x36cb0b(0x16b)]()<0.5?-0x1:0x1,'totalRotation':0x0,'rotationCompleted':![],'targetPlayerId':_0xdb50a9});}else console[_0x36cb0b(0x25a)]('[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!');_0x26e4b2[_0x36cb0b(0x1a0)]=![],_0x26e4b2['capturedShipDimensions']=null;}else _0x2910db&&!_0x45e855&&(console['error']('[handleEnemyHit]\x20CRITICAL:\x20Boss\x20'+_0x26e4b2['id']+_0x36cb0b(0x22a)),_0x26e4b2[_0x36cb0b(0x1a0)]=![],_0x26e4b2[_0x36cb0b(0x28f)]=null);if(isChallengingStage){let _0xc25fa0=0x64;const _0x3a94d7=csLastHitTime;csLastHitTime=_0x2e4e61,csLastChainHitPosition={'x':_0x26e4b2['x'],'y':_0x26e4b2['y']},csCurrentChainHits>0x0&&_0x2e4e61-_0x3a94d7<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0xc25fa0*=0x2),_0x4dae38=_0xc25fa0,csCurrentChainScore+=_0x4dae38,scoreEarnedThisCS+=_0x4dae38,_0x508310=_0x36cb0b(0x265),_0x3fdfe8=0.4;}else{if(_0x26e4b2[_0x36cb0b(0x1d3)]===_0x36cb0b(0x1e3))_0x4dae38=_0x26e4b2['type']===ENEMY1_TYPE?0x32:_0x26e4b2[_0x36cb0b(0x207)]===ENEMY2_TYPE?0x50:0x0,_0x26e4b2[_0x36cb0b(0x207)]===ENEMY3_TYPE&&(_0x4dae38=0x96),_0x508310=_0x36cb0b(0x265),_0x3fdfe8=0.4;else{_0x4dae38=_0x26e4b2[_0x36cb0b(0x207)]===ENEMY1_TYPE?0x64:_0x26e4b2[_0x36cb0b(0x207)]===ENEMY2_TYPE?0xa0:0x0;if(_0x26e4b2[_0x36cb0b(0x207)]===ENEMY3_TYPE){if(_0x2910db){const _0x536a95=[0x3e8,0x5dc,0x7d0,0xbb8];_0x4dae38=_0x536a95[Math[_0x36cb0b(0x268)](Math[_0x36cb0b(0x16b)]()*_0x536a95[_0x36cb0b(0x254)])],_0x508310='bossHit2Sound',_0x3fdfe8=0.4;}else _0x529e85?(_0x4dae38=0x190,_0x508310='bossHit2Sound',_0x3fdfe8=0.4):(_0x4dae38=0x0,console[_0x36cb0b(0x29d)](_0x36cb0b(0x1f4)+_0x4dae38+_0x36cb0b(0x241)+(_0x26e4b2[_0x36cb0b(0x197)]+0x1)),_0x508310=_0x36cb0b(0x265),_0x3fdfe8=0.4);}else _0x508310=_0x36cb0b(0x265),_0x3fdfe8=0.4;if(_0x21945c&&_0x4dae38>0x0){const _0x394c9e=normalWaveLastHitTime;normalWaveLastHitTime=_0x2e4e61,normalWaveLastChainHitPosition={'x':_0x26e4b2['x'],'y':_0x26e4b2['y']};normalWaveLastChainHitPosition&&_0x2e4e61-_0x394c9e<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x4005af=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x261925=Math[_0x36cb0b(0x287)](_0x4005af['length']-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x187587=_0x4005af[_0x261925];_0x4dae38+=_0x187587,normalWaveCurrentChainScore+=_0x187587;}}}}if(_0x4dae38>0x0){let _0x51c42e=null,_0x36c0a8=0x0,_0xe77e74=_0x2386f5,_0x7a2292=highScore,_0x17e799=highScoreHolderId,_0x3d09f9=![],_0x9289b8=![];if(isCoopAIDemoActive){if(_0x2386f5===_0x36cb0b(0x194)){player1Score+=_0x4dae38,_0x36c0a8=player1Score,_0x51c42e=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x36cb0b(0x194),_0x3d09f9=!![],_0x9289b8=!![];else player1Score===highScore&&highScoreHolderId!==_0x36cb0b(0x194)&&highScore>0x0&&(highScoreHolderId=_0x36cb0b(0x194),_0x3d09f9=!![],_0x9289b8=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x2386f5==='player2'){player2Score+=_0x4dae38,_0x36c0a8=player2Score,_0x51c42e=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x36cb0b(0x17b),_0x3d09f9=!![],_0x9289b8=!![];else player2Score===highScore&&highScoreHolderId!==_0x36cb0b(0x17b)&&highScore>0x0&&(highScoreHolderId='player2',_0x3d09f9=!![],_0x9289b8=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x4dae38,_0x36c0a8=player1Score,_0x51c42e=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId='player1',_0x9289b8=!![]),checkAndAwardExtraLife(0x1);}}else{if(!isManualControl){score+=_0x4dae38,player1Score=score,_0x36c0a8=score,_0xe77e74=_0x36cb0b(0x194),_0x51c42e=()=>player1EnemiesHit++;if(score>highScore)highScore=score,highScoreHolderId=_0x36cb0b(0x194),_0x3d09f9=!![],_0x9289b8=!![];else score===highScore&&highScoreHolderId!==_0x36cb0b(0x194)&&highScore>0x0&&(highScoreHolderId=_0x36cb0b(0x194),_0x3d09f9=!![],_0x9289b8=!![]);checkAndAwardExtraLife(0x1);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x2386f5==='player1'){player1Score+=_0x4dae38,_0x36c0a8=player1Score,_0x51c42e=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId='player1',_0x3d09f9=!![],_0x9289b8=!![];else player1Score===highScore&&highScoreHolderId!==_0x36cb0b(0x194)&&highScore>0x0&&(highScoreHolderId=_0x36cb0b(0x194),_0x3d09f9=!![],_0x9289b8=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x2386f5==='ai_p2'){player2Score+=_0x4dae38,_0x36c0a8=player2Score,_0xe77e74='ai_p2',_0x51c42e=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x36cb0b(0x29f),_0x3d09f9=!![],_0x9289b8=!![];else player2Score===highScore&&highScoreHolderId!=='ai_p2'&&highScore>0x0&&(highScoreHolderId=_0x36cb0b(0x29f),_0x3d09f9=!![],_0x9289b8=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x4dae38,_0x36c0a8=player1Score,_0x51c42e=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId=_0x36cb0b(0x194),_0x9289b8=!![]),checkAndAwardExtraLife(0x1);}}else{if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x2386f5==='player1'){player1Score+=_0x4dae38,_0x36c0a8=player1Score,_0x51c42e=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x36cb0b(0x194),_0x3d09f9=!![],_0x9289b8=!![];else player1Score===highScore&&highScoreHolderId!=='player1'&&highScore>0x0&&(highScoreHolderId=_0x36cb0b(0x194),_0x3d09f9=!![],_0x9289b8=!![]);checkAndAwardExtraLife(0x1);}else{if(_0x2386f5===_0x36cb0b(0x17b)){player2Score+=_0x4dae38,_0x36c0a8=player2Score,_0x51c42e=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x36cb0b(0x17b),_0x3d09f9=!![],_0x9289b8=!![];else player2Score===highScore&&highScoreHolderId!==_0x36cb0b(0x17b)&&highScore>0x0&&(highScoreHolderId=_0x36cb0b(0x17b),_0x3d09f9=!![],_0x9289b8=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x4dae38,_0x36c0a8=player1Score,_0x51c42e=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId=_0x36cb0b(0x194),_0x9289b8=!![]),checkAndAwardExtraLife(0x1);}}else{score+=_0x4dae38,_0x36c0a8=score;currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,_0xe77e74=_0x36cb0b(0x194),_0x51c42e=()=>player1EnemiesHit++):(player2Score=score,_0xe77e74=isPlayerTwoAI?_0x36cb0b(0x29f):'player2',_0x51c42e=()=>player2EnemiesHit++);if(score>highScore)highScore=score,highScoreHolderId=_0xe77e74,_0x3d09f9=!![],_0x9289b8=!![];else score===highScore&&highScoreHolderId!==_0xe77e74&&highScore>0x0&&(highScoreHolderId=_0xe77e74,_0x3d09f9=!![],_0x9289b8=!![]);checkAndAwardExtraLife(currentPlayer);}}}}if(_0x3d09f9||_0x9289b8&&_0x7a2292>0x0&&highScoreHolderId!==_0x17e799){let _0x3d6756=![];if(highScoreHolderId===_0x36cb0b(0x194))_0x3d6756=player1TriggeredHighScoreSound;else{if(highScoreHolderId===_0x36cb0b(0x17b)||highScoreHolderId===_0x36cb0b(0x29f))_0x3d6756=player2TriggeredHighScoreSound;}if(!_0x3d6756||highScoreHolderId!==_0x17e799&&_0x7a2292>0x0){playSound(_0x36cb0b(0x229),![],0.2);if(highScoreHolderId===_0x36cb0b(0x194))player1TriggeredHighScoreSound=!![];else{if(highScoreHolderId===_0x36cb0b(0x17b)||highScoreHolderId===_0x36cb0b(0x29f))player2TriggeredHighScoreSound=!![];}}}if(_0x9289b8&&highScoreHolderId!==_0x17e799&&_0x7a2292>0x0){if(_0x17e799===_0x36cb0b(0x194))player1TriggeredHighScoreSound=![];else{if(_0x17e799==='player2'||_0x17e799==='ai_p2')player2TriggeredHighScoreSound=![];}}_0x51c42e&&!isChallengingStage&&_0x51c42e();const _0x3ca8f0=_0x26e4b2[_0x36cb0b(0x1d3)]===_0x36cb0b(0x1e3)||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores['push']({'text':_0x4dae38[_0x36cb0b(0x1bb)](),'x':_0x26e4b2['x']+_0x2e21de/0x2,'y':_0x26e4b2['y'],'color':_0x3ca8f0,'creationTime':_0x2e4e61,'displayStartTime':_0x2e4e61+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x26e4b2['x']+_0x2e21de/0x2,_0x26e4b2['y']+_0x5729c8/0x2);_0x26e4b2['id']===capturingBossId&&stopSound(_0x36cb0b(0x17f));if(_0x26e4b2[_0x36cb0b(0x1d3)]===_0x36cb0b(0x1b7)||_0x26e4b2['state']===_0x36cb0b(0x2af)||_0x26e4b2[_0x36cb0b(0x1d3)]===_0x36cb0b(0x1c0)||_0x26e4b2[_0x36cb0b(0x1d3)]===_0x36cb0b(0x1eb)||_0x26e4b2[_0x36cb0b(0x1d3)]===_0x36cb0b(0x24a)||_0x26e4b2['state']===_0x36cb0b(0x232)){if(_0x26e4b2['type']===ENEMY3_TYPE)stopSound(_0x36cb0b(0x191));else stopSound('butterflyDiveSound');}}else{_0x21945c=![];if(_0x26e4b2['type']===ENEMY3_TYPE)_0x508310=_0x36cb0b(0x26c),_0x3fdfe8=0.6,_0x4dae38=0x0;else{_0x4dae38=0x0;if(_0x26e4b2['type']===ENEMY1_TYPE)_0x508310='beeHitSound',_0x3fdfe8=0.3;else _0x26e4b2['type']===ENEMY2_TYPE&&(_0x508310=_0x36cb0b(0x202),_0x3fdfe8=0.3);}}return _0x508310&&playSound(_0x508310,![],_0x3fdfe8),{'destroyed':_0x21945c,'pointsAwarded':_0x4dae38};}function createHitSparks(_0x3371c8,_0x28aa65){const _0x48d290=_0x502888;if(!gameCtx)return;const _0x5ab534=Date[_0x48d290(0x1f5)]();for(let _0x164c70=0x0;_0x164c70<HIT_SPARK_COUNT;_0x164c70++){const _0x3a633d=Math[_0x48d290(0x16b)]()*Math['PI']*0x2,_0x2220d2=HIT_SPARK_SPEED*(0.7+Math[_0x48d290(0x16b)]()*0.6),_0x25b616=HIT_SPARK_LIFETIME*(0.8+Math[_0x48d290(0x16b)]()*0.4);hitSparks['push']({'x':_0x3371c8,'y':_0x28aa65,'vx':Math[_0x48d290(0x18e)](_0x3a633d)*_0x2220d2,'vy':Math['sin'](_0x3a633d)*_0x2220d2,'creationTime':_0x5ab534,'lifetime':_0x25b616,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function _0x45b9(_0x3d4ac6,_0x4b31b6){const _0xc3120d=_0xc312();return _0x45b9=function(_0x45b915,_0x37a9df){_0x45b915=_0x45b915-0x167;let _0x53f109=_0xc3120d[_0x45b915];return _0x53f109;},_0x45b9(_0x3d4ac6,_0x4b31b6);}function updateHitSparks(){const _0x2a1c4d=_0x502888,_0x5299f3=Date[_0x2a1c4d(0x1f5)]();for(let _0x1408b2=hitSparks[_0x2a1c4d(0x254)]-0x1;_0x1408b2>=0x0;_0x1408b2--){const _0x15f459=hitSparks[_0x1408b2],_0x3998f2=_0x5299f3-_0x15f459[_0x2a1c4d(0x186)];_0x3998f2>=_0x15f459[_0x2a1c4d(0x1a1)]?hitSparks[_0x2a1c4d(0x1fc)](_0x1408b2,0x1):(_0x15f459['vy']+=HIT_SPARK_GRAVITY,_0x15f459['x']+=_0x15f459['vx'],_0x15f459['y']+=_0x15f459['vy'],_0x15f459[_0x2a1c4d(0x283)]=Math[_0x2a1c4d(0x253)](0x0,0x1-_0x3998f2*HIT_SPARK_FADE_SPEED));}}function moveEntities(){const _0x3c23b8=_0x502888;try{if(isPaused)return;const _0x3da4bb=Date['now']();}catch(_0x363d86){console['error'](_0x3c23b8(0x284),_0x363d86,_0x363d86['stack']),isGridSoundPlaying=![],stopSound('gridBackgroundSound'),isEntrancePhaseActive=![],stopSound(_0x3c23b8(0x275)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x3c23b8(0x17f)),stopSound(_0x3c23b8(0x218)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x3c23b8(0x250))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x3c23b8(0x1dc));}}function switchPlayerTurn(){const _0x3ec8e3=_0x502888;if(!isTwoPlayerMode||selectedGameMode==='coop')return![];currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive,player1MaxLevelReached=Math[_0x3ec8e3(0x253)](player1MaxLevelReached,level)):(player2Score=score,player2IsDualShipActive=isDualShipActive,player2MaxLevelReached=Math[_0x3ec8e3(0x253)](player2MaxLevelReached,level));const _0x2bd4e5=currentPlayer===0x1?0x2:0x1,_0x4cf186=_0x2bd4e5===0x1?player1Lives:player2Lives;if(_0x4cf186<=0x0){const _0x1cce1c=currentPlayer===0x1?player1Lives:player2Lives;return _0x1cce1c<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x2bd4e5,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0x1319f2=null,_0x467d5c=![]){const _0x3886dc=_0x502888,_0x3031b4=Date[_0x3886dc(0x1f5)](),_0x23b60a=isTwoPlayerMode&&selectedGameMode===_0x3886dc(0x279)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x3031b4<coopPlayersReadyStartTime+0x1f40;if(_0x23b60a){if(_0x1319f2===_0x3886dc(0x194)&&!_0x467d5c)return![];if(_0x1319f2==='ai_p2'&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3886dc(0x1ab))return![];}let _0x5f3252=![],_0x5f4efa=null,_0x3d6e6e=![],_0x13be30=0x0,_0x56caf8=_0x3f3066=>{},_0x549427=_0x121694=>{},_0x2a54e0=![],_0x573941=()=>![],_0x4f3925=_0x2445c7=>{},_0xc7d553=_0x1319f2;const _0x4d2288=!isPaused&&isInGameState&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!showReadyMessage&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x3886dc(0x279)&&(_0x1319f2===_0x3886dc(0x194)&&isPlayer1ShowingGameOverMessage||_0x1319f2===_0x3886dc(0x17b)&&isPlayer2ShowingGameOverMessage||_0x1319f2==='ai_p2'&&isPlayer2ShowingGameOverMessage));if(!_0x4d2288)return![];if(_0xc7d553){let _0x33921d=![];if(_0xc7d553==='ai'&&isShipCaptured)_0x33921d=!![];else{if(_0xc7d553===_0x3886dc(0x29f)&&isTwoPlayerMode&&selectedGameMode==='normal'&&isShipCaptured)_0x33921d=!![];else{if(_0xc7d553===_0x3886dc(0x194)&&isCoopAIDemoActive&&isPlayer1ShipCaptured)_0x33921d=!![];else{if(_0xc7d553===_0x3886dc(0x17b)&&isCoopAIDemoActive&&isPlayer2ShipCaptured)_0x33921d=!![];else{if(_0xc7d553===_0x3886dc(0x29f)&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&isPlayer2ShipCaptured)_0x33921d=!![];}}}}if(_0x33921d)return![];}if(isTwoPlayerMode&&selectedGameMode===_0x3886dc(0x279)){if(_0x1319f2==='player1'&&ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1NeedsRespawnAfterCapture)(!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer1ShipCaptured)&&(_0x5f4efa=ship1,_0x3d6e6e=player1IsDualShipActive,_0x13be30=player1LastShotTime,_0x56caf8=_0x3c9b24=>{player1LastShotTime=_0x3c9b24;},_0x549427=_0x171288=>{player1ShotsFired+=_0x171288;},_0x2a54e0=selectedFiringMode===_0x3886dc(0x25c),_0x573941=()=>p1JustFiredSingle,_0x4f3925=_0x21231a=>{p1JustFiredSingle=_0x21231a;},_0x5f3252=!![]);else(_0x1319f2===_0x3886dc(0x17b)||_0x1319f2===_0x3886dc(0x29f))&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2NeedsRespawnAfterCapture&&((!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer2ShipCaptured)&&(_0x5f4efa=ship2,_0x3d6e6e=player2IsDualShipActive,_0x1319f2==='ai_p2'&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?(_0x13be30=aiShip2LastShotTime,_0x56caf8=_0x2af034=>{aiShip2LastShotTime=_0x2af034,player2LastShotTime=_0x2af034;}):(_0x13be30=player2LastShotTime,_0x56caf8=_0x4c0d67=>{player2LastShotTime=_0x4c0d67;}),_0x549427=_0x52a69d=>{player2ShotsFired+=_0x52a69d;},isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3886dc(0x1ab)?_0x2a54e0=![]:(_0x2a54e0=selectedFiringMode===_0x3886dc(0x25c),_0x573941=()=>p2JustFiredSingle,_0x4f3925=_0x5369cf=>{p2JustFiredSingle=_0x5369cf;}),_0x5f3252=!![]));}else{if(ship&&playerLives>0x0&&!isShipCaptured){_0x5f4efa=ship,_0x3d6e6e=isDualShipActive;if(isTwoPlayerMode&&selectedGameMode===_0x3886dc(0x29a)){if(currentPlayer===0x1){_0x13be30=player1LastShotTime,_0x56caf8=_0x322350=>{player1LastShotTime=_0x322350;},_0x549427=_0x33973d=>{player1ShotsFired+=_0x33973d;},_0x2a54e0=selectedFiringMode===_0x3886dc(0x25c),_0x573941=()=>p1JustFiredSingle,_0x4f3925=_0x2ae660=>{p1JustFiredSingle=_0x2ae660;};if(!_0xc7d553)_0xc7d553=_0x3886dc(0x194);}else{isPlayerTwoAI?(_0x13be30=aiLastShotTime,_0x56caf8=_0x5a1952=>{aiLastShotTime=_0x5a1952,player2LastShotTime=_0x5a1952;}):(_0x13be30=player2LastShotTime,_0x56caf8=_0x112a15=>{player2LastShotTime=_0x112a15;});_0x549427=_0x320dcd=>{player2ShotsFired+=_0x320dcd;};if(isPlayerTwoAI){_0x2a54e0=![];if(!_0xc7d553)_0xc7d553='ai_p2';}else{_0x2a54e0=selectedFiringMode===_0x3886dc(0x25c);connectedGamepadIndexP2===null&&connectedGamepadIndex!==null?(_0x573941=()=>p1JustFiredSingle,_0x4f3925=_0x908179=>{p1JustFiredSingle=_0x908179;}):(_0x573941=()=>p2JustFiredSingle,_0x4f3925=_0x2f08a0=>{p2JustFiredSingle=_0x2f08a0;});if(!_0xc7d553)_0xc7d553='player2';}}}else{_0x13be30=player1LastShotTime,_0x56caf8=_0x2bd143=>{player1LastShotTime=_0x2bd143;},_0x549427=_0x83e6ca=>{player1ShotsFired+=_0x83e6ca;},_0x2a54e0=selectedFiringMode===_0x3886dc(0x25c),_0x573941=()=>p1JustFiredSingle,_0x4f3925=_0x53dc2f=>{p1JustFiredSingle=_0x53dc2f;};if(!_0xc7d553)_0xc7d553=_0x3886dc(0x194);}_0x5f3252=!![];}}_0x1319f2===null&&!isManualControl&&ship&&playerLives>0x0&&!isShipCaptured&&!isShowingCaptureMessage&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x3886dc(0x279))&&(_0x5f4efa=ship,_0x3d6e6e=isDualShipActive,_0x13be30=aiLastShotTime,_0x56caf8=_0x8a79fb=>{aiLastShotTime=_0x8a79fb;},_0x549427=_0xee12ff=>{player1ShotsFired+=_0xee12ff;},_0x2a54e0=![],_0x5f3252=!![],_0xc7d553='ai');if(!_0x5f3252||!_0x5f4efa)return![];if(_0x2a54e0){if(_0x467d5c){if(_0x3031b4-_0x13be30<SHOOT_COOLDOWN)return![];}else{let _0x3afe6f=![];if(_0xc7d553===_0x3886dc(0x194)||!isTwoPlayerMode&&_0xc7d553===_0x3886dc(0x194))_0x3afe6f=keyboardP1ShootDown||connectedGamepadIndex!==null&&navigator[_0x3886dc(0x259)]()?.[connectedGamepadIndex]?.[_0x3886dc(0x2c2)][PS5_BUTTON_CROSS]?.[_0x3886dc(0x1b1)];else{if(_0xc7d553===_0x3886dc(0x17b)&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)_0x3afe6f=keyboardP2ShootDown||connectedGamepadIndexP2!==null&&navigator[_0x3886dc(0x259)]()?.[connectedGamepadIndexP2]?.[_0x3886dc(0x2c2)][PS5_BUTTON_CROSS]?.['pressed'];else connectedGamepadIndex!==null?_0x3afe6f=keyboardP2ShootDown||connectedGamepadIndex!==null&&navigator['getGamepads']()?.[connectedGamepadIndex]?.[_0x3886dc(0x2c2)][PS5_BUTTON_CROSS]?.[_0x3886dc(0x1b1)]:_0x3afe6f=keyboardP2ShootDown;}}if(_0x573941()){if(_0x3afe6f)return![];else _0x4f3925(![]);}if(_0x3031b4-_0x13be30<SHOOT_COOLDOWN)return![];}}else{if(_0x3031b4-_0x13be30<SHOOT_COOLDOWN)return![];}try{const _0x3ef97a=_0x5f4efa['y'];let _0x3c4452=0x0;if(_0x3d6e6e){const _0x1582e1=_0x5f4efa['x']+_0x5f4efa['width']/0x2,_0x33db35=_0x5f4efa['x']+DUAL_SHIP_OFFSET_X+_0x5f4efa[_0x3886dc(0x294)]/0x2,_0x16f37b=_0x1582e1-PLAYER_BULLET_WIDTH/0x2,_0x4d5744=_0x33db35-PLAYER_BULLET_WIDTH/0x2;bullets[_0x3886dc(0x26b)]({'x':_0x16f37b,'y':_0x3ef97a,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0xc7d553}),bullets[_0x3886dc(0x26b)]({'x':_0x4d5744,'y':_0x3ef97a,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0xc7d553}),_0x3c4452=0x2;}else{const _0x31e009=_0x5f4efa['x']+_0x5f4efa[_0x3886dc(0x294)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x31e009,'y':_0x3ef97a,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0xc7d553}),_0x3c4452=0x1;}if(_0x2a54e0&&!_0x467d5c)_0x4f3925(!![]);return playSound(_0x3886dc(0x1d0),![],0.4),_0x549427(_0x3c4452),_0x56caf8(_0x3031b4),!![];}catch(_0x21a2fc){return console[_0x3886dc(0x25a)]('Error\x20creating\x20player\x20bullet(s):',_0x21a2fc),![];}}function handlePlayerInput(){const _0x3e6a80=_0x502888;try{const _0x3e2ad6=Date['now']();let _0x259721=![],_0x363311=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedGameMode===_0x3e6a80(0x29a)&&currentPlayer===0x2&&!isManualControl||!isManualControl&&!isPlayerTwoAI&&!isCoopAIDemoActive){(isCoopAIDemoActive||!isManualControl&&!isPlayerTwoAI&&!isCoopAIDemoActive)&&(leftPressed=![],rightPressed=![]);shootPressed=![],p2ShootPressed=![];return;}let _0x597758=isPaused||!isManualControl||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isTwoPlayerMode&&selectedGameMode===_0x3e6a80(0x279)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage)||isShowingCaptureMessage||showCsBonusScoreMessage||showPerfectMessage||showCsHitsMessage||showCSClearMessage||isCsCompletionDelayActive;const _0xcd20e4=isTwoPlayerMode&&selectedGameMode===_0x3e6a80(0x279)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x3e2ad6<coopPlayersReadyStartTime+0x1f40;let _0x4bccca=(_0xcd20e4||showReadyMessage)&&isTwoPlayerMode&&selectedGameMode==='coop'&&ship1&&player1Lives>0x0;if(_0x597758&&!_0x4bccca){keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],leftPressed=![],rightPressed=![],p2LeftPressed=![],p2RightPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],shootPressed=![],p2ShootPressed=![];return;}let _0x89ef21=0x0;if(isTouchActiveGame&&gameCanvas&&gameCanvas[_0x3e6a80(0x294)]>0x0){const _0x46799b=gameCanvas[_0x3e6a80(0x25f)](),_0x105ad9=gameCanvas[_0x3e6a80(0x294)]/_0x46799b['width'];_0x89ef21=(touchCurrentX-_0x46799b[_0x3e6a80(0x196)])*_0x105ad9;}let _0x279595=![],_0xf569c5=![],_0x45dbc0=![],_0x54243b=![],_0x219a13=![],_0x6cfae3=![];if(!_0x597758||_0x4bccca){if(connectedGamepadIndex!==null){const _0x469c31=navigator[_0x3e6a80(0x259)]();if(_0x469c31?.[connectedGamepadIndex]){const _0x2cffb2=_0x469c31[connectedGamepadIndex],_0xf4cb4b=processSingleController(_0x2cffb2,previousGameButtonStates);_0x279595=_0xf4cb4b[_0x3e6a80(0x196)],_0xf569c5=_0xf4cb4b['right'],_0x45dbc0=_0xf4cb4b[_0x3e6a80(0x18f)],previousGameButtonStates=_0xf4cb4b[_0x3e6a80(0x209)]['slice']();if(_0xf4cb4b[_0x3e6a80(0x22c)]&&!isShowingCaptureMessage&&!generalMessageBlockingInput){togglePause();return;}if(_0xf4cb4b[_0x3e6a80(0x2a0)]&&!isShowingCaptureMessage&&!generalMessageBlockingInput){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x3e6a80(0x254)]>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates[_0x3e6a80(0x254)]>0x0)previousGameButtonStates=[];}if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3e6a80(0x1ab))){if(isTwoPlayerMode&&connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex){const _0x22b77d=navigator['getGamepads']();if(_0x22b77d?.[connectedGamepadIndexP2]){const _0x155523=_0x22b77d[connectedGamepadIndexP2],_0x42445b=processSingleController(_0x155523,previousGameButtonStatesP2);_0x54243b=_0x42445b[_0x3e6a80(0x196)],_0x219a13=_0x42445b[_0x3e6a80(0x1bc)],_0x6cfae3=_0x42445b['shoot'],previousGameButtonStatesP2=_0x42445b[_0x3e6a80(0x209)]['slice']();}else{if(previousGameButtonStatesP2[_0x3e6a80(0x254)]>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2[_0x3e6a80(0x254)]>0x0)previousGameButtonStatesP2=[];}}}const _0x369d86=p1FireInputWasDown;!_0x597758||_0x4bccca?p1FireInputWasDown=keyboardP1ShootDown||_0x45dbc0:p1FireInputWasDown=![];let _0x2e5a6b=![];if(!_0x597758||_0x4bccca){if(!(isPlayerTwoAI&&(selectedOnePlayerGameVariant===_0x3e6a80(0x1ab)||selectedGameMode==='normal'))){_0x2e5a6b=p2FireInputWasDown;if(isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x2&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)p2FireInputWasDown=keyboardP2ShootDown||_0x6cfae3;else connectedGamepadIndex!==null?p2FireInputWasDown=keyboardP2ShootDown||_0x45dbc0:p2FireInputWasDown=keyboardP2ShootDown;}else isTwoPlayerMode&&selectedGameMode===_0x3e6a80(0x279)&&!isPlayerTwoAI&&(p2FireInputWasDown=keyboardP2ShootDown||_0x6cfae3);}else p2FireInputWasDown=![];}else p2FireInputWasDown=![];if(selectedFiringMode===_0x3e6a80(0x25c)&&!isTouchActiveGame){if(isTwoPlayerMode&&selectedGameMode===_0x3e6a80(0x279)){if(_0x369d86&&!p1FireInputWasDown)p1JustFiredSingle=![];if(!isPlayerTwoAI&&_0x2e5a6b&&!p2FireInputWasDown)p2JustFiredSingle=![];}else{if(isTwoPlayerMode&&selectedGameMode===_0x3e6a80(0x29a)){if(currentPlayer===0x1&&_0x369d86&&!p1FireInputWasDown)p1JustFiredSingle=![];else{if(currentPlayer===0x2&&!isPlayerTwoAI){let _0x434729=_0x2e5a6b,_0x17ec41=p2FireInputWasDown;connectedGamepadIndexP2===null&&connectedGamepadIndex!==null&&(_0x434729=_0x369d86,_0x17ec41=p1FireInputWasDown);if(_0x434729&&!_0x17ec41){if(connectedGamepadIndexP2===null&&connectedGamepadIndex!==null)p1JustFiredSingle=![];else p2JustFiredSingle=![];}}}}else{if(_0x369d86&&!p1FireInputWasDown)p1JustFiredSingle=![];}}}leftPressed=![],rightPressed=![],p2LeftPressed=![],p2RightPressed=![];let _0x51ac4b=![];if(!_0x597758||_0x4bccca){if(isTouchActiveGame&&gameCanvas){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x296c06=ship1['width']+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x301bee=_0x89ef21-_0x296c06/0x2;_0x301bee=Math['max'](0x0,Math[_0x3e6a80(0x287)](gameCanvas[_0x3e6a80(0x294)]-_0x296c06,_0x301bee)),ship1['x']=_0x301bee,ship1['targetX']=_0x301bee,_0x51ac4b=!![];}}else{const _0x5cc4cc=ship,_0xa270e7=playerLives,_0x14b03f=isShipCaptured,_0x46bdd3=isDualShipActive,_0x2e896f=!isPlayerTwoAI||isPlayerTwoAI&&selectedGameMode===_0x3e6a80(0x29a)&&currentPlayer===0x1;if(_0x5cc4cc&&_0xa270e7>0x0&&!_0x14b03f&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&_0x2e896f){const _0x57269a=_0x5cc4cc[_0x3e6a80(0x294)]+(_0x46bdd3?DUAL_SHIP_OFFSET_X:0x0);let _0x1bce4f=_0x89ef21-_0x57269a/0x2;_0x1bce4f=Math['max'](0x0,Math['min'](gameCanvas[_0x3e6a80(0x294)]-_0x57269a,_0x1bce4f)),_0x5cc4cc['x']=_0x1bce4f,_0x5cc4cc['targetX']=_0x1bce4f,_0x51ac4b=!![];}}}if(!_0x51ac4b){if(isTwoPlayerMode&&selectedGameMode===_0x3e6a80(0x279)){const _0x34794b=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;_0x34794b&&(leftPressed=keyboardP1LeftDown||_0x279595,rightPressed=keyboardP1RightDown||_0xf569c5);if(!isPlayerTwoAI){const _0xf31024=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;_0xf31024&&(p2LeftPressed=keyboardP2LeftDown||_0x54243b,p2RightPressed=keyboardP2RightDown||_0x219a13);}}else{const _0x2a61a3=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0x2a61a3){if(currentPlayer===0x1||!isTwoPlayerMode)leftPressed=keyboardP1LeftDown||_0x279595,rightPressed=keyboardP1RightDown||_0xf569c5;else{if(currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0x3e6a80(0x29a)){if(connectedGamepadIndexP2!==null)leftPressed=keyboardP2LeftDown||_0x54243b,rightPressed=keyboardP2RightDown||_0x219a13;else connectedGamepadIndex!==null?(leftPressed=keyboardP2LeftDown||_0x279595,rightPressed=keyboardP2RightDown||_0xf569c5):(leftPressed=keyboardP2LeftDown,rightPressed=keyboardP2RightDown);}}}}}}if(!_0x597758){if(isTwoPlayerMode&&selectedGameMode===_0x3e6a80(0x279)){const _0x1bc650=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;if(_0x1bc650){(isTouchActiveGame&&selectedFiringMode==='rapid'||p1FireInputWasDown)&&(_0x259721=!![]);if(isShowingCaptureMessage&&isPlayer1ShipCaptured)_0x259721=![];}if(!isPlayerTwoAI){const _0x3228dd=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;if(_0x3228dd){p2FireInputWasDown&&(_0x363311=!![]);if(isShowingCaptureMessage&&isPlayer2ShipCaptured)_0x363311=![];}}}else{const _0x1d364c=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isShowingIntro;if(_0x1d364c){let _0x3bb047=![];if(currentPlayer===0x1||!isTwoPlayerMode)_0x3bb047=p1FireInputWasDown;else currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode==='normal'&&(_0x3bb047=p2FireInputWasDown);(isTouchActiveGame&&selectedFiringMode===_0x3e6a80(0x1d5)||_0x3bb047)&&(_0x259721=!![]);(gameJustStarted||isShowingIntro&&level===0x1)&&(!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode===_0x3e6a80(0x29a)&&currentPlayer===0x1)&&(!(keyboardP1ShootDown||_0x45dbc0)&&!(isTouchActiveGame&&selectedFiringMode===_0x3e6a80(0x25c))&&(_0x259721=![]));if(isShowingCaptureMessage&&isShipCaptured)_0x259721=![];}}}shootPressed=_0x259721,p2ShootPressed=_0x363311,isManualControl&&(isTwoPlayerMode&&selectedGameMode===_0x3e6a80(0x279)?(shootPressed&&firePlayerBullet(_0x3e6a80(0x194),isTouchActiveGame&&selectedFiringMode==='single'),!isPlayerTwoAI&&p2ShootPressed&&firePlayerBullet(_0x3e6a80(0x17b),![])):shootPressed&&(!(isPlayerTwoAI&&selectedGameMode===_0x3e6a80(0x29a)&&currentPlayer===0x2)&&firePlayerBullet(currentPlayer===0x1||!isTwoPlayerMode?'player1':'player2',isTouchActiveGame&&selectedFiringMode===_0x3e6a80(0x25c))));}catch(_0x11e185){console[_0x3e6a80(0x25a)](_0x3e6a80(0x227),_0x11e185),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![];}}let aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;const AI_DODGE_COMMIT_DURATION=0xa0,AI_DODGE_MOVEMENT_SMOOTHING_FACTOR=0.015,AI_NORMAL_MOVEMENT_SMOOTHING_FACTOR=0.04,AI_CAPTURE_DIVE_SHOOT_STOP_DURATION_MS=0xbb8;function _0xc312(){const _0x3a84da=[',\x20isFullGrid:\x20',').\x20Skipping.','tripleAttackSound','scheduledStartTime','clearRect','velocityY','1P_VS_AI_COOP','startSound',',\x20index\x20','366255pZXFJS','naturalWidth','stack','pressed','restore','3616724TsMDWr','.\x20Removing.','dir','Error\x20cloning\x20entrance\x20flight\x201\x20wave\x20pattern:','attacking','.\x20Switching\x20to\x20moving_to_grid.','capturedShipY','atan2','toString','right','attackFormationOffsetX','Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20','diving_to_capture_position','center','captureStartTime','CRITICAL:\x20Full\x20grid\x20wave\x20pattern\x20(index\x200)\x20is\x20missing\x20or\x20empty.','slice','complete','Full\x20Grid:\x20Squadron\x20','CRITICAL:\x20Entrance\x20flight\x202\x20wave\x20pattern\x20(index\x201)\x20is\x20missing\x20or\x20empty.','green','!\x20Returning.','enemies','resetAllMessages','filter','tintProgress','Error\x20updating\x20explosions:',',\x20isCS:\x20','playerShootSound','capturePrepareTimeout',')\x20during\x20shift:','state','capturing','rapid','show_results','add','hasFired','naturalHeight','\x20(Path\x20','fillRect','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','\x22\x20not\x20found!\x20Aborting\x20CS.','rotationDirection','capturedShipX','shouldTryShoot','\x20invalid!\x20Skipping.','rotation','in_grid','pathT','velocityX','CS_LoopAttack_BR','num','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','\x20for\x20SHARED\x20path\x20','\x20(no\x20attack\x20path):','following_bezier_path','targetGridY',',\x20Idx\x20','Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','Error\x20checking/awarding\x20extra\x20life:','has','Invalid\x20CS\x20Bezier\x20segment\x20','CS_HorizontalFlyByL','\x20has\x20invalid\x20enemy\x20data.','[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20','now','gameOverSound','levelUpSound','Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','\x20not\x20found.','Error\x20in\x20triggerGridFiring:','splice','Entrance\x20Wave:\x20Path\x20','attackGroupId','GAME\x20EXIT','round','dualShipSound','butterflyHitSound','\x20(state:\x20','squadronId','squadronEnemyIndex','\x20returning\x20without\x20target\x20coords.\x20Recalculating.','type','rotationCompleted','newButtonStates','\x20is\x20empty\x20or\x20invalid.','Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20','gridBackgroundSound','sqrt','sort','string','Error\x20cloning\x20full\x20grid\x20wave\x20pattern:','pathSegmentIndex','\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20','LOGO','playerNum','grey','speed','\x20off\x20screen:','shipCapturedSound','Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20','substring','collisions','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20or\x20with\x20no\x20definition.\x20Level\x20','Error\x20calculating\x20final\x20bezier\x20point\x20for\x20','red','map','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','captureMessageStartTime','attackPathSegmentIndex','Error\x20getting\x20grid\x20pos\x20for\x20','\x20missing\x20SHARED\x20path\x20','returnLogDone','landedTime','Error\x20handling\x20player\x20input:','entrancePathId','hiScoreSound','\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.','CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.','pause','landed','csPerfectSound','shipObj','\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22','targetGridX','showing_capture_message','\x20after\x20missing\x20path','305jZrQAB','10444553lYFTvG','enemyShootSound','.\x20Enemy\x20','CRITICAL:\x20waveEntrancePatterns\x20not\x20defined\x20or\x20insufficient\x20for\x20wave\x20generation.','8680086zXnNuh','CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20',',\x20def\x20length:\x20','keys','\x20invalid!\x20Skipping\x20squadron.','full_grid','destroyed','generateWaveDefinition','\x20points.\x20Health\x20was:\x20','lastFiredTime','minDistance','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','height','EASY','CS_LoopAttack_BL','Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:','desiredTargetX','returning','CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','fillStyle','currentLives','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','moving_to_grid','function','hasFiredPostLanding','blue','max','length','justReturned','Error\x20in\x20triggerImmediateCaptureDive:','capturedShipLastFiredTime','CS3_DiveLoopL_Sharp','getGamepads','error','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20','single','entrance_flight_1','sign','getBoundingClientRect','sin','NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20','Error\x20in\x20renderGame:','totalRotation','generateAttackPath','explosionSound','canFireThisDive','Error\x20starting\x20attack\x20for\x20','floor','clear','\x20after\x20bad\x20next\x20segment','push','bossHit1Sound','lostLifeSound','FATAL\x20Error\x20in\x20moveEntities:','Invalid\x20start\x20segment\x20for\x20path\x20','entrance_flight_2','Enemy\x20','\x20at\x20[','includes','targetPlayerId','entranceSound','main','\x20after\x20bezier\x20error','boss_loop_right','coop','Entrance\x20Wave:\x20Squadron\x20','size','1P_VS_AI_NORMAL','captureDiveInitiationTime','\x20in\x20moving_to_grid','gridCol','Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20','Error\x20cloning\x20entrance\x20flight\x202\x20wave\x20pattern:','Error\x20in\x20findAndDetachEnemy:','alpha','FATAL\x20Error\x20in\x20moveEntities\x20(Restored\x20Conditions):','\x20path\x20index\x20','isDamaged','min','\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.','gridRow','hasOwnProperty','initialCaptureAnimationY','isPreparingForImmediateCapture','diveStartTime','\x20for\x20squadron\x20','capturedShipDimensions','targetX','8KxeNFc','.\x20Transitioning.','highScoreHolderId','width','CO-OP\x20GAME','attackType','HIGH\x20SCORE','total','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','normal','\x20for\x20path\x20','Boss\x20','warn','some','ai_p2','back','Error\x20getting\x20target\x20grid\x20pos\x20for\x20','duration','extraLifeSound','originalVy','stringify','Error\x20in\x20aiControl:','enemy-cs-','.\x20Skipping.','CS_LoopAttack_TL','resetWave','save','NORMAL','CRITICAL:\x20Entrance\x20flight\x201\x20wave\x20pattern\x20(index\x200)\x20is\x20missing\x20or\x20empty.','1250790GRsMIj','following_entrance_path','parse','isDodging','pathId','1\x20PLAYER','targetY','30px\x20Arial','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','2839896gWrchB','captureAnimationRotation','[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','Invalid\x20next\x20CS\x20Bezier\x20segment\x20','\x20after\x20invalid\x20path\x20index','isArray','find','2UP','CS_HorizontalFlyByR','abs','particles','buttons','chosenDodgeDir',')!\x20Returning.','20px\x20\x27Press\x20Start\x202P\x27','stopAllGameSounds','random','27378XOqVTt','number','preparing_attack','!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!','preparing_capture','\x22\x20for\x20enemy\x20in\x20squadron\x20','\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.','\x20in\x20returning','Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22','dual','isFromAbove','challenging_stage','thresholdsMet','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','every','player2','CRITICAL:\x20Required\x20CS\x20path\x20\x22','1UP','object','captureSound','\x20at\x20end\x20of\x20normal\x20path\x20','[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','indexOf','enemy-grid-','\x20(invalid\x20attack\x20index):','\x20attacking,\x20index\x20','creationTime','Invalid\x20next\x20Normal\x20Bezier\x20segment\x20','completed','2\x20PLAYER','predictedCollisions','forEach','Error\x20updating\x20floating\x20scores:','attackPathSegments','cos','shoot','switch_player','bossGalagaDiveSound','\x20attacking\x20without\x20path!\x20Returning.','undefined','player1','Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20','left','health',')\x20for\x20','\x20attacking,\x20invalid\x20segment\x20','\x20after\x20attack:','START\x20GAME','attackPathT','waveUpSound','Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20','),\x20index\x20','hasCapturedShip','lifetime','drawImage','playerId','playerShip'];_0xc312=function(){return _0x3a84da;};return _0xc312();}function aiControl(){const _0x4bdd8c=_0x502888;try{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4bdd8c(0x1ab))return;let _0x4ec78c=null,_0x12b8fd=null,_0x5bc5b0=![],_0x4fc657=![],_0x23ceb2=![],_0x181409=0x0,_0x4b5021='ai',_0xdef776=![];if(isPlayerTwoAI&&selectedGameMode===_0x4bdd8c(0x29a)&&currentPlayer===0x2){if(!ship||playerLives<=0x0||isShipCaptured||isShowingPlayerGameOverMessage){if(ship)ship[_0x4bdd8c(0x290)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x4bdd8c(0x294)]/0x2:0x0;return;}_0x4ec78c=ship,_0x12b8fd=smoothedShipX,_0x5bc5b0=isDualShipActive,_0x4fc657=isShipCaptured,_0x23ceb2=isInvincible,_0x181409=playerLives,_0x4b5021=_0x4bdd8c(0x29f),_0xdef776=!![];}else{if(!isManualControl&&!isPlayerTwoAI){if(playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage){if(ship)ship['targetX']=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x4bdd8c(0x294)]/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}if(isShipCaptured||isShowingCaptureMessage){if(ship)ship[_0x4bdd8c(0x290)]=ship['x'];if(smoothedShipX!==undefined&&ship)smoothedShipX=ship['x'];aiIsCurrentlyTargetingCaptureBoss=![];return;}_0x4ec78c=ship,_0x12b8fd=smoothedShipX,_0x5bc5b0=isDualShipActive,_0x4fc657=isShipCaptured,_0x23ceb2=isInvincible,_0x181409=playerLives,_0x4b5021='ai';}else{if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}if(_0x12b8fd===undefined&&_0x4ec78c){_0x12b8fd=_0x4ec78c['x'];if(_0xdef776||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0x12b8fd;}else{if(_0x12b8fd===undefined&&!_0x4ec78c){_0x12b8fd=gameCanvas?gameCanvas[_0x4bdd8c(0x294)]/0x2:0x0;if(_0xdef776||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0x12b8fd;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}const _0x526df1=Date[_0x4bdd8c(0x1f5)](),_0x568641=gameCanvas[_0x4bdd8c(0x294)],_0x38fd17=gameCanvas[_0x4bdd8c(0x245)];let _0x3efb78=_0x4ec78c[_0x4bdd8c(0x294)];if(_0x5bc5b0)_0x3efb78=DUAL_SHIP_OFFSET_X+_0x4ec78c['width'];const _0x33d241=_0x4ec78c['x']+_0x3efb78/0x2,_0x4c6775=_0x4ec78c['y'],_0x72b601=_0x568641/0x2,_0xdf9915=_0x72b601-_0x3efb78/0x2,_0x444024=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive||isShowingCaptureMessage||isShowingIntro;let _0x5b704f=_0x12b8fd,_0x4f6a90=![],_0x249d95=![],_0x9c7fd4=_0x12b8fd,_0x269873=null,_0x92ce66=![];aiIsCurrentlyTargetingCaptureBoss=![];let _0x1a2dfa=![],_0x537a06=![];if(aiNeedsStabilization&&!_0x444024){aiStabilizationEndTime=_0x526df1+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],_0x12b8fd=_0x4ec78c['x'];if(_0xdef776||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0x12b8fd;}_0x526df1>aiDodgeCommitEndTime&&(aiPreviousDodgeDirection=0x0);if(isChallengingStage&&_0x4ec78c){_0x249d95=![],_0x92ce66=![],aiIsCurrentlyTargetingCaptureBoss=![],_0x1a2dfa=![],_0x537a06=![];let _0x108367=null,_0x2736ac=-Infinity;for(const _0x3ad20c of enemies){if(!_0x3ad20c||_0x3ad20c['y']<-_0x3ad20c[_0x4bdd8c(0x245)]||_0x3ad20c['y']>_0x38fd17+_0x3ad20c[_0x4bdd8c(0x245)]||_0x3ad20c['x']<-_0x3ad20c[_0x4bdd8c(0x294)]||_0x3ad20c['x']>_0x568641+_0x3ad20c[_0x4bdd8c(0x294)])continue;const _0x375a67=_0x3ad20c['x']+_0x3ad20c[_0x4bdd8c(0x294)]/0x2,_0x3990d3=_0x3ad20c['y']+_0x3ad20c[_0x4bdd8c(0x245)]/0x2,_0x4d4837=Math[_0x4bdd8c(0x253)](0x0,(_0x4ec78c['y']-_0x3990d3)/PLAYER_BULLET_SPEED),_0x2739f8=_0x375a67+(_0x3ad20c['velocityX']||0x0)*_0x4d4837;let _0x10f1c9=_0x2739f8-_0x3efb78/0x2;_0x10f1c9=Math[_0x4bdd8c(0x253)](AI_EDGE_BUFFER,Math[_0x4bdd8c(0x287)](_0x568641-_0x3efb78-AI_EDGE_BUFFER,_0x10f1c9));let _0x5e4ce4=(_0x38fd17-_0x3990d3)*0x2;_0x5e4ce4-=Math['abs'](_0x33d241-_0x2739f8)*0.5,_0x5e4ce4>_0x2736ac&&(_0x2736ac=_0x5e4ce4,_0x108367=_0x3ad20c,_0x5b704f=_0x10f1c9);}_0x269873=_0x108367,_0x269873?_0x4f6a90=!![]:(_0x5b704f=_0xdf9915,_0x4f6a90=![]),aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;}else{if(!_0x23ceb2&&!_0x444024){const _0x27e5e2=Math[_0x4bdd8c(0x287)](0x1,level/0xa),_0x7376e=SHIP_HEIGHT*(8.5+3.5*_0x27e5e2),_0x606a1e=0x1f4+0x12c*_0x27e5e2,_0x478076=0x12c+0x96*_0x27e5e2,_0x415ced=_0x3efb78*(0.9+0.5*_0x27e5e2),_0x547fbd=SHIP_HEIGHT*(0.7+0.4*_0x27e5e2),_0x58ce2c=_0x3efb78*(1.8+0.8*_0x27e5e2);let _0x4e373b=[];for(const _0x21950e of enemyBullets){if(_0x21950e['y']<_0x4ec78c['y']+_0x7376e&&_0x21950e['y']+_0x21950e[_0x4bdd8c(0x245)]>_0x4ec78c['y']-SHIP_HEIGHT*0x2){const _0x48de7b=(_0x4ec78c['y']-_0x21950e['y'])/(_0x21950e['vy']||0.01),_0xbaf60e=Math['min'](_0x606a1e/16.67,Math['max'](0x0,_0x48de7b/16.67*1.25));let _0x5d6dae=_0x21950e['x']+_0x21950e['vx']*_0xbaf60e,_0x4aa23a=_0x21950e['y']+_0x21950e['vy']*_0xbaf60e,_0x11eefb=![],_0x5240d4=_0x547fbd,_0x4f6d4a=_0x415ced;const _0x1fb736=Math[_0x4bdd8c(0x20d)](_0x21950e['vx']*_0x21950e['vx']+_0x21950e['vy']*_0x21950e['vy'])||BASE_ENEMY_BULLET_SPEED;_0x21950e['vy']>_0x1fb736*0.35&&Math['abs'](_0x21950e['x']+_0x21950e[_0x4bdd8c(0x294)]/0x2-(_0x4ec78c['x']+_0x3efb78/0x2))<_0x3efb78*1.1&&(_0x11eefb=!![],_0x5240d4=_0x547fbd*2.6,_0x4f6d4a*=1.5),_0x4e373b[_0x4bdd8c(0x26b)]({'x':_0x5d6dae-_0x21950e[_0x4bdd8c(0x294)]/0x2-_0x4f6d4a,'y':_0x4aa23a-_0x21950e[_0x4bdd8c(0x245)]/0x2-_0x5240d4,'width':_0x21950e[_0x4bdd8c(0x294)]+0x2*_0x4f6d4a,'height':_0x21950e[_0x4bdd8c(0x245)]+0x2*_0x5240d4,'isCritical':!![],'isFromAbove':_0x11eefb,'originalVy':_0x21950e['vy']});}}for(const _0x5256a9 of enemies){if(_0x5256a9&&(_0x5256a9[_0x4bdd8c(0x1d3)]===_0x4bdd8c(0x1b7)||_0x5256a9['state']===_0x4bdd8c(0x1c0))&&_0x5256a9['y']<_0x4ec78c['y']+_0x7376e*0.9&&_0x5256a9['y']+_0x5256a9[_0x4bdd8c(0x245)]>_0x4ec78c['y']-SHIP_HEIGHT*3.5){const _0x4a857c=_0x478076/16.67;let _0x37af56=_0x5256a9['x']+_0x5256a9[_0x4bdd8c(0x1e5)]*_0x4a857c,_0x153388=_0x5256a9['y']+_0x5256a9[_0x4bdd8c(0x1aa)]*_0x4a857c;_0x4e373b[_0x4bdd8c(0x26b)]({'x':_0x37af56-_0x415ced*0.95,'y':_0x153388-_0x547fbd*0.95,'width':_0x5256a9[_0x4bdd8c(0x294)]+0x2*_0x415ced*0.95,'height':_0x5256a9[_0x4bdd8c(0x245)]+0x2*_0x547fbd*0.95,'isCritical':!![],'isFromAbove':![],'originalVy':_0x5256a9[_0x4bdd8c(0x1aa)]});}}_0x4e373b[_0x4bdd8c(0x20e)]((_0x26c7f3,_0x5431f8)=>(_0x5431f8['isFromAbove']?0x1:-0x1)-(_0x26c7f3[_0x4bdd8c(0x176)]?0x1:-0x1)||(_0x5431f8[_0x4bdd8c(0x2a4)]||0x0)-(_0x26c7f3[_0x4bdd8c(0x2a4)]||0x0));if(_0x4e373b[_0x4bdd8c(0x254)]>0x0){_0x249d95=!![];let _0x14e441={'x':_0x12b8fd,'score':-Infinity,'dir':0x0,'minDistance':Infinity,'collisions':Infinity};const _0x3d138a={'x':_0x12b8fd,'y':_0x4ec78c['y'],'width':_0x3efb78,'height':_0x4ec78c[_0x4bdd8c(0x245)]};let _0x3d1363=0x0,_0x3c2e82=0x0,_0x1bbbdc=Infinity;for(const _0x5187d9 of _0x4e373b){checkCollision(_0x3d138a,_0x5187d9)&&(_0x3d1363++,_0x3c2e82-=level===0x1?0xdac:0xbb8,_0x5187d9[_0x4bdd8c(0x176)]&&(_0x3c2e82-=level===0x1?0x3a98:0x32c8));const _0x52c3eb=_0x5187d9['x']+_0x5187d9['width']/0x2,_0x2f7534=_0x3d138a['x']+_0x3d138a[_0x4bdd8c(0x294)]/0x2,_0x3a253b=Math[_0x4bdd8c(0x2c0)](_0x2f7534-_0x52c3eb)-(_0x3d138a[_0x4bdd8c(0x294)]/0x2+_0x5187d9[_0x4bdd8c(0x294)]/0x2);_0x3a253b<_0x1bbbdc&&(_0x1bbbdc=_0x3a253b);}_0x14e441={'x':_0x12b8fd,'score':_0x3c2e82,'dir':0x0,'minDistance':_0x1bbbdc,'collisions':_0x3d1363};const _0x22bef1=_0x58ce2c,_0x2d5c5f=0x3;for(let _0x1c6c67=0x0;_0x1c6c67<_0x2d5c5f;_0x1c6c67++){for(const _0x3eb333 of[-0x1,0x1]){let _0x406fed=_0x12b8fd+_0x3eb333*_0x22bef1*(_0x1c6c67+0x1);_0x406fed=Math[_0x4bdd8c(0x253)](AI_EDGE_BUFFER*1.2,Math[_0x4bdd8c(0x287)](_0x568641-_0x3efb78-AI_EDGE_BUFFER*1.2,_0x406fed));const _0x516fb2={'x':_0x406fed,'y':_0x4ec78c['y'],'width':_0x3efb78,'height':_0x4ec78c['height']};let _0x54b983=0x0,_0x129333=0x0,_0x2d3515=Infinity;for(const _0x1a28ff of _0x4e373b){checkCollision(_0x516fb2,_0x1a28ff)&&(_0x54b983++,_0x129333-=level===0x1?0xdac:0xbb8,_0x1a28ff[_0x4bdd8c(0x176)]&&(_0x129333-=level===0x1?0x3a98:0x32c8));const _0x3eaa32=_0x1a28ff['x']+_0x1a28ff[_0x4bdd8c(0x294)]/0x2,_0x39bfe9=_0x516fb2['x']+_0x516fb2['width']/0x2,_0x2c2b18=Math[_0x4bdd8c(0x2c0)](_0x39bfe9-_0x3eaa32)-(_0x516fb2[_0x4bdd8c(0x294)]/0x2+_0x1a28ff['width']/0x2);_0x2c2b18<_0x2d3515&&(_0x2d3515=_0x2c2b18);}_0x129333-=Math[_0x4bdd8c(0x2c0)](_0x406fed-_0xdf9915)*0.05,_0x129333-=_0x1c6c67*0x2;_0x54b983===0x0&&_0x3eb333===aiPreviousDodgeDirection&&aiPreviousDodgeDirection!==0x0&&(_0x129333+=0x64);if(_0x54b983<_0x14e441[_0x4bdd8c(0x21b)])_0x14e441={'x':_0x406fed,'score':_0x129333,'dir':_0x3eb333,'minDistance':_0x2d3515,'collisions':_0x54b983};else{if(_0x54b983===_0x14e441['collisions']){if(_0x2d3515>_0x14e441['minDistance'])_0x14e441={'x':_0x406fed,'score':_0x129333,'dir':_0x3eb333,'minDistance':_0x2d3515,'collisions':_0x54b983};else _0x2d3515===_0x14e441[_0x4bdd8c(0x243)]&&Math['abs'](_0x406fed-_0xdf9915)<Math[_0x4bdd8c(0x2c0)](_0x14e441['x']-_0xdf9915)&&(_0x14e441={'x':_0x406fed,'score':_0x129333,'dir':_0x3eb333,'minDistance':_0x2d3515,'collisions':_0x54b983});}}}}_0x9c7fd4=_0x14e441['x'],_0x5b704f=_0x9c7fd4;if(_0x14e441[_0x4bdd8c(0x1b5)]!==0x0&&_0x14e441[_0x4bdd8c(0x21b)]===0x0)(aiPreviousDodgeDirection!==_0x14e441['dir']||_0x14e441[_0x4bdd8c(0x243)]<_0x3efb78*0.5)&&(aiPreviousDodgeDirection=_0x14e441[_0x4bdd8c(0x1b5)],aiDodgeCommitEndTime=_0x526df1+AI_DODGE_COMMIT_DURATION+(level===0x1?0x3c:0x0));else _0x14e441['collisions']>0x0?(aiPreviousDodgeDirection=_0x14e441[_0x4bdd8c(0x1b5)],aiDodgeCommitEndTime=_0x526df1+AI_DODGE_COMMIT_DURATION/0x2):(aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0);}else aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;}else aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;}if(_0x249d95&&!isChallengingStage){_0x92ce66=![],aiIsCurrentlyTargetingCaptureBoss=![],_0x1a2dfa=![],_0x537a06=![],_0x269873=null;const _0x40c349=_0x5b704f<AI_EDGE_BUFFER*2.5||_0x5b704f>_0x568641-_0x3efb78-AI_EDGE_BUFFER*2.5;if(Math['abs'](_0x5b704f-_0x12b8fd)>_0x3efb78*0.1&&!_0x40c349){let _0x2552ed=null,_0x222f2a=-Infinity;for(const _0x146b65 of enemies){if(!_0x146b65)continue;let _0x2f2ea7=(_0x38fd17-_0x146b65['y'])*1.5-Math[_0x4bdd8c(0x2c0)](_0x146b65['x']+_0x146b65[_0x4bdd8c(0x294)]/0x2-_0x33d241)*0x2;if(_0x146b65[_0x4bdd8c(0x1d3)]===_0x4bdd8c(0x1b7)||_0x146b65[_0x4bdd8c(0x1d3)]===_0x4bdd8c(0x1c0))_0x2f2ea7+=0x258;if(_0x146b65[_0x4bdd8c(0x207)]===ENEMY3_TYPE&&_0x146b65[_0x4bdd8c(0x1a0)])_0x2f2ea7+=0x4b0;else{if(_0x146b65[_0x4bdd8c(0x207)]===ENEMY3_TYPE&&_0x146b65[_0x4bdd8c(0x286)])_0x2f2ea7+=0x190;else{if(_0x146b65[_0x4bdd8c(0x207)]===ENEMY3_TYPE)_0x2f2ea7-=0xc8;}}_0x2f2ea7>_0x222f2a&&(_0x222f2a=_0x2f2ea7,_0x2552ed=_0x146b65);}_0x269873=_0x2552ed;}_0x4f6a90=_0x269873!==null;}else{if(!isChallengingStage){if(fallingShips[_0x4bdd8c(0x254)]>0x0&&!_0x4fc657&&!isWaitingForRespawn&&!_0x5bc5b0){let _0x587a29=null,_0x31045d=Infinity;for(const _0x44eb4a of fallingShips){let _0x3da219=!isManualControl&&!isPlayerTwoAI&&_0x44eb4a[_0x4bdd8c(0x274)]===_0x4bdd8c(0x194)||_0xdef776&&_0x44eb4a[_0x4bdd8c(0x274)]===String(currentPlayer);if(!_0x587a29&&!_0x3da219&&_0x44eb4a[_0x4bdd8c(0x274)]===null)_0x3da219=!![];if(_0x44eb4a&&!_0x44eb4a['landed']&&_0x3da219){const _0x1ed1f5=Math[_0x4bdd8c(0x2c0)](_0x44eb4a['x']+_0x44eb4a[_0x4bdd8c(0x294)]/0x2-_0x33d241)+Math[_0x4bdd8c(0x2c0)](_0x44eb4a['y']-_0x4ec78c['y']);_0x1ed1f5<_0x31045d&&(_0x31045d=_0x1ed1f5,_0x587a29=_0x44eb4a);}}_0x587a29&&(_0x537a06=!![],_0x5b704f=_0x587a29['x']+_0x587a29[_0x4bdd8c(0x294)]/0x2-_0x3efb78/0x2,_0x4f6a90=![],_0x269873=null);}if(!_0x537a06){const _0x57f855=enemies[_0x4bdd8c(0x2bd)](_0xb0ff09=>_0xb0ff09['id']===capturingBossId&&_0xb0ff09[_0x4bdd8c(0x207)]===ENEMY3_TYPE),_0x5dba0e=captureBeamActive&&_0x57f855&&_0x57f855[_0x4bdd8c(0x1d3)]===_0x4bdd8c(0x1d4)&&!_0x4fc657;if(_0x5dba0e){const _0x15f5e4=_0x181409>0x1&&!_0x5bc5b0;if(_0x15f5e4){aiIsCurrentlyTargetingCaptureBoss=!![],_0x92ce66=!![];const _0x493886=_0x57f855['x']+_0x57f855[_0x4bdd8c(0x294)]/0x2;_0x5b704f=_0x493886-_0x3efb78/0x2,_0x4f6a90=![],_0x269873=null;}}}if(!_0x537a06&&!_0x92ce66&&!aiIsCurrentlyTargetingCaptureBoss){const _0x1e8cd6=enemies[_0x4bdd8c(0x2bd)](_0x500162=>_0x500162['type']===ENEMY3_TYPE&&_0x500162[_0x4bdd8c(0x1a0)]&&_0x500162[_0x4bdd8c(0x221)]>0x0&&_0x526df1-_0x500162['captureMessageStartTime']>0xbb8);if(_0x1e8cd6)_0x1a2dfa=!![],_0x269873=_0x1e8cd6,_0x5b704f=_0x1e8cd6['x']+_0x1e8cd6[_0x4bdd8c(0x294)]/0x2-_0x3efb78/0x2,_0x4f6a90=!![];else{_0x269873=null;let _0xeda2bf=-Infinity;for(const _0x563065 of enemies){if(!_0x563065)continue;let _0x29e3aa=0x0;const _0x55925e=_0x563065['x']+_0x563065['width']/0x2,_0x137ee7=_0x55925e-_0x33d241,_0x2264b6=_0x4c6775-(_0x563065['y']+_0x563065[_0x4bdd8c(0x245)]);if(_0x2264b6<0x0&&_0x563065[_0x4bdd8c(0x1d3)]!==_0x4bdd8c(0x1b7)&&_0x563065[_0x4bdd8c(0x1d3)]!==_0x4bdd8c(0x1c0)&&_0x563065[_0x4bdd8c(0x1d3)]!==_0x4bdd8c(0x1eb))continue;_0x29e3aa=(_0x38fd17-_0x563065['y'])*0x2-Math['abs'](_0x137ee7)*0x3-_0x2264b6;if(_0x563065[_0x4bdd8c(0x1d3)]==='attacking'||_0x563065[_0x4bdd8c(0x1d3)]===_0x4bdd8c(0x1c0))_0x29e3aa+=0xbb8;if(_0x563065[_0x4bdd8c(0x207)]===ENEMY3_TYPE&&!_0x563065[_0x4bdd8c(0x286)]&&!_0x563065[_0x4bdd8c(0x1a0)])_0x29e3aa-=0x5dc;if(_0x563065['type']===ENEMY3_TYPE&&_0x563065[_0x4bdd8c(0x286)]&&!_0x563065['hasCapturedShip'])_0x29e3aa+=0x3e8;if(_0x563065['type']===ENEMY3_TYPE&&_0x563065[_0x4bdd8c(0x1a0)])_0x29e3aa+=0x1388;_0x29e3aa>_0xeda2bf&&(_0xeda2bf=_0x29e3aa,_0x269873=_0x563065);}if(_0x269873){const _0x4529e9=_0x269873['x']+_0x269873[_0x4bdd8c(0x294)]/0x2;_0x5b704f=_0x4529e9-_0x3efb78/0x2;const _0x13b1ec=1.8;let _0x5edcda=_0x269873[_0x4bdd8c(0x1d3)]===_0x4bdd8c(0x1e3)||_0x269873[_0x4bdd8c(0x1d3)]==='preparing_capture'?_0x3efb78*(GRID_SHOOT_ALIGNMENT_FACTOR*_0x13b1ec):_0x3efb78*(FINAL_SHOOT_ALIGNMENT_THRESHOLD*_0x13b1ec);Math[_0x4bdd8c(0x2c0)](_0x33d241-_0x4529e9)<_0x5edcda&&(_0x4f6a90=!![]);}else _0x5b704f=_0xdf9915,_0x4f6a90=![];}}}}let _0xd04ad0;isChallengingStage?_0xd04ad0=CS_SHOOTING_MOVE_FRACTION:_0xd04ad0=_0x249d95?AI_DODGE_MOVEMENT_SMOOTHING_FACTOR:AI_NORMAL_MOVEMENT_SMOOTHING_FACTOR;if(_0x4ec78c){_0x12b8fd+=(_0x5b704f-_0x12b8fd)*_0xd04ad0,_0x4ec78c['targetX']=_0x12b8fd;if(_0xdef776||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0x12b8fd;}if(_0x4f6a90&&!isShowingIntro){let _0x340dbb=!![];if(!isChallengingStage){(_0x92ce66||_0x537a06)&&(_0x340dbb=![]);if(_0x269873){if(_0x269873[_0x4bdd8c(0x207)]===ENEMY3_TYPE&&!_0x269873[_0x4bdd8c(0x1a0)]){const _0x88ccf4=isEntrancePhaseActive||[_0x4bdd8c(0x1e3),_0x4bdd8c(0x170),_0x4bdd8c(0x1c0),_0x4bdd8c(0x1d4)][_0x4bdd8c(0x273)](_0x269873[_0x4bdd8c(0x1d3)]),_0x20c179=_0x269873['id']===capturingBossId&&aiIsCurrentlyTargetingCaptureBoss;_0x88ccf4&&!_0x20c179&&!_0x1a2dfa&&(_0x340dbb=![]);}_0x269873[_0x4bdd8c(0x207)]===ENEMY3_TYPE&&_0x269873[_0x4bdd8c(0x27d)]&&_0x269873['captureDiveInitiationTime']>0x0&&_0x526df1-_0x269873[_0x4bdd8c(0x27d)]<AI_CAPTURE_DIVE_SHOOT_STOP_DURATION_MS&&(_0x340dbb=![]);}else _0x340dbb=![];}if(_0x340dbb){if(firePlayerBullet(_0x4b5021,![])){}}}}catch(_0x2c0a01){console[_0x4bdd8c(0x25a)](_0x4bdd8c(0x2a6),_0x2c0a01,_0x2c0a01['stack']);if(ship)ship[_0x4bdd8c(0x290)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x4bdd8c(0x294)]/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];}}let aiCoopP1_PreviousDodgeDirection=0x0,aiCoopP1_DodgeCommitEndTime=0x0,aiCoopP2_PreviousDodgeDirection=0x0,aiCoopP2_DodgeCommitEndTime=0x0;const AI_COOP_DODGE_MOVEMENT_SMOOTHING_FACTOR=0.022;function aiControlCoop(){const _0x306e99=_0x502888;if(!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x306e99(0x1ab))||isPaused||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0){if(ship1)ship1[_0x306e99(0x290)]=ship1['x'];if(ship2)ship2[_0x306e99(0x290)]=ship2['x'];return;}const _0x45c10b=Date[_0x306e99(0x1f5)](),_0x29e3d1=gameCanvas['width'],_0x33372d=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture,_0xcb22db=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture,_0x28c2e0=_0x658333=>{const _0x5d28dc=_0x306e99,_0x3fab0e=_0x658333==='p1'&&isPlayer1ShowingGameOverMessage||_0x658333==='p2'&&isPlayer2ShowingGameOverMessage;return _0x3fab0e||showReadyMessage||isCsCompletionDelayActive||isShowingIntro&&!(level===0x1&&coopPlayersReadyStartTime>0x0&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5d28dc(0x1ab)));};if(_0x33372d&&ship1&&isCoopAIDemoActive){if(smoothedShip1X===undefined)smoothedShip1X=ship1['x'];if(_0x45c10b>aiCoopP1_DodgeCommitEndTime)aiCoopP1_PreviousDodgeDirection=0x0;const _0x577b13=_0x28c2e0('p1');let _0x426c9c,_0x5dae55=null;if(isCoopAIDemoActive){if(isPlayer2ShipCaptured&&capturedBossIdWithMessage)_0x5dae55=capturedBossIdWithMessage;else{if(aiPlayerActivelySeekingCaptureById===_0x306e99(0x17b)||aiPlayerActivelySeekingCaptureById==='ai_p2')_0x5dae55=capturingBossId;}}_0x426c9c=calculateAIDesiredState(ship1,smoothedShip1X,player1IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer1Invincible,isPlayer1ShipCaptured,isPlayer1WaitingForRespawn,_0x45c10b,_0x29e3d1,_0x577b13,'p1',_0x5dae55,aiCoopP1_PreviousDodgeDirection),aiShip1TargetEnemy=_0x426c9c['targetEnemyForAI'];let _0x577ed5=_0x426c9c['isDodging']?AI_COOP_DODGE_MOVEMENT_SMOOTHING_FACTOR:AI_SMOOTHING_FACTOR_MOVE;smoothedShip1X+=(_0x426c9c[_0x306e99(0x249)]-smoothedShip1X)*_0x577ed5,ship1[_0x306e99(0x290)]=smoothedShip1X;if(_0x426c9c[_0x306e99(0x167)]!==undefined&&_0x426c9c[_0x306e99(0x18a)]===0x0){if(_0x426c9c[_0x306e99(0x167)]!==0x0&&_0x426c9c[_0x306e99(0x167)]!==aiCoopP1_PreviousDodgeDirection)aiCoopP1_PreviousDodgeDirection=_0x426c9c['chosenDodgeDir'],aiCoopP1_DodgeCommitEndTime=_0x45c10b+AI_DODGE_COMMIT_DURATION;else _0x426c9c[_0x306e99(0x167)]===0x0&&(aiCoopP1_PreviousDodgeDirection=0x0);}else _0x426c9c[_0x306e99(0x18a)]>0x0&&(aiCoopP1_PreviousDodgeDirection=0x0);_0x426c9c[_0x306e99(0x1e0)]&&!(isShowingCaptureMessage&&isPlayer1ShipCaptured)&&fireCoopAIBullet(ship1,player1IsDualShipActive,_0x306e99(0x194));}if(_0xcb22db&&ship2&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')){if(smoothedShip2X===undefined)smoothedShip2X=ship2['x'];if(_0x45c10b>aiCoopP2_DodgeCommitEndTime)aiCoopP2_PreviousDodgeDirection=0x0;const _0x5a309f=_0x28c2e0('p2'),_0x324315=isCoopAIDemoActive?_0x306e99(0x17b):_0x306e99(0x29f);let _0x4aeabf,_0x37b909=null;if(isCoopAIDemoActive){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage)_0x37b909=capturedBossIdWithMessage;else{if(aiPlayerActivelySeekingCaptureById===_0x306e99(0x194))_0x37b909=capturingBossId;}}_0x4aeabf=calculateAIDesiredState(ship2,smoothedShip2X,player2IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer2Invincible,isPlayer2ShipCaptured,isPlayer2WaitingForRespawn,_0x45c10b,_0x29e3d1,_0x5a309f,_0x324315,_0x37b909,aiCoopP2_PreviousDodgeDirection),aiShip2TargetEnemy=_0x4aeabf['targetEnemyForAI'];let _0x32561b=_0x4aeabf[_0x306e99(0x2b1)]?AI_COOP_DODGE_MOVEMENT_SMOOTHING_FACTOR:AI_SMOOTHING_FACTOR_MOVE;smoothedShip2X+=(_0x4aeabf[_0x306e99(0x249)]-smoothedShip2X)*_0x32561b,ship2['targetX']=smoothedShip2X;if(_0x4aeabf['chosenDodgeDir']!==undefined&&_0x4aeabf['predictedCollisions']===0x0){if(_0x4aeabf['chosenDodgeDir']!==0x0&&_0x4aeabf[_0x306e99(0x167)]!==aiCoopP2_PreviousDodgeDirection)aiCoopP2_PreviousDodgeDirection=_0x4aeabf[_0x306e99(0x167)],aiCoopP2_DodgeCommitEndTime=_0x45c10b+AI_DODGE_COMMIT_DURATION;else _0x4aeabf[_0x306e99(0x167)]===0x0&&(aiCoopP2_PreviousDodgeDirection=0x0);}else _0x4aeabf[_0x306e99(0x18a)]>0x0&&(aiCoopP2_PreviousDodgeDirection=0x0);_0x4aeabf[_0x306e99(0x1e0)]&&!(isShowingCaptureMessage&&isPlayer2ShipCaptured)&&fireCoopAIBullet(ship2,player2IsDualShipActive,_0x324315);}}function fireCoopAIBullet(_0x1cfedc,_0x293ff1,_0xb0b3c8){if(!_0x1cfedc)return![];return firePlayerBullet(_0xb0b3c8,![]);}function calculateAIDesiredState(_0x10f3fb,_0x452e57,_0x4a5ba2,_0x3cb2fb,_0x3fe2b9,_0x127eec,_0x48cdd9,_0x27173f,_0x39628e,_0x599bf2,_0x37d4a9,_0x24f7d0,_0x9acd24,_0x4efb9d=null,_0x256125=0x0){const _0xa2dc23=_0x502888;let _0x20ad3a=_0x452e57,_0x4af60d=![],_0x32b781=null,_0x182442=![],_0x1dfc6f=![],_0x47b6ce=![],_0x24f753=![],_0x4e05d9=![],_0x1986e4=0x0,_0x52a1e5=0x0;const _0x850a81=0xbb8;isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&_0x599bf2<coopAICaptureDiveAnticipationEndTime&&(_0x4af60d=![]);isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&_0x599bf2>=coopAICaptureDiveAnticipationEndTime&&(coopAICaptureDiveAnticipationActive=![]);const _0x5cdef0=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xa2dc23(0x1ab),_0x282fb5=gameCanvas['height'],_0x1b4139=_0x10f3fb[_0xa2dc23(0x294)]+(_0x4a5ba2?DUAL_SHIP_OFFSET_X:0x0),_0xc8f19f=_0x10f3fb['x']+_0x1b4139/0x2,_0xf7b19c=_0x10f3fb['y'],_0x29af7f=_0x9acd24==='p1'?player1Lives:_0x9acd24==='ai_p2'||_0x9acd24===_0xa2dc23(0x17b)?player2Lives:0x0,_0x123868=_0x29af7f>0x1&&!_0x4a5ba2&&!_0x27173f;let _0xa1c367=gameCanvas[_0xa2dc23(0x294)]/0x2;const _0x35527c=isShowingIntro||isShowingCoopPlayersReady,_0xccd217=_0x5cdef0&&_0x35527c&&!(isChallengingStage&&isEntrancePhaseActive),_0x2a4d45=_0x5cdef0&&(_0x9acd24==='p1'&&player1Lives>0x0&&player2Lives<=0x0||(_0x9acd24===_0xa2dc23(0x29f)||_0x9acd24==='player2')&&player2Lives>0x0&&player1Lives<=0x0);if(_0xccd217&&_0x2a4d45)_0xa1c367=gameCanvas['width']/0x2;else{if(_0x9acd24==='p1')_0xa1c367=gameCanvas[_0xa2dc23(0x294)]*0.25+Math[_0xa2dc23(0x260)](_0x599bf2/(AI_WIGGLE_PERIOD*1.1))*(AI_WIGGLE_AMPLITUDE*0.8);else(_0x9acd24===_0xa2dc23(0x29f)||_0x9acd24==='player2')&&(_0xa1c367=gameCanvas['width']*0.75+Math['cos'](_0x599bf2/(AI_WIGGLE_PERIOD*0.9))*(AI_WIGGLE_AMPLITUDE*0.8));}let _0x290402=_0xa1c367-_0x1b4139/0x2;if(_0x24f7d0||_0x27173f||_0x39628e||_0x9acd24==='p1'&&player1NeedsRespawnAfterCapture||(_0x9acd24===_0xa2dc23(0x29f)||_0x9acd24===_0xa2dc23(0x17b))&&player2NeedsRespawnAfterCapture)return _0x20ad3a=_0xccd217&&_0x2a4d45?_0x290402:_0x10f3fb['x'],{'desiredTargetX':_0x20ad3a,'shouldTryShoot':![],'targetEnemyForAI':null,'chosenDodgeDir':0x0,'isDodging':![],'predictedCollisions':0x0};const _0x11975c=_0x3cb2fb[_0xa2dc23(0x2bd)](_0x54380e=>_0x54380e['id']===capturingBossId&&_0x54380e[_0xa2dc23(0x207)]===ENEMY3_TYPE);let _0x8fc1ad=_0x452e57;if(!isChallengingStage&&!_0x48cdd9){const _0x2c7668=SHIP_HEIGHT*0x9,_0x58c9c7=0x226,_0x41f2eb=0x15e,_0x3e49af=_0x1b4139*0.6,_0x5291c5=SHIP_HEIGHT*0.4,_0x45f384=_0x1b4139*0.6,_0x221875=SHIP_HEIGHT*0.6;let _0x8c8777=[];for(const _0xbd2add of _0x3fe2b9){if(_0xbd2add['y']<_0x10f3fb['y']+_0x2c7668&&_0xbd2add['y']+_0xbd2add[_0xa2dc23(0x245)]>_0x10f3fb['y']-SHIP_HEIGHT*0x3){const _0x57eb96=_0x58c9c7/16.67;let _0x559c7a=_0xbd2add['x']+_0xbd2add['vx']*_0x57eb96,_0x3aea48=_0xbd2add['y']+_0xbd2add['vy']*_0x57eb96,_0x2bc7dd=![],_0x3c59ec=_0x5291c5,_0xf0e463=_0x3e49af;const _0x251053=Math[_0xa2dc23(0x20d)](_0xbd2add['vx']*_0xbd2add['vx']+_0xbd2add['vy']*_0xbd2add['vy'])||BASE_ENEMY_BULLET_SPEED;_0xbd2add['vy']>_0x251053*0.6&&Math[_0xa2dc23(0x2c0)](_0xbd2add['x']+_0xbd2add['width']/0x2-(_0x10f3fb['x']+_0x1b4139/0x2))<_0x1b4139*0.9&&(_0x2bc7dd=!![],_0x3c59ec=_0x5291c5*1.85),_0x8c8777[_0xa2dc23(0x26b)]({'x':_0x559c7a-_0xbd2add[_0xa2dc23(0x294)]/0x2-_0xf0e463,'y':_0x3aea48-_0xbd2add['height']/0x2-_0x3c59ec,'width':_0xbd2add[_0xa2dc23(0x294)]+0x2*_0xf0e463,'height':_0xbd2add['height']+0x2*_0x3c59ec,'isCritical':!![],'isFromAbove':_0x2bc7dd});}}for(const _0x1a9553 of _0x3cb2fb){if(_0x1a9553&&(_0x1a9553[_0xa2dc23(0x1d3)]==='attacking'||_0x1a9553[_0xa2dc23(0x1d3)]===_0xa2dc23(0x1c0))&&_0x1a9553['y']<_0x10f3fb['y']+_0x2c7668*0.8&&_0x1a9553['y']+_0x1a9553['height']>_0x10f3fb['y']-SHIP_HEIGHT*3.5){const _0x46fad7=_0x41f2eb/16.67;let _0x3c962d=_0x1a9553['x']+_0x1a9553[_0xa2dc23(0x1e5)]*_0x46fad7,_0x20e8fe=_0x1a9553['y']+_0x1a9553[_0xa2dc23(0x1aa)]*_0x46fad7;_0x8c8777[_0xa2dc23(0x26b)]({'x':_0x3c962d-_0x45f384/0x2,'y':_0x20e8fe-_0x221875/0x2,'width':_0x1a9553[_0xa2dc23(0x294)]+_0x45f384,'height':_0x1a9553[_0xa2dc23(0x245)]+_0x221875,'isCritical':!![],'isFromAbove':![]});}}if(_0x8c8777['length']>0x0){_0x182442=!![];let _0x319ff1=_0x452e57,_0x429383=Infinity,_0x32e66a=-0x1;const _0x514516=[-0x1,0x1];if(_0x256125!==0x0){_0x514516['unshift'](_0x256125);const _0x1ccc85=-_0x256125;if(!_0x514516[_0xa2dc23(0x273)](_0x1ccc85))_0x514516[_0xa2dc23(0x26b)](_0x1ccc85);}const _0x4c985e=[...new Set(_0x514516),0x0];for(const _0x415e41 of _0x4c985e){const _0x3b42a7=_0x415e41===0x0?0x0:_0x1b4139*1.8+Math[_0xa2dc23(0x16b)]()*_0x1b4139*0.8;let _0x43d217=_0x452e57+_0x415e41*_0x3b42a7;_0x43d217=Math[_0xa2dc23(0x253)](AI_EDGE_BUFFER*2.5,Math[_0xa2dc23(0x287)](_0x37d4a9-_0x1b4139-AI_EDGE_BUFFER*2.5,_0x43d217));const _0x2214e9={'x':_0x43d217,'y':_0x10f3fb['y'],'width':_0x1b4139,'height':_0x10f3fb[_0xa2dc23(0x245)]};let _0x5bf724=0x0,_0x37e89a=Infinity;for(const _0x1c84d9 of _0x8c8777){checkCollision(_0x2214e9,_0x1c84d9)&&(_0x5bf724++,_0x1c84d9[_0xa2dc23(0x176)]&&(_0x5bf724+=0x5));const _0x5e917d=_0x1c84d9['x']+_0x1c84d9['width']/0x2,_0xfaf462=_0x2214e9['x']+_0x2214e9[_0xa2dc23(0x294)]/0x2,_0x58a465=Math['abs'](_0xfaf462-_0x5e917d)-(_0x2214e9[_0xa2dc23(0x294)]/0x2+_0x1c84d9[_0xa2dc23(0x294)]/0x2);_0x58a465<_0x37e89a&&(_0x37e89a=_0x58a465);}if(_0x5bf724<_0x429383)_0x429383=_0x5bf724,_0x32e66a=_0x37e89a,_0x319ff1=_0x43d217,_0x1986e4=_0x415e41;else{if(_0x5bf724===_0x429383){if(_0x37e89a>_0x32e66a)_0x32e66a=_0x37e89a,_0x319ff1=_0x43d217,_0x1986e4=_0x415e41;else _0x37e89a===_0x32e66a&&Math['abs'](_0x43d217-_0x290402)<Math[_0xa2dc23(0x2c0)](_0x319ff1-_0x290402)&&(_0x319ff1=_0x43d217,_0x1986e4=_0x415e41);}}}_0x8fc1ad=_0x319ff1,_0x52a1e5=_0x429383;}else _0x256125!==0x0&&_0x599bf2<(_0x9acd24==='p1'?aiCoopP1_DodgeCommitEndTime:aiCoopP2_DodgeCommitEndTime)?(_0x182442=!![],_0x8fc1ad=_0x452e57+_0x256125*(_0x1b4139*0.05),_0x1986e4=_0x256125):_0x1986e4=0x0;}else _0x1986e4=0x0;if(_0x182442){_0x20ad3a=Math['max'](AI_EDGE_BUFFER,Math[_0xa2dc23(0x287)](gameCanvas[_0xa2dc23(0x294)]-_0x1b4139-AI_EDGE_BUFFER,_0x8fc1ad)),_0x1dfc6f=![],_0x47b6ce=![],_0x24f753=![],_0x4e05d9=![],_0x32b781=null;const _0x54c7de=_0x20ad3a<AI_EDGE_BUFFER*0x2||_0x20ad3a>_0x37d4a9-_0x1b4139-AI_EDGE_BUFFER*0x2;if(Math['abs'](_0x20ad3a-_0x452e57)>_0x1b4139*0.1&&!_0x54c7de){let _0xd3c6c2=null,_0x47250e=-Infinity;for(const _0x5a6d88 of _0x3cb2fb){if(!_0x5a6d88)continue;if(_0x4efb9d&&_0x5a6d88['id']===_0x4efb9d)continue;let _0x44fbea=0x0;const _0xfb6a0a=_0x5a6d88['x']+_0x5a6d88[_0xa2dc23(0x294)]/0x2,_0x5c1ef3=_0xfb6a0a-_0xc8f19f,_0x237d6e=_0xf7b19c-(_0x5a6d88['y']+_0x5a6d88[_0xa2dc23(0x245)]);if(_0x237d6e<0x0&&_0x5a6d88[_0xa2dc23(0x1d3)]!==_0xa2dc23(0x1b7)&&_0x5a6d88[_0xa2dc23(0x1d3)]!==_0xa2dc23(0x1c0)&&_0x5a6d88[_0xa2dc23(0x1d3)]!==_0xa2dc23(0x1eb))continue;_0x44fbea=(_0x282fb5-_0x5a6d88['y'])*1.2-Math[_0xa2dc23(0x2c0)](_0x5c1ef3)*2.2-_0x237d6e*0.7;if(_0x5a6d88[_0xa2dc23(0x1d3)]===_0xa2dc23(0x1b7)||_0x5a6d88['state']===_0xa2dc23(0x1c0))_0x44fbea+=0x15e;if(_0x5a6d88['type']===ENEMY3_TYPE&&_0x5a6d88[_0xa2dc23(0x1a0)])_0x44fbea+=0x2bc;else{if(_0x5a6d88['type']===ENEMY3_TYPE&&_0x5a6d88[_0xa2dc23(0x286)])_0x44fbea+=0x12c;else{if(_0x5a6d88['type']===ENEMY3_TYPE)_0x44fbea-=0x96;}}_0x44fbea>_0x47250e&&(_0x47250e=_0x44fbea,_0xd3c6c2=_0x5a6d88);}_0x32b781=_0xd3c6c2;}_0x4af60d=_0x32b781!==null;}else{_0x1dfc6f=![],_0x47b6ce=![],_0x24f753=![],_0x4e05d9=![],_0x32b781=null;if(!_0x4a5ba2){const _0x407863=_0x127eec['find'](_0x534af0=>_0x534af0[_0xa2dc23(0x274)]===_0x9acd24&&!_0x534af0[_0xa2dc23(0x22d)]);_0x407863&&(_0x1dfc6f=!![],_0x20ad3a=_0x407863['x']+_0x407863['width']/0x2-_0x1b4139/0x2,_0x4af60d=![]);}if(!_0x1dfc6f){const _0x368346=captureBeamActive&&_0x11975c&&_0x11975c['state']===_0xa2dc23(0x1d4)&&!_0x27173f;if(_0x123868&&_0x368346){let _0x2d636c=![];if(_0x5cdef0){if(aiPlayerActivelySeekingCaptureById===null||aiPlayerActivelySeekingCaptureById===_0x9acd24){if(aiPlayerActivelySeekingCaptureById===null)aiPlayerActivelySeekingCaptureById=_0x9acd24;_0x2d636c=!![];}}if(_0x2d636c){_0x47b6ce=!![];const _0x54e6c3=_0x11975c['x']+_0x11975c[_0xa2dc23(0x294)]/0x2;_0x20ad3a=_0x54e6c3-_0x1b4139/0x2,_0x4af60d=![],_0x32b781=_0x11975c;}}aiPlayerActivelySeekingCaptureById===_0x9acd24&&!_0x47b6ce&&(aiPlayerActivelySeekingCaptureById=null);}if(!_0x1dfc6f&&!_0x47b6ce){const _0x30f8c3=_0x9acd24==='p1'&&isPlayer2ShipCaptured||(_0x9acd24===_0xa2dc23(0x17b)||_0x9acd24===_0xa2dc23(0x29f))&&isPlayer1ShipCaptured;if(isCoopAIDemoActive&&_0x30f8c3&&capturedBossIdWithMessage){let _0x1707f9=_0x9acd24==='p1'?coopPartner2CapturedTime:coopPartner1CapturedTime;if(_0x599bf2-_0x1707f9>=COOP_AI_SAVE_PARTNER_DELAY_MS||_0x29af7f===0x1){const _0x31641e=_0x3cb2fb[_0xa2dc23(0x2bd)](_0x1a1950=>_0x1a1950['id']===capturedBossIdWithMessage&&_0x1a1950[_0xa2dc23(0x207)]===ENEMY3_TYPE&&_0x1a1950[_0xa2dc23(0x1a0)]);_0x31641e&&(!_0x4efb9d||_0x31641e['id']!==_0x4efb9d)&&(_0x24f753=!![],_0x32b781=_0x31641e,_0x20ad3a=_0x31641e['x']+_0x31641e[_0xa2dc23(0x294)]/0x2-_0x1b4139/0x2,_0x4af60d=!![]);}}}if(!_0x1dfc6f&&!_0x47b6ce&&!_0x24f753){const _0xf4386=_0x3cb2fb[_0xa2dc23(0x2bd)](_0x3220ba=>_0x3220ba[_0xa2dc23(0x207)]===ENEMY3_TYPE&&_0x3220ba[_0xa2dc23(0x1a0)]&&_0x3220ba[_0xa2dc23(0x221)]>0x0&&_0x599bf2-_0x3220ba[_0xa2dc23(0x221)]>0xbb8&&(!_0x5cdef0||_0x5cdef0&&_0x3220ba['id']!==capturedBossIdWithMessage)&&(!_0x11975c||_0x3220ba['id']!==_0x11975c['id'])&&(!_0x4efb9d||_0x3220ba['id']!==_0x4efb9d));if(_0xf4386&&!(isCoopAIDemoActive&&_0xf4386['id']===capturedBossIdWithMessage)&&!(isCoopAIDemoActive&&_0x4efb9d&&_0xf4386['id']===_0x4efb9d))_0x4e05d9=!![],_0x32b781=_0xf4386,_0x20ad3a=_0xf4386['x']+_0xf4386[_0xa2dc23(0x294)]/0x2-_0x1b4139/0x2,_0x4af60d=!(isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&_0x599bf2<coopAICaptureDiveAnticipationEndTime);else{let _0x214052=-Infinity;for(const _0x3a4c55 of _0x3cb2fb){if(!_0x3a4c55)continue;if(_0x4efb9d&&_0x3a4c55['id']===_0x4efb9d)continue;if(_0x11975c&&_0x3a4c55['id']===_0x11975c['id']&&(_0x11975c[_0xa2dc23(0x1d3)]==='preparing_capture'||_0x11975c[_0xa2dc23(0x1d3)]===_0xa2dc23(0x1c0)||_0x11975c['state']===_0xa2dc23(0x1d4)))continue;if(isCoopAIDemoActive&&aiPlayerActivelySeekingCaptureById&&aiPlayerActivelySeekingCaptureById!==_0x9acd24&&_0x11975c&&_0x3a4c55['id']===_0x11975c['id'])continue;if(isCoopAIDemoActive&&capturedBossIdWithMessage&&_0x3a4c55['id']===capturedBossIdWithMessage)continue;if(isCoopAIDemoActive&&capturingBossId&&_0x3a4c55['id']===capturingBossId&&(_0x3a4c55[_0xa2dc23(0x1d3)]===_0xa2dc23(0x170)||_0x3a4c55[_0xa2dc23(0x1d3)]===_0xa2dc23(0x1c0)||_0x3a4c55[_0xa2dc23(0x1d3)]===_0xa2dc23(0x1d4)))continue;let _0x57b2a7=_0x3a4c55['type']===ENEMY3_TYPE&&_0x3a4c55[_0xa2dc23(0x1a0)]&&_0x29af7f<=0x1&&(!_0x5cdef0||_0x5cdef0&&_0x3a4c55['id']!==capturedBossIdWithMessage),_0x4c5978=0x0;const _0x1c0a05=_0x3a4c55['x']+_0x3a4c55['width']/0x2,_0x374cb7=_0x1c0a05-_0xc8f19f,_0x19148a=_0xf7b19c-(_0x3a4c55['y']+_0x3a4c55[_0xa2dc23(0x245)]);if(_0x19148a<0x0&&_0x3a4c55[_0xa2dc23(0x1d3)]!==_0xa2dc23(0x1b7)&&_0x3a4c55[_0xa2dc23(0x1d3)]!==_0xa2dc23(0x1c0)&&_0x3a4c55[_0xa2dc23(0x1d3)]!==_0xa2dc23(0x1eb))continue;let _0xdbf5a5=0x0;if(_0x5cdef0&&!(isCoopAIDemoActive&&aiPlayerActivelySeekingCaptureById&&aiPlayerActivelySeekingCaptureById!==_0x9acd24)){if(_0x9acd24==='p1'&&_0x1c0a05<gameCanvas[_0xa2dc23(0x294)]/0x2)_0xdbf5a5=0x1388;else{if((_0x9acd24===_0xa2dc23(0x29f)||_0x9acd24===_0xa2dc23(0x17b))&&_0x1c0a05>=gameCanvas[_0xa2dc23(0x294)]/0x2)_0xdbf5a5=0x1388;}}_0x4c5978=_0xdbf5a5+(_0x282fb5-_0x3a4c55['y'])*0x2-Math['abs'](_0x374cb7)*0x3-_0x19148a;if(_0x3a4c55['state']===_0xa2dc23(0x1b7)||_0x3a4c55[_0xa2dc23(0x1d3)]==='diving_to_capture_position')_0x4c5978+=0xbb8;if(_0x3a4c55[_0xa2dc23(0x207)]===ENEMY3_TYPE&&!_0x3a4c55[_0xa2dc23(0x286)]&&!_0x3a4c55['hasCapturedShip'])_0x4c5978-=0x5dc;if(_0x3a4c55[_0xa2dc23(0x207)]===ENEMY3_TYPE&&_0x3a4c55['isDamaged']&&!_0x3a4c55[_0xa2dc23(0x1a0)])_0x4c5978+=0x3e8;if(_0x3a4c55[_0xa2dc23(0x207)]===ENEMY3_TYPE&&_0x3a4c55[_0xa2dc23(0x1a0)]){if(!_0x57b2a7)_0x4c5978+=0x1388;else _0x4c5978-=0x2710;}_0x4c5978>_0x214052&&(_0x214052=_0x4c5978,_0x32b781=_0x3a4c55);}if(_0x32b781){_0x20ad3a=_0x32b781['x']+_0x32b781[_0xa2dc23(0x294)]/0x2-_0x1b4139/0x2;const _0xb8fbaf=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xa2dc23(0x1ab)?1.2:0.9;Math['abs'](_0xc8f19f-(_0x32b781['x']+_0x32b781[_0xa2dc23(0x294)]/0x2))<_0x1b4139*_0xb8fbaf&&(_0x4af60d=!(isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&_0x599bf2<coopAICaptureDiveAnticipationEndTime));}else _0x20ad3a=_0x290402,_0x4af60d=![];}}}if(_0x4af60d){(_0x47b6ce||_0x1dfc6f)&&(_0x4af60d=![]);if(_0x32b781){if(_0x32b781['id']===capturingBossId){const _0x49a775=_0x32b781['state']==='preparing_capture'||_0x32b781[_0xa2dc23(0x1d3)]===_0xa2dc23(0x1c0)||_0x32b781[_0xa2dc23(0x1d3)]===_0xa2dc23(0x1d4);if(_0x49a775)_0x4af60d=![];}if(_0x32b781[_0xa2dc23(0x207)]===ENEMY3_TYPE&&!_0x32b781[_0xa2dc23(0x1a0)]){const _0x2380c7=['in_grid',_0xa2dc23(0x170),_0xa2dc23(0x1c0),_0xa2dc23(0x1d4)][_0xa2dc23(0x273)](_0x32b781[_0xa2dc23(0x1d3)])||isEntrancePhaseActive,_0x555b4c=_0x11975c&&_0x32b781['id']===_0x11975c['id']&&aiPlayerActivelySeekingCaptureById===_0x9acd24;_0x2380c7&&!_0x4e05d9&&!_0x24f753&&!_0x555b4c&&(_0x4af60d=![]);}if(_0x4a5ba2&&_0x5cdef0&&_0x32b781[_0xa2dc23(0x207)]===ENEMY3_TYPE&&!_0x32b781[_0xa2dc23(0x1a0)]){const _0x4b0f3b=_0x9acd24==='p1'?isCoopAIDemoActive?'player2':_0xa2dc23(0x29f):'p1';let _0x54fa10=![];_0x4b0f3b==='p1'?_0x54fa10=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1IsDualShipActive:_0x54fa10=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2IsDualShipActive;if(_0x54fa10)_0x4af60d=![];}if(_0x32b781['type']===ENEMY3_TYPE&&_0x32b781[_0xa2dc23(0x1a0)]&&_0x29af7f<=0x1){const _0x137f50=_0x5cdef0&&_0x32b781['id']===capturedBossIdWithMessage&&partnerIsCaptured;if(!_0x137f50&&!_0x4e05d9&&!_0x24f753)_0x4af60d=![];}isCoopAIDemoActive&&_0x4efb9d&&_0x32b781['id']===_0x4efb9d&&(_0x4af60d=![]);}else _0x4af60d=![];isCoopAIDemoActive&&aiPlayerActivelySeekingCaptureById&&aiPlayerActivelySeekingCaptureById!==_0x9acd24&&_0x11975c&&_0x32b781&&_0x32b781['id']===_0x11975c['id']&&(_0x4af60d=![]);if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0xa2dc23(0x1ab)&&_0x9acd24===_0xa2dc23(0x29f)){const _0x1fcd33=isShowingIntro&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x599bf2<coopPlayersReadyStartTime+0x1f40;(_0x1fcd33||isShowingIntro)&&(_0x4af60d=![]);}}return _0x20ad3a=Math[_0xa2dc23(0x253)](AI_EDGE_BUFFER,Math[_0xa2dc23(0x287)](gameCanvas[_0xa2dc23(0x294)]-_0x1b4139-AI_EDGE_BUFFER,_0x20ad3a)),{'desiredTargetX':_0x20ad3a,'shouldTryShoot':_0x4af60d,'targetEnemyForAI':_0x32b781,'chosenDodgeDir':_0x1986e4,'isDodging':_0x182442,'predictedCollisions':_0x52a1e5};}function findAndDetachEnemy(){const _0x38cad3=_0x502888;try{let _0x533cbd=![];isTwoPlayerMode&&selectedGameMode===_0x38cad3(0x279)?_0x533cbd=isPlayer1ShipCaptured||isPlayer2ShipCaptured:_0x533cbd=isShipCaptured;if(!isFullGridWave&&_0x533cbd){const _0x56174b=enemies[_0x38cad3(0x2bd)](_0xeb8983=>_0xeb8983&&_0xeb8983[_0x38cad3(0x207)]===ENEMY3_TYPE&&_0xeb8983[_0x38cad3(0x1a0)]&&_0xeb8983[_0x38cad3(0x1d3)]===_0x38cad3(0x1e3));if(_0x56174b){_0x56174b['justReturned']=!![],_0x56174b['attackType']='normal';const _0x4ce39c=new Set([_0x56174b['id']]);return resetJustReturnedFlags(_0x4ce39c),[_0x56174b];}}if(isEntrancePhaseActive)return null;let _0x5d8735=enemies[_0x38cad3(0x1cc)](_0x2086d2=>_0x2086d2&&_0x2086d2[_0x38cad3(0x1d3)]===_0x38cad3(0x1e3)&&!_0x2086d2[_0x38cad3(0x255)]);if(_0x5d8735[_0x38cad3(0x254)]===0x0){_0x5d8735=enemies[_0x38cad3(0x1cc)](_0x32391b=>_0x32391b&&_0x32391b[_0x38cad3(0x1d3)]===_0x38cad3(0x1e3));if(_0x5d8735['length']===0x0)return null;}if(_0x5d8735[_0x38cad3(0x254)]===0x0)return null;_0x5d8735['sort']((_0x21280d,_0x1834db)=>(_0x1834db['gridRow']||0x0)-(_0x21280d[_0x38cad3(0x289)]||0x0));const _0xc3ca76=_0x5d8735[_0x38cad3(0x254)]<=0x3;let _0x434b43=[];const _0x39b1b7=_0x38cad3(0x29a);gridJustCompleted&&(gridJustCompleted=![]);let _0x4757a7=![];if(level>0x1&&!_0xc3ca76&&_0x5d8735['length']>=0x3){const _0x32b203=_0x5d8735['filter'](_0x2b0b8f=>_0x2b0b8f['type']===ENEMY3_TYPE&&!_0x2b0b8f['hasCapturedShip']);for(const _0x4b4a71 of _0x32b203){const _0x12e64e=_0x5d8735[_0x38cad3(0x2bd)](_0x24faf4=>_0x24faf4[_0x38cad3(0x207)]===ENEMY2_TYPE&&_0x24faf4[_0x38cad3(0x289)]===_0x4b4a71[_0x38cad3(0x289)]&&_0x24faf4[_0x38cad3(0x27f)]===_0x4b4a71['gridCol']-0x1),_0x4a0cf5=_0x5d8735[_0x38cad3(0x2bd)](_0x3b412b=>_0x3b412b[_0x38cad3(0x207)]===ENEMY2_TYPE&&_0x3b412b[_0x38cad3(0x289)]===_0x4b4a71[_0x38cad3(0x289)]&&_0x3b412b['gridCol']===_0x4b4a71[_0x38cad3(0x27f)]+0x1);if(_0x12e64e&&_0x4a0cf5){_0x434b43=[_0x4b4a71,_0x12e64e,_0x4a0cf5],_0x4757a7=!![];break;}}}if(!_0x4757a7&&!_0xc3ca76){const _0x50967d=_0x5d8735['filter'](_0x1ff4e9=>_0x1ff4e9[_0x38cad3(0x207)]===ENEMY1_TYPE),_0x35deeb=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x50967d[_0x38cad3(0x254)]>=0x2&&Math['random']()<_0x35deeb){const _0x1e295e=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x57389b=_0x50967d['length']>=0x3&&Math[_0x38cad3(0x16b)]()<_0x1e295e?0x3:0x2;let _0x4c4693=![];_0x50967d[_0x38cad3(0x20e)](()=>Math[_0x38cad3(0x16b)]()-0.5);for(let _0x5334f1=0x0;_0x5334f1<_0x50967d[_0x38cad3(0x254)];_0x5334f1++){const _0x112fd1=_0x50967d[_0x5334f1];let _0x5042b1=[_0x112fd1];const _0x59eef1=_0x50967d[_0x38cad3(0x1cc)](_0x595bf9=>_0x595bf9['id']!==_0x112fd1['id']&&_0x595bf9[_0x38cad3(0x289)]===_0x112fd1[_0x38cad3(0x289)]);_0x59eef1['sort']((_0x2feac6,_0x24acfa)=>Math['abs'](_0x2feac6[_0x38cad3(0x27f)]-_0x112fd1[_0x38cad3(0x27f)])-Math['abs'](_0x24acfa[_0x38cad3(0x27f)]-_0x112fd1['gridCol']));for(let _0x3df47a=0x0;_0x3df47a<_0x59eef1[_0x38cad3(0x254)]&&_0x5042b1[_0x38cad3(0x254)]<_0x57389b;_0x3df47a++){_0x5042b1[_0x38cad3(0x26b)](_0x59eef1[_0x3df47a]);}if(_0x5042b1[_0x38cad3(0x254)]===_0x57389b){_0x434b43=_0x5042b1,_0x4757a7=!![],_0x4c4693=!![];break;}}!_0x4c4693&&_0x50967d['length']>=_0x57389b&&(_0x434b43=_0x50967d[_0x38cad3(0x1c4)](0x0,_0x57389b),_0x4757a7=!![]);}}if(!_0x4757a7&&!_0xc3ca76){const _0x59656c=_0x5d8735[_0x38cad3(0x1cc)](_0x5cb519=>_0x5cb519[_0x38cad3(0x207)]===ENEMY2_TYPE),_0x1d4e49=0.2;if(_0x59656c['length']>=0x2&&Math[_0x38cad3(0x16b)]()<_0x1d4e49){const _0x4f95d4=0x2;let _0x398cae=![];_0x59656c[_0x38cad3(0x20e)](()=>Math[_0x38cad3(0x16b)]()-0.5);for(let _0x945325=0x0;_0x945325<_0x59656c['length'];_0x945325++){const _0x567e6d=_0x59656c[_0x945325];let _0x33d2a6=[_0x567e6d];const _0x483f9b=_0x59656c[_0x38cad3(0x1cc)](_0x5e4481=>_0x5e4481['id']!==_0x567e6d['id']&&_0x5e4481[_0x38cad3(0x289)]===_0x567e6d[_0x38cad3(0x289)]);_0x483f9b[_0x38cad3(0x20e)]((_0x11f762,_0x3dda56)=>Math[_0x38cad3(0x2c0)](_0x11f762[_0x38cad3(0x27f)]-_0x567e6d['gridCol'])-Math[_0x38cad3(0x2c0)](_0x3dda56[_0x38cad3(0x27f)]-_0x567e6d[_0x38cad3(0x27f)]));for(let _0x18b920=0x0;_0x18b920<_0x483f9b[_0x38cad3(0x254)]&&_0x33d2a6[_0x38cad3(0x254)]<_0x4f95d4;_0x18b920++){_0x33d2a6['push'](_0x483f9b[_0x18b920]);}if(_0x33d2a6['length']===_0x4f95d4){_0x434b43=_0x33d2a6,_0x4757a7=!![],_0x398cae=!![];break;}}!_0x398cae&&_0x59656c[_0x38cad3(0x254)]>=_0x4f95d4&&(_0x434b43=_0x59656c[_0x38cad3(0x1c4)](0x0,_0x4f95d4),_0x4757a7=!![]);}}if(!_0x4757a7&&_0x5d8735[_0x38cad3(0x254)]>0x0){const _0x227434=_0x5d8735[0x0];_0x434b43[_0x38cad3(0x26b)](_0x227434);if(_0x5d8735[_0x38cad3(0x254)]>0x1&&!_0xc3ca76&&Math[_0x38cad3(0x16b)]()<0.2){const _0x1fe0f6=_0x5d8735[_0x38cad3(0x2bd)](_0x471b74=>_0x471b74['id']!==_0x227434['id']&&_0x471b74[_0x38cad3(0x289)]===_0x227434[_0x38cad3(0x289)]&&_0x471b74[_0x38cad3(0x27f)]===_0x227434[_0x38cad3(0x27f)]-0x1),_0x128e16=_0x5d8735[_0x38cad3(0x2bd)](_0x59bb23=>_0x59bb23['id']!==_0x227434['id']&&_0x59bb23[_0x38cad3(0x289)]===_0x227434[_0x38cad3(0x289)]&&_0x59bb23[_0x38cad3(0x27f)]===_0x227434[_0x38cad3(0x27f)]+0x1),_0x5f57c0=_0x1fe0f6||_0x128e16;if(_0x5f57c0){const _0x215fee=_0x227434[_0x38cad3(0x207)]===ENEMY3_TYPE&&_0x5f57c0['type']===ENEMY3_TYPE;!_0x215fee&&_0x434b43[_0x38cad3(0x26b)](_0x5f57c0);}}_0x4757a7=!![];}if(_0x434b43[_0x38cad3(0x254)]>0x0){_0x434b43=_0x434b43[_0x38cad3(0x1cc)](_0x2216e9=>_0x2216e9);if(_0x434b43['length']===0x0)return null;_0x434b43['forEach'](_0x5dbba1=>{const _0x332d17=_0x38cad3;_0x5dbba1&&(_0x5dbba1['justReturned']=!![],_0x5dbba1[_0x332d17(0x296)]=_0x39b1b7);});const _0xb1ebb8=new Set(_0x434b43[_0x38cad3(0x21f)](_0x4e1251=>_0x4e1251['id']));return resetJustReturnedFlags(_0xb1ebb8),_0x434b43;}return null;}catch(_0x46ed29){return console[_0x38cad3(0x25a)](_0x38cad3(0x282),_0x46ed29),null;}}function triggerImmediateCaptureDive(){const _0x9c7032=_0x502888;try{if(isChallengingStage||captureAttemptMadeThisLevel)return;let _0x5329ba=[];isTwoPlayerMode&&selectedGameMode==='coop'?(ship1&&player1Lives>0x1&&!player1IsDualShipActive&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!player1NeedsRespawnAfterCapture&&_0x5329ba[_0x9c7032(0x26b)]({'playerShip':ship1,'playerNum':0x1}),ship2&&player2Lives>0x1&&!player2IsDualShipActive&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!player2NeedsRespawnAfterCapture&&_0x5329ba['push']({'playerShip':ship2,'playerNum':0x2})):ship&&playerLives>0x1&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0x5329ba[_0x9c7032(0x26b)]({'playerShip':ship,'playerNum':currentPlayer});if(_0x5329ba[_0x9c7032(0x254)]===0x0)return;const _0x5ad936=_0x5329ba[Math[_0x9c7032(0x268)](Math[_0x9c7032(0x16b)]()*_0x5329ba[_0x9c7032(0x254)])],_0x164cd2=_0x5ad936[_0x9c7032(0x1a4)],_0x2197f8=enemies[_0x9c7032(0x1cc)](_0x502940=>_0x502940&&_0x502940[_0x9c7032(0x1d3)]==='in_grid'&&_0x502940[_0x9c7032(0x207)]===ENEMY3_TYPE&&!_0x502940[_0x9c7032(0x1a0)]&&!_0x502940['isPreparingForImmediateCapture']);if(_0x2197f8['length']>0x0){const _0x2f2a8a=_0x2197f8[Math['floor'](Math[_0x9c7032(0x16b)]()*_0x2197f8[_0x9c7032(0x254)])],_0x589d57=Date[_0x9c7032(0x1f5)]();_0x2f2a8a[_0x9c7032(0x28c)]=!![],_0x2f2a8a[_0x9c7032(0x255)]=!![],_0x2f2a8a[_0x9c7032(0x27d)]=_0x589d57;const _0x2ca7b8=new Set([_0x2f2a8a['id']]);resetJustReturnedFlags(_0x2ca7b8);const _0x55e04f=_0x164cd2['x']+_0x164cd2[_0x9c7032(0x294)]/0x2,_0x531436=_0x55e04f<gameCanvas[_0x9c7032(0x294)]/0x2?'left':_0x9c7032(0x1bc);let _0x18a062,_0xf40c74;_0x531436===_0x9c7032(0x196)?_0x18a062=gameCanvas[_0x9c7032(0x294)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:_0x18a062=gameCanvas[_0x9c7032(0x294)]*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH;_0xf40c74=gameCanvas[_0x9c7032(0x245)]*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR,_0x2f2a8a[_0x9c7032(0x1d3)]=_0x9c7032(0x170),_0x2f2a8a[_0x9c7032(0x290)]=_0x18a062,_0x2f2a8a[_0x9c7032(0x2b4)]=_0xf40c74,_0x2f2a8a[_0x9c7032(0x28d)]=_0x589d57,playSound(_0x9c7032(0x191),![],0.2);const _0x57d77d=_0x2f2a8a['id'],_0x19af5b=setTimeout(()=>{const _0x180959=_0x9c7032,_0x423f95=enemies[_0x180959(0x2bd)](_0xfc195a=>_0xfc195a?.['id']===_0x57d77d);_0x423f95&&_0x423f95[_0x180959(0x1d3)]===_0x180959(0x170)&&(_0x423f95[_0x180959(0x1d3)]=_0x180959(0x1c0),captureAttemptMadeThisLevel=!![]);if(_0x423f95)_0x423f95[_0x180959(0x1d1)]=null;const _0x153a8e=enemySpawnTimeouts[_0x180959(0x182)](_0x19af5b);if(_0x153a8e>-0x1)enemySpawnTimeouts[_0x180959(0x1fc)](_0x153a8e,0x1);},0x12c);_0x2f2a8a[_0x9c7032(0x1d1)]=_0x19af5b,enemySpawnTimeouts['push'](_0x19af5b);}}catch(_0xe5f157){console[_0x9c7032(0x25a)](_0x9c7032(0x256),_0xe5f157);}}function resetJustReturnedFlags(_0x56589e){const _0x7e054b=_0x502888;enemies[_0x7e054b(0x18b)](_0x11bbca=>{const _0x40213a=_0x7e054b;let _0x2b3ea7=![];if(_0x56589e instanceof Set)_0x2b3ea7=_0x56589e[_0x40213a(0x1f0)](_0x11bbca['id']);else typeof _0x56589e===_0x40213a(0x20f)&&(_0x2b3ea7=_0x11bbca['id']===_0x56589e);_0x11bbca&&_0x11bbca[_0x40213a(0x1d3)]===_0x40213a(0x1e3)&&_0x11bbca['justReturned']&&!_0x2b3ea7&&(_0x11bbca[_0x40213a(0x255)]=![]);});}function updateFloatingScores(){const _0x5b7f07=_0x502888;if(isPaused)return;try{const _0x4b672d=Date[_0x5b7f07(0x1f5)]();floatingScores=floatingScores[_0x5b7f07(0x1cc)](_0x44df95=>_0x4b672d-_0x44df95[_0x5b7f07(0x186)]<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x1de27f){console[_0x5b7f07(0x25a)](_0x5b7f07(0x18c),_0x1de27f),floatingScores=[];}}function updateExplosions(){const _0x5ee69d=_0x502888;if(isPaused)return;try{const _0x149774=Date['now']();for(let _0xe00d2a=explosions[_0x5ee69d(0x254)]-0x1;_0xe00d2a>=0x0;_0xe00d2a--){const _0x3997b6=explosions[_0xe00d2a],_0x4594ae=_0x149774-_0x3997b6[_0x5ee69d(0x186)];if(_0x4594ae>_0x3997b6[_0x5ee69d(0x2a2)]){explosions[_0x5ee69d(0x1fc)](_0xe00d2a,0x1);continue;}_0x3997b6[_0x5ee69d(0x2c1)]['forEach'](_0x4d8d50=>{const _0x135fa7=_0x5ee69d;_0x4d8d50['x']+=_0x4d8d50['vx'],_0x4d8d50['y']+=_0x4d8d50['vy'],_0x4d8d50[_0x135fa7(0x283)]=Math[_0x135fa7(0x253)](0x0,0x1-_0x4594ae/_0x3997b6[_0x135fa7(0x2a2)]*EXPLOSION_FADE_SPEED);});}}catch(_0x5149d1){console[_0x5ee69d(0x25a)](_0x5ee69d(0x1ce),_0x5149d1),explosions=[];}}function moveEntities(_0x233a94=null,_0x1dd65b=null){const _0x1bb725=_0x502888;if(isPaused)return;try{const _0x2a3918=Date[_0x1bb725(0x1f5)](),_0x35ebfa=gameCanvas?gameCanvas[_0x1bb725(0x245)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x567ee0=0xbb8;if(gameCanvas&&!isTouchActiveGame){if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x1bb725(0x279)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x9993a4=ship1[_0x1bb725(0x294)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(leftPressed)ship1['x']-=ship1['speed'];if(rightPressed)ship1['x']+=ship1['speed'];ship1['x']=Math[_0x1bb725(0x253)](0x0,Math[_0x1bb725(0x287)](gameCanvas[_0x1bb725(0x294)]-_0x9993a4,ship1['x'])),ship1[_0x1bb725(0x290)]=ship1['x'];}if(!isPlayerTwoAI&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x302a64=ship2['width']+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(p2LeftPressed)ship2['x']-=ship2[_0x1bb725(0x216)];if(p2RightPressed)ship2['x']+=ship2[_0x1bb725(0x216)];ship2['x']=Math['max'](0x0,Math['min'](gameCanvas[_0x1bb725(0x294)]-_0x302a64,ship2['x'])),ship2[_0x1bb725(0x290)]=ship2['x'];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1){const _0x4b3764=ship[_0x1bb725(0x294)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x13da19=![],_0xd0bc32=![];if(isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1bb725(0x27c)&&currentPlayer===0x1&&isShowingIntro){if(_0x233a94!==null)_0x13da19=_0x233a94;if(_0x1dd65b!==null)_0xd0bc32=_0x1dd65b;}if(_0x13da19||leftPressed)ship['x']-=ship[_0x1bb725(0x216)];if(_0xd0bc32||rightPressed)ship['x']+=ship[_0x1bb725(0x216)];ship['x']=Math[_0x1bb725(0x253)](0x0,Math[_0x1bb725(0x287)](gameCanvas['width']-_0x4b3764,ship['x'])),ship[_0x1bb725(0x290)]=ship['x'];}}}}}if(!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x1bb725(0x29a)&&currentPlayer===0x2||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1bb725(0x1ab)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x1e8838=ship1[_0x1bb725(0x290)]-ship1['x'];let _0x26e06e=ship1[_0x1bb725(0x216)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math['abs'](_0x1e8838)>AI_MOVEMENT_DEADZONE)ship1['x']+=Math[_0x1bb725(0x25e)](_0x1e8838)*Math[_0x1bb725(0x287)](Math[_0x1bb725(0x2c0)](_0x1e8838),_0x26e06e);const _0x56feba=ship1[_0x1bb725(0x294)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship1['x']=Math['max'](0x0,Math[_0x1bb725(0x287)](gameCanvas['width']-_0x56feba,ship1['x']));}if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x1ea8d8=ship2[_0x1bb725(0x290)]-ship2['x'];let _0x2f3233=ship2[_0x1bb725(0x216)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math['abs'](_0x1ea8d8)>AI_MOVEMENT_DEADZONE)ship2['x']+=Math['sign'](_0x1ea8d8)*Math[_0x1bb725(0x287)](Math['abs'](_0x1ea8d8),_0x2f3233);const _0x374d3b=ship2[_0x1bb725(0x294)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship2['x']=Math['max'](0x0,Math[_0x1bb725(0x287)](gameCanvas[_0x1bb725(0x294)]-_0x374d3b,ship2['x']));}}else{if(ship){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){const _0xe0aa02=ship[_0x1bb725(0x290)]-ship['x'];let _0x2c5f35=ship[_0x1bb725(0x216)]*AI_POSITION_MOVE_SPEED_FACTOR;isPlayerTwoAI&&selectedGameMode===_0x1bb725(0x29a)&&currentPlayer===0x2&&(_0x2c5f35=ship[_0x1bb725(0x216)]*(AI_POSITION_MOVE_SPEED_FACTOR*1.15));Math[_0x1bb725(0x2c0)](_0xe0aa02)>AI_MOVEMENT_DEADZONE&&(ship['x']+=Math['sign'](_0xe0aa02)*Math[_0x1bb725(0x287)](Math[_0x1bb725(0x2c0)](_0xe0aa02),_0x2c5f35));const _0x42aca3=ship[_0x1bb725(0x294)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship['x']=Math[_0x1bb725(0x253)](0x0,Math[_0x1bb725(0x287)](gameCanvas[_0x1bb725(0x294)]-_0x42aca3,ship['x']));}}}}if(isTwoPlayerMode&&selectedGameMode===_0x1bb725(0x279)){if(isPlayer1WaitingForRespawn&&_0x2a3918>=player1RespawnTime)isPlayer1WaitingForRespawn=![];if(isPlayer1Invincible&&_0x2a3918>=player1InvincibilityEndTime)isPlayer1Invincible=![];if(isPlayer2WaitingForRespawn&&_0x2a3918>=player2RespawnTime)isPlayer2WaitingForRespawn=![];if(isPlayer2Invincible&&_0x2a3918>=player2InvincibilityEndTime)isPlayer2Invincible=![];}else{if(isWaitingForRespawn&&_0x2a3918>=respawnTime)isWaitingForRespawn=![];if(isInvincible&&_0x2a3918>=invincibilityEndTime)isInvincible=![];}for(let _0x3591d0=bullets[_0x1bb725(0x254)]-0x1;_0x3591d0>=0x0;_0x3591d0--){const _0x1cb41c=bullets[_0x3591d0];if(!_0x1cb41c){bullets[_0x1bb725(0x1fc)](_0x3591d0,0x1);continue;}_0x1cb41c['y']-=_0x1cb41c[_0x1bb725(0x216)];if(_0x1cb41c['y']+PLAYER_BULLET_HEIGHT<0x0){bullets[_0x1bb725(0x1fc)](_0x3591d0,0x1);continue;}for(let _0x31e404=enemies[_0x1bb725(0x254)]-0x1;_0x31e404>=0x0;_0x31e404--){const _0x2075d2=enemies[_0x31e404];if(!_0x2075d2){enemies[_0x1bb725(0x1fc)](_0x31e404,0x1);continue;}const _0xf546b3={'x':_0x2075d2['x'],'y':_0x2075d2['y'],'width':_0x2075d2['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x2075d2[_0x1bb725(0x207)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,'height':_0x2075d2[_0x1bb725(0x207)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x2075d2[_0x1bb725(0x207)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT},_0x4ea516={'x':_0x1cb41c['x'],'y':_0x1cb41c['y'],'width':_0x1cb41c[_0x1bb725(0x294)],'height':_0x1cb41c[_0x1bb725(0x245)]};if(checkCollision(_0x4ea516,_0xf546b3)){bullets[_0x1bb725(0x1fc)](_0x3591d0,0x1);const _0x537637=handleEnemyHit(_0x2075d2,_0x1cb41c[_0x1bb725(0x1a3)]);if(_0x537637[_0x1bb725(0x23f)])enemies['splice'](_0x31e404,0x1);break;}}}for(let _0x3ea0f7=enemyBullets['length']-0x1;_0x3ea0f7>=0x0;_0x3ea0f7--){const _0x5f02a1=enemyBullets[_0x3ea0f7];if(!_0x5f02a1){enemyBullets[_0x1bb725(0x1fc)](_0x3ea0f7,0x1);continue;}_0x5f02a1['x']+=_0x5f02a1['vx'],_0x5f02a1['y']+=_0x5f02a1['vy'],(_0x5f02a1['y']>gameCanvas[_0x1bb725(0x245)]||_0x5f02a1['y']<-ENEMY_BULLET_HEIGHT||_0x5f02a1['x']<-ENEMY_BULLET_WIDTH||_0x5f02a1['x']>gameCanvas['width'])&&enemyBullets[_0x1bb725(0x1fc)](_0x3ea0f7,0x1);}const _0x548a4a=gameCanvas?gameCanvas[_0x1bb725(0x245)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x4b3712=0x2;for(let _0x5aa8f4=fallingShips[_0x1bb725(0x254)]-0x1;_0x5aa8f4>=0x0;_0x5aa8f4--){const _0x4635aa=fallingShips[_0x5aa8f4];if(!_0x4635aa){fallingShips['splice'](_0x5aa8f4,0x1);continue;}let _0x3c8fb7=![];if(!_0x4635aa[_0x1bb725(0x22d)]){_0x4635aa['y']+=FALLING_SHIP_SPEED;if(_0x4635aa['y']>=_0x548a4a){_0x4635aa['y']=_0x548a4a,_0x4635aa[_0x1bb725(0x22d)]=!![],_0x4635aa[_0x1bb725(0x226)]=_0x2a3918;!_0x4635aa[_0x1bb725(0x208)]&&(_0x4635aa['rotation']=0x0,_0x4635aa['rotationCompleted']=!![]);let _0x14a92d=null,_0xf3c8e7=()=>{},_0x26c138=![],_0x5ce44d=![],_0x274654=![],_0x551aec=null;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1bb725(0x1ab)){if(_0x4635aa[_0x1bb725(0x274)]===_0x1bb725(0x194)&&ship1&&player1Lives>0x0)_0x14a92d=ship1,_0x26c138=player1IsDualShipActive,_0xf3c8e7=()=>{player1IsDualShipActive=!![];},_0x274654=!![],_0x551aec=_0x1bb725(0x194);else(_0x4635aa[_0x1bb725(0x274)]===_0x1bb725(0x17b)||_0x4635aa[_0x1bb725(0x274)]===_0x1bb725(0x29f))&&ship2&&player2Lives>0x0&&(_0x14a92d=ship2,_0x26c138=player2IsDualShipActive,_0xf3c8e7=()=>{player2IsDualShipActive=!![];},_0x274654=!![],_0x551aec=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1bb725(0x1ab)?'ai_p2':'player2');}else{if(isTwoPlayerMode&&selectedGameMode===_0x1bb725(0x279)){if(_0x4635aa['targetPlayerId']===_0x1bb725(0x194)&&ship1&&player1Lives>0x0)_0x14a92d=ship1,_0x26c138=player1IsDualShipActive,_0x5ce44d=isPlayer1ShipCaptured,_0xf3c8e7=()=>{player1IsDualShipActive=!![],isPlayer1ShipCaptured=![];},_0x274654=!![],_0x551aec=_0x1bb725(0x194);else _0x4635aa[_0x1bb725(0x274)]===_0x1bb725(0x17b)&&ship2&&player2Lives>0x0&&(_0x14a92d=ship2,_0x26c138=player2IsDualShipActive,_0x5ce44d=isPlayer2ShipCaptured,_0xf3c8e7=()=>{player2IsDualShipActive=!![],isPlayer2ShipCaptured=![];},_0x274654=!![],_0x551aec=_0x1bb725(0x17b));}else ship&&playerLives>0x0&&(_0x14a92d=ship,_0x26c138=isDualShipActive,_0x5ce44d=isShipCaptured,_0xf3c8e7=()=>{isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}isShipCaptured=![];},_0x274654=!![],_0x551aec=isTwoPlayerMode&&selectedGameMode===_0x1bb725(0x29a)?String(currentPlayer):_0x1bb725(0x194));}if(_0x274654&&!_0x26c138){_0xf3c8e7(),playSound(_0x1bb725(0x201),![],0.4);if(_0x5ce44d&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1bb725(0x1ab))){if(_0x551aec===_0x1bb725(0x194)&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x2a3918+INVINCIBILITY_DURATION_MS;else{if(_0x551aec===_0x1bb725(0x17b)&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x2a3918+INVINCIBILITY_DURATION_MS;else playerNumForDocking!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0x2a3918+INVINCIBILITY_DURATION_MS);}}fallingShips[_0x1bb725(0x1fc)](_0x5aa8f4,0x1),_0x3c8fb7=!![];continue;}else{if(_0x274654&&_0x26c138){fallingShips[_0x1bb725(0x1fc)](_0x5aa8f4,0x1),_0x3c8fb7=!![];continue;}else{fallingShips[_0x1bb725(0x1fc)](_0x5aa8f4,0x1),_0x3c8fb7=!![];continue;}}}}if(_0x3c8fb7)continue;const _0x1a782a=_0x2a3918-_0x4635aa['creationTime'];if(_0x1a782a<FALLING_SHIP_FADE_DURATION_MS)_0x4635aa[_0x1bb725(0x1cd)]=Math[_0x1bb725(0x253)](0x0,0x1-_0x1a782a/FALLING_SHIP_FADE_DURATION_MS);else _0x4635aa['tintProgress']=0x0;if(_0x4635aa[_0x1bb725(0x208)])_0x4635aa[_0x1bb725(0x1e2)]=0x0;else{if(!_0x4635aa[_0x1bb725(0x22d)]&&typeof _0x4635aa[_0x1bb725(0x1de)]===_0x1bb725(0x16d)&&typeof FALLING_SHIP_ROTATION_SPEED==='number'&&FALLING_SHIP_ROTATION_SPEED>0x0){const _0x272d81=FALLING_SHIP_ROTATION_SPEED*_0x4635aa[_0x1bb725(0x1de)];_0x4635aa['rotation']+=_0x272d81,_0x4635aa[_0x1bb725(0x263)]+=Math[_0x1bb725(0x2c0)](_0x272d81);if(_0x4635aa[_0x1bb725(0x263)]>=_0x4b3712*0x2*Math['PI'])_0x4635aa['rotation']=0x0,_0x4635aa[_0x1bb725(0x208)]=!![];else{if(_0x4635aa[_0x1bb725(0x1e2)]>Math['PI']*0x2)_0x4635aa[_0x1bb725(0x1e2)]-=Math['PI']*0x2;if(_0x4635aa[_0x1bb725(0x1e2)]<0x0)_0x4635aa[_0x1bb725(0x1e2)]+=Math['PI']*0x2;}}else _0x4635aa[_0x1bb725(0x1e2)]=_0x4635aa[_0x1bb725(0x1e2)]||0x0;}if(!_0x4635aa[_0x1bb725(0x22d)]){let _0xbcd89d=null,_0x5d02ad=()=>{},_0x493050=0x0,_0x548bfe=![],_0x25af7d=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1bb725(0x1ab)){if(_0x4635aa[_0x1bb725(0x274)]===_0x1bb725(0x194)&&ship1&&player1Lives>0x0)_0xbcd89d=ship1,_0x25af7d=player1IsDualShipActive,_0x5d02ad=()=>{if(!_0x25af7d)player1IsDualShipActive=!![];},_0x493050=0x1;else(_0x4635aa[_0x1bb725(0x274)]===_0x1bb725(0x17b)||_0x4635aa[_0x1bb725(0x274)]===_0x1bb725(0x29f))&&ship2&&player2Lives>0x0&&(_0xbcd89d=ship2,_0x25af7d=player2IsDualShipActive,_0x5d02ad=()=>{if(!_0x25af7d)player2IsDualShipActive=!![];},_0x493050=0x2);}else{if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x4635aa[_0x1bb725(0x274)]===_0x1bb725(0x194)&&ship1&&player1Lives>0x0)_0xbcd89d=ship1,_0x548bfe=isPlayer1ShipCaptured,_0x25af7d=player1IsDualShipActive,_0x5d02ad=()=>{if(!_0x25af7d)player1IsDualShipActive=!![];isPlayer1ShipCaptured=![];},_0x493050=0x1;else _0x4635aa[_0x1bb725(0x274)]===_0x1bb725(0x17b)&&ship2&&player2Lives>0x0&&(_0xbcd89d=ship2,_0x548bfe=isPlayer2ShipCaptured,_0x25af7d=player2IsDualShipActive,_0x5d02ad=()=>{if(!_0x25af7d)player2IsDualShipActive=!![];isPlayer2ShipCaptured=![];},_0x493050=0x2);}else ship&&playerLives>0x0&&(_0xbcd89d=ship,_0x548bfe=isShipCaptured,_0x25af7d=isDualShipActive,_0x5d02ad=()=>{if(!_0x25af7d){isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}}isShipCaptured=![];},_0x493050=isTwoPlayerMode&&selectedGameMode===_0x1bb725(0x29a)?currentPlayer:0x1);}if(_0xbcd89d&&!_0x25af7d){const _0x5dde26={'x':_0x4635aa['x'],'y':_0x4635aa['y'],'width':_0x4635aa['width'],'height':_0x4635aa[_0x1bb725(0x245)]},_0x3bae4e={'x':_0xbcd89d['x'],'y':_0xbcd89d['y'],'width':_0xbcd89d[_0x1bb725(0x294)],'height':_0xbcd89d[_0x1bb725(0x245)]};if(checkCollision(_0x5dde26,_0x3bae4e)){_0x5d02ad();if(_0x548bfe&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x1bb725(0x1ab))){playSound('dualShipSound',![],0.4);if(_0x493050===0x1&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x2a3918+INVINCIBILITY_DURATION_MS;else{if(_0x493050===0x2&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x2a3918+INVINCIBILITY_DURATION_MS;else _0x493050!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0x2a3918+INVINCIBILITY_DURATION_MS);}}else playSound(_0x1bb725(0x201),![],0.4);fallingShips['splice'](_0x5aa8f4,0x1);continue;}}}if(!_0x4635aa[_0x1bb725(0x22d)]&&_0x4635aa['y']>=gameCanvas[_0x1bb725(0x245)])fallingShips[_0x1bb725(0x1fc)](_0x5aa8f4,0x1);}let _0x5e684f=0x0;const _0x2656f0=enemies[_0x1bb725(0x29e)](_0x27e663=>_0x27e663?.[_0x1bb725(0x1d3)]==='in_grid'),_0x458129=!isChallengingStage&&!isWaveTransitioning&&_0x2656f0&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x1bb725(0x279)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage));if(_0x458129){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0x1bb725(0x20c),!![],0.1));const _0x2a9e3e=enemies[_0x1bb725(0x1cc)](_0x4e6438=>_0x4e6438?.[_0x1bb725(0x1d3)]===_0x1bb725(0x1e3));if(_0x2a9e3e['length']>0x0){let _0x4ac126=gameCanvas[_0x1bb725(0x294)],_0x431853=0x0;_0x2a9e3e['forEach'](_0xb0dfd2=>{const _0x30f854=_0x1bb725;_0xb0dfd2&&(_0x4ac126=Math[_0x30f854(0x287)](_0x4ac126,_0xb0dfd2['x']),_0x431853=Math[_0x30f854(0x253)](_0x431853,_0xb0dfd2['x']+_0xb0dfd2[_0x30f854(0x294)]));});const _0x812ddb=gameCanvas[_0x1bb725(0x294)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x290822=gameCanvas['width']*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x431853>=_0x290822)gridMoveDirection=-0x1;else{if(gridMoveDirection===-0x1&&_0x4ac126<=_0x812ddb)gridMoveDirection=0x1;}const _0x2d5ae0=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x5e684f=_0x2d5ae0*gridMoveDirection,currentGridOffsetX+=_0x5e684f,enemies[_0x1bb725(0x18b)](_0x1f7db4=>{const _0x470ce8=_0x1bb725;if(_0x1f7db4&&(_0x1f7db4['state']===_0x470ce8(0x24a)||_0x1f7db4[_0x470ce8(0x1d3)]===_0x470ce8(0x1e3)||_0x1f7db4[_0x470ce8(0x1d3)]===_0x470ce8(0x24f)))try{const _0x33986c=_0x1f7db4[_0x470ce8(0x207)]===ENEMY3_TYPE?BOSS_WIDTH:_0x1f7db4[_0x470ce8(0x207)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x312a64,y:_0x1642a1}=getCurrentGridSlotPosition(_0x1f7db4[_0x470ce8(0x289)],_0x1f7db4['gridCol'],_0x33986c);_0x1f7db4['targetGridX']=_0x312a64,_0x1f7db4[_0x470ce8(0x1ec)]=_0x1642a1;}catch(_0x3ba4fe){console[_0x470ce8(0x25a)](_0x470ce8(0x1f8)+_0x1f7db4?.['id']+_0x470ce8(0x203)+_0x1f7db4?.['state']+_0x470ce8(0x1d2),_0x3ba4fe);}});}}else isGridSoundPlaying&&(stopSound('gridBackgroundSound'),isGridSoundPlaying=![]),_0x5e684f=0x0;for(let _0x34e0f4=enemies[_0x1bb725(0x254)]-0x1;_0x34e0f4>=0x0;_0x34e0f4--){let _0x45cf44=enemies[_0x34e0f4];if(!_0x45cf44){enemies[_0x1bb725(0x1fc)](_0x34e0f4,0x1);continue;}const _0x4f12fe=_0x45cf44['id'];if(_0x45cf44['capturePrepareTimeout']&&_0x45cf44[_0x1bb725(0x1d3)]!=='preparing_capture'){clearTimeout(_0x45cf44[_0x1bb725(0x1d1)]);const _0x96f668=enemySpawnTimeouts[_0x1bb725(0x182)](_0x45cf44[_0x1bb725(0x1d1)]);if(_0x96f668>-0x1)enemySpawnTimeouts['splice'](_0x96f668,0x1);_0x45cf44[_0x1bb725(0x1d1)]=null;}const _0x16f33e=_0x45cf44[_0x1bb725(0x207)]===ENEMY3_TYPE?BOSS_WIDTH:_0x45cf44[_0x1bb725(0x207)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x23165e=_0x45cf44['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0x45cf44[_0x1bb725(0x207)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x5b0a7a=_0x45cf44[_0x1bb725(0x1d3)];switch(_0x45cf44[_0x1bb725(0x1d3)]){case _0x1bb725(0x1eb):{let _0x438b71=CS_ENTRANCE_PATH_SPEED;const _0x36e60d=_0x45cf44['pathSpeedMultiplier']||0x1;_0x438b71*=_0x36e60d;if(!isChallengingStage){enemies['splice'](_0x34e0f4,0x1),_0x45cf44=null;break;}let _0x340e1d=challengingStagePaths,_0x118f7c=_0x340e1d[_0x45cf44[_0x1bb725(0x228)]];if(!_0x118f7c||_0x45cf44['pathSegmentIndex']>=_0x118f7c['length']){enemies[_0x1bb725(0x1fc)](_0x34e0f4,0x1),_0x45cf44=null;break;}const _0x3b7479=_0x118f7c[_0x45cf44[_0x1bb725(0x211)]];if(!_0x3b7479||!_0x3b7479['p0']||!_0x3b7479['p1']||!_0x3b7479['p2']||!_0x3b7479['p3']){console['error'](_0x1bb725(0x1f1)+_0x45cf44[_0x1bb725(0x211)]+_0x1bb725(0x29b)+_0x45cf44[_0x1bb725(0x228)]+_0x1bb725(0x237)+_0x45cf44['id']),enemies[_0x1bb725(0x1fc)](_0x34e0f4,0x1),_0x45cf44=null;break;}_0x45cf44[_0x1bb725(0x1e4)]+=_0x438b71;let _0x5d5727,_0xb279b8,_0x4f1648=_0x45cf44['x'],_0x265372=_0x45cf44['y'];if(_0x45cf44[_0x1bb725(0x1e4)]>=0x1){_0x45cf44[_0x1bb725(0x1e4)]=0x0,_0x45cf44[_0x1bb725(0x211)]++;if(_0x45cf44[_0x1bb725(0x211)]>=_0x118f7c[_0x1bb725(0x254)])enemies['splice'](_0x34e0f4,0x1),_0x45cf44=null;else{const _0x5e3a59=_0x118f7c[_0x45cf44['pathSegmentIndex']];_0x5e3a59?.['p0']?(_0x5d5727=_0x5e3a59['p0']['x'],_0xb279b8=_0x5e3a59['p0']['y']):(console[_0x1bb725(0x25a)](_0x1bb725(0x2ba)+_0x45cf44['pathSegmentIndex']+'\x20for\x20path\x20'+_0x45cf44[_0x1bb725(0x228)]+'.\x20Enemy\x20'+_0x4f12fe),enemies['splice'](_0x34e0f4,0x1),_0x45cf44=null);}}else try{_0x5d5727=calculateBezierPoint(_0x45cf44[_0x1bb725(0x1e4)],_0x3b7479['p0']['x'],_0x3b7479['p1']['x'],_0x3b7479['p2']['x'],_0x3b7479['p3']['x']),_0xb279b8=calculateBezierPoint(_0x45cf44['pathT'],_0x3b7479['p0']['y'],_0x3b7479['p1']['y'],_0x3b7479['p2']['y'],_0x3b7479['p3']['y']);}catch(_0xdd72c3){console[_0x1bb725(0x25a)](_0x1bb725(0x20b)+_0x4f12fe+':',_0xdd72c3),enemies[_0x1bb725(0x1fc)](_0x34e0f4,0x1),_0x45cf44=null;}_0x45cf44&&(isNaN(_0x5d5727)||isNaN(_0xb279b8)?(console[_0x1bb725(0x25a)]('NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20'+_0x4f12fe+_0x1bb725(0x1b4)),enemies['splice'](_0x34e0f4,0x1),_0x45cf44=null):(_0x45cf44[_0x1bb725(0x1e5)]=_0x5d5727-_0x4f1648,_0x45cf44[_0x1bb725(0x1aa)]=_0xb279b8-_0x265372,_0x45cf44['x']=_0x5d5727,_0x45cf44['y']=_0xb279b8));break;}case'following_entrance_path':{if(isChallengingStage){enemies[_0x1bb725(0x1fc)](_0x34e0f4,0x1),_0x45cf44=null;break;}let _0x8779b5=normalWaveEntrancePaths,_0xf16fff=_0x8779b5[_0x45cf44[_0x1bb725(0x228)]],_0x1ff125;_0x45cf44[_0x1bb725(0x228)]==='boss_loop_left'||_0x45cf44[_0x1bb725(0x228)]===_0x1bb725(0x278)?_0x1ff125=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x1ff125=NORMAL_ENTRANCE_PATH_SPEED;if(!_0xf16fff){console['warn'](_0x1bb725(0x271)+_0x4f12fe+_0x1bb725(0x224)+_0x45cf44['entrancePathId']+_0x1bb725(0x1b8));try{_0x45cf44[_0x1bb725(0x231)]=_0x45cf44[_0x1bb725(0x231)]??gameCanvas[_0x1bb725(0x294)]/0x2,_0x45cf44['targetGridY']=_0x45cf44['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x269e0a){console['error'](_0x1bb725(0x223)+_0x4f12fe+_0x1bb725(0x233),_0x269e0a),_0x45cf44[_0x1bb725(0x231)]=gameCanvas[_0x1bb725(0x294)]/0x2,_0x45cf44[_0x1bb725(0x1ec)]=ENEMY_TOP_MARGIN;}_0x45cf44[_0x1bb725(0x1d3)]=_0x1bb725(0x24f),_0x45cf44[_0x1bb725(0x1e4)]=0x0,_0x45cf44[_0x1bb725(0x211)]=0x0,_0x45cf44[_0x1bb725(0x1e5)]=0x0,_0x45cf44[_0x1bb725(0x1aa)]=0x0;_0x45cf44[_0x1bb725(0x204)]!==undefined&&squadronCompletionStatus[_0x45cf44['squadronId']]&&squadronCompletionStatus[_0x45cf44[_0x1bb725(0x204)]]['completed']++;break;}if(_0x45cf44['pathSegmentIndex']>=_0xf16fff[_0x1bb725(0x254)]){console['warn'](_0x1bb725(0x271)+_0x4f12fe+_0x1bb725(0x285)+_0x45cf44[_0x1bb725(0x211)]+_0x1bb725(0x212)+_0x45cf44[_0x1bb725(0x228)]+_0x1bb725(0x1b8));try{_0x45cf44[_0x1bb725(0x231)]=_0x45cf44[_0x1bb725(0x231)]??gameCanvas['width']/0x2,_0x45cf44[_0x1bb725(0x1ec)]=_0x45cf44[_0x1bb725(0x1ec)]??ENEMY_TOP_MARGIN;}catch(_0x3b1682){console[_0x1bb725(0x25a)](_0x1bb725(0x223)+_0x4f12fe+_0x1bb725(0x2bb),_0x3b1682),_0x45cf44[_0x1bb725(0x231)]=gameCanvas[_0x1bb725(0x294)]/0x2,_0x45cf44[_0x1bb725(0x1ec)]=ENEMY_TOP_MARGIN;}_0x45cf44[_0x1bb725(0x1d3)]=_0x1bb725(0x24f),_0x45cf44[_0x1bb725(0x1e4)]=0x0,_0x45cf44[_0x1bb725(0x211)]=0x0,_0x45cf44['velocityX']=0x0,_0x45cf44[_0x1bb725(0x1aa)]=0x0;_0x45cf44['squadronId']!==undefined&&squadronCompletionStatus[_0x45cf44[_0x1bb725(0x204)]]&&squadronCompletionStatus[_0x45cf44['squadronId']][_0x1bb725(0x188)]++;break;}const _0x1aab99=_0xf16fff[_0x45cf44['pathSegmentIndex']];if(!_0x1aab99||!_0x1aab99['p0']||!_0x1aab99['p1']||!_0x1aab99['p2']||!_0x1aab99['p3']){console['error']('Invalid\x20Normal\x20Bezier\x20segment\x20'+_0x45cf44['pathSegmentIndex']+_0x1bb725(0x1e9)+_0x45cf44[_0x1bb725(0x228)]+_0x1bb725(0x237)+_0x4f12fe+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x45cf44[_0x1bb725(0x231)]=_0x45cf44[_0x1bb725(0x231)]??gameCanvas['width']/0x2,_0x45cf44['targetGridY']=_0x45cf44[_0x1bb725(0x1ec)]??ENEMY_TOP_MARGIN+_0x45cf44[_0x1bb725(0x289)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x4ea8ef){console[_0x1bb725(0x25a)](_0x1bb725(0x223)+_0x4f12fe+'\x20after\x20bad\x20segment',_0x4ea8ef),_0x45cf44['targetGridX']=gameCanvas[_0x1bb725(0x294)]/0x2,_0x45cf44[_0x1bb725(0x1ec)]=ENEMY_TOP_MARGIN;}_0x45cf44['state']=_0x1bb725(0x24f),_0x45cf44['pathT']=0x0,_0x45cf44[_0x1bb725(0x211)]=0x0,_0x45cf44[_0x1bb725(0x1e5)]=0x0,_0x45cf44[_0x1bb725(0x1aa)]=0x0;_0x45cf44[_0x1bb725(0x204)]!==undefined&&squadronCompletionStatus[_0x45cf44['squadronId']]&&squadronCompletionStatus[_0x45cf44[_0x1bb725(0x204)]]['completed']++;break;}_0x45cf44['pathT']+=_0x1ff125;let _0x17125b,_0x19067b,_0x5938e2=_0x45cf44['x'],_0xae947e=_0x45cf44['y'];if(_0x45cf44[_0x1bb725(0x1e4)]>=0x1){_0x45cf44[_0x1bb725(0x1e4)]=0x0,_0x45cf44[_0x1bb725(0x211)]++;if(_0x45cf44[_0x1bb725(0x211)]>=_0xf16fff['length']){let _0x3a173b,_0x95dc35;try{_0x3a173b=calculateBezierPoint(0x1,_0x1aab99['p0']['x'],_0x1aab99['p1']['x'],_0x1aab99['p2']['x'],_0x1aab99['p3']['x']),_0x95dc35=calculateBezierPoint(0x1,_0x1aab99['p0']['y'],_0x1aab99['p1']['y'],_0x1aab99['p2']['y'],_0x1aab99['p3']['y']);}catch(_0x43d231){console['error'](_0x1bb725(0x21d)+_0x4f12fe+_0x1bb725(0x180)+_0x45cf44[_0x1bb725(0x228)],_0x43d231),_0x3a173b=_0x1aab99['p3']['x'],_0x95dc35=_0x1aab99['p3']['y'];}_0x45cf44['x']=_0x3a173b,_0x45cf44['y']=_0x95dc35;try{_0x45cf44['targetGridX']=_0x45cf44['targetGridX']??gameCanvas[_0x1bb725(0x294)]/0x2,_0x45cf44[_0x1bb725(0x1ec)]=_0x45cf44['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0xdefb13){console[_0x1bb725(0x25a)](_0x1bb725(0x2a1)+_0x4f12fe+_0x1bb725(0x180)+_0x45cf44[_0x1bb725(0x228)],_0xdefb13),_0x45cf44[_0x1bb725(0x231)]=_0x45cf44['x'],_0x45cf44[_0x1bb725(0x1ec)]=ENEMY_TOP_MARGIN+_0x45cf44['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x414817=_0x45cf44['state'];_0x45cf44[_0x1bb725(0x1d3)]='moving_to_grid',_0x45cf44[_0x1bb725(0x1e5)]=0x0,_0x45cf44['velocityY']=0x0,_0x45cf44[_0x1bb725(0x211)]=0x0;_0x414817===_0x1bb725(0x2af)&&_0x45cf44[_0x1bb725(0x204)]!==undefined&&squadronCompletionStatus[_0x45cf44[_0x1bb725(0x204)]]&&squadronCompletionStatus[_0x45cf44[_0x1bb725(0x204)]]['completed']++;break;}else{const _0x5b841e=_0xf16fff[_0x45cf44[_0x1bb725(0x211)]];if(_0x5b841e?.['p0'])_0x17125b=_0x5b841e['p0']['x'],_0x19067b=_0x5b841e['p0']['y'];else{console[_0x1bb725(0x25a)](_0x1bb725(0x187)+_0x45cf44[_0x1bb725(0x211)]+_0x1bb725(0x1e9)+_0x45cf44['entrancePathId']+_0x1bb725(0x237)+_0x4f12fe+_0x1bb725(0x1b8));try{_0x45cf44['targetGridX']=_0x45cf44[_0x1bb725(0x231)]??gameCanvas['width']/0x2,_0x45cf44[_0x1bb725(0x1ec)]=_0x45cf44[_0x1bb725(0x1ec)]??ENEMY_TOP_MARGIN;}catch(_0x29fe65){console[_0x1bb725(0x25a)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x4f12fe+_0x1bb725(0x26a),_0x29fe65),_0x45cf44[_0x1bb725(0x231)]=gameCanvas[_0x1bb725(0x294)]/0x2,_0x45cf44['targetGridY']=ENEMY_TOP_MARGIN;}_0x45cf44[_0x1bb725(0x1d3)]=_0x1bb725(0x24f),_0x45cf44[_0x1bb725(0x1e4)]=0x0,_0x45cf44[_0x1bb725(0x211)]=0x0,_0x45cf44['velocityX']=0x0,_0x45cf44[_0x1bb725(0x1aa)]=0x0;_0x45cf44[_0x1bb725(0x204)]!==undefined&&squadronCompletionStatus[_0x45cf44[_0x1bb725(0x204)]]&&squadronCompletionStatus[_0x45cf44[_0x1bb725(0x204)]][_0x1bb725(0x188)]++;break;}}}else try{_0x17125b=calculateBezierPoint(_0x45cf44[_0x1bb725(0x1e4)],_0x1aab99['p0']['x'],_0x1aab99['p1']['x'],_0x1aab99['p2']['x'],_0x1aab99['p3']['x']),_0x19067b=calculateBezierPoint(_0x45cf44[_0x1bb725(0x1e4)],_0x1aab99['p0']['y'],_0x1aab99['p1']['y'],_0x1aab99['p2']['y'],_0x1aab99['p3']['y']);}catch(_0x4cd837){console['error'](_0x1bb725(0x219)+_0x4f12fe+':',_0x4cd837);try{_0x45cf44[_0x1bb725(0x231)]=_0x45cf44[_0x1bb725(0x231)]??gameCanvas[_0x1bb725(0x294)]/0x2,_0x45cf44['targetGridY']=_0x45cf44[_0x1bb725(0x1ec)]??ENEMY_TOP_MARGIN;}catch(_0x170475){console[_0x1bb725(0x25a)](_0x1bb725(0x223)+_0x4f12fe+_0x1bb725(0x277),_0x170475),_0x45cf44[_0x1bb725(0x231)]=gameCanvas['width']/0x2,_0x45cf44['targetGridY']=ENEMY_TOP_MARGIN;}_0x45cf44[_0x1bb725(0x1d3)]=_0x1bb725(0x24f),_0x45cf44[_0x1bb725(0x1e4)]=0x0,_0x45cf44[_0x1bb725(0x211)]=0x0,_0x45cf44['velocityX']=0x0,_0x45cf44['velocityY']=0x0;_0x45cf44[_0x1bb725(0x204)]!==undefined&&squadronCompletionStatus[_0x45cf44['squadronId']]&&squadronCompletionStatus[_0x45cf44[_0x1bb725(0x204)]][_0x1bb725(0x188)]++;break;}if(_0x45cf44&&_0x45cf44[_0x1bb725(0x1d3)]===_0x1bb725(0x2af)){if(isNaN(_0x17125b)||isNaN(_0x19067b)){console[_0x1bb725(0x25a)](_0x1bb725(0x261)+_0x4f12fe+_0x1bb725(0x1b8));try{_0x45cf44['targetGridX']=_0x45cf44[_0x1bb725(0x231)]??gameCanvas['width']/0x2,_0x45cf44[_0x1bb725(0x1ec)]=_0x45cf44[_0x1bb725(0x1ec)]??ENEMY_TOP_MARGIN;}catch(_0x31c61c){console['error'](_0x1bb725(0x223)+_0x4f12fe+'\x20after\x20NaN',_0x31c61c),_0x45cf44[_0x1bb725(0x231)]=gameCanvas['width']/0x2,_0x45cf44[_0x1bb725(0x1ec)]=ENEMY_TOP_MARGIN;}_0x45cf44[_0x1bb725(0x1d3)]=_0x1bb725(0x24f),_0x45cf44[_0x1bb725(0x1e4)]=0x0,_0x45cf44[_0x1bb725(0x211)]=0x0,_0x45cf44['velocityX']=0x0,_0x45cf44[_0x1bb725(0x1aa)]=0x0,_0x45cf44[_0x1bb725(0x204)]!==undefined&&squadronCompletionStatus[_0x45cf44[_0x1bb725(0x204)]]&&squadronCompletionStatus[_0x45cf44[_0x1bb725(0x204)]]['completed']++;}else{let _0x1adf72=_0x17125b;const _0x4fce6b=currentWavePatternIndex===0x1&&(_0x45cf44[_0x1bb725(0x204)]===0x2||_0x45cf44[_0x1bb725(0x204)]===0x3),_0x13e3fc=typeof _0x45cf44[_0x1bb725(0x205)]===_0x1bb725(0x16d)&&_0x45cf44['squadronEnemyIndex']%0x2!==0x0;if(_0x4fce6b&&_0x13e3fc){const _0x2f3174=_0x16f33e+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x1adf72=_0x17125b+_0x2f3174;}_0x45cf44[_0x1bb725(0x1e5)]=_0x1adf72-_0x5938e2,_0x45cf44[_0x1bb725(0x1aa)]=_0x19067b-_0xae947e,_0x45cf44['x']=_0x1adf72,_0x45cf44['y']=_0x19067b;}}break;}case _0x1bb725(0x24f):{if(_0x45cf44[_0x1bb725(0x231)]==null||_0x45cf44['targetGridY']==null){console[_0x1bb725(0x29d)](_0x1bb725(0x271)+_0x4f12fe+_0x1bb725(0x172));try{const {x:_0x3dcbac,y:_0x1a24e4}=getCurrentGridSlotPosition(_0x45cf44[_0x1bb725(0x289)],_0x45cf44['gridCol'],_0x16f33e);_0x45cf44[_0x1bb725(0x231)]=_0x3dcbac,_0x45cf44[_0x1bb725(0x1ec)]=_0x1a24e4;}catch(_0x43b9e6){console[_0x1bb725(0x25a)](_0x1bb725(0x223)+_0x4f12fe+_0x1bb725(0x27e),_0x43b9e6),_0x45cf44['state']=_0x1bb725(0x1e3),_0x45cf44['x']=gameCanvas[_0x1bb725(0x294)]/0x2,_0x45cf44['y']=ENEMY_TOP_MARGIN;break;}}const _0x250f02=_0x45cf44[_0x1bb725(0x231)],_0x12f1d7=_0x45cf44['targetGridY'],_0xaa2726=_0x250f02-_0x45cf44['x'],_0x2a41a4=_0x12f1d7-_0x45cf44['y'],_0x2db9a8=Math['sqrt'](_0xaa2726*_0xaa2726+_0x2a41a4*_0x2a41a4),_0x2388f4=ENTRANCE_SPEED*1.2,_0x43be66=_0x2388f4*0.5;if(_0x2db9a8>_0x43be66)_0x45cf44[_0x1bb725(0x1e5)]=_0xaa2726/_0x2db9a8*_0x2388f4,_0x45cf44['velocityY']=_0x2a41a4/_0x2db9a8*_0x2388f4,_0x45cf44['x']+=_0x45cf44[_0x1bb725(0x1e5)],_0x45cf44['y']+=_0x45cf44['velocityY'];else{_0x45cf44['x']=_0x250f02,_0x45cf44['y']=_0x12f1d7,_0x45cf44[_0x1bb725(0x1e5)]=0x0,_0x45cf44[_0x1bb725(0x1aa)]=0x0;const _0x5ef3d4=_0x45cf44[_0x1bb725(0x1d3)];_0x45cf44['state']=_0x1bb725(0x1e3),_0x45cf44['justReturned']=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(_0x1bb725(0x20c),!![],0.1));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x2a3918,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date['now'](),firstEnemyLanded=!![]);if(_0x5ef3d4==='moving_to_grid'&&!isChallengingStage&&!isFullGridWave&&_0x45cf44[_0x1bb725(0x204)]!==undefined){const _0x56821f=_0x45cf44[_0x1bb725(0x204)],_0xe1f22f=squadronCompletionStatus[_0x56821f];if(_0xe1f22f&&!_0xe1f22f[_0x1bb725(0x251)]){const _0x22808f=enemies[_0x1bb725(0x17a)](_0x5e3b6d=>{const _0x34a742=_0x1bb725;if(_0x5e3b6d&&_0x5e3b6d[_0x34a742(0x204)]===_0x56821f)return _0x5e3b6d[_0x34a742(0x1d3)]===_0x34a742(0x1e3)||!enemies[_0x34a742(0x29e)](_0x28415a=>_0x28415a['id']===_0x5e3b6d['id']);return!![];});if(_0x22808f){_0xe1f22f[_0x1bb725(0x251)]=!![];const _0x3c4bfe=enemies['filter'](_0x5d8ac2=>_0x5d8ac2&&_0x5d8ac2['squadronId']===_0x56821f&&_0x5d8ac2[_0x1bb725(0x1d3)]===_0x1bb725(0x1e3)&&(_0x5d8ac2['type']===ENEMY2_TYPE||_0x5d8ac2[_0x1bb725(0x207)]===ENEMY3_TYPE)&&!(_0x5d8ac2['type']===ENEMY3_TYPE&&_0x5d8ac2[_0x1bb725(0x1a0)]));if(_0x3c4bfe[_0x1bb725(0x254)]>0x0){const _0x31cb21=_0x3c4bfe[Math[_0x1bb725(0x268)](Math[_0x1bb725(0x16b)]()*_0x3c4bfe['length'])],_0x414d5f=_0x31cb21['id'],_0x49e1b2=0xc8+Math[_0x1bb725(0x16b)]()*0x190,_0x3c7b52=setTimeout(()=>{const _0x182aa8=_0x1bb725;try{const _0x18cb6b=enemySpawnTimeouts[_0x182aa8(0x182)](_0x3c7b52);if(_0x18cb6b>-0x1)enemySpawnTimeouts[_0x182aa8(0x1fc)](_0x18cb6b,0x1);if(isPaused||!isInGameState||playerLives<=0x0&&(!isTwoPlayerMode||player1Lives<=0x0&&player2Lives<=0x0)||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x58b78d=enemies[_0x182aa8(0x2bd)](_0x19561a=>_0x19561a&&_0x19561a['id']===_0x414d5f);_0x58b78d&&_0x58b78d[_0x182aa8(0x1d3)]===_0x182aa8(0x1e3)&&(createBulletSimple(_0x58b78d)&&(playSound(_0x182aa8(0x236),![],0.4),_0x58b78d[_0x182aa8(0x242)]=Date[_0x182aa8(0x1f5)]()));}catch(_0x1196bb){console['error']('Error\x20during\x20post-landing\x20fire\x20for\x20'+_0x414d5f+':',_0x1196bb);}},_0x49e1b2);enemySpawnTimeouts[_0x1bb725(0x26b)](_0x3c7b52);}}}}}break;}case'in_grid':{try{const _0x1288e4=_0x45cf44[_0x1bb725(0x207)]===ENEMY3_TYPE?BOSS_WIDTH:_0x45cf44[_0x1bb725(0x207)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x3c4e61,y:_0x1a54f8}=getCurrentGridSlotPosition(_0x45cf44[_0x1bb725(0x289)],_0x45cf44[_0x1bb725(0x27f)],_0x1288e4);typeof _0x3c4e61===_0x1bb725(0x16d)&&!isNaN(_0x3c4e61)&&(_0x45cf44['x']=_0x3c4e61),typeof _0x1a54f8===_0x1bb725(0x16d)&&!isNaN(_0x1a54f8)&&(_0x45cf44['y']=_0x1a54f8),_0x45cf44[_0x1bb725(0x231)]=_0x3c4e61,_0x45cf44[_0x1bb725(0x1ec)]=_0x1a54f8;}catch(_0x10939b){console['error'](_0x1bb725(0x280)+_0x45cf44['id']+':',_0x10939b);}_0x45cf44[_0x1bb725(0x1e5)]=_0x458129?_0x5e684f:0x0,_0x45cf44[_0x1bb725(0x1aa)]=0x0;_0x45cf44[_0x1bb725(0x207)]===ENEMY3_TYPE&&_0x45cf44[_0x1bb725(0x1a0)]&&_0x45cf44[_0x1bb725(0x28f)]&&(_0x45cf44['capturedShipX']=_0x45cf44['x']+CAPTURED_SHIP_OFFSET_X,_0x45cf44[_0x1bb725(0x1b9)]=_0x45cf44['y']+CAPTURED_SHIP_OFFSET_Y);break;}case _0x1bb725(0x16e):{_0x45cf44[_0x1bb725(0x1e5)]=0x0,_0x45cf44['velocityY']=0x0;break;}case _0x1bb725(0x170):{_0x45cf44[_0x1bb725(0x1e5)]=0x0,_0x45cf44[_0x1bb725(0x1aa)]=0x0;isCoopAIDemoActive&&_0x45cf44[_0x1bb725(0x207)]===ENEMY3_TYPE&&_0x5b0a7a!=='preparing_capture'&&((!coopAICaptureDiveAnticipationActive||_0x2a3918>coopAICaptureDiveAnticipationEndTime)&&(coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=_0x2a3918+_0x567ee0));break;}case'diving_to_capture_position':{isCoopAIDemoActive&&_0x45cf44['type']===ENEMY3_TYPE&&_0x5b0a7a!=='diving_to_capture_position'&&((!coopAICaptureDiveAnticipationActive||_0x2a3918>coopAICaptureDiveAnticipationEndTime)&&(coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=_0x2a3918+_0x567ee0));let _0x492f1c=isTwoPlayerMode&&selectedGameMode===_0x1bb725(0x279)?isPlayer1ShipCaptured||isPlayer2ShipCaptured:isShipCaptured;if(_0x492f1c){_0x45cf44[_0x1bb725(0x1d3)]=_0x1bb725(0x24a);try{const {x:_0xa49e89,y:_0x2dffa4}=getCurrentGridSlotPosition(_0x45cf44[_0x1bb725(0x289)],_0x45cf44[_0x1bb725(0x27f)],_0x16f33e);_0x45cf44['targetGridX']=_0xa49e89,_0x45cf44[_0x1bb725(0x1ec)]=_0x2dffa4;}catch(_0x56d2a1){console[_0x1bb725(0x25a)](_0x1bb725(0x220)+_0x45cf44['id']+':',_0x56d2a1),_0x45cf44['targetGridX']=gameCanvas['width']/0x2,_0x45cf44['targetGridY']=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x57eb99=_0x45cf44[_0x1bb725(0x290)],_0x33fc91=_0x45cf44[_0x1bb725(0x2b4)];if(_0x57eb99==null||_0x33fc91==null){console[_0x1bb725(0x25a)](_0x1bb725(0x29c)+_0x45cf44['id']+_0x1bb725(0x288)),_0x45cf44[_0x1bb725(0x1d3)]=_0x1bb725(0x24a);try{const {x:_0x3a8a06,y:_0x399403}=getCurrentGridSlotPosition(_0x45cf44[_0x1bb725(0x289)],_0x45cf44[_0x1bb725(0x27f)],_0x16f33e);_0x45cf44[_0x1bb725(0x231)]=_0x3a8a06,_0x45cf44[_0x1bb725(0x1ec)]=_0x399403;}catch(_0x1d4adb){console[_0x1bb725(0x25a)](_0x1bb725(0x220)+_0x45cf44['id']+':',_0x1d4adb),_0x45cf44[_0x1bb725(0x231)]=gameCanvas['width']/0x2,_0x45cf44['targetGridY']=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0xb4f632=_0x57eb99-_0x45cf44['x'],_0x25dbb2=_0x33fc91-_0x45cf44['y'],_0x42ba51=Math['sqrt'](_0xb4f632*_0xb4f632+_0x25dbb2*_0x25dbb2),_0x49e54f=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x4b0c4a=_0x49e54f*0.6;_0x42ba51>_0x4b0c4a?(_0x45cf44[_0x1bb725(0x1e5)]=_0xb4f632/_0x42ba51*_0x49e54f,_0x45cf44[_0x1bb725(0x1aa)]=_0x25dbb2/_0x42ba51*_0x49e54f,_0x45cf44['x']+=_0x45cf44[_0x1bb725(0x1e5)],_0x45cf44['y']+=_0x45cf44[_0x1bb725(0x1aa)]):(_0x45cf44['x']=_0x57eb99,_0x45cf44['y']=_0x33fc91,_0x45cf44['velocityX']=0x0,_0x45cf44[_0x1bb725(0x1aa)]=0x0,_0x45cf44[_0x1bb725(0x1d3)]='capturing',_0x45cf44[_0x1bb725(0x1c2)]=_0x2a3918,capturingBossId=_0x45cf44['id'],captureBeamActive=!![],captureBeamSource={'x':_0x45cf44['x']+_0x16f33e/0x2,'y':_0x45cf44['y']+_0x23165e},captureBeamTargetY=_0x45cf44['y'],captureBeamProgress=0x0,playSound(_0x1bb725(0x17f),![],0.6),_0x45cf44['isPreparingForImmediateCapture']&&(captureAttemptMadeThisLevel=!![],delete _0x45cf44['isPreparingForImmediateCapture']));break;}case _0x1bb725(0x1d4):{_0x45cf44[_0x1bb725(0x1e5)]=0x0,_0x45cf44[_0x1bb725(0x1aa)]=0x0;_0x45cf44[_0x1bb725(0x28c)]&&!captureAttemptMadeThisLevel&&(captureAttemptMadeThisLevel=!![],delete _0x45cf44[_0x1bb725(0x28c)]);let _0x53f3b5=![];isTwoPlayerMode&&selectedGameMode===_0x1bb725(0x279)?_0x53f3b5=isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x45cf44['id']||isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x45cf44['id']:_0x53f3b5=isShipCaptured&&capturedBossIdWithMessage===_0x45cf44['id'];if(_0x53f3b5){captureBeamActive=![];if(capturingBossId===_0x45cf44['id'])capturingBossId=null;_0x45cf44['state']=_0x1bb725(0x24a),stopSound(_0x1bb725(0x17f));if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x53eba2=_0x2a3918-_0x45cf44[_0x1bb725(0x1c2)],_0x472e06=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x3c546f=CAPTURE_BEAM_DURATION_MS;if(_0x53eba2<_0x472e06)captureBeamProgress=_0x53eba2/_0x472e06;else{if(_0x53eba2<_0x3c546f-_0x472e06)captureBeamProgress=0x1;else{if(_0x53eba2<_0x3c546f)captureBeamProgress=0x1-(_0x53eba2-(_0x3c546f-_0x472e06))/_0x472e06;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(_0x1bb725(0x17f)),_0x45cf44[_0x1bb725(0x1d3)]=_0x1bb725(0x1b7),_0x45cf44[_0x1bb725(0x18d)]=generateAttackPathInternal(_0x45cf44),_0x45cf44[_0x1bb725(0x222)]=0x0,_0x45cf44[_0x1bb725(0x19c)]=0x0,_0x45cf44[_0x1bb725(0x216)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x45cf44[_0x1bb725(0x242)]=0x0,_0x45cf44['canFireThisDive']=!![],_0x45cf44['attackFormationOffsetX']=0x0,_0x45cf44[_0x1bb725(0x1fe)]=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}}}captureBeamProgress=Math[_0x1bb725(0x253)](0x0,Math[_0x1bb725(0x287)](0x1,captureBeamProgress));if(captureBeamActive&&captureBeamProgress>=0.95){const _0x5a4bcd=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x519b57=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0xb2052d=_0x45cf44['x']+_0x16f33e/0x2,_0x2e8007=_0x45cf44['y']+_0x23165e,_0x18f2ab=gameCanvas['height']-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x19e649=Math[_0x1bb725(0x253)](_0x5a4bcd,_0x519b57),_0x112318=_0xb2052d-_0x19e649/0x2,_0x4f20bf=_0x2e8007,_0x87b7dd=_0x18f2ab-_0x2e8007;if(_0x87b7dd>0x0){const _0x63cb13={'x':_0x112318,'y':_0x4f20bf,'width':_0x19e649,'height':_0x87b7dd};let _0x182cfd=null,_0x211a5d=0x0;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&checkCollision(ship1,_0x63cb13))_0x182cfd=ship1,_0x211a5d=0x1;else ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&checkCollision(ship2,_0x63cb13)&&(_0x182cfd=ship2,_0x211a5d=0x2);}else ship&&playerLives>0x0&&!isShipCaptured&&checkCollision(ship,_0x63cb13)&&(_0x182cfd=ship,_0x211a5d=currentPlayer);if(_0x182cfd){_0x45cf44[_0x1bb725(0x28f)]={'width':_0x182cfd[_0x1bb725(0x294)],'height':_0x182cfd[_0x1bb725(0x245)]},_0x45cf44[_0x1bb725(0x1a0)]=!![],stopSound(_0x1bb725(0x17f)),_0x45cf44[_0x1bb725(0x1d3)]=_0x1bb725(0x232),_0x45cf44[_0x1bb725(0x231)]=null,_0x45cf44[_0x1bb725(0x1ec)]=null,_0x45cf44[_0x1bb725(0x28b)]=_0x182cfd['y'],_0x45cf44[_0x1bb725(0x2b8)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x2a3918,capturedBossIdWithMessage=_0x45cf44['id'],playSound(_0x1bb725(0x218),![],0.3),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,handlePlayerShipCollision(_0x211a5d,![],_0x2a3918,!![]);isCoopAIDemoActive&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![]);break;}}}break;}case _0x1bb725(0x232):{_0x45cf44[_0x1bb725(0x1e5)]=0x0,_0x45cf44['velocityY']=0x0;if(_0x45cf44[_0x1bb725(0x1a0)]&&_0x45cf44['capturedShipDimensions']&&typeof _0x45cf44[_0x1bb725(0x28b)]===_0x1bb725(0x16d)){const _0x3b8d24=_0x2a3918-captureMessageStartTime,_0x4908e6=Math[_0x1bb725(0x287)](0x1,_0x3b8d24/CAPTURE_MESSAGE_DURATION),_0x1a0b2f=_0x45cf44['y']+CAPTURED_SHIP_OFFSET_Y,_0x41f538=_0x45cf44[_0x1bb725(0x28b)];_0x45cf44[_0x1bb725(0x1b9)]=_0x41f538+(_0x1a0b2f-_0x41f538)*_0x4908e6,_0x45cf44[_0x1bb725(0x1df)]=_0x45cf44['x']+CAPTURED_SHIP_OFFSET_X;}else _0x45cf44[_0x1bb725(0x1df)]=_0x45cf44['x']+CAPTURED_SHIP_OFFSET_X,_0x45cf44[_0x1bb725(0x1b9)]=_0x45cf44['y']+CAPTURED_SHIP_OFFSET_Y;break;}case'attacking':{if(isEntrancePhaseActive)break;const _0x3d9ecd=_0x45cf44[_0x1bb725(0x18d)],_0x28c7ec=3.8;if(!_0x3d9ecd||_0x3d9ecd[_0x1bb725(0x254)]===0x0){console[_0x1bb725(0x25a)](_0x1bb725(0x271)+_0x4f12fe+_0x1bb725(0x192)),_0x45cf44[_0x1bb725(0x1d3)]=_0x1bb725(0x24a);try{const {x:_0x2f3ea5,y:_0x3c221c}=getCurrentGridSlotPosition(_0x45cf44['gridRow'],_0x45cf44['gridCol'],_0x16f33e);_0x45cf44[_0x1bb725(0x231)]=_0x2f3ea5,_0x45cf44[_0x1bb725(0x1ec)]=_0x3c221c;}catch(_0x599490){console[_0x1bb725(0x25a)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x4f12fe+_0x1bb725(0x1ea),_0x599490),_0x45cf44[_0x1bb725(0x231)]=gameCanvas[_0x1bb725(0x294)]/0x2,_0x45cf44['targetGridY']=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}if(_0x45cf44[_0x1bb725(0x222)]>=_0x3d9ecd[_0x1bb725(0x254)]){console[_0x1bb725(0x29d)](_0x1bb725(0x271)+_0x4f12fe+_0x1bb725(0x185)+_0x45cf44[_0x1bb725(0x222)]+'\x20out\x20of\x20bounds\x20('+_0x3d9ecd[_0x1bb725(0x254)]+_0x1bb725(0x168)),_0x45cf44[_0x1bb725(0x1d3)]=_0x1bb725(0x24a);try{const {x:_0x505b72,y:_0x46dca6}=getCurrentGridSlotPosition(_0x45cf44[_0x1bb725(0x289)],_0x45cf44[_0x1bb725(0x27f)],_0x16f33e);_0x45cf44[_0x1bb725(0x231)]=_0x505b72,_0x45cf44[_0x1bb725(0x1ec)]=_0x46dca6;}catch(_0x459c93){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x4f12fe+_0x1bb725(0x184),_0x459c93),_0x45cf44[_0x1bb725(0x231)]=gameCanvas[_0x1bb725(0x294)]/0x2,_0x45cf44[_0x1bb725(0x1ec)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x5d9f1b=_0x3d9ecd[_0x45cf44[_0x1bb725(0x222)]];if(!_0x5d9f1b||!_0x5d9f1b['p0']||!_0x5d9f1b['p1']||!_0x5d9f1b['p2']||!_0x5d9f1b['p3']){console[_0x1bb725(0x25a)]('Enemy\x20'+_0x4f12fe+_0x1bb725(0x199)+_0x45cf44[_0x1bb725(0x222)]+_0x1bb725(0x1c9)),_0x45cf44['state']='returning';try{const {x:_0x23bb82,y:_0x5cdd27}=getCurrentGridSlotPosition(_0x45cf44['gridRow'],_0x45cf44['gridCol'],_0x16f33e);_0x45cf44[_0x1bb725(0x231)]=_0x23bb82,_0x45cf44[_0x1bb725(0x1ec)]=_0x5cdd27;}catch(_0x4444a2){console[_0x1bb725(0x25a)](_0x1bb725(0x1e8)+_0x4f12fe+'\x20(invalid\x20attack\x20segment):',_0x4444a2),_0x45cf44[_0x1bb725(0x231)]=gameCanvas[_0x1bb725(0x294)]/0x2,_0x45cf44[_0x1bb725(0x1ec)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x582d9a=_0x45cf44[_0x1bb725(0x216)]/0x3e8*_0x28c7ec;_0x45cf44['attackPathT']+=_0x582d9a;let _0x524a99,_0x5a1233;const _0x206705=_0x45cf44['x'],_0x4b5594=_0x45cf44['y'];if(_0x45cf44['attackPathT']>=0x1){try{_0x524a99=calculateBezierPoint(0x1,_0x5d9f1b['p0']['x'],_0x5d9f1b['p1']['x'],_0x5d9f1b['p2']['x'],_0x5d9f1b['p3']['x']),_0x5a1233=calculateBezierPoint(0x1,_0x5d9f1b['p0']['y'],_0x5d9f1b['p1']['y'],_0x5d9f1b['p2']['y'],_0x5d9f1b['p3']['y']);}catch(_0xdcfb1a){console['error'](_0x1bb725(0x1be)+_0x45cf44['id']+':',_0xdcfb1a),_0x524a99=_0x45cf44['x'],_0x5a1233=_0x45cf44['y'],_0x45cf44[_0x1bb725(0x1d3)]=_0x1bb725(0x24a);try{const {x:_0x2ac23b,y:_0x47d8ce}=getCurrentGridSlotPosition(_0x45cf44[_0x1bb725(0x289)],_0x45cf44[_0x1bb725(0x27f)],_0x16f33e);_0x45cf44[_0x1bb725(0x231)]=_0x2ac23b,_0x45cf44['targetGridY']=_0x47d8ce;}catch(_0x4e17e9){console[_0x1bb725(0x25a)]('Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20'+_0x45cf44['id']+':',_0x4e17e9),_0x45cf44[_0x1bb725(0x231)]=gameCanvas['width']/0x2,_0x45cf44['targetGridY']=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}_0x45cf44[_0x1bb725(0x19c)]=0x0,_0x45cf44['attackPathSegmentIndex']++;if(_0x45cf44['attackPathSegmentIndex']>=_0x3d9ecd['length']){_0x45cf44[_0x1bb725(0x1d3)]=_0x1bb725(0x24a),_0x45cf44['lastFiredTime']=0x0,_0x45cf44[_0x1bb725(0x1bd)]=0x0,_0x45cf44[_0x1bb725(0x1fe)]=null;try{const {x:_0x37fcc8,y:_0x11a88f}=getCurrentGridSlotPosition(_0x45cf44[_0x1bb725(0x289)],_0x45cf44[_0x1bb725(0x27f)],_0x16f33e);_0x45cf44[_0x1bb725(0x231)]=_0x37fcc8,_0x45cf44[_0x1bb725(0x1ec)]=_0x11a88f;}catch(_0xcd8322){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x4f12fe+_0x1bb725(0x19a),_0xcd8322),_0x45cf44[_0x1bb725(0x231)]=gameCanvas[_0x1bb725(0x294)]/0x2,_0x45cf44['targetGridY']=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}else{const _0x34d1f3=_0x3d9ecd[_0x45cf44[_0x1bb725(0x222)]];if(!_0x34d1f3?.['p0']){console['error']('Enemy\x20'+_0x4f12fe+_0x1bb725(0x299)+_0x45cf44['attackPathSegmentIndex']+_0x1bb725(0x1c9)),_0x524a99=_0x45cf44['x'],_0x5a1233=_0x45cf44['y'],_0x45cf44[_0x1bb725(0x1d3)]='returning';try{const {x:_0x41489f,y:_0x824d42}=getCurrentGridSlotPosition(_0x45cf44[_0x1bb725(0x289)],_0x45cf44[_0x1bb725(0x27f)],_0x16f33e);_0x45cf44[_0x1bb725(0x231)]=_0x41489f,_0x45cf44[_0x1bb725(0x1ec)]=_0x824d42;}catch(_0x229dc1){console[_0x1bb725(0x25a)](_0x1bb725(0x25b)+_0x45cf44['id']+':',_0x229dc1),_0x45cf44['targetGridX']=gameCanvas['width']/0x2,_0x45cf44[_0x1bb725(0x1ec)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}}}else try{_0x524a99=calculateBezierPoint(_0x45cf44['attackPathT'],_0x5d9f1b['p0']['x'],_0x5d9f1b['p1']['x'],_0x5d9f1b['p2']['x'],_0x5d9f1b['p3']['x']),_0x5a1233=calculateBezierPoint(_0x45cf44[_0x1bb725(0x19c)],_0x5d9f1b['p0']['y'],_0x5d9f1b['p1']['y'],_0x5d9f1b['p2']['y'],_0x5d9f1b['p3']['y']);}catch(_0x826325){console['error']('Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20'+_0x45cf44['id']+':',_0x826325),_0x524a99=_0x45cf44['x'],_0x5a1233=_0x45cf44['y'],_0x45cf44[_0x1bb725(0x1d3)]='returning';try{const {x:_0x4b3c7c,y:_0x53732e}=getCurrentGridSlotPosition(_0x45cf44[_0x1bb725(0x289)],_0x45cf44[_0x1bb725(0x27f)],_0x16f33e);_0x45cf44[_0x1bb725(0x231)]=_0x4b3c7c,_0x45cf44[_0x1bb725(0x1ec)]=_0x53732e;}catch(_0x13e1cd){console[_0x1bb725(0x25a)](_0x1bb725(0x195)+_0x45cf44['id']+':',_0x13e1cd),_0x45cf44[_0x1bb725(0x231)]=gameCanvas[_0x1bb725(0x294)]/0x2,_0x45cf44[_0x1bb725(0x1ec)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}if(_0x45cf44&&_0x45cf44[_0x1bb725(0x1d3)]===_0x1bb725(0x1b7)){const _0x5ebdef=_0x45cf44[_0x1bb725(0x1bd)]||0x0,_0x4c4855=_0x524a99+_0x5ebdef,_0x4f5777=_0x5a1233;_0x45cf44[_0x1bb725(0x1e5)]=_0x4c4855-_0x206705,_0x45cf44[_0x1bb725(0x1aa)]=_0x4f5777-_0x4b5594,_0x45cf44['x']=_0x4c4855,_0x45cf44['y']=_0x4f5777;if(_0x45cf44['y']>gameCanvas[_0x1bb725(0x245)]+_0x23165e*1.5){_0x45cf44[_0x1bb725(0x1d3)]=_0x1bb725(0x24a),_0x45cf44[_0x1bb725(0x222)]=0x0,_0x45cf44[_0x1bb725(0x19c)]=0x0,_0x45cf44['lastFiredTime']=0x0,_0x45cf44[_0x1bb725(0x1bd)]=0x0,_0x45cf44[_0x1bb725(0x1fe)]=null,_0x45cf44['y']=-_0x23165e*(1.1+Math[_0x1bb725(0x16b)]()*0.4),_0x45cf44['x']=Math[_0x1bb725(0x16b)]()*(gameCanvas[_0x1bb725(0x294)]-_0x16f33e),_0x45cf44[_0x1bb725(0x1e5)]=0x0,_0x45cf44['velocityY']=0x0;try{const {x:_0x1bf94e,y:_0x5c0327}=getCurrentGridSlotPosition(_0x45cf44[_0x1bb725(0x289)],_0x45cf44[_0x1bb725(0x27f)],_0x16f33e);_0x45cf44[_0x1bb725(0x231)]=_0x1bf94e,_0x45cf44['targetGridY']=_0x5c0327;}catch(_0x21ffbc){console[_0x1bb725(0x25a)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x4f12fe+_0x1bb725(0x217),_0x21ffbc),_0x45cf44[_0x1bb725(0x231)]=gameCanvas[_0x1bb725(0x294)]/0x2,_0x45cf44['targetGridY']=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}}break;}case _0x1bb725(0x24a):{if(isEntrancePhaseActive)break;if(_0x45cf44['targetGridX']==null||_0x45cf44['targetGridY']==null){console[_0x1bb725(0x29d)]('Enemy\x20'+_0x4f12fe+_0x1bb725(0x206));try{const {x:_0x219ce9,y:_0x19b6f7}=getCurrentGridSlotPosition(_0x45cf44[_0x1bb725(0x289)],_0x45cf44[_0x1bb725(0x27f)],_0x16f33e);_0x45cf44[_0x1bb725(0x231)]=_0x219ce9,_0x45cf44[_0x1bb725(0x1ec)]=_0x19b6f7;}catch(_0x5ea91f){console['error'](_0x1bb725(0x223)+_0x4f12fe+_0x1bb725(0x173),_0x5ea91f),_0x45cf44[_0x1bb725(0x1d3)]=_0x1bb725(0x1e3),_0x45cf44['x']=gameCanvas[_0x1bb725(0x294)]/0x2,_0x45cf44['y']=ENEMY_TOP_MARGIN;break;}}const _0x394de0=_0x45cf44['targetGridX'],_0x49d6b3=_0x45cf44[_0x1bb725(0x1ec)],_0x1aafc9=_0x394de0-_0x45cf44['x'],_0x2b81b0=_0x49d6b3-_0x45cf44['y'],_0x327c6d=Math['sqrt'](_0x1aafc9*_0x1aafc9+_0x2b81b0*_0x2b81b0),_0x3b3a4=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x22e3d4=BASE_RETURN_SPEED*_0x3b3a4,_0x4d96b6=_0x22e3d4*0.5;if(_0x327c6d>_0x4d96b6)_0x45cf44[_0x1bb725(0x1e5)]=_0x1aafc9/_0x327c6d*_0x22e3d4,_0x45cf44['velocityY']=_0x2b81b0/_0x327c6d*_0x22e3d4,_0x45cf44['x']+=_0x45cf44['velocityX'],_0x45cf44['y']+=_0x45cf44['velocityY'];else{_0x45cf44['x']=_0x394de0,_0x45cf44['y']=_0x49d6b3,_0x45cf44[_0x1bb725(0x1e5)]=0x0,_0x45cf44[_0x1bb725(0x1aa)]=0x0,_0x45cf44[_0x1bb725(0x1d3)]=_0x1bb725(0x1e3),_0x45cf44['justReturned']=!![],_0x45cf44[_0x1bb725(0x1bd)]=0x0,_0x45cf44['attackGroupId']=null;_0x45cf44[_0x1bb725(0x28a)](_0x1bb725(0x225))&&delete _0x45cf44[_0x1bb725(0x225)];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(_0x1bb725(0x20c),!![],0.1));if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}break;}}if(_0x45cf44&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x1bb725(0x279)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){const _0xa3f951=['attacking',_0x1bb725(0x2af),'following_bezier_path',_0x1bb725(0x1c0)];if(_0xa3f951['includes'](_0x45cf44[_0x1bb725(0x1d3)])){let _0x20aa3f=[];if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x20aa3f[_0x1bb725(0x26b)]({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x20aa3f[_0x1bb725(0x26b)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x20aa3f['push']({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(const _0x22f228 of _0x20aa3f){const _0x19762e=_0x22f228[_0x1bb725(0x22f)],_0x46a514={'x':_0x45cf44['x'],'y':_0x45cf44['y'],'width':_0x16f33e,'height':_0x23165e},_0x392883={'x':_0x19762e['x'],'y':_0x19762e['y'],'width':_0x19762e[_0x1bb725(0x294)],'height':_0x19762e[_0x1bb725(0x245)]},_0x4e2f5e=_0x22f228[_0x1bb725(0x175)]?{'x':_0x19762e['x']+DUAL_SHIP_OFFSET_X,'y':_0x19762e['y'],'width':_0x19762e['width'],'height':_0x19762e[_0x1bb725(0x245)]}:null;let _0x28155e=![],_0x593bda=![];if(checkCollision(_0x46a514,_0x392883))_0x28155e=!![];else _0x22f228['dual']&&_0x4e2f5e&&checkCollision(_0x46a514,_0x4e2f5e)&&(_0x28155e=!![],_0x593bda=!![]);if(_0x28155e){createExplosion(_0x45cf44['x']+_0x16f33e/0x2,_0x45cf44['y']+_0x23165e/0x2),playSound('lostLifeSound',![],0.6),enemies[_0x1bb725(0x1fc)](_0x34e0f4,0x1),_0x45cf44=null,handlePlayerShipCollision(_0x22f228[_0x1bb725(0x214)],_0x593bda,_0x2a3918,![]);if(_0x45cf44===null)break;}}}}if(!_0x45cf44)continue;}if(!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){let _0x10db04=[];if(isTwoPlayerMode&&selectedGameMode===_0x1bb725(0x279)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x10db04['push']({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x10db04[_0x1bb725(0x26b)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x10db04[_0x1bb725(0x26b)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(let _0xe800ac=enemyBullets[_0x1bb725(0x254)]-0x1;_0xe800ac>=0x0;_0xe800ac--){const _0x4391cc=enemyBullets[_0xe800ac];if(!_0x4391cc){enemyBullets[_0x1bb725(0x1fc)](_0xe800ac,0x1);continue;}const _0x4000d8={'x':_0x4391cc['x'],'y':_0x4391cc['y'],'width':_0x4391cc['width'],'height':_0x4391cc['height']};let _0x268677=![];for(const _0x2083bb of _0x10db04){const _0x3ba053=_0x2083bb['shipObj'],_0x4f6ce5={'x':_0x3ba053['x'],'y':_0x3ba053['y'],'width':_0x3ba053[_0x1bb725(0x294)],'height':_0x3ba053['height']},_0x342f4b=_0x2083bb[_0x1bb725(0x175)]?{'x':_0x3ba053['x']+DUAL_SHIP_OFFSET_X,'y':_0x3ba053['y'],'width':_0x3ba053['width'],'height':_0x3ba053[_0x1bb725(0x245)]}:null;let _0x6c3a04=![],_0x41ae31=![];if(checkCollision(_0x4000d8,_0x4f6ce5))_0x6c3a04=!![];else _0x2083bb[_0x1bb725(0x175)]&&_0x342f4b&&checkCollision(_0x4000d8,_0x342f4b)&&(_0x6c3a04=!![],_0x41ae31=!![]);if(_0x6c3a04){playSound(_0x1bb725(0x26d),![],0.6),handlePlayerShipCollision(_0x2083bb[_0x1bb725(0x214)],_0x41ae31,_0x2a3918,![]),enemyBullets[_0x1bb725(0x1fc)](_0xe800ac,0x1),_0x268677=!![];break;}}if(_0x268677)continue;}}updateHitSparks();}catch(_0x300701){console[_0x1bb725(0x25a)](_0x1bb725(0x26e),_0x300701,_0x300701[_0x1bb725(0x1b0)]),isGridSoundPlaying=![],stopSound('gridBackgroundSound'),isEntrancePhaseActive=![],stopSound(_0x1bb725(0x275)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x1bb725(0x17f)),stopSound(_0x1bb725(0x218)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x1bb725(0x250))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x1bb725(0x1dc));}}function handlePlayerShipCollision(_0x580bf3,_0x8e94c8,_0x68a041,_0x3843c0=![]){const _0x40dbae=_0x502888,_0x58402c=_0x68a041,_0x34f1ea=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;let _0xc4b4d2=0x0,_0x4e3422=null;if(isTwoPlayerMode&&selectedGameMode===_0x40dbae(0x279)){_0x4e3422=_0x580bf3===0x1?ship1:ship2;if(_0x4e3422){_0xc4b4d2=_0x4e3422['x'];if(_0x3843c0){if(_0x580bf3===0x1)player1CaptureRespawnX=_0x4e3422['x'];else{if(_0x580bf3===0x2)player2CaptureRespawnX=_0x4e3422['x'];}}}else{if(_0x580bf3===0x1&&typeof player1CaptureRespawnX===_0x40dbae(0x16d)&&player1CaptureRespawnX!==0x0)_0xc4b4d2=player1CaptureRespawnX;else{if(_0x580bf3===0x2&&typeof player2CaptureRespawnX===_0x40dbae(0x16d)&&player2CaptureRespawnX!==0x0)_0xc4b4d2=player2CaptureRespawnX;else{if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40dbae(0x1ab))&&gameCanvas)_0xc4b4d2=_0x580bf3===0x1?gameCanvas['width']/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2:gameCanvas[_0x40dbae(0x294)]/0x2+gameCanvas[_0x40dbae(0x294)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;else gameCanvas?_0xc4b4d2=gameCanvas['width']/0x2-SHIP_WIDTH/0x2:_0xc4b4d2=0xc8;}}}}else{_0x4e3422=ship;if(_0x4e3422)_0xc4b4d2=_0x4e3422['x'],_0x3843c0&&(capturedShipRespawnX_NormalMode=ship['x']);else _0x3843c0&&capturedShipRespawnX_NormalMode!==0x0?_0xc4b4d2=capturedShipRespawnX_NormalMode:_0xc4b4d2=gameCanvas?gameCanvas[_0x40dbae(0x294)]/0x2-SHIP_WIDTH/0x2:0xc8;}if(isTwoPlayerMode&&selectedGameMode===_0x40dbae(0x279)){if(_0x580bf3===0x1){if(_0x3843c0){isPlayer1ShipCaptured=!![],player1IsDualShipActive=![],player1Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40dbae(0x1ab))coopPartner1CapturedTime=_0x58402c;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x58402c,playSound(_0x40dbae(0x1f6),![],0.4),ship1=null,player1NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];if(capturedBossIdWithMessage&&enemies['find'](_0x538720=>_0x538720['id']===capturedBossIdWithMessage)){const _0x550373=enemies[_0x40dbae(0x2bd)](_0x1bf9be=>_0x1bf9be['id']===capturedBossIdWithMessage);_0x550373&&(_0x550373[_0x40dbae(0x1a0)]=![],_0x550373[_0x40dbae(0x28f)]=null);}}else player1NeedsRespawnAfterCapture=!![],ship1=null;}else{if(player1IsDualShipActive&&ship1){player1IsDualShipActive=![];const _0x665dee=_0x8e94c8?ship1['x']+DUAL_SHIP_OFFSET_X+ship1[_0x40dbae(0x294)]/0x2:ship1['x']+ship1[_0x40dbae(0x294)]/0x2;createExplosion(_0x665dee,ship1['y']+ship1[_0x40dbae(0x245)]/0x2),ship1['x']=_0xc4b4d2,ship1['y']=_0x34f1ea,ship1[_0x40dbae(0x290)]=ship1['x'],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x58402c+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x58402c+RESPAWN_DELAY_MS;}else{if(ship1)createExplosion(ship1['x']+ship1['width']/0x2,ship1['y']+ship1[_0x40dbae(0x245)]/0x2);player1Lives--;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x58402c,playSound(_0x40dbae(0x1f6),![],0.4),ship1=null;if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}else isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x58402c+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x58402c+RESPAWN_DELAY_MS,ship1?(ship1['x']=_0xc4b4d2,ship1['y']=_0x34f1ea,ship1[_0x40dbae(0x290)]=ship1['x']):ship1={'x':_0xc4b4d2,'y':_0x34f1ea,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0xc4b4d2,'id':'p1'};}}}else{if(_0x580bf3===0x2){if(_0x3843c0){isPlayer2ShipCaptured=!![],player2IsDualShipActive=![],player2Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x40dbae(0x1ab))coopPartner2CapturedTime=_0x58402c;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x58402c,playSound('gameOverSound',![],0.4),ship2=null,player2NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x40dbae(0x29f))aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];if(capturedBossIdWithMessage&&enemies['find'](_0x4e9438=>_0x4e9438['id']===capturedBossIdWithMessage)){const _0x3033b0=enemies['find'](_0xe8008f=>_0xe8008f['id']===capturedBossIdWithMessage);_0x3033b0&&(_0x3033b0[_0x40dbae(0x1a0)]=![],_0x3033b0[_0x40dbae(0x28f)]=null);}}else player2NeedsRespawnAfterCapture=!![],ship2=null;}else{if(player2IsDualShipActive&&ship2){player2IsDualShipActive=![];const _0x2001c8=_0x8e94c8?ship2['x']+DUAL_SHIP_OFFSET_X+ship2[_0x40dbae(0x294)]/0x2:ship2['x']+ship2[_0x40dbae(0x294)]/0x2;createExplosion(_0x2001c8,ship2['y']+ship2[_0x40dbae(0x245)]/0x2),ship2['x']=_0xc4b4d2,ship2['y']=_0x34f1ea,ship2['targetX']=ship2['x'],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x58402c+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x58402c+RESPAWN_DELAY_MS;}else{if(ship2)createExplosion(ship2['x']+ship2[_0x40dbae(0x294)]/0x2,ship2['y']+ship2[_0x40dbae(0x245)]/0x2);player2Lives--;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x58402c,playSound(_0x40dbae(0x1f6),![],0.4),ship2=null;if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x40dbae(0x29f))aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}else isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x58402c+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x58402c+RESPAWN_DELAY_MS,ship2?(ship2['x']=_0xc4b4d2,ship2['y']=_0x34f1ea,ship2[_0x40dbae(0x290)]=_0xc4b4d2):ship2={'x':_0xc4b4d2,'y':_0x34f1ea,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0xc4b4d2,'id':'p2'};}}}}player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isDualShipActive&&!_0x3843c0&&_0x4e3422){isDualShipActive=![];if(isTwoPlayerMode&&selectedGameMode===_0x40dbae(0x29a)){if(_0x580bf3===0x1)player1IsDualShipActive=![];else{if(_0x580bf3===0x2)player2IsDualShipActive=![];}}else{if(!isTwoPlayerMode)player1IsDualShipActive=![];}const _0x408a46=_0x8e94c8?_0xc4b4d2+DUAL_SHIP_OFFSET_X+SHIP_WIDTH/0x2:_0xc4b4d2+SHIP_WIDTH/0x2;createExplosion(_0x408a46,_0x34f1ea+SHIP_HEIGHT/0x2);ship&&(ship['x']=_0xc4b4d2,ship['y']=_0x34f1ea,ship['targetX']=ship['x']);isInvincible=!![],invincibilityEndTime=_0x58402c+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x58402c+RESPAWN_DELAY_MS;if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x40dbae(0x29a)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}else{if(!_0x3843c0&&_0x4e3422)createExplosion(_0xc4b4d2+SHIP_WIDTH/0x2,_0x34f1ea+SHIP_HEIGHT/0x2);if(_0x3843c0){isShipCaptured=!![];if(ship)ship=null;}playerLives--;if(playerLives<=0x0){playerLives=0x0;if(isTwoPlayerMode&&selectedGameMode==='normal'){if(_0x580bf3===0x1)player1Lives=0x0;else{if(_0x580bf3===0x2)player2Lives=0x0;}isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x58402c,playerWhoIsGameOver=_0x580bf3,playSound(_0x40dbae(0x1f6),![],0.4);const _0x375d6c=_0x580bf3===0x1?0x2:0x1,_0x2db6fa=_0x375d6c===0x1?player1Lives:player2Lives;_0x2db6fa>0x0?nextActionAfterPlayerGameOver=_0x40dbae(0x190):nextActionAfterPlayerGameOver=_0x40dbae(0x1d6);bullets=[],enemyBullets=[],explosions=[];if(!(_0x2db6fa>0x0))ship=null;}else player1Lives=0x0,ship=null,playSound('gameOverSound',![],0.4),triggerFinalGameOverSequence();}else{if(isTwoPlayerMode&&selectedGameMode==='normal'){if(_0x580bf3===0x1)player1Lives=playerLives;else player2Lives=playerLives;}if(!_0x3843c0){isInvincible=!![],invincibilityEndTime=_0x58402c+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x58402c+RESPAWN_DELAY_MS;if(ship&&gameCanvas){ship['x']=_0xc4b4d2,ship['y']=_0x34f1ea,ship['targetX']=ship['x'];if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x40dbae(0x29a)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}}if(_0x3843c0)isDualShipActive=![];}}}if(!_0x3843c0)fallingShips=[];}function switchPlayerTurn(){const _0x2dc5dc=_0x502888;if(!isTwoPlayerMode||selectedGameMode===_0x2dc5dc(0x279))return![];stopSound(_0x2dc5dc(0x229));if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive;if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive;if(player2Score>highScore)highScore=player2Score;}const _0xfd1a98=currentPlayer===0x1?0x2:0x1,_0x3660c9=_0xfd1a98===0x1?player1Lives:player2Lives;if(_0x3660c9<=0x0){const _0x218bdf=currentPlayer===0x1?player1Lives:player2Lives;return _0x218bdf<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0xfd1a98,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x3a94b0=_0x502888;try{if(isPaused||!isInGameState||isChallengingStage||isWaveTransitioning)return;let _0x694f89=![];isTwoPlayerMode&&selectedGameMode==='coop'?(player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)&&(_0x694f89=!![]):playerLives>0x0&&ship&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(_0x694f89=!![]);if(!_0x694f89)return;if(isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&Date[_0x3a94b0(0x1f5)]()<coopAICaptureDiveAnticipationEndTime)return;const _0x19d9e1=enemies[_0x3a94b0(0x1cc)](_0x4b64a1=>_0x4b64a1&&_0x4b64a1[_0x3a94b0(0x1d3)]===_0x3a94b0(0x1e3));if(_0x19d9e1['length']===0x0)return;const _0x2a92d5=Date[_0x3a94b0(0x1f5)](),_0x5afd85=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x2a92d5-lastGridFireCheckTime<_0x5afd85)return;lastGridFireCheckTime=_0x2a92d5;const _0x1fb27e=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x57838e=Math[_0x3a94b0(0x200)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x1a0f11=0x0;_0x19d9e1['sort'](()=>Math[_0x3a94b0(0x16b)]()-0.5);for(const _0x11babe of _0x19d9e1){if(_0x1a0f11>=_0x57838e)break;if(_0x11babe['type']===ENEMY2_TYPE||_0x11babe[_0x3a94b0(0x207)]===ENEMY3_TYPE){if(_0x11babe['type']===ENEMY3_TYPE&&_0x11babe[_0x3a94b0(0x1a0)])continue;Math[_0x3a94b0(0x16b)]()<_0x1fb27e&&(createBulletSimple(_0x11babe)&&(playSound(_0x3a94b0(0x236),![],0.4),_0x11babe[_0x3a94b0(0x242)]=_0x2a92d5,_0x1a0f11++));}}}catch(_0x21517e){console[_0x3a94b0(0x25a)](_0x3a94b0(0x1fb),_0x21517e);}}function runSingleGameUpdate(_0x12eb75){const _0x597df2=_0x502888;try{const _0xeeccdb=Date[_0x597df2(0x1f5)]();let _0x4dc54e=![];isTwoPlayerMode&&selectedGameMode===_0x597df2(0x279)?_0x4dc54e=player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture:_0x4dc54e=playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;let _0x5c8b59=![];if(isManualControl&&connectedGamepadIndex!==null){if(isTwoPlayerMode&&selectedGameMode===_0x597df2(0x279)){if(player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage)_0x5c8b59=!![];}else{if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1))_0x5c8b59=!![];}}if(_0x5c8b59&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x5d1949=navigator[_0x597df2(0x259)]();if(_0x5d1949?.[connectedGamepadIndex]){const _0xc14ee2=_0x5d1949[connectedGamepadIndex],_0x32b358=processSingleController(_0xc14ee2,previousGameButtonStates);previousGameButtonStates=_0x32b358[_0x597df2(0x209)]['slice']();if(_0x32b358[_0x597df2(0x2a0)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x597df2(0x254)]>0x0)previousGameButtonStates=[];}}else connectedGamepadIndex===null&&previousGameButtonStates[_0x597df2(0x254)]>0x0&&(previousGameButtonStates=[]);let _0x266750=![];if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x597df2(0x279)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage)_0x266750=!![];}else{if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x597df2(0x29a)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&currentPlayer===0x2)_0x266750=!![];}}if(_0x266750&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x5bc37d=navigator[_0x597df2(0x259)]();if(_0x5bc37d?.[connectedGamepadIndexP2]){const _0x3d1b47=_0x5bc37d[connectedGamepadIndexP2],_0x207caf=processSingleController(_0x3d1b47,previousGameButtonStatesP2);previousGameButtonStatesP2=_0x207caf[_0x597df2(0x209)][_0x597df2(0x1c4)]();if(_0x207caf[_0x597df2(0x2a0)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStatesP2[_0x597df2(0x254)]>0x0)previousGameButtonStatesP2=[];}}else connectedGamepadIndexP2===null&&previousGameButtonStatesP2[_0x597df2(0x254)]>0x0&&(previousGameButtonStatesP2=[]);if(isPaused){renderGame();return;}const _0x10e656=showCsBonusScoreMessage||showPerfectMessage;if(isCoopAIDemoActive&&_0x10e656&&gameCanvas?.[_0x597df2(0x294)]>0x0){const _0x2d2d2e=ship1&&player1Lives>0x0&&player2Lives<=0x0,_0x265b07=ship2&&player2Lives>0x0&&player1Lives<=0x0;if(_0x2d2d2e){const _0x3684d8=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x48379b=Math[_0x597df2(0x200)](gameCanvas[_0x597df2(0x294)]/0x2-_0x3684d8/0x2);ship1['x']=_0x48379b,ship1[_0x597df2(0x290)]=_0x48379b,smoothedShip1X=_0x48379b,ship2&&(ship2[_0x597df2(0x290)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x265b07){const _0x45b407=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x288424=Math[_0x597df2(0x200)](gameCanvas['width']/0x2-_0x45b407/0x2);ship2['x']=_0x288424,ship2[_0x597df2(0x290)]=_0x288424,smoothedShip2X=_0x288424,ship1&&(ship1[_0x597df2(0x290)]=ship1['x'],smoothedShip1X=ship1['x']);}else{if(ship1&&player1Lives>0x0&&ship2&&player2Lives>0x0){const _0xabb103=gameCanvas['width']/0x2-gameCanvas[_0x597df2(0x294)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1['x']=_0xabb103,ship1[_0x597df2(0x290)]=_0xabb103,smoothedShip1X=_0xabb103;const _0x1520c3=gameCanvas[_0x597df2(0x294)]/0x2+gameCanvas[_0x597df2(0x294)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2['x']=_0x1520c3,ship2['targetX']=_0x1520c3,smoothedShip2X=_0x1520c3;}}}}else{if(_0x10e656&&gameCanvas?.[_0x597df2(0x294)]>0x0){if(isTwoPlayerMode&&selectedGameMode===_0x597df2(0x279)){const _0x2b9996=ship1&&player1Lives>0x0,_0x575206=ship2&&player2Lives>0x0;if(_0x2b9996&&_0x575206){if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab)){const _0x27e422=gameCanvas[_0x597df2(0x294)]/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x2752bd=gameCanvas[_0x597df2(0x294)]/0x2+gameCanvas[_0x597df2(0x294)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['x']=_0x2752bd,ship2[_0x597df2(0x290)]=_0x2752bd,smoothedShip2X=_0x2752bd);}}else{if(_0x2b9996&&ship1){const _0x1c87be=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x140500=Math['round'](gameCanvas[_0x597df2(0x294)]/0x2-_0x1c87be/0x2);ship1['x']=_0x140500,ship1[_0x597df2(0x290)]=_0x140500,ship2&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab)&&(ship2['targetX']=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x575206&&ship2){const _0x36c1c3=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x493970=Math[_0x597df2(0x200)](gameCanvas['width']/0x2-_0x36c1c3/0x2);ship2['x']=_0x493970,ship2[_0x597df2(0x290)]=_0x493970;if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab))smoothedShip2X=_0x493970;ship1&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab)&&(ship1['targetX']=ship1['x']);}}}}else{if((!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x597df2(0x29a)&&currentPlayer===0x2)&&ship){const _0x3c8d6d=isDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH;ship['x']=Math[_0x597df2(0x200)](gameCanvas[_0x597df2(0x294)]/0x2-_0x3c8d6d/0x2),ship['targetX']=ship['x'];if(isPlayerTwoAI&&selectedGameMode===_0x597df2(0x29a)&&currentPlayer===0x2)smoothedShipX=ship['x'];else{if(!isManualControl)smoothedShipX=ship['x'];}}}}}let _0x240018=![];if(selectedGameMode===_0x597df2(0x279)&&level===0x1&&coopPlayersReadyStartTime>0x0){_0x240018=!![];if(isShowingCoopPlayersReady){if(_0xeeccdb-coopPlayersReadyStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}if(_0xeeccdb>=coopPlayersReadyStartTime+0xbb8){isShowingCoopPlayersReady=![],explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab)?(isShowingIntro=!![],introStep=0x2,introDisplayStartTime=_0xeeccdb):(isShowingIntro=!![],introStep=0x1,introDisplayStartTime=_0xeeccdb);}}else{if(isShowingIntro){if(_0xeeccdb-introDisplayStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}let _0x232dc7=INTRO_DURATION_PER_STEP;introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab))&&(_0x232dc7=TWO_PLAYER_STAGE_INTRO_DURATION);if(_0xeeccdb>=introDisplayStartTime+_0x232dc7){if(introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')){introStep=0x2,introDisplayStartTime=_0xeeccdb,explosions=[];if(typeof updateExplosions==='function')updateExplosions();}else{isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();_0x240018=![],coopPlayersReadyStartTime=0x0;}}}else _0x240018=![],coopPlayersReadyStartTime=0x0;}if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab))handlePlayerInput();if(typeof moveEntities===_0x597df2(0x250))moveEntities();renderGame();if(_0x240018)return;}if(selectedGameMode===_0x597df2(0x279)&&level===0x1&&!gameJustStartedAndWaveLaunched&&coopPlayersReadyStartTime===0x0&&gameJustStarted){if(isFullGridWave)startFullGridWave();else{if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x597df2(0x254)]>0x0)scheduleEntranceFlightWave();else isWaveTransitioning=!![],readyForNextWaveReset=!![];}}gameJustStartedAndWaveLaunched=!![],gameJustStarted=![];}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode&&selectedGameMode===_0x597df2(0x29a)){if(_0xeeccdb-playerGameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}if(_0xeeccdb-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();const _0x3c2b05=playerWhoIsGameOver;playerWhoIsGameOver=0x0;if(nextActionAfterPlayerGameOver===_0x597df2(0x190))switchPlayerTurn()?(_0x3c2b05===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,player1MaxLevelReached=Math[_0x597df2(0x253)](player1MaxLevelReached,level)),resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();else nextActionAfterPlayerGameOver===_0x597df2(0x1d6)?triggerFinalGameOverSequence():triggerFinalGameOverSequence();renderGame();return;}else{renderGame();return;}}if(isTwoPlayerMode&&selectedGameMode===_0x597df2(0x279)){let _0x1834ce=![],_0x4989f5=![];if(isPlayer1ShowingGameOverMessage){if(_0xeeccdb-player1GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}if(_0xeeccdb-player1GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer1ShowingGameOverMessage=![],_0x1834ce=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}if(isPlayer2ShowingGameOverMessage){if(_0xeeccdb-player2GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}if(_0xeeccdb-player2GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer2ShowingGameOverMessage=![],_0x4989f5=!![],explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}}if(_0x1834ce||_0x4989f5){player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')handlePlayerInput();if(typeof moveEntities===_0x597df2(0x250))moveEntities();renderGame();if(gameOverSequenceStartTime>0x0||player1Lives>0x0||player2Lives>0x0)return;}else{if(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab))handlePlayerInput();if(typeof moveEntities===_0x597df2(0x250))moveEntities();renderGame();return;}}}if(isShowingCaptureMessage){if(_0xeeccdb-captureMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}const _0x294760=enemies[_0x597df2(0x2bd)](_0x3218ff=>_0x3218ff['id']===capturedBossIdWithMessage);if(_0x294760&&_0x294760[_0x597df2(0x1d3)]===_0x597df2(0x232)){const _0x1729b8=_0xeeccdb-captureMessageStartTime,_0xb88f2a=Math[_0x597df2(0x287)](0x1,_0x1729b8/CAPTURE_MESSAGE_DURATION);_0x294760['captureAnimationRotation']=_0xb88f2a*0x2*(0x2*Math['PI']);}else _0x294760&&(_0x294760['captureAnimationRotation']=0x0);if(isInGameState&&!isShowingPlayerGameOverMessage&&!isPlayer1ShowingGameOverMessage&&!isPlayer2ShowingGameOverMessage&&gameOverSequenceStartTime===0x0){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab))handlePlayerInput();if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab))aiControlCoop();else isPlayerTwoAI&&selectedGameMode===_0x597df2(0x29a)&&currentPlayer===0x2&&aiControl();if(typeof moveEntities===_0x597df2(0x250))moveEntities();updateExplosions(),updateFloatingScores();}if(_0xeeccdb-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();stopSound('shipCapturedSound'),captureBeamActive=![];if(_0x294760&&_0x294760[_0x597df2(0x1d3)]===_0x597df2(0x232)){_0x294760[_0x597df2(0x1d3)]='returning',_0x294760[_0x597df2(0x2b8)]=0x0;try{const _0x3e8d27=_0x294760[_0x597df2(0x207)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x2cc2ec,y:_0x3ed3b6}=getCurrentGridSlotPosition(_0x294760[_0x597df2(0x289)],_0x294760['gridCol'],_0x3e8d27);_0x294760['targetGridX']=_0x2cc2ec,_0x294760[_0x597df2(0x1ec)]=_0x3ed3b6;}catch(_0x44cf0c){console[_0x597df2(0x25a)](_0x597df2(0x181)+_0x294760['id']+':',_0x44cf0c),_0x294760[_0x597df2(0x231)]=gameCanvas[_0x597df2(0x294)]/0x2,_0x294760[_0x597df2(0x1ec)]=ENEMY_TOP_MARGIN;}}else _0x294760&&(_0x294760[_0x597df2(0x2b8)]=0x0);capturedBossIdWithMessage=null;const _0x2d680d=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(isTwoPlayerMode&&selectedGameMode===_0x597df2(0x279)){if(player1NeedsRespawnAfterCapture&&player1Lives>0x0){ship1={'x':player1CaptureRespawnX,'y':_0x2d680d,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player1CaptureRespawnX,'id':'p1'},isPlayer1ShipCaptured=![],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0xeeccdb+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=![],player1NeedsRespawnAfterCapture=![],player1CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab))smoothedShip1X=ship1['x'];}if(player2NeedsRespawnAfterCapture&&player2Lives>0x0){ship2={'x':player2CaptureRespawnX,'y':_0x2d680d,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player2CaptureRespawnX,'id':'p2'},isPlayer2ShipCaptured=![],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0xeeccdb+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=![],player2NeedsRespawnAfterCapture=![],player2CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab))smoothedShip2X=ship2['x'];}if(player1Lives<=0x0&&player2Lives<=0x0){if(gameOverSequenceStartTime===0x0)triggerFinalGameOverSequence();}}else{if(!isManualControl&&!isPlayerTwoAI){if(isShipCaptured&&playerLives>0x0){let _0x31b84d=gameCanvas?gameCanvas[_0x597df2(0x294)]/0x2-SHIP_WIDTH/0x2:0xc8;if(typeof smoothedShipX===_0x597df2(0x16d))_0x31b84d=smoothedShipX;ship={'x':_0x31b84d,'y':_0x2d680d,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x31b84d,'id':_0x597df2(0x276)},isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0xeeccdb+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=![],aiNeedsStabilization=!![];if(smoothedShipX===undefined&&ship)smoothedShipX=ship['x'];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isManualControl){if(isShipCaptured&&playerLives>0x0){let _0x27a57a=capturedShipRespawnX_NormalMode!==0x0?capturedShipRespawnX_NormalMode:gameCanvas?gameCanvas[_0x597df2(0x294)]/0x2-SHIP_WIDTH/0x2:0xc8;ship={'x':_0x27a57a,'y':_0x2d680d,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x27a57a,'id':_0x597df2(0x276)},isShipCaptured=![],capturedShipRespawnX_NormalMode=0x0,isInvincible=!![],invincibilityEndTime=_0xeeccdb+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0xeeccdb+RESPAWN_DELAY_MS;if(isPlayerTwoAI&&selectedGameMode===_0x597df2(0x29a)&&currentPlayer===0x2)aiNeedsStabilization=!![];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&((!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode==='normal'&&(currentPlayer===0x1&&player2Lives<=0x0||currentPlayer===0x2&&player1Lives<=0x0))&&triggerFinalGameOverSequence());}}}}renderGame();return;}const _0x165586=!(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage||isShowingPlayerGameOverMessage),_0x5fa714=isShowingIntro&&!_0x240018&&!(selectedGameMode===_0x597df2(0x279)&&level===0x1);if(!_0x240018&&gameOverSequenceStartTime===0x0&&_0x4dc54e&&!isShowingCaptureMessage&&_0x165586){if(isInGameState&&!_0x5fa714){if(!(_0x10e656&&!isManualControl)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab))aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x597df2(0x29a)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}}isManualControl&&handlePlayerInput();}}isTwoPlayerMode&&selectedGameMode===_0x597df2(0x279)?(isPlayer1Invincible&&_0xeeccdb>=player1InvincibilityEndTime&&(isPlayer1Invincible=![],player1InvincibilityEndTime=0x0),isPlayer2Invincible&&_0xeeccdb>=player2InvincibilityEndTime&&(isPlayer2Invincible=![],player2InvincibilityEndTime=0x0)):(isInvincible&&_0xeeccdb>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0),isWaitingForRespawn&&_0xeeccdb>=respawnTime&&(isWaitingForRespawn=![]));const _0x30fc0=showExtraLifeMessage&&_0xeeccdb-extraLifeMessageStartTime<0x64;if(_0x30fc0&&(isWaveTransitioning||isChallengingStage&&enemies[_0x597df2(0x254)]===0x0)){}if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&isChallengingStage&&enemies[_0x597df2(0x254)]===0x0&&!isCsCompletionDelayActive&&!showCsBonusScoreMessage&&!showPerfectMessage&&gameCanvas&&gameCanvas[_0x597df2(0x294)]>0x0){const _0x4e86ff=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage,_0x2b0868=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage;if(_0x4e86ff&&!_0x2b0868){const _0x309e39=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x46966b=Math['round'](gameCanvas['width']/0x2-_0x309e39/0x2);ship1['x']=_0x46966b,ship1[_0x597df2(0x290)]=_0x46966b,smoothedShip1X=_0x46966b;}else{if(_0x2b0868&&!_0x4e86ff){const _0x1923ca=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x4889a5=Math['round'](gameCanvas[_0x597df2(0x294)]/0x2-_0x1923ca/0x2);ship2['x']=_0x4889a5,ship2[_0x597df2(0x290)]=_0x4889a5,smoothedShip2X=_0x4889a5;}}}if(isCsCompletionDelayActive&&_0x165586&&gameOverSequenceStartTime===0x0){if(_0xeeccdb-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY+EXPLOSION_DURATION){isCsCompletionDelayActive=![],csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies;csCompletionResultIsPerfect?(playSound(_0x597df2(0x22e),![],0.6),showCsHitsMessage=!![],csHitsMessageStartTime=_0xeeccdb):(playSound('csClearSound',![],0.6),showCSClearMessage=!![],csClearMessageStartTime=_0xeeccdb);bullets=[],enemyBullets=[],renderGame();return;}else{if(_0xeeccdb-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY&&explosions[_0x597df2(0x254)]>0x0){updateExplosions(),renderGame();return;}else{if(_0xeeccdb-csCompletionDelayStartTime<CS_COMPLETION_MESSAGE_DELAY){renderGame();return;}}}}let _0x3899a7=![],_0x4ca343=![];if(_0x165586&&gameOverSequenceStartTime===0x0&&!isShowingCoopPlayersReady&&!_0x240018){if(showCsHitsMessage){if(_0xeeccdb-csHitsMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}if(Date[_0x597df2(0x1f5)]()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION){showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0xeeccdb,explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}_0x4ca343=!![];}else{if(showPerfectMessage){if(_0xeeccdb-perfectMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}if(Date['now']()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION){showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0xeeccdb,explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}_0x4ca343=!![];}else{if(showCsBonusScoreMessage){if(_0xeeccdb-csBonusScoreMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}if(Date[_0x597df2(0x1f5)]()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION){showCsBonusScoreMessage=![],_0x3899a7=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}_0x4ca343=!![];}else{if(showCSClearMessage){if(_0xeeccdb-csClearMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}Date[_0x597df2(0x1f5)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]);Date['now']()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]);if(Date[_0x597df2(0x1f5)]()-csClearMessageStartTime>=CS_CLEAR_DELAY){showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x3899a7=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}_0x4ca343=!![];}else{if(showExtraLifeMessage)Date[_0x597df2(0x1f5)]()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![]),_0x4ca343=!![];else{if(showReadyMessage){if(_0xeeccdb-readyMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}if(Date[_0x597df2(0x1f5)]()-readyMessageStartTime>READY_MESSAGE_DURATION){showReadyMessage=![],_0x3899a7=!![],explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}_0x4ca343=!![];}}}}}}}if(_0x4ca343&&!_0x3899a7&&!isShowingCoopPlayersReady&&!_0x240018&&!isShowingCaptureMessage&&_0x165586){if(!((_0x10e656||showCsHitsMessage||showCSClearMessage)&&isManualControl)&&!showExtraLifeMessage){renderGame();return;}}if(_0x5fa714&&_0x165586&&gameOverSequenceStartTime===0x0){let _0x4a7172=![];const _0x40ad26=_0xeeccdb-introDisplayStartTime;let _0x3cdd2d=INTRO_DURATION_PER_STEP;const _0x29fe76=isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL',_0x1b0e11=isTwoPlayerMode&&selectedGameMode==='normal'&&!isPlayerTwoAI;(_0x1b0e11||_0x29fe76)&&(_0x3cdd2d=TWO_PLAYER_STAGE_INTRO_DURATION);if(introStep===0x1){if(_0x40ad26<0x64){explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}let _0x389652=null,_0x205323=0x1;if(!playerIntroSoundPlayed){const _0x3cbc21=_0x29fe76||_0x1b0e11,_0x396e88=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab)&&level>0x1;if(_0x3cbc21){if(currentPlayer===0x1&&level===0x1&&!initialGameStartSoundPlayedThisSession)_0x389652=_0x597df2(0x1ac),_0x205323=0.4;else(currentPlayer===0x2||level>0x1)&&(_0x389652=_0x597df2(0x1f7),_0x205323=0.2);}else{if(_0x396e88)_0x389652='levelUpSound',_0x205323=0.2;else{if(!isTwoPlayerMode){if(level===0x1&&!initialGameStartSoundPlayedThisSession)_0x389652=_0x597df2(0x1ac),_0x205323=0.4;else level>0x1&&(_0x389652=_0x597df2(0x1f7),_0x205323=0.2);}}}}_0x389652&&(playSound(_0x389652,![],_0x205323),playerIntroSoundPlayed=!![],_0x389652==='startSound'&&(initialGameStartSoundPlayedThisSession=!![]));if(_0x40ad26>=_0x3cdd2d){if(isChallengingStage)introStep=0x3;else introStep=0x2;introDisplayStartTime=_0xeeccdb,explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}}else{if(introStep===0x2){if(_0x40ad26<0x64){explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}if(!stageIntroSoundPlayed){if(playLevelUpAfterCSBonus&&(isTwoPlayerMode&&selectedGameMode==='coop'))playSound(_0x597df2(0x1f7),![],0.2),playLevelUpAfterCSBonus=![],stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x597df2(0x279)&&!isPlayerTwoAI&&!isCoopAIDemoActive&&level===0x1)playSound(_0x597df2(0x1f7),![],0.2),stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x597df2(0x279)&&!isPlayerTwoAI&&!isCoopAIDemoActive&&level>0x1)playSound(_0x597df2(0x1f7),![],0.2),stageIntroSoundPlayed=!![];else{if(selectedGameMode===_0x597df2(0x279)){if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab))&&level>0x1)playSound(_0x597df2(0x1f7),![],0.2),stageIntroSoundPlayed=!![];else(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab))&&level===0x1&&(stageIntroSoundPlayed=!![]);}else{if(!isTwoPlayerMode&&level>0x1)playSound('levelUpSound',![],0.2),stageIntroSoundPlayed=!![];else{if(level>0x1&&!playerIntroSoundPlayed&&!(isPlayerTwoAI&&selectedGameMode===_0x597df2(0x29a))&&!initialGameStartSoundPlayedThisSession)playSound('levelUpSound',![],0.2),stageIntroSoundPlayed=!![];else level===0x1&&!isManualControl&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x597df2(0x279))&&!initialGameStartSoundPlayedThisSession&&(playSound('startSound',![],0.4),initialGameStartSoundPlayedThisSession=!![],stageIntroSoundPlayed=!![]);}}}}}}if(_0x40ad26>=_0x3cdd2d){_0x4a7172=!![],explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}}else{if(introStep===0x3){if(_0x40ad26<0x64){explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}!csIntroSoundPlayed&&(playSound('entranceSound',![],0.4),csIntroSoundPlayed=!![],stageIntroSoundPlayed=!![]);if(_0x40ad26>=_0x3cdd2d){_0x4a7172=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}}}if(isInGameState&&_0x165586&&gameOverSequenceStartTime===0x0&&gameCanvas){let _0x499cfe=null,_0x5271c4=null;const _0x140891=isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x27c)&&currentPlayer===0x1&&isShowingIntro;if(_0x140891){let _0x933414=![],_0x274e46=![];const _0x59bfd8=navigator[_0x597df2(0x259)]();if(connectedGamepadIndex!==null&&_0x59bfd8?.[connectedGamepadIndex]){const _0x395189=_0x59bfd8[connectedGamepadIndex],_0x579f3e=processSingleController(_0x395189,previousGameButtonStates);_0x933414=_0x579f3e[_0x597df2(0x196)],_0x274e46=_0x579f3e[_0x597df2(0x1bc)];}_0x499cfe=keyboardP1LeftDown||_0x933414,_0x5271c4=keyboardP1RightDown||_0x274e46;}if(_0x29fe76&&currentPlayer===0x2)aiControl();else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else!isManualControl&&!isPlayerTwoAI&&aiControl();}typeof moveEntities==='function'&&moveEntities(_0x499cfe,_0x5271c4),updateExplosions(),updateFloatingScores();}if(_0x4a7172){isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![];isManualControl&&(isShowingDemoText=![]);if(!isChallengingStage)isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab)?(aiShip1CanShootTime=Date['now']()+0x3e8,aiShip2CanShootTime=Date[_0x597df2(0x1f5)]()+0x4b0):aiCanShootTime=Date[_0x597df2(0x1f5)]()+(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x27c)?0x3e8:0x3e8);else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab))aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0;else aiCanShootTime=0x0;}const _0x164206=level===0x1&&selectedGameMode!==_0x597df2(0x279),_0xa25949=level===0x1&&selectedGameMode===_0x597df2(0x279),_0x55722e=_0x164206&&!gameJustStartedAndWaveLaunched||level>0x1||isChallengingStage||_0xa25949&&!gameJustStartedAndWaveLaunched;if(_0x55722e){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x597df2(0x254)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0x597df2(0x275),![],0.4);}else isEntrancePhaseActive=![],stopSound('entranceSound'),isWaveTransitioning=!![],readyForNextWaveReset=!![],bullets=[],enemyBullets=[],explosions=[],setTimeout(()=>{const _0x173005=_0x597df2,_0x58a78=isTwoPlayerMode&&selectedGameMode===_0x173005(0x279)?player1Lives>0x0||player2Lives>0x0:playerLives>0x0;if((isInGameState||!isInGameState&&_0x58a78)&&typeof resetWaveInternal==='function'){if(_0x58a78)resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![];else triggerFinalGameOverSequence();}},0x64);}if(_0x164206||level>0x1||isChallengingStage||_0xa25949)gameJustStartedAndWaveLaunched=!![];}}isManualControl&&_0x5fa714&&_0x165586&&gameOverSequenceStartTime===0x0&&handlePlayerInput();renderGame();return;}const _0x5f35ff=!_0x240018&&!_0x5fa714&&!_0x3899a7&&!isShowingCaptureMessage;if(gameJustStarted&&_0x5f35ff){if(!gameJustStartedAndWaveLaunched){const _0x2686e8=selectedGameMode==='coop'&&level===0x1&&coopPlayersReadyStartTime!==0x0;if(!_0x2686e8){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x597df2(0x254)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound('entranceSound',![],0.4);}else isWaveTransitioning=!![],readyForNextWaveReset=!![];}gameJustStartedAndWaveLaunched=!![];}}gameJustStarted=![];}if(_0x5f35ff&&isInGameState&&_0x165586&&gameOverSequenceStartTime===0x0){if(!_0x10e656||_0x10e656&&isManualControl){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x597df2(0x29a)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}isManualControl&&handlePlayerInput();if(typeof moveEntities==='function')moveEntities();updateExplosions(),updateFloatingScores();}else _0x10e656&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab))&&(updateExplosions(),updateFloatingScores());}if(_0x5f35ff&&_0x165586&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&_0x4dc54e){const _0x18065c=enemies[_0x597df2(0x29e)](_0x895a09=>_0x895a09?.[_0x597df2(0x1d3)]==='in_grid');if(_0x18065c&&isGridBreathingActive){const _0x12c6fc=_0xeeccdb-gridBreathStartTime,_0x1fafc4=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x4b7d7f=_0x12c6fc%_0x1fafc4;currentGridBreathFactor=(Math[_0x597df2(0x260)](_0x4b7d7f/_0x1fafc4*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x18065c&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x18065c&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0xeeccdb,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x2ac06f=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x2a12d6=enemies[_0x597df2(0x29e)](_0x1f153c=>_0x1f153c?.[_0x597df2(0x1d3)]===_0x597df2(0x2af)||_0x1f153c?.[_0x597df2(0x1d3)]===_0x597df2(0x24f)||_0x1f153c?.['state']===_0x597df2(0x1eb));if(totalEnemiesScheduledForWave>0x0&&_0x2ac06f&&!_0x2a12d6){const _0x1e1b0d=isEntrancePhaseActive;isEntrancePhaseActive=![];if(_0x1e1b0d){stopSound(_0x597df2(0x275)),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts[_0x597df2(0x18b)](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![];if(!isChallengingStage&&!isFullGridWave){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab))coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=Date[_0x597df2(0x1f5)]()+COOP_AI_CAPTURE_DIVE_ANTICIPATION_DURATION_MS,typeof triggerImmediateCaptureDive===_0x597df2(0x250)&&triggerImmediateCaptureDive();else typeof triggerImmediateCaptureDive===_0x597df2(0x250)&&triggerImmediateCaptureDive();}}}}if(!isChallengingStage&&!_0x5fa714&&!isPaused&&!isWaveTransitioning)triggerGridFiring();if(!isWaveTransitioning&&_0x4dc54e&&!_0x5fa714&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x1a6aba=enemies['length']===0x0,_0x13de26=fallingShips[_0x597df2(0x254)]===0x0,_0x1ac24b=![];if(isChallengingStage){if(_0x1a6aba&&!isEntrancePhaseActive)_0x1ac24b=!![];}else{if(_0x1a6aba&&!isEntrancePhaseActive&&_0x13de26)_0x1ac24b=!![];}if(_0x1ac24b){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab))&&gameCanvas&&gameCanvas[_0x597df2(0x294)]>0x0){const _0x5d03e9=player1Lives,_0x39b5c6=player2Lives,_0x598e65=gameCanvas[_0x597df2(0x245)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(_0x5d03e9>0x0&&_0x39b5c6<=0x0&&ship1){const _0x5ca650=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0xf20fc4=Math['round'](gameCanvas[_0x597df2(0x294)]/0x2-_0x5ca650/0x2);ship1['x']=_0xf20fc4,ship1[_0x597df2(0x290)]=_0xf20fc4,smoothedShip1X=_0xf20fc4,ship1['y']=_0x598e65;}else{if(_0x39b5c6>0x0&&_0x5d03e9<=0x0&&ship2){const _0x5e98ed=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x8b17ad=Math[_0x597df2(0x200)](gameCanvas[_0x597df2(0x294)]/0x2-_0x5e98ed/0x2);ship2['x']=_0x8b17ad,ship2[_0x597df2(0x290)]=_0x8b17ad,smoothedShip2X=_0x8b17ad,ship2['y']=_0x598e65;}}}isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound('gridBackgroundSound'),isGridSoundPlaying=![]);!isChallengingStage&&(bullets=[],enemyBullets=[]);floatingScores=[],enemySpawnTimeouts[_0x597df2(0x18b)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;let _0x49cf1f;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,setTimeout(()=>{const _0xce51dd=_0x597df2;if(isWaveTransitioning){explosions=[];if(typeof updateExplosions===_0xce51dd(0x250))updateExplosions();isCsCompletionDelayActive=!![],csCompletionDelayStartTime=Date['now']();}},EXPLOSION_DURATION);if(csCompletionResultIsPerfect){let _0x2667b5=0x2710;if(isTwoPlayerMode&&selectedGameMode===_0x597df2(0x279)){if(player1Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&ship1){player1Score+=_0x2667b5;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x597df2(0x194),!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2));else player1Score===highScore&&highScoreHolderId!==_0x597df2(0x194)&&highScore>0x0&&(highScoreHolderId=_0x597df2(0x194),!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(_0x597df2(0x229),![],0.2)));}if(player2Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x597df2(0x1ab))&&ship2){player2Score+=_0x2667b5;const _0x145552=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?isCoopAIDemoActive?_0x597df2(0x17b):_0x597df2(0x29f):_0x597df2(0x17b);if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x145552,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x597df2(0x229),![],0.2));else player2Score===highScore&&highScoreHolderId!==_0x145552&&highScore>0x0&&(highScoreHolderId=_0x145552,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x597df2(0x229),![],0.2)));}checkAndAwardExtraLife(null);}else{score+=_0x2667b5;if(!isTwoPlayerMode)player1Score=score;else{if(isTwoPlayerMode&&selectedGameMode===_0x597df2(0x29a)){if(currentPlayer===0x1)player1Score=score;else player2Score=score;}}let _0x2210fd=!isTwoPlayerMode?_0x597df2(0x194):currentPlayer===0x1?_0x597df2(0x194):isPlayerTwoAI?_0x597df2(0x29f):_0x597df2(0x17b),_0x49548c=!isTwoPlayerMode?player1TriggeredHighScoreSound:currentPlayer===0x1?player1TriggeredHighScoreSound:player2TriggeredHighScoreSound,_0x2cbac7=!isTwoPlayerMode?()=>player1TriggeredHighScoreSound=!![]:currentPlayer===0x1?()=>player1TriggeredHighScoreSound=!![]:()=>player2TriggeredHighScoreSound=!![];if(score>highScore)highScore=score,highScoreHolderId=_0x2210fd,!_0x49548c&&(_0x2cbac7(),playSound('hiScoreSound',![],0.2));else score===highScore&&highScoreHolderId!==_0x2210fd&&highScore>0x0&&(highScoreHolderId=_0x2210fd,!_0x49548c&&(_0x2cbac7(),playSound(_0x597df2(0x229),![],0.2)));checkAndAwardExtraLife(currentPlayer);}_0x49cf1f=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else isTwoPlayerMode&&selectedGameMode===_0x597df2(0x279)?checkAndAwardExtraLife(null):checkAndAwardExtraLife(currentPlayer),_0x49cf1f=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x49cf1f+=0x64;}else playSound(_0x597df2(0x19d),![],0.8),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,_0x49cf1f=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x37de4b=_0x597df2;let _0x44d903=![],_0x5ee620=0x0;if(isTwoPlayerMode&&selectedGameMode==='normal'){_0x5ee620=currentPlayer;_0x5ee620===0x1?player1MaxLevelReached=Math[_0x37de4b(0x253)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x37de4b(0x253)](player2MaxLevelReached,level);const _0x372674=switchPlayerTurn();if(_0x372674){if(_0x5ee620===0x2&&currentPlayer===0x1&&player1CompletedLevel===level)_0x44d903=!![],player1CompletedLevel=-0x1;else _0x5ee620===0x1?(player1CompletedLevel=level,_0x44d903=![]):_0x44d903=![];}else _0x44d903=!![],player1CompletedLevel=-0x1;}else{_0x44d903=!![];if(!isTwoPlayerMode)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);else{if(isTwoPlayerMode&&selectedGameMode===_0x37de4b(0x279)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x37de4b(0x253)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x37de4b(0x253)](player2MaxLevelReached,level);}}}if(_0x44d903){level++;if(isTwoPlayerMode&&selectedGameMode===_0x37de4b(0x279)){if(player1Lives>0x0)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x37de4b(0x253)](player2MaxLevelReached,level);}else{if(isTwoPlayerMode&&selectedGameMode===_0x37de4b(0x29a)){if(currentPlayer===0x1&&player1Lives>0x0)player1MaxLevelReached=Math[_0x37de4b(0x253)](player1MaxLevelReached,level);else{if(currentPlayer===0x2&&player2Lives>0x0)player2MaxLevelReached=Math[_0x37de4b(0x253)](player2MaxLevelReached,level);}}else{if(playerLives>0x0)player1MaxLevelReached=Math[_0x37de4b(0x253)](player1MaxLevelReached,level);}}}let _0x475410=![];if(isTwoPlayerMode&&selectedGameMode===_0x37de4b(0x279))_0x475410=player1Lives>0x0||player2Lives>0x0;else{if(isTwoPlayerMode&&selectedGameMode===_0x37de4b(0x29a))_0x475410=(currentPlayer===0x1?player1Lives:player2Lives)>0x0;else _0x475410=playerLives>0x0;}_0x475410?(resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();},_0x49cf1f),renderGame();return;}if(!isChallengingStage){if(enemies['length']>0x0){let _0xec189a=null;const _0x27ace2=enemies[_0x597df2(0x1cc)](_0x320888=>_0x320888?.[_0x597df2(0x1d3)]===_0x597df2(0x1e3)),_0x380b26=_0x27ace2[_0x597df2(0x254)]<=0x3,_0x28ae13=Math[_0x597df2(0x253)](0x1,Math[_0x597df2(0x287)](level,LEVEL_CAP_FOR_SCALING)),_0x9e5f8=0x1068,_0x86f47c=0x320,_0x39090b=(_0x28ae13-0x1)*((_0x9e5f8-_0x86f47c)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x462c7e=Math['max'](_0x86f47c,_0x9e5f8-_0x39090b),_0x46364d=Math[_0x597df2(0x200)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x76abc3=enemies[_0x597df2(0x1cc)](_0x82b727=>_0x82b727?.[_0x597df2(0x1d3)]===_0x597df2(0x1b7)||_0x82b727?.[_0x597df2(0x1d3)]==='preparing_attack')[_0x597df2(0x254)];if(_0x380b26||_0xeeccdb-lastEnemyDetachTime>_0x462c7e&&_0x27ace2[_0x597df2(0x254)]>0x0&&_0x76abc3<_0x46364d){_0xec189a=findAndDetachEnemy();if(_0xec189a&&_0xec189a[_0x597df2(0x254)]>0x0){const _0x497b30=_0xec189a[_0x597df2(0x21f)](_0x4b71ae=>enemies[_0x597df2(0x2bd)](_0x1a9c59=>_0x1a9c59?.['id']===_0x4b71ae['id']))[_0x597df2(0x1cc)](_0x4d0d73=>_0x4d0d73&&_0x4d0d73['state']===_0x597df2(0x1e3));if(_0x497b30[_0x597df2(0x254)]>0x0){const _0x2d87e1=_0x497b30[0x0],_0x23344d=_0x2d87e1[_0x597df2(0x296)];if(!_0x380b26)lastEnemyDetachTime=_0xeeccdb;if(_0x23344d===_0x597df2(0x29a)){const _0x556ffb=generateAttackPathInternal(_0x2d87e1);if(_0x556ffb&&_0x556ffb[_0x597df2(0x254)]>0x0){if(_0x497b30[_0x597df2(0x254)]===0x3&&_0x2d87e1[_0x597df2(0x207)]===ENEMY3_TYPE&&level!==0x1)playSound(_0x597df2(0x1a7),![],0.3);let _0x1811cf=[..._0x497b30];const _0x4afb05=_0x1811cf[_0x597df2(0x254)];if(_0x4afb05>0x1){let _0x1f60b7=null,_0x3da9f3=[];_0x1811cf[_0x597df2(0x18b)](_0x1472d3=>{const _0x5a778d=_0x597df2;if(_0x1472d3['type']===ENEMY3_TYPE)_0x1f60b7=_0x1472d3;else _0x3da9f3[_0x5a778d(0x26b)](_0x1472d3);});if(_0x1f60b7&&level!==0x1&&_0x4afb05===0x3&&_0x3da9f3[_0x597df2(0x254)]===0x2)_0x1811cf=[_0x3da9f3[0x0],_0x1f60b7,_0x3da9f3[0x1]];else _0x1811cf[_0x597df2(0x20e)]((_0x4c95a4,_0x58013c)=>(_0x4c95a4?.['gridCol']??0x0)-(_0x58013c?.[_0x597df2(0x27f)]??0x0));const _0x15ab31=0x5;let _0x278a7b=0x0;_0x1811cf=_0x1811cf[_0x597df2(0x1cc)](_0x169abf=>_0x169abf&&typeof _0x169abf['width']===_0x597df2(0x16d));const _0x177310=_0x1811cf['length'];for(let _0x27ba33=0x0;_0x27ba33<_0x177310;_0x27ba33++){_0x278a7b+=_0x1811cf[_0x27ba33][_0x597df2(0x294)];if(_0x27ba33<_0x177310-0x1)_0x278a7b+=_0x15ab31;}const _0x421c1b=-_0x278a7b/0x2;let _0x241a43=_0x421c1b;for(let _0x302552=0x0;_0x302552<_0x177310;_0x302552++){const _0x46396f=_0x1811cf[_0x302552];_0x46396f['attackFormationOffsetX']=_0x241a43+_0x46396f[_0x597df2(0x294)]/0x2,_0x241a43+=_0x46396f[_0x597df2(0x294)]+_0x15ab31;}}else _0x1811cf[_0x597df2(0x18b)](_0xcdff4a=>_0xcdff4a[_0x597df2(0x1bd)]=0x0);const _0x5bea80='attack-'+_0x2d87e1['id']+'-'+_0xeeccdb;_0x1811cf[_0x597df2(0x18b)](_0x2e1c80=>{if(_0x2e1c80)_0x2e1c80['attackGroupId']=_0x5bea80;});let _0x455e0b=![],_0x1f7898=GROUP_FIRE_BURST_DELAY;if(_0x2d87e1[_0x597df2(0x207)]===ENEMY2_TYPE||_0x2d87e1[_0x597df2(0x207)]===ENEMY3_TYPE){_0x455e0b=!![];if(_0x2d87e1[_0x597df2(0x207)]===ENEMY2_TYPE&&_0x4afb05===0x1)_0x1f7898=SOLO_BUTTERFLY_FIRE_DELAY;}else{if(_0x2d87e1[_0x597df2(0x207)]===ENEMY1_TYPE)_0x455e0b=!![];}if(_0x380b26&&level>0x1)_0x455e0b=![];_0x455e0b&&_0x1811cf['forEach'](_0x37baa8=>{const _0x2adab=_0x597df2,_0x5bde3f=_0x37baa8&&!(_0x37baa8['type']===ENEMY3_TYPE&&_0x37baa8[_0x2adab(0x1a0)]);if(_0x5bde3f)fireEnemyBurst(_0x37baa8['id'],_0x2adab(0x1b7),_0x1f7898);}),_0x1811cf['forEach']((_0x52e8c7,_0x4dd8ca)=>{const _0x238a48=_0x597df2;_0x52e8c7&&_0x52e8c7['state']===_0x238a48(0x1e3)&&(_0x52e8c7['state']='preparing_attack',_0x52e8c7[_0x238a48(0x255)]=![],_0x52e8c7[_0x238a48(0x1e5)]=0x0,_0x52e8c7[_0x238a48(0x1aa)]=0x0,_0x52e8c7[_0x238a48(0x266)]=![],setTimeout(()=>{const _0x45fad1=_0x238a48;if(isPaused)return;const _0x4e436f=enemies[_0x45fad1(0x2bd)](_0x24a225=>_0x24a225?.['id']===_0x52e8c7['id']);if(_0x4e436f&&_0x4e436f[_0x45fad1(0x1d3)]===_0x45fad1(0x16e))try{const _0x5b0217=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x5653e2=0x1;if(_0x4e436f[_0x45fad1(0x207)]===ENEMY1_TYPE)_0x5653e2=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x4e436f['type']===ENEMY2_TYPE)_0x5653e2=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x4e436f[_0x45fad1(0x207)]===ENEMY3_TYPE)_0x5653e2=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x52e8c7[_0x45fad1(0x207)]===ENEMY3_TYPE)playSound(_0x45fad1(0x191),![],0.2);else playSound('butterflyDiveSound',![],0.2);_0x4e436f[_0x45fad1(0x1d3)]=_0x45fad1(0x1b7),_0x4e436f[_0x45fad1(0x18d)]=_0x556ffb,_0x4e436f['attackPathSegmentIndex']=0x0,_0x4e436f[_0x45fad1(0x19c)]=0x0,_0x4e436f[_0x45fad1(0x216)]=_0x5b0217*_0x5653e2,_0x4e436f[_0x45fad1(0x242)]=0x0,_0x4e436f[_0x45fad1(0x266)]=!![];}catch(_0x3b7b65){console[_0x45fad1(0x25a)](_0x45fad1(0x267)+_0x52e8c7['id']+':',_0x3b7b65);}},_0x4dd8ca*GROUP_DETACH_DELAY_MS));});}else _0xec189a['forEach'](_0x2b126b=>{const _0x288f2f=_0x597df2;if(_0x2b126b)_0x2b126b[_0x288f2f(0x255)]=![];});}}}}}}enemies[_0x597df2(0x18b)](_0x1539cb=>{const _0x404b4f=_0x597df2;if(_0x1539cb&&_0x1539cb[_0x404b4f(0x207)]===ENEMY3_TYPE&&_0x1539cb[_0x404b4f(0x1a0)]&&_0x1539cb[_0x404b4f(0x1d3)]==='attacking'&&_0x1539cb[_0x404b4f(0x28f)]&&typeof _0x1539cb[_0x404b4f(0x257)]===_0x404b4f(0x16d)){if(_0xeeccdb-_0x1539cb[_0x404b4f(0x257)]>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x21996d=_0x1539cb['x']+_0x1539cb[_0x404b4f(0x294)]/0x2,_0x8805ad=_0x1539cb['y']+_0x1539cb[_0x404b4f(0x245)]+_0x1539cb[_0x404b4f(0x28f)][_0x404b4f(0x245)]*0.5,_0xefe4d1={'x':_0x21996d,'y':_0x8805ad};createBulletSimple(_0x1539cb,_0xefe4d1)&&(_0x1539cb[_0x404b4f(0x257)]=_0xeeccdb,playSound(_0x404b4f(0x1d0),![],0.4));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x407e51=_0xeeccdb-gameOverSequenceStartTime,_0x4b45a4=_0x407e51>=GAME_OVER_DURATION;if(_0x4b45a4&&!isShowingResultsScreen){isShowingResultsScreen=!![],stopSound('gameOverSound'),playSound('resultsMusicSound',!![],0.2),explosions=[];if(typeof updateExplosions===_0x597df2(0x250))updateExplosions();}}}!_0x240018&&renderGame();}catch(_0x213812){console[_0x597df2(0x25a)](_0x597df2(0x16f),_0x213812,_0x213812[_0x597df2(0x1b0)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0x597df2(0x2b6)),stopAllGameSoundsInternal(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState===_0x597df2(0x250)&&showMenuState();}catch(_0x4d0116){console[_0x597df2(0x25a)](_0x597df2(0x248),_0x4d0116);}}}function checkAndAwardExtraLife(_0x19aca1=null){const _0x31dca0=_0x502888;try{const _0x237fba=[];if(_0x19aca1===0x1){const _0x27282e=isTwoPlayerMode&&selectedGameMode===_0x31dca0(0x279)?player1Lives:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x1?playerLives:player1Lives,_0x4187e2=isTwoPlayerMode&&selectedGameMode===_0x31dca0(0x279)?player1Score:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x1?score:player1Score;_0x237fba[_0x31dca0(0x26b)]({'num':0x1,'currentLives':_0x27282e,'currentScore':_0x4187e2,'thresholdsMet':player1LifeThresholdsMet});}else{if(_0x19aca1===0x2&&isTwoPlayerMode){const _0x346799=selectedGameMode===_0x31dca0(0x279)?player2Lives:selectedGameMode===_0x31dca0(0x29a)&&currentPlayer===0x2?playerLives:player2Lives,_0x1741b0=selectedGameMode===_0x31dca0(0x279)?player2Score:selectedGameMode==='normal'&&currentPlayer===0x2?score:player2Score;_0x237fba[_0x31dca0(0x26b)]({'num':0x2,'currentLives':_0x346799,'currentScore':_0x1741b0,'thresholdsMet':player2LifeThresholdsMet});}else{if(isTwoPlayerMode&&selectedGameMode===_0x31dca0(0x279)&&_0x19aca1===null)_0x237fba[_0x31dca0(0x26b)]({'num':0x1,'currentLives':player1Lives,'currentScore':player1Score,'thresholdsMet':player1LifeThresholdsMet}),_0x237fba[_0x31dca0(0x26b)]({'num':0x2,'currentLives':player2Lives,'currentScore':player2Score,'thresholdsMet':player2LifeThresholdsMet});else{if(!isTwoPlayerMode&&(_0x19aca1===null||_0x19aca1===0x1))_0x237fba[_0x31dca0(0x26b)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet});else isTwoPlayerMode&&selectedGameMode==='normal'&&_0x19aca1===currentPlayer&&(currentPlayer===0x1?_0x237fba[_0x31dca0(0x26b)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet}):_0x237fba['push']({'num':0x2,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player2LifeThresholdsMet}));}}}_0x237fba[_0x31dca0(0x18b)](_0x39c1b5=>{const _0x48e2ba=_0x31dca0;let _0x1de895=![];while(!![]){let _0x51ceaf=![],_0x4b71d3=-0x1;const _0x5bcb2b=_0x39c1b5[_0x48e2ba(0x178)][_0x48e2ba(0x27b)];if(_0x5bcb2b===0x0)_0x4b71d3=EXTRA_LIFE_THRESHOLD_1;else{if(_0x5bcb2b===0x1&&!_0x39c1b5['thresholdsMet'][_0x48e2ba(0x1f0)](EXTRA_LIFE_THRESHOLD_2))_0x4b71d3=EXTRA_LIFE_THRESHOLD_2;else{if(_0x5bcb2b>=0x1&&_0x39c1b5['thresholdsMet'][_0x48e2ba(0x1f0)](EXTRA_LIFE_THRESHOLD_1)&&_0x39c1b5[_0x48e2ba(0x178)][_0x48e2ba(0x1f0)](EXTRA_LIFE_THRESHOLD_2)){let _0x1dcaae=0x0;_0x39c1b5[_0x48e2ba(0x178)][_0x48e2ba(0x18b)](_0x37033d=>{_0x37033d>=EXTRA_LIFE_THRESHOLD_2&&(_0x37033d-EXTRA_LIFE_THRESHOLD_2)%RECURRING_EXTRA_LIFE_INTERVAL===0x0&&_0x1dcaae++;}),_0x4b71d3=EXTRA_LIFE_THRESHOLD_2+_0x1dcaae*RECURRING_EXTRA_LIFE_INTERVAL;}else{if(_0x5bcb2b===0x1&&_0x39c1b5[_0x48e2ba(0x178)][_0x48e2ba(0x1f0)](EXTRA_LIFE_THRESHOLD_1)&&!_0x39c1b5[_0x48e2ba(0x178)]['has'](EXTRA_LIFE_THRESHOLD_2))_0x4b71d3=EXTRA_LIFE_THRESHOLD_2;else _0x5bcb2b===0x1&&_0x39c1b5[_0x48e2ba(0x178)][_0x48e2ba(0x1f0)](EXTRA_LIFE_THRESHOLD_2)&&!_0x39c1b5[_0x48e2ba(0x178)][_0x48e2ba(0x1f0)](EXTRA_LIFE_THRESHOLD_1)&&(_0x4b71d3=EXTRA_LIFE_THRESHOLD_1);}}}if(_0x4b71d3!==-0x1&&_0x39c1b5['currentScore']>=_0x4b71d3&&!_0x39c1b5[_0x48e2ba(0x178)]['has'](_0x4b71d3)){if(_0x39c1b5['num']===0x1){if(isTwoPlayerMode&&selectedGameMode==='coop')player1Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x48e2ba(0x29a)&&currentPlayer===0x1)playerLives++;else{if(!isTwoPlayerMode)playerLives++;}}player1Lives=isTwoPlayerMode&&selectedGameMode==='coop'?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x48e2ba(0x29a)&&currentPlayer===0x1?playerLives:player1Lives,_0x39c1b5['currentLives']=player1Lives;}else{if(_0x39c1b5[_0x48e2ba(0x1e7)]===0x2){if(isTwoPlayerMode&&selectedGameMode===_0x48e2ba(0x279))player2Lives++;else{if(isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x2)playerLives++;}player2Lives=isTwoPlayerMode&&selectedGameMode==='coop'?player2Lives:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x2?playerLives:player2Lives,_0x39c1b5[_0x48e2ba(0x24d)]=player2Lives;}}_0x39c1b5['thresholdsMet'][_0x48e2ba(0x1d7)](_0x4b71d3),_0x1de895=!![],_0x51ceaf=!![];}if(!_0x51ceaf)break;}_0x1de895&&!showExtraLifeMessage&&!showCsBonusScoreMessage&&!showPerfectMessage&&!showCsHitsMessage&&!showCSClearMessage&&!showReadyMessage&&setTimeout(()=>{const _0x4b3394=_0x48e2ba;if(isInGameState){explosions=[];if(typeof updateExplosions===_0x4b3394(0x250))updateExplosions();showExtraLifeMessage=!![],extraLifeMessageStartTime=Date[_0x4b3394(0x1f5)](),playSound(_0x4b3394(0x2a3),![],0.5);}},EXPLOSION_DURATION);});}catch(_0x238ef2){console[_0x31dca0(0x25a)](_0x31dca0(0x1ef),_0x238ef2);}}