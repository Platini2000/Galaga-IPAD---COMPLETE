const _0x109c4f=_0x31c3;(function(_0x462770,_0x517f97){const _0x1981f6=_0x31c3,_0x3478fe=_0x462770();while(!![]){try{const _0x561c32=-parseInt(_0x1981f6(0x25b))/0x1+-parseInt(_0x1981f6(0x1d0))/0x2+-parseInt(_0x1981f6(0x238))/0x3+-parseInt(_0x1981f6(0x2ab))/0x4+parseInt(_0x1981f6(0x2da))/0x5+-parseInt(_0x1981f6(0x22a))/0x6*(parseInt(_0x1981f6(0x29c))/0x7)+-parseInt(_0x1981f6(0x2b1))/0x8*(-parseInt(_0x1981f6(0x255))/0x9);if(_0x561c32===_0x517f97)break;else _0x3478fe['push'](_0x3478fe['shift']());}catch(_0x38d08c){_0x3478fe['push'](_0x3478fe['shift']());}}}(_0x3506,0xe6516));function generateAttackPathInternal(_0x1386eb){const _0x5b0284=_0x31c3;try{if(!_0x1386eb||!gameCanvas)return[];const _0x49cd39=_0x1386eb[_0x5b0284(0x306)]===ENEMY3_TYPE?BOSS_WIDTH:_0x1386eb['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x3df164=_0x1386eb[_0x5b0284(0x306)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x1386eb[_0x5b0284(0x306)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x4abee7=_0x49cd39*0.5,_0x398123=gameCanvas[_0x5b0284(0x227)],_0x1357ca=gameCanvas['height'];let _0x11120f=[];const _0x24b046={'x':_0x1386eb['x'],'y':_0x1386eb['y']},_0x4c717e=Math[_0x5b0284(0x2f5)](_0x1357ca*0.06,_0x3df164*1.8),_0x11c68f=Math[_0x5b0284(0x2f5)](_0x398123*0.04,_0x49cd39*1.2),_0x33f9a9=_0x1386eb['x']+_0x49cd39/0x2<_0x398123/0x2?0x1:-0x1,_0x4f0543={'x':_0x24b046['x']-_0x33f9a9*_0x11c68f*0.6,'y':_0x24b046['y']-_0x4c717e};_0x4f0543['x']=Math[_0x5b0284(0x2c4)](_0x4abee7,Math['min'](_0x398123-_0x4abee7-_0x49cd39,_0x4f0543['x'])),_0x4f0543['y']=Math['max'](_0x4abee7,_0x4f0543['y']);const _0x548840={'x':_0x24b046['x']+_0x33f9a9*_0x11c68f*0.1,'y':_0x24b046['y']-_0x4c717e*1.4},_0x3ef91f={'x':_0x4f0543['x']+_0x33f9a9*_0x11c68f*0.3,'y':_0x24b046['y']-_0x4c717e*1.5},_0x347bbf={'p0':_0x24b046,'p1':_0x548840,'p2':_0x3ef91f,'p3':_0x4f0543};_0x11120f[_0x5b0284(0x22b)](_0x347bbf);const _0x14cdf7=_0x4f0543,_0xe9ddb2=_0x1357ca*0.45,_0x43d5c9=_0x398123*0.22,_0x1ffb55=_0x1357ca*0.28,_0x394e84=0.5,_0x22f429=0.6,_0x90bb61=_0x1357ca*0.85,_0xe96d32=Math[_0x5b0284(0x2f8)](Math[_0x5b0284(0x292)]()*0x3);let _0x2821f8=[];if(_0xe96d32===0x0){const _0x1905f7=_0xe9ddb2+Math[_0x5b0284(0x292)]()*_0x1357ca*0.1,_0x537860=_0x43d5c9+Math[_0x5b0284(0x292)]()*_0x398123*0.08,_0x338684=_0x1ffb55+Math['random']()*_0x1357ca*0.08,_0x325db5=_0x14cdf7['x']+_0x33f9a9*_0x537860*0.5,_0x585e45=Math['min'](_0x90bb61,_0x14cdf7['y']+_0x1905f7),_0x59fe3d=_0x325db5+_0x33f9a9*_0x537860*0.5,_0x2872b8=Math[_0x5b0284(0x2c4)](_0x14cdf7['y']+0x14,_0x585e45-_0x338684),_0x3fe1d0=_0x59fe3d-_0x33f9a9*_0x537860*0.9,_0x5e9a34=Math['max'](_0x14cdf7['y']+0x28,_0x2872b8+_0x338684*0.6),_0x3f9985=_0x3fe1d0-_0x33f9a9*_0x537860*0.3,_0x542eb2=_0x1357ca+_0x3df164*0x2,_0x1e4525=Math['max'](_0x4abee7,Math[_0x5b0284(0x2f5)](_0x398123-_0x4abee7-_0x49cd39,_0x325db5)),_0x7654dd=Math[_0x5b0284(0x2c4)](_0x4abee7,Math[_0x5b0284(0x2f5)](_0x398123-_0x4abee7-_0x49cd39,_0x59fe3d)),_0x2d5951=Math[_0x5b0284(0x2c4)](_0x4abee7,Math['min'](_0x398123-_0x4abee7-_0x49cd39,_0x3fe1d0)),_0x1a72f3={'x':_0x14cdf7['x'],'y':_0x14cdf7['y']+_0x1905f7*_0x22f429*0.5},_0x1c336c={'x':_0x1e4525-_0x33f9a9*_0x537860*_0x394e84,'y':_0x585e45},_0x5af593={'x':_0x1e4525,'y':_0x585e45},_0x2ace7f={'x':_0x1e4525+_0x33f9a9*_0x537860*_0x394e84,'y':_0x585e45},_0x5b8a63={'x':_0x7654dd,'y':_0x2872b8+_0x338684*_0x22f429},_0x4bc989={'x':_0x7654dd,'y':_0x2872b8},_0x58bc41={'x':_0x7654dd,'y':_0x2872b8-_0x338684*_0x22f429*0.5},_0x3188e6={'x':_0x2d5951+_0x33f9a9*_0x537860*_0x394e84,'y':_0x5e9a34},_0x18c24f={'x':_0x2d5951,'y':_0x5e9a34},_0x23743a={'x':_0x18c24f['x'],'y':_0x18c24f['y']+_0x1357ca*0.1},_0x34bbbc={'x':_0x3f9985,'y':_0x542eb2-_0x1357ca*0.2},_0x2d4b1d={'x':_0x3f9985,'y':_0x542eb2};_0x2821f8=[{'p0':_0x14cdf7,'p1':_0x1a72f3,'p2':_0x1c336c,'p3':_0x5af593},{'p0':_0x5af593,'p1':_0x2ace7f,'p2':_0x5b8a63,'p3':_0x4bc989},{'p0':_0x4bc989,'p1':_0x58bc41,'p2':_0x3188e6,'p3':_0x18c24f},{'p0':_0x18c24f,'p1':_0x23743a,'p2':_0x34bbbc,'p3':_0x2d4b1d}];}else{if(_0xe96d32===0x1){const _0xb25e87=_0xe9ddb2*0.8+Math[_0x5b0284(0x292)]()*_0x1357ca*0.1,_0x158b78=_0x43d5c9*1.2+Math['random']()*_0x398123*0.1,_0x19ee12=_0x1ffb55*0.7+Math[_0x5b0284(0x292)]()*_0x1357ca*0.1,_0x11b97d=_0x14cdf7['x']+_0x33f9a9*_0x158b78*0.4,_0x131071=Math[_0x5b0284(0x2f5)](_0x90bb61-_0x19ee12*0.5,_0x14cdf7['y']+_0xb25e87*0.6),_0x2eccda=_0x11b97d+_0x33f9a9*_0x158b78*0.6,_0x39b07a=Math[_0x5b0284(0x2f5)](_0x90bb61,_0x131071+_0x19ee12),_0x148bf1=_0x2eccda-_0x33f9a9*_0x158b78*0.5,_0x50aed1=_0x1357ca+_0x3df164*0x2,_0x1204c7=Math['max'](_0x4abee7,Math['min'](_0x398123-_0x4abee7-_0x49cd39,_0x11b97d)),_0x13ebb5=Math[_0x5b0284(0x2c4)](_0x4abee7,Math[_0x5b0284(0x2f5)](_0x398123-_0x4abee7-_0x49cd39,_0x2eccda)),_0x58df7e={'x':_0x14cdf7['x']-_0x33f9a9*_0x158b78*0.1,'y':_0x14cdf7['y']+_0xb25e87*0.3},_0x5f4c06={'x':_0x1204c7-_0x33f9a9*_0x158b78*_0x394e84*0.8,'y':_0x131071+_0x19ee12*_0x22f429*0.4},_0x15cc55={'x':_0x1204c7,'y':_0x131071},_0x4112ef={'x':_0x1204c7+_0x33f9a9*_0x158b78*_0x394e84*0.8,'y':_0x131071-_0x19ee12*_0x22f429*0.4},_0x3eb24b={'x':_0x13ebb5+_0x33f9a9*_0x158b78*_0x394e84*0.6,'y':_0x39b07a+_0x19ee12*_0x22f429*0.5},_0x2778e9={'x':_0x13ebb5,'y':_0x39b07a},_0xcd3ab8={'x':_0x13ebb5-_0x33f9a9*_0x158b78*0.2,'y':_0x39b07a+_0x1357ca*0.1},_0x5ae808={'x':_0x148bf1,'y':_0x50aed1-_0x1357ca*0.3},_0x13149a={'x':_0x148bf1,'y':_0x50aed1};_0x2821f8=[{'p0':_0x14cdf7,'p1':_0x58df7e,'p2':_0x5f4c06,'p3':_0x15cc55},{'p0':_0x15cc55,'p1':_0x4112ef,'p2':_0x3eb24b,'p3':_0x2778e9},{'p0':_0x2778e9,'p1':_0xcd3ab8,'p2':_0x5ae808,'p3':_0x13149a}];}else{const _0x241f36=_0xe9ddb2*0.6+Math[_0x5b0284(0x292)]()*_0x1357ca*0.05,_0x3b2970=_0x43d5c9*0.7+Math[_0x5b0284(0x292)]()*_0x398123*0.05,_0x8a4d68=_0x1ffb55*0.6+Math['random']()*_0x1357ca*0.05,_0x3590c7=_0x8a4d68*1.5,_0x509b91=_0x14cdf7['x']+_0x33f9a9*_0x3b2970*0.5,_0x4195a8=Math[_0x5b0284(0x2f5)](_0x90bb61-_0x3590c7,_0x14cdf7['y']+_0x241f36),_0x98915f=_0x509b91+_0x33f9a9*_0x3b2970*0.5,_0x1511e5=_0x4195a8+_0x8a4d68,_0x7e12f3=_0x98915f-_0x33f9a9*_0x3b2970*0.8,_0x4d8dee=Math['min'](_0x90bb61,_0x1511e5+_0x3590c7*0.7),_0x5675c1=_0x7e12f3+_0x33f9a9*_0x3b2970*0.4,_0x10d6e7=_0x4d8dee+_0x8a4d68*0.8,_0x8b1dab=_0x5675c1,_0x324333=_0x1357ca+_0x3df164*0x2,_0xb6679d=Math[_0x5b0284(0x2c4)](_0x4abee7,Math[_0x5b0284(0x2f5)](_0x398123-_0x4abee7-_0x49cd39,_0x509b91)),_0x21832e=Math[_0x5b0284(0x2c4)](_0x4abee7,Math[_0x5b0284(0x2f5)](_0x398123-_0x4abee7-_0x49cd39,_0x98915f)),_0x3b5eeb=Math[_0x5b0284(0x2c4)](_0x4abee7,Math[_0x5b0284(0x2f5)](_0x398123-_0x4abee7-_0x49cd39,_0x7e12f3)),_0x380edd=Math['max'](_0x4abee7,Math[_0x5b0284(0x2f5)](_0x398123-_0x4abee7-_0x49cd39,_0x5675c1)),_0x1e83e2={'x':_0x14cdf7['x'],'y':_0x14cdf7['y']+_0x241f36*0.5},_0x41460e={'x':_0xb6679d-_0x33f9a9*_0x3b2970*_0x394e84,'y':_0x4195a8+_0x8a4d68*_0x22f429*0.3},_0x5d9528={'x':_0xb6679d,'y':_0x4195a8},_0x763c77={'x':_0xb6679d+_0x33f9a9*_0x3b2970*_0x394e84,'y':_0x4195a8-_0x8a4d68*_0x22f429*0.3},_0x6053c3={'x':_0x21832e+_0x33f9a9*_0x3b2970*_0x394e84,'y':_0x1511e5+_0x8a4d68*_0x22f429*0.5},_0x4e7736={'x':_0x21832e,'y':_0x1511e5},_0x3cd516={'x':_0x21832e-_0x33f9a9*_0x3b2970*_0x394e84,'y':_0x1511e5-_0x8a4d68*_0x22f429*0.5},_0xff7229={'x':_0x3b5eeb-_0x33f9a9*_0x3b2970*_0x394e84,'y':_0x4d8dee+_0x8a4d68*_0x22f429*0.4},_0x1c8396={'x':_0x3b5eeb,'y':_0x4d8dee},_0xf3bc4a={'x':_0x3b5eeb+_0x33f9a9*_0x3b2970*_0x394e84,'y':_0x4d8dee-_0x8a4d68*_0x22f429*0.4},_0x5f3a11={'x':_0x380edd+_0x33f9a9*_0x3b2970*_0x394e84,'y':_0x10d6e7+_0x8a4d68*_0x22f429*0.6},_0x3fb037={'x':_0x380edd,'y':_0x10d6e7},_0x2b8c56={'x':_0x380edd-_0x33f9a9*_0x3b2970*0.1,'y':_0x10d6e7+_0x1357ca*0.05},_0x74178a={'x':_0x8b1dab,'y':_0x324333-_0x1357ca*0.2},_0x775bef={'x':_0x8b1dab,'y':_0x324333};_0x2821f8=[{'p0':_0x14cdf7,'p1':_0x1e83e2,'p2':_0x41460e,'p3':_0x5d9528},{'p0':_0x5d9528,'p1':_0x763c77,'p2':_0x6053c3,'p3':_0x4e7736},{'p0':_0x4e7736,'p1':_0x3cd516,'p2':_0xff7229,'p3':_0x1c8396},{'p0':_0x1c8396,'p1':_0xf3bc4a,'p2':_0x5f3a11,'p3':_0x3fb037},{'p0':_0x3fb037,'p1':_0x2b8c56,'p2':_0x74178a,'p3':_0x775bef}];}}return _0x11120f[_0x5b0284(0x22b)](..._0x2821f8),_0x11120f;}catch(_0x1dcecf){return console['error'](_0x5b0284(0x271)+_0x1386eb?.['id']+':',_0x1dcecf),[];}}window[_0x109c4f(0x1fb)]=generateAttackPathInternal;function resetAllMessagesInternal(){showReadyMessage=![],isShowingIntro=![],showCsHitsMessage=![],showPerfectMessage=![],showCsBonusScoreMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],isShowingCaptureMessage=![],isShowingPlayerGameOverMessage=![],isShowingCoopPlayersReady=![],csHitsMessageStartTime=0x0,perfectMessageStartTime=0x0,csBonusScoreMessageStartTime=0x0,csClearMessageStartTime=0x0,extraLifeMessageStartTime=0x0,readyMessageStartTime=0x0,captureMessageStartTime=0x0,playerGameOverMessageStartTime=0x0,csCompletionDelayStartTime=0x0,introDisplayStartTime=0x0,coopPlayersReadyStartTime=0x0;}window['resetAllMessages']=resetAllMessagesInternal;function stopAllGameSoundsInternal(){const _0x3647a4=_0x109c4f;if(typeof soundPaths===_0x3647a4(0x229)&&soundPaths!==null&&typeof stopSound===_0x3647a4(0x1d3))for(const _0x3a31a8 in soundPaths){stopSound(_0x3a31a8);}isGridSoundPlaying=![];}window['stopAllGameSounds']=stopAllGameSoundsInternal;function resetGameInternal(){const _0x5e3dd7=_0x109c4f;score=0x0,level=0x1,playerLives=0x3,window[_0x5e3dd7(0x20e)]=null;if(isTwoPlayerMode){player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,currentPlayer=0x1,player1CompletedLevel=-0x1,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x5e3dd7(0x2f6)]();else player1LifeThresholdsMet=new Set();if(player2LifeThresholdsMet instanceof Set)player2LifeThresholdsMet[_0x5e3dd7(0x2f6)]();else player2LifeThresholdsMet=new Set();player1IsDualShipActive=![],player2IsDualShipActive=![],isPlayer1ShipCaptured=![],isPlayer2ShipCaptured=![],isPlayer1WaitingForRespawn=![],isPlayer2WaitingForRespawn=![],isPlayer1Invincible=![],isPlayer2Invincible=![],player1RespawnTime=0x0,player2RespawnTime=0x0,player1InvincibilityEndTime=0x0,player2InvincibilityEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![];if(selectedGameMode===_0x5e3dd7(0x285)){playerLives=0x0;if(gameCanvas&&gameCanvas[_0x5e3dd7(0x227)]>0x0&&gameCanvas['height']>0x0){const _0x3a770f=gameCanvas[_0x5e3dd7(0x227)]/0x2-gameCanvas[_0x5e3dd7(0x227)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x53231a=gameCanvas[_0x5e3dd7(0x227)]/0x2+gameCanvas[_0x5e3dd7(0x227)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x393809=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;ship1={'x':_0x3a770f,'y':_0x393809,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x3a770f,'id':'p1'},ship2={'x':_0x53231a,'y':_0x393809,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x53231a,'id':'p2'},(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e3dd7(0x301))&&(smoothedShip1X=_0x3a770f,smoothedShip2X=_0x53231a,aiShip1TargetEnemy=null,aiShip2TargetEnemy=null,aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0,aiShip1LastShotTime=0x0,aiShip2LastShotTime=0x0,aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);}ship=null;}else{if(!ship&&gameCanvas&&gameCanvas[_0x5e3dd7(0x227)]>0x0&&gameCanvas[_0x5e3dd7(0x1fd)]>0x0)ship={'x':Math['round'](gameCanvas[_0x5e3dd7(0x227)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x5e3dd7(0x1fd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x5e3dd7(0x2fa)},ship[_0x5e3dd7(0x1cf)]=ship['x'];else ship&&gameCanvas&&gameCanvas[_0x5e3dd7(0x227)]>0x0&&gameCanvas[_0x5e3dd7(0x1fd)]>0x0&&(ship['x']=Math[_0x5e3dd7(0x297)](gameCanvas[_0x5e3dd7(0x227)]/0x2-SHIP_WIDTH/0x2),ship[_0x5e3dd7(0x1cf)]=ship['x'],ship['y']=gameCanvas[_0x5e3dd7(0x1fd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}}else{player1Lives=0x3,player1Score=0x0,player1MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet['clear']();else player1LifeThresholdsMet=new Set();if(!ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas['height']>0x0)ship={'x':Math[_0x5e3dd7(0x297)](gameCanvas[_0x5e3dd7(0x227)]/0x2-SHIP_WIDTH/0x2),'y':gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':'main'},ship[_0x5e3dd7(0x1cf)]=ship['x'];else ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x5e3dd7(0x1fd)]>0x0&&(ship['x']=Math[_0x5e3dd7(0x297)](gameCanvas[_0x5e3dd7(0x227)]/0x2-SHIP_WIDTH/0x2),ship[_0x5e3dd7(0x1cf)]=ship['x'],ship['y']=gameCanvas[_0x5e3dd7(0x1fd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isDualShipActive=![];if(!isTwoPlayerMode)player1IsDualShipActive=![];fallingShips=[],visualOffsetX=-0x14,gameOverSequenceStartTime=0x0,isShowingResultsScreen=![],gameStartTime=Date['now'](),gameJustStarted=!![],gameJustStartedAndWaveLaunched=![],currentGridOffsetX=0x0,gridMoveDirection=0x1,gridJustCompleted=![],isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,lastGridFireCheckTime=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,scoreEarnedThisCS=0x0,challengingStageEnemiesHit=0x0,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined,aiCanShootTime=0x0,aiLastShotTime=0x0,!(selectedGameMode===_0x5e3dd7(0x285)&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x5e3dd7(0x301)))&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0),playerLastShotTime=0x0,player1LastShotTime=0x0,player2LastShotTime=0x0,p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isShowingCoopPlayersReady=![],coopPlayersReadyStartTime=0x0,resetWaveInternal();}window[_0x109c4f(0x30c)]=resetGameInternal;function resetWaveInternal(){const _0x37325a=_0x109c4f;isWaveTransitioning=![],readyForNextWave=![],readyForNextWaveReset=![],isEntrancePhaseActive=!![],firstEnemyLanded=![],captureAttemptMadeThisLevel=![],gameJustStartedAndWaveLaunched=![],aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![],enemies=[],bullets=[],enemyBullets=[],explosions=[],floatingScores=[],hitSparks=[];Array[_0x37325a(0x279)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x37325a(0x324)](clearTimeout);enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;const _0x1b95b8=getWaveTypeInternal(level);isChallengingStage=_0x1b95b8==='challenging_stage',isFullGridWave=_0x1b95b8===_0x37325a(0x24b),challengingStageEnemiesHit=0x0,scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null;(isFullGridWave||isChallengingStage)&&(isEntrancePhaseActive=![]);const _0x32420b=isShowingDemoText;resetAllMessagesInternal();_0x32420b&&(isShowingDemoText=!![]);if(selectedGameMode===_0x37325a(0x285)&&level===0x1)isShowingIntro=![],introStep=0x2;else{if(isTwoPlayerMode&&selectedGameMode==='normal'||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x37325a(0x2a9)){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(isChallengingStage){introStep=0x3,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(level===0x1&&!isTwoPlayerMode){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{introStep=0x2,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}}}}isShowingIntro&&!(selectedGameMode===_0x37325a(0x285)&&level===0x1)&&(introDisplayStartTime=Date[_0x37325a(0x2fb)]());playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],currentWaveDefinition=generateWaveDefinitionInternal(level);if(selectedGameMode===_0x37325a(0x285)){if(gameCanvas&&gameCanvas[_0x37325a(0x227)]>0x0&&gameCanvas['height']>0x0){const _0xc2fac1=ship1&&player1Lives>0x0,_0x278ed7=ship2&&player2Lives>0x0,_0x4a22dc=gameCanvas[_0x37325a(0x1fd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x37325a(0x301)){if(_0xc2fac1&&_0x278ed7){const _0x422db7=gameCanvas[_0x37325a(0x227)]/0x2-gameCanvas[_0x37325a(0x227)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1&&(ship1[_0x37325a(0x1cf)]=_0x422db7,ship1['x']=_0x422db7,smoothedShip1X=_0x422db7,ship1['y']=_0x4a22dc);const _0x54b73e=gameCanvas[_0x37325a(0x227)]/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2[_0x37325a(0x1cf)]=_0x54b73e,ship2['x']=_0x54b73e,smoothedShip2X=_0x54b73e,ship2['y']=_0x4a22dc);}else{if(_0xc2fac1&&ship1){const _0xa9911e=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x54bea6=Math[_0x37325a(0x297)](gameCanvas[_0x37325a(0x227)]/0x2-_0xa9911e/0x2);ship1['targetX']=_0x54bea6,ship1['x']=_0x54bea6,smoothedShip1X=_0x54bea6,ship1['y']=_0x4a22dc;}else{if(_0x278ed7&&ship2){const _0x33d226=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x1bb77a=Math[_0x37325a(0x297)](gameCanvas['width']/0x2-_0x33d226/0x2);ship2['targetX']=_0x1bb77a,ship2['x']=_0x1bb77a,smoothedShip2X=_0x1bb77a,ship2['y']=_0x4a22dc;}}}}else{if(_0xc2fac1&&ship1)ship1['y']=_0x4a22dc;if(_0x278ed7&&ship2)ship2['y']=_0x4a22dc;}}}else{if(ship&&gameCanvas&&gameCanvas[_0x37325a(0x227)]>0x0&&gameCanvas[_0x37325a(0x1fd)]>0x0&&(forceCenterShipNextReset||!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x37325a(0x325)&&currentPlayer===0x2)){let _0x3f5b97=ship[_0x37325a(0x227)];if(isDualShipActive)_0x3f5b97=DUAL_SHIP_OFFSET_X+SHIP_WIDTH;ship['x']=Math['round'](gameCanvas[_0x37325a(0x227)]/0x2-_0x3f5b97/0x2),ship[_0x37325a(0x1cf)]=ship['x'],ship['y']=gameCanvas[_0x37325a(0x1fd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(isPlayerTwoAI&&selectedGameMode===_0x37325a(0x325)&&currentPlayer===0x2)smoothedShipX=ship['x'];}else ship&&gameCanvas&&gameCanvas[_0x37325a(0x227)]>0x0&&(ship['y']=gameCanvas[_0x37325a(0x1fd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);}forceCenterShipNextReset=![];if(!isManualControl&&aiNeedsStabilization&&selectedGameMode!==_0x37325a(0x285)&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x37325a(0x325)&&currentPlayer===0x2)){aiStabilizationEndTime=Date['now']()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}else{if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2&&aiNeedsStabilization){aiStabilizationEndTime=Date[_0x37325a(0x2fb)]()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}}}window[_0x109c4f(0x2dc)]=resetWaveInternal;function getWaveTypeInternal(_0x4fc92f){const _0x422acf=_0x109c4f,_0x4ec6ca=(_0x4fc92f-0x1)%0x4;switch(_0x4ec6ca){case 0x0:return _0x422acf(0x24b);case 0x1:return'entrance_flight_1';case 0x2:return _0x422acf(0x2cb);case 0x3:return _0x422acf(0x274);default:return _0x422acf(0x224);}}window[_0x109c4f(0x1d9)]=getWaveTypeInternal;function generateWaveDefinitionInternal(_0x574eaf){const _0x3672ef=_0x109c4f;let _0x397bb5=[];currentWavePatternIndex=-0x1;const _0x599284=getWaveTypeInternal(_0x574eaf);if(typeof waveEntrancePatterns==='undefined'||!Array[_0x3672ef(0x279)](waveEntrancePatterns)||waveEntrancePatterns['length']<0x2)return console[_0x3672ef(0x208)](_0x3672ef(0x268)),[];if(_0x599284==='challenging_stage')_0x397bb5=[];else{if(_0x599284===_0x3672ef(0x24b)){currentWavePatternIndex=0x0;const _0x1016da=waveEntrancePatterns[0x0];if(!_0x1016da||_0x1016da['length']===0x0)console['error'](_0x3672ef(0x2b9)),_0x397bb5=[];else try{_0x397bb5=JSON[_0x3672ef(0x30e)](JSON['stringify'](_0x1016da),(_0x2abde0,_0x385e7d)=>{const _0x389f0c=_0x3672ef;return _0x385e7d&&typeof _0x385e7d===_0x389f0c(0x229)&&_0x385e7d['type']===ENEMY3_TYPE&&typeof _0x385e7d[_0x389f0c(0x1f7)]===_0x389f0c(0x31d)&&(_0x385e7d[_0x389f0c(0x1f7)]=![]),_0x385e7d;});}catch(_0x4ee91b){console[_0x3672ef(0x208)](_0x3672ef(0x204),_0x4ee91b),_0x397bb5=[];}}else{if(_0x599284===_0x3672ef(0x266)){currentWavePatternIndex=0x0;const _0x327a67=waveEntrancePatterns[0x0];if(!_0x327a67||_0x327a67[_0x3672ef(0x1d8)]===0x0)console[_0x3672ef(0x208)](_0x3672ef(0x248)),_0x397bb5=[];else try{_0x397bb5=JSON['parse'](JSON[_0x3672ef(0x26e)](_0x327a67),(_0x45df7b,_0x24600a)=>{const _0x2e4f46=_0x3672ef;return _0x24600a&&typeof _0x24600a===_0x2e4f46(0x229)&&_0x24600a[_0x2e4f46(0x306)]===ENEMY3_TYPE&&typeof _0x24600a[_0x2e4f46(0x1f7)]===_0x2e4f46(0x31d)&&(_0x24600a['hasCapturedShip']=![]),_0x24600a;});}catch(_0x32f988){console[_0x3672ef(0x208)](_0x3672ef(0x31e),_0x32f988),_0x397bb5=[];}}else{if(_0x599284==='entrance_flight_2'){currentWavePatternIndex=0x1;const _0x1b1ccb=waveEntrancePatterns[0x1];if(!_0x1b1ccb||_0x1b1ccb[_0x3672ef(0x1d8)]===0x0)console[_0x3672ef(0x208)](_0x3672ef(0x28a)),_0x397bb5=[];else try{_0x397bb5=JSON[_0x3672ef(0x30e)](JSON[_0x3672ef(0x26e)](_0x1b1ccb),(_0x228b2a,_0x251cdc)=>{const _0x2d400c=_0x3672ef;return _0x251cdc&&typeof _0x251cdc===_0x2d400c(0x229)&&_0x251cdc['type']===ENEMY3_TYPE&&typeof _0x251cdc['hasCapturedShip']==='undefined'&&(_0x251cdc[_0x2d400c(0x1f7)]=![]),_0x251cdc;});}catch(_0x1c6669){console[_0x3672ef(0x208)](_0x3672ef(0x233),_0x1c6669),_0x397bb5=[];}}else console['warn'](_0x3672ef(0x289)+_0x574eaf+':\x20'+_0x599284),_0x397bb5=[];}}}if(_0x599284!==_0x3672ef(0x2cb)){if(typeof normalWaveEntrancePaths===_0x3672ef(0x31d)||Object['keys'](normalWaveEntrancePaths)[_0x3672ef(0x1d8)]===0x0)return console['error'](_0x3672ef(0x241)),_0x397bb5;for(let _0x54f48a=_0x397bb5[_0x3672ef(0x1d8)]-0x1;_0x54f48a>=0x0;_0x54f48a--){const _0x139965=_0x397bb5[_0x54f48a];if(!normalWaveEntrancePaths?.[_0x139965['pathId']]){_0x397bb5[_0x3672ef(0x32a)](_0x54f48a,0x1);continue;}if(_0x139965[_0x3672ef(0x29f)]&&Array[_0x3672ef(0x279)](_0x139965['enemies'])){for(let _0x5e15ab=_0x139965[_0x3672ef(0x29f)][_0x3672ef(0x1d8)]-0x1;_0x5e15ab>=0x0;_0x5e15ab--){const _0x53c859=_0x139965[_0x3672ef(0x29f)][_0x5e15ab];(!_0x53c859||!normalWaveEntrancePaths?.[_0x53c859[_0x3672ef(0x21b)]])&&_0x139965[_0x3672ef(0x29f)][_0x3672ef(0x32a)](_0x5e15ab,0x1),_0x53c859&&_0x53c859['type']===ENEMY3_TYPE&&typeof _0x53c859[_0x3672ef(0x1f7)]===_0x3672ef(0x31d)&&(_0x53c859[_0x3672ef(0x1f7)]=![]);}_0x139965[_0x3672ef(0x29f)][_0x3672ef(0x1d8)]===0x0&&_0x397bb5['splice'](_0x54f48a,0x1);}else _0x397bb5[_0x3672ef(0x32a)](_0x54f48a,0x1);}}return _0x397bb5;}window[_0x109c4f(0x25c)]=generateWaveDefinitionInternal;const createBulletSimple=(_0x1c3239,_0x3f22f4=null)=>{const _0x5e144b=_0x109c4f;let _0x5bf666=null,_0x3f129e=![];if(isTwoPlayerMode&&selectedGameMode===_0x5e144b(0x285)){const _0x10f19b=ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured,_0x3cd393=ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured;if(_0x10f19b&&_0x3cd393)_0x5bf666=Math['random']()<0.5?ship1:ship2,_0x3f129e=!![];else{if(_0x10f19b)_0x5bf666=ship1,_0x3f129e=!![];else _0x3cd393&&(_0x5bf666=ship2,_0x3f129e=!![]);}}else ship&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn&&(_0x5bf666=ship,_0x3f129e=!![]);if(!_0x1c3239||!isInGameState||!_0x3f129e||!_0x5bf666)return![];const _0x21021b=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x4f3fb4=_0x3f22f4?_0x3f22f4['x']:_0x1c3239['x']+_0x1c3239[_0x5e144b(0x227)]/0x2,_0x1011c1=_0x3f22f4?_0x3f22f4['y']:_0x1c3239['y']+_0x1c3239[_0x5e144b(0x1fd)]/0x2;let _0x26cd09=0x0,_0x13f98c=_0x21021b;const _0x1a1ea3=_0x5bf666['x']+_0x5bf666[_0x5e144b(0x227)]/0x2-_0x4f3fb4,_0x2aa8cd=_0x5bf666['y']+_0x5bf666[_0x5e144b(0x1fd)]/0x2-_0x1011c1,_0x594164=Math[_0x5e144b(0x1d1)](_0x1a1ea3*_0x1a1ea3+_0x2aa8cd*_0x2aa8cd);if(_0x594164>0x0){let _0x45bdb0=0x0;!isChallengingStage&&(_0x45bdb0=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x29d114=Math[_0x5e144b(0x226)](_0x2aa8cd,_0x1a1ea3);_0x26cd09=Math[_0x5e144b(0x2ac)](_0x29d114)*_0x21021b*_0x45bdb0,_0x13f98c=Math[_0x5e144b(0x1d1)](_0x21021b**0x2-_0x26cd09**0x2),_0x13f98c=Math[_0x5e144b(0x2c4)](_0x21021b*(0x1-_0x45bdb0)*0.5,_0x13f98c);if(_0x2aa8cd<0x0&&_0x13f98c>0x0){}if(_0x2aa8cd<0x0)_0x13f98c=Math['abs'](_0x13f98c);return enemyBullets[_0x5e144b(0x22b)]({'x':_0x4f3fb4-ENEMY_BULLET_WIDTH/0x2,'y':_0x1011c1,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x26cd09,'vy':_0x13f98c,'type':_0x1c3239[_0x5e144b(0x306)]}),!![];}return![];};function scheduleSingleEntranceSquadron(_0x40190a,_0x386afa,_0x2dc33c){const _0x2b09ce=_0x109c4f;if(isFullGridWave||isChallengingStage)return console[_0x2b09ce(0x2e4)](_0x2b09ce(0x201)+level+',\x20isFullGrid:\x20'+isFullGridWave+_0x2b09ce(0x256)+isChallengingStage+_0x2b09ce(0x2fe)),_0x40190a?.['enemies']?.[_0x2b09ce(0x1d8)]>0x0&&(enemiesSpawnedThisWave+=_0x40190a[_0x2b09ce(0x29f)][_0x2b09ce(0x1d8)],squadronCompletionStatus[_0x386afa]&&(squadronCompletionStatus[_0x386afa][_0x2b09ce(0x30b)]=squadronCompletionStatus[_0x386afa]['total'])),![];const _0xb90022=normalWaveEntrancePaths,_0x169726=_0x40190a[_0x2b09ce(0x2c2)],_0x3846f0=_0xb90022[_0x169726];if(!_0x3846f0||_0x3846f0['length']===0x0)return console['error']('Entrance\x20Wave:\x20Path\x20'+_0x169726+'\x20for\x20squadron\x20'+_0x386afa+_0x2b09ce(0x1d7)),_0x40190a?.[_0x2b09ce(0x29f)]?.[_0x2b09ce(0x1d8)]>0x0&&(enemiesSpawnedThisWave+=_0x40190a[_0x2b09ce(0x29f)]['length'],squadronCompletionStatus[_0x386afa]&&(squadronCompletionStatus[_0x386afa][_0x2b09ce(0x30b)]=squadronCompletionStatus[_0x386afa]['total'])),![];const _0x123e32=setTimeout(()=>{const _0x4d2ee0=_0x2b09ce,_0x2d12e1=enemySpawnTimeouts['indexOf'](_0x123e32);if(_0x2d12e1>-0x1)enemySpawnTimeouts[_0x4d2ee0(0x32a)](_0x2d12e1,0x1);let _0x5dda1d=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x5dda1d=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x5dda1d=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x5dda1d||isFullGridWave){_0x40190a?.['enemies']?.[_0x4d2ee0(0x1d8)]>0x0&&(enemiesSpawnedThisWave+=_0x40190a[_0x4d2ee0(0x29f)][_0x4d2ee0(0x1d8)],squadronCompletionStatus[_0x386afa]&&(squadronCompletionStatus[_0x386afa][_0x4d2ee0(0x30b)]=squadronCompletionStatus[_0x386afa][_0x4d2ee0(0x22e)]));return;}try{squadronEntranceFiringStatus[_0x386afa]?(squadronEntranceFiringStatus[_0x386afa][_0x4d2ee0(0x30a)]=Date[_0x4d2ee0(0x2fb)]()+_0x2dc33c,squadronEntranceFiringStatus[_0x386afa]['hasFired']=![]):(console[_0x4d2ee0(0x2e4)](_0x4d2ee0(0x1d6)+_0x386afa+_0x4d2ee0(0x222)),squadronEntranceFiringStatus[_0x386afa]={'hasFired':![],'scheduledStartTime':Date[_0x4d2ee0(0x2fb)]()+_0x2dc33c});const _0x5f14c5=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x4a211d=_0x5f14c5*0x2,_0x384d90=0x1;_0x40190a[_0x4d2ee0(0x29f)][_0x4d2ee0(0x324)]((_0xf060d3,_0x377181)=>{const _0x5ab73f=_0x4d2ee0;if(!_0xf060d3||!_0xf060d3[_0x5ab73f(0x306)]||typeof _0xf060d3[_0x5ab73f(0x1e0)]==='undefined'||typeof _0xf060d3['gridCol']===_0x5ab73f(0x31d)||!_0xf060d3[_0x5ab73f(0x21b)]){console[_0x5ab73f(0x208)](_0x5ab73f(0x2e9)+_0x386afa+_0x5ab73f(0x1e4)+_0x169726+_0x5ab73f(0x1e1)+_0x377181+'.\x20Skipping.'),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x386afa]&&squadronCompletionStatus[_0x386afa][_0x5ab73f(0x30b)]++;return;}const _0x60e610=_0xb90022[_0xf060d3['entrancePathId']];(!_0x60e610||_0x60e610[_0x5ab73f(0x1d8)]===0x0)&&console[_0x5ab73f(0x2e4)](_0x5ab73f(0x23b)+_0xf060d3[_0x5ab73f(0x21b)]+_0x5ab73f(0x2d4)+_0x386afa+_0x5ab73f(0x20b)+_0x377181+_0x5ab73f(0x234)+_0x169726+'\x22.');let _0x54a485=0x0;const _0x537422=getWaveType(level),_0x3313be=_0x537422==='entrance_flight_2'&&(_0x386afa===0x2||_0x386afa===0x3);if(_0x3313be){const _0x30d657=Math[_0x5ab73f(0x2f8)](_0x377181/0x2);_0x377181%0x2===0x0?_0x54a485=_0x30d657*_0x4a211d:_0x54a485=_0x30d657*_0x4a211d+_0x384d90;}else _0x54a485=_0x377181*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x4d2f80=setTimeout(()=>{const _0x33719e=_0x5ab73f,_0x4e88d=enemySpawnTimeouts[_0x33719e(0x228)](_0x4d2f80);if(_0x4e88d>-0x1)enemySpawnTimeouts[_0x33719e(0x32a)](_0x4e88d,0x1);let _0x45d07e=![];isTwoPlayerMode&&selectedGameMode===_0x33719e(0x285)?_0x45d07e=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x45d07e=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x45d07e||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x386afa]&&squadronCompletionStatus[_0x386afa][_0x33719e(0x30b)]++;return;}try{let _0x5eae2=_0xf060d3[_0x33719e(0x306)],_0x11fa29=_0x5eae2===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x384711,_0x1b299f;if(_0x5eae2===ENEMY1_TYPE)_0x384711=ENEMY1_WIDTH,_0x1b299f=ENEMY1_HEIGHT;else _0x5eae2===ENEMY3_TYPE?(_0x384711=BOSS_WIDTH,_0x1b299f=BOSS_HEIGHT):(_0x384711=ENEMY_WIDTH,_0x1b299f=ENEMY_HEIGHT);let _0x51feb8=0x0,_0x2454dc=0x0;if(_0x3846f0&&_0x3846f0[0x0]?.['p0'])_0x51feb8=_0x3846f0[0x0]['p0']['x'],_0x2454dc=_0x3846f0[0x0]['p0']['y'];else throw new Error(_0x33719e(0x247)+_0x169726);let _0x2363fc,_0x5976d4;try{const {x:_0x386dc0,y:_0x2520f6}=getCurrentGridSlotPosition(_0xf060d3[_0x33719e(0x1e0)],_0xf060d3[_0x33719e(0x277)],_0x384711);_0x2363fc=_0x386dc0,_0x5976d4=_0x2520f6;}catch(_0x34108){console[_0x33719e(0x208)](_0x33719e(0x23a)+_0xf060d3[_0x33719e(0x306)]+_0x33719e(0x2ad)+_0xf060d3['gridRow']+','+_0xf060d3['gridCol']+']',_0x34108),_0x2363fc=gameCanvas?.[_0x33719e(0x227)]/0x2||0xc8,_0x5976d4=ENEMY_TOP_MARGIN+_0xf060d3[_0x33719e(0x1e0)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x255133=0x0;const _0x32ff80=_0x3313be,_0x3ad11f=_0x32ff80&&_0x377181%0x2!==0x0;_0x3ad11f?_0x255133=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x255133=-_0x377181*PATH_T_OFFSET_PER_ENEMY;const _0x485c98={'x':_0x51feb8,'y':_0x2454dc,'width':_0x384711,'height':_0x1b299f,'targetGridX':_0x2363fc,'targetGridY':_0x5976d4,'speed':0x0,'state':_0x33719e(0x223),'gridRow':_0xf060d3[_0x33719e(0x1e0)],'gridCol':_0xf060d3[_0x33719e(0x277)],'type':_0x5eae2,'health':_0x11fa29,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x169726,'pathSegmentIndex':0x0,'pathT':_0x255133,'squadronId':_0x386afa,'squadronEnemyIndex':_0x377181,'id':_0x33719e(0x2ec)+_0x386afa+'-'+_0x377181+'-'+Date[_0x33719e(0x2fb)]()+'-'+Math[_0x33719e(0x292)]()['toString'](0x24)['substring'](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x5eae2===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x5eae2===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x33719e(0x22b)](_0x485c98),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x386afa]&&squadronCompletionStatus[_0x386afa][_0x33719e(0x30b)]++;if(_0x377181===0x0){let _0x2c9b1d=0x5dc;(_0x386afa===0x0||_0x386afa===0x1)&&(_0x2c9b1d=0xfa);const _0x2c0ddc=_0x485c98['id'],_0x35ac17=setTimeout(()=>{const _0x218a83=_0x33719e,_0x971d54=enemySpawnTimeouts[_0x218a83(0x228)](_0x35ac17);if(_0x971d54>-0x1)enemySpawnTimeouts['splice'](_0x971d54,0x1);let _0x4c9378=![];isTwoPlayerMode&&selectedGameMode===_0x218a83(0x285)?_0x4c9378=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x4c9378=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x4c9378||isChallengingStage||isWaveTransitioning||isFullGridWave)return;fireFixedEnemyBurst(_0x2c0ddc,null,0x0,0x3);},_0x2c9b1d);enemySpawnTimeouts[_0x33719e(0x22b)](_0x35ac17);}}catch(_0x372bee){console[_0x33719e(0x208)]('Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20'+_0x386afa+_0x33719e(0x264)+_0x377181+_0x33719e(0x24a)+_0x169726+'):',_0x372bee),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x386afa]&&squadronCompletionStatus[_0x386afa][_0x33719e(0x30b)]++;}},_0x54a485);enemySpawnTimeouts[_0x5ab73f(0x22b)](_0x4d2f80);});}catch(_0x14eaee){console[_0x4d2ee0(0x208)](_0x4d2ee0(0x2a6)+_0x386afa+'\x20(Path\x20'+_0x169726+'):',_0x14eaee),_0x40190a?.[_0x4d2ee0(0x29f)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x40190a[_0x4d2ee0(0x29f)][_0x4d2ee0(0x1d8)],squadronCompletionStatus[_0x386afa]&&(squadronCompletionStatus[_0x386afa][_0x4d2ee0(0x30b)]=squadronCompletionStatus[_0x386afa][_0x4d2ee0(0x22e)]));}},_0x2dc33c);return enemySpawnTimeouts[_0x2b09ce(0x22b)](_0x123e32),!![];};function scheduleEntranceFlightWave(){const _0x32e2a9=_0x109c4f;if(isFullGridWave||isChallengingStage||!currentWaveDefinition||currentWaveDefinition[_0x32e2a9(0x1d8)]===0x0){console[_0x32e2a9(0x2e4)](_0x32e2a9(0x2ba)+level+_0x32e2a9(0x326)+isFullGridWave+_0x32e2a9(0x256)+isChallengingStage+_0x32e2a9(0x214)+currentWaveDefinition?.[_0x32e2a9(0x1d8)]),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts[_0x32e2a9(0x324)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x130622=0x0,_0x352c82=0x0;currentWaveDefinition[_0x32e2a9(0x324)]((_0x32c6dc,_0x15f802)=>{const _0x2a3d37=_0x32e2a9;_0x32c6dc&&_0x32c6dc['enemies']&&Array[_0x2a3d37(0x279)](_0x32c6dc['enemies'])&&_0x32c6dc[_0x2a3d37(0x29f)][_0x2a3d37(0x1d8)]>0x0?(totalEnemiesScheduledForWave+=_0x32c6dc[_0x2a3d37(0x29f)][_0x2a3d37(0x1d8)],squadronCompletionStatus[_0x15f802]={'completed':0x0,'total':_0x32c6dc[_0x2a3d37(0x29f)][_0x2a3d37(0x1d8)],'hasFiredPostLanding':![]},squadronEntranceFiringStatus[_0x15f802]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x32c6dc,_0x15f802,_0x130622)&&_0x352c82++,_0x130622+=NORMAL_WAVE_SQUADRON_INTERVAL):console[_0x2a3d37(0x2e4)](_0x2a3d37(0x276)+_0x15f802+_0x2a3d37(0x24e));}),_0x352c82===0x0&&totalEnemiesScheduledForWave===0x0?(console[_0x32e2a9(0x2e4)]('Entrance\x20Wave:\x20No\x20squadrons\x20or\x20enemies\x20scheduled\x20for\x20level\x20'+level+_0x32e2a9(0x202)),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![]):isEntrancePhaseActive=!![];}function startChallengingStageSequence(){const _0x3c2960=_0x109c4f;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts[_0x3c2960(0x324)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object['keys'](challengingStagePaths)[_0x3c2960(0x1d8)]===0x0&&defineChallengingStagePaths();if(Object['keys'](challengingStagePaths)[_0x3c2960(0x1d8)]===0x0){console[_0x3c2960(0x208)](_0x3c2960(0x23e)),isWaveTransitioning=!![],setTimeout(()=>{const _0x4f7b7b=_0x3c2960;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x4f7b7b(0x285)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x4f7b7b(0x1d3)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x44e193=['CS3_DiveLoopL_Sharp',_0x3c2960(0x2ea),_0x3c2960(0x231),_0x3c2960(0x1e6)],_0x791006=['CS_LoopAttack_TL','CS_LoopAttack_TR',_0x3c2960(0x298),'CS_LoopAttack_BR'],_0x19de83=[..._0x44e193,..._0x791006];for(const _0x101566 of _0x19de83){if(!challengingStagePaths[_0x3c2960(0x28b)](_0x101566)){console[_0x3c2960(0x208)](_0x3c2960(0x25e)+_0x101566+_0x3c2960(0x320)),isWaveTransitioning=!![],setTimeout(()=>{const _0x30dd04=_0x3c2960;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x30dd04(0x285)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x30dd04(0x1d3)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x307971=[..._0x44e193],_0x41f9c8=[..._0x791006][_0x3c2960(0x1f0)](()=>Math[_0x3c2960(0x292)]()-0.5);_0x307971['push'](..._0x41f9c8),currentWaveDefinition=[];for(let _0x246800=0x0;_0x246800<CHALLENGING_STAGE_SQUADRON_COUNT;_0x246800++){const _0x2628ff=_0x307971[_0x246800],_0x21a24a={'pathId':_0x2628ff,'enemies':[]};for(let _0x12469f=0x0;_0x12469f<CHALLENGING_STAGE_SQUADRON_SIZE;_0x12469f++){let _0x321c2a=_0x12469f<Math[_0x3c2960(0x2f8)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x21a24a[_0x3c2960(0x29f)][_0x3c2960(0x22b)]({'type':_0x321c2a,'entrancePathId':_0x2628ff});}currentWaveDefinition[_0x3c2960(0x22b)](_0x21a24a);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0x3c2960(0x1d8)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0xb8cf43=0x0;const _0xf11fc1=-0x1c,_0x4b4295=Math[_0x3c2960(0x2f8)](Math[_0x3c2960(0x2c4)](0x0,level-0x3)/0x4)+0x1,_0x4a45e6=scaleValue(_0x4b4295,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition[_0x3c2960(0x324)]((_0x2fe9d5,_0x43c339)=>{const _0x5f4825=_0x3c2960;let _0x49fbd1=0x0;if(_0x43c339<=0x1)_0x49fbd1=0x0;else _0x43c339<=0x3?_0x49fbd1=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x49fbd1=(_0x43c339-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x210126=_0x4a45e6;(_0x43c339===0x2||_0x43c339===0x3)&&(_0x210126*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x1ed86e=setTimeout(()=>{const _0x172681=_0x31c3,_0x367d86=enemySpawnTimeouts[_0x172681(0x228)](_0x1ed86e);if(_0x367d86>-0x1)enemySpawnTimeouts[_0x172681(0x32a)](_0x367d86,0x1);let _0x2fca98=![];isTwoPlayerMode&&selectedGameMode===_0x172681(0x285)?_0x2fca98=player1Lives>0x0||player2Lives>0x0:_0x2fca98=playerLives>0x0;if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&_0x2fca98)try{const _0x1ac444=_0x2fe9d5[_0x172681(0x2c2)],_0x18e6db=challengingStagePaths,_0x187689=_0x18e6db[_0x1ac444];if(!_0x187689||_0x187689['length']===0x0){console['error']('CS:\x20Path\x20'+_0x1ac444+_0x172681(0x1e7)+_0x43c339+_0x172681(0x2a7)),enemiesSpawnedThisWave+=_0x2fe9d5[_0x172681(0x29f)]['length'];return;}let _0x1e083d=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x43c339>=0x2&&_0x43c339<=0x3)_0x1e083d=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x43c339>=0x4&&(_0x1e083d=CS_LOOP_ATTACK_SPAWN_DELAY);_0x2fe9d5[_0x172681(0x29f)][_0x172681(0x324)]((_0xc96c1d,_0x24e5ef)=>{const _0x51bed9=_0x172681;if(!_0xc96c1d||!_0xc96c1d['type']){console['error']('CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20'+_0x43c339+_0x51bed9(0x20b)+_0x24e5ef+_0x51bed9(0x270)),enemiesSpawnedThisWave++;return;}const _0x203945=_0x24e5ef*_0x1e083d,_0x441ecd=setTimeout(()=>{const _0x2a8341=_0x51bed9,_0x2b0b85=enemySpawnTimeouts[_0x2a8341(0x228)](_0x441ecd);if(_0x2b0b85>-0x1)enemySpawnTimeouts[_0x2a8341(0x32a)](_0x2b0b85,0x1);let _0x3cea40=![];isTwoPlayerMode&&selectedGameMode===_0x2a8341(0x285)?_0x3cea40=player1Lives>0x0||player2Lives>0x0:_0x3cea40=playerLives>0x0;if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||!_0x3cea40){enemiesSpawnedThisWave++;return;}try{let _0xc2fae4=_0xc96c1d['type'],_0x1338d3=_0xc2fae4===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x328fa3,_0x454bb8;if(_0xc2fae4===ENEMY1_TYPE)_0x328fa3=ENEMY1_WIDTH,_0x454bb8=ENEMY1_HEIGHT;else _0xc2fae4===ENEMY3_TYPE?(_0x328fa3=BOSS_WIDTH,_0x454bb8=BOSS_HEIGHT):(_0x328fa3=ENEMY_WIDTH,_0x454bb8=ENEMY_HEIGHT);let _0x29b218=0x0,_0x1ba79b=0x0;if(_0x187689[0x0]?.['p0'])_0x29b218=_0x187689[0x0]['p0']['x'],_0x1ba79b=_0x187689[0x0]['p0']['y'];else throw new Error(_0x2a8341(0x1db)+_0x1ac444);(_0x43c339===0x0||_0x43c339===0x1)&&(_0x29b218+=_0xf11fc1);const _0x6582a4=-_0x24e5ef*PATH_T_OFFSET_PER_ENEMY,_0x28426b={'x':_0x29b218,'y':_0x1ba79b,'width':_0x328fa3,'height':_0x454bb8,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x2a8341(0x206),'gridRow':-0x1,'gridCol':-0x1,'type':_0xc2fae4,'health':_0x1338d3,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x1ac444,'pathSegmentIndex':0x0,'pathT':_0x6582a4,'squadronId':_0x43c339,'id':_0x2a8341(0x2e2)+_0x43c339+'-'+_0x24e5ef+'-'+Date[_0x2a8341(0x2fb)]()+'-'+Math[_0x2a8341(0x292)]()[_0x2a8341(0x26c)](0x24)[_0x2a8341(0x2a4)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0xc2fae4===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0xc2fae4===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x210126};enemies[_0x2a8341(0x22b)](_0x28426b),enemiesSpawnedThisWave++;}catch(_0x4b8bcd){console[_0x2a8341(0x208)]('CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20'+_0x43c339+_0x2a8341(0x264)+_0x24e5ef+_0x2a8341(0x24a)+_0x1ac444+'):',_0x4b8bcd),enemiesSpawnedThisWave++;}},_0x203945);enemySpawnTimeouts[_0x51bed9(0x22b)](_0x441ecd),_0xb8cf43++;});}catch(_0x4d98c7){console[_0x172681(0x208)](_0x172681(0x240)+_0x43c339+':',_0x4d98c7),enemiesSpawnedThisWave+=_0x2fe9d5[_0x172681(0x29f)][_0x172681(0x1d8)];}else _0x2fe9d5?.['enemies']?.[_0x172681(0x1d8)]>0x0&&(enemiesSpawnedThisWave+=_0x2fe9d5[_0x172681(0x29f)][_0x172681(0x1d8)]);},_0x49fbd1);enemySpawnTimeouts[_0x5f4825(0x22b)](_0x1ed86e);});}else console[_0x3c2960(0x2e4)](_0x3c2960(0x22c)),isWaveTransitioning=!![],setTimeout(()=>{const _0x4ce06b=_0x3c2960;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x4ce06b(0x285)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x4ce06b(0x1d3)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x48b0e7,_0x420ed5,_0x4de1a3){const _0x2f1cd9=_0x109c4f;let _0x171862=![];isTwoPlayerMode&&selectedGameMode===_0x2f1cd9(0x285)?_0x171862=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x171862=playerLives>0x0&&!isShipCaptured;if(!_0x48b0e7||isPaused||!isInGameState||!_0x171862||isChallengingStage||isWaveTransitioning)return;const _0x11b770=Math[_0x2f1cd9(0x297)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x2b69ae=0x0;_0x2b69ae<_0x11b770;_0x2b69ae++){const _0x277aa5=_0x4de1a3+_0x2b69ae*ENTRANCE_FIRE_BURST_DELAY_MS,_0x153958=setTimeout(()=>{const _0x8d7514=_0x2f1cd9;try{const _0x413983=enemySpawnTimeouts['indexOf'](_0x153958);_0x413983>-0x1&&enemySpawnTimeouts['splice'](_0x413983,0x1);let _0x14f041=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x14f041=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x14f041=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x14f041||isChallengingStage||isWaveTransitioning)return;const _0x33fe38=enemies[_0x8d7514(0x1ce)](_0x4c16c5=>_0x4c16c5&&_0x4c16c5['id']===_0x48b0e7);_0x33fe38&&_0x33fe38[_0x8d7514(0x280)]===_0x420ed5&&(createBulletSimple(_0x33fe38)&&(_0x2b69ae===0x0&&playSound(_0x8d7514(0x2bb),![],0.4),_0x33fe38[_0x8d7514(0x2d9)]=Date[_0x8d7514(0x2fb)]()));}catch(_0x49f4ad){console[_0x8d7514(0x208)](_0x8d7514(0x23d)+(_0x2b69ae+0x1)+'/'+_0x11b770+_0x8d7514(0x1f1)+_0x48b0e7+':',_0x49f4ad);}},_0x277aa5);enemySpawnTimeouts[_0x2f1cd9(0x22b)](_0x153958);}}function fireFixedEnemyBurst(_0x1be04f,_0x28f6ff,_0x361955,_0x3bc946){const _0x1775e5=_0x109c4f;let _0x4eeffc=![];isTwoPlayerMode&&selectedGameMode===_0x1775e5(0x285)?_0x4eeffc=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x4eeffc=playerLives>0x0&&!isShipCaptured;if(!_0x1be04f||isPaused||!isInGameState||!_0x4eeffc||isChallengingStage||isWaveTransitioning||_0x3bc946<=0x0)return;for(let _0x49cdbc=0x0;_0x49cdbc<_0x3bc946;_0x49cdbc++){const _0x18f4f2=_0x361955+_0x49cdbc*ENTRANCE_FIRE_BURST_DELAY_MS,_0x36d50f=setTimeout(()=>{const _0x16feb8=_0x1775e5;try{const _0x2045ca=enemySpawnTimeouts[_0x16feb8(0x228)](_0x36d50f);_0x2045ca>-0x1&&enemySpawnTimeouts[_0x16feb8(0x32a)](_0x2045ca,0x1);let _0xa26b41=![];isTwoPlayerMode&&selectedGameMode===_0x16feb8(0x285)?_0xa26b41=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0xa26b41=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0xa26b41||isChallengingStage||isWaveTransitioning)return;const _0x2c3de8=enemies[_0x16feb8(0x1ce)](_0x239a62=>_0x239a62&&_0x239a62['id']===_0x1be04f);if(_0x2c3de8)createBulletSimple(_0x2c3de8)&&(_0x49cdbc===0x0&&playSound(_0x16feb8(0x2bb),![],0.4),_0x2c3de8[_0x16feb8(0x2d9)]=Date['now']());else{}}catch(_0xbf661f){console['error'](_0x16feb8(0x1da)+(_0x49cdbc+0x1)+'/'+_0x3bc946+')\x20for\x20'+_0x1be04f+':',_0xbf661f);}},_0x18f4f2);enemySpawnTimeouts[_0x1775e5(0x22b)](_0x36d50f);}}function startFullGridWave(){const _0x346dbe=_0x109c4f;if(!currentWaveDefinition||currentWaveDefinition[_0x346dbe(0x1d8)]===0x0||!isFullGridWave){console[_0x346dbe(0x208)](_0x346dbe(0x257)),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(_0x346dbe(0x2e1),![],0.4),enemySpawnTimeouts[_0x346dbe(0x324)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x1f1574=0x0;currentWaveDefinition[_0x346dbe(0x324)]((_0x2f6eca,_0x3d94e1)=>{const _0x25e15f=_0x346dbe;let _0x44fd8e=0x0;_0x2f6eca&&_0x2f6eca[_0x25e15f(0x29f)]&&Array[_0x25e15f(0x279)](_0x2f6eca[_0x25e15f(0x29f)])?(_0x44fd8e=_0x2f6eca['enemies'][_0x25e15f(0x1d8)],_0x2f6eca[_0x25e15f(0x29f)]['forEach']((_0x4cad55,_0x27c399)=>{const _0x1dcb2d=_0x25e15f;try{if(!_0x4cad55||!_0x4cad55['type']||typeof _0x4cad55[_0x1dcb2d(0x1e0)]===_0x1dcb2d(0x31d)||typeof _0x4cad55['gridCol']===_0x1dcb2d(0x31d)){console['error'](_0x1dcb2d(0x291)+_0x3d94e1+_0x1dcb2d(0x20b)+_0x27c399+_0x1dcb2d(0x270));return;}let _0x1ac5fa=_0x4cad55['type'],_0x1cbe8e=_0x1ac5fa===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x4076cc,_0x4e59f5;if(_0x1ac5fa===ENEMY1_TYPE)_0x4076cc=ENEMY1_WIDTH,_0x4e59f5=ENEMY1_HEIGHT;else _0x1ac5fa===ENEMY3_TYPE?(_0x4076cc=BOSS_WIDTH,_0x4e59f5=BOSS_HEIGHT):(_0x4076cc=ENEMY_WIDTH,_0x4e59f5=ENEMY_HEIGHT);let _0x40e57f,_0x371ca8;try{const {x:_0x928f1c,y:_0x704429}=getCurrentGridSlotPosition(_0x4cad55[_0x1dcb2d(0x1e0)],_0x4cad55[_0x1dcb2d(0x277)],_0x4076cc);_0x40e57f=_0x928f1c,_0x371ca8=_0x704429;}catch(_0x509864){console[_0x1dcb2d(0x208)](_0x1dcb2d(0x236)+_0x4cad55['type']+'\x20at\x20['+_0x4cad55[_0x1dcb2d(0x1e0)]+','+_0x4cad55[_0x1dcb2d(0x277)]+']',_0x509864),_0x40e57f=gameCanvas?.[_0x1dcb2d(0x227)]/0x2||0xc8,_0x371ca8=ENEMY_TOP_MARGIN+_0x4cad55[_0x1dcb2d(0x1e0)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x4bac35={'x':_0x40e57f,'y':_0x371ca8,'width':_0x4076cc,'height':_0x4e59f5,'targetGridX':_0x40e57f,'targetGridY':_0x371ca8,'speed':0x0,'state':_0x1dcb2d(0x2e0),'gridRow':_0x4cad55[_0x1dcb2d(0x1e0)],'gridCol':_0x4cad55['gridCol'],'type':_0x1ac5fa,'health':_0x1cbe8e,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x3d94e1,'squadronEnemyIndex':_0x27c399,'id':_0x1dcb2d(0x1f3)+_0x3d94e1+'-'+_0x27c399+'-'+Date[_0x1dcb2d(0x2fb)]()+'-'+Math['random']()[_0x1dcb2d(0x26c)](0x24)[_0x1dcb2d(0x2a4)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x1dcb2d(0x325),'hasCapturedShip':_0x1ac5fa===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x1ac5fa===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x1dcb2d(0x22b)](_0x4bac35),_0x1f1574++;}catch(_0x52ec07){console[_0x1dcb2d(0x208)](_0x1dcb2d(0x309)+_0x3d94e1+_0x1dcb2d(0x264)+_0x27c399+'):',_0x52ec07);}})):console[_0x25e15f(0x2e4)](_0x25e15f(0x2c0)+_0x3d94e1+_0x25e15f(0x1eb)),squadronCompletionStatus[_0x3d94e1]={'completed':_0x44fd8e,'total':_0x44fd8e};}),totalEnemiesScheduledForWave=_0x1f1574,enemiesSpawnedThisWave=_0x1f1574,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0x346dbe(0x2b6),!![],0.1)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date[_0x346dbe(0x2fb)](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date['now'](),firstEnemyLanded=!![];}function renderGame(){const _0x287af3=_0x109c4f;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0x287af3(0x27c)](0x0,0x0,gameCanvas[_0x287af3(0x227)],gameCanvas[_0x287af3(0x1fd)]);const _0x3eab3f=Date['now']();gameCtx['save']();const _0x9925d8=_0x287af3(0x318),_0x38b3cf='red',_0x495e57=_0x287af3(0x24c);let _0x53cf3c,_0x1dbd13,_0x5ce168,_0x17f4fc,_0x14a19b=![],_0x18160d=![],_0x3f4b99=![];if(isShowingResultsScreen){}else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage){}else{if(isShowingPlayerGameOverMessage){}else{if(!isInGameState){}else{_0x5ce168=highScore||0x0;if(!isManualControl){}else{if(isTwoPlayerMode&&selectedGameMode===_0x287af3(0x285)){_0x53cf3c=player1Score,_0x1dbd13=player2Score,_0x5ce168=Math[_0x287af3(0x2c4)](highScore,player1Score,player2Score),_0x17f4fc=_0x287af3(0x1d4),_0x14a19b=!isShowingIntro&&!isPaused&&player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x18160d=!isShowingIntro&&!isPaused&&player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if(player1Score>=_0x5ce168&&player1Score>0x0)_0x3f4b99=_0x14a19b;if(player2Score>=_0x5ce168&&player2Score>0x0&&player2Score>player1Score)_0x3f4b99=_0x18160d;}else isTwoPlayerMode&&selectedGameMode===_0x287af3(0x325)?(_0x53cf3c=currentPlayer===0x1?score:player1Score,_0x1dbd13=currentPlayer===0x2?score:player2Score,_0x5ce168=Math[_0x287af3(0x2c4)](highScore,player1Score,player2Score,score),_0x17f4fc='1UP',_0x14a19b=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x18160d=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x3f4b99=!isPaused&&!isShowingIntro&&score>0x0&&_0x5ce168>0x0&&score>=_0x5ce168):(_0x53cf3c=score,_0x1dbd13=0x0,_0x17f4fc=_0x287af3(0x1d4));}}}}}let _0x3b026f=![];if(_0x3f4b99){}typeof MARGIN_SIDE!==_0x287af3(0x31d)&&typeof MARGIN_TOP!==_0x287af3(0x31d)&&typeof SCORE_OFFSET_Y!==_0x287af3(0x31d)&&(drawTopUiElement(_0x17f4fc,_0x53cf3c,_0x287af3(0x21a),MARGIN_SIDE,_0x14a19b),drawTopUiElement(_0x287af3(0x329),_0x5ce168,_0x287af3(0x305),gameCanvas[_0x287af3(0x227)]/0x2,_0x3b026f),drawTopUiElement(_0x287af3(0x323),_0x1dbd13,_0x287af3(0x31c),gameCanvas[_0x287af3(0x227)]-MARGIN_SIDE,_0x18160d));if(typeof shipImage!==_0x287af3(0x31d)&&typeof LIFE_ICON_MARGIN_BOTTOM!==_0x287af3(0x31d)&&typeof LIFE_ICON_SIZE!==_0x287af3(0x31d)&&typeof LIFE_ICON_MARGIN_LEFT!==_0x287af3(0x31d)&&typeof LIFE_ICON_SPACING!==_0x287af3(0x31d)){if(shipImage['complete']&&shipImage[_0x287af3(0x2df)]!==0x0){const _0x57d85d=gameCanvas[_0x287af3(0x1fd)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0xf9ee21=0x0,_0x53883c=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x287af3(0x285)){if(player1Lives>0x0)_0xf9ee21=Math[_0x287af3(0x2c4)](0x0,player1Lives-0x1);if(player2Lives>0x0)_0x53883c=Math[_0x287af3(0x2c4)](0x0,player2Lives-0x1);}else{if(playerLives>0x0)_0xf9ee21=Math[_0x287af3(0x2c4)](0x0,playerLives-0x1);}const _0xd35e3=0x5;for(let _0x4f2e8f=0x0;_0x4f2e8f<Math[_0x287af3(0x2f5)](_0xf9ee21,_0xd35e3);_0x4f2e8f++){const _0x4ac410=LIFE_ICON_MARGIN_LEFT+_0x4f2e8f*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x287af3(0x1ef)](shipImage,Math[_0x287af3(0x297)](_0x4ac410),Math[_0x287af3(0x297)](_0x57d85d),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}if(isTwoPlayerMode&&selectedGameMode===_0x287af3(0x285)){const _0x53f613=gameCanvas[_0x287af3(0x227)]-LIFE_ICON_MARGIN_RIGHT-Math[_0x287af3(0x2f5)](_0x53883c,_0xd35e3)*(LIFE_ICON_SIZE+LIFE_ICON_SPACING)+LIFE_ICON_SPACING;for(let _0x107c34=0x0;_0x107c34<Math[_0x287af3(0x2f5)](_0x53883c,_0xd35e3);_0x107c34++){const _0x42853f=_0x53f613+_0x107c34*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx['drawImage'](shipImage,Math[_0x287af3(0x297)](_0x42853f),Math['round'](_0x57d85d),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}}gameCtx[_0x287af3(0x249)](),gameCtx[_0x287af3(0x299)]();if(isTwoPlayerMode&&selectedGameMode===_0x287af3(0x285)){if(ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured){let _0x3a84d9=!![];if(isPlayer1Invincible){const _0x4e27ad=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x3eab3f%_0x4e27ad>=INVINCIBILITY_BLINK_ON_MS)_0x3a84d9=![];}if(_0x3a84d9){const _0xcc725a=ship1['x'],_0x43eeaa=ship1['y'];typeof shipImage!==_0x287af3(0x31d)&&shipImage[_0x287af3(0x21f)]?(gameCtx[_0x287af3(0x1ef)](shipImage,Math[_0x287af3(0x297)](_0xcc725a),Math[_0x287af3(0x297)](_0x43eeaa),ship1[_0x287af3(0x227)],ship1['height']),player1IsDualShipActive&&gameCtx[_0x287af3(0x1ef)](shipImage,Math['round'](_0xcc725a+DUAL_SHIP_OFFSET_X),Math[_0x287af3(0x297)](_0x43eeaa),ship1[_0x287af3(0x227)],ship1[_0x287af3(0x1fd)])):(gameCtx[_0x287af3(0x26f)]=_0x287af3(0x308),gameCtx['fillRect'](Math[_0x287af3(0x297)](_0xcc725a),Math[_0x287af3(0x297)](_0x43eeaa),ship1[_0x287af3(0x227)],ship1[_0x287af3(0x1fd)]));}}if(ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured){let _0x3569ed=!![];if(isPlayer2Invincible){const _0x556fcd=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x3eab3f%_0x556fcd>=INVINCIBILITY_BLINK_ON_MS)_0x3569ed=![];}if(_0x3569ed){const _0x3b5991=ship2['x'],_0x135b55=ship2['y'];typeof shipImage!==_0x287af3(0x31d)&&shipImage[_0x287af3(0x21f)]?(gameCtx['drawImage'](shipImage,Math[_0x287af3(0x297)](_0x3b5991),Math[_0x287af3(0x297)](_0x135b55),ship2['width'],ship2[_0x287af3(0x1fd)]),player2IsDualShipActive&&gameCtx[_0x287af3(0x1ef)](shipImage,Math[_0x287af3(0x297)](_0x3b5991+DUAL_SHIP_OFFSET_X),Math[_0x287af3(0x297)](_0x135b55),ship2[_0x287af3(0x227)],ship2[_0x287af3(0x1fd)])):(gameCtx[_0x287af3(0x26f)]=_0x287af3(0x20c),gameCtx[_0x287af3(0x287)](Math[_0x287af3(0x297)](_0x3b5991),Math[_0x287af3(0x297)](_0x135b55),ship2[_0x287af3(0x227)],ship2[_0x287af3(0x1fd)]));}}}else{if(ship&&!isShowingCaptureMessage){let _0x9dfd65=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x1f64a3=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x3eab3f%_0x1f64a3>=INVINCIBILITY_BLINK_ON_MS)_0x9dfd65=![];}if(_0x9dfd65){let _0x101c67=ship['x'],_0x402c3c=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x402c3c&&(_0x101c67=Math[_0x287af3(0x297)](gameCanvas['width']/0x2-ship[_0x287af3(0x227)]/0x2));const _0x28cb71=ship['y'];typeof shipImage!==_0x287af3(0x31d)&&shipImage[_0x287af3(0x21f)]?(gameCtx[_0x287af3(0x1ef)](shipImage,Math['round'](_0x101c67),Math[_0x287af3(0x297)](_0x28cb71),ship['width'],ship[_0x287af3(0x1fd)]),isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&gameCtx[_0x287af3(0x1ef)](shipImage,Math[_0x287af3(0x297)](_0x101c67+DUAL_SHIP_OFFSET_X),Math['round'](_0x28cb71),ship[_0x287af3(0x227)],ship[_0x287af3(0x1fd)])):(gameCtx[_0x287af3(0x26f)]=_0x287af3(0x308),gameCtx[_0x287af3(0x287)](Math[_0x287af3(0x297)](_0x101c67),Math[_0x287af3(0x297)](_0x28cb71),ship[_0x287af3(0x227)],ship[_0x287af3(0x1fd)]));}}}if(fallingShips['length']>0x0&&typeof shipImage!=='undefined'&&shipImage[_0x287af3(0x21f)]){}gameCtx[_0x287af3(0x249)]();if(!isInGameState){if(isShowingScoreScreen){}else{gameCtx['save']();const _0x83e74b=gameCanvas[_0x287af3(0x227)],_0xb6dc5b=gameCanvas[_0x287af3(0x1fd)],_0x5d2659=_0x83e74b/0x2;selectedButtonIndex===-0x1&&(isPlayerSelectMode||isFiringModeSelectMode||isGameModeSelectMode||!isPlayerSelectMode&&!isFiringModeSelectMode&&!isGameModeSelectMode)&&(selectedButtonIndex=0x0);let _0x370ebb=MENU_LOGO_APPROX_HEIGHT,_0x1fd3fb=_0x370ebb*(logoImage['naturalWidth']/logoImage[_0x287af3(0x2df)]||0x1);typeof logoImage!=='undefined'&&logoImage[_0x287af3(0x21f)]&&logoImage['naturalHeight']!==0x0&&(_0x370ebb=logoImage[_0x287af3(0x2df)]*LOGO_SCALE_FACTOR,_0x1fd3fb=logoImage[_0x287af3(0x2ce)]*LOGO_SCALE_FACTOR);const _0x3cdbcb=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x35358e=_0x370ebb+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x3cdbcb;let _0x9f390e=(_0xb6dc5b-_0x35358e)/0x2-0x46;_0x9f390e+=MENU_GENERAL_Y_OFFSET;const _0x23c12e=_0x5d2659-_0x1fd3fb/0x2,_0x24f95b=_0x9f390e+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!=='undefined'&&logoImage[_0x287af3(0x21f)]&&logoImage[_0x287af3(0x2df)]!==0x0?gameCtx['drawImage'](logoImage,Math[_0x287af3(0x297)](_0x23c12e),Math[_0x287af3(0x297)](_0x24f95b),_0x1fd3fb,_0x370ebb):drawCanvasText(_0x287af3(0x1f9),_0x5d2659,_0x24f95b+_0x370ebb/0x2,_0x287af3(0x211),_0x287af3(0x26d));if(isGameModeSelectMode)drawCanvasButton('NORMAL\x20GAME',0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x287af3(0x2b2),0x1,selectedButtonIndex===0x1);else{if(isFiringModeSelectMode)drawCanvasButton(_0x287af3(0x259),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x287af3(0x20a),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0x287af3(0x314),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x287af3(0x2cc),0x1,selectedButtonIndex===0x1)):(drawCanvasButton('START\x20GAME',0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x287af3(0x200),0x1,selectedButtonIndex===0x1));}const _0x5e934d=getMenuButtonRect(0x1);let _0x39ecd4;_0x5e934d?_0x39ecd4=_0x5e934d['y']+_0x5e934d[_0x287af3(0x1fd)]+MENU_BUTTON_SUBTITLE_V_GAP+_0x3cdbcb/0x2:_0x39ecd4=_0x9f390e+_0x370ebb+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x3cdbcb/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x5d2659-0x1,Math[_0x287af3(0x297)](_0x39ecd4),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0x287af3(0x305),_0x287af3(0x1d5),!![]),gameCtx[_0x287af3(0x249)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0x287af3(0x299)]();let _0x2f5bda=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x2f5bda&&(bullets[_0x287af3(0x324)](_0x54c523=>{}),enemyBullets[_0x287af3(0x324)](_0x29f7bc=>{}));enemies[_0x287af3(0x324)](_0x1b8587=>{});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x5d08ed=![];const _0x32497a=gameCanvas[_0x287af3(0x1fd)]/0x2;if(isPaused){}else{if(isShowingCaptureMessage){}}gameCtx[_0x287af3(0x249)]();}else{if(isShowingPlayerGameOverMessage){}else{if(gameOverSequenceStartTime>0x0){}}}}}catch(_0x5455c1){console[_0x287af3(0x208)]('Error\x20in\x20renderGame:',_0x5455c1,_0x5455c1[_0x287af3(0x2a0)]);}}function handleEnemyHit(_0x35194c,_0xe93e70=null){const _0x2b9e87=_0x109c4f;if(!_0x35194c)return{'destroyed':![],'pointsAwarded':0x0};const _0x242f6a=Date[_0x2b9e87(0x2fb)]();let _0x470abf=0x0,_0x3a6d0d=![],_0x4920d1=_0x35194c[_0x2b9e87(0x2fc)],_0xf11cb=null,_0x2b219f=0x1;const _0x4e1dc1=_0x35194c[_0x2b9e87(0x306)]===ENEMY3_TYPE?BOSS_WIDTH:_0x35194c[_0x2b9e87(0x306)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x35cea4=_0x35194c['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0x35194c[_0x2b9e87(0x306)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x2488f7=_0x35194c[_0x2b9e87(0x306)]===ENEMY3_TYPE&&_0x35194c[_0x2b9e87(0x1f7)],_0x4c5069=_0x35194c[_0x2b9e87(0x306)]===ENEMY3_TYPE&&_0x35194c['capturedShipDimensions'];let _0x9ad78=![],_0x3fd4b4=null;if(_0x2488f7){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x35194c['id'])_0x9ad78=!![],_0x3fd4b4=_0x2b9e87(0x26b);else isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x35194c['id']&&(_0x9ad78=!![],_0x3fd4b4=_0x2b9e87(0x2c8));}else!isTwoPlayerMode&&isShipCaptured&&capturedBossIdWithMessage===_0x35194c['id']&&(_0x9ad78=!![]);}const _0x1dd226=_0x35194c['x']+_0x4e1dc1/0x2,_0x22cdb8=_0x35194c['y']+_0x35cea4*0.2;createHitSparks(_0x1dd226,_0x22cdb8),_0x35194c[_0x2b9e87(0x328)]--;_0x35194c[_0x2b9e87(0x306)]===ENEMY3_TYPE&&(_0x35194c[_0x2b9e87(0x2fc)]=_0x35194c[_0x2b9e87(0x328)]<ENEMY3_MAX_HITS);if(_0x35194c['health']<=0x0){_0x3a6d0d=!![];isChallengingStage&&challengingStageEnemiesHit++;if(_0x2488f7&&_0x4c5069){let _0xf531fd=null;if(_0x9ad78&&_0x3fd4b4)_0xf531fd=_0x3fd4b4;else{let _0x5ae869=![];if(isCoopAIDemoActive){if(_0xe93e70===_0x2b9e87(0x26b)&&player1IsDualShipActive)_0xf531fd=_0x2b9e87(0x2c8),_0x5ae869=!![];else _0xe93e70===_0x2b9e87(0x2c8)&&player2IsDualShipActive&&(_0xf531fd=_0x2b9e87(0x26b),_0x5ae869=!![]);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2b9e87(0x301)){if(_0xe93e70==='ai_p2'&&player2IsDualShipActive)_0xf531fd=_0x2b9e87(0x26b),_0x5ae869=!![];else _0xe93e70===_0x2b9e87(0x26b)&&player1IsDualShipActive&&(_0xf531fd='ai_p2',_0x5ae869=!![]);}}!_0x5ae869&&(_0xf531fd=_0xe93e70);}_0xf531fd===null&&_0xe93e70&&(_0xf531fd=_0xe93e70);if(_0x35194c[_0x2b9e87(0x239)]){const _0x1432cc=_0x35194c[_0x2b9e87(0x239)]['width'],_0x234ac4=_0x35194c[_0x2b9e87(0x239)][_0x2b9e87(0x1fd)],_0x204ec1=_0x35194c['x']+(_0x4e1dc1-_0x1432cc)/0x2+CAPTURED_SHIP_OFFSET_X,_0x4e1715=_0x35194c['y']+CAPTURED_SHIP_OFFSET_Y,_0xb71b54=fallingShips['some'](_0x17a057=>Math[_0x2b9e87(0x275)](_0x17a057['x']-_0x204ec1)<0x1&&Math['abs'](_0x17a057['y']-_0x4e1715)<0x1);!_0xb71b54&&fallingShips[_0x2b9e87(0x22b)]({'x':_0x204ec1,'y':_0x4e1715,'width':_0x1432cc,'height':_0x234ac4,'creationTime':_0x242f6a,'tintProgress':0x1,'rotation':0x0,'rotationDirection':Math['random']()<0.5?-0x1:0x1,'totalRotation':0x0,'rotationCompleted':![],'targetPlayerId':_0xf531fd});}else console['error']('[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!');_0x35194c['hasCapturedShip']=![],_0x35194c['capturedShipDimensions']=null;}else _0x2488f7&&!_0x4c5069&&(console['error'](_0x2b9e87(0x20d)+_0x35194c['id']+_0x2b9e87(0x2ff)),_0x35194c[_0x2b9e87(0x1f7)]=![],_0x35194c['capturedShipDimensions']=null);if(isChallengingStage){let _0x5bc126=0x64;const _0x5b11fc=csLastHitTime;csLastHitTime=_0x242f6a,csLastChainHitPosition={'x':_0x35194c['x'],'y':_0x35194c['y']},csCurrentChainHits>0x0&&_0x242f6a-_0x5b11fc<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x5bc126*=0x2),_0x470abf=_0x5bc126,csCurrentChainScore+=_0x470abf,scoreEarnedThisCS+=_0x470abf,_0xf11cb='explosionSound',_0x2b219f=0.4;}else{if(_0x35194c['state']==='in_grid')_0x470abf=_0x35194c[_0x2b9e87(0x306)]===ENEMY1_TYPE?0x32:_0x35194c[_0x2b9e87(0x306)]===ENEMY2_TYPE?0x50:0x0,_0x35194c[_0x2b9e87(0x306)]===ENEMY3_TYPE&&(_0x470abf=0x96),_0xf11cb=_0x2b9e87(0x25d),_0x2b219f=0.4;else{_0x470abf=_0x35194c['type']===ENEMY1_TYPE?0x64:_0x35194c[_0x2b9e87(0x306)]===ENEMY2_TYPE?0xa0:0x0;if(_0x35194c[_0x2b9e87(0x306)]===ENEMY3_TYPE){if(_0x2488f7){const _0x35b2b7=[0x3e8,0x5dc,0x7d0,0xbb8];_0x470abf=_0x35b2b7[Math[_0x2b9e87(0x2f8)](Math['random']()*_0x35b2b7[_0x2b9e87(0x1d8)])],_0xf11cb=_0x2b9e87(0x283),_0x2b219f=0.4;}else _0x4920d1?(_0x470abf=0x190,_0xf11cb=_0x2b9e87(0x283),_0x2b219f=0.4):(_0x470abf=0x0,console[_0x2b9e87(0x2e4)]('[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20'+_0x470abf+_0x2b9e87(0x1de)+(_0x35194c[_0x2b9e87(0x328)]+0x1)),_0xf11cb='explosionSound',_0x2b219f=0.4);}else _0xf11cb=_0x2b9e87(0x25d),_0x2b219f=0.4;if(_0x3a6d0d&&_0x470abf>0x0){const _0x3513a4=normalWaveLastHitTime;normalWaveLastHitTime=_0x242f6a,normalWaveLastChainHitPosition={'x':_0x35194c['x'],'y':_0x35194c['y']};normalWaveLastChainHitPosition&&_0x242f6a-_0x3513a4<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x222cf9=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x65fdc4=Math[_0x2b9e87(0x2f5)](_0x222cf9[_0x2b9e87(0x1d8)]-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x302e10=_0x222cf9[_0x65fdc4];_0x470abf+=_0x302e10,normalWaveCurrentChainScore+=_0x302e10;}}}}if(_0x470abf>0x0){let _0x51d019=null,_0x22f2fc=0x0,_0x5d26b8=_0xe93e70,_0x1dca77=highScore,_0x469113=highScoreHolderId,_0x863642=![],_0x58c3b2=![];if(isCoopAIDemoActive){if(_0xe93e70===_0x2b9e87(0x26b)){player1Score+=_0x470abf,_0x22f2fc=player1Score,_0x51d019=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x2b9e87(0x26b),_0x863642=!![],_0x58c3b2=!![];else player1Score===highScore&&highScoreHolderId!=='player1'&&highScore>0x0&&(highScoreHolderId='player1',_0x863642=!![],_0x58c3b2=!![]);checkAndAwardExtraLife(0x1);}else{if(_0xe93e70===_0x2b9e87(0x2c8)){player2Score+=_0x470abf,_0x22f2fc=player2Score,_0x51d019=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x2b9e87(0x2c8),_0x863642=!![],_0x58c3b2=!![];else player2Score===highScore&&highScoreHolderId!=='player2'&&highScore>0x0&&(highScoreHolderId=_0x2b9e87(0x2c8),_0x863642=!![],_0x58c3b2=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x470abf,_0x22f2fc=player1Score,_0x51d019=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId='player1',_0x58c3b2=!![]),checkAndAwardExtraLife(0x1);}}else{if(!isManualControl){score+=_0x470abf,player1Score=score,_0x22f2fc=score,_0x5d26b8=_0x2b9e87(0x26b),_0x51d019=()=>player1EnemiesHit++;if(score>highScore)highScore=score,highScoreHolderId=_0x2b9e87(0x26b),_0x863642=!![],_0x58c3b2=!![];else score===highScore&&highScoreHolderId!=='player1'&&highScore>0x0&&(highScoreHolderId='player1',_0x863642=!![],_0x58c3b2=!![]);checkAndAwardExtraLife(0x1);}else{if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2b9e87(0x301)){if(_0xe93e70==='player1'){player1Score+=_0x470abf,_0x22f2fc=player1Score,_0x51d019=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x2b9e87(0x26b),_0x863642=!![],_0x58c3b2=!![];else player1Score===highScore&&highScoreHolderId!==_0x2b9e87(0x26b)&&highScore>0x0&&(highScoreHolderId=_0x2b9e87(0x26b),_0x863642=!![],_0x58c3b2=!![]);checkAndAwardExtraLife(0x1);}else{if(_0xe93e70===_0x2b9e87(0x2c9)){player2Score+=_0x470abf,_0x22f2fc=player2Score,_0x5d26b8=_0x2b9e87(0x2c9),_0x51d019=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId='ai_p2',_0x863642=!![],_0x58c3b2=!![];else player2Score===highScore&&highScoreHolderId!==_0x2b9e87(0x2c9)&&highScore>0x0&&(highScoreHolderId=_0x2b9e87(0x2c9),_0x863642=!![],_0x58c3b2=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x470abf,_0x22f2fc=player1Score,_0x51d019=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId=_0x2b9e87(0x26b),_0x58c3b2=!![]),checkAndAwardExtraLife(0x1);}}else{if(isTwoPlayerMode&&selectedGameMode===_0x2b9e87(0x285)){if(_0xe93e70==='player1'){player1Score+=_0x470abf,_0x22f2fc=player1Score,_0x51d019=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score,highScoreHolderId=_0x2b9e87(0x26b),_0x863642=!![],_0x58c3b2=!![];else player1Score===highScore&&highScoreHolderId!==_0x2b9e87(0x26b)&&highScore>0x0&&(highScoreHolderId=_0x2b9e87(0x26b),_0x863642=!![],_0x58c3b2=!![]);checkAndAwardExtraLife(0x1);}else{if(_0xe93e70==='player2'){player2Score+=_0x470abf,_0x22f2fc=player2Score,_0x51d019=()=>player2EnemiesHit++;if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x2b9e87(0x2c8),_0x863642=!![],_0x58c3b2=!![];else player2Score===highScore&&highScoreHolderId!==_0x2b9e87(0x2c8)&&highScore>0x0&&(highScoreHolderId=_0x2b9e87(0x2c8),_0x863642=!![],_0x58c3b2=!![]);checkAndAwardExtraLife(0x2);}else player1Score+=_0x470abf,_0x22f2fc=player1Score,_0x51d019=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,highScoreHolderId='player1',_0x58c3b2=!![]),checkAndAwardExtraLife(0x1);}}else{score+=_0x470abf,_0x22f2fc=score;currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,_0x5d26b8=_0x2b9e87(0x26b),_0x51d019=()=>player1EnemiesHit++):(player2Score=score,_0x5d26b8=isPlayerTwoAI?'ai_p2':_0x2b9e87(0x2c8),_0x51d019=()=>player2EnemiesHit++);if(score>highScore)highScore=score,highScoreHolderId=_0x5d26b8,_0x863642=!![],_0x58c3b2=!![];else score===highScore&&highScoreHolderId!==_0x5d26b8&&highScore>0x0&&(highScoreHolderId=_0x5d26b8,_0x863642=!![],_0x58c3b2=!![]);checkAndAwardExtraLife(currentPlayer);}}}}if(_0x863642||_0x58c3b2&&_0x1dca77>0x0&&highScoreHolderId!==_0x469113){let _0x3c6084=![];if(highScoreHolderId===_0x2b9e87(0x26b))_0x3c6084=player1TriggeredHighScoreSound;else{if(highScoreHolderId===_0x2b9e87(0x2c8)||highScoreHolderId===_0x2b9e87(0x2c9))_0x3c6084=player2TriggeredHighScoreSound;}if(!_0x3c6084||highScoreHolderId!==_0x469113&&_0x1dca77>0x0){playSound('hiScoreSound',![],0.2);if(highScoreHolderId===_0x2b9e87(0x26b))player1TriggeredHighScoreSound=!![];else{if(highScoreHolderId==='player2'||highScoreHolderId===_0x2b9e87(0x2c9))player2TriggeredHighScoreSound=!![];}}}if(_0x58c3b2&&highScoreHolderId!==_0x469113&&_0x1dca77>0x0){if(_0x469113===_0x2b9e87(0x26b))player1TriggeredHighScoreSound=![];else{if(_0x469113===_0x2b9e87(0x2c8)||_0x469113==='ai_p2')player2TriggeredHighScoreSound=![];}}_0x51d019&&!isChallengingStage&&_0x51d019();const _0x2c22d6=_0x35194c[_0x2b9e87(0x280)]==='in_grid'||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x2b9e87(0x22b)]({'text':_0x470abf[_0x2b9e87(0x26c)](),'x':_0x35194c['x']+_0x4e1dc1/0x2,'y':_0x35194c['y'],'color':_0x2c22d6,'creationTime':_0x242f6a,'displayStartTime':_0x242f6a+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x35194c['x']+_0x4e1dc1/0x2,_0x35194c['y']+_0x35cea4/0x2);_0x35194c['id']===capturingBossId&&stopSound('captureSound');if(_0x35194c['state']==='attacking'||_0x35194c[_0x2b9e87(0x280)]==='following_entrance_path'||_0x35194c[_0x2b9e87(0x280)]===_0x2b9e87(0x2d5)||_0x35194c[_0x2b9e87(0x280)]===_0x2b9e87(0x206)||_0x35194c[_0x2b9e87(0x280)]==='returning'||_0x35194c[_0x2b9e87(0x280)]===_0x2b9e87(0x2b0)){if(_0x35194c['type']===ENEMY3_TYPE)stopSound(_0x2b9e87(0x205));else stopSound(_0x2b9e87(0x244));}}else{_0x3a6d0d=![];if(_0x35194c[_0x2b9e87(0x306)]===ENEMY3_TYPE)_0xf11cb='bossHit1Sound',_0x2b219f=0.6,_0x470abf=0x0;else{_0x470abf=0x0;if(_0x35194c[_0x2b9e87(0x306)]===ENEMY1_TYPE)_0xf11cb=_0x2b9e87(0x252),_0x2b219f=0.3;else _0x35194c[_0x2b9e87(0x306)]===ENEMY2_TYPE&&(_0xf11cb=_0x2b9e87(0x30f),_0x2b219f=0.3);}}return _0xf11cb&&playSound(_0xf11cb,![],_0x2b219f),{'destroyed':_0x3a6d0d,'pointsAwarded':_0x470abf};}function createHitSparks(_0x804e32,_0x26be53){const _0x101eec=_0x109c4f;if(!gameCtx)return;const _0x4fe53c=Date[_0x101eec(0x2fb)]();for(let _0x4835b5=0x0;_0x4835b5<HIT_SPARK_COUNT;_0x4835b5++){const _0x19eb7f=Math[_0x101eec(0x292)]()*Math['PI']*0x2,_0x89364a=HIT_SPARK_SPEED*(0.7+Math[_0x101eec(0x292)]()*0.6),_0x5d5581=HIT_SPARK_LIFETIME*(0.8+Math[_0x101eec(0x292)]()*0.4);hitSparks[_0x101eec(0x22b)]({'x':_0x804e32,'y':_0x26be53,'vx':Math[_0x101eec(0x2ac)](_0x19eb7f)*_0x89364a,'vy':Math[_0x101eec(0x2e6)](_0x19eb7f)*_0x89364a,'creationTime':_0x4fe53c,'lifetime':_0x5d5581,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x17341a=_0x109c4f,_0x1a28e1=Date[_0x17341a(0x2fb)]();for(let _0x27ba13=hitSparks[_0x17341a(0x1d8)]-0x1;_0x27ba13>=0x0;_0x27ba13--){const _0x20328e=hitSparks[_0x27ba13],_0x4b09c3=_0x1a28e1-_0x20328e[_0x17341a(0x221)];_0x4b09c3>=_0x20328e['lifetime']?hitSparks[_0x17341a(0x32a)](_0x27ba13,0x1):(_0x20328e['vy']+=HIT_SPARK_GRAVITY,_0x20328e['x']+=_0x20328e['vx'],_0x20328e['y']+=_0x20328e['vy'],_0x20328e[_0x17341a(0x293)]=Math[_0x17341a(0x2c4)](0x0,0x1-_0x4b09c3*HIT_SPARK_FADE_SPEED));}}function moveEntities(){const _0xf4852a=_0x109c4f;try{if(isPaused)return;const _0xd850dd=Date[_0xf4852a(0x2fb)]();}catch(_0x36f1f9){console[_0xf4852a(0x208)](_0xf4852a(0x312),_0x36f1f9,_0x36f1f9['stack']),isGridSoundPlaying=![],stopSound(_0xf4852a(0x2b6)),isEntrancePhaseActive=![],stopSound(_0xf4852a(0x2e1)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0xf4852a(0x2eb)),stopSound(_0xf4852a(0x2d6)),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0xf4852a(0x1d3))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0xf4852a(0x2f0));}}function switchPlayerTurn(){const _0x4d1f31=_0x109c4f;if(!isTwoPlayerMode||selectedGameMode===_0x4d1f31(0x285))return![];currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive,player1MaxLevelReached=Math[_0x4d1f31(0x2c4)](player1MaxLevelReached,level)):(player2Score=score,player2IsDualShipActive=isDualShipActive,player2MaxLevelReached=Math[_0x4d1f31(0x2c4)](player2MaxLevelReached,level));const _0x1b101b=currentPlayer===0x1?0x2:0x1,_0xf79bd2=_0x1b101b===0x1?player1Lives:player2Lives;if(_0xf79bd2<=0x0){const _0x5ca6d5=currentPlayer===0x1?player1Lives:player2Lives;return _0x5ca6d5<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x1b101b,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0x409289=null,_0x421b25=![]){const _0x2640e8=_0x109c4f,_0x5f1b68=Date['now'](),_0x2926e6=isTwoPlayerMode&&selectedGameMode==='coop'&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x5f1b68<coopPlayersReadyStartTime+0x1f40;if(_0x2926e6){if(_0x409289===_0x2640e8(0x26b)&&!_0x421b25)return![];if(_0x409289===_0x2640e8(0x2c9)&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')return![];}let _0x26e72c=![],_0x594f00=null,_0x175ab6=![],_0x3a6ebc=0x0,_0x11e027=_0x371ad8=>{},_0x14a856=_0x2c561c=>{},_0x3d443a=![],_0x5a324b=()=>![],_0x535e89=_0x1dcc02=>{},_0x329dd2=_0x409289;const _0xb97e55=!isPaused&&isInGameState&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!showReadyMessage&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x2640e8(0x285)&&(_0x409289===_0x2640e8(0x26b)&&isPlayer1ShowingGameOverMessage||_0x409289===_0x2640e8(0x2c8)&&isPlayer2ShowingGameOverMessage||_0x409289==='ai_p2'&&isPlayer2ShowingGameOverMessage));if(!_0xb97e55)return![];if(_0x329dd2){let _0x3dd56b=![];if(_0x329dd2==='ai'&&isShipCaptured)_0x3dd56b=!![];else{if(_0x329dd2===_0x2640e8(0x2c9)&&isTwoPlayerMode&&selectedGameMode===_0x2640e8(0x325)&&isShipCaptured)_0x3dd56b=!![];else{if(_0x329dd2===_0x2640e8(0x26b)&&isCoopAIDemoActive&&isPlayer1ShipCaptured)_0x3dd56b=!![];else{if(_0x329dd2===_0x2640e8(0x2c8)&&isCoopAIDemoActive&&isPlayer2ShipCaptured)_0x3dd56b=!![];else{if(_0x329dd2==='ai_p2'&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2640e8(0x301)&&isPlayer2ShipCaptured)_0x3dd56b=!![];}}}}if(_0x3dd56b)return![];}if(isTwoPlayerMode&&selectedGameMode===_0x2640e8(0x285)){if(_0x409289==='player1'&&ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1NeedsRespawnAfterCapture)(!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer1ShipCaptured)&&(_0x594f00=ship1,_0x175ab6=player1IsDualShipActive,_0x3a6ebc=player1LastShotTime,_0x11e027=_0x5a0bd9=>{player1LastShotTime=_0x5a0bd9;},_0x14a856=_0x3aecb7=>{player1ShotsFired+=_0x3aecb7;},_0x3d443a=selectedFiringMode===_0x2640e8(0x2a1),_0x5a324b=()=>p1JustFiredSingle,_0x535e89=_0xe8e053=>{p1JustFiredSingle=_0xe8e053;},_0x26e72c=!![]);else(_0x409289==='player2'||_0x409289===_0x2640e8(0x2c9))&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2NeedsRespawnAfterCapture&&((!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer2ShipCaptured)&&(_0x594f00=ship2,_0x175ab6=player2IsDualShipActive,_0x409289==='ai_p2'&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?(_0x3a6ebc=aiShip2LastShotTime,_0x11e027=_0x32aefe=>{aiShip2LastShotTime=_0x32aefe,player2LastShotTime=_0x32aefe;}):(_0x3a6ebc=player2LastShotTime,_0x11e027=_0x3f9a1b=>{player2LastShotTime=_0x3f9a1b;}),_0x14a856=_0x1d73a0=>{player2ShotsFired+=_0x1d73a0;},isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2640e8(0x301)?_0x3d443a=![]:(_0x3d443a=selectedFiringMode==='single',_0x5a324b=()=>p2JustFiredSingle,_0x535e89=_0x5c5881=>{p2JustFiredSingle=_0x5c5881;}),_0x26e72c=!![]));}else{if(ship&&playerLives>0x0&&!isShipCaptured){_0x594f00=ship,_0x175ab6=isDualShipActive;if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1){_0x3a6ebc=player1LastShotTime,_0x11e027=_0x129d29=>{player1LastShotTime=_0x129d29;},_0x14a856=_0x39cd82=>{player1ShotsFired+=_0x39cd82;},_0x3d443a=selectedFiringMode===_0x2640e8(0x2a1),_0x5a324b=()=>p1JustFiredSingle,_0x535e89=_0x396a19=>{p1JustFiredSingle=_0x396a19;};if(!_0x329dd2)_0x329dd2=_0x2640e8(0x26b);}else{isPlayerTwoAI?(_0x3a6ebc=aiLastShotTime,_0x11e027=_0x1afd7b=>{aiLastShotTime=_0x1afd7b,player2LastShotTime=_0x1afd7b;}):(_0x3a6ebc=player2LastShotTime,_0x11e027=_0x2cb21d=>{player2LastShotTime=_0x2cb21d;});_0x14a856=_0x4203cc=>{player2ShotsFired+=_0x4203cc;};if(isPlayerTwoAI){_0x3d443a=![];if(!_0x329dd2)_0x329dd2=_0x2640e8(0x2c9);}else{_0x3d443a=selectedFiringMode===_0x2640e8(0x2a1);connectedGamepadIndexP2===null&&connectedGamepadIndex!==null?(_0x5a324b=()=>p1JustFiredSingle,_0x535e89=_0x1bf419=>{p1JustFiredSingle=_0x1bf419;}):(_0x5a324b=()=>p2JustFiredSingle,_0x535e89=_0x8050f3=>{p2JustFiredSingle=_0x8050f3;});if(!_0x329dd2)_0x329dd2=_0x2640e8(0x2c8);}}}else{_0x3a6ebc=player1LastShotTime,_0x11e027=_0x402bcf=>{player1LastShotTime=_0x402bcf;},_0x14a856=_0x2c3535=>{player1ShotsFired+=_0x2c3535;},_0x3d443a=selectedFiringMode==='single',_0x5a324b=()=>p1JustFiredSingle,_0x535e89=_0x3cee56=>{p1JustFiredSingle=_0x3cee56;};if(!_0x329dd2)_0x329dd2='player1';}_0x26e72c=!![];}}_0x409289===null&&!isManualControl&&ship&&playerLives>0x0&&!isShipCaptured&&!isShowingCaptureMessage&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x2640e8(0x285))&&(_0x594f00=ship,_0x175ab6=isDualShipActive,_0x3a6ebc=aiLastShotTime,_0x11e027=_0x28d1a2=>{aiLastShotTime=_0x28d1a2;},_0x14a856=_0x461774=>{player1ShotsFired+=_0x461774;},_0x3d443a=![],_0x26e72c=!![],_0x329dd2='ai');if(!_0x26e72c||!_0x594f00)return![];if(_0x3d443a){if(_0x421b25){if(_0x5f1b68-_0x3a6ebc<SHOOT_COOLDOWN)return![];}else{let _0x2f3871=![];if(_0x329dd2===_0x2640e8(0x26b)||!isTwoPlayerMode&&_0x329dd2===_0x2640e8(0x26b))_0x2f3871=keyboardP1ShootDown||connectedGamepadIndex!==null&&navigator['getGamepads']()?.[connectedGamepadIndex]?.[_0x2640e8(0x1ea)][PS5_BUTTON_CROSS]?.[_0x2640e8(0x2ca)];else{if(_0x329dd2===_0x2640e8(0x2c8)&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)_0x2f3871=keyboardP2ShootDown||connectedGamepadIndexP2!==null&&navigator[_0x2640e8(0x207)]()?.[connectedGamepadIndexP2]?.[_0x2640e8(0x1ea)][PS5_BUTTON_CROSS]?.['pressed'];else connectedGamepadIndex!==null?_0x2f3871=keyboardP2ShootDown||connectedGamepadIndex!==null&&navigator[_0x2640e8(0x207)]()?.[connectedGamepadIndex]?.[_0x2640e8(0x1ea)][PS5_BUTTON_CROSS]?.[_0x2640e8(0x2ca)]:_0x2f3871=keyboardP2ShootDown;}}if(_0x5a324b()){if(_0x2f3871)return![];else _0x535e89(![]);}if(_0x5f1b68-_0x3a6ebc<SHOOT_COOLDOWN)return![];}}else{if(_0x5f1b68-_0x3a6ebc<SHOOT_COOLDOWN)return![];}try{const _0x69b6d9=_0x594f00['y'];let _0x31e69b=0x0;if(_0x175ab6){const _0x472ea8=_0x594f00['x']+_0x594f00[_0x2640e8(0x227)]/0x2,_0x4469ec=_0x594f00['x']+DUAL_SHIP_OFFSET_X+_0x594f00[_0x2640e8(0x227)]/0x2,_0x2f263f=_0x472ea8-PLAYER_BULLET_WIDTH/0x2,_0xf0caaa=_0x4469ec-PLAYER_BULLET_WIDTH/0x2;bullets[_0x2640e8(0x22b)]({'x':_0x2f263f,'y':_0x69b6d9,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x329dd2}),bullets['push']({'x':_0xf0caaa,'y':_0x69b6d9,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x329dd2}),_0x31e69b=0x2;}else{const _0x3bb544=_0x594f00['x']+_0x594f00['width']/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x2640e8(0x22b)]({'x':_0x3bb544,'y':_0x69b6d9,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x329dd2}),_0x31e69b=0x1;}if(_0x3d443a&&!_0x421b25)_0x535e89(!![]);return playSound(_0x2640e8(0x27f),![],0.4),_0x14a856(_0x31e69b),_0x11e027(_0x5f1b68),!![];}catch(_0x612cfb){return console[_0x2640e8(0x208)](_0x2640e8(0x31b),_0x612cfb),![];}}function handlePlayerInput(){const _0x5d8d72=_0x109c4f;try{const _0x1d03b6=Date[_0x5d8d72(0x2fb)]();let _0x416018=![],_0x640296=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2&&!isManualControl||!isManualControl&&!isPlayerTwoAI&&!isCoopAIDemoActive){(isCoopAIDemoActive||!isManualControl&&!isPlayerTwoAI&&!isCoopAIDemoActive)&&(leftPressed=![],rightPressed=![]);shootPressed=![],p2ShootPressed=![];return;}let _0x28243d=isPaused||!isManualControl||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isTwoPlayerMode&&selectedGameMode===_0x5d8d72(0x285)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage)||isShowingCaptureMessage||showCsBonusScoreMessage||showPerfectMessage||showCsHitsMessage||showCSClearMessage||isCsCompletionDelayActive;const _0x4da43c=isTwoPlayerMode&&selectedGameMode==='coop'&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x1d03b6<coopPlayersReadyStartTime+0x1f40;let _0x3cbfa6=(_0x4da43c||showReadyMessage)&&isTwoPlayerMode&&selectedGameMode===_0x5d8d72(0x285)&&ship1&&player1Lives>0x0;if(_0x28243d&&!_0x3cbfa6){keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],leftPressed=![],rightPressed=![],p2LeftPressed=![],p2RightPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],shootPressed=![],p2ShootPressed=![];return;}let _0x415552=0x0;if(isTouchActiveGame&&gameCanvas&&gameCanvas[_0x5d8d72(0x227)]>0x0){const _0x5621dc=gameCanvas[_0x5d8d72(0x29a)](),_0x50c283=gameCanvas[_0x5d8d72(0x227)]/_0x5621dc[_0x5d8d72(0x227)];_0x415552=(touchCurrentX-_0x5621dc[_0x5d8d72(0x21a)])*_0x50c283;}let _0x3ced4f=![],_0x36048f=![],_0x36b3aa=![],_0x32f12c=![],_0x29596a=![],_0x16cc6a=![];if(!_0x28243d||_0x3cbfa6){if(connectedGamepadIndex!==null){const _0x2c5f91=navigator[_0x5d8d72(0x207)]();if(_0x2c5f91?.[connectedGamepadIndex]){const _0x2212fa=_0x2c5f91[connectedGamepadIndex],_0x301523=processSingleController(_0x2212fa,previousGameButtonStates);_0x3ced4f=_0x301523[_0x5d8d72(0x21a)],_0x36048f=_0x301523[_0x5d8d72(0x31c)],_0x36b3aa=_0x301523[_0x5d8d72(0x1fc)],previousGameButtonStates=_0x301523[_0x5d8d72(0x22d)][_0x5d8d72(0x1dc)]();if(_0x301523[_0x5d8d72(0x2d7)]&&!isShowingCaptureMessage&&!generalMessageBlockingInput){togglePause();return;}if(_0x301523['back']&&!isShowingCaptureMessage&&!generalMessageBlockingInput){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x5d8d72(0x1d8)]>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates[_0x5d8d72(0x1d8)]>0x0)previousGameButtonStates=[];}if(!(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')){if(isTwoPlayerMode&&connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex){const _0x56623f=navigator[_0x5d8d72(0x207)]();if(_0x56623f?.[connectedGamepadIndexP2]){const _0x175cb1=_0x56623f[connectedGamepadIndexP2],_0x25f571=processSingleController(_0x175cb1,previousGameButtonStatesP2);_0x32f12c=_0x25f571[_0x5d8d72(0x21a)],_0x29596a=_0x25f571['right'],_0x16cc6a=_0x25f571[_0x5d8d72(0x1fc)],previousGameButtonStatesP2=_0x25f571[_0x5d8d72(0x22d)][_0x5d8d72(0x1dc)]();}else{if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2[_0x5d8d72(0x1d8)]>0x0)previousGameButtonStatesP2=[];}}}const _0x1b15e5=p1FireInputWasDown;!_0x28243d||_0x3cbfa6?p1FireInputWasDown=keyboardP1ShootDown||_0x36b3aa:p1FireInputWasDown=![];let _0x4b2c59=![];if(!_0x28243d||_0x3cbfa6){if(!(isPlayerTwoAI&&(selectedOnePlayerGameVariant===_0x5d8d72(0x301)||selectedGameMode===_0x5d8d72(0x325)))){_0x4b2c59=p2FireInputWasDown;if(isTwoPlayerMode&&selectedGameMode===_0x5d8d72(0x325)&&currentPlayer===0x2&&!isPlayerTwoAI){if(connectedGamepadIndexP2!==null)p2FireInputWasDown=keyboardP2ShootDown||_0x16cc6a;else connectedGamepadIndex!==null?p2FireInputWasDown=keyboardP2ShootDown||_0x36b3aa:p2FireInputWasDown=keyboardP2ShootDown;}else isTwoPlayerMode&&selectedGameMode===_0x5d8d72(0x285)&&!isPlayerTwoAI&&(p2FireInputWasDown=keyboardP2ShootDown||_0x16cc6a);}else p2FireInputWasDown=![];}else p2FireInputWasDown=![];if(selectedFiringMode===_0x5d8d72(0x2a1)&&!isTouchActiveGame){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x1b15e5&&!p1FireInputWasDown)p1JustFiredSingle=![];if(!isPlayerTwoAI&&_0x4b2c59&&!p2FireInputWasDown)p2JustFiredSingle=![];}else{if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1&&_0x1b15e5&&!p1FireInputWasDown)p1JustFiredSingle=![];else{if(currentPlayer===0x2&&!isPlayerTwoAI){let _0x81c42c=_0x4b2c59,_0x57bd89=p2FireInputWasDown;connectedGamepadIndexP2===null&&connectedGamepadIndex!==null&&(_0x81c42c=_0x1b15e5,_0x57bd89=p1FireInputWasDown);if(_0x81c42c&&!_0x57bd89){if(connectedGamepadIndexP2===null&&connectedGamepadIndex!==null)p1JustFiredSingle=![];else p2JustFiredSingle=![];}}}}else{if(_0x1b15e5&&!p1FireInputWasDown)p1JustFiredSingle=![];}}}leftPressed=![],rightPressed=![],p2LeftPressed=![],p2RightPressed=![];let _0x2ddf99=![];if(!_0x28243d||_0x3cbfa6){if(isTouchActiveGame&&gameCanvas){if(isTwoPlayerMode&&selectedGameMode===_0x5d8d72(0x285)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x3a06de=ship1[_0x5d8d72(0x227)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0x441e1d=_0x415552-_0x3a06de/0x2;_0x441e1d=Math[_0x5d8d72(0x2c4)](0x0,Math[_0x5d8d72(0x2f5)](gameCanvas[_0x5d8d72(0x227)]-_0x3a06de,_0x441e1d)),ship1['x']=_0x441e1d,ship1[_0x5d8d72(0x1cf)]=_0x441e1d,_0x2ddf99=!![];}}else{const _0x117393=ship,_0x53d495=playerLives,_0x4a8145=isShipCaptured,_0x33d99c=isDualShipActive,_0x211f1d=!isPlayerTwoAI||isPlayerTwoAI&&selectedGameMode===_0x5d8d72(0x325)&&currentPlayer===0x1;if(_0x117393&&_0x53d495>0x0&&!_0x4a8145&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&_0x211f1d){const _0x3448f9=_0x117393[_0x5d8d72(0x227)]+(_0x33d99c?DUAL_SHIP_OFFSET_X:0x0);let _0x4404dc=_0x415552-_0x3448f9/0x2;_0x4404dc=Math[_0x5d8d72(0x2c4)](0x0,Math[_0x5d8d72(0x2f5)](gameCanvas['width']-_0x3448f9,_0x4404dc)),_0x117393['x']=_0x4404dc,_0x117393[_0x5d8d72(0x1cf)]=_0x4404dc,_0x2ddf99=!![];}}}if(!_0x2ddf99){if(isTwoPlayerMode&&selectedGameMode===_0x5d8d72(0x285)){const _0x33f492=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;_0x33f492&&(leftPressed=keyboardP1LeftDown||_0x3ced4f,rightPressed=keyboardP1RightDown||_0x36048f);if(!isPlayerTwoAI){const _0x378c5d=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;_0x378c5d&&(p2LeftPressed=keyboardP2LeftDown||_0x32f12c,p2RightPressed=keyboardP2RightDown||_0x29596a);}}else{const _0x4cc05a=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0x4cc05a){if(currentPlayer===0x1||!isTwoPlayerMode)leftPressed=keyboardP1LeftDown||_0x3ced4f,rightPressed=keyboardP1RightDown||_0x36048f;else{if(currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0x5d8d72(0x325)){if(connectedGamepadIndexP2!==null)leftPressed=keyboardP2LeftDown||_0x32f12c,rightPressed=keyboardP2RightDown||_0x29596a;else connectedGamepadIndex!==null?(leftPressed=keyboardP2LeftDown||_0x3ced4f,rightPressed=keyboardP2RightDown||_0x36048f):(leftPressed=keyboardP2LeftDown,rightPressed=keyboardP2RightDown);}}}}}}if(!_0x28243d){if(isTwoPlayerMode&&selectedGameMode==='coop'){const _0x2f9eb6=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;if(_0x2f9eb6){(isTouchActiveGame&&selectedFiringMode===_0x5d8d72(0x304)||p1FireInputWasDown)&&(_0x416018=!![]);if(isShowingCaptureMessage&&isPlayer1ShipCaptured)_0x416018=![];}if(!isPlayerTwoAI){const _0x1f6349=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;if(_0x1f6349){p2FireInputWasDown&&(_0x640296=!![]);if(isShowingCaptureMessage&&isPlayer2ShipCaptured)_0x640296=![];}}}else{const _0x204676=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isShowingIntro;if(_0x204676){let _0x56ea9f=![];if(currentPlayer===0x1||!isTwoPlayerMode)_0x56ea9f=p1FireInputWasDown;else currentPlayer===0x2&&!isPlayerTwoAI&&selectedGameMode===_0x5d8d72(0x325)&&(_0x56ea9f=p2FireInputWasDown);(isTouchActiveGame&&selectedFiringMode===_0x5d8d72(0x304)||_0x56ea9f)&&(_0x416018=!![]);(gameJustStarted||isShowingIntro&&level===0x1)&&(!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode===_0x5d8d72(0x325)&&currentPlayer===0x1)&&(!(keyboardP1ShootDown||_0x36b3aa)&&!(isTouchActiveGame&&selectedFiringMode===_0x5d8d72(0x2a1))&&(_0x416018=![]));if(isShowingCaptureMessage&&isShipCaptured)_0x416018=![];}}}shootPressed=_0x416018,p2ShootPressed=_0x640296,isManualControl&&(isTwoPlayerMode&&selectedGameMode==='coop'?(shootPressed&&firePlayerBullet(_0x5d8d72(0x26b),isTouchActiveGame&&selectedFiringMode===_0x5d8d72(0x2a1)),!isPlayerTwoAI&&p2ShootPressed&&firePlayerBullet(_0x5d8d72(0x2c8),![])):shootPressed&&(!(isPlayerTwoAI&&selectedGameMode===_0x5d8d72(0x325)&&currentPlayer===0x2)&&firePlayerBullet(currentPlayer===0x1||!isTwoPlayerMode?_0x5d8d72(0x26b):_0x5d8d72(0x2c8),isTouchActiveGame&&selectedFiringMode==='single')));}catch(_0x3e3cad){console['error'](_0x5d8d72(0x310),_0x3e3cad),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![];}}let aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;const AI_DODGE_COMMIT_DURATION=0xa0,AI_DODGE_MOVEMENT_SMOOTHING_FACTOR=0.015,AI_NORMAL_MOVEMENT_SMOOTHING_FACTOR=0.04;function aiControl(){const _0x12ff48=_0x109c4f;try{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x12ff48(0x301))return;let _0x28843d=null,_0x31c823=null,_0x29f659=![],_0x43890d=![],_0x5e28fb=![],_0x442330=0x0,_0x2b5987='ai',_0x425b90=![];if(isPlayerTwoAI&&selectedGameMode===_0x12ff48(0x325)&&currentPlayer===0x2){if(!ship||playerLives<=0x0||isShipCaptured||isShowingPlayerGameOverMessage){if(ship)ship[_0x12ff48(0x1cf)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x12ff48(0x227)]/0x2:0x0;return;}_0x28843d=ship,_0x31c823=smoothedShipX,_0x29f659=isDualShipActive,_0x43890d=isShipCaptured,_0x5e28fb=isInvincible,_0x442330=playerLives,_0x2b5987='ai_p2',_0x425b90=!![];}else{if(!isManualControl&&!isPlayerTwoAI){if(playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage){if(ship)ship['targetX']=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas['width']/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}if(isShipCaptured||isShowingCaptureMessage){if(ship)ship[_0x12ff48(0x1cf)]=ship['x'];if(smoothedShipX!==undefined&&ship)smoothedShipX=ship['x'];aiIsCurrentlyTargetingCaptureBoss=![];return;}_0x28843d=ship,_0x31c823=smoothedShipX,_0x29f659=isDualShipActive,_0x43890d=isShipCaptured,_0x5e28fb=isInvincible,_0x442330=playerLives,_0x2b5987='ai';}else{if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}if(_0x31c823===undefined&&_0x28843d){_0x31c823=_0x28843d['x'];if(_0x425b90||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0x31c823;}else{if(_0x31c823===undefined&&!_0x28843d){_0x31c823=gameCanvas?gameCanvas[_0x12ff48(0x227)]/0x2:0x0;if(_0x425b90||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0x31c823;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];return;}}const _0x446ab5=Date[_0x12ff48(0x2fb)](),_0x194805=gameCanvas[_0x12ff48(0x227)],_0x498ffb=gameCanvas['height'];let _0x235816=_0x28843d[_0x12ff48(0x227)];if(_0x29f659)_0x235816=DUAL_SHIP_OFFSET_X+_0x28843d[_0x12ff48(0x227)];const _0x144bca=_0x28843d['x']+_0x235816/0x2,_0x70400=_0x28843d['y'],_0x5a4227=_0x194805/0x2,_0x152d93=_0x5a4227-_0x235816/0x2,_0x4c0275=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive||isShowingCaptureMessage||isShowingIntro;let _0x23f77d=_0x31c823,_0xda0e73=![],_0x19419c=![],_0x393a76=_0x31c823,_0x834041=null,_0x15f39d=![];aiIsCurrentlyTargetingCaptureBoss=![];let _0x2a94d1=![],_0x3c738e=![];if(aiNeedsStabilization&&!_0x4c0275){aiStabilizationEndTime=_0x446ab5+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],_0x31c823=_0x28843d['x'];if(_0x425b90||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0x31c823;}_0x446ab5>aiDodgeCommitEndTime&&(aiPreviousDodgeDirection=0x0);if(!isChallengingStage&&!_0x5e28fb&&!_0x4c0275){const _0x22f2b8=Math[_0x12ff48(0x2f5)](0x1,level/0xa),_0x4346c3=SHIP_HEIGHT*(8.5+3.5*_0x22f2b8),_0x21e937=0x1f4+0x12c*_0x22f2b8,_0x38f1d4=0x12c+0x96*_0x22f2b8,_0x55bb78=_0x235816*(0.9+0.5*_0x22f2b8),_0x2a24d2=SHIP_HEIGHT*(0.7+0.4*_0x22f2b8),_0x44a4bb=_0x235816*(1.8+0.8*_0x22f2b8);let _0x437d06=[];for(const _0x5ada86 of enemyBullets){if(_0x5ada86['y']<_0x28843d['y']+_0x4346c3&&_0x5ada86['y']+_0x5ada86[_0x12ff48(0x1fd)]>_0x28843d['y']-SHIP_HEIGHT*0x2){const _0x1d77ca=(_0x28843d['y']-_0x5ada86['y'])/(_0x5ada86['vy']||0.01),_0x50e2fe=Math[_0x12ff48(0x2f5)](_0x21e937/16.67,Math[_0x12ff48(0x2c4)](0x0,_0x1d77ca/16.67*1.25));let _0x484cf2=_0x5ada86['x']+_0x5ada86['vx']*_0x50e2fe,_0x1d977b=_0x5ada86['y']+_0x5ada86['vy']*_0x50e2fe,_0x2269a6=![],_0x3dec3e=_0x2a24d2,_0x490f96=_0x55bb78;const _0x50c2e6=Math[_0x12ff48(0x1d1)](_0x5ada86['vx']*_0x5ada86['vx']+_0x5ada86['vy']*_0x5ada86['vy'])||BASE_ENEMY_BULLET_SPEED;_0x5ada86['vy']>_0x50c2e6*0.35&&Math['abs'](_0x5ada86['x']+_0x5ada86[_0x12ff48(0x227)]/0x2-(_0x28843d['x']+_0x235816/0x2))<_0x235816*1.1&&(_0x2269a6=!![],_0x3dec3e=_0x2a24d2*2.6,_0x490f96*=1.5),_0x437d06[_0x12ff48(0x22b)]({'x':_0x484cf2-_0x5ada86[_0x12ff48(0x227)]/0x2-_0x490f96,'y':_0x1d977b-_0x5ada86['height']/0x2-_0x3dec3e,'width':_0x5ada86[_0x12ff48(0x227)]+0x2*_0x490f96,'height':_0x5ada86[_0x12ff48(0x1fd)]+0x2*_0x3dec3e,'isCritical':!![],'isFromAbove':_0x2269a6,'originalVy':_0x5ada86['vy']});}}for(const _0x5d57ff of enemies){if(_0x5d57ff&&(_0x5d57ff[_0x12ff48(0x280)]==='attacking'||_0x5d57ff[_0x12ff48(0x280)]===_0x12ff48(0x2d5))&&_0x5d57ff['y']<_0x28843d['y']+_0x4346c3*0.9&&_0x5d57ff['y']+_0x5d57ff[_0x12ff48(0x1fd)]>_0x28843d['y']-SHIP_HEIGHT*3.5){const _0x1b48c7=_0x38f1d4/16.67;let _0x2a75b3=_0x5d57ff['x']+_0x5d57ff[_0x12ff48(0x295)]*_0x1b48c7,_0x31444e=_0x5d57ff['y']+_0x5d57ff['velocityY']*_0x1b48c7;_0x437d06[_0x12ff48(0x22b)]({'x':_0x2a75b3-_0x55bb78*0.95,'y':_0x31444e-_0x2a24d2*0.95,'width':_0x5d57ff[_0x12ff48(0x227)]+0x2*_0x55bb78*0.95,'height':_0x5d57ff[_0x12ff48(0x1fd)]+0x2*_0x2a24d2*0.95,'isCritical':!![],'isFromAbove':![],'originalVy':_0x5d57ff[_0x12ff48(0x251)]});}}_0x437d06[_0x12ff48(0x1f0)]((_0x541efd,_0x5883f2)=>(_0x5883f2[_0x12ff48(0x218)]?0x1:-0x1)-(_0x541efd[_0x12ff48(0x218)]?0x1:-0x1)||(_0x5883f2[_0x12ff48(0x216)]||0x0)-(_0x541efd[_0x12ff48(0x216)]||0x0));if(_0x437d06['length']>0x0){_0x19419c=!![];let _0x2b2842={'x':_0x31c823,'score':-Infinity,'dir':0x0,'minDistance':Infinity,'collisions':Infinity};const _0x5dc6e2={'x':_0x31c823,'y':_0x28843d['y'],'width':_0x235816,'height':_0x28843d[_0x12ff48(0x1fd)]};let _0x53ae48=0x0,_0x45599a=0x0,_0x345045=Infinity;for(const _0x431b7b of _0x437d06){checkCollision(_0x5dc6e2,_0x431b7b)&&(_0x53ae48++,_0x45599a-=level===0x1?0xdac:0xbb8,_0x431b7b[_0x12ff48(0x218)]&&(_0x45599a-=level===0x1?0x3a98:0x32c8));const _0x52d267=_0x431b7b['x']+_0x431b7b[_0x12ff48(0x227)]/0x2,_0x494476=_0x5dc6e2['x']+_0x5dc6e2[_0x12ff48(0x227)]/0x2,_0x30843c=Math[_0x12ff48(0x275)](_0x494476-_0x52d267)-(_0x5dc6e2['width']/0x2+_0x431b7b[_0x12ff48(0x227)]/0x2);_0x30843c<_0x345045&&(_0x345045=_0x30843c);}_0x2b2842={'x':_0x31c823,'score':_0x45599a,'dir':0x0,'minDistance':_0x345045,'collisions':_0x53ae48};const _0x5851e8=_0x44a4bb,_0x2095c6=0x3;for(let _0x160cd8=0x0;_0x160cd8<_0x2095c6;_0x160cd8++){for(const _0x79e7db of[-0x1,0x1]){let _0x387c78=_0x31c823+_0x79e7db*_0x5851e8*(_0x160cd8+0x1);_0x387c78=Math[_0x12ff48(0x2c4)](AI_EDGE_BUFFER*1.2,Math[_0x12ff48(0x2f5)](_0x194805-_0x235816-AI_EDGE_BUFFER*1.2,_0x387c78));const _0xcf85db={'x':_0x387c78,'y':_0x28843d['y'],'width':_0x235816,'height':_0x28843d[_0x12ff48(0x1fd)]};let _0x1555f8=0x0,_0x17ae02=0x0,_0x1fa297=Infinity;for(const _0x54f6c1 of _0x437d06){checkCollision(_0xcf85db,_0x54f6c1)&&(_0x1555f8++,_0x17ae02-=level===0x1?0xdac:0xbb8,_0x54f6c1[_0x12ff48(0x218)]&&(_0x17ae02-=level===0x1?0x3a98:0x32c8));const _0x305e86=_0x54f6c1['x']+_0x54f6c1[_0x12ff48(0x227)]/0x2,_0x375398=_0xcf85db['x']+_0xcf85db['width']/0x2,_0x2e23a9=Math['abs'](_0x375398-_0x305e86)-(_0xcf85db[_0x12ff48(0x227)]/0x2+_0x54f6c1['width']/0x2);_0x2e23a9<_0x1fa297&&(_0x1fa297=_0x2e23a9);}_0x17ae02-=Math[_0x12ff48(0x275)](_0x387c78-_0x152d93)*0.05,_0x17ae02-=_0x160cd8*0x2;_0x1555f8===0x0&&_0x79e7db===aiPreviousDodgeDirection&&aiPreviousDodgeDirection!==0x0&&(_0x17ae02+=0x64);if(_0x1555f8<_0x2b2842[_0x12ff48(0x29d)])_0x2b2842={'x':_0x387c78,'score':_0x17ae02,'dir':_0x79e7db,'minDistance':_0x1fa297,'collisions':_0x1555f8};else{if(_0x1555f8===_0x2b2842['collisions']){if(_0x1fa297>_0x2b2842[_0x12ff48(0x286)])_0x2b2842={'x':_0x387c78,'score':_0x17ae02,'dir':_0x79e7db,'minDistance':_0x1fa297,'collisions':_0x1555f8};else _0x1fa297===_0x2b2842['minDistance']&&Math[_0x12ff48(0x275)](_0x387c78-_0x152d93)<Math['abs'](_0x2b2842['x']-_0x152d93)&&(_0x2b2842={'x':_0x387c78,'score':_0x17ae02,'dir':_0x79e7db,'minDistance':_0x1fa297,'collisions':_0x1555f8});}}}}_0x393a76=_0x2b2842['x'],_0x23f77d=_0x393a76;if(_0x2b2842[_0x12ff48(0x327)]!==0x0&&_0x2b2842['collisions']===0x0)(aiPreviousDodgeDirection!==_0x2b2842[_0x12ff48(0x327)]||_0x2b2842['minDistance']<_0x235816*0.5)&&(aiPreviousDodgeDirection=_0x2b2842['dir'],aiDodgeCommitEndTime=_0x446ab5+AI_DODGE_COMMIT_DURATION+(level===0x1?0x3c:0x0));else _0x2b2842[_0x12ff48(0x29d)]>0x0?(aiPreviousDodgeDirection=_0x2b2842[_0x12ff48(0x327)],aiDodgeCommitEndTime=_0x446ab5+AI_DODGE_COMMIT_DURATION/0x2):(aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0);}else aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;}else aiPreviousDodgeDirection=0x0,aiDodgeCommitEndTime=0x0;if(_0x19419c){_0x15f39d=![],aiIsCurrentlyTargetingCaptureBoss=![],_0x2a94d1=![],_0x3c738e=![],_0x834041=null;const _0x411692=_0x23f77d<AI_EDGE_BUFFER*2.5||_0x23f77d>_0x194805-_0x235816-AI_EDGE_BUFFER*2.5;if(Math[_0x12ff48(0x275)](_0x23f77d-_0x31c823)>_0x235816*0.1&&!_0x411692){let _0x4dd484=null,_0x469c74=-Infinity;for(const _0x52dd3e of enemies){if(!_0x52dd3e)continue;let _0x2e2d1b=(_0x498ffb-_0x52dd3e['y'])*1.5-Math[_0x12ff48(0x275)](_0x52dd3e['x']+_0x52dd3e[_0x12ff48(0x227)]/0x2-_0x144bca)*0x2;if(_0x52dd3e[_0x12ff48(0x280)]===_0x12ff48(0x2b8)||_0x52dd3e[_0x12ff48(0x280)]===_0x12ff48(0x2d5))_0x2e2d1b+=0x258;if(_0x52dd3e[_0x12ff48(0x306)]===ENEMY3_TYPE&&_0x52dd3e[_0x12ff48(0x1f7)])_0x2e2d1b+=0x4b0;else{if(_0x52dd3e[_0x12ff48(0x306)]===ENEMY3_TYPE&&_0x52dd3e[_0x12ff48(0x2fc)])_0x2e2d1b+=0x190;else{if(_0x52dd3e[_0x12ff48(0x306)]===ENEMY3_TYPE)_0x2e2d1b-=0xc8;}}_0x2e2d1b>_0x469c74&&(_0x469c74=_0x2e2d1b,_0x4dd484=_0x52dd3e);}_0x834041=_0x4dd484;}_0xda0e73=_0x834041!==null;}else{if(fallingShips[_0x12ff48(0x1d8)]>0x0&&!_0x43890d&&!isWaitingForRespawn&&!_0x29f659){let _0x53340b=null,_0x32042c=Infinity;for(const _0x4f7c08 of fallingShips){let _0x1f88c9=!isManualControl&&!isPlayerTwoAI&&_0x4f7c08[_0x12ff48(0x28d)]===_0x12ff48(0x26b)||_0x425b90&&_0x4f7c08[_0x12ff48(0x28d)]===String(currentPlayer);if(!_0x53340b&&!_0x1f88c9&&_0x4f7c08[_0x12ff48(0x28d)]===null)_0x1f88c9=!![];if(_0x4f7c08&&!_0x4f7c08['landed']&&_0x1f88c9){const _0x4bda20=Math['abs'](_0x4f7c08['x']+_0x4f7c08[_0x12ff48(0x227)]/0x2-_0x144bca)+Math[_0x12ff48(0x275)](_0x4f7c08['y']-_0x28843d['y']);_0x4bda20<_0x32042c&&(_0x32042c=_0x4bda20,_0x53340b=_0x4f7c08);}}_0x53340b&&(_0x3c738e=!![],_0x23f77d=_0x53340b['x']+_0x53340b['width']/0x2-_0x235816/0x2,_0xda0e73=![],_0x834041=null);}if(!_0x3c738e){const _0x1c9ffa=enemies[_0x12ff48(0x1ce)](_0x5e496d=>_0x5e496d['id']===capturingBossId&&_0x5e496d[_0x12ff48(0x306)]===ENEMY3_TYPE),_0x54d923=captureBeamActive&&_0x1c9ffa&&_0x1c9ffa[_0x12ff48(0x280)]===_0x12ff48(0x1fa)&&!_0x43890d;if(_0x54d923){const _0x12313e=_0x442330>0x1&&!_0x29f659;if(_0x12313e){aiIsCurrentlyTargetingCaptureBoss=!![],_0x15f39d=!![];const _0x4aa64a=_0x1c9ffa['x']+_0x1c9ffa[_0x12ff48(0x227)]/0x2;_0x23f77d=_0x4aa64a-_0x235816/0x2,_0xda0e73=![],_0x834041=null;}}}if(!_0x3c738e&&!_0x15f39d&&!aiIsCurrentlyTargetingCaptureBoss){const _0x3a3e0a=enemies[_0x12ff48(0x1ce)](_0x2720ba=>_0x2720ba[_0x12ff48(0x306)]===ENEMY3_TYPE&&_0x2720ba[_0x12ff48(0x1f7)]&&_0x2720ba[_0x12ff48(0x2c3)]>0x0&&_0x446ab5-_0x2720ba[_0x12ff48(0x2c3)]>0xbb8);if(_0x3a3e0a)_0x2a94d1=!![],_0x834041=_0x3a3e0a,_0x23f77d=_0x3a3e0a['x']+_0x3a3e0a[_0x12ff48(0x227)]/0x2-_0x235816/0x2,_0xda0e73=!![];else{_0x834041=null;let _0x29fa6f=-Infinity;for(const _0x541044 of enemies){if(!_0x541044)continue;let _0x4124e0=0x0;const _0x4cfd64=_0x541044['x']+_0x541044[_0x12ff48(0x227)]/0x2,_0x232e8d=_0x4cfd64-_0x144bca,_0x39deee=_0x70400-(_0x541044['y']+_0x541044['height']);if(_0x39deee<0x0&&_0x541044[_0x12ff48(0x280)]!==_0x12ff48(0x2b8)&&_0x541044['state']!==_0x12ff48(0x2d5)&&_0x541044[_0x12ff48(0x280)]!==_0x12ff48(0x206))continue;_0x4124e0=(_0x498ffb-_0x541044['y'])*0x2-Math[_0x12ff48(0x275)](_0x232e8d)*0x3-_0x39deee;if(_0x541044[_0x12ff48(0x280)]===_0x12ff48(0x2b8)||_0x541044[_0x12ff48(0x280)]==='diving_to_capture_position')_0x4124e0+=0xbb8;if(_0x541044['type']===ENEMY3_TYPE&&!_0x541044[_0x12ff48(0x2fc)]&&!_0x541044[_0x12ff48(0x1f7)])_0x4124e0-=0x5dc;if(_0x541044[_0x12ff48(0x306)]===ENEMY3_TYPE&&_0x541044[_0x12ff48(0x2fc)]&&!_0x541044[_0x12ff48(0x1f7)])_0x4124e0+=0x3e8;if(_0x541044[_0x12ff48(0x306)]===ENEMY3_TYPE&&_0x541044[_0x12ff48(0x1f7)])_0x4124e0+=0x1388;_0x4124e0>_0x29fa6f&&(_0x29fa6f=_0x4124e0,_0x834041=_0x541044);}if(_0x834041){const _0xa5af96=_0x834041['x']+_0x834041[_0x12ff48(0x227)]/0x2;_0x23f77d=_0xa5af96-_0x235816/0x2;const _0x28f042=1.8;let _0x311763=isChallengingStage?_0x235816*2.5:_0x834041[_0x12ff48(0x280)]==='in_grid'||_0x834041[_0x12ff48(0x280)]===_0x12ff48(0x250)?_0x235816*(GRID_SHOOT_ALIGNMENT_FACTOR*_0x28f042):_0x235816*(FINAL_SHOOT_ALIGNMENT_THRESHOLD*_0x28f042);Math[_0x12ff48(0x275)](_0x144bca-_0xa5af96)<_0x311763&&(_0xda0e73=!![]);}else _0x23f77d=_0x152d93,_0xda0e73=![];}}}let _0x2d192c=_0x19419c?AI_DODGE_MOVEMENT_SMOOTHING_FACTOR:AI_NORMAL_MOVEMENT_SMOOTHING_FACTOR;if(_0x28843d){_0x31c823+=(_0x23f77d-_0x31c823)*_0x2d192c,_0x28843d[_0x12ff48(0x1cf)]=_0x31c823;if(_0x425b90||!isManualControl&&!isPlayerTwoAI)smoothedShipX=_0x31c823;}if(_0xda0e73&&!isShowingIntro){let _0x50d08f=!![];(_0x15f39d||_0x3c738e)&&(_0x50d08f=![]);if(_0x834041){if(_0x834041[_0x12ff48(0x306)]===ENEMY3_TYPE&&!_0x834041[_0x12ff48(0x1f7)]){const _0x2d5b22=isEntrancePhaseActive||[_0x12ff48(0x2e0),_0x12ff48(0x250),_0x12ff48(0x2d5),_0x12ff48(0x1fa)][_0x12ff48(0x317)](_0x834041[_0x12ff48(0x280)]),_0x5654d4=_0x834041['id']===capturingBossId&&aiIsCurrentlyTargetingCaptureBoss;_0x2d5b22&&!_0x5654d4&&(!_0x2a94d1&&(_0x50d08f=![]));}}else _0x50d08f=![];if(_0x50d08f){if(firePlayerBullet(_0x2b5987,![])){}}}}catch(_0xa26539){console[_0x12ff48(0x208)](_0x12ff48(0x243),_0xa26539,_0xa26539['stack']);if(ship)ship[_0x12ff48(0x1cf)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x12ff48(0x227)]/0x2:0x0;if(aiIsCurrentlyTargetingCaptureBoss)aiIsCurrentlyTargetingCaptureBoss=![];}}let aiCoopP1_PreviousDodgeDirection=0x0,aiCoopP1_DodgeCommitEndTime=0x0,aiCoopP2_PreviousDodgeDirection=0x0,aiCoopP2_DodgeCommitEndTime=0x0;const AI_COOP_DODGE_MOVEMENT_SMOOTHING_FACTOR=0.022;function aiControlCoop(){const _0x185f3d=_0x109c4f;if(!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')||isPaused||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0){if(ship1)ship1[_0x185f3d(0x1cf)]=ship1['x'];if(ship2)ship2[_0x185f3d(0x1cf)]=ship2['x'];return;}const _0x43ff91=Date[_0x185f3d(0x2fb)](),_0x2cd2d2=gameCanvas[_0x185f3d(0x227)],_0xa3acc=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture,_0x32c5a0=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture,_0x5a065f=_0x154c1e=>{const _0x332af7=_0x185f3d,_0x43b7bb=_0x154c1e==='p1'&&isPlayer1ShowingGameOverMessage||_0x154c1e==='p2'&&isPlayer2ShowingGameOverMessage;return _0x43b7bb||showReadyMessage||isCsCompletionDelayActive||isShowingIntro&&!(level===0x1&&coopPlayersReadyStartTime>0x0&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x332af7(0x301)));};if(_0xa3acc&&ship1&&isCoopAIDemoActive){if(smoothedShip1X===undefined)smoothedShip1X=ship1['x'];if(_0x43ff91>aiCoopP1_DodgeCommitEndTime)aiCoopP1_PreviousDodgeDirection=0x0;const _0x5e4137=_0x5a065f('p1');let _0x26e031,_0x3b4a6f=null;if(isCoopAIDemoActive){if(isPlayer2ShipCaptured&&capturedBossIdWithMessage)_0x3b4a6f=capturedBossIdWithMessage;else{if(aiPlayerActivelySeekingCaptureById===_0x185f3d(0x2c8)||aiPlayerActivelySeekingCaptureById===_0x185f3d(0x2c9))_0x3b4a6f=capturingBossId;}}_0x26e031=calculateAIDesiredState(ship1,smoothedShip1X,player1IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer1Invincible,isPlayer1ShipCaptured,isPlayer1WaitingForRespawn,_0x43ff91,_0x2cd2d2,_0x5e4137,'p1',_0x3b4a6f,aiCoopP1_PreviousDodgeDirection),aiShip1TargetEnemy=_0x26e031['targetEnemyForAI'];let _0x5160fa=_0x26e031[_0x185f3d(0x210)]?AI_COOP_DODGE_MOVEMENT_SMOOTHING_FACTOR:AI_SMOOTHING_FACTOR_MOVE;smoothedShip1X+=(_0x26e031[_0x185f3d(0x28c)]-smoothedShip1X)*_0x5160fa,ship1[_0x185f3d(0x1cf)]=smoothedShip1X;if(_0x26e031[_0x185f3d(0x2b5)]!==undefined&&_0x26e031[_0x185f3d(0x26a)]===0x0){if(_0x26e031[_0x185f3d(0x2b5)]!==0x0&&_0x26e031[_0x185f3d(0x2b5)]!==aiCoopP1_PreviousDodgeDirection)aiCoopP1_PreviousDodgeDirection=_0x26e031['chosenDodgeDir'],aiCoopP1_DodgeCommitEndTime=_0x43ff91+AI_DODGE_COMMIT_DURATION;else _0x26e031['chosenDodgeDir']===0x0&&(aiCoopP1_PreviousDodgeDirection=0x0);}else _0x26e031[_0x185f3d(0x26a)]>0x0&&(aiCoopP1_PreviousDodgeDirection=0x0);_0x26e031['shouldTryShoot']&&!(isShowingCaptureMessage&&isPlayer1ShipCaptured)&&fireCoopAIBullet(ship1,player1IsDualShipActive,'player1');}if(_0x32c5a0&&ship2&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x185f3d(0x301))){if(smoothedShip2X===undefined)smoothedShip2X=ship2['x'];if(_0x43ff91>aiCoopP2_DodgeCommitEndTime)aiCoopP2_PreviousDodgeDirection=0x0;const _0x58d576=_0x5a065f('p2'),_0x2f19b6=isCoopAIDemoActive?_0x185f3d(0x2c8):_0x185f3d(0x2c9);let _0x56c307,_0x86bfa4=null;if(isCoopAIDemoActive){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage)_0x86bfa4=capturedBossIdWithMessage;else{if(aiPlayerActivelySeekingCaptureById==='player1')_0x86bfa4=capturingBossId;}}_0x56c307=calculateAIDesiredState(ship2,smoothedShip2X,player2IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer2Invincible,isPlayer2ShipCaptured,isPlayer2WaitingForRespawn,_0x43ff91,_0x2cd2d2,_0x58d576,_0x2f19b6,_0x86bfa4,aiCoopP2_PreviousDodgeDirection),aiShip2TargetEnemy=_0x56c307[_0x185f3d(0x209)];let _0x506b39=_0x56c307[_0x185f3d(0x210)]?AI_COOP_DODGE_MOVEMENT_SMOOTHING_FACTOR:AI_SMOOTHING_FACTOR_MOVE;smoothedShip2X+=(_0x56c307[_0x185f3d(0x28c)]-smoothedShip2X)*_0x506b39,ship2['targetX']=smoothedShip2X;if(_0x56c307[_0x185f3d(0x2b5)]!==undefined&&_0x56c307['predictedCollisions']===0x0){if(_0x56c307[_0x185f3d(0x2b5)]!==0x0&&_0x56c307[_0x185f3d(0x2b5)]!==aiCoopP2_PreviousDodgeDirection)aiCoopP2_PreviousDodgeDirection=_0x56c307[_0x185f3d(0x2b5)],aiCoopP2_DodgeCommitEndTime=_0x43ff91+AI_DODGE_COMMIT_DURATION;else _0x56c307['chosenDodgeDir']===0x0&&(aiCoopP2_PreviousDodgeDirection=0x0);}else _0x56c307['predictedCollisions']>0x0&&(aiCoopP2_PreviousDodgeDirection=0x0);_0x56c307[_0x185f3d(0x2bf)]&&!(isShowingCaptureMessage&&isPlayer2ShipCaptured)&&fireCoopAIBullet(ship2,player2IsDualShipActive,_0x2f19b6);}}function _0x3506(){const _0x254fae=['captureAnimationRotation','currentScore','buttons','\x20has\x20invalid\x20enemy\x20data.','attackType','\x20after\x20missing\x20path','\x20attacking,\x20invalid\x20segment\x20','drawImage','sort',')\x20for\x20','\x20after\x20NaN','enemy-grid-','Error\x20updating\x20floating\x20scores:','map','canFireThisDive','hasCapturedShip','string','LOGO','capturing','generateAttackPath','shoot','height','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','\x20after\x20bezier\x20error','GAME\x20EXIT','[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','.\x20Transitioning.','NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20','Error\x20cloning\x20full\x20grid\x20wave\x20pattern:','bossGalagaDiveSound','following_bezier_path','getGamepads','error','targetEnemyForAI','NORMAL',',\x20index\x20','green','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20','highScoreHolderId','\x20missing\x20SHARED\x20path\x20','isDodging','30px\x20Arial','thresholdsMet',')!\x20Returning.',',\x20def\x20length:\x20','\x20in\x20moving_to_grid','originalVy','\x20(invalid\x20attack\x20index):','isFromAbove','\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.','left','entrancePathId','destroyed','lostLifeSound','sign','complete','targetGridY','creationTime','\x20not\x20found.','following_entrance_path','unknown','diveStartTime','atan2','width','indexOf','object','186xAsjXR','push','CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.','newButtonStates','total','rotation','\x20after\x20bad\x20segment','CS_HorizontalFlyByL','playerNum','Error\x20cloning\x20entrance\x20flight\x202\x20wave\x20pattern:','\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22','levelUpSound','Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20','targetY','1160466cvBuGK','capturedShipDimensions','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22','num','Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','attackPathT','CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20','CRITICAL:\x20normalWaveEntrancePaths\x20not\x20defined\x20or\x20empty.\x20Cannot\x20assign\x20paths\x20to\x20squadrons.','number','Error\x20in\x20aiControl:','butterflyDiveSound','Invalid\x20CS\x20Bezier\x20segment\x20','capturedShipLastFiredTime','Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20','CRITICAL:\x20Entrance\x20flight\x201\x20wave\x20pattern\x20(index\x200)\x20is\x20missing\x20or\x20empty.','restore',',\x20Path\x20','full_grid','white','.\x20Enemy\x20','\x20is\x20empty\x20or\x20invalid.','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','preparing_capture','velocityY','beeHitSound','Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20','Invalid\x20next\x20CS\x20Bezier\x20segment\x20','117joWbsA',',\x20isCS:\x20','Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.','rotationDirection','EASY','Error\x20in\x20triggerImmediateCaptureDive:','403690MagxVA','generateWaveDefinition','explosionSound','CRITICAL:\x20Required\x20CS\x20path\x20\x22','waveUpSound','attackGroupId','Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20','Boss\x20','attackPathSegmentIndex',',\x20Idx\x20','\x20after\x20attack:','entrance_flight_1','moving_to_grid','CRITICAL:\x20waveEntrancePatterns\x20not\x20defined\x20or\x20insufficient\x20for\x20wave\x20generation.','playerId','predictedCollisions','player1','toString','grey','stringify','fillStyle','.\x20Skipping.','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20','\x20after\x20invalid\x20path\x20index','\x20after\x20bad\x20next\x20segment','entrance_flight_2','abs','Entrance\x20Wave:\x20Squadron\x20','gridCol','Error\x20calculating\x20final\x20bezier\x20point\x20for\x20','isArray','shipObj','Error\x20getting\x20grid\x20pos\x20for\x20','clearRect','Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20','justReturned','playerShootSound','state','pathT','gameOverSound','bossHit2Sound','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20','coop','minDistance','fillRect','Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20','Unknown\x20wave\x20type\x20for\x20level\x20','CRITICAL:\x20Entrance\x20flight\x202\x20wave\x20pattern\x20(index\x201)\x20is\x20missing\x20or\x20empty.','hasOwnProperty','desiredTargetX','targetPlayerId','dualShipSound','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','particles','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','random','alpha','capturedShipY','velocityX','\x20in\x20returning','round','CS_LoopAttack_BL','save','getBoundingClientRect','switch_player','183715IAeAZn','collisions','\x20(no\x20attack\x20path):','enemies','stack','single','attackPathSegments','captureStartTime','substring','unshift','Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20','\x20invalid!\x20Skipping.','FATAL\x20Error\x20in\x20moveEntities:','1P_VS_AI_NORMAL','\x20for\x20path\x20','5262620FvlsGK','cos','\x20at\x20[','hasFiredPostLanding','\x20for\x20SHARED\x20path\x20','showing_capture_message','2867904jIgzlB','CO-OP\x20GAME','attack-','\x20at\x20end\x20of\x20normal\x20path\x20','chosenDodgeDir','gridBackgroundSound','extraLifeSound','attacking','CRITICAL:\x20Full\x20grid\x20wave\x20pattern\x20(index\x200)\x20is\x20missing\x20or\x20empty.','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20or\x20with\x20no\x20definition.\x20Level\x20','enemyShootSound','squadronEnemyIndex','show_results','some','shouldTryShoot','Full\x20Grid:\x20Squadron\x20','\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.','pathId','captureMessageStartTime','max','returning','hiScoreSound','Error\x20during\x20post-landing\x20fire\x20for\x20','player2','ai_p2','pressed','challenging_stage','2\x20PLAYER','\x20(state:\x20','naturalWidth','landedTime','pathSpeedMultiplier','capturePrepareTimeout','Error\x20in\x20triggerGridFiring:','duration','\x22\x20for\x20enemy\x20in\x20squadron\x20','diving_to_capture_position','shipCapturedSound','pause','Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:','lastFiredTime','3299210CwgWTM','filter','resetWave','boss_loop_right','totalRotation','naturalHeight','in_grid','entranceSound','enemy-cs-','has','warn','targetGridX','sin','.\x20Removing.','[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','CS3_DiveLoopR_Sharp','captureSound','enemy-entr-','Invalid\x20Normal\x20Bezier\x20segment\x20','rotationCompleted','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','currentLives','Enemy\x20','attackFormationOffsetX','resultsMusicSound','min','clear','\x20returning\x20without\x20target\x20coords.\x20Recalculating.','floor','pathSegmentIndex','main','now','isDamaged','boss_loop_left',').\x20Skipping.','\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.','size','1P_VS_AI_COOP','back','preparing_attack','rapid','center','type','capturedShipX','blue','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','scheduledStartTime','completed','resetGame','.\x20Switching\x20to\x20moving_to_grid.','parse','butterflyHitSound','Error\x20handling\x20player\x20input:','squadronId','FATAL\x20Error\x20in\x20moveEntities\x20(Restored\x20Conditions):','isPreparingForImmediateCapture','1\x20PLAYER','add','!\x20Returning.','includes','20px\x20\x27Press\x20Start\x202P\x27','Error\x20starting\x20attack\x20for\x20','\x20out\x20of\x20bounds\x20(','Error\x20creating\x20player\x20bullet(s):','right','undefined','Error\x20cloning\x20entrance\x20flight\x201\x20wave\x20pattern:','initialCaptureAnimationY','\x22\x20not\x20found!\x20Aborting\x20CS.',')\x20during\x20shift:','playerShip','2UP','forEach','normal',',\x20isFullGrid:\x20','dir','health','HIGH\x20SCORE','splice','find','targetX','2914084DxfgQN','sqrt','startSound','function','1UP','middle','[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20','\x20invalid!\x20Skipping\x20squadron.','length','getWaveType','Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20','Invalid\x20start\x20segment\x20for\x20path\x20','slice','dual','\x20points.\x20Health\x20was:\x20','landed','gridRow','),\x20index\x20','Error\x20in\x20findAndDetachEnemy:','speed','\x20(Path\x20','Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20','CS_HorizontalFlyByR','\x20for\x20squadron\x20'];_0x3506=function(){return _0x254fae;};return _0x3506();}function fireCoopAIBullet(_0x34c2d0,_0x4fb6e9,_0x171cea){if(!_0x34c2d0)return![];return firePlayerBullet(_0x171cea,![]);}function calculateAIDesiredState(_0x380c8c,_0x5d43d1,_0x2d3cdf,_0x1321c7,_0x4fd440,_0x192d73,_0x2734c4,_0x1eaff2,_0xf7ed46,_0xec78af,_0xc9da66,_0x27bf25,_0x4889fb,_0x37555e=null,_0x480f41=0x0){const _0x2e4d87=_0x109c4f;let _0x340085=_0x5d43d1,_0x265fba=![],_0x5ef2fb=null,_0x10843b=![],_0x45d7cf=![],_0x724db4=![],_0x3d7a04=![],_0x5aa300=![],_0x1d1bbf=0x0,_0x325bff=0x0;const _0x405945=0xbb8;isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&_0xec78af<coopAICaptureDiveAnticipationEndTime&&(_0x265fba=![]);isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&_0xec78af>=coopAICaptureDiveAnticipationEndTime&&(coopAICaptureDiveAnticipationActive=![]);const _0x3c77a0=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2e4d87(0x301),_0x29a829=gameCanvas['height'],_0x6833f4=_0x380c8c[_0x2e4d87(0x227)]+(_0x2d3cdf?DUAL_SHIP_OFFSET_X:0x0),_0x586bb9=_0x380c8c['x']+_0x6833f4/0x2,_0x33423d=_0x380c8c['y'],_0x4b0e75=_0x4889fb==='p1'?player1Lives:_0x4889fb==='ai_p2'||_0x4889fb===_0x2e4d87(0x2c8)?player2Lives:0x0,_0x48e366=_0x4b0e75>0x1&&!_0x2d3cdf&&!_0x1eaff2;let _0x2d653a=gameCanvas['width']/0x2;const _0x117fc5=isShowingIntro||isShowingCoopPlayersReady,_0x479831=_0x3c77a0&&_0x117fc5&&!(isChallengingStage&&isEntrancePhaseActive),_0xd828d=_0x3c77a0&&(_0x4889fb==='p1'&&player1Lives>0x0&&player2Lives<=0x0||(_0x4889fb===_0x2e4d87(0x2c9)||_0x4889fb===_0x2e4d87(0x2c8))&&player2Lives>0x0&&player1Lives<=0x0);if(_0x479831&&_0xd828d)_0x2d653a=gameCanvas[_0x2e4d87(0x227)]/0x2;else{if(_0x4889fb==='p1')_0x2d653a=gameCanvas[_0x2e4d87(0x227)]*0.25+Math[_0x2e4d87(0x2e6)](_0xec78af/(AI_WIGGLE_PERIOD*1.1))*(AI_WIGGLE_AMPLITUDE*0.8);else(_0x4889fb===_0x2e4d87(0x2c9)||_0x4889fb===_0x2e4d87(0x2c8))&&(_0x2d653a=gameCanvas[_0x2e4d87(0x227)]*0.75+Math[_0x2e4d87(0x2ac)](_0xec78af/(AI_WIGGLE_PERIOD*0.9))*(AI_WIGGLE_AMPLITUDE*0.8));}let _0x6c315d=_0x2d653a-_0x6833f4/0x2;if(_0x27bf25||_0x1eaff2||_0xf7ed46||_0x4889fb==='p1'&&player1NeedsRespawnAfterCapture||(_0x4889fb===_0x2e4d87(0x2c9)||_0x4889fb===_0x2e4d87(0x2c8))&&player2NeedsRespawnAfterCapture)return _0x340085=_0x479831&&_0xd828d?_0x6c315d:_0x380c8c['x'],{'desiredTargetX':_0x340085,'shouldTryShoot':![],'targetEnemyForAI':null,'chosenDodgeDir':0x0,'isDodging':![],'predictedCollisions':0x0};const _0x529651=_0x1321c7[_0x2e4d87(0x1ce)](_0x170c70=>_0x170c70['id']===capturingBossId&&_0x170c70[_0x2e4d87(0x306)]===ENEMY3_TYPE);let _0x19ce37=_0x5d43d1;if(!isChallengingStage&&!_0x2734c4){const _0x300833=SHIP_HEIGHT*0x9,_0x1a0173=0x226,_0x359eb7=0x15e,_0x5c5569=_0x6833f4*0.6,_0x2221d2=SHIP_HEIGHT*0.4,_0x16c3b1=_0x6833f4*0.6,_0xcb6892=SHIP_HEIGHT*0.6;let _0x3c93a7=[];for(const _0x558b57 of _0x4fd440){if(_0x558b57['y']<_0x380c8c['y']+_0x300833&&_0x558b57['y']+_0x558b57[_0x2e4d87(0x1fd)]>_0x380c8c['y']-SHIP_HEIGHT*0x3){const _0x34fee9=_0x1a0173/16.67;let _0x44674=_0x558b57['x']+_0x558b57['vx']*_0x34fee9,_0x4bb7e9=_0x558b57['y']+_0x558b57['vy']*_0x34fee9,_0x4f8535=![],_0x362088=_0x2221d2,_0x33f9a5=_0x5c5569;const _0x5c894b=Math['sqrt'](_0x558b57['vx']*_0x558b57['vx']+_0x558b57['vy']*_0x558b57['vy'])||BASE_ENEMY_BULLET_SPEED;_0x558b57['vy']>_0x5c894b*0.6&&Math['abs'](_0x558b57['x']+_0x558b57[_0x2e4d87(0x227)]/0x2-(_0x380c8c['x']+_0x6833f4/0x2))<_0x6833f4*0.9&&(_0x4f8535=!![],_0x362088=_0x2221d2*1.85),_0x3c93a7[_0x2e4d87(0x22b)]({'x':_0x44674-_0x558b57[_0x2e4d87(0x227)]/0x2-_0x33f9a5,'y':_0x4bb7e9-_0x558b57[_0x2e4d87(0x1fd)]/0x2-_0x362088,'width':_0x558b57['width']+0x2*_0x33f9a5,'height':_0x558b57['height']+0x2*_0x362088,'isCritical':!![],'isFromAbove':_0x4f8535});}}for(const _0x512656 of _0x1321c7){if(_0x512656&&(_0x512656['state']==='attacking'||_0x512656[_0x2e4d87(0x280)]===_0x2e4d87(0x2d5))&&_0x512656['y']<_0x380c8c['y']+_0x300833*0.8&&_0x512656['y']+_0x512656['height']>_0x380c8c['y']-SHIP_HEIGHT*3.5){const _0x4a1f27=_0x359eb7/16.67;let _0xea7235=_0x512656['x']+_0x512656[_0x2e4d87(0x295)]*_0x4a1f27,_0x1e14d4=_0x512656['y']+_0x512656[_0x2e4d87(0x251)]*_0x4a1f27;_0x3c93a7[_0x2e4d87(0x22b)]({'x':_0xea7235-_0x16c3b1/0x2,'y':_0x1e14d4-_0xcb6892/0x2,'width':_0x512656[_0x2e4d87(0x227)]+_0x16c3b1,'height':_0x512656[_0x2e4d87(0x1fd)]+_0xcb6892,'isCritical':!![],'isFromAbove':![]});}}if(_0x3c93a7['length']>0x0){_0x10843b=!![];let _0x1d7c46=_0x5d43d1,_0x318d34=Infinity,_0x74d31=-0x1;const _0x160b98=[-0x1,0x1];if(_0x480f41!==0x0){_0x160b98[_0x2e4d87(0x2a5)](_0x480f41);const _0x3ec7eb=-_0x480f41;if(!_0x160b98[_0x2e4d87(0x317)](_0x3ec7eb))_0x160b98[_0x2e4d87(0x22b)](_0x3ec7eb);}const _0x633d7a=[...new Set(_0x160b98),0x0];for(const _0x494441 of _0x633d7a){const _0x3c4e07=_0x494441===0x0?0x0:_0x6833f4*1.8+Math[_0x2e4d87(0x292)]()*_0x6833f4*0.8;let _0x41fcd5=_0x5d43d1+_0x494441*_0x3c4e07;_0x41fcd5=Math[_0x2e4d87(0x2c4)](AI_EDGE_BUFFER*2.5,Math[_0x2e4d87(0x2f5)](_0xc9da66-_0x6833f4-AI_EDGE_BUFFER*2.5,_0x41fcd5));const _0x4d4a13={'x':_0x41fcd5,'y':_0x380c8c['y'],'width':_0x6833f4,'height':_0x380c8c[_0x2e4d87(0x1fd)]};let _0x38c6b0=0x0,_0x494be3=Infinity;for(const _0xe1174f of _0x3c93a7){checkCollision(_0x4d4a13,_0xe1174f)&&(_0x38c6b0++,_0xe1174f[_0x2e4d87(0x218)]&&(_0x38c6b0+=0x5));const _0x221079=_0xe1174f['x']+_0xe1174f[_0x2e4d87(0x227)]/0x2,_0x2821d8=_0x4d4a13['x']+_0x4d4a13[_0x2e4d87(0x227)]/0x2,_0x4504f9=Math[_0x2e4d87(0x275)](_0x2821d8-_0x221079)-(_0x4d4a13['width']/0x2+_0xe1174f['width']/0x2);_0x4504f9<_0x494be3&&(_0x494be3=_0x4504f9);}if(_0x38c6b0<_0x318d34)_0x318d34=_0x38c6b0,_0x74d31=_0x494be3,_0x1d7c46=_0x41fcd5,_0x1d1bbf=_0x494441;else{if(_0x38c6b0===_0x318d34){if(_0x494be3>_0x74d31)_0x74d31=_0x494be3,_0x1d7c46=_0x41fcd5,_0x1d1bbf=_0x494441;else _0x494be3===_0x74d31&&Math[_0x2e4d87(0x275)](_0x41fcd5-_0x6c315d)<Math[_0x2e4d87(0x275)](_0x1d7c46-_0x6c315d)&&(_0x1d7c46=_0x41fcd5,_0x1d1bbf=_0x494441);}}}_0x19ce37=_0x1d7c46,_0x325bff=_0x318d34;}else _0x480f41!==0x0&&_0xec78af<(_0x4889fb==='p1'?aiCoopP1_DodgeCommitEndTime:aiCoopP2_DodgeCommitEndTime)?(_0x10843b=!![],_0x19ce37=_0x5d43d1+_0x480f41*(_0x6833f4*0.05),_0x1d1bbf=_0x480f41):_0x1d1bbf=0x0;}else _0x1d1bbf=0x0;if(_0x10843b){_0x340085=Math[_0x2e4d87(0x2c4)](AI_EDGE_BUFFER,Math[_0x2e4d87(0x2f5)](gameCanvas[_0x2e4d87(0x227)]-_0x6833f4-AI_EDGE_BUFFER,_0x19ce37)),_0x45d7cf=![],_0x724db4=![],_0x3d7a04=![],_0x5aa300=![],_0x5ef2fb=null;const _0x482150=_0x340085<AI_EDGE_BUFFER*0x2||_0x340085>_0xc9da66-_0x6833f4-AI_EDGE_BUFFER*0x2;if(Math[_0x2e4d87(0x275)](_0x340085-_0x5d43d1)>_0x6833f4*0.1&&!_0x482150){let _0x27e93b=null,_0x3907eb=-Infinity;for(const _0x4b747e of _0x1321c7){if(!_0x4b747e)continue;if(_0x37555e&&_0x4b747e['id']===_0x37555e)continue;let _0x2b6253=0x0;const _0x55b4ae=_0x4b747e['x']+_0x4b747e[_0x2e4d87(0x227)]/0x2,_0x4aac19=_0x55b4ae-_0x586bb9,_0x3df3cb=_0x33423d-(_0x4b747e['y']+_0x4b747e['height']);if(_0x3df3cb<0x0&&_0x4b747e[_0x2e4d87(0x280)]!==_0x2e4d87(0x2b8)&&_0x4b747e['state']!==_0x2e4d87(0x2d5)&&_0x4b747e[_0x2e4d87(0x280)]!=='following_bezier_path')continue;_0x2b6253=(_0x29a829-_0x4b747e['y'])*1.2-Math[_0x2e4d87(0x275)](_0x4aac19)*2.2-_0x3df3cb*0.7;if(_0x4b747e['state']==='attacking'||_0x4b747e[_0x2e4d87(0x280)]===_0x2e4d87(0x2d5))_0x2b6253+=0x15e;if(_0x4b747e['type']===ENEMY3_TYPE&&_0x4b747e[_0x2e4d87(0x1f7)])_0x2b6253+=0x2bc;else{if(_0x4b747e['type']===ENEMY3_TYPE&&_0x4b747e['isDamaged'])_0x2b6253+=0x12c;else{if(_0x4b747e[_0x2e4d87(0x306)]===ENEMY3_TYPE)_0x2b6253-=0x96;}}_0x2b6253>_0x3907eb&&(_0x3907eb=_0x2b6253,_0x27e93b=_0x4b747e);}_0x5ef2fb=_0x27e93b;}_0x265fba=_0x5ef2fb!==null;}else{_0x45d7cf=![],_0x724db4=![],_0x3d7a04=![],_0x5aa300=![],_0x5ef2fb=null;if(!_0x2d3cdf){const _0x3485db=_0x192d73[_0x2e4d87(0x1ce)](_0x39199e=>_0x39199e[_0x2e4d87(0x28d)]===_0x4889fb&&!_0x39199e[_0x2e4d87(0x1df)]);_0x3485db&&(_0x45d7cf=!![],_0x340085=_0x3485db['x']+_0x3485db[_0x2e4d87(0x227)]/0x2-_0x6833f4/0x2,_0x265fba=![]);}if(!_0x45d7cf){const _0x1a7b0f=captureBeamActive&&_0x529651&&_0x529651[_0x2e4d87(0x280)]===_0x2e4d87(0x1fa)&&!_0x1eaff2;if(_0x48e366&&_0x1a7b0f){let _0x16dffb=![];if(_0x3c77a0){if(aiPlayerActivelySeekingCaptureById===null||aiPlayerActivelySeekingCaptureById===_0x4889fb){if(aiPlayerActivelySeekingCaptureById===null)aiPlayerActivelySeekingCaptureById=_0x4889fb;_0x16dffb=!![];}}if(_0x16dffb){_0x724db4=!![];const _0x292aa7=_0x529651['x']+_0x529651[_0x2e4d87(0x227)]/0x2;_0x340085=_0x292aa7-_0x6833f4/0x2,_0x265fba=![],_0x5ef2fb=_0x529651;}}aiPlayerActivelySeekingCaptureById===_0x4889fb&&!_0x724db4&&(aiPlayerActivelySeekingCaptureById=null);}if(!_0x45d7cf&&!_0x724db4){const _0x37bd80=_0x4889fb==='p1'&&isPlayer2ShipCaptured||(_0x4889fb==='player2'||_0x4889fb===_0x2e4d87(0x2c9))&&isPlayer1ShipCaptured;if(!isCoopAIDemoActive&&_0x3c77a0&&_0x37bd80&&capturedBossIdWithMessage){let _0x505fce=_0x4889fb==='p1'?coopPartner2CapturedTime:coopPartner1CapturedTime;if(_0xec78af-_0x505fce>=COOP_AI_SAVE_PARTNER_DELAY_MS||_0x4b0e75===0x1){const _0x4ed3df=_0x1321c7[_0x2e4d87(0x1ce)](_0x237728=>_0x237728['id']===capturedBossIdWithMessage&&_0x237728[_0x2e4d87(0x306)]===ENEMY3_TYPE&&_0x237728[_0x2e4d87(0x1f7)]);_0x4ed3df&&(!_0x37555e||_0x4ed3df['id']!==_0x37555e)&&(_0x3d7a04=!![],_0x5ef2fb=_0x4ed3df,_0x340085=_0x4ed3df['x']+_0x4ed3df[_0x2e4d87(0x227)]/0x2-_0x6833f4/0x2,_0x265fba=!![]);}}}if(!_0x45d7cf&&!_0x724db4&&!_0x3d7a04){const _0x3e8d98=_0x1321c7['find'](_0x1e780e=>_0x1e780e['type']===ENEMY3_TYPE&&_0x1e780e['hasCapturedShip']&&_0x1e780e[_0x2e4d87(0x2c3)]>0x0&&_0xec78af-_0x1e780e['captureMessageStartTime']>0xbb8&&(!_0x3c77a0||_0x3c77a0&&_0x1e780e['id']!==capturedBossIdWithMessage)&&(!_0x529651||_0x1e780e['id']!==_0x529651['id'])&&(!_0x37555e||_0x1e780e['id']!==_0x37555e));if(_0x3e8d98&&!(isCoopAIDemoActive&&_0x3e8d98['id']===capturedBossIdWithMessage)&&!(isCoopAIDemoActive&&_0x37555e&&_0x3e8d98['id']===_0x37555e))_0x5aa300=!![],_0x5ef2fb=_0x3e8d98,_0x340085=_0x3e8d98['x']+_0x3e8d98[_0x2e4d87(0x227)]/0x2-_0x6833f4/0x2,_0x265fba=!(isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&_0xec78af<coopAICaptureDiveAnticipationEndTime);else{let _0x2c5b98=-Infinity;for(const _0x5011e8 of _0x1321c7){if(!_0x5011e8)continue;if(_0x37555e&&_0x5011e8['id']===_0x37555e)continue;if(_0x529651&&_0x5011e8['id']===_0x529651['id']&&(_0x529651[_0x2e4d87(0x280)]===_0x2e4d87(0x250)||_0x529651[_0x2e4d87(0x280)]===_0x2e4d87(0x2d5)||_0x529651[_0x2e4d87(0x280)]==='capturing'))continue;if(isCoopAIDemoActive&&aiPlayerActivelySeekingCaptureById&&aiPlayerActivelySeekingCaptureById!==_0x4889fb&&_0x529651&&_0x5011e8['id']===_0x529651['id'])continue;if(isCoopAIDemoActive&&capturedBossIdWithMessage&&_0x5011e8['id']===capturedBossIdWithMessage)continue;if(isCoopAIDemoActive&&capturingBossId&&_0x5011e8['id']===capturingBossId&&(_0x5011e8[_0x2e4d87(0x280)]===_0x2e4d87(0x250)||_0x5011e8[_0x2e4d87(0x280)]===_0x2e4d87(0x2d5)||_0x5011e8[_0x2e4d87(0x280)]===_0x2e4d87(0x1fa)))continue;let _0x299794=_0x5011e8[_0x2e4d87(0x306)]===ENEMY3_TYPE&&_0x5011e8[_0x2e4d87(0x1f7)]&&_0x4b0e75<=0x1&&(!_0x3c77a0||_0x3c77a0&&_0x5011e8['id']!==capturedBossIdWithMessage),_0x45fd37=0x0;const _0x2881a6=_0x5011e8['x']+_0x5011e8[_0x2e4d87(0x227)]/0x2,_0x145168=_0x2881a6-_0x586bb9,_0x4b473e=_0x33423d-(_0x5011e8['y']+_0x5011e8['height']);if(_0x4b473e<0x0&&_0x5011e8[_0x2e4d87(0x280)]!==_0x2e4d87(0x2b8)&&_0x5011e8['state']!=='diving_to_capture_position'&&_0x5011e8['state']!==_0x2e4d87(0x206))continue;let _0x177ca3=0x0;if(_0x3c77a0&&!(isCoopAIDemoActive&&aiPlayerActivelySeekingCaptureById&&aiPlayerActivelySeekingCaptureById!==_0x4889fb)){if(_0x4889fb==='p1'&&_0x2881a6<gameCanvas[_0x2e4d87(0x227)]/0x2)_0x177ca3=0x1388;else{if((_0x4889fb===_0x2e4d87(0x2c9)||_0x4889fb===_0x2e4d87(0x2c8))&&_0x2881a6>=gameCanvas[_0x2e4d87(0x227)]/0x2)_0x177ca3=0x1388;}}_0x45fd37=_0x177ca3+(_0x29a829-_0x5011e8['y'])*0x2-Math[_0x2e4d87(0x275)](_0x145168)*0x3-_0x4b473e;if(_0x5011e8[_0x2e4d87(0x280)]===_0x2e4d87(0x2b8)||_0x5011e8[_0x2e4d87(0x280)]===_0x2e4d87(0x2d5))_0x45fd37+=0xbb8;if(_0x5011e8['type']===ENEMY3_TYPE&&!_0x5011e8[_0x2e4d87(0x2fc)]&&!_0x5011e8[_0x2e4d87(0x1f7)])_0x45fd37-=0x5dc;if(_0x5011e8[_0x2e4d87(0x306)]===ENEMY3_TYPE&&_0x5011e8[_0x2e4d87(0x2fc)]&&!_0x5011e8[_0x2e4d87(0x1f7)])_0x45fd37+=0x3e8;if(_0x5011e8[_0x2e4d87(0x306)]===ENEMY3_TYPE&&_0x5011e8['hasCapturedShip']){if(!_0x299794)_0x45fd37+=0x1388;else _0x45fd37-=0x2710;}_0x45fd37>_0x2c5b98&&(_0x2c5b98=_0x45fd37,_0x5ef2fb=_0x5011e8);}if(_0x5ef2fb){_0x340085=_0x5ef2fb['x']+_0x5ef2fb[_0x2e4d87(0x227)]/0x2-_0x6833f4/0x2;const _0x2e75d3=isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'?1.2:0.9;Math['abs'](_0x586bb9-(_0x5ef2fb['x']+_0x5ef2fb[_0x2e4d87(0x227)]/0x2))<_0x6833f4*_0x2e75d3&&(_0x265fba=!(isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&_0xec78af<coopAICaptureDiveAnticipationEndTime));}else _0x340085=_0x6c315d,_0x265fba=![];}}}if(_0x265fba){(_0x724db4||_0x45d7cf)&&(_0x265fba=![]);if(_0x5ef2fb){if(_0x5ef2fb['id']===capturingBossId){const _0x47249c=_0x5ef2fb[_0x2e4d87(0x280)]===_0x2e4d87(0x250)||_0x5ef2fb[_0x2e4d87(0x280)]===_0x2e4d87(0x2d5)||_0x5ef2fb[_0x2e4d87(0x280)]===_0x2e4d87(0x1fa);if(_0x47249c)_0x265fba=![];}if(_0x5ef2fb[_0x2e4d87(0x306)]===ENEMY3_TYPE&&!_0x5ef2fb['hasCapturedShip']){const _0x20423c=[_0x2e4d87(0x2e0),_0x2e4d87(0x250),_0x2e4d87(0x2d5),_0x2e4d87(0x1fa)][_0x2e4d87(0x317)](_0x5ef2fb[_0x2e4d87(0x280)])||isEntrancePhaseActive,_0x582146=_0x529651&&_0x5ef2fb['id']===_0x529651['id']&&aiPlayerActivelySeekingCaptureById===_0x4889fb;_0x20423c&&!_0x5aa300&&!_0x3d7a04&&!_0x582146&&(_0x265fba=![]);}if(_0x2d3cdf&&_0x3c77a0&&_0x5ef2fb['type']===ENEMY3_TYPE&&!_0x5ef2fb[_0x2e4d87(0x1f7)]){const _0x10b69b=_0x4889fb==='p1'?isCoopAIDemoActive?_0x2e4d87(0x2c8):_0x2e4d87(0x2c9):'p1';let _0x542882=![];_0x10b69b==='p1'?_0x542882=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1IsDualShipActive:_0x542882=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2IsDualShipActive;if(_0x542882)_0x265fba=![];}if(_0x5ef2fb[_0x2e4d87(0x306)]===ENEMY3_TYPE&&_0x5ef2fb[_0x2e4d87(0x1f7)]&&_0x4b0e75<=0x1){const _0x3fe52f=_0x3c77a0&&_0x5ef2fb['id']===capturedBossIdWithMessage&&partnerIsCaptured;if(!_0x3fe52f&&!_0x5aa300&&!_0x3d7a04)_0x265fba=![];}isCoopAIDemoActive&&_0x37555e&&_0x5ef2fb['id']===_0x37555e&&(_0x265fba=![]);}else _0x265fba=![];isCoopAIDemoActive&&aiPlayerActivelySeekingCaptureById&&aiPlayerActivelySeekingCaptureById!==_0x4889fb&&_0x529651&&_0x5ef2fb&&_0x5ef2fb['id']===_0x529651['id']&&(_0x265fba=![]);if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x2e4d87(0x301)&&_0x4889fb===_0x2e4d87(0x2c9)){const _0xd52537=isShowingIntro&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0xec78af<coopPlayersReadyStartTime+0x1f40;(_0xd52537||isShowingIntro)&&(_0x265fba=![]);}}return _0x340085=Math[_0x2e4d87(0x2c4)](AI_EDGE_BUFFER,Math[_0x2e4d87(0x2f5)](gameCanvas[_0x2e4d87(0x227)]-_0x6833f4-AI_EDGE_BUFFER,_0x340085)),{'desiredTargetX':_0x340085,'shouldTryShoot':_0x265fba,'targetEnemyForAI':_0x5ef2fb,'chosenDodgeDir':_0x1d1bbf,'isDodging':_0x10843b,'predictedCollisions':_0x325bff};}function _0x31c3(_0x24dd3c,_0x45edc2){const _0x35065a=_0x3506();return _0x31c3=function(_0x31c3a7,_0x451695){_0x31c3a7=_0x31c3a7-0x1ce;let _0x1ff63b=_0x35065a[_0x31c3a7];return _0x1ff63b;},_0x31c3(_0x24dd3c,_0x45edc2);}function findAndDetachEnemy(){const _0x343ae3=_0x109c4f;try{let _0x13e5d7=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x13e5d7=isPlayer1ShipCaptured||isPlayer2ShipCaptured:_0x13e5d7=isShipCaptured;if(!isFullGridWave&&_0x13e5d7){const _0x37d196=enemies[_0x343ae3(0x1ce)](_0x2e195c=>_0x2e195c&&_0x2e195c[_0x343ae3(0x306)]===ENEMY3_TYPE&&_0x2e195c[_0x343ae3(0x1f7)]&&_0x2e195c[_0x343ae3(0x280)]==='in_grid');if(_0x37d196){_0x37d196[_0x343ae3(0x27e)]=!![],_0x37d196[_0x343ae3(0x1ec)]=_0x343ae3(0x325);const _0x433b8c=new Set([_0x37d196['id']]);return resetJustReturnedFlags(_0x433b8c),[_0x37d196];}}if(isEntrancePhaseActive)return null;let _0x471f9d=enemies[_0x343ae3(0x2db)](_0x4ab2d8=>_0x4ab2d8&&_0x4ab2d8[_0x343ae3(0x280)]===_0x343ae3(0x2e0)&&!_0x4ab2d8['justReturned']);if(_0x471f9d[_0x343ae3(0x1d8)]===0x0){_0x471f9d=enemies[_0x343ae3(0x2db)](_0x1dcded=>_0x1dcded&&_0x1dcded['state']===_0x343ae3(0x2e0));if(_0x471f9d['length']===0x0)return null;}if(_0x471f9d['length']===0x0)return null;_0x471f9d[_0x343ae3(0x1f0)]((_0x302d37,_0x3bb919)=>(_0x3bb919['gridRow']||0x0)-(_0x302d37[_0x343ae3(0x1e0)]||0x0));const _0x2dbf93=_0x471f9d[_0x343ae3(0x1d8)]<=0x3;let _0x24a536=[];const _0x5d3983=_0x343ae3(0x325);gridJustCompleted&&(gridJustCompleted=![]);let _0x187184=![];if(level>0x1&&!_0x2dbf93&&_0x471f9d[_0x343ae3(0x1d8)]>=0x3){const _0x1ba691=_0x471f9d['filter'](_0x1ce3f5=>_0x1ce3f5[_0x343ae3(0x306)]===ENEMY3_TYPE&&!_0x1ce3f5[_0x343ae3(0x1f7)]);for(const _0x26039d of _0x1ba691){const _0x382748=_0x471f9d[_0x343ae3(0x1ce)](_0x3c7c98=>_0x3c7c98[_0x343ae3(0x306)]===ENEMY2_TYPE&&_0x3c7c98[_0x343ae3(0x1e0)]===_0x26039d[_0x343ae3(0x1e0)]&&_0x3c7c98[_0x343ae3(0x277)]===_0x26039d['gridCol']-0x1),_0x4d7f70=_0x471f9d[_0x343ae3(0x1ce)](_0x1dd737=>_0x1dd737['type']===ENEMY2_TYPE&&_0x1dd737[_0x343ae3(0x1e0)]===_0x26039d[_0x343ae3(0x1e0)]&&_0x1dd737[_0x343ae3(0x277)]===_0x26039d[_0x343ae3(0x277)]+0x1);if(_0x382748&&_0x4d7f70){_0x24a536=[_0x26039d,_0x382748,_0x4d7f70],_0x187184=!![];break;}}}if(!_0x187184&&!_0x2dbf93){const _0x1c15f7=_0x471f9d[_0x343ae3(0x2db)](_0x4711e9=>_0x4711e9[_0x343ae3(0x306)]===ENEMY1_TYPE),_0x41cb92=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x1c15f7[_0x343ae3(0x1d8)]>=0x2&&Math[_0x343ae3(0x292)]()<_0x41cb92){const _0x366c98=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x38c949=_0x1c15f7[_0x343ae3(0x1d8)]>=0x3&&Math[_0x343ae3(0x292)]()<_0x366c98?0x3:0x2;let _0x281cc9=![];_0x1c15f7[_0x343ae3(0x1f0)](()=>Math[_0x343ae3(0x292)]()-0.5);for(let _0x150b2e=0x0;_0x150b2e<_0x1c15f7[_0x343ae3(0x1d8)];_0x150b2e++){const _0x1deddb=_0x1c15f7[_0x150b2e];let _0x5130bc=[_0x1deddb];const _0x9df95d=_0x1c15f7[_0x343ae3(0x2db)](_0x529202=>_0x529202['id']!==_0x1deddb['id']&&_0x529202['gridRow']===_0x1deddb[_0x343ae3(0x1e0)]);_0x9df95d['sort']((_0x13a683,_0x28b9ef)=>Math['abs'](_0x13a683[_0x343ae3(0x277)]-_0x1deddb[_0x343ae3(0x277)])-Math[_0x343ae3(0x275)](_0x28b9ef[_0x343ae3(0x277)]-_0x1deddb[_0x343ae3(0x277)]));for(let _0x5707fb=0x0;_0x5707fb<_0x9df95d[_0x343ae3(0x1d8)]&&_0x5130bc[_0x343ae3(0x1d8)]<_0x38c949;_0x5707fb++){_0x5130bc[_0x343ae3(0x22b)](_0x9df95d[_0x5707fb]);}if(_0x5130bc['length']===_0x38c949){_0x24a536=_0x5130bc,_0x187184=!![],_0x281cc9=!![];break;}}!_0x281cc9&&_0x1c15f7[_0x343ae3(0x1d8)]>=_0x38c949&&(_0x24a536=_0x1c15f7[_0x343ae3(0x1dc)](0x0,_0x38c949),_0x187184=!![]);}}if(!_0x187184&&!_0x2dbf93){const _0x2f3ecd=_0x471f9d[_0x343ae3(0x2db)](_0x12d909=>_0x12d909[_0x343ae3(0x306)]===ENEMY2_TYPE),_0x2312ce=0.2;if(_0x2f3ecd[_0x343ae3(0x1d8)]>=0x2&&Math[_0x343ae3(0x292)]()<_0x2312ce){const _0x1601ce=0x2;let _0x587279=![];_0x2f3ecd[_0x343ae3(0x1f0)](()=>Math[_0x343ae3(0x292)]()-0.5);for(let _0x205abe=0x0;_0x205abe<_0x2f3ecd[_0x343ae3(0x1d8)];_0x205abe++){const _0x54ef2b=_0x2f3ecd[_0x205abe];let _0x395f7a=[_0x54ef2b];const _0x119192=_0x2f3ecd['filter'](_0x79595b=>_0x79595b['id']!==_0x54ef2b['id']&&_0x79595b['gridRow']===_0x54ef2b[_0x343ae3(0x1e0)]);_0x119192[_0x343ae3(0x1f0)]((_0x81adaf,_0x479eb5)=>Math[_0x343ae3(0x275)](_0x81adaf[_0x343ae3(0x277)]-_0x54ef2b[_0x343ae3(0x277)])-Math['abs'](_0x479eb5['gridCol']-_0x54ef2b['gridCol']));for(let _0x92977=0x0;_0x92977<_0x119192[_0x343ae3(0x1d8)]&&_0x395f7a['length']<_0x1601ce;_0x92977++){_0x395f7a['push'](_0x119192[_0x92977]);}if(_0x395f7a[_0x343ae3(0x1d8)]===_0x1601ce){_0x24a536=_0x395f7a,_0x187184=!![],_0x587279=!![];break;}}!_0x587279&&_0x2f3ecd[_0x343ae3(0x1d8)]>=_0x1601ce&&(_0x24a536=_0x2f3ecd[_0x343ae3(0x1dc)](0x0,_0x1601ce),_0x187184=!![]);}}if(!_0x187184&&_0x471f9d['length']>0x0){const _0x16eaf2=_0x471f9d[0x0];_0x24a536['push'](_0x16eaf2);if(_0x471f9d[_0x343ae3(0x1d8)]>0x1&&!_0x2dbf93&&Math['random']()<0.2){const _0x3f0e11=_0x471f9d[_0x343ae3(0x1ce)](_0x3e7059=>_0x3e7059['id']!==_0x16eaf2['id']&&_0x3e7059['gridRow']===_0x16eaf2[_0x343ae3(0x1e0)]&&_0x3e7059['gridCol']===_0x16eaf2[_0x343ae3(0x277)]-0x1),_0x68999e=_0x471f9d[_0x343ae3(0x1ce)](_0x5710a7=>_0x5710a7['id']!==_0x16eaf2['id']&&_0x5710a7['gridRow']===_0x16eaf2[_0x343ae3(0x1e0)]&&_0x5710a7['gridCol']===_0x16eaf2[_0x343ae3(0x277)]+0x1),_0x227183=_0x3f0e11||_0x68999e;if(_0x227183){const _0x5e2db2=_0x16eaf2[_0x343ae3(0x306)]===ENEMY3_TYPE&&_0x227183[_0x343ae3(0x306)]===ENEMY3_TYPE;!_0x5e2db2&&_0x24a536[_0x343ae3(0x22b)](_0x227183);}}_0x187184=!![];}if(_0x24a536[_0x343ae3(0x1d8)]>0x0){_0x24a536=_0x24a536[_0x343ae3(0x2db)](_0x5b4e2c=>_0x5b4e2c);if(_0x24a536['length']===0x0)return null;_0x24a536['forEach'](_0x16d341=>{const _0x1ba10e=_0x343ae3;_0x16d341&&(_0x16d341['justReturned']=!![],_0x16d341[_0x1ba10e(0x1ec)]=_0x5d3983);});const _0x3960ae=new Set(_0x24a536['map'](_0x5e09db=>_0x5e09db['id']));return resetJustReturnedFlags(_0x3960ae),_0x24a536;}return null;}catch(_0x4f619d){return console[_0x343ae3(0x208)](_0x343ae3(0x1e2),_0x4f619d),null;}}function triggerImmediateCaptureDive(){const _0x1b067d=_0x109c4f;try{if(isChallengingStage||captureAttemptMadeThisLevel)return;let _0x3ba40f=[];isTwoPlayerMode&&selectedGameMode===_0x1b067d(0x285)?(ship1&&player1Lives>0x1&&!player1IsDualShipActive&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!player1NeedsRespawnAfterCapture&&_0x3ba40f[_0x1b067d(0x22b)]({'playerShip':ship1,'playerNum':0x1}),ship2&&player2Lives>0x1&&!player2IsDualShipActive&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!player2NeedsRespawnAfterCapture&&_0x3ba40f[_0x1b067d(0x22b)]({'playerShip':ship2,'playerNum':0x2})):ship&&playerLives>0x1&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0x3ba40f['push']({'playerShip':ship,'playerNum':currentPlayer});if(_0x3ba40f['length']===0x0)return;const _0x126eb6=_0x3ba40f[Math[_0x1b067d(0x2f8)](Math[_0x1b067d(0x292)]()*_0x3ba40f[_0x1b067d(0x1d8)])],_0x2d9250=_0x126eb6[_0x1b067d(0x322)],_0x1eb1be=enemies[_0x1b067d(0x2db)](_0x578fb1=>_0x578fb1&&_0x578fb1[_0x1b067d(0x280)]===_0x1b067d(0x2e0)&&_0x578fb1[_0x1b067d(0x306)]===ENEMY3_TYPE&&!_0x578fb1[_0x1b067d(0x1f7)]&&!_0x578fb1['isPreparingForImmediateCapture']);if(_0x1eb1be['length']>0x0){const _0x3228d7=_0x1eb1be[Math[_0x1b067d(0x2f8)](Math['random']()*_0x1eb1be[_0x1b067d(0x1d8)])],_0x418a47=Date[_0x1b067d(0x2fb)]();_0x3228d7[_0x1b067d(0x313)]=!![],_0x3228d7[_0x1b067d(0x27e)]=!![];const _0x40780c=new Set([_0x3228d7['id']]);resetJustReturnedFlags(_0x40780c);const _0x49c14c=_0x2d9250['x']+_0x2d9250[_0x1b067d(0x227)]/0x2,_0x430649=_0x49c14c<gameCanvas['width']/0x2?_0x1b067d(0x21a):_0x1b067d(0x31c);let _0x40f60f,_0x27a159;_0x430649===_0x1b067d(0x21a)?_0x40f60f=gameCanvas[_0x1b067d(0x227)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:_0x40f60f=gameCanvas[_0x1b067d(0x227)]*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH;_0x27a159=gameCanvas['height']*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR,_0x3228d7['state']=_0x1b067d(0x250),_0x3228d7[_0x1b067d(0x1cf)]=_0x40f60f,_0x3228d7[_0x1b067d(0x237)]=_0x27a159,_0x3228d7[_0x1b067d(0x225)]=_0x418a47,playSound('bossGalagaDiveSound',![],0.2);const _0x5545bb=_0x3228d7['id'],_0x955f60=setTimeout(()=>{const _0x1fd67f=_0x1b067d,_0x47a336=enemies[_0x1fd67f(0x1ce)](_0x4316af=>_0x4316af?.['id']===_0x5545bb);_0x47a336&&_0x47a336[_0x1fd67f(0x280)]===_0x1fd67f(0x250)&&(_0x47a336[_0x1fd67f(0x280)]='diving_to_capture_position',captureAttemptMadeThisLevel=!![]);if(_0x47a336)_0x47a336[_0x1fd67f(0x2d1)]=null;const _0x7e5c82=enemySpawnTimeouts[_0x1fd67f(0x228)](_0x955f60);if(_0x7e5c82>-0x1)enemySpawnTimeouts[_0x1fd67f(0x32a)](_0x7e5c82,0x1);},0x12c);_0x3228d7[_0x1b067d(0x2d1)]=_0x955f60,enemySpawnTimeouts['push'](_0x955f60);}}catch(_0xaceee5){console[_0x1b067d(0x208)](_0x1b067d(0x25a),_0xaceee5);}}function resetJustReturnedFlags(_0x153357){const _0x14a96c=_0x109c4f;enemies[_0x14a96c(0x324)](_0x1876c6=>{const _0x53b073=_0x14a96c;let _0x24fc7d=![];if(_0x153357 instanceof Set)_0x24fc7d=_0x153357[_0x53b073(0x2e3)](_0x1876c6['id']);else typeof _0x153357===_0x53b073(0x1f8)&&(_0x24fc7d=_0x1876c6['id']===_0x153357);_0x1876c6&&_0x1876c6[_0x53b073(0x280)]===_0x53b073(0x2e0)&&_0x1876c6[_0x53b073(0x27e)]&&!_0x24fc7d&&(_0x1876c6[_0x53b073(0x27e)]=![]);});}function updateFloatingScores(){const _0x16c1bb=_0x109c4f;if(isPaused)return;try{const _0xd776a5=Date['now']();floatingScores=floatingScores[_0x16c1bb(0x2db)](_0x4ca4df=>_0xd776a5-_0x4ca4df[_0x16c1bb(0x221)]<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x2915cc){console[_0x16c1bb(0x208)](_0x16c1bb(0x1f4),_0x2915cc),floatingScores=[];}}function updateExplosions(){const _0x4c7853=_0x109c4f;if(isPaused)return;try{const _0x41c54e=Date[_0x4c7853(0x2fb)]();for(let _0x2f73f1=explosions[_0x4c7853(0x1d8)]-0x1;_0x2f73f1>=0x0;_0x2f73f1--){const _0x5dbc51=explosions[_0x2f73f1],_0x3c3d3b=_0x41c54e-_0x5dbc51[_0x4c7853(0x221)];if(_0x3c3d3b>_0x5dbc51['duration']){explosions[_0x4c7853(0x32a)](_0x2f73f1,0x1);continue;}_0x5dbc51[_0x4c7853(0x290)][_0x4c7853(0x324)](_0x2151fc=>{const _0x2e85ab=_0x4c7853;_0x2151fc['x']+=_0x2151fc['vx'],_0x2151fc['y']+=_0x2151fc['vy'],_0x2151fc[_0x2e85ab(0x293)]=Math[_0x2e85ab(0x2c4)](0x0,0x1-_0x3c3d3b/_0x5dbc51[_0x2e85ab(0x2d3)]*EXPLOSION_FADE_SPEED);});}}catch(_0xa46c49){console[_0x4c7853(0x208)]('Error\x20updating\x20explosions:',_0xa46c49),explosions=[];}}function moveEntities(_0x3679a2=null,_0x50c152=null){const _0x65c77c=_0x109c4f;if(isPaused)return;try{const _0x2bd9d8=Date[_0x65c77c(0x2fb)](),_0x2d0a1e=gameCanvas?gameCanvas[_0x65c77c(0x1fd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x2ddc35=0xbb8;if(gameCanvas&&!isTouchActiveGame){if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x65c77c(0x285)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x2f81e9=ship1['width']+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(leftPressed)ship1['x']-=ship1['speed'];if(rightPressed)ship1['x']+=ship1[_0x65c77c(0x1e3)];ship1['x']=Math[_0x65c77c(0x2c4)](0x0,Math[_0x65c77c(0x2f5)](gameCanvas[_0x65c77c(0x227)]-_0x2f81e9,ship1['x'])),ship1['targetX']=ship1['x'];}if(!isPlayerTwoAI&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x506690=ship2['width']+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(p2LeftPressed)ship2['x']-=ship2[_0x65c77c(0x1e3)];if(p2RightPressed)ship2['x']+=ship2[_0x65c77c(0x1e3)];ship2['x']=Math[_0x65c77c(0x2c4)](0x0,Math[_0x65c77c(0x2f5)](gameCanvas[_0x65c77c(0x227)]-_0x506690,ship2['x'])),ship2[_0x65c77c(0x1cf)]=ship2['x'];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1){const _0x3cbf51=ship[_0x65c77c(0x227)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);let _0xb728c1=![],_0x13041e=![];if(isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL'&&currentPlayer===0x1&&isShowingIntro){if(_0x3679a2!==null)_0xb728c1=_0x3679a2;if(_0x50c152!==null)_0x13041e=_0x50c152;}if(_0xb728c1||leftPressed)ship['x']-=ship[_0x65c77c(0x1e3)];if(_0x13041e||rightPressed)ship['x']+=ship[_0x65c77c(0x1e3)];ship['x']=Math[_0x65c77c(0x2c4)](0x0,Math[_0x65c77c(0x2f5)](gameCanvas[_0x65c77c(0x227)]-_0x3cbf51,ship['x'])),ship[_0x65c77c(0x1cf)]=ship['x'];}}}}}if(!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x65c77c(0x325)&&currentPlayer===0x2||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x65c77c(0x301)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x4f2269=ship1['targetX']-ship1['x'];let _0x1c97c2=ship1['speed']*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x65c77c(0x275)](_0x4f2269)>AI_MOVEMENT_DEADZONE)ship1['x']+=Math[_0x65c77c(0x21e)](_0x4f2269)*Math[_0x65c77c(0x2f5)](Math[_0x65c77c(0x275)](_0x4f2269),_0x1c97c2);const _0x3d0ae1=ship1[_0x65c77c(0x227)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship1['x']=Math[_0x65c77c(0x2c4)](0x0,Math[_0x65c77c(0x2f5)](gameCanvas[_0x65c77c(0x227)]-_0x3d0ae1,ship1['x']));}if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x451c71=ship2['targetX']-ship2['x'];let _0x24443f=ship2[_0x65c77c(0x1e3)]*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x65c77c(0x275)](_0x451c71)>AI_MOVEMENT_DEADZONE)ship2['x']+=Math[_0x65c77c(0x21e)](_0x451c71)*Math[_0x65c77c(0x2f5)](Math['abs'](_0x451c71),_0x24443f);const _0x418688=ship2['width']+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship2['x']=Math['max'](0x0,Math[_0x65c77c(0x2f5)](gameCanvas[_0x65c77c(0x227)]-_0x418688,ship2['x']));}}else{if(ship){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){const _0x5abac1=ship[_0x65c77c(0x1cf)]-ship['x'];let _0x5f0276=ship[_0x65c77c(0x1e3)]*AI_POSITION_MOVE_SPEED_FACTOR;isPlayerTwoAI&&selectedGameMode===_0x65c77c(0x325)&&currentPlayer===0x2&&(_0x5f0276=ship[_0x65c77c(0x1e3)]*(AI_POSITION_MOVE_SPEED_FACTOR*1.15));Math['abs'](_0x5abac1)>AI_MOVEMENT_DEADZONE&&(ship['x']+=Math[_0x65c77c(0x21e)](_0x5abac1)*Math[_0x65c77c(0x2f5)](Math[_0x65c77c(0x275)](_0x5abac1),_0x5f0276));const _0x44df02=ship[_0x65c77c(0x227)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship['x']=Math[_0x65c77c(0x2c4)](0x0,Math[_0x65c77c(0x2f5)](gameCanvas[_0x65c77c(0x227)]-_0x44df02,ship['x']));}}}}if(isTwoPlayerMode&&selectedGameMode==='coop'){if(isPlayer1WaitingForRespawn&&_0x2bd9d8>=player1RespawnTime)isPlayer1WaitingForRespawn=![];if(isPlayer1Invincible&&_0x2bd9d8>=player1InvincibilityEndTime)isPlayer1Invincible=![];if(isPlayer2WaitingForRespawn&&_0x2bd9d8>=player2RespawnTime)isPlayer2WaitingForRespawn=![];if(isPlayer2Invincible&&_0x2bd9d8>=player2InvincibilityEndTime)isPlayer2Invincible=![];}else{if(isWaitingForRespawn&&_0x2bd9d8>=respawnTime)isWaitingForRespawn=![];if(isInvincible&&_0x2bd9d8>=invincibilityEndTime)isInvincible=![];}for(let _0x3e4f42=bullets[_0x65c77c(0x1d8)]-0x1;_0x3e4f42>=0x0;_0x3e4f42--){const _0x357a60=bullets[_0x3e4f42];if(!_0x357a60){bullets['splice'](_0x3e4f42,0x1);continue;}_0x357a60['y']-=_0x357a60[_0x65c77c(0x1e3)];if(_0x357a60['y']+PLAYER_BULLET_HEIGHT<0x0){bullets[_0x65c77c(0x32a)](_0x3e4f42,0x1);continue;}for(let _0x559534=enemies['length']-0x1;_0x559534>=0x0;_0x559534--){const _0x12e09f=enemies[_0x559534];if(!_0x12e09f){enemies['splice'](_0x559534,0x1);continue;}const _0x88ee37={'x':_0x12e09f['x'],'y':_0x12e09f['y'],'width':_0x12e09f['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x12e09f[_0x65c77c(0x306)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,'height':_0x12e09f[_0x65c77c(0x306)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x12e09f[_0x65c77c(0x306)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT},_0x334813={'x':_0x357a60['x'],'y':_0x357a60['y'],'width':_0x357a60[_0x65c77c(0x227)],'height':_0x357a60['height']};if(checkCollision(_0x334813,_0x88ee37)){bullets[_0x65c77c(0x32a)](_0x3e4f42,0x1);const _0x45473c=handleEnemyHit(_0x12e09f,_0x357a60[_0x65c77c(0x269)]);if(_0x45473c[_0x65c77c(0x21c)])enemies[_0x65c77c(0x32a)](_0x559534,0x1);break;}}}for(let _0x17e348=enemyBullets[_0x65c77c(0x1d8)]-0x1;_0x17e348>=0x0;_0x17e348--){const _0x173c01=enemyBullets[_0x17e348];if(!_0x173c01){enemyBullets[_0x65c77c(0x32a)](_0x17e348,0x1);continue;}_0x173c01['x']+=_0x173c01['vx'],_0x173c01['y']+=_0x173c01['vy'],(_0x173c01['y']>gameCanvas['height']||_0x173c01['y']<-ENEMY_BULLET_HEIGHT||_0x173c01['x']<-ENEMY_BULLET_WIDTH||_0x173c01['x']>gameCanvas['width'])&&enemyBullets[_0x65c77c(0x32a)](_0x17e348,0x1);}const _0x281c6d=gameCanvas?gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x385e12=0x2;for(let _0x15fca9=fallingShips[_0x65c77c(0x1d8)]-0x1;_0x15fca9>=0x0;_0x15fca9--){const _0x40e510=fallingShips[_0x15fca9];if(!_0x40e510){fallingShips[_0x65c77c(0x32a)](_0x15fca9,0x1);continue;}let _0x4e69f8=![];if(!_0x40e510[_0x65c77c(0x1df)]){_0x40e510['y']+=FALLING_SHIP_SPEED;if(_0x40e510['y']>=_0x281c6d){_0x40e510['y']=_0x281c6d,_0x40e510['landed']=!![],_0x40e510[_0x65c77c(0x2cf)]=_0x2bd9d8;!_0x40e510[_0x65c77c(0x2ee)]&&(_0x40e510[_0x65c77c(0x22f)]=0x0,_0x40e510[_0x65c77c(0x2ee)]=!![]);let _0x54cf52=null,_0x22de3b=()=>{},_0x2d1417=![],_0x22bf08=![],_0x42f9fc=![],_0x4bf0db=null;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x65c77c(0x301)){if(_0x40e510[_0x65c77c(0x28d)]==='player1'&&ship1&&player1Lives>0x0)_0x54cf52=ship1,_0x2d1417=player1IsDualShipActive,_0x22de3b=()=>{player1IsDualShipActive=!![];},_0x42f9fc=!![],_0x4bf0db=_0x65c77c(0x26b);else(_0x40e510['targetPlayerId']===_0x65c77c(0x2c8)||_0x40e510[_0x65c77c(0x28d)]===_0x65c77c(0x2c9))&&ship2&&player2Lives>0x0&&(_0x54cf52=ship2,_0x2d1417=player2IsDualShipActive,_0x22de3b=()=>{player2IsDualShipActive=!![];},_0x42f9fc=!![],_0x4bf0db=isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x65c77c(0x301)?_0x65c77c(0x2c9):_0x65c77c(0x2c8));}else{if(isTwoPlayerMode&&selectedGameMode===_0x65c77c(0x285)){if(_0x40e510['targetPlayerId']==='player1'&&ship1&&player1Lives>0x0)_0x54cf52=ship1,_0x2d1417=player1IsDualShipActive,_0x22bf08=isPlayer1ShipCaptured,_0x22de3b=()=>{player1IsDualShipActive=!![],isPlayer1ShipCaptured=![];},_0x42f9fc=!![],_0x4bf0db=_0x65c77c(0x26b);else _0x40e510[_0x65c77c(0x28d)]==='player2'&&ship2&&player2Lives>0x0&&(_0x54cf52=ship2,_0x2d1417=player2IsDualShipActive,_0x22bf08=isPlayer2ShipCaptured,_0x22de3b=()=>{player2IsDualShipActive=!![],isPlayer2ShipCaptured=![];},_0x42f9fc=!![],_0x4bf0db=_0x65c77c(0x2c8));}else ship&&playerLives>0x0&&(_0x54cf52=ship,_0x2d1417=isDualShipActive,_0x22bf08=isShipCaptured,_0x22de3b=()=>{const _0x32430f=_0x65c77c;isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x32430f(0x325)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}isShipCaptured=![];},_0x42f9fc=!![],_0x4bf0db=isTwoPlayerMode&&selectedGameMode===_0x65c77c(0x325)?String(currentPlayer):'player1');}if(_0x42f9fc&&!_0x2d1417){_0x22de3b(),playSound(_0x65c77c(0x28e),![],0.4);if(_0x22bf08&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x65c77c(0x301))){if(_0x4bf0db==='player1'&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x2bd9d8+INVINCIBILITY_DURATION_MS;else{if(_0x4bf0db===_0x65c77c(0x2c8)&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x2bd9d8+INVINCIBILITY_DURATION_MS;else playerNumForDocking!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0x2bd9d8+INVINCIBILITY_DURATION_MS);}}fallingShips[_0x65c77c(0x32a)](_0x15fca9,0x1),_0x4e69f8=!![];continue;}else{if(_0x42f9fc&&_0x2d1417){fallingShips[_0x65c77c(0x32a)](_0x15fca9,0x1),_0x4e69f8=!![];continue;}else{fallingShips[_0x65c77c(0x32a)](_0x15fca9,0x1),_0x4e69f8=!![];continue;}}}}if(_0x4e69f8)continue;const _0x34f1d0=_0x2bd9d8-_0x40e510[_0x65c77c(0x221)];if(_0x34f1d0<FALLING_SHIP_FADE_DURATION_MS)_0x40e510['tintProgress']=Math['max'](0x0,0x1-_0x34f1d0/FALLING_SHIP_FADE_DURATION_MS);else _0x40e510['tintProgress']=0x0;if(_0x40e510[_0x65c77c(0x2ee)])_0x40e510[_0x65c77c(0x22f)]=0x0;else{if(!_0x40e510[_0x65c77c(0x1df)]&&typeof _0x40e510[_0x65c77c(0x258)]==='number'&&typeof FALLING_SHIP_ROTATION_SPEED===_0x65c77c(0x242)&&FALLING_SHIP_ROTATION_SPEED>0x0){const _0x1b5472=FALLING_SHIP_ROTATION_SPEED*_0x40e510[_0x65c77c(0x258)];_0x40e510[_0x65c77c(0x22f)]+=_0x1b5472,_0x40e510[_0x65c77c(0x2de)]+=Math[_0x65c77c(0x275)](_0x1b5472);if(_0x40e510[_0x65c77c(0x2de)]>=_0x385e12*0x2*Math['PI'])_0x40e510[_0x65c77c(0x22f)]=0x0,_0x40e510[_0x65c77c(0x2ee)]=!![];else{if(_0x40e510[_0x65c77c(0x22f)]>Math['PI']*0x2)_0x40e510[_0x65c77c(0x22f)]-=Math['PI']*0x2;if(_0x40e510[_0x65c77c(0x22f)]<0x0)_0x40e510[_0x65c77c(0x22f)]+=Math['PI']*0x2;}}else _0x40e510[_0x65c77c(0x22f)]=_0x40e510[_0x65c77c(0x22f)]||0x0;}if(!_0x40e510[_0x65c77c(0x1df)]){let _0x42f9fe=null,_0x22f87a=()=>{},_0x242a7a=0x0,_0x21340f=![],_0x5c1a28=![];if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'){if(_0x40e510[_0x65c77c(0x28d)]===_0x65c77c(0x26b)&&ship1&&player1Lives>0x0)_0x42f9fe=ship1,_0x5c1a28=player1IsDualShipActive,_0x22f87a=()=>{if(!_0x5c1a28)player1IsDualShipActive=!![];},_0x242a7a=0x1;else(_0x40e510[_0x65c77c(0x28d)]===_0x65c77c(0x2c8)||_0x40e510[_0x65c77c(0x28d)]===_0x65c77c(0x2c9))&&ship2&&player2Lives>0x0&&(_0x42f9fe=ship2,_0x5c1a28=player2IsDualShipActive,_0x22f87a=()=>{if(!_0x5c1a28)player2IsDualShipActive=!![];},_0x242a7a=0x2);}else{if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x40e510[_0x65c77c(0x28d)]===_0x65c77c(0x26b)&&ship1&&player1Lives>0x0)_0x42f9fe=ship1,_0x21340f=isPlayer1ShipCaptured,_0x5c1a28=player1IsDualShipActive,_0x22f87a=()=>{if(!_0x5c1a28)player1IsDualShipActive=!![];isPlayer1ShipCaptured=![];},_0x242a7a=0x1;else _0x40e510[_0x65c77c(0x28d)]===_0x65c77c(0x2c8)&&ship2&&player2Lives>0x0&&(_0x42f9fe=ship2,_0x21340f=isPlayer2ShipCaptured,_0x5c1a28=player2IsDualShipActive,_0x22f87a=()=>{if(!_0x5c1a28)player2IsDualShipActive=!![];isPlayer2ShipCaptured=![];},_0x242a7a=0x2);}else ship&&playerLives>0x0&&(_0x42f9fe=ship,_0x21340f=isShipCaptured,_0x5c1a28=isDualShipActive,_0x22f87a=()=>{const _0x521930=_0x65c77c;if(!_0x5c1a28){isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x521930(0x325)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}}isShipCaptured=![];},_0x242a7a=isTwoPlayerMode&&selectedGameMode==='normal'?currentPlayer:0x1);}if(_0x42f9fe&&!_0x5c1a28){const _0x1a9290={'x':_0x40e510['x'],'y':_0x40e510['y'],'width':_0x40e510[_0x65c77c(0x227)],'height':_0x40e510[_0x65c77c(0x1fd)]},_0x15b582={'x':_0x42f9fe['x'],'y':_0x42f9fe['y'],'width':_0x42f9fe['width'],'height':_0x42f9fe[_0x65c77c(0x1fd)]};if(checkCollision(_0x1a9290,_0x15b582)){_0x22f87a();if(_0x21340f&&!(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x65c77c(0x301))){playSound('dualShipSound',![],0.4);if(_0x242a7a===0x1&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x2bd9d8+INVINCIBILITY_DURATION_MS;else{if(_0x242a7a===0x2&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x2bd9d8+INVINCIBILITY_DURATION_MS;else _0x242a7a!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0x2bd9d8+INVINCIBILITY_DURATION_MS);}}else playSound(_0x65c77c(0x28e),![],0.4);fallingShips[_0x65c77c(0x32a)](_0x15fca9,0x1);continue;}}}if(!_0x40e510['landed']&&_0x40e510['y']>=gameCanvas[_0x65c77c(0x1fd)])fallingShips[_0x65c77c(0x32a)](_0x15fca9,0x1);}let _0x257d10=0x0;const _0x580334=enemies[_0x65c77c(0x2be)](_0xe21928=>_0xe21928?.[_0x65c77c(0x280)]===_0x65c77c(0x2e0)),_0xadc79e=!isChallengingStage&&!isWaveTransitioning&&_0x580334&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage));if(_0xadc79e){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(_0x65c77c(0x2b6),!![],0.1));const _0x2c56d9=enemies['filter'](_0x544ae8=>_0x544ae8?.['state']===_0x65c77c(0x2e0));if(_0x2c56d9[_0x65c77c(0x1d8)]>0x0){let _0x139d14=gameCanvas['width'],_0xfae691=0x0;_0x2c56d9[_0x65c77c(0x324)](_0xa7376f=>{const _0x265492=_0x65c77c;_0xa7376f&&(_0x139d14=Math[_0x265492(0x2f5)](_0x139d14,_0xa7376f['x']),_0xfae691=Math[_0x265492(0x2c4)](_0xfae691,_0xa7376f['x']+_0xa7376f[_0x265492(0x227)]));});const _0xaa319f=gameCanvas['width']*GRID_HORIZONTAL_MARGIN_PERCENT,_0x56d201=gameCanvas[_0x65c77c(0x227)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0xfae691>=_0x56d201)gridMoveDirection=-0x1;else{if(gridMoveDirection===-0x1&&_0x139d14<=_0xaa319f)gridMoveDirection=0x1;}const _0x1cae40=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x257d10=_0x1cae40*gridMoveDirection,currentGridOffsetX+=_0x257d10,enemies[_0x65c77c(0x324)](_0x2b3d5c=>{const _0x5c6090=_0x65c77c;if(_0x2b3d5c&&(_0x2b3d5c[_0x5c6090(0x280)]===_0x5c6090(0x2c5)||_0x2b3d5c[_0x5c6090(0x280)]===_0x5c6090(0x2e0)||_0x2b3d5c['state']===_0x5c6090(0x267)))try{const _0x4a1973=_0x2b3d5c[_0x5c6090(0x306)]===ENEMY3_TYPE?BOSS_WIDTH:_0x2b3d5c[_0x5c6090(0x306)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x52eff0,y:_0x159686}=getCurrentGridSlotPosition(_0x2b3d5c['gridRow'],_0x2b3d5c[_0x5c6090(0x277)],_0x4a1973);_0x2b3d5c[_0x5c6090(0x2e5)]=_0x52eff0,_0x2b3d5c[_0x5c6090(0x220)]=_0x159686;}catch(_0x4ab592){console[_0x5c6090(0x208)](_0x5c6090(0x1e5)+_0x2b3d5c?.['id']+_0x5c6090(0x2cd)+_0x2b3d5c?.[_0x5c6090(0x280)]+_0x5c6090(0x321),_0x4ab592);}});}}else isGridSoundPlaying&&(stopSound('gridBackgroundSound'),isGridSoundPlaying=![]),_0x257d10=0x0;for(let _0x554bc5=enemies[_0x65c77c(0x1d8)]-0x1;_0x554bc5>=0x0;_0x554bc5--){let _0x155a22=enemies[_0x554bc5];if(!_0x155a22){enemies[_0x65c77c(0x32a)](_0x554bc5,0x1);continue;}const _0x288c4b=_0x155a22['id'];if(_0x155a22[_0x65c77c(0x2d1)]&&_0x155a22[_0x65c77c(0x280)]!=='preparing_capture'){clearTimeout(_0x155a22['capturePrepareTimeout']);const _0x54fdbd=enemySpawnTimeouts['indexOf'](_0x155a22[_0x65c77c(0x2d1)]);if(_0x54fdbd>-0x1)enemySpawnTimeouts[_0x65c77c(0x32a)](_0x54fdbd,0x1);_0x155a22[_0x65c77c(0x2d1)]=null;}const _0x4cfa45=_0x155a22[_0x65c77c(0x306)]===ENEMY3_TYPE?BOSS_WIDTH:_0x155a22[_0x65c77c(0x306)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x17eef4=_0x155a22[_0x65c77c(0x306)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x155a22['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x10cc7a=_0x155a22[_0x65c77c(0x280)];switch(_0x155a22[_0x65c77c(0x280)]){case _0x65c77c(0x206):{let _0x407eb3=CS_ENTRANCE_PATH_SPEED;const _0x1e305e=_0x155a22[_0x65c77c(0x2d0)]||0x1;_0x407eb3*=_0x1e305e;if(!isChallengingStage){enemies['splice'](_0x554bc5,0x1),_0x155a22=null;break;}let _0x34bc3f=challengingStagePaths,_0x1d5964=_0x34bc3f[_0x155a22[_0x65c77c(0x21b)]];if(!_0x1d5964||_0x155a22['pathSegmentIndex']>=_0x1d5964['length']){enemies['splice'](_0x554bc5,0x1),_0x155a22=null;break;}const _0x20ab08=_0x1d5964[_0x155a22[_0x65c77c(0x2f9)]];if(!_0x20ab08||!_0x20ab08['p0']||!_0x20ab08['p1']||!_0x20ab08['p2']||!_0x20ab08['p3']){console['error'](_0x65c77c(0x245)+_0x155a22[_0x65c77c(0x2f9)]+_0x65c77c(0x2aa)+_0x155a22['entrancePathId']+'.\x20Enemy\x20'+_0x155a22['id']),enemies[_0x65c77c(0x32a)](_0x554bc5,0x1),_0x155a22=null;break;}_0x155a22[_0x65c77c(0x281)]+=_0x407eb3;let _0x1398f6,_0x541617,_0x369d52=_0x155a22['x'],_0x1b6bfc=_0x155a22['y'];if(_0x155a22[_0x65c77c(0x281)]>=0x1){_0x155a22['pathT']=0x0,_0x155a22[_0x65c77c(0x2f9)]++;if(_0x155a22[_0x65c77c(0x2f9)]>=_0x1d5964[_0x65c77c(0x1d8)])enemies[_0x65c77c(0x32a)](_0x554bc5,0x1),_0x155a22=null;else{const _0x17b063=_0x1d5964[_0x155a22['pathSegmentIndex']];_0x17b063?.['p0']?(_0x1398f6=_0x17b063['p0']['x'],_0x541617=_0x17b063['p0']['y']):(console[_0x65c77c(0x208)](_0x65c77c(0x254)+_0x155a22[_0x65c77c(0x2f9)]+'\x20for\x20path\x20'+_0x155a22[_0x65c77c(0x21b)]+_0x65c77c(0x24d)+_0x288c4b),enemies[_0x65c77c(0x32a)](_0x554bc5,0x1),_0x155a22=null);}}else try{_0x1398f6=calculateBezierPoint(_0x155a22[_0x65c77c(0x281)],_0x20ab08['p0']['x'],_0x20ab08['p1']['x'],_0x20ab08['p2']['x'],_0x20ab08['p3']['x']),_0x541617=calculateBezierPoint(_0x155a22[_0x65c77c(0x281)],_0x20ab08['p0']['y'],_0x20ab08['p1']['y'],_0x20ab08['p2']['y'],_0x20ab08['p3']['y']);}catch(_0x13f94b){console[_0x65c77c(0x208)](_0x65c77c(0x27d)+_0x288c4b+':',_0x13f94b),enemies[_0x65c77c(0x32a)](_0x554bc5,0x1),_0x155a22=null;}_0x155a22&&(isNaN(_0x1398f6)||isNaN(_0x541617)?(console[_0x65c77c(0x208)](_0x65c77c(0x203)+_0x288c4b+_0x65c77c(0x2e7)),enemies['splice'](_0x554bc5,0x1),_0x155a22=null):(_0x155a22[_0x65c77c(0x295)]=_0x1398f6-_0x369d52,_0x155a22[_0x65c77c(0x251)]=_0x541617-_0x1b6bfc,_0x155a22['x']=_0x1398f6,_0x155a22['y']=_0x541617));break;}case'following_entrance_path':{if(isChallengingStage){enemies[_0x65c77c(0x32a)](_0x554bc5,0x1),_0x155a22=null;break;}let _0x3ecbcc=normalWaveEntrancePaths,_0x32796c=_0x3ecbcc[_0x155a22[_0x65c77c(0x21b)]],_0x1e245c;_0x155a22[_0x65c77c(0x21b)]===_0x65c77c(0x2fd)||_0x155a22[_0x65c77c(0x21b)]===_0x65c77c(0x2dd)?_0x1e245c=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x1e245c=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x32796c){console[_0x65c77c(0x2e4)](_0x65c77c(0x2f2)+_0x288c4b+_0x65c77c(0x20f)+_0x155a22['entrancePathId']+_0x65c77c(0x30d));try{_0x155a22[_0x65c77c(0x2e5)]=_0x155a22[_0x65c77c(0x2e5)]??gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22[_0x65c77c(0x220)]=_0x155a22[_0x65c77c(0x220)]??ENEMY_TOP_MARGIN;}catch(_0x56760a){console[_0x65c77c(0x208)](_0x65c77c(0x27b)+_0x288c4b+_0x65c77c(0x1ed),_0x56760a),_0x155a22[_0x65c77c(0x2e5)]=gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22[_0x65c77c(0x220)]=ENEMY_TOP_MARGIN;}_0x155a22[_0x65c77c(0x280)]=_0x65c77c(0x267),_0x155a22['pathT']=0x0,_0x155a22[_0x65c77c(0x2f9)]=0x0,_0x155a22[_0x65c77c(0x295)]=0x0,_0x155a22[_0x65c77c(0x251)]=0x0;_0x155a22[_0x65c77c(0x311)]!==undefined&&squadronCompletionStatus[_0x155a22[_0x65c77c(0x311)]]&&squadronCompletionStatus[_0x155a22[_0x65c77c(0x311)]][_0x65c77c(0x30b)]++;break;}if(_0x155a22[_0x65c77c(0x2f9)]>=_0x32796c[_0x65c77c(0x1d8)]){console[_0x65c77c(0x2e4)](_0x65c77c(0x2f2)+_0x288c4b+'\x20path\x20index\x20'+_0x155a22['pathSegmentIndex']+'\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20'+_0x155a22[_0x65c77c(0x21b)]+_0x65c77c(0x30d));try{_0x155a22[_0x65c77c(0x2e5)]=_0x155a22[_0x65c77c(0x2e5)]??gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22[_0x65c77c(0x220)]=_0x155a22[_0x65c77c(0x220)]??ENEMY_TOP_MARGIN;}catch(_0x3641a5){console[_0x65c77c(0x208)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x288c4b+_0x65c77c(0x272),_0x3641a5),_0x155a22[_0x65c77c(0x2e5)]=gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22[_0x65c77c(0x220)]=ENEMY_TOP_MARGIN;}_0x155a22[_0x65c77c(0x280)]=_0x65c77c(0x267),_0x155a22[_0x65c77c(0x281)]=0x0,_0x155a22[_0x65c77c(0x2f9)]=0x0,_0x155a22[_0x65c77c(0x295)]=0x0,_0x155a22['velocityY']=0x0;_0x155a22[_0x65c77c(0x311)]!==undefined&&squadronCompletionStatus[_0x155a22[_0x65c77c(0x311)]]&&squadronCompletionStatus[_0x155a22[_0x65c77c(0x311)]][_0x65c77c(0x30b)]++;break;}const _0x37f106=_0x32796c[_0x155a22[_0x65c77c(0x2f9)]];if(!_0x37f106||!_0x37f106['p0']||!_0x37f106['p1']||!_0x37f106['p2']||!_0x37f106['p3']){console[_0x65c77c(0x208)](_0x65c77c(0x2ed)+_0x155a22['pathSegmentIndex']+_0x65c77c(0x2af)+_0x155a22[_0x65c77c(0x21b)]+_0x65c77c(0x24d)+_0x288c4b+_0x65c77c(0x30d));try{_0x155a22[_0x65c77c(0x2e5)]=_0x155a22[_0x65c77c(0x2e5)]??gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22[_0x65c77c(0x220)]=_0x155a22[_0x65c77c(0x220)]??ENEMY_TOP_MARGIN+_0x155a22['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x38502e){console[_0x65c77c(0x208)](_0x65c77c(0x27b)+_0x288c4b+_0x65c77c(0x230),_0x38502e),_0x155a22[_0x65c77c(0x2e5)]=gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22[_0x65c77c(0x220)]=ENEMY_TOP_MARGIN;}_0x155a22[_0x65c77c(0x280)]='moving_to_grid',_0x155a22[_0x65c77c(0x281)]=0x0,_0x155a22[_0x65c77c(0x2f9)]=0x0,_0x155a22[_0x65c77c(0x295)]=0x0,_0x155a22[_0x65c77c(0x251)]=0x0;_0x155a22['squadronId']!==undefined&&squadronCompletionStatus[_0x155a22['squadronId']]&&squadronCompletionStatus[_0x155a22['squadronId']]['completed']++;break;}_0x155a22[_0x65c77c(0x281)]+=_0x1e245c;let _0x5112ee,_0x4357bf,_0x3357d1=_0x155a22['x'],_0x224fd7=_0x155a22['y'];if(_0x155a22[_0x65c77c(0x281)]>=0x1){_0x155a22[_0x65c77c(0x281)]=0x0,_0x155a22[_0x65c77c(0x2f9)]++;if(_0x155a22['pathSegmentIndex']>=_0x32796c['length']){let _0x376bca,_0x226391;try{_0x376bca=calculateBezierPoint(0x1,_0x37f106['p0']['x'],_0x37f106['p1']['x'],_0x37f106['p2']['x'],_0x37f106['p3']['x']),_0x226391=calculateBezierPoint(0x1,_0x37f106['p0']['y'],_0x37f106['p1']['y'],_0x37f106['p2']['y'],_0x37f106['p3']['y']);}catch(_0x2dc4e5){console[_0x65c77c(0x208)](_0x65c77c(0x278)+_0x288c4b+'\x20at\x20end\x20of\x20normal\x20path\x20'+_0x155a22[_0x65c77c(0x21b)],_0x2dc4e5),_0x376bca=_0x37f106['p3']['x'],_0x226391=_0x37f106['p3']['y'];}_0x155a22['x']=_0x376bca,_0x155a22['y']=_0x226391;try{_0x155a22[_0x65c77c(0x2e5)]=_0x155a22['targetGridX']??gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22[_0x65c77c(0x220)]=_0x155a22[_0x65c77c(0x220)]??ENEMY_TOP_MARGIN;}catch(_0xb842e5){console[_0x65c77c(0x208)]('Error\x20getting\x20target\x20grid\x20pos\x20for\x20'+_0x288c4b+_0x65c77c(0x2b4)+_0x155a22['entrancePathId'],_0xb842e5),_0x155a22[_0x65c77c(0x2e5)]=_0x155a22['x'],_0x155a22['targetGridY']=ENEMY_TOP_MARGIN+_0x155a22['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x3dc31f=_0x155a22['state'];_0x155a22['state']=_0x65c77c(0x267),_0x155a22[_0x65c77c(0x295)]=0x0,_0x155a22[_0x65c77c(0x251)]=0x0,_0x155a22[_0x65c77c(0x2f9)]=0x0;_0x3dc31f===_0x65c77c(0x223)&&_0x155a22[_0x65c77c(0x311)]!==undefined&&squadronCompletionStatus[_0x155a22[_0x65c77c(0x311)]]&&squadronCompletionStatus[_0x155a22[_0x65c77c(0x311)]]['completed']++;break;}else{const _0x3ab5db=_0x32796c[_0x155a22[_0x65c77c(0x2f9)]];if(_0x3ab5db?.['p0'])_0x5112ee=_0x3ab5db['p0']['x'],_0x4357bf=_0x3ab5db['p0']['y'];else{console[_0x65c77c(0x208)]('Invalid\x20next\x20Normal\x20Bezier\x20segment\x20'+_0x155a22[_0x65c77c(0x2f9)]+_0x65c77c(0x2af)+_0x155a22[_0x65c77c(0x21b)]+'.\x20Enemy\x20'+_0x288c4b+_0x65c77c(0x30d));try{_0x155a22[_0x65c77c(0x2e5)]=_0x155a22[_0x65c77c(0x2e5)]??gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22[_0x65c77c(0x220)]=_0x155a22['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x478e2b){console[_0x65c77c(0x208)](_0x65c77c(0x27b)+_0x288c4b+_0x65c77c(0x273),_0x478e2b),_0x155a22['targetGridX']=gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22[_0x65c77c(0x220)]=ENEMY_TOP_MARGIN;}_0x155a22[_0x65c77c(0x280)]=_0x65c77c(0x267),_0x155a22[_0x65c77c(0x281)]=0x0,_0x155a22['pathSegmentIndex']=0x0,_0x155a22[_0x65c77c(0x295)]=0x0,_0x155a22['velocityY']=0x0;_0x155a22[_0x65c77c(0x311)]!==undefined&&squadronCompletionStatus[_0x155a22[_0x65c77c(0x311)]]&&squadronCompletionStatus[_0x155a22[_0x65c77c(0x311)]][_0x65c77c(0x30b)]++;break;}}}else try{_0x5112ee=calculateBezierPoint(_0x155a22[_0x65c77c(0x281)],_0x37f106['p0']['x'],_0x37f106['p1']['x'],_0x37f106['p2']['x'],_0x37f106['p3']['x']),_0x4357bf=calculateBezierPoint(_0x155a22['pathT'],_0x37f106['p0']['y'],_0x37f106['p1']['y'],_0x37f106['p2']['y'],_0x37f106['p3']['y']);}catch(_0x2466a1){console[_0x65c77c(0x208)]('Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20'+_0x288c4b+':',_0x2466a1);try{_0x155a22['targetGridX']=_0x155a22[_0x65c77c(0x2e5)]??gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22[_0x65c77c(0x220)]=_0x155a22['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x39ccae){console[_0x65c77c(0x208)](_0x65c77c(0x27b)+_0x288c4b+_0x65c77c(0x1ff),_0x39ccae),_0x155a22[_0x65c77c(0x2e5)]=gameCanvas['width']/0x2,_0x155a22[_0x65c77c(0x220)]=ENEMY_TOP_MARGIN;}_0x155a22[_0x65c77c(0x280)]=_0x65c77c(0x267),_0x155a22[_0x65c77c(0x281)]=0x0,_0x155a22[_0x65c77c(0x2f9)]=0x0,_0x155a22[_0x65c77c(0x295)]=0x0,_0x155a22[_0x65c77c(0x251)]=0x0;_0x155a22[_0x65c77c(0x311)]!==undefined&&squadronCompletionStatus[_0x155a22[_0x65c77c(0x311)]]&&squadronCompletionStatus[_0x155a22[_0x65c77c(0x311)]][_0x65c77c(0x30b)]++;break;}if(_0x155a22&&_0x155a22[_0x65c77c(0x280)]===_0x65c77c(0x223)){if(isNaN(_0x5112ee)||isNaN(_0x4357bf)){console[_0x65c77c(0x208)]('NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20'+_0x288c4b+_0x65c77c(0x30d));try{_0x155a22[_0x65c77c(0x2e5)]=_0x155a22['targetGridX']??gameCanvas['width']/0x2,_0x155a22[_0x65c77c(0x220)]=_0x155a22[_0x65c77c(0x220)]??ENEMY_TOP_MARGIN;}catch(_0x5aa6bc){console[_0x65c77c(0x208)](_0x65c77c(0x27b)+_0x288c4b+_0x65c77c(0x1f2),_0x5aa6bc),_0x155a22[_0x65c77c(0x2e5)]=gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22['targetGridY']=ENEMY_TOP_MARGIN;}_0x155a22[_0x65c77c(0x280)]=_0x65c77c(0x267),_0x155a22['pathT']=0x0,_0x155a22['pathSegmentIndex']=0x0,_0x155a22[_0x65c77c(0x295)]=0x0,_0x155a22[_0x65c77c(0x251)]=0x0,_0x155a22['squadronId']!==undefined&&squadronCompletionStatus[_0x155a22[_0x65c77c(0x311)]]&&squadronCompletionStatus[_0x155a22[_0x65c77c(0x311)]][_0x65c77c(0x30b)]++;}else{let _0x11396f=_0x5112ee;const _0x2b06a5=currentWavePatternIndex===0x1&&(_0x155a22['squadronId']===0x2||_0x155a22[_0x65c77c(0x311)]===0x3),_0x570c77=typeof _0x155a22[_0x65c77c(0x2bc)]===_0x65c77c(0x242)&&_0x155a22[_0x65c77c(0x2bc)]%0x2!==0x0;if(_0x2b06a5&&_0x570c77){const _0x464dca=_0x4cfa45+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x11396f=_0x5112ee+_0x464dca;}_0x155a22[_0x65c77c(0x295)]=_0x11396f-_0x3357d1,_0x155a22['velocityY']=_0x4357bf-_0x224fd7,_0x155a22['x']=_0x11396f,_0x155a22['y']=_0x4357bf;}}break;}case'moving_to_grid':{if(_0x155a22['targetGridX']==null||_0x155a22[_0x65c77c(0x220)]==null){console[_0x65c77c(0x2e4)](_0x65c77c(0x2f2)+_0x288c4b+_0x65c77c(0x2c1));try{const {x:_0x56bedf,y:_0x27376e}=getCurrentGridSlotPosition(_0x155a22[_0x65c77c(0x1e0)],_0x155a22[_0x65c77c(0x277)],_0x4cfa45);_0x155a22[_0x65c77c(0x2e5)]=_0x56bedf,_0x155a22[_0x65c77c(0x220)]=_0x27376e;}catch(_0x8b4ed8){console[_0x65c77c(0x208)](_0x65c77c(0x27b)+_0x288c4b+_0x65c77c(0x215),_0x8b4ed8),_0x155a22['state']=_0x65c77c(0x2e0),_0x155a22['x']=gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22['y']=ENEMY_TOP_MARGIN;break;}}const _0x347855=_0x155a22[_0x65c77c(0x2e5)],_0x376f9e=_0x155a22[_0x65c77c(0x220)],_0x2ab737=_0x347855-_0x155a22['x'],_0x33fb27=_0x376f9e-_0x155a22['y'],_0x297af1=Math[_0x65c77c(0x1d1)](_0x2ab737*_0x2ab737+_0x33fb27*_0x33fb27),_0x51b4b3=ENTRANCE_SPEED*1.2,_0x2d1fe7=_0x51b4b3*0.5;if(_0x297af1>_0x2d1fe7)_0x155a22[_0x65c77c(0x295)]=_0x2ab737/_0x297af1*_0x51b4b3,_0x155a22[_0x65c77c(0x251)]=_0x33fb27/_0x297af1*_0x51b4b3,_0x155a22['x']+=_0x155a22[_0x65c77c(0x295)],_0x155a22['y']+=_0x155a22['velocityY'];else{_0x155a22['x']=_0x347855,_0x155a22['y']=_0x376f9e,_0x155a22[_0x65c77c(0x295)]=0x0,_0x155a22[_0x65c77c(0x251)]=0x0;const _0xe4673f=_0x155a22[_0x65c77c(0x280)];_0x155a22[_0x65c77c(0x280)]='in_grid',_0x155a22[_0x65c77c(0x27e)]=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound('gridBackgroundSound',!![],0.1));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x2bd9d8,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date[_0x65c77c(0x2fb)](),firstEnemyLanded=!![]);if(_0xe4673f==='moving_to_grid'&&!isChallengingStage&&!isFullGridWave&&_0x155a22[_0x65c77c(0x311)]!==undefined){const _0x95cef0=_0x155a22[_0x65c77c(0x311)],_0x43234f=squadronCompletionStatus[_0x95cef0];if(_0x43234f&&!_0x43234f[_0x65c77c(0x2ae)]){const _0x330c65=enemies['every'](_0x5c1090=>{const _0x16c887=_0x65c77c;if(_0x5c1090&&_0x5c1090[_0x16c887(0x311)]===_0x95cef0)return _0x5c1090['state']===_0x16c887(0x2e0)||!enemies['some'](_0x541648=>_0x541648['id']===_0x5c1090['id']);return!![];});if(_0x330c65){_0x43234f['hasFiredPostLanding']=!![];const _0x37e068=enemies[_0x65c77c(0x2db)](_0xde3430=>_0xde3430&&_0xde3430[_0x65c77c(0x311)]===_0x95cef0&&_0xde3430['state']==='in_grid'&&(_0xde3430[_0x65c77c(0x306)]===ENEMY2_TYPE||_0xde3430['type']===ENEMY3_TYPE)&&!(_0xde3430[_0x65c77c(0x306)]===ENEMY3_TYPE&&_0xde3430[_0x65c77c(0x1f7)]));if(_0x37e068[_0x65c77c(0x1d8)]>0x0){const _0x5a5d8d=_0x37e068[Math['floor'](Math[_0x65c77c(0x292)]()*_0x37e068[_0x65c77c(0x1d8)])],_0x14966d=_0x5a5d8d['id'],_0x5104b4=0xc8+Math['random']()*0x190,_0x2256c7=setTimeout(()=>{const _0x537655=_0x65c77c;try{const _0x1b97c4=enemySpawnTimeouts[_0x537655(0x228)](_0x2256c7);if(_0x1b97c4>-0x1)enemySpawnTimeouts[_0x537655(0x32a)](_0x1b97c4,0x1);if(isPaused||!isInGameState||playerLives<=0x0&&(!isTwoPlayerMode||player1Lives<=0x0&&player2Lives<=0x0)||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x1b1d05=enemies[_0x537655(0x1ce)](_0x45f416=>_0x45f416&&_0x45f416['id']===_0x14966d);_0x1b1d05&&_0x1b1d05['state']===_0x537655(0x2e0)&&(createBulletSimple(_0x1b1d05)&&(playSound(_0x537655(0x2bb),![],0.4),_0x1b1d05[_0x537655(0x2d9)]=Date[_0x537655(0x2fb)]()));}catch(_0x1ded68){console[_0x537655(0x208)](_0x537655(0x2c7)+_0x14966d+':',_0x1ded68);}},_0x5104b4);enemySpawnTimeouts[_0x65c77c(0x22b)](_0x2256c7);}}}}}break;}case _0x65c77c(0x2e0):{try{const _0x597c2a=_0x155a22[_0x65c77c(0x306)]===ENEMY3_TYPE?BOSS_WIDTH:_0x155a22[_0x65c77c(0x306)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x52606d,y:_0x20b93a}=getCurrentGridSlotPosition(_0x155a22['gridRow'],_0x155a22[_0x65c77c(0x277)],_0x597c2a);typeof _0x52606d==='number'&&!isNaN(_0x52606d)&&(_0x155a22['x']=_0x52606d),typeof _0x20b93a===_0x65c77c(0x242)&&!isNaN(_0x20b93a)&&(_0x155a22['y']=_0x20b93a),_0x155a22[_0x65c77c(0x2e5)]=_0x52606d,_0x155a22[_0x65c77c(0x220)]=_0x20b93a;}catch(_0x421b02){console[_0x65c77c(0x208)](_0x65c77c(0x288)+_0x155a22['id']+':',_0x421b02);}_0x155a22[_0x65c77c(0x295)]=_0xadc79e?_0x257d10:0x0,_0x155a22[_0x65c77c(0x251)]=0x0;_0x155a22[_0x65c77c(0x306)]===ENEMY3_TYPE&&_0x155a22[_0x65c77c(0x1f7)]&&_0x155a22['capturedShipDimensions']&&(_0x155a22['capturedShipX']=_0x155a22['x']+CAPTURED_SHIP_OFFSET_X,_0x155a22[_0x65c77c(0x294)]=_0x155a22['y']+CAPTURED_SHIP_OFFSET_Y);break;}case _0x65c77c(0x303):{_0x155a22[_0x65c77c(0x295)]=0x0,_0x155a22[_0x65c77c(0x251)]=0x0;break;}case _0x65c77c(0x250):{_0x155a22[_0x65c77c(0x295)]=0x0,_0x155a22[_0x65c77c(0x251)]=0x0;isCoopAIDemoActive&&_0x155a22[_0x65c77c(0x306)]===ENEMY3_TYPE&&_0x10cc7a!==_0x65c77c(0x250)&&((!coopAICaptureDiveAnticipationActive||_0x2bd9d8>coopAICaptureDiveAnticipationEndTime)&&(coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=_0x2bd9d8+_0x2ddc35));break;}case _0x65c77c(0x2d5):{isCoopAIDemoActive&&_0x155a22[_0x65c77c(0x306)]===ENEMY3_TYPE&&_0x10cc7a!==_0x65c77c(0x2d5)&&((!coopAICaptureDiveAnticipationActive||_0x2bd9d8>coopAICaptureDiveAnticipationEndTime)&&(coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=_0x2bd9d8+_0x2ddc35));let _0xe54e96=isTwoPlayerMode&&selectedGameMode===_0x65c77c(0x285)?isPlayer1ShipCaptured||isPlayer2ShipCaptured:isShipCaptured;if(_0xe54e96){_0x155a22[_0x65c77c(0x280)]=_0x65c77c(0x2c5);try{const {x:_0x45f774,y:_0x35f760}=getCurrentGridSlotPosition(_0x155a22[_0x65c77c(0x1e0)],_0x155a22[_0x65c77c(0x277)],_0x4cfa45);_0x155a22[_0x65c77c(0x2e5)]=_0x45f774,_0x155a22[_0x65c77c(0x220)]=_0x35f760;}catch(_0x243268){console['error'](_0x65c77c(0x2ef)+_0x155a22['id']+':',_0x243268),_0x155a22[_0x65c77c(0x2e5)]=gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22['targetGridY']=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x47d177=_0x155a22['targetX'],_0x171105=_0x155a22[_0x65c77c(0x237)];if(_0x47d177==null||_0x171105==null){console[_0x65c77c(0x208)](_0x65c77c(0x262)+_0x155a22['id']+_0x65c77c(0x219)),_0x155a22['state']=_0x65c77c(0x2c5);try{const {x:_0x56864e,y:_0x58b53b}=getCurrentGridSlotPosition(_0x155a22[_0x65c77c(0x1e0)],_0x155a22[_0x65c77c(0x277)],_0x4cfa45);_0x155a22['targetGridX']=_0x56864e,_0x155a22[_0x65c77c(0x220)]=_0x58b53b;}catch(_0x5759d1){console[_0x65c77c(0x208)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20'+_0x155a22['id']+':',_0x5759d1),_0x155a22[_0x65c77c(0x2e5)]=gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22['targetGridY']=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x47370c=_0x47d177-_0x155a22['x'],_0x9b557b=_0x171105-_0x155a22['y'],_0x1ad993=Math[_0x65c77c(0x1d1)](_0x47370c*_0x47370c+_0x9b557b*_0x9b557b),_0x216d62=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x58090c=_0x216d62*0.6;_0x1ad993>_0x58090c?(_0x155a22['velocityX']=_0x47370c/_0x1ad993*_0x216d62,_0x155a22[_0x65c77c(0x251)]=_0x9b557b/_0x1ad993*_0x216d62,_0x155a22['x']+=_0x155a22[_0x65c77c(0x295)],_0x155a22['y']+=_0x155a22[_0x65c77c(0x251)]):(_0x155a22['x']=_0x47d177,_0x155a22['y']=_0x171105,_0x155a22[_0x65c77c(0x295)]=0x0,_0x155a22[_0x65c77c(0x251)]=0x0,_0x155a22[_0x65c77c(0x280)]='capturing',_0x155a22[_0x65c77c(0x2a3)]=_0x2bd9d8,capturingBossId=_0x155a22['id'],captureBeamActive=!![],captureBeamSource={'x':_0x155a22['x']+_0x4cfa45/0x2,'y':_0x155a22['y']+_0x17eef4},captureBeamTargetY=_0x155a22['y'],captureBeamProgress=0x0,playSound(_0x65c77c(0x2eb),![],0.6),_0x155a22[_0x65c77c(0x313)]&&(captureAttemptMadeThisLevel=!![],delete _0x155a22[_0x65c77c(0x313)]));break;}case _0x65c77c(0x1fa):{_0x155a22['velocityX']=0x0,_0x155a22[_0x65c77c(0x251)]=0x0;_0x155a22[_0x65c77c(0x313)]&&!captureAttemptMadeThisLevel&&(captureAttemptMadeThisLevel=!![],delete _0x155a22['isPreparingForImmediateCapture']);let _0x1cf0f9=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x1cf0f9=isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x155a22['id']||isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x155a22['id']:_0x1cf0f9=isShipCaptured&&capturedBossIdWithMessage===_0x155a22['id'];if(_0x1cf0f9){captureBeamActive=![];if(capturingBossId===_0x155a22['id'])capturingBossId=null;_0x155a22[_0x65c77c(0x280)]=_0x65c77c(0x2c5),stopSound('captureSound');if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x52f046=_0x2bd9d8-_0x155a22[_0x65c77c(0x2a3)],_0x4848b1=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x296e3a=CAPTURE_BEAM_DURATION_MS;if(_0x52f046<_0x4848b1)captureBeamProgress=_0x52f046/_0x4848b1;else{if(_0x52f046<_0x296e3a-_0x4848b1)captureBeamProgress=0x1;else{if(_0x52f046<_0x296e3a)captureBeamProgress=0x1-(_0x52f046-(_0x296e3a-_0x4848b1))/_0x4848b1;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(_0x65c77c(0x2eb)),_0x155a22[_0x65c77c(0x280)]='attacking',_0x155a22[_0x65c77c(0x2a2)]=generateAttackPathInternal(_0x155a22),_0x155a22['attackPathSegmentIndex']=0x0,_0x155a22[_0x65c77c(0x23f)]=0x0,_0x155a22[_0x65c77c(0x1e3)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x155a22['lastFiredTime']=0x0,_0x155a22[_0x65c77c(0x1f6)]=!![],_0x155a22[_0x65c77c(0x2f3)]=0x0,_0x155a22[_0x65c77c(0x260)]=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}}}captureBeamProgress=Math[_0x65c77c(0x2c4)](0x0,Math['min'](0x1,captureBeamProgress));if(captureBeamActive&&captureBeamProgress>=0.95){const _0x5f229b=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x5737b6=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x1e595e=_0x155a22['x']+_0x4cfa45/0x2,_0x5c50d4=_0x155a22['y']+_0x17eef4,_0x10ebd7=gameCanvas[_0x65c77c(0x1fd)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x15c6e1=Math[_0x65c77c(0x2c4)](_0x5f229b,_0x5737b6),_0x170a0f=_0x1e595e-_0x15c6e1/0x2,_0x32640f=_0x5c50d4,_0x335e89=_0x10ebd7-_0x5c50d4;if(_0x335e89>0x0){const _0x22f28f={'x':_0x170a0f,'y':_0x32640f,'width':_0x15c6e1,'height':_0x335e89};let _0x105ce6=null,_0x2a1555=0x0;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&checkCollision(ship1,_0x22f28f))_0x105ce6=ship1,_0x2a1555=0x1;else ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&checkCollision(ship2,_0x22f28f)&&(_0x105ce6=ship2,_0x2a1555=0x2);}else ship&&playerLives>0x0&&!isShipCaptured&&checkCollision(ship,_0x22f28f)&&(_0x105ce6=ship,_0x2a1555=currentPlayer);if(_0x105ce6){_0x155a22['capturedShipDimensions']={'width':_0x105ce6[_0x65c77c(0x227)],'height':_0x105ce6[_0x65c77c(0x1fd)]},_0x155a22[_0x65c77c(0x1f7)]=!![],stopSound('captureSound'),_0x155a22['state']=_0x65c77c(0x2b0),_0x155a22[_0x65c77c(0x2e5)]=null,_0x155a22[_0x65c77c(0x220)]=null,_0x155a22[_0x65c77c(0x31f)]=_0x105ce6['y'],_0x155a22[_0x65c77c(0x1e8)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x2bd9d8,capturedBossIdWithMessage=_0x155a22['id'],playSound(_0x65c77c(0x2d6),![],0.3),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,handlePlayerShipCollision(_0x2a1555,![],_0x2bd9d8,!![]);isCoopAIDemoActive&&(aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![]);break;}}}break;}case _0x65c77c(0x2b0):{_0x155a22[_0x65c77c(0x295)]=0x0,_0x155a22['velocityY']=0x0;if(_0x155a22[_0x65c77c(0x1f7)]&&_0x155a22['capturedShipDimensions']&&typeof _0x155a22['initialCaptureAnimationY']===_0x65c77c(0x242)){const _0x140a4e=_0x2bd9d8-captureMessageStartTime,_0x23dd47=Math[_0x65c77c(0x2f5)](0x1,_0x140a4e/CAPTURE_MESSAGE_DURATION),_0x5d364a=_0x155a22['y']+CAPTURED_SHIP_OFFSET_Y,_0x5ec974=_0x155a22[_0x65c77c(0x31f)];_0x155a22[_0x65c77c(0x294)]=_0x5ec974+(_0x5d364a-_0x5ec974)*_0x23dd47,_0x155a22[_0x65c77c(0x307)]=_0x155a22['x']+CAPTURED_SHIP_OFFSET_X;}else _0x155a22['capturedShipX']=_0x155a22['x']+CAPTURED_SHIP_OFFSET_X,_0x155a22[_0x65c77c(0x294)]=_0x155a22['y']+CAPTURED_SHIP_OFFSET_Y;break;}case _0x65c77c(0x2b8):{if(isEntrancePhaseActive)break;const _0x31230d=_0x155a22[_0x65c77c(0x2a2)],_0x4d5adf=3.8;if(!_0x31230d||_0x31230d[_0x65c77c(0x1d8)]===0x0){console['error'](_0x65c77c(0x2f2)+_0x288c4b+'\x20attacking\x20without\x20path!\x20Returning.'),_0x155a22[_0x65c77c(0x280)]=_0x65c77c(0x2c5);try{const {x:_0x1c207c,y:_0x22ce5a}=getCurrentGridSlotPosition(_0x155a22[_0x65c77c(0x1e0)],_0x155a22[_0x65c77c(0x277)],_0x4cfa45);_0x155a22['targetGridX']=_0x1c207c,_0x155a22['targetGridY']=_0x22ce5a;}catch(_0x26bfa5){console[_0x65c77c(0x208)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x288c4b+_0x65c77c(0x29e),_0x26bfa5),_0x155a22['targetGridX']=gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22[_0x65c77c(0x220)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}if(_0x155a22[_0x65c77c(0x263)]>=_0x31230d['length']){console[_0x65c77c(0x2e4)](_0x65c77c(0x2f2)+_0x288c4b+'\x20attacking,\x20index\x20'+_0x155a22[_0x65c77c(0x263)]+_0x65c77c(0x31a)+_0x31230d['length']+_0x65c77c(0x213)),_0x155a22['state']=_0x65c77c(0x2c5);try{const {x:_0x445da0,y:_0xd131d5}=getCurrentGridSlotPosition(_0x155a22[_0x65c77c(0x1e0)],_0x155a22[_0x65c77c(0x277)],_0x4cfa45);_0x155a22[_0x65c77c(0x2e5)]=_0x445da0,_0x155a22[_0x65c77c(0x220)]=_0xd131d5;}catch(_0x1abcac){console[_0x65c77c(0x208)](_0x65c77c(0x24f)+_0x288c4b+_0x65c77c(0x217),_0x1abcac),_0x155a22[_0x65c77c(0x2e5)]=gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22['targetGridY']=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x3a63de=_0x31230d[_0x155a22[_0x65c77c(0x263)]];if(!_0x3a63de||!_0x3a63de['p0']||!_0x3a63de['p1']||!_0x3a63de['p2']||!_0x3a63de['p3']){console['error'](_0x65c77c(0x2f2)+_0x288c4b+_0x65c77c(0x1ee)+_0x155a22['attackPathSegmentIndex']+'!\x20Returning.'),_0x155a22[_0x65c77c(0x280)]=_0x65c77c(0x2c5);try{const {x:_0x2d1319,y:_0x2054e6}=getCurrentGridSlotPosition(_0x155a22[_0x65c77c(0x1e0)],_0x155a22[_0x65c77c(0x277)],_0x4cfa45);_0x155a22[_0x65c77c(0x2e5)]=_0x2d1319,_0x155a22['targetGridY']=_0x2054e6;}catch(_0xa2ef84){console[_0x65c77c(0x208)](_0x65c77c(0x24f)+_0x288c4b+'\x20(invalid\x20attack\x20segment):',_0xa2ef84),_0x155a22[_0x65c77c(0x2e5)]=gameCanvas['width']/0x2,_0x155a22[_0x65c77c(0x220)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}const _0x41c0b7=_0x155a22[_0x65c77c(0x1e3)]/0x3e8*_0x4d5adf;_0x155a22[_0x65c77c(0x23f)]+=_0x41c0b7;let _0x13faac,_0x253ff3;const _0x45a4ba=_0x155a22['x'],_0x2351fc=_0x155a22['y'];if(_0x155a22['attackPathT']>=0x1){try{_0x13faac=calculateBezierPoint(0x1,_0x3a63de['p0']['x'],_0x3a63de['p1']['x'],_0x3a63de['p2']['x'],_0x3a63de['p3']['x']),_0x253ff3=calculateBezierPoint(0x1,_0x3a63de['p0']['y'],_0x3a63de['p1']['y'],_0x3a63de['p2']['y'],_0x3a63de['p3']['y']);}catch(_0x13a4d0){console[_0x65c77c(0x208)]('Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20'+_0x155a22['id']+':',_0x13a4d0),_0x13faac=_0x155a22['x'],_0x253ff3=_0x155a22['y'],_0x155a22[_0x65c77c(0x280)]='returning';try{const {x:_0x3aed8f,y:_0x1951fb}=getCurrentGridSlotPosition(_0x155a22[_0x65c77c(0x1e0)],_0x155a22['gridCol'],_0x4cfa45);_0x155a22['targetGridX']=_0x3aed8f,_0x155a22[_0x65c77c(0x220)]=_0x1951fb;}catch(_0x2dd706){console['error'](_0x65c77c(0x28f)+_0x155a22['id']+':',_0x2dd706),_0x155a22[_0x65c77c(0x2e5)]=gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22[_0x65c77c(0x220)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}_0x155a22[_0x65c77c(0x23f)]=0x0,_0x155a22[_0x65c77c(0x263)]++;if(_0x155a22[_0x65c77c(0x263)]>=_0x31230d[_0x65c77c(0x1d8)]){_0x155a22['state']='returning',_0x155a22[_0x65c77c(0x2d9)]=0x0,_0x155a22[_0x65c77c(0x2f3)]=0x0,_0x155a22[_0x65c77c(0x260)]=null;try{const {x:_0x27181a,y:_0x2e3be1}=getCurrentGridSlotPosition(_0x155a22[_0x65c77c(0x1e0)],_0x155a22[_0x65c77c(0x277)],_0x4cfa45);_0x155a22[_0x65c77c(0x2e5)]=_0x27181a,_0x155a22[_0x65c77c(0x220)]=_0x2e3be1;}catch(_0x1689d8){console[_0x65c77c(0x208)](_0x65c77c(0x24f)+_0x288c4b+_0x65c77c(0x265),_0x1689d8),_0x155a22[_0x65c77c(0x2e5)]=gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22['targetGridY']=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}else{const _0x13fa4d=_0x31230d[_0x155a22[_0x65c77c(0x263)]];if(!_0x13fa4d?.['p0']){console[_0x65c77c(0x208)](_0x65c77c(0x2f2)+_0x288c4b+_0x65c77c(0x1fe)+_0x155a22['attackPathSegmentIndex']+_0x65c77c(0x316)),_0x13faac=_0x155a22['x'],_0x253ff3=_0x155a22['y'],_0x155a22[_0x65c77c(0x280)]=_0x65c77c(0x2c5);try{const {x:_0x5f0cce,y:_0x4b1606}=getCurrentGridSlotPosition(_0x155a22[_0x65c77c(0x1e0)],_0x155a22['gridCol'],_0x4cfa45);_0x155a22[_0x65c77c(0x2e5)]=_0x5f0cce,_0x155a22['targetGridY']=_0x4b1606;}catch(_0x39a89d){console[_0x65c77c(0x208)](_0x65c77c(0x284)+_0x155a22['id']+':',_0x39a89d),_0x155a22[_0x65c77c(0x2e5)]=gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22[_0x65c77c(0x220)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}}}else try{_0x13faac=calculateBezierPoint(_0x155a22['attackPathT'],_0x3a63de['p0']['x'],_0x3a63de['p1']['x'],_0x3a63de['p2']['x'],_0x3a63de['p3']['x']),_0x253ff3=calculateBezierPoint(_0x155a22[_0x65c77c(0x23f)],_0x3a63de['p0']['y'],_0x3a63de['p1']['y'],_0x3a63de['p2']['y'],_0x3a63de['p3']['y']);}catch(_0x1549bd){console[_0x65c77c(0x208)](_0x65c77c(0x261)+_0x155a22['id']+':',_0x1549bd),_0x13faac=_0x155a22['x'],_0x253ff3=_0x155a22['y'],_0x155a22[_0x65c77c(0x280)]=_0x65c77c(0x2c5);try{const {x:_0x288f1e,y:_0x45b994}=getCurrentGridSlotPosition(_0x155a22[_0x65c77c(0x1e0)],_0x155a22[_0x65c77c(0x277)],_0x4cfa45);_0x155a22[_0x65c77c(0x2e5)]=_0x288f1e,_0x155a22[_0x65c77c(0x220)]=_0x45b994;}catch(_0x38cc95){console[_0x65c77c(0x208)](_0x65c77c(0x253)+_0x155a22['id']+':',_0x38cc95),_0x155a22[_0x65c77c(0x2e5)]=gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22[_0x65c77c(0x220)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];break;}if(_0x155a22&&_0x155a22['state']===_0x65c77c(0x2b8)){const _0x1a87fe=_0x155a22['attackFormationOffsetX']||0x0,_0x2570d1=_0x13faac+_0x1a87fe,_0x808058=_0x253ff3;_0x155a22[_0x65c77c(0x295)]=_0x2570d1-_0x45a4ba,_0x155a22[_0x65c77c(0x251)]=_0x808058-_0x2351fc,_0x155a22['x']=_0x2570d1,_0x155a22['y']=_0x808058;if(_0x155a22['y']>gameCanvas[_0x65c77c(0x1fd)]+_0x17eef4*1.5){_0x155a22['state']=_0x65c77c(0x2c5),_0x155a22['attackPathSegmentIndex']=0x0,_0x155a22[_0x65c77c(0x23f)]=0x0,_0x155a22[_0x65c77c(0x2d9)]=0x0,_0x155a22['attackFormationOffsetX']=0x0,_0x155a22[_0x65c77c(0x260)]=null,_0x155a22['y']=-_0x17eef4*(1.1+Math[_0x65c77c(0x292)]()*0.4),_0x155a22['x']=Math[_0x65c77c(0x292)]()*(gameCanvas[_0x65c77c(0x227)]-_0x4cfa45),_0x155a22[_0x65c77c(0x295)]=0x0,_0x155a22['velocityY']=0x0;try{const {x:_0x741e4,y:_0x140986}=getCurrentGridSlotPosition(_0x155a22[_0x65c77c(0x1e0)],_0x155a22[_0x65c77c(0x277)],_0x4cfa45);_0x155a22[_0x65c77c(0x2e5)]=_0x741e4,_0x155a22[_0x65c77c(0x220)]=_0x140986;}catch(_0xaa458a){console[_0x65c77c(0x208)](_0x65c77c(0x24f)+_0x288c4b+'\x20off\x20screen:',_0xaa458a),_0x155a22[_0x65c77c(0x2e5)]=gameCanvas[_0x65c77c(0x227)]/0x2,_0x155a22[_0x65c77c(0x220)]=ENEMY_TOP_MARGIN;}if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}}break;}case'returning':{if(isEntrancePhaseActive)break;if(_0x155a22[_0x65c77c(0x2e5)]==null||_0x155a22['targetGridY']==null){console['warn'](_0x65c77c(0x2f2)+_0x288c4b+_0x65c77c(0x2f7));try{const {x:_0xf37581,y:_0x1df55d}=getCurrentGridSlotPosition(_0x155a22['gridRow'],_0x155a22[_0x65c77c(0x277)],_0x4cfa45);_0x155a22['targetGridX']=_0xf37581,_0x155a22[_0x65c77c(0x220)]=_0x1df55d;}catch(_0x2aef85){console[_0x65c77c(0x208)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x288c4b+_0x65c77c(0x296),_0x2aef85),_0x155a22['state']=_0x65c77c(0x2e0),_0x155a22['x']=gameCanvas['width']/0x2,_0x155a22['y']=ENEMY_TOP_MARGIN;break;}}const _0x4edc63=_0x155a22[_0x65c77c(0x2e5)],_0x1df615=_0x155a22[_0x65c77c(0x220)],_0x1e6bcf=_0x4edc63-_0x155a22['x'],_0x42c779=_0x1df615-_0x155a22['y'],_0x5bb89f=Math['sqrt'](_0x1e6bcf*_0x1e6bcf+_0x42c779*_0x42c779),_0x3f8ea6=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x3c4382=BASE_RETURN_SPEED*_0x3f8ea6,_0x513263=_0x3c4382*0.5;if(_0x5bb89f>_0x513263)_0x155a22[_0x65c77c(0x295)]=_0x1e6bcf/_0x5bb89f*_0x3c4382,_0x155a22['velocityY']=_0x42c779/_0x5bb89f*_0x3c4382,_0x155a22['x']+=_0x155a22[_0x65c77c(0x295)],_0x155a22['y']+=_0x155a22[_0x65c77c(0x251)];else{_0x155a22['x']=_0x4edc63,_0x155a22['y']=_0x1df615,_0x155a22[_0x65c77c(0x295)]=0x0,_0x155a22[_0x65c77c(0x251)]=0x0,_0x155a22[_0x65c77c(0x280)]=_0x65c77c(0x2e0),_0x155a22['justReturned']=!![],_0x155a22[_0x65c77c(0x2f3)]=0x0,_0x155a22['attackGroupId']=null;_0x155a22[_0x65c77c(0x28b)]('returnLogDone')&&delete _0x155a22['returnLogDone'];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(_0x65c77c(0x2b6),!![],0.1));if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}break;}}if(_0x155a22&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x65c77c(0x285)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){const _0x477fbe=[_0x65c77c(0x2b8),_0x65c77c(0x223),_0x65c77c(0x206),_0x65c77c(0x2d5)];if(_0x477fbe['includes'](_0x155a22[_0x65c77c(0x280)])){let _0x2d36fb=[];if(isTwoPlayerMode&&selectedGameMode===_0x65c77c(0x285)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x2d36fb[_0x65c77c(0x22b)]({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x2d36fb[_0x65c77c(0x22b)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x2d36fb[_0x65c77c(0x22b)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(const _0x18f4b1 of _0x2d36fb){const _0x551056=_0x18f4b1[_0x65c77c(0x27a)],_0x2bee76={'x':_0x155a22['x'],'y':_0x155a22['y'],'width':_0x4cfa45,'height':_0x17eef4},_0x41f76e={'x':_0x551056['x'],'y':_0x551056['y'],'width':_0x551056[_0x65c77c(0x227)],'height':_0x551056[_0x65c77c(0x1fd)]},_0x1a8ffe=_0x18f4b1['dual']?{'x':_0x551056['x']+DUAL_SHIP_OFFSET_X,'y':_0x551056['y'],'width':_0x551056[_0x65c77c(0x227)],'height':_0x551056[_0x65c77c(0x1fd)]}:null;let _0x44ead7=![],_0x5e666a=![];if(checkCollision(_0x2bee76,_0x41f76e))_0x44ead7=!![];else _0x18f4b1[_0x65c77c(0x1dd)]&&_0x1a8ffe&&checkCollision(_0x2bee76,_0x1a8ffe)&&(_0x44ead7=!![],_0x5e666a=!![]);if(_0x44ead7){createExplosion(_0x155a22['x']+_0x4cfa45/0x2,_0x155a22['y']+_0x17eef4/0x2),playSound(_0x65c77c(0x21d),![],0.6),enemies[_0x65c77c(0x32a)](_0x554bc5,0x1),_0x155a22=null,handlePlayerShipCollision(_0x18f4b1[_0x65c77c(0x232)],_0x5e666a,_0x2bd9d8,![]);if(_0x155a22===null)break;}}}}if(!_0x155a22)continue;}if(!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x65c77c(0x285)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){let _0x49a478=[];if(isTwoPlayerMode&&selectedGameMode===_0x65c77c(0x285)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x49a478[_0x65c77c(0x22b)]({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x49a478[_0x65c77c(0x22b)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&!isInvincible&&_0x49a478[_0x65c77c(0x22b)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(let _0x32c9e1=enemyBullets[_0x65c77c(0x1d8)]-0x1;_0x32c9e1>=0x0;_0x32c9e1--){const _0x3b3340=enemyBullets[_0x32c9e1];if(!_0x3b3340){enemyBullets[_0x65c77c(0x32a)](_0x32c9e1,0x1);continue;}const _0x147620={'x':_0x3b3340['x'],'y':_0x3b3340['y'],'width':_0x3b3340[_0x65c77c(0x227)],'height':_0x3b3340[_0x65c77c(0x1fd)]};let _0x29e14d=![];for(const _0x5f8f4d of _0x49a478){const _0x5e6b52=_0x5f8f4d[_0x65c77c(0x27a)],_0x17bb70={'x':_0x5e6b52['x'],'y':_0x5e6b52['y'],'width':_0x5e6b52[_0x65c77c(0x227)],'height':_0x5e6b52[_0x65c77c(0x1fd)]},_0x132fc5=_0x5f8f4d['dual']?{'x':_0x5e6b52['x']+DUAL_SHIP_OFFSET_X,'y':_0x5e6b52['y'],'width':_0x5e6b52[_0x65c77c(0x227)],'height':_0x5e6b52[_0x65c77c(0x1fd)]}:null;let _0x1059c7=![],_0xee3ef3=![];if(checkCollision(_0x147620,_0x17bb70))_0x1059c7=!![];else _0x5f8f4d[_0x65c77c(0x1dd)]&&_0x132fc5&&checkCollision(_0x147620,_0x132fc5)&&(_0x1059c7=!![],_0xee3ef3=!![]);if(_0x1059c7){playSound('lostLifeSound',![],0.6),handlePlayerShipCollision(_0x5f8f4d[_0x65c77c(0x232)],_0xee3ef3,_0x2bd9d8,![]),enemyBullets[_0x65c77c(0x32a)](_0x32c9e1,0x1),_0x29e14d=!![];break;}}if(_0x29e14d)continue;}}updateHitSparks();}catch(_0x542baa){console['error'](_0x65c77c(0x2a8),_0x542baa,_0x542baa[_0x65c77c(0x2a0)]),isGridSoundPlaying=![],stopSound(_0x65c77c(0x2b6)),isEntrancePhaseActive=![],stopSound(_0x65c77c(0x2e1)),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(_0x65c77c(0x2eb)),stopSound('shipCapturedSound'),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState==='function')showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x65c77c(0x2f0));}}function handlePlayerShipCollision(_0x5890e4,_0x44e8a3,_0x6e28f7,_0x607386=![]){const _0x3d10c7=_0x109c4f,_0xa3978a=_0x6e28f7,_0x5bd87c=gameCanvas?gameCanvas[_0x3d10c7(0x1fd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;let _0x29d61a=0x0,_0x5a59a4=null;if(isTwoPlayerMode&&selectedGameMode===_0x3d10c7(0x285)){_0x5a59a4=_0x5890e4===0x1?ship1:ship2;if(_0x5a59a4){_0x29d61a=_0x5a59a4['x'];if(_0x607386){if(_0x5890e4===0x1)player1CaptureRespawnX=_0x5a59a4['x'];else{if(_0x5890e4===0x2)player2CaptureRespawnX=_0x5a59a4['x'];}}}else{if(_0x5890e4===0x1&&typeof player1CaptureRespawnX===_0x3d10c7(0x242)&&player1CaptureRespawnX!==0x0)_0x29d61a=player1CaptureRespawnX;else{if(_0x5890e4===0x2&&typeof player2CaptureRespawnX===_0x3d10c7(0x242)&&player2CaptureRespawnX!==0x0)_0x29d61a=player2CaptureRespawnX;else{if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&gameCanvas)_0x29d61a=_0x5890e4===0x1?gameCanvas[_0x3d10c7(0x227)]/0x2-gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2:gameCanvas[_0x3d10c7(0x227)]/0x2+gameCanvas[_0x3d10c7(0x227)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;else gameCanvas?_0x29d61a=gameCanvas['width']/0x2-SHIP_WIDTH/0x2:_0x29d61a=0xc8;}}}}else{_0x5a59a4=ship;if(_0x5a59a4)_0x29d61a=_0x5a59a4['x'],_0x607386&&(capturedShipRespawnX_NormalMode=ship['x']);else _0x607386&&capturedShipRespawnX_NormalMode!==0x0?_0x29d61a=capturedShipRespawnX_NormalMode:_0x29d61a=gameCanvas?gameCanvas[_0x3d10c7(0x227)]/0x2-SHIP_WIDTH/0x2:0xc8;}if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x5890e4===0x1){if(_0x607386){isPlayer1ShipCaptured=!![],player1IsDualShipActive=![],player1Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x3d10c7(0x301))coopPartner1CapturedTime=_0xa3978a;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0xa3978a,playSound(_0x3d10c7(0x282),![],0.4),ship1=null,player1NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];if(capturedBossIdWithMessage&&enemies[_0x3d10c7(0x1ce)](_0x36600b=>_0x36600b['id']===capturedBossIdWithMessage)){const _0x388450=enemies[_0x3d10c7(0x1ce)](_0x1ac5db=>_0x1ac5db['id']===capturedBossIdWithMessage);_0x388450&&(_0x388450[_0x3d10c7(0x1f7)]=![],_0x388450[_0x3d10c7(0x239)]=null);}}else player1NeedsRespawnAfterCapture=!![],ship1=null;}else{if(player1IsDualShipActive&&ship1){player1IsDualShipActive=![];const _0x43579b=_0x44e8a3?ship1['x']+DUAL_SHIP_OFFSET_X+ship1[_0x3d10c7(0x227)]/0x2:ship1['x']+ship1[_0x3d10c7(0x227)]/0x2;createExplosion(_0x43579b,ship1['y']+ship1[_0x3d10c7(0x1fd)]/0x2),ship1['x']=_0x29d61a,ship1['y']=_0x5bd87c,ship1[_0x3d10c7(0x1cf)]=ship1['x'],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0xa3978a+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0xa3978a+RESPAWN_DELAY_MS;}else{if(ship1)createExplosion(ship1['x']+ship1['width']/0x2,ship1['y']+ship1[_0x3d10c7(0x1fd)]/0x2);player1Lives--;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0xa3978a,playSound(_0x3d10c7(0x282),![],0.4),ship1=null;if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}else isPlayer1Invincible=!![],player1InvincibilityEndTime=_0xa3978a+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0xa3978a+RESPAWN_DELAY_MS,ship1?(ship1['x']=_0x29d61a,ship1['y']=_0x5bd87c,ship1['targetX']=ship1['x']):ship1={'x':_0x29d61a,'y':_0x5bd87c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x29d61a,'id':'p1'};}}}else{if(_0x5890e4===0x2){if(_0x607386){isPlayer2ShipCaptured=!![],player2IsDualShipActive=![],player2Lives--;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')coopPartner2CapturedTime=_0xa3978a;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0xa3978a,playSound('gameOverSound',![],0.4),ship2=null,player2NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById==='ai_p2')aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];if(capturedBossIdWithMessage&&enemies[_0x3d10c7(0x1ce)](_0x554334=>_0x554334['id']===capturedBossIdWithMessage)){const _0x16bd47=enemies[_0x3d10c7(0x1ce)](_0x45dad0=>_0x45dad0['id']===capturedBossIdWithMessage);_0x16bd47&&(_0x16bd47[_0x3d10c7(0x1f7)]=![],_0x16bd47['capturedShipDimensions']=null);}}else player2NeedsRespawnAfterCapture=!![],ship2=null;}else{if(player2IsDualShipActive&&ship2){player2IsDualShipActive=![];const _0x5a0b56=_0x44e8a3?ship2['x']+DUAL_SHIP_OFFSET_X+ship2['width']/0x2:ship2['x']+ship2[_0x3d10c7(0x227)]/0x2;createExplosion(_0x5a0b56,ship2['y']+ship2['height']/0x2),ship2['x']=_0x29d61a,ship2['y']=_0x5bd87c,ship2[_0x3d10c7(0x1cf)]=ship2['x'],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0xa3978a+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0xa3978a+RESPAWN_DELAY_MS;}else{if(ship2)createExplosion(ship2['x']+ship2[_0x3d10c7(0x227)]/0x2,ship2['y']+ship2[_0x3d10c7(0x1fd)]/0x2);player2Lives--;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0xa3978a,playSound(_0x3d10c7(0x282),![],0.4),ship2=null;if(aiPlayerActivelySeekingCaptureById==='p2'||aiPlayerActivelySeekingCaptureById===_0x3d10c7(0x2c9))aiPlayerActivelySeekingCaptureById=null;if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=![];}else isPlayer2Invincible=!![],player2InvincibilityEndTime=_0xa3978a+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0xa3978a+RESPAWN_DELAY_MS,ship2?(ship2['x']=_0x29d61a,ship2['y']=_0x5bd87c,ship2['targetX']=_0x29d61a):ship2={'x':_0x29d61a,'y':_0x5bd87c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x29d61a,'id':'p2'};}}}}player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isDualShipActive&&!_0x607386&&_0x5a59a4){isDualShipActive=![];if(isTwoPlayerMode&&selectedGameMode===_0x3d10c7(0x325)){if(_0x5890e4===0x1)player1IsDualShipActive=![];else{if(_0x5890e4===0x2)player2IsDualShipActive=![];}}else{if(!isTwoPlayerMode)player1IsDualShipActive=![];}const _0x1fd2c=_0x44e8a3?_0x29d61a+DUAL_SHIP_OFFSET_X+SHIP_WIDTH/0x2:_0x29d61a+SHIP_WIDTH/0x2;createExplosion(_0x1fd2c,_0x5bd87c+SHIP_HEIGHT/0x2);ship&&(ship['x']=_0x29d61a,ship['y']=_0x5bd87c,ship[_0x3d10c7(0x1cf)]=ship['x']);isInvincible=!![],invincibilityEndTime=_0xa3978a+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0xa3978a+RESPAWN_DELAY_MS;if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x3d10c7(0x325)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}else{if(!_0x607386&&_0x5a59a4)createExplosion(_0x29d61a+SHIP_WIDTH/0x2,_0x5bd87c+SHIP_HEIGHT/0x2);if(_0x607386){isShipCaptured=!![];if(ship)ship=null;}playerLives--;if(playerLives<=0x0){playerLives=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x3d10c7(0x325)){if(_0x5890e4===0x1)player1Lives=0x0;else{if(_0x5890e4===0x2)player2Lives=0x0;}isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0xa3978a,playerWhoIsGameOver=_0x5890e4,playSound('gameOverSound',![],0.4);const _0x4fda73=_0x5890e4===0x1?0x2:0x1,_0x13b6c5=_0x4fda73===0x1?player1Lives:player2Lives;_0x13b6c5>0x0?nextActionAfterPlayerGameOver=_0x3d10c7(0x29b):nextActionAfterPlayerGameOver=_0x3d10c7(0x2bd);bullets=[],enemyBullets=[],explosions=[];if(!(_0x13b6c5>0x0))ship=null;}else player1Lives=0x0,ship=null,playSound('gameOverSound',![],0.4),triggerFinalGameOverSequence();}else{if(isTwoPlayerMode&&selectedGameMode==='normal'){if(_0x5890e4===0x1)player1Lives=playerLives;else player2Lives=playerLives;}if(!_0x607386){isInvincible=!![],invincibilityEndTime=_0xa3978a+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0xa3978a+RESPAWN_DELAY_MS;if(ship&&gameCanvas){ship['x']=_0x29d61a,ship['y']=_0x5bd87c,ship[_0x3d10c7(0x1cf)]=ship['x'];if(!isManualControl&&!isPlayerTwoAI)aiNeedsStabilization=!![];else{if(isPlayerTwoAI&&selectedGameMode===_0x3d10c7(0x325)&&currentPlayer===0x2)aiNeedsStabilization=!![];}}}if(_0x607386)isDualShipActive=![];}}}if(!_0x607386)fallingShips=[];}function switchPlayerTurn(){const _0x262822=_0x109c4f;if(!isTwoPlayerMode||selectedGameMode===_0x262822(0x285))return![];stopSound(_0x262822(0x2c6));if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive;if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive;if(player2Score>highScore)highScore=player2Score;}const _0x2218a2=currentPlayer===0x1?0x2:0x1,_0x14177b=_0x2218a2===0x1?player1Lives:player2Lives;if(_0x14177b<=0x0){const _0xa93661=currentPlayer===0x1?player1Lives:player2Lives;return _0xa93661<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x2218a2,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x36f73d=_0x109c4f;try{if(isPaused||!isInGameState||isChallengingStage||isWaveTransitioning)return;let _0x2517af=![];isTwoPlayerMode&&selectedGameMode==='coop'?(player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)&&(_0x2517af=!![]):playerLives>0x0&&ship&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(_0x2517af=!![]);if(!_0x2517af)return;if(isCoopAIDemoActive&&coopAICaptureDiveAnticipationActive&&Date[_0x36f73d(0x2fb)]()<coopAICaptureDiveAnticipationEndTime)return;const _0x57d204=enemies[_0x36f73d(0x2db)](_0x1b212f=>_0x1b212f&&_0x1b212f[_0x36f73d(0x280)]===_0x36f73d(0x2e0));if(_0x57d204[_0x36f73d(0x1d8)]===0x0)return;const _0x15bbf1=Date[_0x36f73d(0x2fb)](),_0x280ea7=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x15bbf1-lastGridFireCheckTime<_0x280ea7)return;lastGridFireCheckTime=_0x15bbf1;const _0x7ec0d6=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x57154f=Math[_0x36f73d(0x297)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x57168f=0x0;_0x57d204[_0x36f73d(0x1f0)](()=>Math[_0x36f73d(0x292)]()-0.5);for(const _0x2aaae6 of _0x57d204){if(_0x57168f>=_0x57154f)break;if(_0x2aaae6[_0x36f73d(0x306)]===ENEMY2_TYPE||_0x2aaae6[_0x36f73d(0x306)]===ENEMY3_TYPE){if(_0x2aaae6[_0x36f73d(0x306)]===ENEMY3_TYPE&&_0x2aaae6['hasCapturedShip'])continue;Math['random']()<_0x7ec0d6&&(createBulletSimple(_0x2aaae6)&&(playSound(_0x36f73d(0x2bb),![],0.4),_0x2aaae6[_0x36f73d(0x2d9)]=_0x15bbf1,_0x57168f++));}}}catch(_0x5f43c0){console[_0x36f73d(0x208)](_0x36f73d(0x2d2),_0x5f43c0);}}function runSingleGameUpdate(_0x4eafed){const _0x4930fb=_0x109c4f;try{const _0x4a08b2=Date['now']();let _0x4d6abb=![];isTwoPlayerMode&&selectedGameMode===_0x4930fb(0x285)?_0x4d6abb=player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture:_0x4d6abb=playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;let _0x347c41=![];if(isManualControl&&connectedGamepadIndex!==null){if(isTwoPlayerMode&&selectedGameMode===_0x4930fb(0x285)){if(player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage)_0x347c41=!![];}else{if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(!isPlayerTwoAI||isPlayerTwoAI&&currentPlayer===0x1))_0x347c41=!![];}}if(_0x347c41&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x11596e=navigator[_0x4930fb(0x207)]();if(_0x11596e?.[connectedGamepadIndex]){const _0x340446=_0x11596e[connectedGamepadIndex],_0x2f3b6c=processSingleController(_0x340446,previousGameButtonStates);previousGameButtonStates=_0x2f3b6c[_0x4930fb(0x22d)]['slice']();if(_0x2f3b6c[_0x4930fb(0x302)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x4930fb(0x1d8)]>0x0)previousGameButtonStates=[];}}else connectedGamepadIndex===null&&previousGameButtonStates[_0x4930fb(0x1d8)]>0x0&&(previousGameButtonStates=[]);let _0x35a7a3=![];if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x4930fb(0x285)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage)_0x35a7a3=!![];}else{if(isManualControl&&isTwoPlayerMode&&selectedGameMode===_0x4930fb(0x325)&&!isPlayerTwoAI&&connectedGamepadIndexP2!==null){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&currentPlayer===0x2)_0x35a7a3=!![];}}if(_0x35a7a3&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x4420d7=navigator['getGamepads']();if(_0x4420d7?.[connectedGamepadIndexP2]){const _0x8c11d8=_0x4420d7[connectedGamepadIndexP2],_0x263036=processSingleController(_0x8c11d8,previousGameButtonStatesP2);previousGameButtonStatesP2=_0x263036['newButtonStates'][_0x4930fb(0x1dc)]();if(_0x263036[_0x4930fb(0x302)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}}else connectedGamepadIndexP2===null&&previousGameButtonStatesP2[_0x4930fb(0x1d8)]>0x0&&(previousGameButtonStatesP2=[]);if(isPaused){renderGame();return;}const _0x4d474e=showCsBonusScoreMessage||showPerfectMessage;if(isCoopAIDemoActive&&_0x4d474e&&gameCanvas?.[_0x4930fb(0x227)]>0x0){const _0x42cda8=ship1&&player1Lives>0x0&&player2Lives<=0x0,_0x37c83a=ship2&&player2Lives>0x0&&player1Lives<=0x0;if(_0x42cda8){const _0x5644a2=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x2872e7=Math[_0x4930fb(0x297)](gameCanvas[_0x4930fb(0x227)]/0x2-_0x5644a2/0x2);ship1['x']=_0x2872e7,ship1[_0x4930fb(0x1cf)]=_0x2872e7,smoothedShip1X=_0x2872e7,ship2&&(ship2[_0x4930fb(0x1cf)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x37c83a){const _0x6ef135=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x4d0a11=Math['round'](gameCanvas[_0x4930fb(0x227)]/0x2-_0x6ef135/0x2);ship2['x']=_0x4d0a11,ship2[_0x4930fb(0x1cf)]=_0x4d0a11,smoothedShip2X=_0x4d0a11,ship1&&(ship1['targetX']=ship1['x'],smoothedShip1X=ship1['x']);}else{if(ship1&&player1Lives>0x0&&ship2&&player2Lives>0x0){const _0x49d0df=gameCanvas[_0x4930fb(0x227)]/0x2-gameCanvas[_0x4930fb(0x227)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1['x']=_0x49d0df,ship1[_0x4930fb(0x1cf)]=_0x49d0df,smoothedShip1X=_0x49d0df;const _0x39ef0a=gameCanvas['width']/0x2+gameCanvas[_0x4930fb(0x227)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2['x']=_0x39ef0a,ship2[_0x4930fb(0x1cf)]=_0x39ef0a,smoothedShip2X=_0x39ef0a;}}}}else{if(_0x4d474e&&gameCanvas?.['width']>0x0){if(isTwoPlayerMode&&selectedGameMode===_0x4930fb(0x285)){const _0x4083cc=ship1&&player1Lives>0x0,_0x51d32e=ship2&&player2Lives>0x0;if(_0x4083cc&&_0x51d32e){if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301)){const _0x31825e=gameCanvas[_0x4930fb(0x227)]/0x2-gameCanvas[_0x4930fb(0x227)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x390f6b=gameCanvas[_0x4930fb(0x227)]/0x2+gameCanvas[_0x4930fb(0x227)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['x']=_0x390f6b,ship2['targetX']=_0x390f6b,smoothedShip2X=_0x390f6b);}}else{if(_0x4083cc&&ship1){const _0x3992ab=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x5b2e3c=Math[_0x4930fb(0x297)](gameCanvas[_0x4930fb(0x227)]/0x2-_0x3992ab/0x2);ship1['x']=_0x5b2e3c,ship1[_0x4930fb(0x1cf)]=_0x5b2e3c,ship2&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&(ship2[_0x4930fb(0x1cf)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x51d32e&&ship2){const _0x401eec=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x5618b9=Math[_0x4930fb(0x297)](gameCanvas['width']/0x2-_0x401eec/0x2);ship2['x']=_0x5618b9,ship2[_0x4930fb(0x1cf)]=_0x5618b9;if(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301))smoothedShip2X=_0x5618b9;ship1&&isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301)&&(ship1[_0x4930fb(0x1cf)]=ship1['x']);}}}}else{if((!isManualControl||isPlayerTwoAI&&selectedGameMode===_0x4930fb(0x325)&&currentPlayer===0x2)&&ship){const _0x564322=isDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH;ship['x']=Math[_0x4930fb(0x297)](gameCanvas[_0x4930fb(0x227)]/0x2-_0x564322/0x2),ship[_0x4930fb(0x1cf)]=ship['x'];if(isPlayerTwoAI&&selectedGameMode==='normal'&&currentPlayer===0x2)smoothedShipX=ship['x'];else{if(!isManualControl)smoothedShipX=ship['x'];}}}}}let _0x2cdc41=![];if(selectedGameMode===_0x4930fb(0x285)&&level===0x1&&coopPlayersReadyStartTime>0x0){_0x2cdc41=!![];if(isShowingCoopPlayersReady){if(_0x4a08b2-coopPlayersReadyStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}if(_0x4a08b2>=coopPlayersReadyStartTime+0xbb8){isShowingCoopPlayersReady=![],explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301)?(isShowingIntro=!![],introStep=0x2,introDisplayStartTime=_0x4a08b2):(isShowingIntro=!![],introStep=0x1,introDisplayStartTime=_0x4a08b2);}}else{if(isShowingIntro){if(_0x4a08b2-introDisplayStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}let _0x3f8166=INTRO_DURATION_PER_STEP;introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&(_0x3f8166=TWO_PLAYER_STAGE_INTRO_DURATION);if(_0x4a08b2>=introDisplayStartTime+_0x3f8166){if(introStep===0x1&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301))){introStep=0x2,introDisplayStartTime=_0x4a08b2,explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}else{isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();_0x2cdc41=![],coopPlayersReadyStartTime=0x0;}}}else _0x2cdc41=![],coopPlayersReadyStartTime=0x0;}if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301))handlePlayerInput();if(typeof moveEntities==='function')moveEntities();renderGame();if(_0x2cdc41)return;}if(selectedGameMode===_0x4930fb(0x285)&&level===0x1&&!gameJustStartedAndWaveLaunched&&coopPlayersReadyStartTime===0x0&&gameJustStarted){if(isFullGridWave)startFullGridWave();else{if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x4930fb(0x1d8)]>0x0)scheduleEntranceFlightWave();else isWaveTransitioning=!![],readyForNextWaveReset=!![];}}gameJustStartedAndWaveLaunched=!![],gameJustStarted=![];}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode&&selectedGameMode===_0x4930fb(0x325)){if(_0x4a08b2-playerGameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}if(_0x4a08b2-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();const _0x4ced98=playerWhoIsGameOver;playerWhoIsGameOver=0x0;if(nextActionAfterPlayerGameOver===_0x4930fb(0x29b))switchPlayerTurn()?(_0x4ced98===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,player1MaxLevelReached=Math['max'](player1MaxLevelReached,level)),resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();else nextActionAfterPlayerGameOver===_0x4930fb(0x2bd)?triggerFinalGameOverSequence():triggerFinalGameOverSequence();renderGame();return;}else{renderGame();return;}}if(isTwoPlayerMode&&selectedGameMode===_0x4930fb(0x285)){let _0x17ea30=![],_0x285ea8=![];if(isPlayer1ShowingGameOverMessage){if(_0x4a08b2-player1GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}if(_0x4a08b2-player1GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer1ShowingGameOverMessage=![],_0x17ea30=!![],explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}}if(isPlayer2ShowingGameOverMessage){if(_0x4a08b2-player2GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(_0x4a08b2-player2GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer2ShowingGameOverMessage=![],_0x285ea8=!![],explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}}if(_0x17ea30||_0x285ea8){player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301))handlePlayerInput();if(typeof moveEntities===_0x4930fb(0x1d3))moveEntities();renderGame();if(gameOverSequenceStartTime>0x0||player1Lives>0x0||player2Lives>0x0)return;}else{if(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301))handlePlayerInput();if(typeof moveEntities===_0x4930fb(0x1d3))moveEntities();renderGame();return;}}}if(isShowingCaptureMessage){if(_0x4a08b2-captureMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}const _0x53571a=enemies[_0x4930fb(0x1ce)](_0x3c1958=>_0x3c1958['id']===capturedBossIdWithMessage);if(_0x53571a&&_0x53571a['state']===_0x4930fb(0x2b0)){const _0x5b9643=_0x4a08b2-captureMessageStartTime,_0x446d7c=Math[_0x4930fb(0x2f5)](0x1,_0x5b9643/CAPTURE_MESSAGE_DURATION);_0x53571a['captureAnimationRotation']=_0x446d7c*0x2*(0x2*Math['PI']);}else _0x53571a&&(_0x53571a[_0x4930fb(0x1e8)]=0x0);if(isInGameState&&!isShowingPlayerGameOverMessage&&!isPlayer1ShowingGameOverMessage&&!isPlayer2ShowingGameOverMessage&&gameOverSequenceStartTime===0x0){if(isManualControl||isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301))handlePlayerInput();if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else isPlayerTwoAI&&selectedGameMode===_0x4930fb(0x325)&&currentPlayer===0x2&&aiControl();if(typeof moveEntities===_0x4930fb(0x1d3))moveEntities();updateExplosions(),updateFloatingScores();}if(_0x4a08b2-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();stopSound(_0x4930fb(0x2d6)),captureBeamActive=![];if(_0x53571a&&_0x53571a[_0x4930fb(0x280)]==='showing_capture_message'){_0x53571a[_0x4930fb(0x280)]=_0x4930fb(0x2c5),_0x53571a['captureAnimationRotation']=0x0;try{const _0x58307b=_0x53571a['type']===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x4d141c,y:_0xcc7e9a}=getCurrentGridSlotPosition(_0x53571a['gridRow'],_0x53571a[_0x4930fb(0x277)],_0x58307b);_0x53571a['targetGridX']=_0x4d141c,_0x53571a[_0x4930fb(0x220)]=_0xcc7e9a;}catch(_0x5ca4ab){console['error'](_0x4930fb(0x2e8)+_0x53571a['id']+':',_0x5ca4ab),_0x53571a['targetGridX']=gameCanvas['width']/0x2,_0x53571a[_0x4930fb(0x220)]=ENEMY_TOP_MARGIN;}}else _0x53571a&&(_0x53571a[_0x4930fb(0x1e8)]=0x0);capturedBossIdWithMessage=null;const _0x5101ec=gameCanvas?gameCanvas[_0x4930fb(0x1fd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(isTwoPlayerMode&&selectedGameMode===_0x4930fb(0x285)){if(player1NeedsRespawnAfterCapture&&player1Lives>0x0){ship1={'x':player1CaptureRespawnX,'y':_0x5101ec,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player1CaptureRespawnX,'id':'p1'},isPlayer1ShipCaptured=![],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x4a08b2+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=![],player1NeedsRespawnAfterCapture=![],player1CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')smoothedShip1X=ship1['x'];}if(player2NeedsRespawnAfterCapture&&player2Lives>0x0){ship2={'x':player2CaptureRespawnX,'y':_0x5101ec,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player2CaptureRespawnX,'id':'p2'},isPlayer2ShipCaptured=![],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x4a08b2+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=![],player2NeedsRespawnAfterCapture=![],player2CaptureRespawnX=0x0;if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301))smoothedShip2X=ship2['x'];}if(player1Lives<=0x0&&player2Lives<=0x0){if(gameOverSequenceStartTime===0x0)triggerFinalGameOverSequence();}}else{if(!isManualControl&&!isPlayerTwoAI){if(isShipCaptured&&playerLives>0x0){let _0x36424d=gameCanvas?gameCanvas[_0x4930fb(0x227)]/0x2-SHIP_WIDTH/0x2:0xc8;if(typeof smoothedShipX===_0x4930fb(0x242))_0x36424d=smoothedShipX;ship={'x':_0x36424d,'y':_0x5101ec,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x36424d,'id':'main'},isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x4a08b2+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=![],aiNeedsStabilization=!![];if(smoothedShipX===undefined&&ship)smoothedShipX=ship['x'];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isManualControl){if(isShipCaptured&&playerLives>0x0){let _0x498529=capturedShipRespawnX_NormalMode!==0x0?capturedShipRespawnX_NormalMode:gameCanvas?gameCanvas[_0x4930fb(0x227)]/0x2-SHIP_WIDTH/0x2:0xc8;ship={'x':_0x498529,'y':_0x5101ec,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x498529,'id':_0x4930fb(0x2fa)},isShipCaptured=![],capturedShipRespawnX_NormalMode=0x0,isInvincible=!![],invincibilityEndTime=_0x4a08b2+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x4a08b2+RESPAWN_DELAY_MS;if(isPlayerTwoAI&&selectedGameMode===_0x4930fb(0x325)&&currentPlayer===0x2)aiNeedsStabilization=!![];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&((!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode==='normal'&&(currentPlayer===0x1&&player2Lives<=0x0||currentPlayer===0x2&&player1Lives<=0x0))&&triggerFinalGameOverSequence());}}}}renderGame();return;}const _0x27807=!(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage||isShowingPlayerGameOverMessage),_0x26e11c=isShowingIntro&&!_0x2cdc41&&!(selectedGameMode===_0x4930fb(0x285)&&level===0x1);if(!_0x2cdc41&&gameOverSequenceStartTime===0x0&&_0x4d6abb&&!isShowingCaptureMessage&&_0x27807){if(isInGameState&&!_0x26e11c){if(!(_0x4d474e&&!isManualControl)){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x4930fb(0x325)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}}isManualControl&&handlePlayerInput();}}isTwoPlayerMode&&selectedGameMode===_0x4930fb(0x285)?(isPlayer1Invincible&&_0x4a08b2>=player1InvincibilityEndTime&&(isPlayer1Invincible=![],player1InvincibilityEndTime=0x0),isPlayer2Invincible&&_0x4a08b2>=player2InvincibilityEndTime&&(isPlayer2Invincible=![],player2InvincibilityEndTime=0x0)):(isInvincible&&_0x4a08b2>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0),isWaitingForRespawn&&_0x4a08b2>=respawnTime&&(isWaitingForRespawn=![]));const _0x36e3b1=showExtraLifeMessage&&_0x4a08b2-extraLifeMessageStartTime<0x64;if(_0x36e3b1&&(isWaveTransitioning||isChallengingStage&&enemies[_0x4930fb(0x1d8)]===0x0)){}if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301))&&isChallengingStage&&enemies[_0x4930fb(0x1d8)]===0x0&&!isCsCompletionDelayActive&&!showCsBonusScoreMessage&&!showPerfectMessage&&gameCanvas&&gameCanvas[_0x4930fb(0x227)]>0x0){const _0x6b387f=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage,_0xc40a57=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage;if(_0x6b387f&&!_0xc40a57){const _0x9aefcb=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x3118c2=Math[_0x4930fb(0x297)](gameCanvas['width']/0x2-_0x9aefcb/0x2);ship1['x']=_0x3118c2,ship1[_0x4930fb(0x1cf)]=_0x3118c2,smoothedShip1X=_0x3118c2;}else{if(_0xc40a57&&!_0x6b387f){const _0x221712=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x3fea21=Math[_0x4930fb(0x297)](gameCanvas[_0x4930fb(0x227)]/0x2-_0x221712/0x2);ship2['x']=_0x3fea21,ship2['targetX']=_0x3fea21,smoothedShip2X=_0x3fea21;}}}if(isCsCompletionDelayActive&&_0x27807&&gameOverSequenceStartTime===0x0){if(_0x4a08b2-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY+EXPLOSION_DURATION){isCsCompletionDelayActive=![],csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies;csCompletionResultIsPerfect?(playSound('csPerfectSound',![],0.6),showCsHitsMessage=!![],csHitsMessageStartTime=_0x4a08b2):(playSound('csClearSound',![],0.6),showCSClearMessage=!![],csClearMessageStartTime=_0x4a08b2);bullets=[],enemyBullets=[],renderGame();return;}else{if(_0x4a08b2-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY&&explosions[_0x4930fb(0x1d8)]>0x0){updateExplosions(),renderGame();return;}else{if(_0x4a08b2-csCompletionDelayStartTime<CS_COMPLETION_MESSAGE_DELAY){renderGame();return;}}}}let _0x568107=![],_0x318e18=![];if(_0x27807&&gameOverSequenceStartTime===0x0&&!isShowingCoopPlayersReady&&!_0x2cdc41){if(showCsHitsMessage){if(_0x4a08b2-csHitsMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}if(Date[_0x4930fb(0x2fb)]()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION){showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x4a08b2,explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}_0x318e18=!![];}else{if(showPerfectMessage){if(_0x4a08b2-perfectMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}if(Date['now']()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION){showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x4a08b2,explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}_0x318e18=!![];}else{if(showCsBonusScoreMessage){if(_0x4a08b2-csBonusScoreMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(Date[_0x4930fb(0x2fb)]()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION){showCsBonusScoreMessage=![],_0x568107=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}_0x318e18=!![];}else{if(showCSClearMessage){if(_0x4a08b2-csClearMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}Date[_0x4930fb(0x2fb)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]);Date[_0x4930fb(0x2fb)]()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]);if(Date[_0x4930fb(0x2fb)]()-csClearMessageStartTime>=CS_CLEAR_DELAY){showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x568107=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}_0x318e18=!![];}else{if(showExtraLifeMessage)Date[_0x4930fb(0x2fb)]()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![]),_0x318e18=!![];else{if(showReadyMessage){if(_0x4a08b2-readyMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}if(Date['now']()-readyMessageStartTime>READY_MESSAGE_DURATION){showReadyMessage=![],_0x568107=!![],explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}_0x318e18=!![];}}}}}}}if(_0x318e18&&!_0x568107&&!isShowingCoopPlayersReady&&!_0x2cdc41&&!isShowingCaptureMessage&&_0x27807){if(!((_0x4d474e||showCsHitsMessage||showCSClearMessage)&&isManualControl)&&!showExtraLifeMessage){renderGame();return;}}if(_0x26e11c&&_0x27807&&gameOverSequenceStartTime===0x0){let _0x7e614c=![];const _0x5e9c35=_0x4a08b2-introDisplayStartTime;let _0x47f892=INTRO_DURATION_PER_STEP;const _0x1239d7=isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL',_0x5a0bce=isTwoPlayerMode&&selectedGameMode===_0x4930fb(0x325)&&!isPlayerTwoAI;(_0x5a0bce||_0x1239d7)&&(_0x47f892=TWO_PLAYER_STAGE_INTRO_DURATION);if(introStep===0x1){if(_0x5e9c35<0x64){explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}let _0x1a16a7=null,_0x2c5036=0x1;if(!playerIntroSoundPlayed){const _0x12e4c=_0x1239d7||_0x5a0bce,_0x2d5787=isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP'&&level>0x1;if(_0x12e4c){if(currentPlayer===0x1&&level===0x1&&!initialGameStartSoundPlayedThisSession)_0x1a16a7='startSound',_0x2c5036=0.4;else(currentPlayer===0x2||level>0x1)&&(_0x1a16a7=_0x4930fb(0x235),_0x2c5036=0.2);}else{if(_0x2d5787)_0x1a16a7=_0x4930fb(0x235),_0x2c5036=0.2;else{if(!isTwoPlayerMode){if(level===0x1&&!initialGameStartSoundPlayedThisSession)_0x1a16a7=_0x4930fb(0x1d2),_0x2c5036=0.4;else level>0x1&&(_0x1a16a7='levelUpSound',_0x2c5036=0.2);}}}}_0x1a16a7&&(playSound(_0x1a16a7,![],_0x2c5036),playerIntroSoundPlayed=!![],_0x1a16a7===_0x4930fb(0x1d2)&&(initialGameStartSoundPlayedThisSession=!![]));if(_0x5e9c35>=_0x47f892){if(isChallengingStage)introStep=0x3;else introStep=0x2;introDisplayStartTime=_0x4a08b2,explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}}else{if(introStep===0x2){if(_0x5e9c35<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}if(!stageIntroSoundPlayed){if(playLevelUpAfterCSBonus&&(isTwoPlayerMode&&selectedGameMode===_0x4930fb(0x285)))playSound('levelUpSound',![],0.2),playLevelUpAfterCSBonus=![],stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x4930fb(0x285)&&!isPlayerTwoAI&&!isCoopAIDemoActive&&level===0x1)playSound(_0x4930fb(0x235),![],0.2),stageIntroSoundPlayed=!![];else{if(isTwoPlayerMode&&selectedGameMode===_0x4930fb(0x285)&&!isPlayerTwoAI&&!isCoopAIDemoActive&&level>0x1)playSound(_0x4930fb(0x235),![],0.2),stageIntroSoundPlayed=!![];else{if(selectedGameMode===_0x4930fb(0x285)){if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301))&&level>0x1)playSound(_0x4930fb(0x235),![],0.2),stageIntroSoundPlayed=!![];else(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301))&&level===0x1&&(stageIntroSoundPlayed=!![]);}else{if(!isTwoPlayerMode&&level>0x1)playSound('levelUpSound',![],0.2),stageIntroSoundPlayed=!![];else{if(level>0x1&&!playerIntroSoundPlayed&&!(isPlayerTwoAI&&selectedGameMode===_0x4930fb(0x325))&&!initialGameStartSoundPlayedThisSession)playSound(_0x4930fb(0x235),![],0.2),stageIntroSoundPlayed=!![];else level===0x1&&!isManualControl&&!isCoopAIDemoActive&&!(isPlayerTwoAI&&selectedGameMode===_0x4930fb(0x285))&&!initialGameStartSoundPlayedThisSession&&(playSound('startSound',![],0.4),initialGameStartSoundPlayedThisSession=!![],stageIntroSoundPlayed=!![]);}}}}}}if(_0x5e9c35>=_0x47f892){_0x7e614c=!![],explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}}else{if(introStep===0x3){if(_0x5e9c35<0x64){explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}!csIntroSoundPlayed&&(playSound(_0x4930fb(0x2e1),![],0.4),csIntroSoundPlayed=!![],stageIntroSoundPlayed=!![]);if(_0x5e9c35>=_0x47f892){_0x7e614c=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}}}if(isInGameState&&_0x27807&&gameOverSequenceStartTime===0x0&&gameCanvas){let _0xe76f2=null,_0x9d2e11=null;const _0x516d76=isManualControl&&isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_NORMAL'&&currentPlayer===0x1&&isShowingIntro;if(_0x516d76){let _0x3d8890=![],_0x3d2ea1=![];const _0x53e528=navigator[_0x4930fb(0x207)]();if(connectedGamepadIndex!==null&&_0x53e528?.[connectedGamepadIndex]){const _0x4bc0db=_0x53e528[connectedGamepadIndex],_0x53ee83=processSingleController(_0x4bc0db,previousGameButtonStates);_0x3d8890=_0x53ee83['left'],_0x3d2ea1=_0x53ee83[_0x4930fb(0x31c)];}_0xe76f2=keyboardP1LeftDown||_0x3d8890,_0x9d2e11=keyboardP1RightDown||_0x3d2ea1;}if(_0x1239d7&&currentPlayer===0x2)aiControl();else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301))aiControlCoop();else!isManualControl&&!isPlayerTwoAI&&aiControl();}typeof moveEntities===_0x4930fb(0x1d3)&&moveEntities(_0xe76f2,_0x9d2e11),updateExplosions(),updateFloatingScores();}if(_0x7e614c){isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![];isManualControl&&(isShowingDemoText=![]);if(!isChallengingStage)isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301)?(aiShip1CanShootTime=Date[_0x4930fb(0x2fb)]()+0x3e8,aiShip2CanShootTime=Date[_0x4930fb(0x2fb)]()+0x4b0):aiCanShootTime=Date[_0x4930fb(0x2fb)]()+(isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x2a9)?0x3e8:0x3e8);else{if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301))aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0;else aiCanShootTime=0x0;}const _0x42532a=level===0x1&&selectedGameMode!==_0x4930fb(0x285),_0x10ffda=level===0x1&&selectedGameMode==='coop',_0x3bac74=_0x42532a&&!gameJustStartedAndWaveLaunched||level>0x1||isChallengingStage||_0x10ffda&&!gameJustStartedAndWaveLaunched;if(_0x3bac74){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x4930fb(0x1d8)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0x4930fb(0x2e1),![],0.4);}else isEntrancePhaseActive=![],stopSound(_0x4930fb(0x2e1)),isWaveTransitioning=!![],readyForNextWaveReset=!![],bullets=[],enemyBullets=[],explosions=[],setTimeout(()=>{const _0x3c5ec3=_0x4930fb,_0x42ad7a=isTwoPlayerMode&&selectedGameMode===_0x3c5ec3(0x285)?player1Lives>0x0||player2Lives>0x0:playerLives>0x0;if((isInGameState||!isInGameState&&_0x42ad7a)&&typeof resetWaveInternal===_0x3c5ec3(0x1d3)){if(_0x42ad7a)resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![];else triggerFinalGameOverSequence();}},0x64);}if(_0x42532a||level>0x1||isChallengingStage||_0x10ffda)gameJustStartedAndWaveLaunched=!![];}}isManualControl&&_0x26e11c&&_0x27807&&gameOverSequenceStartTime===0x0&&handlePlayerInput();renderGame();return;}const _0x5e29ec=!_0x2cdc41&&!_0x26e11c&&!_0x568107&&!isShowingCaptureMessage;if(gameJustStarted&&_0x5e29ec){if(!gameJustStartedAndWaveLaunched){const _0x3bead1=selectedGameMode===_0x4930fb(0x285)&&level===0x1&&coopPlayersReadyStartTime!==0x0;if(!_0x3bead1){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x4930fb(0x1d8)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(_0x4930fb(0x2e1),![],0.4);}else isWaveTransitioning=!![],readyForNextWaveReset=!![];}gameJustStartedAndWaveLaunched=!![];}}gameJustStarted=![];}if(_0x5e29ec&&isInGameState&&_0x27807&&gameOverSequenceStartTime===0x0){if(!_0x4d474e||_0x4d474e&&isManualControl){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301))aiControlCoop();else{if(isPlayerTwoAI&&selectedGameMode===_0x4930fb(0x325)&&currentPlayer===0x2)aiControl();else!isManualControl&&!isPlayerTwoAI&&aiControl();}isManualControl&&handlePlayerInput();if(typeof moveEntities===_0x4930fb(0x1d3))moveEntities();updateExplosions(),updateFloatingScores();}else _0x4d474e&&(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301))&&(updateExplosions(),updateFloatingScores());}if(_0x5e29ec&&_0x27807&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&_0x4d6abb){const _0x4318c0=enemies[_0x4930fb(0x2be)](_0x4c1b54=>_0x4c1b54?.[_0x4930fb(0x280)]===_0x4930fb(0x2e0));if(_0x4318c0&&isGridBreathingActive){const _0x3b2e9a=_0x4a08b2-gridBreathStartTime,_0x224fe2=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x1659ba=_0x3b2e9a%_0x224fe2;currentGridBreathFactor=(Math['sin'](_0x1659ba/_0x224fe2*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x4318c0&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x4318c0&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x4a08b2,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x277bbf=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x6e0ca8=enemies[_0x4930fb(0x2be)](_0x3ba7cd=>_0x3ba7cd?.[_0x4930fb(0x280)]===_0x4930fb(0x223)||_0x3ba7cd?.[_0x4930fb(0x280)]==='moving_to_grid'||_0x3ba7cd?.[_0x4930fb(0x280)]===_0x4930fb(0x206));if(totalEnemiesScheduledForWave>0x0&&_0x277bbf&&!_0x6e0ca8){const _0x290669=isEntrancePhaseActive;isEntrancePhaseActive=![];if(_0x290669){stopSound(_0x4930fb(0x2e1)),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts[_0x4930fb(0x324)](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![];if(!isChallengingStage&&!isFullGridWave){if(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=Date[_0x4930fb(0x2fb)]()+COOP_AI_CAPTURE_DIVE_ANTICIPATION_DURATION_MS,typeof triggerImmediateCaptureDive===_0x4930fb(0x1d3)&&triggerImmediateCaptureDive();else typeof triggerImmediateCaptureDive===_0x4930fb(0x1d3)&&triggerImmediateCaptureDive();}}}}if(!isChallengingStage&&!_0x26e11c&&!isPaused&&!isWaveTransitioning)triggerGridFiring();if(!isWaveTransitioning&&_0x4d6abb&&!_0x26e11c&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x37c079=enemies[_0x4930fb(0x1d8)]===0x0,_0x59219d=fallingShips['length']===0x0,_0x3e74f9=![];if(isChallengingStage){if(_0x37c079&&!isEntrancePhaseActive)_0x3e74f9=!![];}else{if(_0x37c079&&!isEntrancePhaseActive&&_0x59219d)_0x3e74f9=!![];}if(_0x3e74f9){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if((isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant==='1P_VS_AI_COOP')&&gameCanvas&&gameCanvas[_0x4930fb(0x227)]>0x0){const _0x56a072=player1Lives,_0x483254=player2Lives,_0x6be51b=gameCanvas[_0x4930fb(0x1fd)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(_0x56a072>0x0&&_0x483254<=0x0&&ship1){const _0x15bb0b=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x3b825e=Math[_0x4930fb(0x297)](gameCanvas[_0x4930fb(0x227)]/0x2-_0x15bb0b/0x2);ship1['x']=_0x3b825e,ship1[_0x4930fb(0x1cf)]=_0x3b825e,smoothedShip1X=_0x3b825e,ship1['y']=_0x6be51b;}else{if(_0x483254>0x0&&_0x56a072<=0x0&&ship2){const _0x407a41=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x4d01e4=Math['round'](gameCanvas['width']/0x2-_0x407a41/0x2);ship2['x']=_0x4d01e4,ship2[_0x4930fb(0x1cf)]=_0x4d01e4,smoothedShip2X=_0x4d01e4,ship2['y']=_0x6be51b;}}}isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(_0x4930fb(0x2b6)),isGridSoundPlaying=![]);!isChallengingStage&&(bullets=[],enemyBullets=[]);floatingScores=[],enemySpawnTimeouts[_0x4930fb(0x324)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;let _0x5ed11d;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,setTimeout(()=>{const _0x4a8483=_0x4930fb;if(isWaveTransitioning){explosions=[];if(typeof updateExplosions===_0x4a8483(0x1d3))updateExplosions();isCsCompletionDelayActive=!![],csCompletionDelayStartTime=Date['now']();}},EXPLOSION_DURATION);if(csCompletionResultIsPerfect){let _0x458184=0x2710;if(isTwoPlayerMode&&selectedGameMode===_0x4930fb(0x285)){if(player1Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301))&&ship1){player1Score+=_0x458184;if(player1Score>highScore)highScore=player1Score,highScoreHolderId='player1',!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2));else player1Score===highScore&&highScoreHolderId!==_0x4930fb(0x26b)&&highScore>0x0&&(highScoreHolderId=_0x4930fb(0x26b),!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2)));}if(player2Lives>0x0||(isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301))&&ship2){player2Score+=_0x458184;const _0x1acd6a=isCoopAIDemoActive||isPlayerTwoAI&&selectedOnePlayerGameVariant===_0x4930fb(0x301)?isCoopAIDemoActive?_0x4930fb(0x2c8):_0x4930fb(0x2c9):'player2';if(player2Score>highScore)highScore=player2Score,highScoreHolderId=_0x1acd6a,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(_0x4930fb(0x2c6),![],0.2));else player2Score===highScore&&highScoreHolderId!==_0x1acd6a&&highScore>0x0&&(highScoreHolderId=_0x1acd6a,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound('hiScoreSound',![],0.2)));}checkAndAwardExtraLife(null);}else{score+=_0x458184;if(!isTwoPlayerMode)player1Score=score;else{if(isTwoPlayerMode&&selectedGameMode===_0x4930fb(0x325)){if(currentPlayer===0x1)player1Score=score;else player2Score=score;}}let _0x569bb9=!isTwoPlayerMode?_0x4930fb(0x26b):currentPlayer===0x1?_0x4930fb(0x26b):isPlayerTwoAI?_0x4930fb(0x2c9):_0x4930fb(0x2c8),_0x319e6f=!isTwoPlayerMode?player1TriggeredHighScoreSound:currentPlayer===0x1?player1TriggeredHighScoreSound:player2TriggeredHighScoreSound,_0x26ec96=!isTwoPlayerMode?()=>player1TriggeredHighScoreSound=!![]:currentPlayer===0x1?()=>player1TriggeredHighScoreSound=!![]:()=>player2TriggeredHighScoreSound=!![];if(score>highScore)highScore=score,highScoreHolderId=_0x569bb9,!_0x319e6f&&(_0x26ec96(),playSound(_0x4930fb(0x2c6),![],0.2));else score===highScore&&highScoreHolderId!==_0x569bb9&&highScore>0x0&&(highScoreHolderId=_0x569bb9,!_0x319e6f&&(_0x26ec96(),playSound(_0x4930fb(0x2c6),![],0.2)));checkAndAwardExtraLife(currentPlayer);}_0x5ed11d=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else isTwoPlayerMode&&selectedGameMode==='coop'?checkAndAwardExtraLife(null):checkAndAwardExtraLife(currentPlayer),_0x5ed11d=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x5ed11d+=0x64;}else playSound(_0x4930fb(0x25f),![],0.8),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastHitPosition=null,_0x5ed11d=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x3c7b73=_0x4930fb;let _0x496c75=![],_0x48c6de=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x3c7b73(0x325)){_0x48c6de=currentPlayer;_0x48c6de===0x1?player1MaxLevelReached=Math['max'](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x3c7b73(0x2c4)](player2MaxLevelReached,level);const _0x438726=switchPlayerTurn();if(_0x438726){if(_0x48c6de===0x2&&currentPlayer===0x1&&player1CompletedLevel===level)_0x496c75=!![],player1CompletedLevel=-0x1;else _0x48c6de===0x1?(player1CompletedLevel=level,_0x496c75=![]):_0x496c75=![];}else _0x496c75=!![],player1CompletedLevel=-0x1;}else{_0x496c75=!![];if(!isTwoPlayerMode)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);else{if(isTwoPlayerMode&&selectedGameMode===_0x3c7b73(0x285)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x3c7b73(0x2c4)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math['max'](player2MaxLevelReached,level);}}}if(_0x496c75){level++;if(isTwoPlayerMode&&selectedGameMode===_0x3c7b73(0x285)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x3c7b73(0x2c4)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math[_0x3c7b73(0x2c4)](player2MaxLevelReached,level);}else{if(isTwoPlayerMode&&selectedGameMode===_0x3c7b73(0x325)){if(currentPlayer===0x1&&player1Lives>0x0)player1MaxLevelReached=Math[_0x3c7b73(0x2c4)](player1MaxLevelReached,level);else{if(currentPlayer===0x2&&player2Lives>0x0)player2MaxLevelReached=Math[_0x3c7b73(0x2c4)](player2MaxLevelReached,level);}}else{if(playerLives>0x0)player1MaxLevelReached=Math[_0x3c7b73(0x2c4)](player1MaxLevelReached,level);}}}let _0x1267e7=![];if(isTwoPlayerMode&&selectedGameMode===_0x3c7b73(0x285))_0x1267e7=player1Lives>0x0||player2Lives>0x0;else{if(isTwoPlayerMode&&selectedGameMode===_0x3c7b73(0x325))_0x1267e7=(currentPlayer===0x1?player1Lives:player2Lives)>0x0;else _0x1267e7=playerLives>0x0;}_0x1267e7?(resetWaveInternal(),gameJustStartedAndWaveLaunched=![],gameJustStarted=!![]):triggerFinalGameOverSequence();},_0x5ed11d),renderGame();return;}if(!isChallengingStage){if(enemies[_0x4930fb(0x1d8)]>0x0){let _0xe61eb5=null;const _0x20399b=enemies[_0x4930fb(0x2db)](_0x259b77=>_0x259b77?.['state']==='in_grid'),_0x297c3c=_0x20399b[_0x4930fb(0x1d8)]<=0x3,_0x138498=Math[_0x4930fb(0x2c4)](0x1,Math[_0x4930fb(0x2f5)](level,LEVEL_CAP_FOR_SCALING)),_0xb454a3=0x1068,_0xc10a5c=0x320,_0x211fb5=(_0x138498-0x1)*((_0xb454a3-_0xc10a5c)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x131d89=Math[_0x4930fb(0x2c4)](_0xc10a5c,_0xb454a3-_0x211fb5),_0x3ffeb6=Math[_0x4930fb(0x297)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x5b083e=enemies[_0x4930fb(0x2db)](_0x5bf49f=>_0x5bf49f?.['state']==='attacking'||_0x5bf49f?.['state']===_0x4930fb(0x303))[_0x4930fb(0x1d8)];if(_0x297c3c||_0x4a08b2-lastEnemyDetachTime>_0x131d89&&_0x20399b['length']>0x0&&_0x5b083e<_0x3ffeb6){_0xe61eb5=findAndDetachEnemy();if(_0xe61eb5&&_0xe61eb5[_0x4930fb(0x1d8)]>0x0){const _0x4db31f=_0xe61eb5[_0x4930fb(0x1f5)](_0x8942c=>enemies[_0x4930fb(0x1ce)](_0x5b2b70=>_0x5b2b70?.['id']===_0x8942c['id']))[_0x4930fb(0x2db)](_0x28d904=>_0x28d904&&_0x28d904[_0x4930fb(0x280)]===_0x4930fb(0x2e0));if(_0x4db31f[_0x4930fb(0x1d8)]>0x0){const _0x3bcc8f=_0x4db31f[0x0],_0x1a8f02=_0x3bcc8f[_0x4930fb(0x1ec)];if(!_0x297c3c)lastEnemyDetachTime=_0x4a08b2;if(_0x1a8f02===_0x4930fb(0x325)){const _0xc702c5=generateAttackPathInternal(_0x3bcc8f);if(_0xc702c5&&_0xc702c5['length']>0x0){if(_0x4db31f['length']===0x3&&_0x3bcc8f[_0x4930fb(0x306)]===ENEMY3_TYPE&&level!==0x1)playSound('tripleAttackSound',![],0.3);let _0x58d11d=[..._0x4db31f];const _0x561c50=_0x58d11d[_0x4930fb(0x1d8)];if(_0x561c50>0x1){let _0x3cdfd3=null,_0x111e36=[];_0x58d11d[_0x4930fb(0x324)](_0x444451=>{const _0xeb90d1=_0x4930fb;if(_0x444451['type']===ENEMY3_TYPE)_0x3cdfd3=_0x444451;else _0x111e36[_0xeb90d1(0x22b)](_0x444451);});if(_0x3cdfd3&&level!==0x1&&_0x561c50===0x3&&_0x111e36[_0x4930fb(0x1d8)]===0x2)_0x58d11d=[_0x111e36[0x0],_0x3cdfd3,_0x111e36[0x1]];else _0x58d11d[_0x4930fb(0x1f0)]((_0x419061,_0x1c8607)=>(_0x419061?.['gridCol']??0x0)-(_0x1c8607?.['gridCol']??0x0));const _0x35def4=0x5;let _0x535633=0x0;_0x58d11d=_0x58d11d['filter'](_0x4fc113=>_0x4fc113&&typeof _0x4fc113['width']==='number');const _0x47ce55=_0x58d11d[_0x4930fb(0x1d8)];for(let _0x3d2a2a=0x0;_0x3d2a2a<_0x47ce55;_0x3d2a2a++){_0x535633+=_0x58d11d[_0x3d2a2a][_0x4930fb(0x227)];if(_0x3d2a2a<_0x47ce55-0x1)_0x535633+=_0x35def4;}const _0x778a54=-_0x535633/0x2;let _0x53b068=_0x778a54;for(let _0x77325d=0x0;_0x77325d<_0x47ce55;_0x77325d++){const _0x23bd87=_0x58d11d[_0x77325d];_0x23bd87['attackFormationOffsetX']=_0x53b068+_0x23bd87['width']/0x2,_0x53b068+=_0x23bd87[_0x4930fb(0x227)]+_0x35def4;}}else _0x58d11d[_0x4930fb(0x324)](_0x3fd897=>_0x3fd897['attackFormationOffsetX']=0x0);const _0x117e45=_0x4930fb(0x2b3)+_0x3bcc8f['id']+'-'+_0x4a08b2;_0x58d11d[_0x4930fb(0x324)](_0x12225b=>{const _0x53f031=_0x4930fb;if(_0x12225b)_0x12225b[_0x53f031(0x260)]=_0x117e45;});let _0x306b96=![],_0x54cf5a=GROUP_FIRE_BURST_DELAY;if(_0x3bcc8f[_0x4930fb(0x306)]===ENEMY2_TYPE||_0x3bcc8f[_0x4930fb(0x306)]===ENEMY3_TYPE){_0x306b96=!![];if(_0x3bcc8f[_0x4930fb(0x306)]===ENEMY2_TYPE&&_0x561c50===0x1)_0x54cf5a=SOLO_BUTTERFLY_FIRE_DELAY;}else{if(_0x3bcc8f[_0x4930fb(0x306)]===ENEMY1_TYPE)_0x306b96=!![];}if(_0x297c3c&&level>0x1)_0x306b96=![];_0x306b96&&_0x58d11d[_0x4930fb(0x324)](_0xd5fd69=>{const _0x3869dd=_0x4930fb,_0x5ec947=_0xd5fd69&&!(_0xd5fd69[_0x3869dd(0x306)]===ENEMY3_TYPE&&_0xd5fd69['hasCapturedShip']);if(_0x5ec947)fireEnemyBurst(_0xd5fd69['id'],_0x3869dd(0x2b8),_0x54cf5a);}),_0x58d11d[_0x4930fb(0x324)]((_0xd63d48,_0x460988)=>{const _0x597568=_0x4930fb;_0xd63d48&&_0xd63d48[_0x597568(0x280)]===_0x597568(0x2e0)&&(_0xd63d48['state']=_0x597568(0x303),_0xd63d48[_0x597568(0x27e)]=![],_0xd63d48[_0x597568(0x295)]=0x0,_0xd63d48[_0x597568(0x251)]=0x0,_0xd63d48[_0x597568(0x1f6)]=![],setTimeout(()=>{const _0x30ed1f=_0x597568;if(isPaused)return;const _0x3c414a=enemies[_0x30ed1f(0x1ce)](_0x4357ec=>_0x4357ec?.['id']===_0xd63d48['id']);if(_0x3c414a&&_0x3c414a['state']===_0x30ed1f(0x303))try{const _0x38f6e6=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x30d542=0x1;if(_0x3c414a[_0x30ed1f(0x306)]===ENEMY1_TYPE)_0x30d542=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x3c414a[_0x30ed1f(0x306)]===ENEMY2_TYPE)_0x30d542=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x3c414a['type']===ENEMY3_TYPE)_0x30d542=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0xd63d48['type']===ENEMY3_TYPE)playSound(_0x30ed1f(0x205),![],0.2);else playSound(_0x30ed1f(0x244),![],0.2);_0x3c414a[_0x30ed1f(0x280)]=_0x30ed1f(0x2b8),_0x3c414a['attackPathSegments']=_0xc702c5,_0x3c414a[_0x30ed1f(0x263)]=0x0,_0x3c414a[_0x30ed1f(0x23f)]=0x0,_0x3c414a['speed']=_0x38f6e6*_0x30d542,_0x3c414a[_0x30ed1f(0x2d9)]=0x0,_0x3c414a[_0x30ed1f(0x1f6)]=!![];}catch(_0x29c5cc){console[_0x30ed1f(0x208)](_0x30ed1f(0x319)+_0xd63d48['id']+':',_0x29c5cc);}},_0x460988*GROUP_DETACH_DELAY_MS));});}else _0xe61eb5[_0x4930fb(0x324)](_0x225775=>{const _0x17a3a4=_0x4930fb;if(_0x225775)_0x225775[_0x17a3a4(0x27e)]=![];});}}}}}}enemies[_0x4930fb(0x324)](_0x26c2fb=>{const _0x521c0a=_0x4930fb;if(_0x26c2fb&&_0x26c2fb['type']===ENEMY3_TYPE&&_0x26c2fb[_0x521c0a(0x1f7)]&&_0x26c2fb[_0x521c0a(0x280)]===_0x521c0a(0x2b8)&&_0x26c2fb[_0x521c0a(0x239)]&&typeof _0x26c2fb[_0x521c0a(0x246)]===_0x521c0a(0x242)){if(_0x4a08b2-_0x26c2fb[_0x521c0a(0x246)]>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x23c20c=_0x26c2fb['x']+_0x26c2fb['width']/0x2,_0x215d7d=_0x26c2fb['y']+_0x26c2fb[_0x521c0a(0x1fd)]+_0x26c2fb[_0x521c0a(0x239)][_0x521c0a(0x1fd)]*0.5,_0x4e97d8={'x':_0x23c20c,'y':_0x215d7d};createBulletSimple(_0x26c2fb,_0x4e97d8)&&(_0x26c2fb[_0x521c0a(0x246)]=_0x4a08b2,playSound(_0x521c0a(0x27f),![],0.4));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x5602b9=_0x4a08b2-gameOverSequenceStartTime,_0x3f82ea=_0x5602b9>=GAME_OVER_DURATION;if(_0x3f82ea&&!isShowingResultsScreen){isShowingResultsScreen=!![],stopSound(_0x4930fb(0x282)),playSound(_0x4930fb(0x2f4),!![],0.2),explosions=[];if(typeof updateExplosions===_0x4930fb(0x1d3))updateExplosions();}}}!_0x2cdc41&&renderGame();}catch(_0x49711b){console[_0x4930fb(0x208)]('!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!',_0x49711b,_0x49711b[_0x4930fb(0x2a0)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert('A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.'),stopAllGameSoundsInternal(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState===_0x4930fb(0x1d3)&&showMenuState();}catch(_0x351595){console[_0x4930fb(0x208)](_0x4930fb(0x2d8),_0x351595);}}}function checkAndAwardExtraLife(_0x28d677=null){const _0x307980=_0x109c4f;try{const _0x57efe8=[];if(_0x28d677===0x1){const _0x15257a=isTwoPlayerMode&&selectedGameMode===_0x307980(0x285)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x307980(0x325)&&currentPlayer===0x1?playerLives:player1Lives,_0x44f5cf=isTwoPlayerMode&&selectedGameMode==='coop'?player1Score:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x1?score:player1Score;_0x57efe8['push']({'num':0x1,'currentLives':_0x15257a,'currentScore':_0x44f5cf,'thresholdsMet':player1LifeThresholdsMet});}else{if(_0x28d677===0x2&&isTwoPlayerMode){const _0x3ee2b5=selectedGameMode===_0x307980(0x285)?player2Lives:selectedGameMode===_0x307980(0x325)&&currentPlayer===0x2?playerLives:player2Lives,_0x5ce284=selectedGameMode===_0x307980(0x285)?player2Score:selectedGameMode===_0x307980(0x325)&&currentPlayer===0x2?score:player2Score;_0x57efe8['push']({'num':0x2,'currentLives':_0x3ee2b5,'currentScore':_0x5ce284,'thresholdsMet':player2LifeThresholdsMet});}else{if(isTwoPlayerMode&&selectedGameMode===_0x307980(0x285)&&_0x28d677===null)_0x57efe8['push']({'num':0x1,'currentLives':player1Lives,'currentScore':player1Score,'thresholdsMet':player1LifeThresholdsMet}),_0x57efe8[_0x307980(0x22b)]({'num':0x2,'currentLives':player2Lives,'currentScore':player2Score,'thresholdsMet':player2LifeThresholdsMet});else{if(!isTwoPlayerMode&&(_0x28d677===null||_0x28d677===0x1))_0x57efe8[_0x307980(0x22b)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet});else isTwoPlayerMode&&selectedGameMode==='normal'&&_0x28d677===currentPlayer&&(currentPlayer===0x1?_0x57efe8['push']({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet}):_0x57efe8[_0x307980(0x22b)]({'num':0x2,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player2LifeThresholdsMet}));}}}_0x57efe8['forEach'](_0x35bdda=>{const _0x41ce75=_0x307980;let _0x260f34=![];while(!![]){let _0x15cd16=![],_0x418193=-0x1;const _0x2f8435=_0x35bdda['thresholdsMet'][_0x41ce75(0x300)];if(_0x2f8435===0x0)_0x418193=EXTRA_LIFE_THRESHOLD_1;else{if(_0x2f8435===0x1&&!_0x35bdda[_0x41ce75(0x212)]['has'](EXTRA_LIFE_THRESHOLD_2))_0x418193=EXTRA_LIFE_THRESHOLD_2;else{if(_0x2f8435>=0x1&&_0x35bdda[_0x41ce75(0x212)][_0x41ce75(0x2e3)](EXTRA_LIFE_THRESHOLD_1)&&_0x35bdda[_0x41ce75(0x212)]['has'](EXTRA_LIFE_THRESHOLD_2)){let _0x42e10c=0x0;_0x35bdda[_0x41ce75(0x212)][_0x41ce75(0x324)](_0x43f1d2=>{_0x43f1d2>=EXTRA_LIFE_THRESHOLD_2&&(_0x43f1d2-EXTRA_LIFE_THRESHOLD_2)%RECURRING_EXTRA_LIFE_INTERVAL===0x0&&_0x42e10c++;}),_0x418193=EXTRA_LIFE_THRESHOLD_2+_0x42e10c*RECURRING_EXTRA_LIFE_INTERVAL;}else{if(_0x2f8435===0x1&&_0x35bdda[_0x41ce75(0x212)][_0x41ce75(0x2e3)](EXTRA_LIFE_THRESHOLD_1)&&!_0x35bdda[_0x41ce75(0x212)][_0x41ce75(0x2e3)](EXTRA_LIFE_THRESHOLD_2))_0x418193=EXTRA_LIFE_THRESHOLD_2;else _0x2f8435===0x1&&_0x35bdda[_0x41ce75(0x212)][_0x41ce75(0x2e3)](EXTRA_LIFE_THRESHOLD_2)&&!_0x35bdda[_0x41ce75(0x212)][_0x41ce75(0x2e3)](EXTRA_LIFE_THRESHOLD_1)&&(_0x418193=EXTRA_LIFE_THRESHOLD_1);}}}if(_0x418193!==-0x1&&_0x35bdda[_0x41ce75(0x1e9)]>=_0x418193&&!_0x35bdda[_0x41ce75(0x212)][_0x41ce75(0x2e3)](_0x418193)){if(_0x35bdda['num']===0x1){if(isTwoPlayerMode&&selectedGameMode===_0x41ce75(0x285))player1Lives++;else{if(isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x1)playerLives++;else{if(!isTwoPlayerMode)playerLives++;}}player1Lives=isTwoPlayerMode&&selectedGameMode===_0x41ce75(0x285)?player1Lives:isTwoPlayerMode&&selectedGameMode===_0x41ce75(0x325)&&currentPlayer===0x1?playerLives:player1Lives,_0x35bdda[_0x41ce75(0x2f1)]=player1Lives;}else{if(_0x35bdda[_0x41ce75(0x23c)]===0x2){if(isTwoPlayerMode&&selectedGameMode==='coop')player2Lives++;else{if(isTwoPlayerMode&&selectedGameMode===_0x41ce75(0x325)&&currentPlayer===0x2)playerLives++;}player2Lives=isTwoPlayerMode&&selectedGameMode===_0x41ce75(0x285)?player2Lives:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x2?playerLives:player2Lives,_0x35bdda[_0x41ce75(0x2f1)]=player2Lives;}}_0x35bdda['thresholdsMet'][_0x41ce75(0x315)](_0x418193),_0x260f34=!![],_0x15cd16=!![];}if(!_0x15cd16)break;}_0x260f34&&!showExtraLifeMessage&&!showCsBonusScoreMessage&&!showPerfectMessage&&!showCsHitsMessage&&!showCSClearMessage&&!showReadyMessage&&setTimeout(()=>{const _0x3f5431=_0x41ce75;if(isInGameState){explosions=[];if(typeof updateExplosions===_0x3f5431(0x1d3))updateExplosions();showExtraLifeMessage=!![],extraLifeMessageStartTime=Date['now'](),playSound(_0x3f5431(0x2b7),![],0.5);}},EXPLOSION_DURATION);});}catch(_0x4d6173){console[_0x307980(0x208)]('Error\x20checking/awarding\x20extra\x20life:',_0x4d6173);}}